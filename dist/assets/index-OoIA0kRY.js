function QZ(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var dVe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zk={exports:{}},jb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR;function JZ(){if(aR)return jb;aR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:o,ref:s!==void 0?s:null,props:i}}return jb.Fragment=t,jb.jsx=r,jb.jsxs=r,jb}var nR;function ZZ(){return nR||(nR=1,zk.exports=JZ()),zk.exports}var n=ZZ(),Hk={exports:{}},va={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR;function eee(){if(sR)return va;sR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(J){return J===null||typeof J!="object"?null:(J=h&&J[h]||J["@@iterator"],typeof J=="function"?J:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function b(J,ie,M){this.props=J,this.context=ie,this.refs=g,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(J,ie){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ie,"setState")},b.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function y(){}y.prototype=b.prototype;function S(J,ie,M){this.props=J,this.context=ie,this.refs=g,this.updater=M||p}var w=S.prototype=new y;w.constructor=S,v(w,b.prototype),w.isPureReactComponent=!0;var k=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function E(J,ie,M,z,ee,ne){return M=ne.ref,{$$typeof:e,type:J,key:ie,ref:M!==void 0?M:null,props:ne}}function T(J,ie){return E(J.type,ie,void 0,void 0,void 0,J.props)}function I(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function F(J){var ie={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(M){return ie[M]})}var A=/\/+/g;function P(J,ie){return typeof J=="object"&&J!==null&&J.key!=null?F(""+J.key):ie.toString(36)}function q(){}function V(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(q,q):(J.status="pending",J.then(function(ie){J.status==="pending"&&(J.status="fulfilled",J.value=ie)},function(ie){J.status==="pending"&&(J.status="rejected",J.reason=ie)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function Y(J,ie,M,z,ee){var ne=typeof J;(ne==="undefined"||ne==="boolean")&&(J=null);var W=!1;if(J===null)W=!0;else switch(ne){case"bigint":case"string":case"number":W=!0;break;case"object":switch(J.$$typeof){case e:case t:W=!0;break;case u:return W=J._init,Y(W(J._payload),ie,M,z,ee)}}if(W)return ee=ee(J),W=z===""?"."+P(J,0):z,k(ee)?(M="",W!=null&&(M=W.replace(A,"$&/")+"/"),Y(ee,ie,M,"",function(te){return te})):ee!=null&&(I(ee)&&(ee=T(ee,M+(ee.key==null||J&&J.key===ee.key?"":(""+ee.key).replace(A,"$&/")+"/")+W)),ie.push(ee)),1;W=0;var re=z===""?".":z+":";if(k(J))for(var le=0;le<J.length;le++)z=J[le],ne=re+P(z,le),W+=Y(z,ie,M,ne,ee);else if(le=f(J),typeof le=="function")for(J=le.call(J),le=0;!(z=J.next()).done;)z=z.value,ne=re+P(z,le++),W+=Y(z,ie,M,ne,ee);else if(ne==="object"){if(typeof J.then=="function")return Y(V(J),ie,M,z,ee);throw ie=String(J),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return W}function B(J,ie,M){if(J==null)return J;var z=[],ee=0;return Y(J,z,"","",function(ne){return ie.call(M,ne,ee++)}),z}function Q(J){if(J._status===-1){var ie=J._result;ie=ie(),ie.then(function(M){(J._status===0||J._status===-1)&&(J._status=1,J._result=M)},function(M){(J._status===0||J._status===-1)&&(J._status=2,J._result=M)}),J._status===-1&&(J._status=0,J._result=ie)}if(J._status===1)return J._result.default;throw J._result}var R=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function Z(){}return va.Children={map:B,forEach:function(J,ie,M){B(J,function(){ie.apply(this,arguments)},M)},count:function(J){var ie=0;return B(J,function(){ie++}),ie},toArray:function(J){return B(J,function(ie){return ie})||[]},only:function(J){if(!I(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},va.Component=b,va.Fragment=r,va.Profiler=s,va.PureComponent=S,va.StrictMode=a,va.Suspense=c,va.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,va.__COMPILER_RUNTIME={__proto__:null,c:function(J){return C.H.useMemoCache(J)}},va.cache=function(J){return function(){return J.apply(null,arguments)}},va.cloneElement=function(J,ie,M){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var z=v({},J.props),ee=J.key,ne=void 0;if(ie!=null)for(W in ie.ref!==void 0&&(ne=void 0),ie.key!==void 0&&(ee=""+ie.key),ie)!_.call(ie,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&ie.ref===void 0||(z[W]=ie[W]);var W=arguments.length-2;if(W===1)z.children=M;else if(1<W){for(var re=Array(W),le=0;le<W;le++)re[le]=arguments[le+2];z.children=re}return E(J.type,ee,void 0,void 0,ne,z)},va.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:i,_context:J},J},va.createElement=function(J,ie,M){var z,ee={},ne=null;if(ie!=null)for(z in ie.key!==void 0&&(ne=""+ie.key),ie)_.call(ie,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(ee[z]=ie[z]);var W=arguments.length-2;if(W===1)ee.children=M;else if(1<W){for(var re=Array(W),le=0;le<W;le++)re[le]=arguments[le+2];ee.children=re}if(J&&J.defaultProps)for(z in W=J.defaultProps,W)ee[z]===void 0&&(ee[z]=W[z]);return E(J,ne,void 0,void 0,null,ee)},va.createRef=function(){return{current:null}},va.forwardRef=function(J){return{$$typeof:l,render:J}},va.isValidElement=I,va.lazy=function(J){return{$$typeof:u,_payload:{_status:-1,_result:J},_init:Q}},va.memo=function(J,ie){return{$$typeof:d,type:J,compare:ie===void 0?null:ie}},va.startTransition=function(J){var ie=C.T,M={};C.T=M;try{var z=J(),ee=C.S;ee!==null&&ee(M,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(Z,R)}catch(ne){R(ne)}finally{C.T=ie}},va.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},va.use=function(J){return C.H.use(J)},va.useActionState=function(J,ie,M){return C.H.useActionState(J,ie,M)},va.useCallback=function(J,ie){return C.H.useCallback(J,ie)},va.useContext=function(J){return C.H.useContext(J)},va.useDebugValue=function(){},va.useDeferredValue=function(J,ie){return C.H.useDeferredValue(J,ie)},va.useEffect=function(J,ie,M){var z=C.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(J,ie)},va.useId=function(){return C.H.useId()},va.useImperativeHandle=function(J,ie,M){return C.H.useImperativeHandle(J,ie,M)},va.useInsertionEffect=function(J,ie){return C.H.useInsertionEffect(J,ie)},va.useLayoutEffect=function(J,ie){return C.H.useLayoutEffect(J,ie)},va.useMemo=function(J,ie){return C.H.useMemo(J,ie)},va.useOptimistic=function(J,ie){return C.H.useOptimistic(J,ie)},va.useReducer=function(J,ie,M){return C.H.useReducer(J,ie,M)},va.useRef=function(J){return C.H.useRef(J)},va.useState=function(J){return C.H.useState(J)},va.useSyncExternalStore=function(J,ie,M){return C.H.useSyncExternalStore(J,ie,M)},va.useTransition=function(){return C.H.useTransition()},va.version="19.1.0",va}var iR;function dg(){return iR||(iR=1,Hk.exports=eee()),Hk.exports}var j=dg();const Xt=Kc(j),gw=QZ({__proto__:null,default:Xt},[j]);var Wk={exports:{}},Nb={},Gk={exports:{}},Yk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR;function tee(){return oR||(oR=1,function(e){function t(B,Q){var R=B.length;B.push(Q);e:for(;0<R;){var Z=R-1>>>1,J=B[Z];if(0<s(J,Q))B[Z]=Q,B[R]=J,R=Z;else break e}}function r(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var Q=B[0],R=B.pop();if(R!==Q){B[0]=R;e:for(var Z=0,J=B.length,ie=J>>>1;Z<ie;){var M=2*(Z+1)-1,z=B[M],ee=M+1,ne=B[ee];if(0>s(z,R))ee<J&&0>s(ne,z)?(B[Z]=ne,B[ee]=R,Z=ee):(B[Z]=z,B[M]=R,Z=M);else if(ee<J&&0>s(ne,R))B[Z]=ne,B[ee]=R,Z=ee;else break e}}return Q}function s(B,Q){var R=B.sortIndex-Q.sortIndex;return R!==0?R:B.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,v=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var Q=r(d);Q!==null;){if(Q.callback===null)a(d);else if(Q.startTime<=B)a(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=r(d)}}function C(B){if(g=!1,k(B),!v)if(r(c)!==null)v=!0,_||(_=!0,P());else{var Q=r(d);Q!==null&&Y(C,Q.startTime-B)}}var _=!1,E=-1,T=5,I=-1;function F(){return b?!0:!(e.unstable_now()-I<T)}function A(){if(b=!1,_){var B=e.unstable_now();I=B;var Q=!0;try{e:{v=!1,g&&(g=!1,S(E),E=-1),p=!0;var R=f;try{t:{for(k(B),h=r(c);h!==null&&!(h.expirationTime>B&&F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var J=Z(h.expirationTime<=B);if(B=e.unstable_now(),typeof J=="function"){h.callback=J,k(B),Q=!0;break t}h===r(c)&&a(c),k(B)}else a(c);h=r(c)}if(h!==null)Q=!0;else{var ie=r(d);ie!==null&&Y(C,ie.startTime-B),Q=!1}}break e}finally{h=null,f=R,p=!1}Q=void 0}}finally{Q?P():_=!1}}}var P;if(typeof w=="function")P=function(){w(A)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,V=q.port2;q.port1.onmessage=A,P=function(){V.postMessage(null)}}else P=function(){y(A,0)};function Y(B,Q){E=y(function(){B(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var R=f;f=Q;try{return B()}finally{f=R}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var R=f;f=B;try{return Q()}finally{f=R}},e.unstable_scheduleCallback=function(B,Q,R){var Z=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?Z+R:Z):R=Z,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=R+J,B={id:u++,callback:Q,priorityLevel:B,startTime:R,expirationTime:J,sortIndex:-1},R>Z?(B.sortIndex=R,t(d,B),r(c)===null&&B===r(d)&&(g?(S(E),E=-1):g=!0,Y(C,R-Z))):(B.sortIndex=J,t(c,B),v||p||(v=!0,_||(_=!0,P()))),B},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(B){var Q=f;return function(){var R=f;f=Q;try{return B.apply(this,arguments)}finally{f=R}}}}(Yk)),Yk}var lR;function ree(){return lR||(lR=1,Gk.exports=tee()),Gk.exports}var Kk={exports:{}},xo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR;function aee(){if(cR)return xo;cR=1;var e=dg();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return xo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,xo.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},xo.flushSync=function(c){var d=o.T,u=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=u,a.d.f()}},xo.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},xo.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},xo.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),f=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:p}):u==="script"&&a.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},xo.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},xo.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);a.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},xo.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},xo.requestFormReset=function(c){a.d.r(c)},xo.unstable_batchedUpdates=function(c,d){return c(d)},xo.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},xo.useFormStatus=function(){return o.H.useHostTransitionStatus()},xo.version="19.1.0",xo}var dR;function m$(){if(dR)return Kk.exports;dR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Kk.exports=aee(),Kk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function nee(){if(uR)return Nb;uR=1;var e=ree(),t=dg(),r=m$();function a(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)x+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var x=m,N=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(N=x.return),m=x.return;while(m)}return x.tag===3?N:null}function o(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function l(m){if(i(m)!==m)throw Error(a(188))}function c(m){var x=m.alternate;if(!x){if(x=i(m),x===null)throw Error(a(188));return x!==m?null:m}for(var N=m,D=x;;){var L=N.return;if(L===null)break;var G=L.alternate;if(G===null){if(D=L.return,D!==null){N=D;continue}break}if(L.child===G.child){for(G=L.child;G;){if(G===N)return l(L),m;if(G===D)return l(L),x;G=G.sibling}throw Error(a(188))}if(N.return!==D.return)N=L,D=G;else{for(var me=!1,ke=L.child;ke;){if(ke===N){me=!0,N=L,D=G;break}if(ke===D){me=!0,D=L,N=G;break}ke=ke.sibling}if(!me){for(ke=G.child;ke;){if(ke===N){me=!0,N=G,D=L;break}if(ke===D){me=!0,D=G,N=L;break}ke=ke.sibling}if(!me)throw Error(a(189))}}if(N.alternate!==D)throw Error(a(190))}if(N.tag!==3)throw Error(a(188));return N.stateNode.current===N?m:x}function d(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m;for(m=m.child;m!==null;){if(x=d(m),x!==null)return x;m=m.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(m){return m===null||typeof m!="object"?null:(m=A&&m[A]||m["@@iterator"],typeof m=="function"?m:null)}var q=Symbol.for("react.client.reference");function V(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===q?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case v:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case C:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case p:return"Portal";case w:return(m.displayName||"Context")+".Provider";case S:return(m._context.displayName||"Context")+".Consumer";case k:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case E:return x=m.displayName||null,x!==null?x:V(m.type)||"Memo";case T:x=m._payload,m=m._init;try{return V(m(x))}catch{}}return null}var Y=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},Z=[],J=-1;function ie(m){return{current:m}}function M(m){0>J||(m.current=Z[J],Z[J]=null,J--)}function z(m,x){J++,Z[J]=m.current,m.current=x}var ee=ie(null),ne=ie(null),W=ie(null),re=ie(null);function le(m,x){switch(z(W,x),z(ne,m),z(ee,null),x.nodeType){case 9:case 11:m=(m=x.documentElement)&&(m=m.namespaceURI)?TM(m):0;break;default:if(m=x.tagName,x=x.namespaceURI)x=TM(x),m=IM(x,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}M(ee),z(ee,m)}function te(){M(ee),M(ne),M(W)}function K(m){m.memoizedState!==null&&z(re,m);var x=ee.current,N=IM(x,m.type);x!==N&&(z(ne,m),z(ee,N))}function de(m){ne.current===m&&(M(ee),M(ne)),re.current===m&&(M(re),xb._currentValue=R)}var H=Object.prototype.hasOwnProperty,se=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,ue=e.unstable_shouldYield,oe=e.unstable_requestPaint,ge=e.unstable_now,Ne=e.unstable_getCurrentPriorityLevel,Me=e.unstable_ImmediatePriority,We=e.unstable_UserBlockingPriority,tt=e.unstable_NormalPriority,mt=e.unstable_LowPriority,Be=e.unstable_IdlePriority,dt=e.log,Dt=e.unstable_setDisableYieldValue,It=null,zt=null;function xe(m){if(typeof dt=="function"&&Dt(m),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(It,m)}catch{}}var fe=Math.clz32?Math.clz32:Te,ve=Math.log,pe=Math.LN2;function Te(m){return m>>>=0,m===0?32:31-(ve(m)/pe|0)|0}var Xe=256,kt=4194304;function Je(m){var x=m&42;if(x!==0)return x;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function ze(m,x,N){var D=m.pendingLanes;if(D===0)return 0;var L=0,G=m.suspendedLanes,me=m.pingedLanes;m=m.warmLanes;var ke=D&134217727;return ke!==0?(D=ke&~G,D!==0?L=Je(D):(me&=ke,me!==0?L=Je(me):N||(N=ke&~m,N!==0&&(L=Je(N))))):(ke=D&~G,ke!==0?L=Je(ke):me!==0?L=Je(me):N||(N=D&~m,N!==0&&(L=Je(N)))),L===0?0:x!==0&&x!==L&&(x&G)===0&&(G=L&-L,N=x&-x,G>=N||G===32&&(N&4194048)!==0)?x:L}function Fe(m,x){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&x)===0}function Ve(m,x){switch(m){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(){var m=Xe;return Xe<<=1,(Xe&4194048)===0&&(Xe=256),m}function Pe(){var m=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),m}function Re(m){for(var x=[],N=0;31>N;N++)x.push(m);return x}function Ye(m,x){m.pendingLanes|=x,x!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function At(m,x,N,D,L,G){var me=m.pendingLanes;m.pendingLanes=N,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=N,m.entangledLanes&=N,m.errorRecoveryDisabledLanes&=N,m.shellSuspendCounter=0;var ke=m.entanglements,et=m.expirationTimes,_t=m.hiddenUpdates;for(N=me&~N;0<N;){var Kt=31-fe(N),ar=1<<Kt;ke[Kt]=0,et[Kt]=-1;var Pt=_t[Kt];if(Pt!==null)for(_t[Kt]=null,Kt=0;Kt<Pt.length;Kt++){var Mt=Pt[Kt];Mt!==null&&(Mt.lane&=-536870913)}N&=~ar}D!==0&&Gt(m,D,0),G!==0&&L===0&&m.tag!==0&&(m.suspendedLanes|=G&~(me&~x))}function Gt(m,x,N){m.pendingLanes|=x,m.suspendedLanes&=~x;var D=31-fe(x);m.entangledLanes|=x,m.entanglements[D]=m.entanglements[D]|1073741824|N&4194090}function De(m,x){var N=m.entangledLanes|=x;for(m=m.entanglements;N;){var D=31-fe(N),L=1<<D;L&x|m[D]&x&&(m[D]|=x),N&=~L}}function Ee(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function it(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Tt(){var m=Q.p;return m!==0?m:(m=window.event,m===void 0?32:QM(m.type))}function lr(m,x){var N=Q.p;try{return Q.p=m,x()}finally{Q.p=N}}var Rt=Math.random().toString(36).slice(2),sr="__reactFiber$"+Rt,pr="__reactProps$"+Rt,Nr="__reactContainer$"+Rt,gt="__reactEvents$"+Rt,Bt="__reactListeners$"+Rt,he="__reactHandles$"+Rt,Le="__reactResources$"+Rt,Ae="__reactMarker$"+Rt;function _e(m){delete m[sr],delete m[pr],delete m[gt],delete m[Bt],delete m[he]}function Ue(m){var x=m[sr];if(x)return x;for(var N=m.parentNode;N;){if(x=N[Nr]||N[sr]){if(N=x.alternate,x.child!==null||N!==null&&N.child!==null)for(m=RM(m);m!==null;){if(N=m[sr])return N;m=RM(m)}return x}m=N,N=m.parentNode}return null}function He(m){if(m=m[sr]||m[Nr]){var x=m.tag;if(x===5||x===6||x===13||x===26||x===27||x===3)return m}return null}function xt(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m.stateNode;throw Error(a(33))}function jt(m){var x=m[Le];return x||(x=m[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function ct(m){m[Ae]=!0}var Nt=new Set,wt={};function er(m,x){cr(m,x),cr(m+"Capture",x)}function cr(m,x){for(wt[m]=x,m=0;m<x.length;m++)Nt.add(x[m])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},Ke={};function mr(m){return H.call(Ke,m)?!0:H.call(ur,m)?!1:xr.test(m)?Ke[m]=!0:(ur[m]=!0,!1)}function fr(m,x,N){if(mr(x))if(N===null)m.removeAttribute(x);else{switch(typeof N){case"undefined":case"function":case"symbol":m.removeAttribute(x);return;case"boolean":var D=x.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){m.removeAttribute(x);return}}m.setAttribute(x,""+N)}}function Lr(m,x,N){if(N===null)m.removeAttribute(x);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(x);return}m.setAttribute(x,""+N)}}function fa(m,x,N,D){if(D===null)m.removeAttribute(N);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(N);return}m.setAttributeNS(x,N,""+D)}}var Pa,wn;function Bn(m){if(Pa===void 0)try{throw Error()}catch(N){var x=N.stack.trim().match(/\n( *(at )?)/);Pa=x&&x[1]||"",wn=-1<N.stack.indexOf(`
    at`)?" (<anonymous>)":-1<N.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pa+m+wn}var cn=!1;function Is(m,x){if(!m||cn)return"";cn=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(x){var ar=function(){throw Error()};if(Object.defineProperty(ar.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ar,[])}catch(Mt){var Pt=Mt}Reflect.construct(m,[],ar)}else{try{ar.call()}catch(Mt){Pt=Mt}m.call(ar.prototype)}}else{try{throw Error()}catch(Mt){Pt=Mt}(ar=m())&&typeof ar.catch=="function"&&ar.catch(function(){})}}catch(Mt){if(Mt&&Pt&&typeof Mt.stack=="string")return[Mt.stack,Pt.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=D.DetermineComponentFrameRoot(),me=G[0],ke=G[1];if(me&&ke){var et=me.split(`
`),_t=ke.split(`
`);for(L=D=0;D<et.length&&!et[D].includes("DetermineComponentFrameRoot");)D++;for(;L<_t.length&&!_t[L].includes("DetermineComponentFrameRoot");)L++;if(D===et.length||L===_t.length)for(D=et.length-1,L=_t.length-1;1<=D&&0<=L&&et[D]!==_t[L];)L--;for(;1<=D&&0<=L;D--,L--)if(et[D]!==_t[L]){if(D!==1||L!==1)do if(D--,L--,0>L||et[D]!==_t[L]){var Kt=`
`+et[D].replace(" at new "," at ");return m.displayName&&Kt.includes("<anonymous>")&&(Kt=Kt.replace("<anonymous>",m.displayName)),Kt}while(1<=D&&0<=L);break}}}finally{cn=!1,Error.prepareStackTrace=N}return(N=m?m.displayName||m.name:"")?Bn(N):""}function tn(m){switch(m.tag){case 26:case 27:case 5:return Bn(m.type);case 16:return Bn("Lazy");case 13:return Bn("Suspense");case 19:return Bn("SuspenseList");case 0:case 15:return Is(m.type,!1);case 11:return Is(m.type.render,!1);case 1:return Is(m.type,!0);case 31:return Bn("Activity");default:return""}}function Ga(m){try{var x="";do x+=tn(m),m=m.return;while(m);return x}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}function In(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Ci(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ki(m){var x=Ci(m)?"checked":"value",N=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),D=""+m[x];if(!m.hasOwnProperty(x)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var L=N.get,G=N.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return L.call(this)},set:function(me){D=""+me,G.call(this,me)}}),Object.defineProperty(m,x,{enumerable:N.enumerable}),{getValue:function(){return D},setValue:function(me){D=""+me},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function Xn(m){m._valueTracker||(m._valueTracker=ki(m))}function kl(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var N=x.getValue(),D="";return m&&(D=Ci(m)?m.checked?"true":"false":m.value),m=D,m!==N?(x.setValue(m),!0):!1}function Un(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var co=/[\n"\\]/g;function rn(m){return m.replace(co,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function Vo(m,x,N,D,L,G,me,ke){m.name="",me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?m.type=me:m.removeAttribute("type"),x!=null?me==="number"?(x===0&&m.value===""||m.value!=x)&&(m.value=""+In(x)):m.value!==""+In(x)&&(m.value=""+In(x)):me!=="submit"&&me!=="reset"||m.removeAttribute("value"),x!=null?El(m,me,In(x)):N!=null?El(m,me,In(N)):D!=null&&m.removeAttribute("value"),L==null&&G!=null&&(m.defaultChecked=!!G),L!=null&&(m.checked=L&&typeof L!="function"&&typeof L!="symbol"),ke!=null&&typeof ke!="function"&&typeof ke!="symbol"&&typeof ke!="boolean"?m.name=""+In(ke):m.removeAttribute("name")}function td(m,x,N,D,L,G,me,ke){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(m.type=G),x!=null||N!=null){if(!(G!=="submit"&&G!=="reset"||x!=null))return;N=N!=null?""+In(N):"",x=x!=null?""+In(x):N,ke||x===m.value||(m.value=x),m.defaultValue=x}D=D??L,D=typeof D!="function"&&typeof D!="symbol"&&!!D,m.checked=ke?m.checked:!!D,m.defaultChecked=!!D,me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"&&(m.name=me)}function El(m,x,N){x==="number"&&Un(m.ownerDocument)===m||m.defaultValue===""+N||(m.defaultValue=""+N)}function ut(m,x,N,D){if(m=m.options,x){x={};for(var L=0;L<N.length;L++)x["$"+N[L]]=!0;for(N=0;N<m.length;N++)L=x.hasOwnProperty("$"+m[N].value),m[N].selected!==L&&(m[N].selected=L),L&&D&&(m[N].defaultSelected=!0)}else{for(N=""+In(N),x=null,L=0;L<m.length;L++){if(m[L].value===N){m[L].selected=!0,D&&(m[L].defaultSelected=!0);return}x!==null||m[L].disabled||(x=m[L])}x!==null&&(x.selected=!0)}}function nr(m,x,N){if(x!=null&&(x=""+In(x),x!==m.value&&(m.value=x),N==null)){m.defaultValue!==x&&(m.defaultValue=x);return}m.defaultValue=N!=null?""+In(N):""}function Ot(m,x,N,D){if(x==null){if(D!=null){if(N!=null)throw Error(a(92));if(Y(D)){if(1<D.length)throw Error(a(93));D=D[0]}N=D}N==null&&(N=""),x=N}N=In(x),m.defaultValue=N,D=m.textContent,D===N&&D!==""&&D!==null&&(m.value=D)}function jr(m,x){if(x){var N=m.firstChild;if(N&&N===m.lastChild&&N.nodeType===3){N.nodeValue=x;return}}m.textContent=x}var gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zd(m,x,N){var D=x.indexOf("--")===0;N==null||typeof N=="boolean"||N===""?D?m.setProperty(x,""):x==="float"?m.cssFloat="":m[x]="":D?m.setProperty(x,N):typeof N!="number"||N===0||gs.has(x)?x==="float"?m.cssFloat=N:m[x]=(""+N).trim():m[x]=N+"px"}function Ei(m,x,N){if(x!=null&&typeof x!="object")throw Error(a(62));if(m=m.style,N!=null){for(var D in N)!N.hasOwnProperty(D)||x!=null&&x.hasOwnProperty(D)||(D.indexOf("--")===0?m.setProperty(D,""):D==="float"?m.cssFloat="":m[D]="");for(var L in x)D=x[L],x.hasOwnProperty(L)&&N[L]!==D&&zd(m,L,D)}else for(var G in x)x.hasOwnProperty(G)&&zd(m,G,x[G])}function ui(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _l=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dl(m){return Hd.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}var Wd=null;function bs(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ze=null,Jt=null;function rt(m){var x=He(m);if(x&&(m=x.stateNode)){var N=m[pr]||null;e:switch(m=x.stateNode,x.type){case"input":if(Vo(m,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name),x=N.name,N.type==="radio"&&x!=null){for(N=m;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll('input[name="'+rn(""+x)+'"][type="radio"]'),x=0;x<N.length;x++){var D=N[x];if(D!==m&&D.form===m.form){var L=D[pr]||null;if(!L)throw Error(a(90));Vo(D,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(x=0;x<N.length;x++)D=N[x],D.form===m.form&&kl(D)}break e;case"textarea":nr(m,N.value,N.defaultValue);break e;case"select":x=N.value,x!=null&&ut(m,!!N.multiple,x,!1)}}}var Cr=!1;function Ps(m,x,N){if(Cr)return m(x,N);Cr=!0;try{var D=m(x);return D}finally{if(Cr=!1,(Ze!==null||Jt!==null)&&(Ej(),Ze&&(x=Ze,m=Jt,Jt=Ze=null,rt(x),m)))for(x=0;x<m.length;x++)rt(m[x])}}function Ma(m,x){var N=m.stateNode;if(N===null)return null;var D=N[pr]||null;if(D===null)return null;N=D[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(m=m.type,D=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!D;break e;default:m=!1}if(m)return null;if(N&&typeof N!="function")throw Error(a(231,x,typeof N));return N}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if($a)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){_i=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{_i=!1}var al=null,pp=null,Tf=null;function hv(){if(Tf)return Tf;var m,x=pp,N=x.length,D,L="value"in al?al.value:al.textContent,G=L.length;for(m=0;m<N&&x[m]===L[m];m++);var me=N-m;for(D=1;D<=me&&x[N-D]===L[G-D];D++);return Tf=L.slice(m,1<D?1-D:void 0)}function Gd(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function hc(){return!0}function rd(){return!1}function Di(m){function x(N,D,L,G,me){this._reactName=N,this._targetInst=L,this.type=D,this.nativeEvent=G,this.target=me,this.currentTarget=null;for(var ke in m)m.hasOwnProperty(ke)&&(N=m[ke],this[ke]=N?N(G):G[ke]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?hc:rd,this.isPropagationStopped=rd,this}return u(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),x}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yd=Di(qo),fc=u({},qo,{view:0,detail:0}),fv=Di(fc),If,Pf,Kd,zo=u({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Kd&&(Kd&&m.type==="mousemove"?(If=m.screenX-Kd.screenX,Pf=m.screenY-Kd.screenY):Pf=If=0,Kd=m),If)},movementY:function(m){return"movementY"in m?m.movementY:Pf}}),mc=Di(zo),Pg=u({},zo,{dataTransfer:0}),Xd=Di(Pg),Al=u({},fc,{relatedTarget:0}),hh=Di(Al),fh=u({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=Di(fh),Of=u({},qo,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Mg=Di(Of),xp=u({},qo,{data:0}),Mf=Di(xp),mv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=vp[m])?!!x[m]:!1}function Ff(){return gp}var Rg=u({},fc,{key:function(m){if(m.key){var x=mv[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=Gd(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Rf[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(m){return m.type==="keypress"?Gd(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Gd(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Lf=Di(Rg),mh=u({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=Di(mh),Qd=u({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),bp=Di(Qd),X=u({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Di(X),Qe=u({},zo,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),nt=Di(Qe),yt=u({},qo,{newState:0,oldState:0}),qt=Di(yt),dr=[9,13,27,32],Sr=$a&&"CompositionEvent"in window,Rr=null;$a&&"documentMode"in document&&(Rr=document.documentMode);var ca=$a&&"TextEvent"in window&&!Rr,ia=$a&&(!Sr||Rr&&8<Rr&&11>=Rr),_a=" ",Pn=!1;function $n(m,x){switch(m){case"keyup":return dr.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function is(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var os=!1;function Js(m,x){switch(m){case"compositionend":return is(x);case"keypress":return x.which!==32?null:(Pn=!0,_a);case"textInput":return m=x.data,m===_a&&Pn?null:m;default:return null}}function Tl(m,x){if(os)return m==="compositionend"||!Sr&&$n(m,x)?(m=hv(),Tf=pp=al=null,os=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return ia&&x.locale!=="ko"?null:x.data;default:return null}}var Ho={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Il(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Ho[m.type]:x==="textarea"}function yp(m,x,N,D){Ze?Jt?Jt.push(D):Jt=[D]:Ze=D,x=Pj(x,"onChange"),0<x.length&&(N=new Yd("onChange","change",null,N,D),m.push({event:N,listeners:x}))}var ad=null,nd=null;function Uf(m){kM(m,0)}function Jd(m){var x=xt(m);if(kl(x))return m}function $f(m,x){if(m==="change")return x}var ph=!1;if($a){var Os;if($a){var Zd="oninput"in document;if(!Zd){var xh=document.createElement("div");xh.setAttribute("oninput","return;"),Zd=typeof xh.oninput=="function"}Os=Zd}else Os=!1;ph=Os&&(!document.documentMode||9<document.documentMode)}function vh(){ad&&(ad.detachEvent("onpropertychange",Vf),nd=ad=null)}function Vf(m){if(m.propertyName==="value"&&Jd(nd)){var x=[];yp(x,nd,m,bs(m)),Ps(Uf,x)}}function uo(m,x,N){m==="focusin"?(vh(),ad=x,nd=N,ad.attachEvent("onpropertychange",Vf)):m==="focusout"&&vh()}function Fg(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Jd(nd)}function jp(m,x){if(m==="click")return Jd(x)}function pv(m,x){if(m==="input"||m==="change")return Jd(x)}function nl(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var Zs=typeof Object.is=="function"?Object.is:nl;function eu(m,x){if(Zs(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var N=Object.keys(m),D=Object.keys(x);if(N.length!==D.length)return!1;for(D=0;D<N.length;D++){var L=N[D];if(!H.call(x,L)||!Zs(m[L],x[L]))return!1}return!0}function Np(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function sd(m,x){var N=Np(m);m=0;for(var D;N;){if(N.nodeType===3){if(D=m+N.textContent.length,m<=x&&D>=x)return{node:N,offset:x-m};m=D}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=Np(N)}}function tu(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?tu(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function Wi(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var x=Un(m.document);x instanceof m.HTMLIFrameElement;){try{var N=typeof x.contentWindow.location.href=="string"}catch{N=!1}if(N)m=x.contentWindow;else break;x=Un(m.document)}return x}function hi(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}var ru=$a&&"documentMode"in document&&11>=document.documentMode,ho=null,Pl=null,pc=null,Ol=!1;function Qn(m,x,N){var D=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;Ol||ho==null||ho!==Un(D)||(D=ho,"selectionStart"in D&&hi(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),pc&&eu(pc,D)||(pc=D,D=Pj(Pl,"onSelect"),0<D.length&&(x=new Yd("onSelect","select",null,x,N),m.push({event:x,listeners:D}),x.target=ho)))}function Ml(m,x){var N={};return N[m.toLowerCase()]=x.toLowerCase(),N["Webkit"+m]="webkit"+x,N["Moz"+m]="moz"+x,N}var ys={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionrun:Ml("Transition","TransitionRun"),transitionstart:Ml("Transition","TransitionStart"),transitioncancel:Ml("Transition","TransitionCancel"),transitionend:Ml("Transition","TransitionEnd")},fo={},gh={};$a&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function xc(m){if(fo[m])return fo[m];if(!ys[m])return m;var x=ys[m],N;for(N in x)if(x.hasOwnProperty(N)&&N in gh)return fo[m]=x[N];return m}var qf=xc("animationend"),au=xc("animationiteration"),nu=xc("animationstart"),su=xc("transitionrun"),bh=xc("transitionstart"),zf=xc("transitioncancel"),iu=xc("transitionend"),id=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function Jn(m,x){id.set(m,x),er(x,[m])}var Wo=new WeakMap;function ja(m,x){if(typeof m=="object"&&m!==null){var N=Wo.get(m);return N!==void 0?N:(x={value:m,source:x,stack:Ga(x)},Wo.set(m,x),x)}return{value:m,source:x,stack:Ga(x)}}var Na=[],Sn=0,ls=0;function sl(){for(var m=Sn,x=ls=Sn=0;x<m;){var N=Na[x];Na[x++]=null;var D=Na[x];Na[x++]=null;var L=Na[x];Na[x++]=null;var G=Na[x];if(Na[x++]=null,D!==null&&L!==null){var me=D.pending;me===null?L.next=L:(L.next=me.next,me.next=L),D.pending=L}G!==0&&xv(N,L,G)}}function ou(m,x,N,D){Na[Sn++]=m,Na[Sn++]=x,Na[Sn++]=N,Na[Sn++]=D,ls|=D,m.lanes|=D,m=m.alternate,m!==null&&(m.lanes|=D)}function lu(m,x,N,D){return ou(m,x,N,D),jh(m)}function od(m,x){return ou(m,null,null,x),jh(m)}function xv(m,x,N){m.lanes|=N;var D=m.alternate;D!==null&&(D.lanes|=N);for(var L=!1,G=m.return;G!==null;)G.childLanes|=N,D=G.alternate,D!==null&&(D.childLanes|=N),G.tag===22&&(m=G.stateNode,m===null||m._visibility&1||(L=!0)),m=G,G=G.return;return m.tag===3?(G=m.stateNode,L&&x!==null&&(L=31-fe(N),m=G.hiddenUpdates,D=m[L],D===null?m[L]=[x]:D.push(x),x.lane=N|536870912),G):null}function jh(m){if(50<lb)throw lb=0,mk=null,Error(a(185));for(var x=m.return;x!==null;)m=x,x=m.return;return m.tag===3?m.stateNode:null}var ei={};function il(m,x,N,D){this.tag=m,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(m,x,N,D){return new il(m,x,N,D)}function Hf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function vc(m,x){var N=m.alternate;return N===null?(N=Ai(m.tag,x,m.key,m.mode),N.elementType=m.elementType,N.type=m.type,N.stateNode=m.stateNode,N.alternate=m,m.alternate=N):(N.pendingProps=x,N.type=m.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=m.flags&65011712,N.childLanes=m.childLanes,N.lanes=m.lanes,N.child=m.child,N.memoizedProps=m.memoizedProps,N.memoizedState=m.memoizedState,N.updateQueue=m.updateQueue,x=m.dependencies,N.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},N.sibling=m.sibling,N.index=m.index,N.ref=m.ref,N.refCleanup=m.refCleanup,N}function wp(m,x){m.flags&=65011714;var N=m.alternate;return N===null?(m.childLanes=0,m.lanes=x,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=N.childLanes,m.lanes=N.lanes,m.child=N.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=N.memoizedProps,m.memoizedState=N.memoizedState,m.updateQueue=N.updateQueue,m.type=N.type,x=N.dependencies,m.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),m}function Nh(m,x,N,D,L,G){var me=0;if(D=m,typeof m=="function")Hf(m)&&(me=1);else if(typeof m=="string")me=LZ(m,N,ee.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case I:return m=Ai(31,N,x,L),m.elementType=I,m.lanes=G,m;case v:return ld(N.children,L,G,x);case g:me=8,L|=24;break;case b:return m=Ai(12,N,x,L|2),m.elementType=b,m.lanes=G,m;case C:return m=Ai(13,N,x,L),m.elementType=C,m.lanes=G,m;case _:return m=Ai(19,N,x,L),m.elementType=_,m.lanes=G,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case y:case w:me=10;break e;case S:me=9;break e;case k:me=11;break e;case E:me=14;break e;case T:me=16,D=null;break e}me=29,N=Error(a(130,m===null?"null":typeof m,"")),D=null}return x=Ai(me,N,x,L),x.elementType=m,x.type=D,x.lanes=G,x}function ld(m,x,N,D){return m=Ai(7,m,D,x),m.lanes=N,m}function vv(m,x,N){return m=Ai(6,m,null,x),m.lanes=N,m}function Sp(m,x,N){return x=Ai(4,m.children!==null?m.children:[],m.key,x),x.lanes=N,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}var cu=[],cd=0,Wf=null,gv=0,ol=[],Go=0,wh=null,dd=1,ud="";function Sh(m,x){cu[cd++]=gv,cu[cd++]=Wf,Wf=m,gv=x}function Q1(m,x,N){ol[Go++]=dd,ol[Go++]=ud,ol[Go++]=wh,wh=m;var D=dd;m=ud;var L=32-fe(D)-1;D&=~(1<<L),N+=1;var G=32-fe(x)+L;if(30<G){var me=L-L%5;G=(D&(1<<me)-1).toString(32),D>>=me,L-=me,dd=1<<32-fe(x)+L|N<<L|D,ud=G+m}else dd=1<<G|N<<L|D,ud=m}function Cp(m){m.return!==null&&(Sh(m,1),Q1(m,1,0))}function kp(m){for(;m===Wf;)Wf=cu[--cd],cu[cd]=null,gv=cu[--cd],cu[cd]=null;for(;m===wh;)wh=ol[--Go],ol[Go]=null,ud=ol[--Go],ol[Go]=null,dd=ol[--Go],ol[Go]=null}var Ms=null,Zn=null,Va=!1,du=null,gc=!1,Lg=Error(a(519));function Ch(m){var x=Error(a(418,""));throw Gf(ja(x,m)),Lg}function J1(m){var x=m.stateNode,N=m.type,D=m.memoizedProps;switch(x[sr]=m,x[pr]=D,N){case"dialog":Aa("cancel",x),Aa("close",x);break;case"iframe":case"object":case"embed":Aa("load",x);break;case"video":case"audio":for(N=0;N<db.length;N++)Aa(db[N],x);break;case"source":Aa("error",x);break;case"img":case"image":case"link":Aa("error",x),Aa("load",x);break;case"details":Aa("toggle",x);break;case"input":Aa("invalid",x),td(x,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0),Xn(x);break;case"select":Aa("invalid",x);break;case"textarea":Aa("invalid",x),Ot(x,D.value,D.defaultValue,D.children),Xn(x)}N=D.children,typeof N!="string"&&typeof N!="number"&&typeof N!="bigint"||x.textContent===""+N||D.suppressHydrationWarning===!0||AM(x.textContent,N)?(D.popover!=null&&(Aa("beforetoggle",x),Aa("toggle",x)),D.onScroll!=null&&Aa("scroll",x),D.onScrollEnd!=null&&Aa("scrollend",x),D.onClick!=null&&(x.onclick=Oj),x=!0):x=!1,x||Ch(m)}function hd(m){for(Ms=m.return;Ms;)switch(Ms.tag){case 5:case 13:gc=!1;return;case 27:case 3:gc=!0;return;default:Ms=Ms.return}}function Gi(m){if(m!==Ms)return!1;if(!Va)return hd(m),Va=!0,!1;var x=m.tag,N;if((N=x!==3&&x!==27)&&((N=x===5)&&(N=m.type,N=!(N!=="form"&&N!=="button")||Ak(m.type,m.memoizedProps)),N=!N),N&&Zn&&Ch(m),hd(m),x===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8)if(N=m.data,N==="/$"){if(x===0){Zn=yd(m.nextSibling);break e}x--}else N!=="$"&&N!=="$!"&&N!=="$?"||x++;m=m.nextSibling}Zn=null}}else x===27?(x=Zn,dm(m.type)?(m=Ok,Ok=null,Zn=m):Zn=x):Zn=Ms?yd(m.stateNode.nextSibling):null;return!0}function Yo(){Zn=Ms=null,Va=!1}function Z1(){var m=du;return m!==null&&(dl===null?dl=m:dl.push.apply(dl,m),du=null),m}function Gf(m){du===null?du=[m]:du.push(m)}var bc=ie(null),ti=null,fd=null;function uu(m,x,N){z(bc,x._currentValue),x._currentValue=N}function yc(m){m._currentValue=bc.current,M(bc)}function bv(m,x,N){for(;m!==null;){var D=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,D!==null&&(D.childLanes|=x)):D!==null&&(D.childLanes&x)!==x&&(D.childLanes|=x),m===N)break;m=m.return}}function yv(m,x,N,D){var L=m.child;for(L!==null&&(L.return=m);L!==null;){var G=L.dependencies;if(G!==null){var me=L.child;G=G.firstContext;e:for(;G!==null;){var ke=G;G=L;for(var et=0;et<x.length;et++)if(ke.context===x[et]){G.lanes|=N,ke=G.alternate,ke!==null&&(ke.lanes|=N),bv(G.return,N,m),D||(me=null);break e}G=ke.next}}else if(L.tag===18){if(me=L.return,me===null)throw Error(a(341));me.lanes|=N,G=me.alternate,G!==null&&(G.lanes|=N),bv(me,N,m),me=null}else me=L.child;if(me!==null)me.return=L;else for(me=L;me!==null;){if(me===m){me=null;break}if(L=me.sibling,L!==null){L.return=me.return,me=L;break}me=me.return}L=me}}function Yf(m,x,N,D){m=null;for(var L=x,G=!1;L!==null;){if(!G){if((L.flags&524288)!==0)G=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var me=L.alternate;if(me===null)throw Error(a(387));if(me=me.memoizedProps,me!==null){var ke=L.type;Zs(L.pendingProps.value,me.value)||(m!==null?m.push(ke):m=[ke])}}else if(L===re.current){if(me=L.alternate,me===null)throw Error(a(387));me.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(m!==null?m.push(xb):m=[xb])}L=L.return}m!==null&&yv(x,m,N,D),x.flags|=262144}function jv(m){for(m=m.firstContext;m!==null;){if(!Zs(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function jc(m){ti=m,fd=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function Rs(m){return Nv(ti,m)}function hu(m,x){return ti===null&&jc(m),Nv(m,x)}function Nv(m,x){var N=x._currentValue;if(x={context:x,memoizedValue:N,next:null},fd===null){if(m===null)throw Error(a(308));fd=x,m.dependencies={lanes:0,firstContext:x},m.flags|=524288}else fd=fd.next=x;return N}var BC=typeof AbortController<"u"?AbortController:function(){var m=[],x=this.signal={aborted:!1,addEventListener:function(N,D){m.push(D)}};this.abort=function(){x.aborted=!0,m.forEach(function(N){return N()})}},ej=e.unstable_scheduleCallback,UC=e.unstable_NormalPriority,Fs={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bg(){return{controller:new BC,data:new Map,refCount:0}}function Ep(m){m.refCount--,m.refCount===0&&ej(UC,function(){m.controller.abort()})}var _p=null,Ug=0,kh=0,md=null;function $C(m,x){if(_p===null){var N=_p=[];Ug=0,kh=jk(),md={status:"pending",value:void 0,then:function(D){N.push(D)}}}return Ug++,x.then(tj,tj),x}function tj(){if(--Ug===0&&_p!==null){md!==null&&(md.status="fulfilled");var m=_p;_p=null,kh=0,md=null;for(var x=0;x<m.length;x++)(0,m[x])()}}function rj(m,x){var N=[],D={status:"pending",value:null,reason:null,then:function(L){N.push(L)}};return m.then(function(){D.status="fulfilled",D.value=x;for(var L=0;L<N.length;L++)(0,N[L])(x)},function(L){for(D.status="rejected",D.reason=L,L=0;L<N.length;L++)(0,N[L])(void 0)}),D}var O=B.S;B.S=function(m,x){typeof x=="object"&&x!==null&&typeof x.then=="function"&&$C(m,x),O!==null&&O(m,x)};var U=ie(null);function ae(){var m=U.current;return m!==null?m:Mn.pooledCache}function ce(m,x){x===null?z(U,U.current):z(U,x.pool)}function ye(){var m=ae();return m===null?null:{parent:Fs._currentValue,pool:m}}var we=Error(a(460)),Se=Error(a(474)),Ce=Error(a(542)),Oe={then:function(){}};function qe(m){return m=m.status,m==="fulfilled"||m==="rejected"}function st(){}function Et(m,x,N){switch(N=m[N],N===void 0?m.push(x):N!==x&&(x.then(st,st),x=N),x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,tr(m),m;default:if(typeof x.status=="string")x.then(st,st);else{if(m=Mn,m!==null&&100<m.shellSuspendCounter)throw Error(a(482));m=x,m.status="pending",m.then(function(D){if(x.status==="pending"){var L=x;L.status="fulfilled",L.value=D}},function(D){if(x.status==="pending"){var L=x;L.status="rejected",L.reason=D}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,tr(m),m}throw St=x,we}}var St=null;function vt(){if(St===null)throw Error(a(459));var m=St;return St=null,m}function tr(m){if(m===we||m===Ce)throw Error(a(483))}var Lt=!1;function ot(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ht(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function Yt(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function rr(m,x,N){var D=m.updateQueue;if(D===null)return null;if(D=D.shared,(pn&2)!==0){var L=D.pending;return L===null?x.next=x:(x.next=L.next,L.next=x),D.pending=x,x=jh(m),xv(m,null,N),x}return ou(m,D,x,N),jh(m)}function Qt(m,x,N){if(x=x.updateQueue,x!==null&&(x=x.shared,(N&4194048)!==0)){var D=x.lanes;D&=m.pendingLanes,N|=D,x.lanes=N,De(m,N)}}function kr(m,x){var N=m.updateQueue,D=m.alternate;if(D!==null&&(D=D.updateQueue,N===D)){var L=null,G=null;if(N=N.firstBaseUpdate,N!==null){do{var me={lane:N.lane,tag:N.tag,payload:N.payload,callback:null,next:null};G===null?L=G=me:G=G.next=me,N=N.next}while(N!==null);G===null?L=G=x:G=G.next=x}else L=G=x;N={baseState:D.baseState,firstBaseUpdate:L,lastBaseUpdate:G,shared:D.shared,callbacks:D.callbacks},m.updateQueue=N;return}m=N.lastBaseUpdate,m===null?N.firstBaseUpdate=x:m.next=x,N.lastBaseUpdate=x}var br=!1;function qr(){if(br){var m=md;if(m!==null)throw m}}function yr(m,x,N,D){br=!1;var L=m.updateQueue;Lt=!1;var G=L.firstBaseUpdate,me=L.lastBaseUpdate,ke=L.shared.pending;if(ke!==null){L.shared.pending=null;var et=ke,_t=et.next;et.next=null,me===null?G=_t:me.next=_t,me=et;var Kt=m.alternate;Kt!==null&&(Kt=Kt.updateQueue,ke=Kt.lastBaseUpdate,ke!==me&&(ke===null?Kt.firstBaseUpdate=_t:ke.next=_t,Kt.lastBaseUpdate=et))}if(G!==null){var ar=L.baseState;me=0,Kt=_t=et=null,ke=G;do{var Pt=ke.lane&-536870913,Mt=Pt!==ke.lane;if(Mt?(La&Pt)===Pt:(D&Pt)===Pt){Pt!==0&&Pt===kh&&(br=!0),Kt!==null&&(Kt=Kt.next={lane:0,tag:ke.tag,payload:ke.payload,callback:null,next:null});e:{var na=m,Kr=ke;Pt=x;var kn=N;switch(Kr.tag){case 1:if(na=Kr.payload,typeof na=="function"){ar=na.call(kn,ar,Pt);break e}ar=na;break e;case 3:na.flags=na.flags&-65537|128;case 0:if(na=Kr.payload,Pt=typeof na=="function"?na.call(kn,ar,Pt):na,Pt==null)break e;ar=u({},ar,Pt);break e;case 2:Lt=!0}}Pt=ke.callback,Pt!==null&&(m.flags|=64,Mt&&(m.flags|=8192),Mt=L.callbacks,Mt===null?L.callbacks=[Pt]:Mt.push(Pt))}else Mt={lane:Pt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Kt===null?(_t=Kt=Mt,et=ar):Kt=Kt.next=Mt,me|=Pt;if(ke=ke.next,ke===null){if(ke=L.shared.pending,ke===null)break;Mt=ke,ke=Mt.next,Mt.next=null,L.lastBaseUpdate=Mt,L.shared.pending=null}}while(!0);Kt===null&&(et=ar),L.baseState=et,L.firstBaseUpdate=_t,L.lastBaseUpdate=Kt,G===null&&(L.shared.lanes=0),im|=me,m.lanes=me,m.memoizedState=ar}}function Ra(m,x){if(typeof m!="function")throw Error(a(191,m));m.call(x)}function Ya(m,x){var N=m.callbacks;if(N!==null)for(m.callbacks=null,m=0;m<N.length;m++)Ra(N[m],x)}var ya=ie(null),xa=ie(0);function dn(m,x){m=Rh,z(xa,m),z(ya,x),Rh=m|x.baseLanes}function Ka(){z(xa,Rh),z(ya,ya.current)}function la(){Rh=xa.current,M(ya),M(xa)}var mn=0,Gr=null,ea=null,Oa=null,Fa=!1,ri=!1,Ls=!1,cs=0,ds=0,js=null,ll=0;function Xa(){throw Error(a(321))}function Ns(m,x){if(x===null)return!1;for(var N=0;N<x.length&&N<m.length;N++)if(!Zs(m[N],x[N]))return!1;return!0}function Rl(m,x,N,D,L,G){return mn=G,Gr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,B.H=m===null||m.memoizedState===null?dO:uO,Ls=!1,G=N(D,L),Ls=!1,ri&&(G=Eh(x,N,D,L)),fu(m),G}function fu(m){B.H=mj;var x=ea!==null&&ea.next!==null;if(mn=0,Oa=ea=Gr=null,Fa=!1,ds=0,js=null,x)throw Error(a(300));m===null||Ti||(m=m.dependencies,m!==null&&jv(m)&&(Ti=!0))}function Eh(m,x,N,D){Gr=m;var L=0;do{if(ri&&(js=null),ds=0,ri=!1,25<=L)throw Error(a(301));if(L+=1,Oa=ea=null,m.updateQueue!=null){var G=m.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}B.H=KJ,G=x(N,D)}while(ri);return G}function mu(){var m=B.H,x=m.useState()[0];return x=typeof x.then=="function"?pu(x):x,m=m.useState()[0],(ea!==null?ea.memoizedState:null)!==m&&(Gr.flags|=1024),x}function On(){var m=cs!==0;return cs=0,m}function Dp(m,x,N){x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~N}function wv(m){if(Fa){for(m=m.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Fa=!1}mn=0,Oa=ea=Gr=null,ri=!1,ds=cs=0,js=null}function Yi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oa===null?Gr.memoizedState=Oa=m:Oa=Oa.next=m,Oa}function Vn(){if(ea===null){var m=Gr.alternate;m=m!==null?m.memoizedState:null}else m=ea.next;var x=Oa===null?Gr.memoizedState:Oa.next;if(x!==null)Oa=x,ea=m;else{if(m===null)throw Gr.alternate===null?Error(a(467)):Error(a(310));ea=m,m={memoizedState:ea.memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},Oa===null?Gr.memoizedState=Oa=m:Oa=Oa.next=m}return Oa}function _h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(m){var x=ds;return ds+=1,js===null&&(js=[]),m=Et(js,m,x),x=Gr,(Oa===null?x.memoizedState:Oa.next)===null&&(x=x.alternate,B.H=x===null||x.memoizedState===null?dO:uO),m}function mo(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return pu(m);if(m.$$typeof===w)return Rs(m)}throw Error(a(438,String(m)))}function xu(m){var x=null,N=Gr.updateQueue;if(N!==null&&(x=N.memoCache),x==null){var D=Gr.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(x={data:D.data.map(function(L){return L.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),N===null&&(N=_h(),Gr.updateQueue=N),N.memoCache=x,N=x.data[x.index],N===void 0)for(N=x.data[x.index]=Array(m),D=0;D<m;D++)N[D]=F;return x.index++,N}function po(m,x){return typeof x=="function"?x(m):x}function Ap(m){var x=Vn();return Kf(x,ea,m)}function Kf(m,x,N){var D=m.queue;if(D===null)throw Error(a(311));D.lastRenderedReducer=N;var L=m.baseQueue,G=D.pending;if(G!==null){if(L!==null){var me=L.next;L.next=G.next,G.next=me}x.baseQueue=L=G,D.pending=null}if(G=m.baseState,L===null)m.memoizedState=G;else{x=L.next;var ke=me=null,et=null,_t=x,Kt=!1;do{var ar=_t.lane&-536870913;if(ar!==_t.lane?(La&ar)===ar:(mn&ar)===ar){var Pt=_t.revertLane;if(Pt===0)et!==null&&(et=et.next={lane:0,revertLane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),ar===kh&&(Kt=!0);else if((mn&Pt)===Pt){_t=_t.next,Pt===kh&&(Kt=!0);continue}else ar={lane:0,revertLane:_t.revertLane,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},et===null?(ke=et=ar,me=G):et=et.next=ar,Gr.lanes|=Pt,im|=Pt;ar=_t.action,Ls&&N(G,ar),G=_t.hasEagerState?_t.eagerState:N(G,ar)}else Pt={lane:ar,revertLane:_t.revertLane,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},et===null?(ke=et=Pt,me=G):et=et.next=Pt,Gr.lanes|=ar,im|=ar;_t=_t.next}while(_t!==null&&_t!==x);if(et===null?me=G:et.next=ke,!Zs(G,m.memoizedState)&&(Ti=!0,Kt&&(N=md,N!==null)))throw N;m.memoizedState=G,m.baseState=me,m.baseQueue=et,D.lastRenderedState=G}return L===null&&(D.lanes=0),[m.memoizedState,D.dispatch]}function Sv(m){var x=Vn(),N=x.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var D=N.dispatch,L=N.pending,G=x.memoizedState;if(L!==null){N.pending=null;var me=L=L.next;do G=m(G,me.action),me=me.next;while(me!==L);Zs(G,x.memoizedState)||(Ti=!0),x.memoizedState=G,x.baseQueue===null&&(x.baseState=G),N.lastRenderedState=G}return[G,D]}function Tp(m,x,N){var D=Gr,L=Vn(),G=Va;if(G){if(N===void 0)throw Error(a(407));N=N()}else N=x();var me=!Zs((ea||L).memoizedState,N);me&&(L.memoizedState=N,Ti=!0),L=L.queue;var ke=Xf.bind(null,D,L,m);if(Zf(2048,8,ke,[m]),L.getSnapshot!==x||me||Oa!==null&&Oa.memoizedState.tag&1){if(D.flags|=2048,xd(9,Mp(),Ip.bind(null,D,L,N,x),null),Mn===null)throw Error(a(349));G||(mn&124)!==0||Cv(D,x,N)}return N}function Cv(m,x,N){m.flags|=16384,m={getSnapshot:x,value:N},x=Gr.updateQueue,x===null?(x=_h(),Gr.updateQueue=x,x.stores=[m]):(N=x.stores,N===null?x.stores=[m]:N.push(m))}function Ip(m,x,N,D){x.value=N,x.getSnapshot=D,aj(x)&&nj(m)}function Xf(m,x,N){return N(function(){aj(x)&&nj(m)})}function aj(m){var x=m.getSnapshot;m=m.value;try{var N=x();return!Zs(m,N)}catch{return!0}}function nj(m){var x=od(m,2);x!==null&&Vl(x,m,2)}function Pp(m){var x=Yi();if(typeof m=="function"){var N=m;if(m=N(),Ls){xe(!0);try{N()}finally{xe(!1)}}}return x.memoizedState=x.baseState=m,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:m},x}function pd(m,x,N,D){return m.baseState=N,Kf(m,ea,typeof D=="function"?D:po)}function VC(m,x,N,D,L){if(fj(m))throw Error(a(485));if(m=x.action,m!==null){var G={payload:L,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){G.listeners.push(me)}};B.T!==null?N(!0):G.isTransition=!1,D(G),N=x.pending,N===null?(G.next=x.pending=G,sj(x,G)):(G.next=N.next,x.pending=N.next=G)}}function sj(m,x){var N=x.action,D=x.payload,L=m.state;if(x.isTransition){var G=B.T,me={};B.T=me;try{var ke=N(L,D),et=B.S;et!==null&&et(me,ke),ij(m,x,ke)}catch(_t){Qf(m,x,_t)}finally{B.T=G}}else try{G=N(L,D),ij(m,x,G)}catch(_t){Qf(m,x,_t)}}function ij(m,x,N){N!==null&&typeof N=="object"&&typeof N.then=="function"?N.then(function(D){$g(m,x,D)},function(D){return Qf(m,x,D)}):$g(m,x,N)}function $g(m,x,N){x.status="fulfilled",x.value=N,Vg(x),m.state=N,x=m.pending,x!==null&&(N=x.next,N===x?m.pending=null:(N=N.next,x.next=N,sj(m,N)))}function Qf(m,x,N){var D=m.pending;if(m.pending=null,D!==null){D=D.next;do x.status="rejected",x.reason=N,Vg(x),x=x.next;while(x!==D)}m.action=null}function Vg(m){m=m.listeners;for(var x=0;x<m.length;x++)(0,m[x])()}function qg(m,x){return x}function Op(m,x){if(Va){var N=Mn.formState;if(N!==null){e:{var D=Gr;if(Va){if(Zn){t:{for(var L=Zn,G=gc;L.nodeType!==8;){if(!G){L=null;break t}if(L=yd(L.nextSibling),L===null){L=null;break t}}G=L.data,L=G==="F!"||G==="F"?L:null}if(L){Zn=yd(L.nextSibling),D=L.data==="F!";break e}}Ch(D)}D=!1}D&&(x=N[0])}}return N=Yi(),N.memoizedState=N.baseState=x,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qg,lastRenderedState:x},N.queue=D,N=oO.bind(null,Gr,D),D.dispatch=N,D=Pp(!1),G=qC.bind(null,Gr,!1,D.queue),D=Yi(),L={state:x,dispatch:null,action:m,pending:null},D.queue=L,N=VC.bind(null,Gr,L,G,N),L.dispatch=N,D.memoizedState=m,[x,N,!1]}function kv(m){var x=Vn();return Jf(x,ea,m)}function Jf(m,x,N){if(x=Kf(m,x,qg)[0],m=Ap(po)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var D=pu(x)}catch(me){throw me===we?Ce:me}else D=x;x=Vn();var L=x.queue,G=L.dispatch;return N!==x.memoizedState&&(Gr.flags|=2048,xd(9,Mp(),oj.bind(null,L,N),null)),[D,G,m]}function oj(m,x){m.action=x}function lj(m){var x=Vn(),N=ea;if(N!==null)return Jf(x,N,m);Vn(),x=x.memoizedState,N=Vn();var D=N.queue.dispatch;return N.memoizedState=m,[x,D,!1]}function xd(m,x,N,D){return m={tag:m,create:N,deps:D,inst:x,next:null},x=Gr.updateQueue,x===null&&(x=_h(),Gr.updateQueue=x),N=x.lastEffect,N===null?x.lastEffect=m.next=m:(D=N.next,N.next=m,m.next=D,x.lastEffect=m),m}function Mp(){return{destroy:void 0,resource:void 0}}function Ev(){return Vn().memoizedState}function Fl(m,x,N,D){var L=Yi();D=D===void 0?null:D,Gr.flags|=m,L.memoizedState=xd(1|x,Mp(),N,D)}function Zf(m,x,N,D){var L=Vn();D=D===void 0?null:D;var G=L.memoizedState.inst;ea!==null&&D!==null&&Ns(D,ea.memoizedState.deps)?L.memoizedState=xd(x,G,N,D):(Gr.flags|=m,L.memoizedState=xd(1|x,G,N,D))}function zg(m,x){Fl(8390656,8,m,x)}function cj(m,x){Zf(2048,8,m,x)}function Hg(m,x){return Zf(4,2,m,x)}function Dh(m,x){return Zf(4,4,m,x)}function dj(m,x){if(typeof x=="function"){m=m();var N=x(m);return function(){typeof N=="function"?N():x(null)}}if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function Wg(m,x,N){N=N!=null?N.concat([m]):null,Zf(4,4,dj.bind(null,x,m),N)}function Gg(){}function Yg(m,x){var N=Vn();x=x===void 0?null:x;var D=N.memoizedState;return x!==null&&Ns(x,D[1])?D[0]:(N.memoizedState=[m,x],m)}function uj(m,x){var N=Vn();x=x===void 0?null:x;var D=N.memoizedState;if(x!==null&&Ns(x,D[1]))return D[0];if(D=m(),Ls){xe(!0);try{m()}finally{xe(!1)}}return N.memoizedState=[D,x],D}function Ah(m,x,N){return N===void 0||(mn&1073741824)!==0?m.memoizedState=x:(m.memoizedState=N,m=aM(),Gr.lanes|=m,im|=m,N)}function _v(m,x,N,D){return Zs(N,x)?N:ya.current!==null?(m=Ah(m,N,D),Zs(m,x)||(Ti=!0),m):(mn&42)===0?(Ti=!0,m.memoizedState=N):(m=aM(),Gr.lanes|=m,im|=m,x)}function Rp(m,x,N,D,L){var G=Q.p;Q.p=G!==0&&8>G?G:8;var me=B.T,ke={};B.T=ke,qC(m,!1,x,N);try{var et=L(),_t=B.S;if(_t!==null&&_t(ke,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var Kt=rj(et,D);Jg(m,x,Kt,$l(m))}else Jg(m,x,D,$l(m))}catch(ar){Jg(m,x,{then:function(){},status:"rejected",reason:ar},$l())}finally{Q.p=G,B.T=me}}function vd(){}function Nc(m,x,N,D){if(m.tag!==5)throw Error(a(476));var L=gd(m).queue;Rp(m,L,x,R,N===null?vd:function(){return Fp(m),N(D)})}function gd(m){var x=m.memoizedState;if(x!==null)return x;x={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:R},next:null};var N={};return x.next={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:N},next:null},m.memoizedState=x,m=m.alternate,m!==null&&(m.memoizedState=x),x}function Fp(m){var x=gd(m).next.queue;Jg(m,x,{},$l())}function Lp(){return Rs(xb)}function Kg(){return Vn().memoizedState}function hj(){return Vn().memoizedState}function Xg(m){for(var x=m.return;x!==null;){switch(x.tag){case 24:case 3:var N=$l();m=Yt(N);var D=rr(x,m,N);D!==null&&(Vl(D,x,N),Qt(D,x,N)),x={cache:Bg()},m.payload=x;return}x=x.return}}function Qg(m,x,N){var D=$l();N={lane:D,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null},fj(m)?lO(x,N):(N=lu(m,x,N,D),N!==null&&(Vl(N,m,D),cO(N,x,D)))}function oO(m,x,N){var D=$l();Jg(m,x,N,D)}function Jg(m,x,N,D){var L={lane:D,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null};if(fj(m))lO(x,L);else{var G=m.alternate;if(m.lanes===0&&(G===null||G.lanes===0)&&(G=x.lastRenderedReducer,G!==null))try{var me=x.lastRenderedState,ke=G(me,N);if(L.hasEagerState=!0,L.eagerState=ke,Zs(ke,me))return ou(m,x,L,0),Mn===null&&sl(),!1}catch{}finally{}if(N=lu(m,x,L,D),N!==null)return Vl(N,m,D),cO(N,x,D),!0}return!1}function qC(m,x,N,D){if(D={lane:2,revertLane:jk(),action:D,hasEagerState:!1,eagerState:null,next:null},fj(m)){if(x)throw Error(a(479))}else x=lu(m,N,D,2),x!==null&&Vl(x,m,2)}function fj(m){var x=m.alternate;return m===Gr||x!==null&&x===Gr}function lO(m,x){ri=Fa=!0;var N=m.pending;N===null?x.next=x:(x.next=N.next,N.next=x),m.pending=x}function cO(m,x,N){if((N&4194048)!==0){var D=x.lanes;D&=m.pendingLanes,N|=D,x.lanes=N,De(m,N)}}var mj={readContext:Rs,use:mo,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useLayoutEffect:Xa,useInsertionEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useSyncExternalStore:Xa,useId:Xa,useHostTransitionStatus:Xa,useFormState:Xa,useActionState:Xa,useOptimistic:Xa,useMemoCache:Xa,useCacheRefresh:Xa},dO={readContext:Rs,use:mo,useCallback:function(m,x){return Yi().memoizedState=[m,x===void 0?null:x],m},useContext:Rs,useEffect:zg,useImperativeHandle:function(m,x,N){N=N!=null?N.concat([m]):null,Fl(4194308,4,dj.bind(null,x,m),N)},useLayoutEffect:function(m,x){return Fl(4194308,4,m,x)},useInsertionEffect:function(m,x){Fl(4,2,m,x)},useMemo:function(m,x){var N=Yi();x=x===void 0?null:x;var D=m();if(Ls){xe(!0);try{m()}finally{xe(!1)}}return N.memoizedState=[D,x],D},useReducer:function(m,x,N){var D=Yi();if(N!==void 0){var L=N(x);if(Ls){xe(!0);try{N(x)}finally{xe(!1)}}}else L=x;return D.memoizedState=D.baseState=L,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:L},D.queue=m,m=m.dispatch=Qg.bind(null,Gr,m),[D.memoizedState,m]},useRef:function(m){var x=Yi();return m={current:m},x.memoizedState=m},useState:function(m){m=Pp(m);var x=m.queue,N=oO.bind(null,Gr,x);return x.dispatch=N,[m.memoizedState,N]},useDebugValue:Gg,useDeferredValue:function(m,x){var N=Yi();return Ah(N,m,x)},useTransition:function(){var m=Pp(!1);return m=Rp.bind(null,Gr,m.queue,!0,!1),Yi().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,x,N){var D=Gr,L=Yi();if(Va){if(N===void 0)throw Error(a(407));N=N()}else{if(N=x(),Mn===null)throw Error(a(349));(La&124)!==0||Cv(D,x,N)}L.memoizedState=N;var G={value:N,getSnapshot:x};return L.queue=G,zg(Xf.bind(null,D,G,m),[m]),D.flags|=2048,xd(9,Mp(),Ip.bind(null,D,G,N,x),null),N},useId:function(){var m=Yi(),x=Mn.identifierPrefix;if(Va){var N=ud,D=dd;N=(D&~(1<<32-fe(D)-1)).toString(32)+N,x=""+x+"R"+N,N=cs++,0<N&&(x+="H"+N.toString(32)),x+=""}else N=ll++,x=""+x+"r"+N.toString(32)+"";return m.memoizedState=x},useHostTransitionStatus:Lp,useFormState:Op,useActionState:Op,useOptimistic:function(m){var x=Yi();x.memoizedState=x.baseState=m;var N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=N,x=qC.bind(null,Gr,!0,N),N.dispatch=x,[m,x]},useMemoCache:xu,useCacheRefresh:function(){return Yi().memoizedState=Xg.bind(null,Gr)}},uO={readContext:Rs,use:mo,useCallback:Yg,useContext:Rs,useEffect:cj,useImperativeHandle:Wg,useInsertionEffect:Hg,useLayoutEffect:Dh,useMemo:uj,useReducer:Ap,useRef:Ev,useState:function(){return Ap(po)},useDebugValue:Gg,useDeferredValue:function(m,x){var N=Vn();return _v(N,ea.memoizedState,m,x)},useTransition:function(){var m=Ap(po)[0],x=Vn().memoizedState;return[typeof m=="boolean"?m:pu(m),x]},useSyncExternalStore:Tp,useId:Kg,useHostTransitionStatus:Lp,useFormState:kv,useActionState:kv,useOptimistic:function(m,x){var N=Vn();return pd(N,ea,m,x)},useMemoCache:xu,useCacheRefresh:hj},KJ={readContext:Rs,use:mo,useCallback:Yg,useContext:Rs,useEffect:cj,useImperativeHandle:Wg,useInsertionEffect:Hg,useLayoutEffect:Dh,useMemo:uj,useReducer:Sv,useRef:Ev,useState:function(){return Sv(po)},useDebugValue:Gg,useDeferredValue:function(m,x){var N=Vn();return ea===null?Ah(N,m,x):_v(N,ea.memoizedState,m,x)},useTransition:function(){var m=Sv(po)[0],x=Vn().memoizedState;return[typeof m=="boolean"?m:pu(m),x]},useSyncExternalStore:Tp,useId:Kg,useHostTransitionStatus:Lp,useFormState:lj,useActionState:lj,useOptimistic:function(m,x){var N=Vn();return ea!==null?pd(N,ea,m,x):(N.baseState=m,[m,N.queue.dispatch])},useMemoCache:xu,useCacheRefresh:hj},Dv=null,Zg=0;function pj(m){var x=Zg;return Zg+=1,Dv===null&&(Dv=[]),Et(Dv,m,x)}function eb(m,x){x=x.props.ref,m.ref=x!==void 0?x:null}function xj(m,x){throw x.$$typeof===h?Error(a(525)):(m=Object.prototype.toString.call(x),Error(a(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m)))}function hO(m){var x=m._init;return x(m._payload)}function fO(m){function x(bt,lt){if(m){var Ct=bt.deletions;Ct===null?(bt.deletions=[lt],bt.flags|=16):Ct.push(lt)}}function N(bt,lt){if(!m)return null;for(;lt!==null;)x(bt,lt),lt=lt.sibling;return null}function D(bt){for(var lt=new Map;bt!==null;)bt.key!==null?lt.set(bt.key,bt):lt.set(bt.index,bt),bt=bt.sibling;return lt}function L(bt,lt){return bt=vc(bt,lt),bt.index=0,bt.sibling=null,bt}function G(bt,lt,Ct){return bt.index=Ct,m?(Ct=bt.alternate,Ct!==null?(Ct=Ct.index,Ct<lt?(bt.flags|=67108866,lt):Ct):(bt.flags|=67108866,lt)):(bt.flags|=1048576,lt)}function me(bt){return m&&bt.alternate===null&&(bt.flags|=67108866),bt}function ke(bt,lt,Ct,Zt){return lt===null||lt.tag!==6?(lt=vv(Ct,bt.mode,Zt),lt.return=bt,lt):(lt=L(lt,Ct),lt.return=bt,lt)}function et(bt,lt,Ct,Zt){var Tr=Ct.type;return Tr===v?Kt(bt,lt,Ct.props.children,Zt,Ct.key):lt!==null&&(lt.elementType===Tr||typeof Tr=="object"&&Tr!==null&&Tr.$$typeof===T&&hO(Tr)===lt.type)?(lt=L(lt,Ct.props),eb(lt,Ct),lt.return=bt,lt):(lt=Nh(Ct.type,Ct.key,Ct.props,null,bt.mode,Zt),eb(lt,Ct),lt.return=bt,lt)}function _t(bt,lt,Ct,Zt){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==Ct.containerInfo||lt.stateNode.implementation!==Ct.implementation?(lt=Sp(Ct,bt.mode,Zt),lt.return=bt,lt):(lt=L(lt,Ct.children||[]),lt.return=bt,lt)}function Kt(bt,lt,Ct,Zt,Tr){return lt===null||lt.tag!==7?(lt=ld(Ct,bt.mode,Zt,Tr),lt.return=bt,lt):(lt=L(lt,Ct),lt.return=bt,lt)}function ar(bt,lt,Ct){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return lt=vv(""+lt,bt.mode,Ct),lt.return=bt,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case f:return Ct=Nh(lt.type,lt.key,lt.props,null,bt.mode,Ct),eb(Ct,lt),Ct.return=bt,Ct;case p:return lt=Sp(lt,bt.mode,Ct),lt.return=bt,lt;case T:var Zt=lt._init;return lt=Zt(lt._payload),ar(bt,lt,Ct)}if(Y(lt)||P(lt))return lt=ld(lt,bt.mode,Ct,null),lt.return=bt,lt;if(typeof lt.then=="function")return ar(bt,pj(lt),Ct);if(lt.$$typeof===w)return ar(bt,hu(bt,lt),Ct);xj(bt,lt)}return null}function Pt(bt,lt,Ct,Zt){var Tr=lt!==null?lt.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Tr!==null?null:ke(bt,lt,""+Ct,Zt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case f:return Ct.key===Tr?et(bt,lt,Ct,Zt):null;case p:return Ct.key===Tr?_t(bt,lt,Ct,Zt):null;case T:return Tr=Ct._init,Ct=Tr(Ct._payload),Pt(bt,lt,Ct,Zt)}if(Y(Ct)||P(Ct))return Tr!==null?null:Kt(bt,lt,Ct,Zt,null);if(typeof Ct.then=="function")return Pt(bt,lt,pj(Ct),Zt);if(Ct.$$typeof===w)return Pt(bt,lt,hu(bt,Ct),Zt);xj(bt,Ct)}return null}function Mt(bt,lt,Ct,Zt,Tr){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return bt=bt.get(Ct)||null,ke(lt,bt,""+Zt,Tr);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case f:return bt=bt.get(Zt.key===null?Ct:Zt.key)||null,et(lt,bt,Zt,Tr);case p:return bt=bt.get(Zt.key===null?Ct:Zt.key)||null,_t(lt,bt,Zt,Tr);case T:var Ca=Zt._init;return Zt=Ca(Zt._payload),Mt(bt,lt,Ct,Zt,Tr)}if(Y(Zt)||P(Zt))return bt=bt.get(Ct)||null,Kt(lt,bt,Zt,Tr,null);if(typeof Zt.then=="function")return Mt(bt,lt,Ct,pj(Zt),Tr);if(Zt.$$typeof===w)return Mt(bt,lt,Ct,hu(lt,Zt),Tr);xj(lt,Zt)}return null}function na(bt,lt,Ct,Zt){for(var Tr=null,Ca=null,zr=lt,Xr=lt=0,Pi=null;zr!==null&&Xr<Ct.length;Xr++){zr.index>Xr?(Pi=zr,zr=null):Pi=zr.sibling;var Qa=Pt(bt,zr,Ct[Xr],Zt);if(Qa===null){zr===null&&(zr=Pi);break}m&&zr&&Qa.alternate===null&&x(bt,zr),lt=G(Qa,lt,Xr),Ca===null?Tr=Qa:Ca.sibling=Qa,Ca=Qa,zr=Pi}if(Xr===Ct.length)return N(bt,zr),Va&&Sh(bt,Xr),Tr;if(zr===null){for(;Xr<Ct.length;Xr++)zr=ar(bt,Ct[Xr],Zt),zr!==null&&(lt=G(zr,lt,Xr),Ca===null?Tr=zr:Ca.sibling=zr,Ca=zr);return Va&&Sh(bt,Xr),Tr}for(zr=D(zr);Xr<Ct.length;Xr++)Pi=Mt(zr,bt,Xr,Ct[Xr],Zt),Pi!==null&&(m&&Pi.alternate!==null&&zr.delete(Pi.key===null?Xr:Pi.key),lt=G(Pi,lt,Xr),Ca===null?Tr=Pi:Ca.sibling=Pi,Ca=Pi);return m&&zr.forEach(function(pm){return x(bt,pm)}),Va&&Sh(bt,Xr),Tr}function Kr(bt,lt,Ct,Zt){if(Ct==null)throw Error(a(151));for(var Tr=null,Ca=null,zr=lt,Xr=lt=0,Pi=null,Qa=Ct.next();zr!==null&&!Qa.done;Xr++,Qa=Ct.next()){zr.index>Xr?(Pi=zr,zr=null):Pi=zr.sibling;var pm=Pt(bt,zr,Qa.value,Zt);if(pm===null){zr===null&&(zr=Pi);break}m&&zr&&pm.alternate===null&&x(bt,zr),lt=G(pm,lt,Xr),Ca===null?Tr=pm:Ca.sibling=pm,Ca=pm,zr=Pi}if(Qa.done)return N(bt,zr),Va&&Sh(bt,Xr),Tr;if(zr===null){for(;!Qa.done;Xr++,Qa=Ct.next())Qa=ar(bt,Qa.value,Zt),Qa!==null&&(lt=G(Qa,lt,Xr),Ca===null?Tr=Qa:Ca.sibling=Qa,Ca=Qa);return Va&&Sh(bt,Xr),Tr}for(zr=D(zr);!Qa.done;Xr++,Qa=Ct.next())Qa=Mt(zr,bt,Xr,Qa.value,Zt),Qa!==null&&(m&&Qa.alternate!==null&&zr.delete(Qa.key===null?Xr:Qa.key),lt=G(Qa,lt,Xr),Ca===null?Tr=Qa:Ca.sibling=Qa,Ca=Qa);return m&&zr.forEach(function(XZ){return x(bt,XZ)}),Va&&Sh(bt,Xr),Tr}function kn(bt,lt,Ct,Zt){if(typeof Ct=="object"&&Ct!==null&&Ct.type===v&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case f:e:{for(var Tr=Ct.key;lt!==null;){if(lt.key===Tr){if(Tr=Ct.type,Tr===v){if(lt.tag===7){N(bt,lt.sibling),Zt=L(lt,Ct.props.children),Zt.return=bt,bt=Zt;break e}}else if(lt.elementType===Tr||typeof Tr=="object"&&Tr!==null&&Tr.$$typeof===T&&hO(Tr)===lt.type){N(bt,lt.sibling),Zt=L(lt,Ct.props),eb(Zt,Ct),Zt.return=bt,bt=Zt;break e}N(bt,lt);break}else x(bt,lt);lt=lt.sibling}Ct.type===v?(Zt=ld(Ct.props.children,bt.mode,Zt,Ct.key),Zt.return=bt,bt=Zt):(Zt=Nh(Ct.type,Ct.key,Ct.props,null,bt.mode,Zt),eb(Zt,Ct),Zt.return=bt,bt=Zt)}return me(bt);case p:e:{for(Tr=Ct.key;lt!==null;){if(lt.key===Tr)if(lt.tag===4&&lt.stateNode.containerInfo===Ct.containerInfo&&lt.stateNode.implementation===Ct.implementation){N(bt,lt.sibling),Zt=L(lt,Ct.children||[]),Zt.return=bt,bt=Zt;break e}else{N(bt,lt);break}else x(bt,lt);lt=lt.sibling}Zt=Sp(Ct,bt.mode,Zt),Zt.return=bt,bt=Zt}return me(bt);case T:return Tr=Ct._init,Ct=Tr(Ct._payload),kn(bt,lt,Ct,Zt)}if(Y(Ct))return na(bt,lt,Ct,Zt);if(P(Ct)){if(Tr=P(Ct),typeof Tr!="function")throw Error(a(150));return Ct=Tr.call(Ct),Kr(bt,lt,Ct,Zt)}if(typeof Ct.then=="function")return kn(bt,lt,pj(Ct),Zt);if(Ct.$$typeof===w)return kn(bt,lt,hu(bt,Ct),Zt);xj(bt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,lt!==null&&lt.tag===6?(N(bt,lt.sibling),Zt=L(lt,Ct),Zt.return=bt,bt=Zt):(N(bt,lt),Zt=vv(Ct,bt.mode,Zt),Zt.return=bt,bt=Zt),me(bt)):N(bt,lt)}return function(bt,lt,Ct,Zt){try{Zg=0;var Tr=kn(bt,lt,Ct,Zt);return Dv=null,Tr}catch(zr){if(zr===we||zr===Ce)throw zr;var Ca=Ai(29,zr,null,bt.mode);return Ca.lanes=Zt,Ca.return=bt,Ca}finally{}}}var Av=fO(!0),mO=fO(!1),wc=ie(null),vu=null;function em(m){var x=m.alternate;z(fi,fi.current&1),z(wc,m),vu===null&&(x===null||ya.current!==null||x.memoizedState!==null)&&(vu=m)}function pO(m){if(m.tag===22){if(z(fi,fi.current),z(wc,m),vu===null){var x=m.alternate;x!==null&&x.memoizedState!==null&&(vu=m)}}else tm()}function tm(){z(fi,fi.current),z(wc,wc.current)}function Th(m){M(wc),vu===m&&(vu=null),M(fi)}var fi=ie(0);function vj(m){for(var x=m;x!==null;){if(x.tag===13){var N=x.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||Pk(N)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}function zC(m,x,N,D){x=m.memoizedState,N=N(D,x),N=N==null?x:u({},x,N),m.memoizedState=N,m.lanes===0&&(m.updateQueue.baseState=N)}var HC={enqueueSetState:function(m,x,N){m=m._reactInternals;var D=$l(),L=Yt(D);L.payload=x,N!=null&&(L.callback=N),x=rr(m,L,D),x!==null&&(Vl(x,m,D),Qt(x,m,D))},enqueueReplaceState:function(m,x,N){m=m._reactInternals;var D=$l(),L=Yt(D);L.tag=1,L.payload=x,N!=null&&(L.callback=N),x=rr(m,L,D),x!==null&&(Vl(x,m,D),Qt(x,m,D))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var N=$l(),D=Yt(N);D.tag=2,x!=null&&(D.callback=x),x=rr(m,D,N),x!==null&&(Vl(x,m,N),Qt(x,m,N))}};function xO(m,x,N,D,L,G,me){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(D,G,me):x.prototype&&x.prototype.isPureReactComponent?!eu(N,D)||!eu(L,G):!0}function vO(m,x,N,D){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(N,D),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(N,D),x.state!==m&&HC.enqueueReplaceState(x,x.state,null)}function Bp(m,x){var N=x;if("ref"in x){N={};for(var D in x)D!=="ref"&&(N[D]=x[D])}if(m=m.defaultProps){N===x&&(N=u({},N));for(var L in m)N[L]===void 0&&(N[L]=m[L])}return N}var gj=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)};function gO(m){gj(m)}function bO(m){console.error(m)}function yO(m){gj(m)}function bj(m,x){try{var N=m.onUncaughtError;N(x.value,{componentStack:x.stack})}catch(D){setTimeout(function(){throw D})}}function jO(m,x,N){try{var D=m.onCaughtError;D(N.value,{componentStack:N.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function WC(m,x,N){return N=Yt(N),N.tag=3,N.payload={element:null},N.callback=function(){bj(m,x)},N}function NO(m){return m=Yt(m),m.tag=3,m}function wO(m,x,N,D){var L=N.type.getDerivedStateFromError;if(typeof L=="function"){var G=D.value;m.payload=function(){return L(G)},m.callback=function(){jO(x,N,D)}}var me=N.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(m.callback=function(){jO(x,N,D),typeof L!="function"&&(om===null?om=new Set([this]):om.add(this));var ke=D.stack;this.componentDidCatch(D.value,{componentStack:ke!==null?ke:""})})}function XJ(m,x,N,D,L){if(N.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(x=N.alternate,x!==null&&Yf(x,N,L,!0),N=wc.current,N!==null){switch(N.tag){case 13:return vu===null?xk():N.alternate===null&&ws===0&&(ws=3),N.flags&=-257,N.flags|=65536,N.lanes=L,D===Oe?N.flags|=16384:(x=N.updateQueue,x===null?N.updateQueue=new Set([D]):x.add(D),gk(m,D,L)),!1;case 22:return N.flags|=65536,D===Oe?N.flags|=16384:(x=N.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([D])},N.updateQueue=x):(N=x.retryQueue,N===null?x.retryQueue=new Set([D]):N.add(D)),gk(m,D,L)),!1}throw Error(a(435,N.tag))}return gk(m,D,L),xk(),!1}if(Va)return x=wc.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=L,D!==Lg&&(m=Error(a(422),{cause:D}),Gf(ja(m,N)))):(D!==Lg&&(x=Error(a(423),{cause:D}),Gf(ja(x,N))),m=m.current.alternate,m.flags|=65536,L&=-L,m.lanes|=L,D=ja(D,N),L=WC(m.stateNode,D,L),kr(m,L),ws!==4&&(ws=2)),!1;var G=Error(a(520),{cause:D});if(G=ja(G,N),ob===null?ob=[G]:ob.push(G),ws!==4&&(ws=2),x===null)return!0;D=ja(D,N),N=x;do{switch(N.tag){case 3:return N.flags|=65536,m=L&-L,N.lanes|=m,m=WC(N.stateNode,D,m),kr(N,m),!1;case 1:if(x=N.type,G=N.stateNode,(N.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(om===null||!om.has(G))))return N.flags|=65536,L&=-L,N.lanes|=L,L=NO(L),wO(L,m,N,D),kr(N,L),!1}N=N.return}while(N!==null);return!1}var SO=Error(a(461)),Ti=!1;function Ki(m,x,N,D){x.child=m===null?mO(x,null,N,D):Av(x,m.child,N,D)}function CO(m,x,N,D,L){N=N.render;var G=x.ref;if("ref"in D){var me={};for(var ke in D)ke!=="ref"&&(me[ke]=D[ke])}else me=D;return jc(x),D=Rl(m,x,N,me,G,L),ke=On(),m!==null&&!Ti?(Dp(m,x,L),Ih(m,x,L)):(Va&&ke&&Cp(x),x.flags|=1,Ki(m,x,D,L),x.child)}function kO(m,x,N,D,L){if(m===null){var G=N.type;return typeof G=="function"&&!Hf(G)&&G.defaultProps===void 0&&N.compare===null?(x.tag=15,x.type=G,EO(m,x,G,D,L)):(m=Nh(N.type,null,D,x,x.mode,L),m.ref=x.ref,m.return=x,x.child=m)}if(G=m.child,!ek(m,L)){var me=G.memoizedProps;if(N=N.compare,N=N!==null?N:eu,N(me,D)&&m.ref===x.ref)return Ih(m,x,L)}return x.flags|=1,m=vc(G,D),m.ref=x.ref,m.return=x,x.child=m}function EO(m,x,N,D,L){if(m!==null){var G=m.memoizedProps;if(eu(G,D)&&m.ref===x.ref)if(Ti=!1,x.pendingProps=D=G,ek(m,L))(m.flags&131072)!==0&&(Ti=!0);else return x.lanes=m.lanes,Ih(m,x,L)}return GC(m,x,N,D,L)}function _O(m,x,N){var D=x.pendingProps,L=D.children,G=m!==null?m.memoizedState:null;if(D.mode==="hidden"){if((x.flags&128)!==0){if(D=G!==null?G.baseLanes|N:N,m!==null){for(L=x.child=m.child,G=0;L!==null;)G=G|L.lanes|L.childLanes,L=L.sibling;x.childLanes=G&~D}else x.childLanes=0,x.child=null;return DO(m,x,D,N)}if((N&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},m!==null&&ce(x,G!==null?G.cachePool:null),G!==null?dn(x,G):Ka(),pO(x);else return x.lanes=x.childLanes=536870912,DO(m,x,G!==null?G.baseLanes|N:N,N)}else G!==null?(ce(x,G.cachePool),dn(x,G),tm(),x.memoizedState=null):(m!==null&&ce(x,null),Ka(),tm());return Ki(m,x,L,N),x.child}function DO(m,x,N,D){var L=ae();return L=L===null?null:{parent:Fs._currentValue,pool:L},x.memoizedState={baseLanes:N,cachePool:L},m!==null&&ce(x,null),Ka(),pO(x),m!==null&&Yf(m,x,D,!0),null}function yj(m,x){var N=x.ref;if(N===null)m!==null&&m.ref!==null&&(x.flags|=4194816);else{if(typeof N!="function"&&typeof N!="object")throw Error(a(284));(m===null||m.ref!==N)&&(x.flags|=4194816)}}function GC(m,x,N,D,L){return jc(x),N=Rl(m,x,N,D,void 0,L),D=On(),m!==null&&!Ti?(Dp(m,x,L),Ih(m,x,L)):(Va&&D&&Cp(x),x.flags|=1,Ki(m,x,N,L),x.child)}function AO(m,x,N,D,L,G){return jc(x),x.updateQueue=null,N=Eh(x,D,N,L),fu(m),D=On(),m!==null&&!Ti?(Dp(m,x,G),Ih(m,x,G)):(Va&&D&&Cp(x),x.flags|=1,Ki(m,x,N,G),x.child)}function TO(m,x,N,D,L){if(jc(x),x.stateNode===null){var G=ei,me=N.contextType;typeof me=="object"&&me!==null&&(G=Rs(me)),G=new N(D,G),x.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=HC,x.stateNode=G,G._reactInternals=x,G=x.stateNode,G.props=D,G.state=x.memoizedState,G.refs={},ot(x),me=N.contextType,G.context=typeof me=="object"&&me!==null?Rs(me):ei,G.state=x.memoizedState,me=N.getDerivedStateFromProps,typeof me=="function"&&(zC(x,N,me,D),G.state=x.memoizedState),typeof N.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(me=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),me!==G.state&&HC.enqueueReplaceState(G,G.state,null),yr(x,D,G,L),qr(),G.state=x.memoizedState),typeof G.componentDidMount=="function"&&(x.flags|=4194308),D=!0}else if(m===null){G=x.stateNode;var ke=x.memoizedProps,et=Bp(N,ke);G.props=et;var _t=G.context,Kt=N.contextType;me=ei,typeof Kt=="object"&&Kt!==null&&(me=Rs(Kt));var ar=N.getDerivedStateFromProps;Kt=typeof ar=="function"||typeof G.getSnapshotBeforeUpdate=="function",ke=x.pendingProps!==ke,Kt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ke||_t!==me)&&vO(x,G,D,me),Lt=!1;var Pt=x.memoizedState;G.state=Pt,yr(x,D,G,L),qr(),_t=x.memoizedState,ke||Pt!==_t||Lt?(typeof ar=="function"&&(zC(x,N,ar,D),_t=x.memoizedState),(et=Lt||xO(x,N,et,D,Pt,_t,me))?(Kt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(x.flags|=4194308)):(typeof G.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=D,x.memoizedState=_t),G.props=D,G.state=_t,G.context=me,D=et):(typeof G.componentDidMount=="function"&&(x.flags|=4194308),D=!1)}else{G=x.stateNode,ht(m,x),me=x.memoizedProps,Kt=Bp(N,me),G.props=Kt,ar=x.pendingProps,Pt=G.context,_t=N.contextType,et=ei,typeof _t=="object"&&_t!==null&&(et=Rs(_t)),ke=N.getDerivedStateFromProps,(_t=typeof ke=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(me!==ar||Pt!==et)&&vO(x,G,D,et),Lt=!1,Pt=x.memoizedState,G.state=Pt,yr(x,D,G,L),qr();var Mt=x.memoizedState;me!==ar||Pt!==Mt||Lt||m!==null&&m.dependencies!==null&&jv(m.dependencies)?(typeof ke=="function"&&(zC(x,N,ke,D),Mt=x.memoizedState),(Kt=Lt||xO(x,N,Kt,D,Pt,Mt,et)||m!==null&&m.dependencies!==null&&jv(m.dependencies))?(_t||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(D,Mt,et),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(D,Mt,et)),typeof G.componentDidUpdate=="function"&&(x.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof G.componentDidUpdate!="function"||me===m.memoizedProps&&Pt===m.memoizedState||(x.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&Pt===m.memoizedState||(x.flags|=1024),x.memoizedProps=D,x.memoizedState=Mt),G.props=D,G.state=Mt,G.context=et,D=Kt):(typeof G.componentDidUpdate!="function"||me===m.memoizedProps&&Pt===m.memoizedState||(x.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&Pt===m.memoizedState||(x.flags|=1024),D=!1)}return G=D,yj(m,x),D=(x.flags&128)!==0,G||D?(G=x.stateNode,N=D&&typeof N.getDerivedStateFromError!="function"?null:G.render(),x.flags|=1,m!==null&&D?(x.child=Av(x,m.child,null,L),x.child=Av(x,null,N,L)):Ki(m,x,N,L),x.memoizedState=G.state,m=x.child):m=Ih(m,x,L),m}function IO(m,x,N,D){return Yo(),x.flags|=256,Ki(m,x,N,D),x.child}var YC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function KC(m){return{baseLanes:m,cachePool:ye()}}function XC(m,x,N){return m=m!==null?m.childLanes&~N:0,x&&(m|=Sc),m}function PO(m,x,N){var D=x.pendingProps,L=!1,G=(x.flags&128)!==0,me;if((me=G)||(me=m!==null&&m.memoizedState===null?!1:(fi.current&2)!==0),me&&(L=!0,x.flags&=-129),me=(x.flags&32)!==0,x.flags&=-33,m===null){if(Va){if(L?em(x):tm(),Va){var ke=Zn,et;if(et=ke){e:{for(et=ke,ke=gc;et.nodeType!==8;){if(!ke){ke=null;break e}if(et=yd(et.nextSibling),et===null){ke=null;break e}}ke=et}ke!==null?(x.memoizedState={dehydrated:ke,treeContext:wh!==null?{id:dd,overflow:ud}:null,retryLane:536870912,hydrationErrors:null},et=Ai(18,null,null,0),et.stateNode=ke,et.return=x,x.child=et,Ms=x,Zn=null,et=!0):et=!1}et||Ch(x)}if(ke=x.memoizedState,ke!==null&&(ke=ke.dehydrated,ke!==null))return Pk(ke)?x.lanes=32:x.lanes=536870912,null;Th(x)}return ke=D.children,D=D.fallback,L?(tm(),L=x.mode,ke=jj({mode:"hidden",children:ke},L),D=ld(D,L,N,null),ke.return=x,D.return=x,ke.sibling=D,x.child=ke,L=x.child,L.memoizedState=KC(N),L.childLanes=XC(m,me,N),x.memoizedState=YC,D):(em(x),QC(x,ke))}if(et=m.memoizedState,et!==null&&(ke=et.dehydrated,ke!==null)){if(G)x.flags&256?(em(x),x.flags&=-257,x=JC(m,x,N)):x.memoizedState!==null?(tm(),x.child=m.child,x.flags|=128,x=null):(tm(),L=D.fallback,ke=x.mode,D=jj({mode:"visible",children:D.children},ke),L=ld(L,ke,N,null),L.flags|=2,D.return=x,L.return=x,D.sibling=L,x.child=D,Av(x,m.child,null,N),D=x.child,D.memoizedState=KC(N),D.childLanes=XC(m,me,N),x.memoizedState=YC,x=L);else if(em(x),Pk(ke)){if(me=ke.nextSibling&&ke.nextSibling.dataset,me)var _t=me.dgst;me=_t,D=Error(a(419)),D.stack="",D.digest=me,Gf({value:D,source:null,stack:null}),x=JC(m,x,N)}else if(Ti||Yf(m,x,N,!1),me=(N&m.childLanes)!==0,Ti||me){if(me=Mn,me!==null&&(D=N&-N,D=(D&42)!==0?1:Ee(D),D=(D&(me.suspendedLanes|N))!==0?0:D,D!==0&&D!==et.retryLane))throw et.retryLane=D,od(m,D),Vl(me,m,D),SO;ke.data==="$?"||xk(),x=JC(m,x,N)}else ke.data==="$?"?(x.flags|=192,x.child=m.child,x=null):(m=et.treeContext,Zn=yd(ke.nextSibling),Ms=x,Va=!0,du=null,gc=!1,m!==null&&(ol[Go++]=dd,ol[Go++]=ud,ol[Go++]=wh,dd=m.id,ud=m.overflow,wh=x),x=QC(x,D.children),x.flags|=4096);return x}return L?(tm(),L=D.fallback,ke=x.mode,et=m.child,_t=et.sibling,D=vc(et,{mode:"hidden",children:D.children}),D.subtreeFlags=et.subtreeFlags&65011712,_t!==null?L=vc(_t,L):(L=ld(L,ke,N,null),L.flags|=2),L.return=x,D.return=x,D.sibling=L,x.child=D,D=L,L=x.child,ke=m.child.memoizedState,ke===null?ke=KC(N):(et=ke.cachePool,et!==null?(_t=Fs._currentValue,et=et.parent!==_t?{parent:_t,pool:_t}:et):et=ye(),ke={baseLanes:ke.baseLanes|N,cachePool:et}),L.memoizedState=ke,L.childLanes=XC(m,me,N),x.memoizedState=YC,D):(em(x),N=m.child,m=N.sibling,N=vc(N,{mode:"visible",children:D.children}),N.return=x,N.sibling=null,m!==null&&(me=x.deletions,me===null?(x.deletions=[m],x.flags|=16):me.push(m)),x.child=N,x.memoizedState=null,N)}function QC(m,x){return x=jj({mode:"visible",children:x},m.mode),x.return=m,m.child=x}function jj(m,x){return m=Ai(22,m,null,x),m.lanes=0,m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},m}function JC(m,x,N){return Av(x,m.child,null,N),m=QC(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function OO(m,x,N){m.lanes|=x;var D=m.alternate;D!==null&&(D.lanes|=x),bv(m.return,x,N)}function ZC(m,x,N,D,L){var G=m.memoizedState;G===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:D,tail:N,tailMode:L}:(G.isBackwards=x,G.rendering=null,G.renderingStartTime=0,G.last=D,G.tail=N,G.tailMode=L)}function MO(m,x,N){var D=x.pendingProps,L=D.revealOrder,G=D.tail;if(Ki(m,x,D.children,N),D=fi.current,(D&2)!==0)D=D&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&OO(m,N,x);else if(m.tag===19)OO(m,N,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}D&=1}switch(z(fi,D),L){case"forwards":for(N=x.child,L=null;N!==null;)m=N.alternate,m!==null&&vj(m)===null&&(L=N),N=N.sibling;N=L,N===null?(L=x.child,x.child=null):(L=N.sibling,N.sibling=null),ZC(x,!1,L,N,G);break;case"backwards":for(N=null,L=x.child,x.child=null;L!==null;){if(m=L.alternate,m!==null&&vj(m)===null){x.child=L;break}m=L.sibling,L.sibling=N,N=L,L=m}ZC(x,!0,N,null,G);break;case"together":ZC(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Ih(m,x,N){if(m!==null&&(x.dependencies=m.dependencies),im|=x.lanes,(N&x.childLanes)===0)if(m!==null){if(Yf(m,x,N,!1),(N&x.childLanes)===0)return null}else return null;if(m!==null&&x.child!==m.child)throw Error(a(153));if(x.child!==null){for(m=x.child,N=vc(m,m.pendingProps),x.child=N,N.return=x;m.sibling!==null;)m=m.sibling,N=N.sibling=vc(m,m.pendingProps),N.return=x;N.sibling=null}return x.child}function ek(m,x){return(m.lanes&x)!==0?!0:(m=m.dependencies,!!(m!==null&&jv(m)))}function QJ(m,x,N){switch(x.tag){case 3:le(x,x.stateNode.containerInfo),uu(x,Fs,m.memoizedState.cache),Yo();break;case 27:case 5:K(x);break;case 4:le(x,x.stateNode.containerInfo);break;case 10:uu(x,x.type,x.memoizedProps.value);break;case 13:var D=x.memoizedState;if(D!==null)return D.dehydrated!==null?(em(x),x.flags|=128,null):(N&x.child.childLanes)!==0?PO(m,x,N):(em(x),m=Ih(m,x,N),m!==null?m.sibling:null);em(x);break;case 19:var L=(m.flags&128)!==0;if(D=(N&x.childLanes)!==0,D||(Yf(m,x,N,!1),D=(N&x.childLanes)!==0),L){if(D)return MO(m,x,N);x.flags|=128}if(L=x.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),z(fi,fi.current),D)break;return null;case 22:case 23:return x.lanes=0,_O(m,x,N);case 24:uu(x,Fs,m.memoizedState.cache)}return Ih(m,x,N)}function RO(m,x,N){if(m!==null)if(m.memoizedProps!==x.pendingProps)Ti=!0;else{if(!ek(m,N)&&(x.flags&128)===0)return Ti=!1,QJ(m,x,N);Ti=(m.flags&131072)!==0}else Ti=!1,Va&&(x.flags&1048576)!==0&&Q1(x,gv,x.index);switch(x.lanes=0,x.tag){case 16:e:{m=x.pendingProps;var D=x.elementType,L=D._init;if(D=L(D._payload),x.type=D,typeof D=="function")Hf(D)?(m=Bp(D,m),x.tag=1,x=TO(null,x,D,m,N)):(x.tag=0,x=GC(null,x,D,m,N));else{if(D!=null){if(L=D.$$typeof,L===k){x.tag=11,x=CO(null,x,D,m,N);break e}else if(L===E){x.tag=14,x=kO(null,x,D,m,N);break e}}throw x=V(D)||D,Error(a(306,x,""))}}return x;case 0:return GC(m,x,x.type,x.pendingProps,N);case 1:return D=x.type,L=Bp(D,x.pendingProps),TO(m,x,D,L,N);case 3:e:{if(le(x,x.stateNode.containerInfo),m===null)throw Error(a(387));D=x.pendingProps;var G=x.memoizedState;L=G.element,ht(m,x),yr(x,D,null,N);var me=x.memoizedState;if(D=me.cache,uu(x,Fs,D),D!==G.cache&&yv(x,[Fs],N,!0),qr(),D=me.element,G.isDehydrated)if(G={element:D,isDehydrated:!1,cache:me.cache},x.updateQueue.baseState=G,x.memoizedState=G,x.flags&256){x=IO(m,x,D,N);break e}else if(D!==L){L=ja(Error(a(424)),x),Gf(L),x=IO(m,x,D,N);break e}else{switch(m=x.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(Zn=yd(m.firstChild),Ms=x,Va=!0,du=null,gc=!0,N=mO(x,null,D,N),x.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling}else{if(Yo(),D===L){x=Ih(m,x,N);break e}Ki(m,x,D,N)}x=x.child}return x;case 26:return yj(m,x),m===null?(N=UM(x.type,null,x.pendingProps,null))?x.memoizedState=N:Va||(N=x.type,m=x.pendingProps,D=Mj(W.current).createElement(N),D[sr]=x,D[pr]=m,Qi(D,N,m),ct(D),x.stateNode=D):x.memoizedState=UM(x.type,m.memoizedProps,x.pendingProps,m.memoizedState),null;case 27:return K(x),m===null&&Va&&(D=x.stateNode=FM(x.type,x.pendingProps,W.current),Ms=x,gc=!0,L=Zn,dm(x.type)?(Ok=L,Zn=yd(D.firstChild)):Zn=L),Ki(m,x,x.pendingProps.children,N),yj(m,x),m===null&&(x.flags|=4194304),x.child;case 5:return m===null&&Va&&((L=D=Zn)&&(D=CZ(D,x.type,x.pendingProps,gc),D!==null?(x.stateNode=D,Ms=x,Zn=yd(D.firstChild),gc=!1,L=!0):L=!1),L||Ch(x)),K(x),L=x.type,G=x.pendingProps,me=m!==null?m.memoizedProps:null,D=G.children,Ak(L,G)?D=null:me!==null&&Ak(L,me)&&(x.flags|=32),x.memoizedState!==null&&(L=Rl(m,x,mu,null,null,N),xb._currentValue=L),yj(m,x),Ki(m,x,D,N),x.child;case 6:return m===null&&Va&&((m=N=Zn)&&(N=kZ(N,x.pendingProps,gc),N!==null?(x.stateNode=N,Ms=x,Zn=null,m=!0):m=!1),m||Ch(x)),null;case 13:return PO(m,x,N);case 4:return le(x,x.stateNode.containerInfo),D=x.pendingProps,m===null?x.child=Av(x,null,D,N):Ki(m,x,D,N),x.child;case 11:return CO(m,x,x.type,x.pendingProps,N);case 7:return Ki(m,x,x.pendingProps,N),x.child;case 8:return Ki(m,x,x.pendingProps.children,N),x.child;case 12:return Ki(m,x,x.pendingProps.children,N),x.child;case 10:return D=x.pendingProps,uu(x,x.type,D.value),Ki(m,x,D.children,N),x.child;case 9:return L=x.type._context,D=x.pendingProps.children,jc(x),L=Rs(L),D=D(L),x.flags|=1,Ki(m,x,D,N),x.child;case 14:return kO(m,x,x.type,x.pendingProps,N);case 15:return EO(m,x,x.type,x.pendingProps,N);case 19:return MO(m,x,N);case 31:return D=x.pendingProps,N=x.mode,D={mode:D.mode,children:D.children},m===null?(N=jj(D,N),N.ref=x.ref,x.child=N,N.return=x,x=N):(N=vc(m.child,D),N.ref=x.ref,x.child=N,N.return=x,x=N),x;case 22:return _O(m,x,N);case 24:return jc(x),D=Rs(Fs),m===null?(L=ae(),L===null&&(L=Mn,G=Bg(),L.pooledCache=G,G.refCount++,G!==null&&(L.pooledCacheLanes|=N),L=G),x.memoizedState={parent:D,cache:L},ot(x),uu(x,Fs,L)):((m.lanes&N)!==0&&(ht(m,x),yr(x,null,null,N),qr()),L=m.memoizedState,G=x.memoizedState,L.parent!==D?(L={parent:D,cache:D},x.memoizedState=L,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=L),uu(x,Fs,D)):(D=G.cache,uu(x,Fs,D),D!==L.cache&&yv(x,[Fs],N,!0))),Ki(m,x,x.pendingProps.children,N),x.child;case 29:throw x.pendingProps}throw Error(a(156,x.tag))}function Ph(m){m.flags|=4}function FO(m,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!HM(x)){if(x=wc.current,x!==null&&((La&4194048)===La?vu!==null:(La&62914560)!==La&&(La&536870912)===0||x!==vu))throw St=Oe,Se;m.flags|=8192}}function Nj(m,x){x!==null&&(m.flags|=4),m.flags&16384&&(x=m.tag!==22?Pe():536870912,m.lanes|=x,Ov|=x)}function tb(m,x){if(!Va)switch(m.tailMode){case"hidden":x=m.tail;for(var N=null;x!==null;)x.alternate!==null&&(N=x),x=x.sibling;N===null?m.tail=null:N.sibling=null;break;case"collapsed":N=m.tail;for(var D=null;N!==null;)N.alternate!==null&&(D=N),N=N.sibling;D===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:D.sibling=null}}function us(m){var x=m.alternate!==null&&m.alternate.child===m.child,N=0,D=0;if(x)for(var L=m.child;L!==null;)N|=L.lanes|L.childLanes,D|=L.subtreeFlags&65011712,D|=L.flags&65011712,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)N|=L.lanes|L.childLanes,D|=L.subtreeFlags,D|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=D,m.childLanes=N,x}function JJ(m,x,N){var D=x.pendingProps;switch(kp(x),x.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(x),null;case 1:return us(x),null;case 3:return N=x.stateNode,D=null,m!==null&&(D=m.memoizedState.cache),x.memoizedState.cache!==D&&(x.flags|=2048),yc(Fs),te(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(m===null||m.child===null)&&(Gi(x)?Ph(x):m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Z1())),us(x),null;case 26:return N=x.memoizedState,m===null?(Ph(x),N!==null?(us(x),FO(x,N)):(us(x),x.flags&=-16777217)):N?N!==m.memoizedState?(Ph(x),us(x),FO(x,N)):(us(x),x.flags&=-16777217):(m.memoizedProps!==D&&Ph(x),us(x),x.flags&=-16777217),null;case 27:de(x),N=W.current;var L=x.type;if(m!==null&&x.stateNode!=null)m.memoizedProps!==D&&Ph(x);else{if(!D){if(x.stateNode===null)throw Error(a(166));return us(x),null}m=ee.current,Gi(x)?J1(x):(m=FM(L,D,N),x.stateNode=m,Ph(x))}return us(x),null;case 5:if(de(x),N=x.type,m!==null&&x.stateNode!=null)m.memoizedProps!==D&&Ph(x);else{if(!D){if(x.stateNode===null)throw Error(a(166));return us(x),null}if(m=ee.current,Gi(x))J1(x);else{switch(L=Mj(W.current),m){case 1:m=L.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:m=L.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":m=L.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":m=L.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":m=L.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof D.is=="string"?L.createElement("select",{is:D.is}):L.createElement("select"),D.multiple?m.multiple=!0:D.size&&(m.size=D.size);break;default:m=typeof D.is=="string"?L.createElement(N,{is:D.is}):L.createElement(N)}}m[sr]=x,m[pr]=D;e:for(L=x.child;L!==null;){if(L.tag===5||L.tag===6)m.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===x)break e;for(;L.sibling===null;){if(L.return===null||L.return===x)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}x.stateNode=m;e:switch(Qi(m,N,D),N){case"button":case"input":case"select":case"textarea":m=!!D.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ph(x)}}return us(x),x.flags&=-16777217,null;case 6:if(m&&x.stateNode!=null)m.memoizedProps!==D&&Ph(x);else{if(typeof D!="string"&&x.stateNode===null)throw Error(a(166));if(m=W.current,Gi(x)){if(m=x.stateNode,N=x.memoizedProps,D=null,L=Ms,L!==null)switch(L.tag){case 27:case 5:D=L.memoizedProps}m[sr]=x,m=!!(m.nodeValue===N||D!==null&&D.suppressHydrationWarning===!0||AM(m.nodeValue,N)),m||Ch(x)}else m=Mj(m).createTextNode(D),m[sr]=x,x.stateNode=m}return us(x),null;case 13:if(D=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(L=Gi(x),D!==null&&D.dehydrated!==null){if(m===null){if(!L)throw Error(a(318));if(L=x.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(a(317));L[sr]=x}else Yo(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;us(x),L=!1}else L=Z1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=L),L=!0;if(!L)return x.flags&256?(Th(x),x):(Th(x),null)}if(Th(x),(x.flags&128)!==0)return x.lanes=N,x;if(N=D!==null,m=m!==null&&m.memoizedState!==null,N){D=x.child,L=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(L=D.alternate.memoizedState.cachePool.pool);var G=null;D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(G=D.memoizedState.cachePool.pool),G!==L&&(D.flags|=2048)}return N!==m&&N&&(x.child.flags|=8192),Nj(x,x.updateQueue),us(x),null;case 4:return te(),m===null&&Ck(x.stateNode.containerInfo),us(x),null;case 10:return yc(x.type),us(x),null;case 19:if(M(fi),L=x.memoizedState,L===null)return us(x),null;if(D=(x.flags&128)!==0,G=L.rendering,G===null)if(D)tb(L,!1);else{if(ws!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(G=vj(m),G!==null){for(x.flags|=128,tb(L,!1),m=G.updateQueue,x.updateQueue=m,Nj(x,m),x.subtreeFlags=0,m=N,N=x.child;N!==null;)wp(N,m),N=N.sibling;return z(fi,fi.current&1|2),x.child}m=m.sibling}L.tail!==null&&ge()>Cj&&(x.flags|=128,D=!0,tb(L,!1),x.lanes=4194304)}else{if(!D)if(m=vj(G),m!==null){if(x.flags|=128,D=!0,m=m.updateQueue,x.updateQueue=m,Nj(x,m),tb(L,!0),L.tail===null&&L.tailMode==="hidden"&&!G.alternate&&!Va)return us(x),null}else 2*ge()-L.renderingStartTime>Cj&&N!==536870912&&(x.flags|=128,D=!0,tb(L,!1),x.lanes=4194304);L.isBackwards?(G.sibling=x.child,x.child=G):(m=L.last,m!==null?m.sibling=G:x.child=G,L.last=G)}return L.tail!==null?(x=L.tail,L.rendering=x,L.tail=x.sibling,L.renderingStartTime=ge(),x.sibling=null,m=fi.current,z(fi,D?m&1|2:m&1),x):(us(x),null);case 22:case 23:return Th(x),la(),D=x.memoizedState!==null,m!==null?m.memoizedState!==null!==D&&(x.flags|=8192):D&&(x.flags|=8192),D?(N&536870912)!==0&&(x.flags&128)===0&&(us(x),x.subtreeFlags&6&&(x.flags|=8192)):us(x),N=x.updateQueue,N!==null&&Nj(x,N.retryQueue),N=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),D=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(D=x.memoizedState.cachePool.pool),D!==N&&(x.flags|=2048),m!==null&&M(U),null;case 24:return N=null,m!==null&&(N=m.memoizedState.cache),x.memoizedState.cache!==N&&(x.flags|=2048),yc(Fs),us(x),null;case 25:return null;case 30:return null}throw Error(a(156,x.tag))}function ZJ(m,x){switch(kp(x),x.tag){case 1:return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return yc(Fs),te(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 26:case 27:case 5:return de(x),null;case 13:if(Th(x),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(a(340));Yo()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return M(fi),null;case 4:return te(),null;case 10:return yc(x.type),null;case 22:case 23:return Th(x),la(),m!==null&&M(U),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 24:return yc(Fs),null;case 25:return null;default:return null}}function LO(m,x){switch(kp(x),x.tag){case 3:yc(Fs),te();break;case 26:case 27:case 5:de(x);break;case 4:te();break;case 13:Th(x);break;case 19:M(fi);break;case 10:yc(x.type);break;case 22:case 23:Th(x),la(),m!==null&&M(U);break;case 24:yc(Fs)}}function rb(m,x){try{var N=x.updateQueue,D=N!==null?N.lastEffect:null;if(D!==null){var L=D.next;N=L;do{if((N.tag&m)===m){D=void 0;var G=N.create,me=N.inst;D=G(),me.destroy=D}N=N.next}while(N!==L)}}catch(ke){Dn(x,x.return,ke)}}function rm(m,x,N){try{var D=x.updateQueue,L=D!==null?D.lastEffect:null;if(L!==null){var G=L.next;D=G;do{if((D.tag&m)===m){var me=D.inst,ke=me.destroy;if(ke!==void 0){me.destroy=void 0,L=x;var et=N,_t=ke;try{_t()}catch(Kt){Dn(L,et,Kt)}}}D=D.next}while(D!==G)}}catch(Kt){Dn(x,x.return,Kt)}}function BO(m){var x=m.updateQueue;if(x!==null){var N=m.stateNode;try{Ya(x,N)}catch(D){Dn(m,m.return,D)}}}function UO(m,x,N){N.props=Bp(m.type,m.memoizedProps),N.state=m.memoizedState;try{N.componentWillUnmount()}catch(D){Dn(m,x,D)}}function ab(m,x){try{var N=m.ref;if(N!==null){switch(m.tag){case 26:case 27:case 5:var D=m.stateNode;break;case 30:D=m.stateNode;break;default:D=m.stateNode}typeof N=="function"?m.refCleanup=N(D):N.current=D}}catch(L){Dn(m,x,L)}}function gu(m,x){var N=m.ref,D=m.refCleanup;if(N!==null)if(typeof D=="function")try{D()}catch(L){Dn(m,x,L)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof N=="function")try{N(null)}catch(L){Dn(m,x,L)}else N.current=null}function $O(m){var x=m.type,N=m.memoizedProps,D=m.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":N.autoFocus&&D.focus();break e;case"img":N.src?D.src=N.src:N.srcSet&&(D.srcset=N.srcSet)}}catch(L){Dn(m,m.return,L)}}function tk(m,x,N){try{var D=m.stateNode;yZ(D,m.type,N,x),D[pr]=x}catch(L){Dn(m,m.return,L)}}function VO(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&dm(m.type)||m.tag===4}function rk(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||VO(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&dm(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function ak(m,x,N){var D=m.tag;if(D===5||D===6)m=m.stateNode,x?(N.nodeType===9?N.body:N.nodeName==="HTML"?N.ownerDocument.body:N).insertBefore(m,x):(x=N.nodeType===9?N.body:N.nodeName==="HTML"?N.ownerDocument.body:N,x.appendChild(m),N=N._reactRootContainer,N!=null||x.onclick!==null||(x.onclick=Oj));else if(D!==4&&(D===27&&dm(m.type)&&(N=m.stateNode,x=null),m=m.child,m!==null))for(ak(m,x,N),m=m.sibling;m!==null;)ak(m,x,N),m=m.sibling}function wj(m,x,N){var D=m.tag;if(D===5||D===6)m=m.stateNode,x?N.insertBefore(m,x):N.appendChild(m);else if(D!==4&&(D===27&&dm(m.type)&&(N=m.stateNode),m=m.child,m!==null))for(wj(m,x,N),m=m.sibling;m!==null;)wj(m,x,N),m=m.sibling}function qO(m){var x=m.stateNode,N=m.memoizedProps;try{for(var D=m.type,L=x.attributes;L.length;)x.removeAttributeNode(L[0]);Qi(x,D,N),x[sr]=m,x[pr]=N}catch(G){Dn(m,m.return,G)}}var Oh=!1,Bs=!1,nk=!1,zO=typeof WeakSet=="function"?WeakSet:Set,Ii=null;function eZ(m,x){if(m=m.containerInfo,_k=$j,m=Wi(m),hi(m)){if("selectionStart"in m)var N={start:m.selectionStart,end:m.selectionEnd};else e:{N=(N=m.ownerDocument)&&N.defaultView||window;var D=N.getSelection&&N.getSelection();if(D&&D.rangeCount!==0){N=D.anchorNode;var L=D.anchorOffset,G=D.focusNode;D=D.focusOffset;try{N.nodeType,G.nodeType}catch{N=null;break e}var me=0,ke=-1,et=-1,_t=0,Kt=0,ar=m,Pt=null;t:for(;;){for(var Mt;ar!==N||L!==0&&ar.nodeType!==3||(ke=me+L),ar!==G||D!==0&&ar.nodeType!==3||(et=me+D),ar.nodeType===3&&(me+=ar.nodeValue.length),(Mt=ar.firstChild)!==null;)Pt=ar,ar=Mt;for(;;){if(ar===m)break t;if(Pt===N&&++_t===L&&(ke=me),Pt===G&&++Kt===D&&(et=me),(Mt=ar.nextSibling)!==null)break;ar=Pt,Pt=ar.parentNode}ar=Mt}N=ke===-1||et===-1?null:{start:ke,end:et}}else N=null}N=N||{start:0,end:0}}else N=null;for(Dk={focusedElem:m,selectionRange:N},$j=!1,Ii=x;Ii!==null;)if(x=Ii,m=x.child,(x.subtreeFlags&1024)!==0&&m!==null)m.return=x,Ii=m;else for(;Ii!==null;){switch(x=Ii,G=x.alternate,m=x.flags,x.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&G!==null){m=void 0,N=x,L=G.memoizedProps,G=G.memoizedState,D=N.stateNode;try{var na=Bp(N.type,L,N.elementType===N.type);m=D.getSnapshotBeforeUpdate(na,G),D.__reactInternalSnapshotBeforeUpdate=m}catch(Kr){Dn(N,N.return,Kr)}}break;case 3:if((m&1024)!==0){if(m=x.stateNode.containerInfo,N=m.nodeType,N===9)Ik(m);else if(N===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":Ik(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(a(163))}if(m=x.sibling,m!==null){m.return=x.return,Ii=m;break}Ii=x.return}}function HO(m,x,N){var D=N.flags;switch(N.tag){case 0:case 11:case 15:am(m,N),D&4&&rb(5,N);break;case 1:if(am(m,N),D&4)if(m=N.stateNode,x===null)try{m.componentDidMount()}catch(me){Dn(N,N.return,me)}else{var L=Bp(N.type,x.memoizedProps);x=x.memoizedState;try{m.componentDidUpdate(L,x,m.__reactInternalSnapshotBeforeUpdate)}catch(me){Dn(N,N.return,me)}}D&64&&BO(N),D&512&&ab(N,N.return);break;case 3:if(am(m,N),D&64&&(m=N.updateQueue,m!==null)){if(x=null,N.child!==null)switch(N.child.tag){case 27:case 5:x=N.child.stateNode;break;case 1:x=N.child.stateNode}try{Ya(m,x)}catch(me){Dn(N,N.return,me)}}break;case 27:x===null&&D&4&&qO(N);case 26:case 5:am(m,N),x===null&&D&4&&$O(N),D&512&&ab(N,N.return);break;case 12:am(m,N);break;case 13:am(m,N),D&4&&YO(m,N),D&64&&(m=N.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(N=cZ.bind(null,N),EZ(m,N))));break;case 22:if(D=N.memoizedState!==null||Oh,!D){x=x!==null&&x.memoizedState!==null||Bs,L=Oh;var G=Bs;Oh=D,(Bs=x)&&!G?nm(m,N,(N.subtreeFlags&8772)!==0):am(m,N),Oh=L,Bs=G}break;case 30:break;default:am(m,N)}}function WO(m){var x=m.alternate;x!==null&&(m.alternate=null,WO(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&_e(x)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var es=null,cl=!1;function Mh(m,x,N){for(N=N.child;N!==null;)GO(m,x,N),N=N.sibling}function GO(m,x,N){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(It,N)}catch{}switch(N.tag){case 26:Bs||gu(N,x),Mh(m,x,N),N.memoizedState?N.memoizedState.count--:N.stateNode&&(N=N.stateNode,N.parentNode.removeChild(N));break;case 27:Bs||gu(N,x);var D=es,L=cl;dm(N.type)&&(es=N.stateNode,cl=!1),Mh(m,x,N),hb(N.stateNode),es=D,cl=L;break;case 5:Bs||gu(N,x);case 6:if(D=es,L=cl,es=null,Mh(m,x,N),es=D,cl=L,es!==null)if(cl)try{(es.nodeType===9?es.body:es.nodeName==="HTML"?es.ownerDocument.body:es).removeChild(N.stateNode)}catch(G){Dn(N,x,G)}else try{es.removeChild(N.stateNode)}catch(G){Dn(N,x,G)}break;case 18:es!==null&&(cl?(m=es,MM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,N.stateNode),yb(m)):MM(es,N.stateNode));break;case 4:D=es,L=cl,es=N.stateNode.containerInfo,cl=!0,Mh(m,x,N),es=D,cl=L;break;case 0:case 11:case 14:case 15:Bs||rm(2,N,x),Bs||rm(4,N,x),Mh(m,x,N);break;case 1:Bs||(gu(N,x),D=N.stateNode,typeof D.componentWillUnmount=="function"&&UO(N,x,D)),Mh(m,x,N);break;case 21:Mh(m,x,N);break;case 22:Bs=(D=Bs)||N.memoizedState!==null,Mh(m,x,N),Bs=D;break;default:Mh(m,x,N)}}function YO(m,x){if(x.memoizedState===null&&(m=x.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{yb(m)}catch(N){Dn(x,x.return,N)}}function tZ(m){switch(m.tag){case 13:case 19:var x=m.stateNode;return x===null&&(x=m.stateNode=new zO),x;case 22:return m=m.stateNode,x=m._retryCache,x===null&&(x=m._retryCache=new zO),x;default:throw Error(a(435,m.tag))}}function sk(m,x){var N=tZ(m);x.forEach(function(D){var L=dZ.bind(null,m,D);N.has(D)||(N.add(D),D.then(L,L))})}function Ll(m,x){var N=x.deletions;if(N!==null)for(var D=0;D<N.length;D++){var L=N[D],G=m,me=x,ke=me;e:for(;ke!==null;){switch(ke.tag){case 27:if(dm(ke.type)){es=ke.stateNode,cl=!1;break e}break;case 5:es=ke.stateNode,cl=!1;break e;case 3:case 4:es=ke.stateNode.containerInfo,cl=!0;break e}ke=ke.return}if(es===null)throw Error(a(160));GO(G,me,L),es=null,cl=!1,G=L.alternate,G!==null&&(G.return=null),L.return=null}if(x.subtreeFlags&13878)for(x=x.child;x!==null;)KO(x,m),x=x.sibling}var bd=null;function KO(m,x){var N=m.alternate,D=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Ll(x,m),Bl(m),D&4&&(rm(3,m,m.return),rb(3,m),rm(5,m,m.return));break;case 1:Ll(x,m),Bl(m),D&512&&(Bs||N===null||gu(N,N.return)),D&64&&Oh&&(m=m.updateQueue,m!==null&&(D=m.callbacks,D!==null&&(N=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=N===null?D:N.concat(D))));break;case 26:var L=bd;if(Ll(x,m),Bl(m),D&512&&(Bs||N===null||gu(N,N.return)),D&4){var G=N!==null?N.memoizedState:null;if(D=m.memoizedState,N===null)if(D===null)if(m.stateNode===null){e:{D=m.type,N=m.memoizedProps,L=L.ownerDocument||L;t:switch(D){case"title":G=L.getElementsByTagName("title")[0],(!G||G[Ae]||G[sr]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=L.createElement(D),L.head.insertBefore(G,L.querySelector("head > title"))),Qi(G,D,N),G[sr]=m,ct(G),D=G;break e;case"link":var me=qM("link","href",L).get(D+(N.href||""));if(me){for(var ke=0;ke<me.length;ke++)if(G=me[ke],G.getAttribute("href")===(N.href==null||N.href===""?null:N.href)&&G.getAttribute("rel")===(N.rel==null?null:N.rel)&&G.getAttribute("title")===(N.title==null?null:N.title)&&G.getAttribute("crossorigin")===(N.crossOrigin==null?null:N.crossOrigin)){me.splice(ke,1);break t}}G=L.createElement(D),Qi(G,D,N),L.head.appendChild(G);break;case"meta":if(me=qM("meta","content",L).get(D+(N.content||""))){for(ke=0;ke<me.length;ke++)if(G=me[ke],G.getAttribute("content")===(N.content==null?null:""+N.content)&&G.getAttribute("name")===(N.name==null?null:N.name)&&G.getAttribute("property")===(N.property==null?null:N.property)&&G.getAttribute("http-equiv")===(N.httpEquiv==null?null:N.httpEquiv)&&G.getAttribute("charset")===(N.charSet==null?null:N.charSet)){me.splice(ke,1);break t}}G=L.createElement(D),Qi(G,D,N),L.head.appendChild(G);break;default:throw Error(a(468,D))}G[sr]=m,ct(G),D=G}m.stateNode=D}else zM(L,m.type,m.stateNode);else m.stateNode=VM(L,D,m.memoizedProps);else G!==D?(G===null?N.stateNode!==null&&(N=N.stateNode,N.parentNode.removeChild(N)):G.count--,D===null?zM(L,m.type,m.stateNode):VM(L,D,m.memoizedProps)):D===null&&m.stateNode!==null&&tk(m,m.memoizedProps,N.memoizedProps)}break;case 27:Ll(x,m),Bl(m),D&512&&(Bs||N===null||gu(N,N.return)),N!==null&&D&4&&tk(m,m.memoizedProps,N.memoizedProps);break;case 5:if(Ll(x,m),Bl(m),D&512&&(Bs||N===null||gu(N,N.return)),m.flags&32){L=m.stateNode;try{jr(L,"")}catch(Mt){Dn(m,m.return,Mt)}}D&4&&m.stateNode!=null&&(L=m.memoizedProps,tk(m,L,N!==null?N.memoizedProps:L)),D&1024&&(nk=!0);break;case 6:if(Ll(x,m),Bl(m),D&4){if(m.stateNode===null)throw Error(a(162));D=m.memoizedProps,N=m.stateNode;try{N.nodeValue=D}catch(Mt){Dn(m,m.return,Mt)}}break;case 3:if(Lj=null,L=bd,bd=Rj(x.containerInfo),Ll(x,m),bd=L,Bl(m),D&4&&N!==null&&N.memoizedState.isDehydrated)try{yb(x.containerInfo)}catch(Mt){Dn(m,m.return,Mt)}nk&&(nk=!1,XO(m));break;case 4:D=bd,bd=Rj(m.stateNode.containerInfo),Ll(x,m),Bl(m),bd=D;break;case 12:Ll(x,m),Bl(m);break;case 13:Ll(x,m),Bl(m),m.child.flags&8192&&m.memoizedState!==null!=(N!==null&&N.memoizedState!==null)&&(uk=ge()),D&4&&(D=m.updateQueue,D!==null&&(m.updateQueue=null,sk(m,D)));break;case 22:L=m.memoizedState!==null;var et=N!==null&&N.memoizedState!==null,_t=Oh,Kt=Bs;if(Oh=_t||L,Bs=Kt||et,Ll(x,m),Bs=Kt,Oh=_t,Bl(m),D&8192)e:for(x=m.stateNode,x._visibility=L?x._visibility&-2:x._visibility|1,L&&(N===null||et||Oh||Bs||Up(m)),N=null,x=m;;){if(x.tag===5||x.tag===26){if(N===null){et=N=x;try{if(G=et.stateNode,L)me=G.style,typeof me.setProperty=="function"?me.setProperty("display","none","important"):me.display="none";else{ke=et.stateNode;var ar=et.memoizedProps.style,Pt=ar!=null&&ar.hasOwnProperty("display")?ar.display:null;ke.style.display=Pt==null||typeof Pt=="boolean"?"":(""+Pt).trim()}}catch(Mt){Dn(et,et.return,Mt)}}}else if(x.tag===6){if(N===null){et=x;try{et.stateNode.nodeValue=L?"":et.memoizedProps}catch(Mt){Dn(et,et.return,Mt)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===m)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break e;for(;x.sibling===null;){if(x.return===null||x.return===m)break e;N===x&&(N=null),x=x.return}N===x&&(N=null),x.sibling.return=x.return,x=x.sibling}D&4&&(D=m.updateQueue,D!==null&&(N=D.retryQueue,N!==null&&(D.retryQueue=null,sk(m,N))));break;case 19:Ll(x,m),Bl(m),D&4&&(D=m.updateQueue,D!==null&&(m.updateQueue=null,sk(m,D)));break;case 30:break;case 21:break;default:Ll(x,m),Bl(m)}}function Bl(m){var x=m.flags;if(x&2){try{for(var N,D=m.return;D!==null;){if(VO(D)){N=D;break}D=D.return}if(N==null)throw Error(a(160));switch(N.tag){case 27:var L=N.stateNode,G=rk(m);wj(m,G,L);break;case 5:var me=N.stateNode;N.flags&32&&(jr(me,""),N.flags&=-33);var ke=rk(m);wj(m,ke,me);break;case 3:case 4:var et=N.stateNode.containerInfo,_t=rk(m);ak(m,_t,et);break;default:throw Error(a(161))}}catch(Kt){Dn(m,m.return,Kt)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function XO(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var x=m;XO(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),m=m.sibling}}function am(m,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)HO(m,x.alternate,x),x=x.sibling}function Up(m){for(m=m.child;m!==null;){var x=m;switch(x.tag){case 0:case 11:case 14:case 15:rm(4,x,x.return),Up(x);break;case 1:gu(x,x.return);var N=x.stateNode;typeof N.componentWillUnmount=="function"&&UO(x,x.return,N),Up(x);break;case 27:hb(x.stateNode);case 26:case 5:gu(x,x.return),Up(x);break;case 22:x.memoizedState===null&&Up(x);break;case 30:Up(x);break;default:Up(x)}m=m.sibling}}function nm(m,x,N){for(N=N&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var D=x.alternate,L=m,G=x,me=G.flags;switch(G.tag){case 0:case 11:case 15:nm(L,G,N),rb(4,G);break;case 1:if(nm(L,G,N),D=G,L=D.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(_t){Dn(D,D.return,_t)}if(D=G,L=D.updateQueue,L!==null){var ke=D.stateNode;try{var et=L.shared.hiddenCallbacks;if(et!==null)for(L.shared.hiddenCallbacks=null,L=0;L<et.length;L++)Ra(et[L],ke)}catch(_t){Dn(D,D.return,_t)}}N&&me&64&&BO(G),ab(G,G.return);break;case 27:qO(G);case 26:case 5:nm(L,G,N),N&&D===null&&me&4&&$O(G),ab(G,G.return);break;case 12:nm(L,G,N);break;case 13:nm(L,G,N),N&&me&4&&YO(L,G);break;case 22:G.memoizedState===null&&nm(L,G,N),ab(G,G.return);break;case 30:break;default:nm(L,G,N)}x=x.sibling}}function ik(m,x){var N=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),m=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(m=x.memoizedState.cachePool.pool),m!==N&&(m!=null&&m.refCount++,N!=null&&Ep(N))}function ok(m,x){m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Ep(m))}function bu(m,x,N,D){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)QO(m,x,N,D),x=x.sibling}function QO(m,x,N,D){var L=x.flags;switch(x.tag){case 0:case 11:case 15:bu(m,x,N,D),L&2048&&rb(9,x);break;case 1:bu(m,x,N,D);break;case 3:bu(m,x,N,D),L&2048&&(m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Ep(m)));break;case 12:if(L&2048){bu(m,x,N,D),m=x.stateNode;try{var G=x.memoizedProps,me=G.id,ke=G.onPostCommit;typeof ke=="function"&&ke(me,x.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(et){Dn(x,x.return,et)}}else bu(m,x,N,D);break;case 13:bu(m,x,N,D);break;case 23:break;case 22:G=x.stateNode,me=x.alternate,x.memoizedState!==null?G._visibility&2?bu(m,x,N,D):nb(m,x):G._visibility&2?bu(m,x,N,D):(G._visibility|=2,Tv(m,x,N,D,(x.subtreeFlags&10256)!==0)),L&2048&&ik(me,x);break;case 24:bu(m,x,N,D),L&2048&&ok(x.alternate,x);break;default:bu(m,x,N,D)}}function Tv(m,x,N,D,L){for(L=L&&(x.subtreeFlags&10256)!==0,x=x.child;x!==null;){var G=m,me=x,ke=N,et=D,_t=me.flags;switch(me.tag){case 0:case 11:case 15:Tv(G,me,ke,et,L),rb(8,me);break;case 23:break;case 22:var Kt=me.stateNode;me.memoizedState!==null?Kt._visibility&2?Tv(G,me,ke,et,L):nb(G,me):(Kt._visibility|=2,Tv(G,me,ke,et,L)),L&&_t&2048&&ik(me.alternate,me);break;case 24:Tv(G,me,ke,et,L),L&&_t&2048&&ok(me.alternate,me);break;default:Tv(G,me,ke,et,L)}x=x.sibling}}function nb(m,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var N=m,D=x,L=D.flags;switch(D.tag){case 22:nb(N,D),L&2048&&ik(D.alternate,D);break;case 24:nb(N,D),L&2048&&ok(D.alternate,D);break;default:nb(N,D)}x=x.sibling}}var sb=8192;function Iv(m){if(m.subtreeFlags&sb)for(m=m.child;m!==null;)JO(m),m=m.sibling}function JO(m){switch(m.tag){case 26:Iv(m),m.flags&sb&&m.memoizedState!==null&&UZ(bd,m.memoizedState,m.memoizedProps);break;case 5:Iv(m);break;case 3:case 4:var x=bd;bd=Rj(m.stateNode.containerInfo),Iv(m),bd=x;break;case 22:m.memoizedState===null&&(x=m.alternate,x!==null&&x.memoizedState!==null?(x=sb,sb=16777216,Iv(m),sb=x):Iv(m));break;default:Iv(m)}}function ZO(m){var x=m.alternate;if(x!==null&&(m=x.child,m!==null)){x.child=null;do x=m.sibling,m.sibling=null,m=x;while(m!==null)}}function ib(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var N=0;N<x.length;N++){var D=x[N];Ii=D,tM(D,m)}ZO(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)eM(m),m=m.sibling}function eM(m){switch(m.tag){case 0:case 11:case 15:ib(m),m.flags&2048&&rm(9,m,m.return);break;case 3:ib(m);break;case 12:ib(m);break;case 22:var x=m.stateNode;m.memoizedState!==null&&x._visibility&2&&(m.return===null||m.return.tag!==13)?(x._visibility&=-3,Sj(m)):ib(m);break;default:ib(m)}}function Sj(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var N=0;N<x.length;N++){var D=x[N];Ii=D,tM(D,m)}ZO(m)}for(m=m.child;m!==null;){switch(x=m,x.tag){case 0:case 11:case 15:rm(8,x,x.return),Sj(x);break;case 22:N=x.stateNode,N._visibility&2&&(N._visibility&=-3,Sj(x));break;default:Sj(x)}m=m.sibling}}function tM(m,x){for(;Ii!==null;){var N=Ii;switch(N.tag){case 0:case 11:case 15:rm(8,N,x);break;case 23:case 22:if(N.memoizedState!==null&&N.memoizedState.cachePool!==null){var D=N.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:Ep(N.memoizedState.cache)}if(D=N.child,D!==null)D.return=N,Ii=D;else e:for(N=m;Ii!==null;){D=Ii;var L=D.sibling,G=D.return;if(WO(D),D===N){Ii=null;break e}if(L!==null){L.return=G,Ii=L;break e}Ii=G}}}var rZ={getCacheForType:function(m){var x=Rs(Fs),N=x.data.get(m);return N===void 0&&(N=m(),x.data.set(m,N)),N}},aZ=typeof WeakMap=="function"?WeakMap:Map,pn=0,Mn=null,Da=null,La=0,xn=0,Ul=null,sm=!1,Pv=!1,lk=!1,Rh=0,ws=0,im=0,$p=0,ck=0,Sc=0,Ov=0,ob=null,dl=null,dk=!1,uk=0,Cj=1/0,kj=null,om=null,Xi=0,lm=null,Mv=null,Rv=0,hk=0,fk=null,rM=null,lb=0,mk=null;function $l(){if((pn&2)!==0&&La!==0)return La&-La;if(B.T!==null){var m=kh;return m!==0?m:jk()}return Tt()}function aM(){Sc===0&&(Sc=(La&536870912)===0||Va?pt():536870912);var m=wc.current;return m!==null&&(m.flags|=32),Sc}function Vl(m,x,N){(m===Mn&&(xn===2||xn===9)||m.cancelPendingCommit!==null)&&(Fv(m,0),cm(m,La,Sc,!1)),Ye(m,N),((pn&2)===0||m!==Mn)&&(m===Mn&&((pn&2)===0&&($p|=N),ws===4&&cm(m,La,Sc,!1)),yu(m))}function nM(m,x,N){if((pn&6)!==0)throw Error(a(327));var D=!N&&(x&124)===0&&(x&m.expiredLanes)===0||Fe(m,x),L=D?iZ(m,x):vk(m,x,!0),G=D;do{if(L===0){Pv&&!D&&cm(m,x,0,!1);break}else{if(N=m.current.alternate,G&&!nZ(N)){L=vk(m,x,!1),G=!1;continue}if(L===2){if(G=x,m.errorRecoveryDisabledLanes&G)var me=0;else me=m.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){x=me;e:{var ke=m;L=ob;var et=ke.current.memoizedState.isDehydrated;if(et&&(Fv(ke,me).flags|=256),me=vk(ke,me,!1),me!==2){if(lk&&!et){ke.errorRecoveryDisabledLanes|=G,$p|=G,L=4;break e}G=dl,dl=L,G!==null&&(dl===null?dl=G:dl.push.apply(dl,G))}L=me}if(G=!1,L!==2)continue}}if(L===1){Fv(m,0),cm(m,x,0,!0);break}e:{switch(D=m,G=L,G){case 0:case 1:throw Error(a(345));case 4:if((x&4194048)!==x)break;case 6:cm(D,x,Sc,!sm);break e;case 2:dl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((x&62914560)===x&&(L=uk+300-ge(),10<L)){if(cm(D,x,Sc,!sm),ze(D,0,!0)!==0)break e;D.timeoutHandle=PM(sM.bind(null,D,N,dl,kj,dk,x,Sc,$p,Ov,sm,G,2,-0,0),L);break e}sM(D,N,dl,kj,dk,x,Sc,$p,Ov,sm,G,0,-0,0)}}break}while(!0);yu(m)}function sM(m,x,N,D,L,G,me,ke,et,_t,Kt,ar,Pt,Mt){if(m.timeoutHandle=-1,ar=x.subtreeFlags,(ar&8192||(ar&16785408)===16785408)&&(pb={stylesheets:null,count:0,unsuspend:BZ},JO(x),ar=$Z(),ar!==null)){m.cancelPendingCommit=ar(hM.bind(null,m,x,G,N,D,L,me,ke,et,Kt,1,Pt,Mt)),cm(m,G,me,!_t);return}hM(m,x,G,N,D,L,me,ke,et)}function nZ(m){for(var x=m;;){var N=x.tag;if((N===0||N===11||N===15)&&x.flags&16384&&(N=x.updateQueue,N!==null&&(N=N.stores,N!==null)))for(var D=0;D<N.length;D++){var L=N[D],G=L.getSnapshot;L=L.value;try{if(!Zs(G(),L))return!1}catch{return!1}}if(N=x.child,x.subtreeFlags&16384&&N!==null)N.return=x,x=N;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function cm(m,x,N,D){x&=~ck,x&=~$p,m.suspendedLanes|=x,m.pingedLanes&=~x,D&&(m.warmLanes|=x),D=m.expirationTimes;for(var L=x;0<L;){var G=31-fe(L),me=1<<G;D[G]=-1,L&=~me}N!==0&&Gt(m,N,x)}function Ej(){return(pn&6)===0?(cb(0),!1):!0}function pk(){if(Da!==null){if(xn===0)var m=Da.return;else m=Da,fd=ti=null,wv(m),Dv=null,Zg=0,m=Da;for(;m!==null;)LO(m.alternate,m),m=m.return;Da=null}}function Fv(m,x){var N=m.timeoutHandle;N!==-1&&(m.timeoutHandle=-1,NZ(N)),N=m.cancelPendingCommit,N!==null&&(m.cancelPendingCommit=null,N()),pk(),Mn=m,Da=N=vc(m.current,null),La=x,xn=0,Ul=null,sm=!1,Pv=Fe(m,x),lk=!1,Ov=Sc=ck=$p=im=ws=0,dl=ob=null,dk=!1,(x&8)!==0&&(x|=x&32);var D=m.entangledLanes;if(D!==0)for(m=m.entanglements,D&=x;0<D;){var L=31-fe(D),G=1<<L;x|=m[L],D&=~G}return Rh=x,sl(),N}function iM(m,x){Gr=null,B.H=mj,x===we||x===Ce?(x=vt(),xn=3):x===Se?(x=vt(),xn=4):xn=x===SO?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,Ul=x,Da===null&&(ws=1,bj(m,ja(x,m.current)))}function oM(){var m=B.H;return B.H=mj,m===null?mj:m}function lM(){var m=B.A;return B.A=rZ,m}function xk(){ws=4,sm||(La&4194048)!==La&&wc.current!==null||(Pv=!0),(im&134217727)===0&&($p&134217727)===0||Mn===null||cm(Mn,La,Sc,!1)}function vk(m,x,N){var D=pn;pn|=2;var L=oM(),G=lM();(Mn!==m||La!==x)&&(kj=null,Fv(m,x)),x=!1;var me=ws;e:do try{if(xn!==0&&Da!==null){var ke=Da,et=Ul;switch(xn){case 8:pk(),me=6;break e;case 3:case 2:case 9:case 6:wc.current===null&&(x=!0);var _t=xn;if(xn=0,Ul=null,Lv(m,ke,et,_t),N&&Pv){me=0;break e}break;default:_t=xn,xn=0,Ul=null,Lv(m,ke,et,_t)}}sZ(),me=ws;break}catch(Kt){iM(m,Kt)}while(!0);return x&&m.shellSuspendCounter++,fd=ti=null,pn=D,B.H=L,B.A=G,Da===null&&(Mn=null,La=0,sl()),me}function sZ(){for(;Da!==null;)cM(Da)}function iZ(m,x){var N=pn;pn|=2;var D=oM(),L=lM();Mn!==m||La!==x?(kj=null,Cj=ge()+500,Fv(m,x)):Pv=Fe(m,x);e:do try{if(xn!==0&&Da!==null){x=Da;var G=Ul;t:switch(xn){case 1:xn=0,Ul=null,Lv(m,x,G,1);break;case 2:case 9:if(qe(G)){xn=0,Ul=null,dM(x);break}x=function(){xn!==2&&xn!==9||Mn!==m||(xn=7),yu(m)},G.then(x,x);break e;case 3:xn=7;break e;case 4:xn=5;break e;case 7:qe(G)?(xn=0,Ul=null,dM(x)):(xn=0,Ul=null,Lv(m,x,G,7));break;case 5:var me=null;switch(Da.tag){case 26:me=Da.memoizedState;case 5:case 27:var ke=Da;if(!me||HM(me)){xn=0,Ul=null;var et=ke.sibling;if(et!==null)Da=et;else{var _t=ke.return;_t!==null?(Da=_t,_j(_t)):Da=null}break t}}xn=0,Ul=null,Lv(m,x,G,5);break;case 6:xn=0,Ul=null,Lv(m,x,G,6);break;case 8:pk(),ws=6;break e;default:throw Error(a(462))}}oZ();break}catch(Kt){iM(m,Kt)}while(!0);return fd=ti=null,B.H=D,B.A=L,pn=N,Da!==null?0:(Mn=null,La=0,sl(),ws)}function oZ(){for(;Da!==null&&!ue();)cM(Da)}function cM(m){var x=RO(m.alternate,m,Rh);m.memoizedProps=m.pendingProps,x===null?_j(m):Da=x}function dM(m){var x=m,N=x.alternate;switch(x.tag){case 15:case 0:x=AO(N,x,x.pendingProps,x.type,void 0,La);break;case 11:x=AO(N,x,x.pendingProps,x.type.render,x.ref,La);break;case 5:wv(x);default:LO(N,x),x=Da=wp(x,Rh),x=RO(N,x,Rh)}m.memoizedProps=m.pendingProps,x===null?_j(m):Da=x}function Lv(m,x,N,D){fd=ti=null,wv(x),Dv=null,Zg=0;var L=x.return;try{if(XJ(m,L,x,N,La)){ws=1,bj(m,ja(N,m.current)),Da=null;return}}catch(G){if(L!==null)throw Da=L,G;ws=1,bj(m,ja(N,m.current)),Da=null;return}x.flags&32768?(Va||D===1?m=!0:Pv||(La&536870912)!==0?m=!1:(sm=m=!0,(D===2||D===9||D===3||D===6)&&(D=wc.current,D!==null&&D.tag===13&&(D.flags|=16384))),uM(x,m)):_j(x)}function _j(m){var x=m;do{if((x.flags&32768)!==0){uM(x,sm);return}m=x.return;var N=JJ(x.alternate,x,Rh);if(N!==null){Da=N;return}if(x=x.sibling,x!==null){Da=x;return}Da=x=m}while(x!==null);ws===0&&(ws=5)}function uM(m,x){do{var N=ZJ(m.alternate,m);if(N!==null){N.flags&=32767,Da=N;return}if(N=m.return,N!==null&&(N.flags|=32768,N.subtreeFlags=0,N.deletions=null),!x&&(m=m.sibling,m!==null)){Da=m;return}Da=m=N}while(m!==null);ws=6,Da=null}function hM(m,x,N,D,L,G,me,ke,et){m.cancelPendingCommit=null;do Dj();while(Xi!==0);if((pn&6)!==0)throw Error(a(327));if(x!==null){if(x===m.current)throw Error(a(177));if(G=x.lanes|x.childLanes,G|=ls,At(m,N,G,me,ke,et),m===Mn&&(Da=Mn=null,La=0),Mv=x,lm=m,Rv=N,hk=G,fk=L,rM=D,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,uZ(tt,function(){return vM(),null})):(m.callbackNode=null,m.callbackPriority=0),D=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||D){D=B.T,B.T=null,L=Q.p,Q.p=2,me=pn,pn|=4;try{eZ(m,x,N)}finally{pn=me,Q.p=L,B.T=D}}Xi=1,fM(),mM(),pM()}}function fM(){if(Xi===1){Xi=0;var m=lm,x=Mv,N=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||N){N=B.T,B.T=null;var D=Q.p;Q.p=2;var L=pn;pn|=4;try{KO(x,m);var G=Dk,me=Wi(m.containerInfo),ke=G.focusedElem,et=G.selectionRange;if(me!==ke&&ke&&ke.ownerDocument&&tu(ke.ownerDocument.documentElement,ke)){if(et!==null&&hi(ke)){var _t=et.start,Kt=et.end;if(Kt===void 0&&(Kt=_t),"selectionStart"in ke)ke.selectionStart=_t,ke.selectionEnd=Math.min(Kt,ke.value.length);else{var ar=ke.ownerDocument||document,Pt=ar&&ar.defaultView||window;if(Pt.getSelection){var Mt=Pt.getSelection(),na=ke.textContent.length,Kr=Math.min(et.start,na),kn=et.end===void 0?Kr:Math.min(et.end,na);!Mt.extend&&Kr>kn&&(me=kn,kn=Kr,Kr=me);var bt=sd(ke,Kr),lt=sd(ke,kn);if(bt&&lt&&(Mt.rangeCount!==1||Mt.anchorNode!==bt.node||Mt.anchorOffset!==bt.offset||Mt.focusNode!==lt.node||Mt.focusOffset!==lt.offset)){var Ct=ar.createRange();Ct.setStart(bt.node,bt.offset),Mt.removeAllRanges(),Kr>kn?(Mt.addRange(Ct),Mt.extend(lt.node,lt.offset)):(Ct.setEnd(lt.node,lt.offset),Mt.addRange(Ct))}}}}for(ar=[],Mt=ke;Mt=Mt.parentNode;)Mt.nodeType===1&&ar.push({element:Mt,left:Mt.scrollLeft,top:Mt.scrollTop});for(typeof ke.focus=="function"&&ke.focus(),ke=0;ke<ar.length;ke++){var Zt=ar[ke];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}$j=!!_k,Dk=_k=null}finally{pn=L,Q.p=D,B.T=N}}m.current=x,Xi=2}}function mM(){if(Xi===2){Xi=0;var m=lm,x=Mv,N=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||N){N=B.T,B.T=null;var D=Q.p;Q.p=2;var L=pn;pn|=4;try{HO(m,x.alternate,x)}finally{pn=L,Q.p=D,B.T=N}}Xi=3}}function pM(){if(Xi===4||Xi===3){Xi=0,oe();var m=lm,x=Mv,N=Rv,D=rM;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Xi=5:(Xi=0,Mv=lm=null,xM(m,m.pendingLanes));var L=m.pendingLanes;if(L===0&&(om=null),it(N),x=x.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(It,x,void 0,(x.current.flags&128)===128)}catch{}if(D!==null){x=B.T,L=Q.p,Q.p=2,B.T=null;try{for(var G=m.onRecoverableError,me=0;me<D.length;me++){var ke=D[me];G(ke.value,{componentStack:ke.stack})}}finally{B.T=x,Q.p=L}}(Rv&3)!==0&&Dj(),yu(m),L=m.pendingLanes,(N&4194090)!==0&&(L&42)!==0?m===mk?lb++:(lb=0,mk=m):lb=0,cb(0)}}function xM(m,x){(m.pooledCacheLanes&=x)===0&&(x=m.pooledCache,x!=null&&(m.pooledCache=null,Ep(x)))}function Dj(m){return fM(),mM(),pM(),vM()}function vM(){if(Xi!==5)return!1;var m=lm,x=hk;hk=0;var N=it(Rv),D=B.T,L=Q.p;try{Q.p=32>N?32:N,B.T=null,N=fk,fk=null;var G=lm,me=Rv;if(Xi=0,Mv=lm=null,Rv=0,(pn&6)!==0)throw Error(a(331));var ke=pn;if(pn|=4,eM(G.current),QO(G,G.current,me,N),pn=ke,cb(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(It,G)}catch{}return!0}finally{Q.p=L,B.T=D,xM(m,x)}}function gM(m,x,N){x=ja(N,x),x=WC(m.stateNode,x,2),m=rr(m,x,2),m!==null&&(Ye(m,2),yu(m))}function Dn(m,x,N){if(m.tag===3)gM(m,m,N);else for(;x!==null;){if(x.tag===3){gM(x,m,N);break}else if(x.tag===1){var D=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(om===null||!om.has(D))){m=ja(N,m),N=NO(2),D=rr(x,N,2),D!==null&&(wO(N,D,x,m),Ye(D,2),yu(D));break}}x=x.return}}function gk(m,x,N){var D=m.pingCache;if(D===null){D=m.pingCache=new aZ;var L=new Set;D.set(x,L)}else L=D.get(x),L===void 0&&(L=new Set,D.set(x,L));L.has(N)||(lk=!0,L.add(N),m=lZ.bind(null,m,x,N),x.then(m,m))}function lZ(m,x,N){var D=m.pingCache;D!==null&&D.delete(x),m.pingedLanes|=m.suspendedLanes&N,m.warmLanes&=~N,Mn===m&&(La&N)===N&&(ws===4||ws===3&&(La&62914560)===La&&300>ge()-uk?(pn&2)===0&&Fv(m,0):ck|=N,Ov===La&&(Ov=0)),yu(m)}function bM(m,x){x===0&&(x=Pe()),m=od(m,x),m!==null&&(Ye(m,x),yu(m))}function cZ(m){var x=m.memoizedState,N=0;x!==null&&(N=x.retryLane),bM(m,N)}function dZ(m,x){var N=0;switch(m.tag){case 13:var D=m.stateNode,L=m.memoizedState;L!==null&&(N=L.retryLane);break;case 19:D=m.stateNode;break;case 22:D=m.stateNode._retryCache;break;default:throw Error(a(314))}D!==null&&D.delete(x),bM(m,N)}function uZ(m,x){return se(m,x)}var Aj=null,Bv=null,bk=!1,Tj=!1,yk=!1,Vp=0;function yu(m){m!==Bv&&m.next===null&&(Bv===null?Aj=Bv=m:Bv=Bv.next=m),Tj=!0,bk||(bk=!0,fZ())}function cb(m,x){if(!yk&&Tj){yk=!0;do for(var N=!1,D=Aj;D!==null;){if(m!==0){var L=D.pendingLanes;if(L===0)var G=0;else{var me=D.suspendedLanes,ke=D.pingedLanes;G=(1<<31-fe(42|m)+1)-1,G&=L&~(me&~ke),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(N=!0,wM(D,G))}else G=La,G=ze(D,D===Mn?G:0,D.cancelPendingCommit!==null||D.timeoutHandle!==-1),(G&3)===0||Fe(D,G)||(N=!0,wM(D,G));D=D.next}while(N);yk=!1}}function hZ(){yM()}function yM(){Tj=bk=!1;var m=0;Vp!==0&&(jZ()&&(m=Vp),Vp=0);for(var x=ge(),N=null,D=Aj;D!==null;){var L=D.next,G=jM(D,x);G===0?(D.next=null,N===null?Aj=L:N.next=L,L===null&&(Bv=N)):(N=D,(m!==0||(G&3)!==0)&&(Tj=!0)),D=L}cb(m)}function jM(m,x){for(var N=m.suspendedLanes,D=m.pingedLanes,L=m.expirationTimes,G=m.pendingLanes&-62914561;0<G;){var me=31-fe(G),ke=1<<me,et=L[me];et===-1?((ke&N)===0||(ke&D)!==0)&&(L[me]=Ve(ke,x)):et<=x&&(m.expiredLanes|=ke),G&=~ke}if(x=Mn,N=La,N=ze(m,m===x?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),D=m.callbackNode,N===0||m===x&&(xn===2||xn===9)||m.cancelPendingCommit!==null)return D!==null&&D!==null&&be(D),m.callbackNode=null,m.callbackPriority=0;if((N&3)===0||Fe(m,N)){if(x=N&-N,x===m.callbackPriority)return x;switch(D!==null&&be(D),it(N)){case 2:case 8:N=We;break;case 32:N=tt;break;case 268435456:N=Be;break;default:N=tt}return D=NM.bind(null,m),N=se(N,D),m.callbackPriority=x,m.callbackNode=N,x}return D!==null&&D!==null&&be(D),m.callbackPriority=2,m.callbackNode=null,2}function NM(m,x){if(Xi!==0&&Xi!==5)return m.callbackNode=null,m.callbackPriority=0,null;var N=m.callbackNode;if(Dj()&&m.callbackNode!==N)return null;var D=La;return D=ze(m,m===Mn?D:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),D===0?null:(nM(m,D,x),jM(m,ge()),m.callbackNode!=null&&m.callbackNode===N?NM.bind(null,m):null)}function wM(m,x){if(Dj())return null;nM(m,x,!0)}function fZ(){wZ(function(){(pn&6)!==0?se(Me,hZ):yM()})}function jk(){return Vp===0&&(Vp=pt()),Vp}function SM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:Dl(""+m)}function CM(m,x){var N=x.ownerDocument.createElement("input");return N.name=x.name,N.value=x.value,m.id&&N.setAttribute("form",m.id),x.parentNode.insertBefore(N,x),m=new FormData(m),N.parentNode.removeChild(N),m}function mZ(m,x,N,D,L){if(x==="submit"&&N&&N.stateNode===L){var G=SM((L[pr]||null).action),me=D.submitter;me&&(x=(x=me[pr]||null)?SM(x.formAction):me.getAttribute("formAction"),x!==null&&(G=x,me=null));var ke=new Yd("action","action",null,D,L);m.push({event:ke,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(Vp!==0){var et=me?CM(L,me):new FormData(L);Nc(N,{pending:!0,data:et,method:L.method,action:G},null,et)}}else typeof G=="function"&&(ke.preventDefault(),et=me?CM(L,me):new FormData(L),Nc(N,{pending:!0,data:et,method:L.method,action:G},G,et))},currentTarget:L}]})}}for(var Nk=0;Nk<yh.length;Nk++){var wk=yh[Nk],pZ=wk.toLowerCase(),xZ=wk[0].toUpperCase()+wk.slice(1);Jn(pZ,"on"+xZ)}Jn(qf,"onAnimationEnd"),Jn(au,"onAnimationIteration"),Jn(nu,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(su,"onTransitionRun"),Jn(bh,"onTransitionStart"),Jn(zf,"onTransitionCancel"),Jn(iu,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vZ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(db));function kM(m,x){x=(x&4)!==0;for(var N=0;N<m.length;N++){var D=m[N],L=D.event;D=D.listeners;e:{var G=void 0;if(x)for(var me=D.length-1;0<=me;me--){var ke=D[me],et=ke.instance,_t=ke.currentTarget;if(ke=ke.listener,et!==G&&L.isPropagationStopped())break e;G=ke,L.currentTarget=_t;try{G(L)}catch(Kt){gj(Kt)}L.currentTarget=null,G=et}else for(me=0;me<D.length;me++){if(ke=D[me],et=ke.instance,_t=ke.currentTarget,ke=ke.listener,et!==G&&L.isPropagationStopped())break e;G=ke,L.currentTarget=_t;try{G(L)}catch(Kt){gj(Kt)}L.currentTarget=null,G=et}}}}function Aa(m,x){var N=x[gt];N===void 0&&(N=x[gt]=new Set);var D=m+"__bubble";N.has(D)||(EM(x,m,2,!1),N.add(D))}function Sk(m,x,N){var D=0;x&&(D|=4),EM(N,m,D,x)}var Ij="_reactListening"+Math.random().toString(36).slice(2);function Ck(m){if(!m[Ij]){m[Ij]=!0,Nt.forEach(function(N){N!=="selectionchange"&&(vZ.has(N)||Sk(N,!1,m),Sk(N,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[Ij]||(x[Ij]=!0,Sk("selectionchange",!1,x))}}function EM(m,x,N,D){switch(QM(x)){case 2:var L=zZ;break;case 8:L=HZ;break;default:L=Bk}N=L.bind(null,x,N,m),L=void 0,!_i||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(L=!0),D?L!==void 0?m.addEventListener(x,N,{capture:!0,passive:L}):m.addEventListener(x,N,!0):L!==void 0?m.addEventListener(x,N,{passive:L}):m.addEventListener(x,N,!1)}function kk(m,x,N,D,L){var G=D;if((x&1)===0&&(x&2)===0&&D!==null)e:for(;;){if(D===null)return;var me=D.tag;if(me===3||me===4){var ke=D.stateNode.containerInfo;if(ke===L)break;if(me===4)for(me=D.return;me!==null;){var et=me.tag;if((et===3||et===4)&&me.stateNode.containerInfo===L)return;me=me.return}for(;ke!==null;){if(me=Ue(ke),me===null)return;if(et=me.tag,et===5||et===6||et===26||et===27){D=G=me;continue e}ke=ke.parentNode}}D=D.return}Ps(function(){var _t=G,Kt=bs(N),ar=[];e:{var Pt=id.get(m);if(Pt!==void 0){var Mt=Yd,na=m;switch(m){case"keypress":if(Gd(N)===0)break e;case"keydown":case"keyup":Mt=Lf;break;case"focusin":na="focus",Mt=hh;break;case"focusout":na="blur",Mt=hh;break;case"beforeblur":case"afterblur":Mt=hh;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=bp;break;case qf:case au:case nu:Mt=Og;break;case iu:Mt=je;break;case"scroll":case"scrollend":Mt=fv;break;case"wheel":Mt=nt;break;case"copy":case"cut":case"paste":Mt=Mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=Bf;break;case"toggle":case"beforetoggle":Mt=qt}var Kr=(x&4)!==0,kn=!Kr&&(m==="scroll"||m==="scrollend"),bt=Kr?Pt!==null?Pt+"Capture":null:Pt;Kr=[];for(var lt=_t,Ct;lt!==null;){var Zt=lt;if(Ct=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||Ct===null||bt===null||(Zt=Ma(lt,bt),Zt!=null&&Kr.push(ub(lt,Zt,Ct))),kn)break;lt=lt.return}0<Kr.length&&(Pt=new Mt(Pt,na,null,N,Kt),ar.push({event:Pt,listeners:Kr}))}}if((x&7)===0){e:{if(Pt=m==="mouseover"||m==="pointerover",Mt=m==="mouseout"||m==="pointerout",Pt&&N!==Wd&&(na=N.relatedTarget||N.fromElement)&&(Ue(na)||na[Nr]))break e;if((Mt||Pt)&&(Pt=Kt.window===Kt?Kt:(Pt=Kt.ownerDocument)?Pt.defaultView||Pt.parentWindow:window,Mt?(na=N.relatedTarget||N.toElement,Mt=_t,na=na?Ue(na):null,na!==null&&(kn=i(na),Kr=na.tag,na!==kn||Kr!==5&&Kr!==27&&Kr!==6)&&(na=null)):(Mt=null,na=_t),Mt!==na)){if(Kr=mc,Zt="onMouseLeave",bt="onMouseEnter",lt="mouse",(m==="pointerout"||m==="pointerover")&&(Kr=Bf,Zt="onPointerLeave",bt="onPointerEnter",lt="pointer"),kn=Mt==null?Pt:xt(Mt),Ct=na==null?Pt:xt(na),Pt=new Kr(Zt,lt+"leave",Mt,N,Kt),Pt.target=kn,Pt.relatedTarget=Ct,Zt=null,Ue(Kt)===_t&&(Kr=new Kr(bt,lt+"enter",na,N,Kt),Kr.target=Ct,Kr.relatedTarget=kn,Zt=Kr),kn=Zt,Mt&&na)t:{for(Kr=Mt,bt=na,lt=0,Ct=Kr;Ct;Ct=Uv(Ct))lt++;for(Ct=0,Zt=bt;Zt;Zt=Uv(Zt))Ct++;for(;0<lt-Ct;)Kr=Uv(Kr),lt--;for(;0<Ct-lt;)bt=Uv(bt),Ct--;for(;lt--;){if(Kr===bt||bt!==null&&Kr===bt.alternate)break t;Kr=Uv(Kr),bt=Uv(bt)}Kr=null}else Kr=null;Mt!==null&&_M(ar,Pt,Mt,Kr,!1),na!==null&&kn!==null&&_M(ar,kn,na,Kr,!0)}}e:{if(Pt=_t?xt(_t):window,Mt=Pt.nodeName&&Pt.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&Pt.type==="file")var Tr=$f;else if(Il(Pt))if(ph)Tr=pv;else{Tr=Fg;var Ca=uo}else Mt=Pt.nodeName,!Mt||Mt.toLowerCase()!=="input"||Pt.type!=="checkbox"&&Pt.type!=="radio"?_t&&ui(_t.elementType)&&(Tr=$f):Tr=jp;if(Tr&&(Tr=Tr(m,_t))){yp(ar,Tr,N,Kt);break e}Ca&&Ca(m,Pt,_t),m==="focusout"&&_t&&Pt.type==="number"&&_t.memoizedProps.value!=null&&El(Pt,"number",Pt.value)}switch(Ca=_t?xt(_t):window,m){case"focusin":(Il(Ca)||Ca.contentEditable==="true")&&(ho=Ca,Pl=_t,pc=null);break;case"focusout":pc=Pl=ho=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,Qn(ar,N,Kt);break;case"selectionchange":if(ru)break;case"keydown":case"keyup":Qn(ar,N,Kt)}var zr;if(Sr)e:{switch(m){case"compositionstart":var Xr="onCompositionStart";break e;case"compositionend":Xr="onCompositionEnd";break e;case"compositionupdate":Xr="onCompositionUpdate";break e}Xr=void 0}else os?$n(m,N)&&(Xr="onCompositionEnd"):m==="keydown"&&N.keyCode===229&&(Xr="onCompositionStart");Xr&&(ia&&N.locale!=="ko"&&(os||Xr!=="onCompositionStart"?Xr==="onCompositionEnd"&&os&&(zr=hv()):(al=Kt,pp="value"in al?al.value:al.textContent,os=!0)),Ca=Pj(_t,Xr),0<Ca.length&&(Xr=new Mf(Xr,m,null,N,Kt),ar.push({event:Xr,listeners:Ca}),zr?Xr.data=zr:(zr=is(N),zr!==null&&(Xr.data=zr)))),(zr=ca?Js(m,N):Tl(m,N))&&(Xr=Pj(_t,"onBeforeInput"),0<Xr.length&&(Ca=new Mf("onBeforeInput","beforeinput",null,N,Kt),ar.push({event:Ca,listeners:Xr}),Ca.data=zr)),mZ(ar,m,_t,N,Kt)}kM(ar,x)})}function ub(m,x,N){return{instance:m,listener:x,currentTarget:N}}function Pj(m,x){for(var N=x+"Capture",D=[];m!==null;){var L=m,G=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||G===null||(L=Ma(m,N),L!=null&&D.unshift(ub(m,L,G)),L=Ma(m,x),L!=null&&D.push(ub(m,L,G))),m.tag===3)return D;m=m.return}return[]}function Uv(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function _M(m,x,N,D,L){for(var G=x._reactName,me=[];N!==null&&N!==D;){var ke=N,et=ke.alternate,_t=ke.stateNode;if(ke=ke.tag,et!==null&&et===D)break;ke!==5&&ke!==26&&ke!==27||_t===null||(et=_t,L?(_t=Ma(N,G),_t!=null&&me.unshift(ub(N,_t,et))):L||(_t=Ma(N,G),_t!=null&&me.push(ub(N,_t,et)))),N=N.return}me.length!==0&&m.push({event:x,listeners:me})}var gZ=/\r\n?/g,bZ=/\u0000|\uFFFD/g;function DM(m){return(typeof m=="string"?m:""+m).replace(gZ,`
`).replace(bZ,"")}function AM(m,x){return x=DM(x),DM(m)===x}function Oj(){}function Cn(m,x,N,D,L,G){switch(N){case"children":typeof D=="string"?x==="body"||x==="textarea"&&D===""||jr(m,D):(typeof D=="number"||typeof D=="bigint")&&x!=="body"&&jr(m,""+D);break;case"className":Lr(m,"class",D);break;case"tabIndex":Lr(m,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Lr(m,N,D);break;case"style":Ei(m,D,G);break;case"data":if(x!=="object"){Lr(m,"data",D);break}case"src":case"href":if(D===""&&(x!=="a"||N!=="href")){m.removeAttribute(N);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){m.removeAttribute(N);break}D=Dl(""+D),m.setAttribute(N,D);break;case"action":case"formAction":if(typeof D=="function"){m.setAttribute(N,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(N==="formAction"?(x!=="input"&&Cn(m,x,"name",L.name,L,null),Cn(m,x,"formEncType",L.formEncType,L,null),Cn(m,x,"formMethod",L.formMethod,L,null),Cn(m,x,"formTarget",L.formTarget,L,null)):(Cn(m,x,"encType",L.encType,L,null),Cn(m,x,"method",L.method,L,null),Cn(m,x,"target",L.target,L,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){m.removeAttribute(N);break}D=Dl(""+D),m.setAttribute(N,D);break;case"onClick":D!=null&&(m.onclick=Oj);break;case"onScroll":D!=null&&Aa("scroll",m);break;case"onScrollEnd":D!=null&&Aa("scrollend",m);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(a(61));if(N=D.__html,N!=null){if(L.children!=null)throw Error(a(60));m.innerHTML=N}}break;case"multiple":m.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":m.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){m.removeAttribute("xlink:href");break}N=Dl(""+D),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",N);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?m.setAttribute(N,""+D):m.removeAttribute(N);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?m.setAttribute(N,""):m.removeAttribute(N);break;case"capture":case"download":D===!0?m.setAttribute(N,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?m.setAttribute(N,D):m.removeAttribute(N);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?m.setAttribute(N,D):m.removeAttribute(N);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?m.removeAttribute(N):m.setAttribute(N,D);break;case"popover":Aa("beforetoggle",m),Aa("toggle",m),fr(m,"popover",D);break;case"xlinkActuate":fa(m,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":fa(m,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":fa(m,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":fa(m,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":fa(m,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":fa(m,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":fa(m,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":fa(m,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":fa(m,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":fr(m,"is",D);break;case"innerText":case"textContent":break;default:(!(2<N.length)||N[0]!=="o"&&N[0]!=="O"||N[1]!=="n"&&N[1]!=="N")&&(N=_l.get(N)||N,fr(m,N,D))}}function Ek(m,x,N,D,L,G){switch(N){case"style":Ei(m,D,G);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(a(61));if(N=D.__html,N!=null){if(L.children!=null)throw Error(a(60));m.innerHTML=N}}break;case"children":typeof D=="string"?jr(m,D):(typeof D=="number"||typeof D=="bigint")&&jr(m,""+D);break;case"onScroll":D!=null&&Aa("scroll",m);break;case"onScrollEnd":D!=null&&Aa("scrollend",m);break;case"onClick":D!=null&&(m.onclick=Oj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wt.hasOwnProperty(N))e:{if(N[0]==="o"&&N[1]==="n"&&(L=N.endsWith("Capture"),x=N.slice(2,L?N.length-7:void 0),G=m[pr]||null,G=G!=null?G[N]:null,typeof G=="function"&&m.removeEventListener(x,G,L),typeof D=="function")){typeof G!="function"&&G!==null&&(N in m?m[N]=null:m.hasAttribute(N)&&m.removeAttribute(N)),m.addEventListener(x,D,L);break e}N in m?m[N]=D:D===!0?m.setAttribute(N,""):fr(m,N,D)}}}function Qi(m,x,N){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Aa("error",m),Aa("load",m);var D=!1,L=!1,G;for(G in N)if(N.hasOwnProperty(G)){var me=N[G];if(me!=null)switch(G){case"src":D=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,x));default:Cn(m,x,G,me,N,null)}}L&&Cn(m,x,"srcSet",N.srcSet,N,null),D&&Cn(m,x,"src",N.src,N,null);return;case"input":Aa("invalid",m);var ke=G=me=L=null,et=null,_t=null;for(D in N)if(N.hasOwnProperty(D)){var Kt=N[D];if(Kt!=null)switch(D){case"name":L=Kt;break;case"type":me=Kt;break;case"checked":et=Kt;break;case"defaultChecked":_t=Kt;break;case"value":G=Kt;break;case"defaultValue":ke=Kt;break;case"children":case"dangerouslySetInnerHTML":if(Kt!=null)throw Error(a(137,x));break;default:Cn(m,x,D,Kt,N,null)}}td(m,G,ke,et,_t,me,L,!1),Xn(m);return;case"select":Aa("invalid",m),D=me=G=null;for(L in N)if(N.hasOwnProperty(L)&&(ke=N[L],ke!=null))switch(L){case"value":G=ke;break;case"defaultValue":me=ke;break;case"multiple":D=ke;default:Cn(m,x,L,ke,N,null)}x=G,N=me,m.multiple=!!D,x!=null?ut(m,!!D,x,!1):N!=null&&ut(m,!!D,N,!0);return;case"textarea":Aa("invalid",m),G=L=D=null;for(me in N)if(N.hasOwnProperty(me)&&(ke=N[me],ke!=null))switch(me){case"value":D=ke;break;case"defaultValue":L=ke;break;case"children":G=ke;break;case"dangerouslySetInnerHTML":if(ke!=null)throw Error(a(91));break;default:Cn(m,x,me,ke,N,null)}Ot(m,D,L,G),Xn(m);return;case"option":for(et in N)if(N.hasOwnProperty(et)&&(D=N[et],D!=null))switch(et){case"selected":m.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Cn(m,x,et,D,N,null)}return;case"dialog":Aa("beforetoggle",m),Aa("toggle",m),Aa("cancel",m),Aa("close",m);break;case"iframe":case"object":Aa("load",m);break;case"video":case"audio":for(D=0;D<db.length;D++)Aa(db[D],m);break;case"image":Aa("error",m),Aa("load",m);break;case"details":Aa("toggle",m);break;case"embed":case"source":case"link":Aa("error",m),Aa("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_t in N)if(N.hasOwnProperty(_t)&&(D=N[_t],D!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,x));default:Cn(m,x,_t,D,N,null)}return;default:if(ui(x)){for(Kt in N)N.hasOwnProperty(Kt)&&(D=N[Kt],D!==void 0&&Ek(m,x,Kt,D,N,void 0));return}}for(ke in N)N.hasOwnProperty(ke)&&(D=N[ke],D!=null&&Cn(m,x,ke,D,N,null))}function yZ(m,x,N,D){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,G=null,me=null,ke=null,et=null,_t=null,Kt=null;for(Mt in N){var ar=N[Mt];if(N.hasOwnProperty(Mt)&&ar!=null)switch(Mt){case"checked":break;case"value":break;case"defaultValue":et=ar;default:D.hasOwnProperty(Mt)||Cn(m,x,Mt,null,D,ar)}}for(var Pt in D){var Mt=D[Pt];if(ar=N[Pt],D.hasOwnProperty(Pt)&&(Mt!=null||ar!=null))switch(Pt){case"type":G=Mt;break;case"name":L=Mt;break;case"checked":_t=Mt;break;case"defaultChecked":Kt=Mt;break;case"value":me=Mt;break;case"defaultValue":ke=Mt;break;case"children":case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(a(137,x));break;default:Mt!==ar&&Cn(m,x,Pt,Mt,D,ar)}}Vo(m,me,ke,et,_t,Kt,G,L);return;case"select":Mt=me=ke=Pt=null;for(G in N)if(et=N[G],N.hasOwnProperty(G)&&et!=null)switch(G){case"value":break;case"multiple":Mt=et;default:D.hasOwnProperty(G)||Cn(m,x,G,null,D,et)}for(L in D)if(G=D[L],et=N[L],D.hasOwnProperty(L)&&(G!=null||et!=null))switch(L){case"value":Pt=G;break;case"defaultValue":ke=G;break;case"multiple":me=G;default:G!==et&&Cn(m,x,L,G,D,et)}x=ke,N=me,D=Mt,Pt!=null?ut(m,!!N,Pt,!1):!!D!=!!N&&(x!=null?ut(m,!!N,x,!0):ut(m,!!N,N?[]:"",!1));return;case"textarea":Mt=Pt=null;for(ke in N)if(L=N[ke],N.hasOwnProperty(ke)&&L!=null&&!D.hasOwnProperty(ke))switch(ke){case"value":break;case"children":break;default:Cn(m,x,ke,null,D,L)}for(me in D)if(L=D[me],G=N[me],D.hasOwnProperty(me)&&(L!=null||G!=null))switch(me){case"value":Pt=L;break;case"defaultValue":Mt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(91));break;default:L!==G&&Cn(m,x,me,L,D,G)}nr(m,Pt,Mt);return;case"option":for(var na in N)if(Pt=N[na],N.hasOwnProperty(na)&&Pt!=null&&!D.hasOwnProperty(na))switch(na){case"selected":m.selected=!1;break;default:Cn(m,x,na,null,D,Pt)}for(et in D)if(Pt=D[et],Mt=N[et],D.hasOwnProperty(et)&&Pt!==Mt&&(Pt!=null||Mt!=null))switch(et){case"selected":m.selected=Pt&&typeof Pt!="function"&&typeof Pt!="symbol";break;default:Cn(m,x,et,Pt,D,Mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kr in N)Pt=N[Kr],N.hasOwnProperty(Kr)&&Pt!=null&&!D.hasOwnProperty(Kr)&&Cn(m,x,Kr,null,D,Pt);for(_t in D)if(Pt=D[_t],Mt=N[_t],D.hasOwnProperty(_t)&&Pt!==Mt&&(Pt!=null||Mt!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(a(137,x));break;default:Cn(m,x,_t,Pt,D,Mt)}return;default:if(ui(x)){for(var kn in N)Pt=N[kn],N.hasOwnProperty(kn)&&Pt!==void 0&&!D.hasOwnProperty(kn)&&Ek(m,x,kn,void 0,D,Pt);for(Kt in D)Pt=D[Kt],Mt=N[Kt],!D.hasOwnProperty(Kt)||Pt===Mt||Pt===void 0&&Mt===void 0||Ek(m,x,Kt,Pt,D,Mt);return}}for(var bt in N)Pt=N[bt],N.hasOwnProperty(bt)&&Pt!=null&&!D.hasOwnProperty(bt)&&Cn(m,x,bt,null,D,Pt);for(ar in D)Pt=D[ar],Mt=N[ar],!D.hasOwnProperty(ar)||Pt===Mt||Pt==null&&Mt==null||Cn(m,x,ar,Pt,D,Mt)}var _k=null,Dk=null;function Mj(m){return m.nodeType===9?m:m.ownerDocument}function TM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IM(m,x){if(m===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&x==="foreignObject"?0:m}function Ak(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Tk=null;function jZ(){var m=window.event;return m&&m.type==="popstate"?m===Tk?!1:(Tk=m,!0):(Tk=null,!1)}var PM=typeof setTimeout=="function"?setTimeout:void 0,NZ=typeof clearTimeout=="function"?clearTimeout:void 0,OM=typeof Promise=="function"?Promise:void 0,wZ=typeof queueMicrotask=="function"?queueMicrotask:typeof OM<"u"?function(m){return OM.resolve(null).then(m).catch(SZ)}:PM;function SZ(m){setTimeout(function(){throw m})}function dm(m){return m==="head"}function MM(m,x){var N=x,D=0,L=0;do{var G=N.nextSibling;if(m.removeChild(N),G&&G.nodeType===8)if(N=G.data,N==="/$"){if(0<D&&8>D){N=D;var me=m.ownerDocument;if(N&1&&hb(me.documentElement),N&2&&hb(me.body),N&4)for(N=me.head,hb(N),me=N.firstChild;me;){var ke=me.nextSibling,et=me.nodeName;me[Ae]||et==="SCRIPT"||et==="STYLE"||et==="LINK"&&me.rel.toLowerCase()==="stylesheet"||N.removeChild(me),me=ke}}if(L===0){m.removeChild(G),yb(x);return}L--}else N==="$"||N==="$?"||N==="$!"?L++:D=N.charCodeAt(0)-48;else D=0;N=G}while(N);yb(x)}function Ik(m){var x=m.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var N=x;switch(x=x.nextSibling,N.nodeName){case"HTML":case"HEAD":case"BODY":Ik(N),_e(N);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(N.rel.toLowerCase()==="stylesheet")continue}m.removeChild(N)}}function CZ(m,x,N,D){for(;m.nodeType===1;){var L=N;if(m.nodeName.toLowerCase()!==x.toLowerCase()){if(!D&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(D){if(!m[Ae])switch(x){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(G=m.getAttribute("rel"),G==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(G!==L.rel||m.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||m.getAttribute("title")!==(L.title==null?null:L.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(G=m.getAttribute("src"),(G!==(L.src==null?null:L.src)||m.getAttribute("type")!==(L.type==null?null:L.type)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&G&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(x==="input"&&m.type==="hidden"){var G=L.name==null?null:""+L.name;if(L.type==="hidden"&&m.getAttribute("name")===G)return m}else return m;if(m=yd(m.nextSibling),m===null)break}return null}function kZ(m,x,N){if(x==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!N||(m=yd(m.nextSibling),m===null))return null;return m}function Pk(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState==="complete"}function EZ(m,x){var N=m.ownerDocument;if(m.data!=="$?"||N.readyState==="complete")x();else{var D=function(){x(),N.removeEventListener("DOMContentLoaded",D)};N.addEventListener("DOMContentLoaded",D),m._reactRetry=D}}function yd(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?"||x==="F!"||x==="F")break;if(x==="/$")return null}}return m}var Ok=null;function RM(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var N=m.data;if(N==="$"||N==="$!"||N==="$?"){if(x===0)return m;x--}else N==="/$"&&x++}m=m.previousSibling}return null}function FM(m,x,N){switch(x=Mj(N),m){case"html":if(m=x.documentElement,!m)throw Error(a(452));return m;case"head":if(m=x.head,!m)throw Error(a(453));return m;case"body":if(m=x.body,!m)throw Error(a(454));return m;default:throw Error(a(451))}}function hb(m){for(var x=m.attributes;x.length;)m.removeAttributeNode(x[0]);_e(m)}var Cc=new Map,LM=new Set;function Rj(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Fh=Q.d;Q.d={f:_Z,r:DZ,D:AZ,C:TZ,L:IZ,m:PZ,X:MZ,S:OZ,M:RZ};function _Z(){var m=Fh.f(),x=Ej();return m||x}function DZ(m){var x=He(m);x!==null&&x.tag===5&&x.type==="form"?Fp(x):Fh.r(m)}var $v=typeof document>"u"?null:document;function BM(m,x,N){var D=$v;if(D&&typeof x=="string"&&x){var L=rn(x);L='link[rel="'+m+'"][href="'+L+'"]',typeof N=="string"&&(L+='[crossorigin="'+N+'"]'),LM.has(L)||(LM.add(L),m={rel:m,crossOrigin:N,href:x},D.querySelector(L)===null&&(x=D.createElement("link"),Qi(x,"link",m),ct(x),D.head.appendChild(x)))}}function AZ(m){Fh.D(m),BM("dns-prefetch",m,null)}function TZ(m,x){Fh.C(m,x),BM("preconnect",m,x)}function IZ(m,x,N){Fh.L(m,x,N);var D=$v;if(D&&m&&x){var L='link[rel="preload"][as="'+rn(x)+'"]';x==="image"&&N&&N.imageSrcSet?(L+='[imagesrcset="'+rn(N.imageSrcSet)+'"]',typeof N.imageSizes=="string"&&(L+='[imagesizes="'+rn(N.imageSizes)+'"]')):L+='[href="'+rn(m)+'"]';var G=L;switch(x){case"style":G=Vv(m);break;case"script":G=qv(m)}Cc.has(G)||(m=u({rel:"preload",href:x==="image"&&N&&N.imageSrcSet?void 0:m,as:x},N),Cc.set(G,m),D.querySelector(L)!==null||x==="style"&&D.querySelector(fb(G))||x==="script"&&D.querySelector(mb(G))||(x=D.createElement("link"),Qi(x,"link",m),ct(x),D.head.appendChild(x)))}}function PZ(m,x){Fh.m(m,x);var N=$v;if(N&&m){var D=x&&typeof x.as=="string"?x.as:"script",L='link[rel="modulepreload"][as="'+rn(D)+'"][href="'+rn(m)+'"]',G=L;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=qv(m)}if(!Cc.has(G)&&(m=u({rel:"modulepreload",href:m},x),Cc.set(G,m),N.querySelector(L)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(N.querySelector(mb(G)))return}D=N.createElement("link"),Qi(D,"link",m),ct(D),N.head.appendChild(D)}}}function OZ(m,x,N){Fh.S(m,x,N);var D=$v;if(D&&m){var L=jt(D).hoistableStyles,G=Vv(m);x=x||"default";var me=L.get(G);if(!me){var ke={loading:0,preload:null};if(me=D.querySelector(fb(G)))ke.loading=5;else{m=u({rel:"stylesheet",href:m,"data-precedence":x},N),(N=Cc.get(G))&&Mk(m,N);var et=me=D.createElement("link");ct(et),Qi(et,"link",m),et._p=new Promise(function(_t,Kt){et.onload=_t,et.onerror=Kt}),et.addEventListener("load",function(){ke.loading|=1}),et.addEventListener("error",function(){ke.loading|=2}),ke.loading|=4,Fj(me,x,D)}me={type:"stylesheet",instance:me,count:1,state:ke},L.set(G,me)}}}function MZ(m,x){Fh.X(m,x);var N=$v;if(N&&m){var D=jt(N).hoistableScripts,L=qv(m),G=D.get(L);G||(G=N.querySelector(mb(L)),G||(m=u({src:m,async:!0},x),(x=Cc.get(L))&&Rk(m,x),G=N.createElement("script"),ct(G),Qi(G,"link",m),N.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},D.set(L,G))}}function RZ(m,x){Fh.M(m,x);var N=$v;if(N&&m){var D=jt(N).hoistableScripts,L=qv(m),G=D.get(L);G||(G=N.querySelector(mb(L)),G||(m=u({src:m,async:!0,type:"module"},x),(x=Cc.get(L))&&Rk(m,x),G=N.createElement("script"),ct(G),Qi(G,"link",m),N.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},D.set(L,G))}}function UM(m,x,N,D){var L=(L=W.current)?Rj(L):null;if(!L)throw Error(a(446));switch(m){case"meta":case"title":return null;case"style":return typeof N.precedence=="string"&&typeof N.href=="string"?(x=Vv(N.href),N=jt(L).hoistableStyles,D=N.get(x),D||(D={type:"style",instance:null,count:0,state:null},N.set(x,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(N.rel==="stylesheet"&&typeof N.href=="string"&&typeof N.precedence=="string"){m=Vv(N.href);var G=jt(L).hoistableStyles,me=G.get(m);if(me||(L=L.ownerDocument||L,me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(m,me),(G=L.querySelector(fb(m)))&&!G._p&&(me.instance=G,me.state.loading=5),Cc.has(m)||(N={rel:"preload",as:"style",href:N.href,crossOrigin:N.crossOrigin,integrity:N.integrity,media:N.media,hrefLang:N.hrefLang,referrerPolicy:N.referrerPolicy},Cc.set(m,N),G||FZ(L,m,N,me.state))),x&&D===null)throw Error(a(528,""));return me}if(x&&D!==null)throw Error(a(529,""));return null;case"script":return x=N.async,N=N.src,typeof N=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=qv(N),N=jt(L).hoistableScripts,D=N.get(x),D||(D={type:"script",instance:null,count:0,state:null},N.set(x,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,m))}}function Vv(m){return'href="'+rn(m)+'"'}function fb(m){return'link[rel="stylesheet"]['+m+"]"}function $M(m){return u({},m,{"data-precedence":m.precedence,precedence:null})}function FZ(m,x,N,D){m.querySelector('link[rel="preload"][as="style"]['+x+"]")?D.loading=1:(x=m.createElement("link"),D.preload=x,x.addEventListener("load",function(){return D.loading|=1}),x.addEventListener("error",function(){return D.loading|=2}),Qi(x,"link",N),ct(x),m.head.appendChild(x))}function qv(m){return'[src="'+rn(m)+'"]'}function mb(m){return"script[async]"+m}function VM(m,x,N){if(x.count++,x.instance===null)switch(x.type){case"style":var D=m.querySelector('style[data-href~="'+rn(N.href)+'"]');if(D)return x.instance=D,ct(D),D;var L=u({},N,{"data-href":N.href,"data-precedence":N.precedence,href:null,precedence:null});return D=(m.ownerDocument||m).createElement("style"),ct(D),Qi(D,"style",L),Fj(D,N.precedence,m),x.instance=D;case"stylesheet":L=Vv(N.href);var G=m.querySelector(fb(L));if(G)return x.state.loading|=4,x.instance=G,ct(G),G;D=$M(N),(L=Cc.get(L))&&Mk(D,L),G=(m.ownerDocument||m).createElement("link"),ct(G);var me=G;return me._p=new Promise(function(ke,et){me.onload=ke,me.onerror=et}),Qi(G,"link",D),x.state.loading|=4,Fj(G,N.precedence,m),x.instance=G;case"script":return G=qv(N.src),(L=m.querySelector(mb(G)))?(x.instance=L,ct(L),L):(D=N,(L=Cc.get(G))&&(D=u({},N),Rk(D,L)),m=m.ownerDocument||m,L=m.createElement("script"),ct(L),Qi(L,"link",D),m.head.appendChild(L),x.instance=L);case"void":return null;default:throw Error(a(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(D=x.instance,x.state.loading|=4,Fj(D,N.precedence,m));return x.instance}function Fj(m,x,N){for(var D=N.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=D.length?D[D.length-1]:null,G=L,me=0;me<D.length;me++){var ke=D[me];if(ke.dataset.precedence===x)G=ke;else if(G!==L)break}G?G.parentNode.insertBefore(m,G.nextSibling):(x=N.nodeType===9?N.head:N,x.insertBefore(m,x.firstChild))}function Mk(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.title==null&&(m.title=x.title)}function Rk(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.integrity==null&&(m.integrity=x.integrity)}var Lj=null;function qM(m,x,N){if(Lj===null){var D=new Map,L=Lj=new Map;L.set(N,D)}else L=Lj,D=L.get(N),D||(D=new Map,L.set(N,D));if(D.has(m))return D;for(D.set(m,null),N=N.getElementsByTagName(m),L=0;L<N.length;L++){var G=N[L];if(!(G[Ae]||G[sr]||m==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var me=G.getAttribute(x)||"";me=m+me;var ke=D.get(me);ke?ke.push(G):D.set(me,[G])}}return D}function zM(m,x,N){m=m.ownerDocument||m,m.head.insertBefore(N,x==="title"?m.querySelector("head > title"):null)}function LZ(m,x,N){if(N===1||x.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return m=x.disabled,typeof x.precedence=="string"&&m==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function HM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}var pb=null;function BZ(){}function UZ(m,x,N){if(pb===null)throw Error(a(475));var D=pb;if(x.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var L=Vv(N.href),G=m.querySelector(fb(L));if(G){m=G._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(D.count++,D=Bj.bind(D),m.then(D,D)),x.state.loading|=4,x.instance=G,ct(G);return}G=m.ownerDocument||m,N=$M(N),(L=Cc.get(L))&&Mk(N,L),G=G.createElement("link"),ct(G);var me=G;me._p=new Promise(function(ke,et){me.onload=ke,me.onerror=et}),Qi(G,"link",N),x.instance=G}D.stylesheets===null&&(D.stylesheets=new Map),D.stylesheets.set(x,m),(m=x.state.preload)&&(x.state.loading&3)===0&&(D.count++,x=Bj.bind(D),m.addEventListener("load",x),m.addEventListener("error",x))}}function $Z(){if(pb===null)throw Error(a(475));var m=pb;return m.stylesheets&&m.count===0&&Fk(m,m.stylesheets),0<m.count?function(x){var N=setTimeout(function(){if(m.stylesheets&&Fk(m,m.stylesheets),m.unsuspend){var D=m.unsuspend;m.unsuspend=null,D()}},6e4);return m.unsuspend=x,function(){m.unsuspend=null,clearTimeout(N)}}:null}function Bj(){if(this.count--,this.count===0){if(this.stylesheets)Fk(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var Uj=null;function Fk(m,x){m.stylesheets=null,m.unsuspend!==null&&(m.count++,Uj=new Map,x.forEach(VZ,m),Uj=null,Bj.call(m))}function VZ(m,x){if(!(x.state.loading&4)){var N=Uj.get(m);if(N)var D=N.get(null);else{N=new Map,Uj.set(m,N);for(var L=m.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<L.length;G++){var me=L[G];(me.nodeName==="LINK"||me.getAttribute("media")!=="not all")&&(N.set(me.dataset.precedence,me),D=me)}D&&N.set(null,D)}L=x.instance,me=L.getAttribute("data-precedence"),G=N.get(me)||D,G===D&&N.set(null,L),N.set(me,L),this.count++,D=Bj.bind(this),L.addEventListener("load",D),L.addEventListener("error",D),G?G.parentNode.insertBefore(L,G.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(L,m.firstChild)),x.state.loading|=4}}var xb={$$typeof:w,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function qZ(m,x,N,D,L,G,me,ke){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=D,this.onUncaughtError=L,this.onCaughtError=G,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function WM(m,x,N,D,L,G,me,ke,et,_t,Kt,ar){return m=new qZ(m,x,N,me,ke,et,_t,ar),x=1,G===!0&&(x|=24),G=Ai(3,null,null,x),m.current=G,G.stateNode=m,x=Bg(),x.refCount++,m.pooledCache=x,x.refCount++,G.memoizedState={element:D,isDehydrated:N,cache:x},ot(G),m}function GM(m){return m?(m=ei,m):ei}function YM(m,x,N,D,L,G){L=GM(L),D.context===null?D.context=L:D.pendingContext=L,D=Yt(x),D.payload={element:N},G=G===void 0?null:G,G!==null&&(D.callback=G),N=rr(m,D,x),N!==null&&(Vl(N,m,x),Qt(N,m,x))}function KM(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var N=m.retryLane;m.retryLane=N!==0&&N<x?N:x}}function Lk(m,x){KM(m,x),(m=m.alternate)&&KM(m,x)}function XM(m){if(m.tag===13){var x=od(m,67108864);x!==null&&Vl(x,m,67108864),Lk(m,67108864)}}var $j=!0;function zZ(m,x,N,D){var L=B.T;B.T=null;var G=Q.p;try{Q.p=2,Bk(m,x,N,D)}finally{Q.p=G,B.T=L}}function HZ(m,x,N,D){var L=B.T;B.T=null;var G=Q.p;try{Q.p=8,Bk(m,x,N,D)}finally{Q.p=G,B.T=L}}function Bk(m,x,N,D){if($j){var L=Uk(D);if(L===null)kk(m,x,D,Vj,N),JM(m,D);else if(GZ(L,m,x,N,D))D.stopPropagation();else if(JM(m,D),x&4&&-1<WZ.indexOf(m)){for(;L!==null;){var G=He(L);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var me=Je(G.pendingLanes);if(me!==0){var ke=G;for(ke.pendingLanes|=2,ke.entangledLanes|=2;me;){var et=1<<31-fe(me);ke.entanglements[1]|=et,me&=~et}yu(G),(pn&6)===0&&(Cj=ge()+500,cb(0))}}break;case 13:ke=od(G,2),ke!==null&&Vl(ke,G,2),Ej(),Lk(G,2)}if(G=Uk(D),G===null&&kk(m,x,D,Vj,N),G===L)break;L=G}L!==null&&D.stopPropagation()}else kk(m,x,D,null,N)}}function Uk(m){return m=bs(m),$k(m)}var Vj=null;function $k(m){if(Vj=null,m=Ue(m),m!==null){var x=i(m);if(x===null)m=null;else{var N=x.tag;if(N===13){if(m=o(x),m!==null)return m;m=null}else if(N===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null)}}return Vj=m,null}function QM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Me:return 2;case We:return 8;case tt:case mt:return 32;case Be:return 268435456;default:return 32}default:return 32}}var Vk=!1,um=null,hm=null,fm=null,vb=new Map,gb=new Map,mm=[],WZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JM(m,x){switch(m){case"focusin":case"focusout":um=null;break;case"dragenter":case"dragleave":hm=null;break;case"mouseover":case"mouseout":fm=null;break;case"pointerover":case"pointerout":vb.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":gb.delete(x.pointerId)}}function bb(m,x,N,D,L,G){return m===null||m.nativeEvent!==G?(m={blockedOn:x,domEventName:N,eventSystemFlags:D,nativeEvent:G,targetContainers:[L]},x!==null&&(x=He(x),x!==null&&XM(x)),m):(m.eventSystemFlags|=D,x=m.targetContainers,L!==null&&x.indexOf(L)===-1&&x.push(L),m)}function GZ(m,x,N,D,L){switch(x){case"focusin":return um=bb(um,m,x,N,D,L),!0;case"dragenter":return hm=bb(hm,m,x,N,D,L),!0;case"mouseover":return fm=bb(fm,m,x,N,D,L),!0;case"pointerover":var G=L.pointerId;return vb.set(G,bb(vb.get(G)||null,m,x,N,D,L)),!0;case"gotpointercapture":return G=L.pointerId,gb.set(G,bb(gb.get(G)||null,m,x,N,D,L)),!0}return!1}function ZM(m){var x=Ue(m.target);if(x!==null){var N=i(x);if(N!==null){if(x=N.tag,x===13){if(x=o(N),x!==null){m.blockedOn=x,lr(m.priority,function(){if(N.tag===13){var D=$l();D=Ee(D);var L=od(N,D);L!==null&&Vl(L,N,D),Lk(N,D)}});return}}else if(x===3&&N.stateNode.current.memoizedState.isDehydrated){m.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}m.blockedOn=null}function qj(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var N=Uk(m.nativeEvent);if(N===null){N=m.nativeEvent;var D=new N.constructor(N.type,N);Wd=D,N.target.dispatchEvent(D),Wd=null}else return x=He(N),x!==null&&XM(x),m.blockedOn=N,!1;x.shift()}return!0}function eR(m,x,N){qj(m)&&N.delete(x)}function YZ(){Vk=!1,um!==null&&qj(um)&&(um=null),hm!==null&&qj(hm)&&(hm=null),fm!==null&&qj(fm)&&(fm=null),vb.forEach(eR),gb.forEach(eR)}function zj(m,x){m.blockedOn===x&&(m.blockedOn=null,Vk||(Vk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YZ)))}var Hj=null;function tR(m){Hj!==m&&(Hj=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hj===m&&(Hj=null);for(var x=0;x<m.length;x+=3){var N=m[x],D=m[x+1],L=m[x+2];if(typeof D!="function"){if($k(D||N)===null)continue;break}var G=He(N);G!==null&&(m.splice(x,3),x-=3,Nc(G,{pending:!0,data:L,method:N.method,action:D},D,L))}}))}function yb(m){function x(et){return zj(et,m)}um!==null&&zj(um,m),hm!==null&&zj(hm,m),fm!==null&&zj(fm,m),vb.forEach(x),gb.forEach(x);for(var N=0;N<mm.length;N++){var D=mm[N];D.blockedOn===m&&(D.blockedOn=null)}for(;0<mm.length&&(N=mm[0],N.blockedOn===null);)ZM(N),N.blockedOn===null&&mm.shift();if(N=(m.ownerDocument||m).$$reactFormReplay,N!=null)for(D=0;D<N.length;D+=3){var L=N[D],G=N[D+1],me=L[pr]||null;if(typeof G=="function")me||tR(N);else if(me){var ke=null;if(G&&G.hasAttribute("formAction")){if(L=G,me=G[pr]||null)ke=me.formAction;else if($k(L)!==null)continue}else ke=me.action;typeof ke=="function"?N[D+1]=ke:(N.splice(D,3),D-=3),tR(N)}}}function qk(m){this._internalRoot=m}Wj.prototype.render=qk.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(a(409));var N=x.current,D=$l();YM(N,D,m,x,null,null)},Wj.prototype.unmount=qk.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;YM(m.current,2,null,m,null,null),Ej(),x[Nr]=null}};function Wj(m){this._internalRoot=m}Wj.prototype.unstable_scheduleHydration=function(m){if(m){var x=Tt();m={blockedOn:null,target:m,priority:x};for(var N=0;N<mm.length&&x!==0&&x<mm[N].priority;N++);mm.splice(N,0,m),N===0&&ZM(m)}};var rR=t.version;if(rR!=="19.1.0")throw Error(a(527,rR,"19.1.0"));Q.findDOMNode=function(m){var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(a(188)):(m=Object.keys(m).join(","),Error(a(268,m)));return m=c(x),m=m!==null?d(m):null,m=m===null?null:m.stateNode,m};var KZ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gj.isDisabled&&Gj.supportsFiber)try{It=Gj.inject(KZ),zt=Gj}catch{}}return Nb.createRoot=function(m,x){if(!s(m))throw Error(a(299));var N=!1,D="",L=gO,G=bO,me=yO,ke=null;return x!=null&&(x.unstable_strictMode===!0&&(N=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onUncaughtError!==void 0&&(L=x.onUncaughtError),x.onCaughtError!==void 0&&(G=x.onCaughtError),x.onRecoverableError!==void 0&&(me=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(ke=x.unstable_transitionCallbacks)),x=WM(m,1,!1,null,null,N,D,L,G,me,ke,null),m[Nr]=x.current,Ck(m),new qk(x)},Nb.hydrateRoot=function(m,x,N){if(!s(m))throw Error(a(299));var D=!1,L="",G=gO,me=bO,ke=yO,et=null,_t=null;return N!=null&&(N.unstable_strictMode===!0&&(D=!0),N.identifierPrefix!==void 0&&(L=N.identifierPrefix),N.onUncaughtError!==void 0&&(G=N.onUncaughtError),N.onCaughtError!==void 0&&(me=N.onCaughtError),N.onRecoverableError!==void 0&&(ke=N.onRecoverableError),N.unstable_transitionCallbacks!==void 0&&(et=N.unstable_transitionCallbacks),N.formState!==void 0&&(_t=N.formState)),x=WM(m,1,!0,x,N??null,D,L,G,me,ke,et,_t),x.context=GM(null),N=x.current,D=$l(),D=Ee(D),L=Yt(D),L.callback=null,rr(N,L,D),N=D,x.current.lanes=N,Ye(x,N),yu(x),m[Nr]=x.current,Ck(m),new Wj(x)},Nb.version="19.1.0",Nb}var hR;function see(){if(hR)return Wk.exports;hR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wk.exports=nee(),Wk.exports}var iee=see(),wb={},fR;function oee(){if(fR)return wb;fR=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.parse=o,wb.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,p){const v=new i,g=f.length;if(g<2)return v;const b=p?.decode||u;let y=0;do{const S=f.indexOf("=",y);if(S===-1)break;const w=f.indexOf(";",y),k=w===-1?g:w;if(S>k){y=f.lastIndexOf(";",S-1)+1;continue}const C=l(f,y,S),_=c(f,S,C),E=f.slice(C,_);if(v[E]===void 0){let T=l(f,S+1,k),I=c(f,k,T);const F=b(f.slice(T,I));v[E]=F}y=k+1}while(y<g);return v}function l(f,p,v){do{const g=f.charCodeAt(p);if(g!==32&&g!==9)return p}while(++p<v);return v}function c(f,p,v){for(;p>v;){const g=f.charCodeAt(--p);if(g!==32&&g!==9)return p+1}return v}function d(f,p,v){const g=v?.encode||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const b=g(p);if(!t.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=f+"="+b;if(!v)return y;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);y+="; Max-Age="+v.maxAge}if(v.domain){if(!r.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);y+="; Domain="+v.domain}if(v.path){if(!a.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);y+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);y+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(y+="; HttpOnly"),v.secure&&(y+="; Secure"),v.partitioned&&(y+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return y}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function h(f){return s.call(f)==="[object Date]"}return wb}oee();var mR="popstate";function lee(e={}){function t(a,s){let{pathname:i,search:o,hash:l}=a.location;return N5("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:by(s)}return dee(t,r,null,e)}function ns(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Md(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cee(){return Math.random().toString(36).substring(2,10)}function pR(e,t){return{usr:e.state,key:e.key,idx:t}}function N5(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ug(t):t,state:r,key:t&&t.key||a||cee()}}function by({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ug(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function dee(e,t,r,a={}){let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function f(b,y){l="PUSH";let S=N5(g.location,b,y);d=u()+1;let w=pR(S,d),k=g.createHref(S);try{o.pushState(w,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(k)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let S=N5(g.location,b,y);d=u();let w=pR(S,d),k=g.createHref(S);o.replaceState(w,"",k),i&&c&&c({action:l,location:g.location,delta:0})}function v(b){return uee(b)}let g={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(mR,h),c=b,()=>{s.removeEventListener(mR,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}function uee(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ns(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:by(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function p$(e,t,r="/"){return hee(e,t,r,!1)}function hee(e,t,r,a){let s=typeof t=="string"?ug(t):t,i=sf(s.pathname||"/",r);if(i==null)return null;let o=x$(e);fee(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=See(i);l=Nee(o[c],d,a)}return l}function x$(e,t=[],r=[],a=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ns(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=Gh([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(ns(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),x$(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:yee(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))s(i,o);else for(let l of v$(i.path))s(i,o,l)}),t}function v$(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=v$(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function fee(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jee(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var mee=/^:[\w-]+$/,pee=3,xee=2,vee=1,gee=10,bee=-2,xR=e=>e==="*";function yee(e,t){let r=e.split("/"),a=r.length;return r.some(xR)&&(a+=bee),t&&(a+=xee),r.filter(s=>!xR(s)).reduce((s,i)=>s+(mee.test(i)?pee:i===""?vee:gee),a)}function jee(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function Nee(e,t,r=!1){let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=bw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!a[a.length-1].route.index&&(h=bw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Gh([i,h.pathname]),pathnameBase:_ee(Gh([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Gh([i,h.pathnameBase]))}return o}function bw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=wee(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function wee(e,t=!1,r=!0){Md(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function See(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Md(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function sf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function Cee(e,t="/"){let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?ug(e):e;return{pathname:r?r.startsWith("/")?r:kee(r,t):t,search:Dee(a),hash:Aee(s)}}function kee(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Xk(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Eee(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function P3(e){let t=Eee(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function O3(e,t,r,a=!1){let s;typeof e=="string"?s=ug(e):(s={...e},ns(!s.pathname||!s.pathname.includes("?"),Xk("?","pathname","search",s)),ns(!s.pathname||!s.pathname.includes("#"),Xk("#","pathname","hash",s)),ns(!s.search||!s.search.includes("#"),Xk("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Cee(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Gh=e=>e.join("/").replace(/\/\/+/g,"/"),_ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dee=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Aee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Tee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var g$=["POST","PUT","PATCH","DELETE"];new Set(g$);var Iee=["GET",...g$];new Set(Iee);var hg=j.createContext(null);hg.displayName="DataRouter";var dS=j.createContext(null);dS.displayName="DataRouterState";var b$=j.createContext({isTransitioning:!1});b$.displayName="ViewTransition";var Pee=j.createContext(new Map);Pee.displayName="Fetchers";var Oee=j.createContext(null);Oee.displayName="Await";var Fd=j.createContext(null);Fd.displayName="Navigation";var o1=j.createContext(null);o1.displayName="Location";var th=j.createContext({outlet:null,matches:[],isDataRoute:!1});th.displayName="Route";var M3=j.createContext(null);M3.displayName="RouteError";function Mee(e,{relative:t}={}){ns(fg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=j.useContext(Fd),{hash:s,pathname:i,search:o}=l1(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Gh([r,i])),a.createHref({pathname:l,search:o,hash:s})}function fg(){return j.useContext(o1)!=null}function np(){return ns(fg(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(o1).location}var y$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j$(e){j.useContext(Fd).static||j.useLayoutEffect(e)}function rh(){let{isDataRoute:e}=j.useContext(th);return e?Yee():Ree()}function Ree(){ns(fg(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(hg),{basename:t,navigator:r}=j.useContext(Fd),{matches:a}=j.useContext(th),{pathname:s}=np(),i=JSON.stringify(P3(a)),o=j.useRef(!1);return j$(()=>{o.current=!0}),j.useCallback((c,d={})=>{if(Md(o.current,y$),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=O3(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Gh([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,s,e])}j.createContext(null);function l1(e,{relative:t}={}){let{matches:r}=j.useContext(th),{pathname:a}=np(),s=JSON.stringify(P3(r));return j.useMemo(()=>O3(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function Fee(e,t){return N$(e,t)}function N$(e,t,r,a){ns(fg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(Fd),{matches:i}=j.useContext(th),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";w$(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=np(),f;if(t){let y=typeof t=="string"?ug(t):t;ns(d==="/"||y.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=h;let p=f.pathname||"/",v=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=p$(e,{pathname:v});Md(u||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Md(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Vee(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Gh([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Gh([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return t&&b?j.createElement(o1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},b):b}function Lee(){let e=Gee(),t=Tee(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:s},r):null,o)}var Bee=j.createElement(Lee,null),Uee=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(th.Provider,{value:this.props.routeContext},j.createElement(M3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $ee({routeContext:e,match:t,children:r}){let a=j.useContext(hg);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(th.Provider,{value:e},r)}function Vee(e,t=[],r=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r?.errors;if(i!=null){let c=s.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);ns(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=r,f=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,u)=>{let h,f=!1,p=null,v=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,p=d.route.errorElement||Bee,o&&(l<0&&u===0?(w$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):l===u&&(f=!0,v=d.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),b=()=>{let y;return h?y=p:f?y=v:d.route.Component?y=j.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,j.createElement($ee,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?j.createElement(Uee,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function R3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qee(e){let t=j.useContext(hg);return ns(t,R3(e)),t}function zee(e){let t=j.useContext(dS);return ns(t,R3(e)),t}function Hee(e){let t=j.useContext(th);return ns(t,R3(e)),t}function F3(e){let t=Hee(e),r=t.matches[t.matches.length-1];return ns(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Wee(){return F3("useRouteId")}function Gee(){let e=j.useContext(M3),t=zee("useRouteError"),r=F3("useRouteError");return e!==void 0?e:t.errors?.[r]}function Yee(){let{router:e}=qee("useNavigate"),t=F3("useNavigate"),r=j.useRef(!1);return j$(()=>{r.current=!0}),j.useCallback(async(s,i={})=>{Md(r.current,y$),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var vR={};function w$(e,t,r){!t&&!vR[e]&&(vR[e]=!0,Md(!1,r))}j.memo(Kee);function Kee({routes:e,future:t,state:r}){return N$(e,void 0,r,t)}function Xee({to:e,replace:t,state:r,relative:a}){ns(fg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(Fd);Md(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(th),{pathname:o}=np(),l=rh(),c=O3(e,P3(i),o,a==="path"),d=JSON.stringify(c);return j.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:a})},[l,d,a,t,r]),null}function hr(e){ns(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qee({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:s,static:i=!1}){ns(!fg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=j.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=ug(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=r,p=j.useMemo(()=>{let v=sf(c,o);return v==null?null:{location:{pathname:v,search:d,hash:u,state:h,key:f},navigationType:a}},[o,c,d,u,h,f,a]);return Md(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:j.createElement(Fd.Provider,{value:l},j.createElement(o1.Provider,{children:t,value:p}))}function Jee({children:e,location:t}){return Fee(w5(e),t)}function w5(e,t=[]){let r=[];return j.Children.forEach(e,(a,s)=>{if(!j.isValidElement(a))return;let i=[...t,s];if(a.type===j.Fragment){r.push.apply(r,w5(a.props.children,i));return}ns(a.type===hr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ns(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=w5(a.props.children,i)),r.push(o)}),r}var QN="get",JN="application/x-www-form-urlencoded";function uS(e){return e!=null&&typeof e.tagName=="string"}function Zee(e){return uS(e)&&e.tagName.toLowerCase()==="button"}function ete(e){return uS(e)&&e.tagName.toLowerCase()==="form"}function tte(e){return uS(e)&&e.tagName.toLowerCase()==="input"}function rte(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ate(e,t){return e.button===0&&(!t||t==="_self")&&!rte(e)}var Yj=null;function nte(){if(Yj===null)try{new FormData(document.createElement("form"),0),Yj=!1}catch{Yj=!0}return Yj}var ste=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qk(e){return e!=null&&!ste.has(e)?(Md(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${JN}"`),null):e}function ite(e,t){let r,a,s,i,o;if(ete(e)){let l=e.getAttribute("action");a=l?sf(l,t):null,r=e.getAttribute("method")||QN,s=Qk(e.getAttribute("enctype"))||JN,i=new FormData(e)}else if(Zee(e)||tte(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(a=c?sf(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||QN,s=Qk(e.getAttribute("formenctype"))||Qk(l.getAttribute("enctype"))||JN,i=new FormData(l,e),!nte()){let{name:d,type:u,value:h}=e;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(uS(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=QN,a=null,s=JN,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:s,formData:i,body:o}}function L3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function ote(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lte(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function cte(e,t,r){let a=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await ote(i,r);return o.links?o.links():[]}return[]}));return fte(a.flat(1).filter(lte).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function gR(e,t,r,a,s,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>r[d].pathname!==c.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=a.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function dte(e,t,{includeHydrateFallback:r}={}){return ute(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function ute(e){return[...new Set(e)]}function hte(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function fte(e,t){let r=new Set;return new Set(t),e.reduce((a,s)=>{let i=JSON.stringify(hte(s));return r.has(i)||(r.add(i),a.push({key:i,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mte=new Set([100,101,204,205]);function pte(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&sf(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function S$(){let e=j.useContext(hg);return L3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xte(){let e=j.useContext(dS);return L3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var B3=j.createContext(void 0);B3.displayName="FrameworkContext";function C$(){let e=j.useContext(B3);return L3(e,"You must render this element inside a <HydratedRouter> element"),e}function vte(e,t){let r=j.useContext(B3),[a,s]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,f=j.useRef(null);j.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(S=>{o(S.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),j.useEffect(()=>{if(a){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[a]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:Sb(l,p),onBlur:Sb(c,v),onMouseEnter:Sb(d,p),onMouseLeave:Sb(u,v),onTouchStart:Sb(h,p)}]:[!1,f,{}]}function Sb(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function gte({page:e,...t}){let{router:r}=S$(),a=j.useMemo(()=>p$(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?j.createElement(yte,{page:e,matches:a,...t}):null}function bte(e){let{manifest:t,routeModules:r}=C$(),[a,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return cte(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),a}function yte({page:e,matches:t,...r}){let a=np(),{manifest:s,routeModules:i}=C$(),{basename:o}=S$(),{loaderData:l,matches:c}=xte(),d=j.useMemo(()=>gR(e,t,c,s,a,"data"),[e,t,c,s,a]),u=j.useMemo(()=>gR(e,t,c,s,a,"assets"),[e,t,c,s,a]),h=j.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let v=new Set,g=!1;if(t.forEach(y=>{let S=s.routes[y.route.id];!S||!S.hasLoader||(!d.some(w=>w.route.id===y.route.id)&&y.route.id in l&&i[y.route.id]?.shouldRevalidate||S.hasClientLoader?g=!0:v.add(y.route.id))}),v.size===0)return[];let b=pte(e,o);return g&&v.size>0&&b.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,l,a,s,d,t,e,i]),f=j.useMemo(()=>dte(u,s),[u,s]),p=bte(u);return j.createElement(j.Fragment,null,h.map(v=>j.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>j.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:g})=>j.createElement("link",{key:v,...g})))}function jte(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var k$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k$&&(window.__reactRouterVersion="7.6.3")}catch{}function Nte({basename:e,children:t,window:r}){let a=j.useRef();a.current==null&&(a.current=lee({window:r,v5Compat:!0}));let s=a.current,[i,o]=j.useState({action:s.action,location:s.location}),l=j.useCallback(c=>{j.startTransition(()=>o(c))},[o]);return j.useLayoutEffect(()=>s.listen(l),[s,l]),j.createElement(Qee,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var E$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ex=j.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},p){let{basename:v}=j.useContext(Fd),g=typeof d=="string"&&E$.test(d),b,y=!1;if(typeof d=="string"&&g&&(b=d,k$))try{let I=new URL(window.location.href),F=d.startsWith("//")?new URL(I.protocol+d):new URL(d),A=sf(F.pathname,v);F.origin===I.origin&&A!=null?d=A+F.search+F.hash:y=!0}catch{Md(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Mee(d,{relative:s}),[w,k,C]=vte(a,f),_=kte(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function E(I){t&&t(I),I.defaultPrevented||_(I)}let T=j.createElement("a",{...f,...C,href:b||S,onClick:y||i?t:E,ref:jte(p,k),target:c,"data-discover":!g&&r==="render"?"true":void 0});return w&&!g?j.createElement(j.Fragment,null,T,j.createElement(gte,{page:S})):T});ex.displayName="Link";var wte=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=l1(o,{relative:d.relative}),f=np(),p=j.useContext(dS),{navigator:v,basename:g}=j.useContext(Fd),b=p!=null&&Tte(h)&&l===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(S=S.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=sf(w,g)||w);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=S===y||!s&&S.startsWith(y)&&S.charAt(k)==="/",_=w!=null&&(w===y||!s&&w.startsWith(y)&&w.charAt(y.length)==="/"),E={isActive:C,isPending:_,isTransitioning:b},T=C?t:void 0,I;typeof a=="function"?I=a(E):I=[a,C?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(E):i;return j.createElement(ex,{...d,"aria-current":T,className:I,ref:u,style:F,to:o,viewTransition:l},typeof c=="function"?c(E):c)});wte.displayName="NavLink";var Ste=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:s,state:i,method:o=QN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},p)=>{let v=Dte(),g=Ate(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&E$.test(l),S=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,C=k?.getAttribute("formmethod")||o;v(k||w.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:s,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return j.createElement("form",{ref:p,method:b,action:g,onSubmit:a?c:S,...f,"data-discover":!y&&e==="render"?"true":void 0})});Ste.displayName="Form";function Cte(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _$(e){let t=j.useContext(hg);return ns(t,Cte(e)),t}function kte(e,{target:t,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=rh(),c=np(),d=l1(e,{relative:i});return j.useCallback(u=>{if(ate(u,t)){u.preventDefault();let h=r!==void 0?r:by(c)===by(d);l(e,{replace:h,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,r,a,t,e,s,i,o])}var Ete=0,_te=()=>`__${String(++Ete)}__`;function Dte(){let{router:e}=_$("useSubmit"),{basename:t}=j.useContext(Fd),r=Wee();return j.useCallback(async(a,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=ite(a,t);if(s.navigate===!1){let u=s.fetcherKey||_te();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Ate(e,{relative:t}={}){let{basename:r}=j.useContext(Fd),a=j.useContext(th);ns(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i={...l1(e||".",{relative:t})},o=np();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Gh([r,i.pathname])),by(i)}function Tte(e,t={}){let r=j.useContext(b$);ns(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=_$("useViewTransitionState"),s=l1(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=sf(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=sf(r.nextLocation.pathname,a)||r.nextLocation.pathname;return bw(s.pathname,o)!=null||bw(s.pathname,i)!=null}[...mte];var c1=m$();const Ite=Kc(c1);function D$(e,t){return function(){return e.apply(t,arguments)}}const{toString:Pte}=Object.prototype,{getPrototypeOf:U3}=Object,{iterator:hS,toStringTag:A$}=Symbol,fS=(e=>t=>{const r=Pte.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ld=e=>(e=e.toLowerCase(),t=>fS(t)===e),mS=e=>t=>typeof t===e,{isArray:mg}=Array,yy=mS("undefined");function Ote(e){return e!==null&&!yy(e)&&e.constructor!==null&&!yy(e.constructor)&&xl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const T$=Ld("ArrayBuffer");function Mte(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&T$(e.buffer),t}const Rte=mS("string"),xl=mS("function"),I$=mS("number"),pS=e=>e!==null&&typeof e=="object",Fte=e=>e===!0||e===!1,ZN=e=>{if(fS(e)!=="object")return!1;const t=U3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(A$ in e)&&!(hS in e)},Lte=Ld("Date"),Bte=Ld("File"),Ute=Ld("Blob"),$te=Ld("FileList"),Vte=e=>pS(e)&&xl(e.pipe),qte=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||xl(e.append)&&((t=fS(e))==="formdata"||t==="object"&&xl(e.toString)&&e.toString()==="[object FormData]"))},zte=Ld("URLSearchParams"),[Hte,Wte,Gte,Yte]=["ReadableStream","Request","Response","Headers"].map(Ld),Kte=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function d1(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),mg(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(a=0;a<o;a++)l=i[a],t.call(null,e[l],l,e)}}function P$(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,s;for(;a-- >0;)if(s=r[a],t===s.toLowerCase())return s;return null}const tx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O$=e=>!yy(e)&&e!==tx;function S5(){const{caseless:e}=O$(this)&&this||{},t={},r=(a,s)=>{const i=e&&P$(t,s)||s;ZN(t[i])&&ZN(a)?t[i]=S5(t[i],a):ZN(a)?t[i]=S5({},a):mg(a)?t[i]=a.slice():t[i]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&d1(arguments[a],r);return t}const Xte=(e,t,r,{allOwnKeys:a}={})=>(d1(t,(s,i)=>{r&&xl(s)?e[i]=D$(s,r):e[i]=s},{allOwnKeys:a}),e),Qte=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Jte=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Zte=(e,t,r,a)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!a||a(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&U3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},ere=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},tre=e=>{if(!e)return null;if(mg(e))return e;let t=e.length;if(!I$(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},rre=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&U3(Uint8Array)),are=(e,t)=>{const a=(e&&e[hS]).call(e);let s;for(;(s=a.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},nre=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},sre=Ld("HTMLFormElement"),ire=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,s){return a.toUpperCase()+s}),bR=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),ore=Ld("RegExp"),M$=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};d1(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(a[i]=o||s)}),Object.defineProperties(e,a)},lre=e=>{M$(e,(t,r)=>{if(xl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(xl(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},cre=(e,t)=>{const r={},a=s=>{s.forEach(i=>{r[i]=!0})};return mg(e)?a(e):a(String(e).split(t)),r},dre=()=>{},ure=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function hre(e){return!!(e&&xl(e.append)&&e[A$]==="FormData"&&e[hS])}const fre=e=>{const t=new Array(10),r=(a,s)=>{if(pS(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[s]=a;const i=mg(a)?[]:{};return d1(a,(o,l)=>{const c=r(o,s+1);!yy(c)&&(i[l]=c)}),t[s]=void 0,i}}return a};return r(e,0)},mre=Ld("AsyncFunction"),pre=e=>e&&(pS(e)||xl(e))&&xl(e.then)&&xl(e.catch),R$=((e,t)=>e?setImmediate:t?((r,a)=>(tx.addEventListener("message",({source:s,data:i})=>{s===tx&&i===r&&a.length&&a.shift()()},!1),s=>{a.push(s),tx.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",xl(tx.postMessage)),xre=typeof queueMicrotask<"u"?queueMicrotask.bind(tx):typeof process<"u"&&process.nextTick||R$,vre=e=>e!=null&&xl(e[hS]),Vt={isArray:mg,isArrayBuffer:T$,isBuffer:Ote,isFormData:qte,isArrayBufferView:Mte,isString:Rte,isNumber:I$,isBoolean:Fte,isObject:pS,isPlainObject:ZN,isReadableStream:Hte,isRequest:Wte,isResponse:Gte,isHeaders:Yte,isUndefined:yy,isDate:Lte,isFile:Bte,isBlob:Ute,isRegExp:ore,isFunction:xl,isStream:Vte,isURLSearchParams:zte,isTypedArray:rre,isFileList:$te,forEach:d1,merge:S5,extend:Xte,trim:Kte,stripBOM:Qte,inherits:Jte,toFlatObject:Zte,kindOf:fS,kindOfTest:Ld,endsWith:ere,toArray:tre,forEachEntry:are,matchAll:nre,isHTMLForm:sre,hasOwnProperty:bR,hasOwnProp:bR,reduceDescriptors:M$,freezeMethods:lre,toObjectSet:cre,toCamelCase:ire,noop:dre,toFiniteNumber:ure,findKey:P$,global:tx,isContextDefined:O$,isSpecCompliantForm:hre,toJSONObject:fre,isAsyncFn:mre,isThenable:pre,setImmediate:R$,asap:xre,isIterable:vre};function ma(e,t,r,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}Vt.inherits(ma,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vt.toJSONObject(this.config),code:this.code,status:this.status}}});const F$=ma.prototype,L$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{L$[e]={value:e}});Object.defineProperties(ma,L$);Object.defineProperty(F$,"isAxiosError",{value:!0});ma.from=(e,t,r,a,s,i)=>{const o=Object.create(F$);return Vt.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ma.call(o,e.message,t,r,a,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const gre=null;function C5(e){return Vt.isPlainObject(e)||Vt.isArray(e)}function B$(e){return Vt.endsWith(e,"[]")?e.slice(0,-2):e}function yR(e,t,r){return e?e.concat(t).map(function(s,i){return s=B$(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function bre(e){return Vt.isArray(e)&&!e.some(C5)}const yre=Vt.toFlatObject(Vt,{},null,function(t){return/^is[A-Z]/.test(t)});function xS(e,t,r){if(!Vt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Vt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!Vt.isUndefined(b[g])});const a=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Vt.isSpecCompliantForm(t);if(!Vt.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Vt.isDate(v))return v.toISOString();if(Vt.isBoolean(v))return v.toString();if(!c&&Vt.isBlob(v))throw new ma("Blob is not supported. Use a Buffer instead.");return Vt.isArrayBuffer(v)||Vt.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,b){let y=v;if(v&&!b&&typeof v=="object"){if(Vt.endsWith(g,"{}"))g=a?g:g.slice(0,-2),v=JSON.stringify(v);else if(Vt.isArray(v)&&bre(v)||(Vt.isFileList(v)||Vt.endsWith(g,"[]"))&&(y=Vt.toArray(v)))return g=B$(g),y.forEach(function(w,k){!(Vt.isUndefined(w)||w===null)&&t.append(o===!0?yR([g],k,i):o===null?g:g+"[]",d(w))}),!1}return C5(v)?!0:(t.append(yR(b,g,i),d(v)),!1)}const h=[],f=Object.assign(yre,{defaultVisitor:u,convertValue:d,isVisitable:C5});function p(v,g){if(!Vt.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(v),Vt.forEach(v,function(y,S){(!(Vt.isUndefined(y)||y===null)&&s.call(t,y,Vt.isString(S)?S.trim():S,g,f))===!0&&p(y,g?g.concat(S):[S])}),h.pop()}}if(!Vt.isObject(e))throw new TypeError("data must be an object");return p(e),t}function jR(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function $3(e,t){this._pairs=[],e&&xS(e,this,t)}const U$=$3.prototype;U$.append=function(t,r){this._pairs.push([t,r])};U$.toString=function(t){const r=t?function(a){return t.call(this,a,jR)}:jR;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function jre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $$(e,t,r){if(!t)return e;const a=r&&r.encode||jre;Vt.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Vt.isURLSearchParams(t)?t.toString():new $3(t,r).toString(a),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class NR{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Vt.forEach(this.handlers,function(a){a!==null&&t(a)})}}const V$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nre=typeof URLSearchParams<"u"?URLSearchParams:$3,wre=typeof FormData<"u"?FormData:null,Sre=typeof Blob<"u"?Blob:null,Cre={isBrowser:!0,classes:{URLSearchParams:Nre,FormData:wre,Blob:Sre},protocols:["http","https","file","blob","url","data"]},V3=typeof window<"u"&&typeof document<"u",k5=typeof navigator=="object"&&navigator||void 0,kre=V3&&(!k5||["ReactNative","NativeScript","NS"].indexOf(k5.product)<0),Ere=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_re=V3&&window.location.href||"http://localhost",Dre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:V3,hasStandardBrowserEnv:kre,hasStandardBrowserWebWorkerEnv:Ere,navigator:k5,origin:_re},Symbol.toStringTag,{value:"Module"})),To={...Dre,...Cre};function Are(e,t){return xS(e,new To.classes.URLSearchParams,Object.assign({visitor:function(r,a,s,i){return To.isNode&&Vt.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Tre(e){return Vt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ire(e){const t={},r=Object.keys(e);let a;const s=r.length;let i;for(a=0;a<s;a++)i=r[a],t[i]=e[i];return t}function q$(e){function t(r,a,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Vt.isArray(s)?s.length:o,c?(Vt.hasOwnProp(s,o)?s[o]=[s[o],a]:s[o]=a,!l):((!s[o]||!Vt.isObject(s[o]))&&(s[o]=[]),t(r,a,s[o],i)&&Vt.isArray(s[o])&&(s[o]=Ire(s[o])),!l)}if(Vt.isFormData(e)&&Vt.isFunction(e.entries)){const r={};return Vt.forEachEntry(e,(a,s)=>{t(Tre(a),s,r,0)}),r}return null}function Pre(e,t,r){if(Vt.isString(e))try{return(t||JSON.parse)(e),Vt.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const u1={transitional:V$,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",s=a.indexOf("application/json")>-1,i=Vt.isObject(t);if(i&&Vt.isHTMLForm(t)&&(t=new FormData(t)),Vt.isFormData(t))return s?JSON.stringify(q$(t)):t;if(Vt.isArrayBuffer(t)||Vt.isBuffer(t)||Vt.isStream(t)||Vt.isFile(t)||Vt.isBlob(t)||Vt.isReadableStream(t))return t;if(Vt.isArrayBufferView(t))return t.buffer;if(Vt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Are(t,this.formSerializer).toString();if((l=Vt.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return xS(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Pre(t)):t}],transformResponse:[function(t){const r=this.transitional||u1.transitional,a=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Vt.isResponse(t)||Vt.isReadableStream(t))return t;if(t&&Vt.isString(t)&&(a&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?ma.from(l,ma.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:To.classes.FormData,Blob:To.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vt.forEach(["delete","get","head","post","put","patch"],e=>{u1.headers[e]={}});const Ore=Vt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mre=e=>{const t={};let r,a,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),a=o.substring(s+1).trim(),!(!r||t[r]&&Ore[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},wR=Symbol("internals");function Cb(e){return e&&String(e).trim().toLowerCase()}function ew(e){return e===!1||e==null?e:Vt.isArray(e)?e.map(ew):String(e)}function Rre(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const Fre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jk(e,t,r,a,s){if(Vt.isFunction(a))return a.call(this,t,r);if(s&&(t=r),!!Vt.isString(t)){if(Vt.isString(a))return t.indexOf(a)!==-1;if(Vt.isRegExp(a))return a.test(t)}}function Lre(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function Bre(e,t){const r=Vt.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(s,i,o){return this[a].call(this,t,s,i,o)},configurable:!0})})}let vl=class{constructor(t){t&&this.set(t)}set(t,r,a){const s=this;function i(l,c,d){const u=Cb(c);if(!u)throw new Error("header name must be a non-empty string");const h=Vt.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=ew(l))}const o=(l,c)=>Vt.forEach(l,(d,u)=>i(d,u,c));if(Vt.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Vt.isString(t)&&(t=t.trim())&&!Fre(t))o(Mre(t),r);else if(Vt.isObject(t)&&Vt.isIterable(t)){let l={},c,d;for(const u of t){if(!Vt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Vt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=Cb(t),t){const a=Vt.findKey(this,t);if(a){const s=this[a];if(!r)return s;if(r===!0)return Rre(s);if(Vt.isFunction(r))return r.call(this,s,a);if(Vt.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Cb(t),t){const a=Vt.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Jk(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let s=!1;function i(o){if(o=Cb(o),o){const l=Vt.findKey(a,o);l&&(!r||Jk(a,a[l],l,r))&&(delete a[l],s=!0)}}return Vt.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let a=r.length,s=!1;for(;a--;){const i=r[a];(!t||Jk(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,a={};return Vt.forEach(this,(s,i)=>{const o=Vt.findKey(a,i);if(o){r[o]=ew(s),delete r[i];return}const l=t?Lre(i):String(i).trim();l!==i&&delete r[i],r[l]=ew(s),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Vt.forEach(this,(a,s)=>{a!=null&&a!==!1&&(r[s]=t&&Vt.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[wR]=this[wR]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=Cb(o);a[l]||(Bre(s,o),a[l]=!0)}return Vt.isArray(t)?t.forEach(i):i(t),this}};vl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Vt.reduceDescriptors(vl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Vt.freezeMethods(vl);function Zk(e,t){const r=this||u1,a=t||r,s=vl.from(a.headers);let i=a.data;return Vt.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function z$(e){return!!(e&&e.__CANCEL__)}function pg(e,t,r){ma.call(this,e??"canceled",ma.ERR_CANCELED,t,r),this.name="CanceledError"}Vt.inherits(pg,ma,{__CANCEL__:!0});function H$(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new ma("Request failed with status code "+r.status,[ma.ERR_BAD_REQUEST,ma.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ure(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $re(e,t){e=e||10;const r=new Array(e),a=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=a[i];o||(o=d),r[s]=c,a[s]=d;let h=i,f=0;for(;h!==s;)f+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(f*1e3/p):void 0}}function Vre(e,t){let r=0,a=1e3/t,s,i;const o=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=a?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},a-h)))},()=>s&&o(s)]}const yw=(e,t,r=3)=>{let a=0;const s=$re(50,250);return Vre(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-a,d=s(c),u=o<=l;a=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},SR=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},CR=e=>(...t)=>Vt.asap(()=>e(...t)),qre=To.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,To.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(To.origin),To.navigator&&/(msie|trident)/i.test(To.navigator.userAgent)):()=>!0,zre=To.hasStandardBrowserEnv?{write(e,t,r,a,s,i){const o=[e+"="+encodeURIComponent(t)];Vt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Vt.isString(a)&&o.push("path="+a),Vt.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Hre(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Wre(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function W$(e,t,r){let a=!Hre(t);return e&&(a||r==!1)?Wre(e,t):t}const kR=e=>e instanceof vl?{...e}:e;function _x(e,t){t=t||{};const r={};function a(d,u,h,f){return Vt.isPlainObject(d)&&Vt.isPlainObject(u)?Vt.merge.call({caseless:f},d,u):Vt.isPlainObject(u)?Vt.merge({},u):Vt.isArray(u)?u.slice():u}function s(d,u,h,f){if(Vt.isUndefined(u)){if(!Vt.isUndefined(d))return a(void 0,d,h,f)}else return a(d,u,h,f)}function i(d,u){if(!Vt.isUndefined(u))return a(void 0,u)}function o(d,u){if(Vt.isUndefined(u)){if(!Vt.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function l(d,u,h){if(h in t)return a(d,u);if(h in e)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>s(kR(d),kR(u),h,!0)};return Vt.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,f=h(e[u],t[u],u);Vt.isUndefined(f)&&h!==l||(r[u]=f)}),r}const G$=e=>{const t=_x({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=vl.from(o),t.url=$$(W$(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Vt.isFormData(r)){if(To.hasStandardBrowserEnv||To.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(To.hasStandardBrowserEnv&&(a&&Vt.isFunction(a)&&(a=a(t)),a||a!==!1&&qre(t.url))){const d=s&&i&&zre.read(i);d&&o.set(s,d)}return t},Gre=typeof XMLHttpRequest<"u",Yre=Gre&&function(e){return new Promise(function(r,a){const s=G$(e);let i=s.data;const o=vl.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,f,p,v;function g(){p&&p(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const w=vl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};H$(function(E){r(E),g()},function(E){a(E),g()},C),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(a(new ma("Request aborted",ma.ECONNABORTED,e,b)),b=null)},b.onerror=function(){a(new ma("Network Error",ma.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||V$;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),a(new ma(k,C.clarifyTimeoutError?ma.ETIMEDOUT:ma.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&Vt.forEach(o.toJSON(),function(k,C){b.setRequestHeader(C,k)}),Vt.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),d&&([f,v]=yw(d,!0),b.addEventListener("progress",f)),c&&b.upload&&([h,p]=yw(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=w=>{b&&(a(!w||w.type?new pg(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const S=Ure(s.url);if(S&&To.protocols.indexOf(S)===-1){a(new ma("Unsupported protocol "+S+":",ma.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Kre=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;a.abort(u instanceof ma?u:new pg(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ma(`timeout ${t} of ms exceeded`,ma.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>Vt.asap(l),c}},Xre=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,s;for(;a<r;)s=a+t,yield e.slice(a,s),a=s},Qre=async function*(e,t){for await(const r of Jre(e))yield*Xre(r,t)},Jre=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},ER=(e,t,r,a)=>{const s=Qre(e,t);let i=0,o,l=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let f=i+=h;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},vS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Y$=vS&&typeof ReadableStream=="function",Zre=vS&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),K$=(e,...t)=>{try{return!!e(...t)}catch{return!1}},eae=Y$&&K$(()=>{let e=!1;const t=new Request(To.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),_R=64*1024,E5=Y$&&K$(()=>Vt.isReadableStream(new Response("").body)),jw={stream:E5&&(e=>e.body)};vS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!jw[t]&&(jw[t]=Vt.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new ma(`Response type '${t}' is not supported`,ma.ERR_NOT_SUPPORT,a)})})})(new Response);const tae=async e=>{if(e==null)return 0;if(Vt.isBlob(e))return e.size;if(Vt.isSpecCompliantForm(e))return(await new Request(To.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Vt.isArrayBufferView(e)||Vt.isArrayBuffer(e))return e.byteLength;if(Vt.isURLSearchParams(e)&&(e=e+""),Vt.isString(e))return(await Zre(e)).byteLength},rae=async(e,t)=>{const r=Vt.toFiniteNumber(e.getContentLength());return r??tae(t)},aae=vS&&(async e=>{let{url:t,method:r,data:a,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:f}=G$(e);d=d?(d+"").toLowerCase():"text";let p=Kre([s,i&&i.toAbortSignal()],o),v;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&eae&&r!=="get"&&r!=="head"&&(b=await rae(u,a))!==0){let C=new Request(t,{method:"POST",body:a,duplex:"half"}),_;if(Vt.isFormData(a)&&(_=C.headers.get("content-type"))&&u.setContentType(_),C.body){const[E,T]=SR(b,yw(CR(c)));a=ER(C.body,_R,E,T)}}Vt.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:y?h:void 0});let S=await fetch(v,f);const w=E5&&(d==="stream"||d==="response");if(E5&&(l||w&&g)){const C={};["status","statusText","headers"].forEach(I=>{C[I]=S[I]});const _=Vt.toFiniteNumber(S.headers.get("content-length")),[E,T]=l&&SR(_,yw(CR(l),!0))||[];S=new Response(ER(S.body,_R,E,()=>{T&&T(),g&&g()}),C)}d=d||"text";let k=await jw[Vt.findKey(jw,d)||"text"](S,e);return!w&&g&&g(),await new Promise((C,_)=>{H$(C,_,{data:k,headers:vl.from(S.headers),status:S.status,statusText:S.statusText,config:e,request:v})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ma("Network Error",ma.ERR_NETWORK,e,v),{cause:y.cause||y}):ma.from(y,y&&y.code,e,v)}}),_5={http:gre,xhr:Yre,fetch:aae};Vt.forEach(_5,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const DR=e=>`- ${e}`,nae=e=>Vt.isFunction(e)||e===null||e===!1,X$={getAdapter:e=>{e=Vt.isArray(e)?e:[e];const{length:t}=e;let r,a;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(a=r,!nae(r)&&(a=_5[(o=String(r)).toLowerCase()],a===void 0))throw new ma(`Unknown adapter '${o}'`);if(a)break;s[o||"#"+i]=a}if(!a){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(DR).join(`
`):" "+DR(i[0]):"as no adapter specified";throw new ma("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:_5};function eE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pg(null,e)}function AR(e){return eE(e),e.headers=vl.from(e.headers),e.data=Zk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),X$.getAdapter(e.adapter||u1.adapter)(e).then(function(a){return eE(e),a.data=Zk.call(e,e.transformResponse,a),a.headers=vl.from(a.headers),a},function(a){return z$(a)||(eE(e),a&&a.response&&(a.response.data=Zk.call(e,e.transformResponse,a.response),a.response.headers=vl.from(a.response.headers))),Promise.reject(a)})}const Q$="1.10.0",gS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gS[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const TR={};gS.transitional=function(t,r,a){function s(i,o){return"[Axios v"+Q$+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,l)=>{if(t===!1)throw new ma(s(o," has been removed"+(r?" in "+r:"")),ma.ERR_DEPRECATED);return r&&!TR[o]&&(TR[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};gS.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function sae(e,t,r){if(typeof e!="object")throw new ma("options must be an object",ma.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ma("option "+i+" must be "+c,ma.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ma("Unknown option "+i,ma.ERR_BAD_OPTION)}}const tw={assertOptions:sae,validators:gS},ju=tw.validators;let mx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new NR,response:new NR}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=_x(this.defaults,r);const{transitional:a,paramsSerializer:s,headers:i}=r;a!==void 0&&tw.assertOptions(a,{silentJSONParsing:ju.transitional(ju.boolean),forcedJSONParsing:ju.transitional(ju.boolean),clarifyTimeoutError:ju.transitional(ju.boolean)},!1),s!=null&&(Vt.isFunction(s)?r.paramsSerializer={serialize:s}:tw.assertOptions(s,{encode:ju.function,serialize:ju.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),tw.assertOptions(r,{baseUrl:ju.spelling("baseURL"),withXsrfToken:ju.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Vt.merge(i.common,i[r.method]);i&&Vt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=vl.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!c){const v=[AR.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,d),f=v.length,u=Promise.resolve(r);h<f;)u=u.then(v[h++],v[h++]);return u}f=l.length;let p=r;for(h=0;h<f;){const v=l[h++],g=l[h++];try{p=v(p)}catch(b){g.call(this,b);break}}try{u=AR.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=_x(this.defaults,t);const r=W$(t.baseURL,t.url,t.allowAbsoluteUrls);return $$(r,t.params,t.paramsSerializer)}};Vt.forEach(["delete","get","head","options"],function(t){mx.prototype[t]=function(r,a){return this.request(_x(a||{},{method:t,url:r,data:(a||{}).data}))}});Vt.forEach(["post","put","patch"],function(t){function r(a){return function(i,o,l){return this.request(_x(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mx.prototype[t]=r(),mx.prototype[t+"Form"]=r(!0)});let iae=class J${constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(s=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](s);a._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{a.subscribe(l),i=l}).then(s);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,l){a.reason||(a.reason=new pg(i,o,l),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new J$(function(s){t=s}),cancel:t}}};function oae(e){return function(r){return e.apply(null,r)}}function lae(e){return Vt.isObject(e)&&e.isAxiosError===!0}const D5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(D5).forEach(([e,t])=>{D5[t]=e});function Z$(e){const t=new mx(e),r=D$(mx.prototype.request,t);return Vt.extend(r,mx.prototype,t,{allOwnKeys:!0}),Vt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Z$(_x(e,s))},r}const Ie=Z$(u1);Ie.Axios=mx;Ie.CanceledError=pg;Ie.CancelToken=iae;Ie.isCancel=z$;Ie.VERSION=Q$;Ie.toFormData=xS;Ie.AxiosError=ma;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=oae;Ie.isAxiosError=lae;Ie.mergeConfig=_x;Ie.AxiosHeaders=vl;Ie.formToJSON=e=>q$(Vt.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=X$.getAdapter;Ie.HttpStatusCode=D5;Ie.default=Ie;const{Axios:fVe,AxiosError:mVe,CanceledError:pVe,isCancel:xVe,CancelToken:vVe,VERSION:gVe,all:bVe,Cancel:yVe,isAxiosError:jVe,spread:NVe,toFormData:wVe,AxiosHeaders:SVe,HttpStatusCode:CVe,formToJSON:kVe,getAdapter:EVe,mergeConfig:_Ve}=Ie,cae=()=>{const[e,t]=j.useState({dashboard:!1,superAdmin:!1,application:!1,call:!1,master:!1,category:!1,mrp:!1,purchase:!1,sales:!1,inventory:!1,accounts:!1,invoice:!1,billing:!1,purchasereport:!1,salesreport:!1,inventoryreport:!1,accountsreport:!1,crm:!1,vendorBilling:!1,project:!1,campaigns:!1,hrms:!1}),r=JSON.parse(localStorage.getItem("user")),[a,s]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(localStorage.getItem("activeRole")),d=rh(),u={purchasereport:"purchase",salesreport:"sales",inventoryreport:"inventory",accountsreport:"accounts",vendorBilling:"invoice",billing:"invoice"},h=g=>a.some(b=>b.name===g),f=(g,b)=>a.find(S=>S.name===g)?.subPermissions?.includes(b)||!1,p=g=>window.location.pathname===g,v=g=>{t(b=>{const y={...b},S=u[g];return S?(Object.keys(y).forEach(w=>{w!==g&&w!==S&&(y[w]=!1)}),y[g]=!b[g],y[S]=!0):(Object.keys(y).forEach(w=>{w!==g&&(y[w]=!1)}),y[g]=!b[g]),localStorage.setItem("openSubmenus",JSON.stringify(y)),y})};return j.useEffect(()=>{const g=localStorage.getItem("openSubmenus");g&&t(JSON.parse(g))},[]),j.useEffect(()=>{const g=async()=>{o(!0);try{const S=localStorage.getItem("activeRole");if(S){c(S);const k=(await Ie.get(`/api/permissions/${S}`)).data.data||[];if(s(k),localStorage.setItem("cachedPermissions",JSON.stringify(k)),localStorage.setItem("prevActiveRole",S),k.length>0){const C=k[0].subPermissions?.[0];C&&setTimeout(()=>{const _=document.querySelectorAll("a");for(let E of _)if(E.textContent?.trim()===C){const I=E.getAttribute("href");I&&d(I);break}},150)}}}catch(S){console.error("Error fetching permissions:",S),s([])}finally{o(!1)}},b=localStorage.getItem("prevActiveRole"),y=localStorage.getItem("activeRole");if(y&&y!==b)console.log("New role detected, fetching permissions"),g();else{console.log("Same role as before  loading cached permissions");const S=localStorage.getItem("cachedPermissions");S?(s(JSON.parse(S)),c(y),o(!1)):g()}},[d,l]),i?n.jsx("div",{className:"two-col-sidebar",id:"two-col-sidebar",children:n.jsx("div",{className:"sidebar",id:"sidebar-two",children:n.jsx("div",{className:"sidebar-inner",children:n.jsxs("div",{className:"text-center p-3",children:[n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading permissions..."})]})})})}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"sidebar",id:"sidebar",children:[n.jsxs("div",{className:"sidebar-logo",children:[n.jsx("a",{href:"/",className:"logo logo-normal",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),n.jsx("a",{href:"/",className:"logo-small",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),n.jsx("a",{href:"/",className:"dark-logo",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})})]}),n.jsx("div",{className:"sidebar-inner slimscroll",children:n.jsx("div",{id:"sidebar-menu",className:"sidebar-menu",children:n.jsxs("ul",{children:[h("Dashboard")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu",children:n.jsxs("a",{href:"/",className:p("/")?"active":"",children:[n.jsx("i",{className:"ti ti-smart-home"}),n.jsx("span",{children:"Dashboard"})]})})})}),h("Master Data")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu1",children:[n.jsxs("a",{href:"#",className:["/material-form","/customer-form","/vendor-form","/customer-price-list","/vendor-price-list","/tax-form","/LocationMaster","/ProcessList","/GeneralCondition"].some(g=>p(g))&&e.master?"active subdrop":e.master?"active":"",onClick:g=>{g.preventDefault(),v("master")},children:[n.jsx("i",{className:"ti ti-server"}),n.jsx("span",{children:"Master Data"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.master?"block":"none"},children:[f("Master Data","Material Master")&&n.jsx("li",{children:n.jsx("a",{href:"/material-form",className:p("/material-form")?"active":"",children:"Material Master"})}),f("Master Data","Customer Master")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-form",className:p("/customer-form")?"active":"",children:"Customer Master"})}),f("Master Data","Vendor Master")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-form",className:p("/vendor-form")?"active":"",children:"Vendor Master"})}),f("Master Data","Customer Price List")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-price-list",className:p("/customer-price-list")?"active":"",children:"Customer Price List"})}),f("Master Data","Vendor Price List")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-price-list",className:p("/vendor-price-list")?"active":"",children:"Vendor Price List"})}),f("Master Data","Tax List")&&n.jsx("li",{children:n.jsx("a",{href:"/tax-form",className:p("/tax-form")?"active":"",children:"Tax List"})}),f("Master Data","Location Master")&&n.jsx("li",{children:n.jsx("a",{href:"/LocationMaster",className:p("/LocationMaster")?"active":"",children:"Location Master"})}),f("Master Data","Process List Master")&&n.jsx("li",{children:n.jsx("a",{href:"/ProcessList",className:p("/ProcessList")?"active":"",children:"Process List Master"})}),f("Master Data","General Condition Master")&&n.jsx("li",{children:n.jsx("a",{href:"/GeneralCondition",className:p("/GeneralCondition")?"active":"",children:"General Condition Master"})})]})]})})}),h("MRP")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu submenu2",children:n.jsxs("a",{href:"/MRP",className:p("/MRP")?"active":"",children:[n.jsx("i",{className:"ti ti-chart-line"}),n.jsx("span",{children:"MRP"})]})})})}),h("Category")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu3",children:[n.jsxs("a",{href:"#",className:e.category?"active subdrop":"",onClick:g=>{g.preventDefault(),v("category")},children:[n.jsx("i",{className:"bi bi-database"}),n.jsx("span",{children:"Category"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.category?"block":"none"},children:[f("Category","Material Category")&&n.jsx("li",{children:n.jsx("a",{href:"/MaterialCategory",className:p("/MaterialCategory")?"active":"",children:"Material Category"})}),f("Category","Customer Category")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-category-form",className:p("/customer-category-form")?"active":"",children:"Customer Category"})}),f("Category","Vendor Category")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-category",className:p("/vendor-category")?"active":"",children:"Vendor Category"})}),f("Category","Purchase Indent Category")&&n.jsx("li",{children:n.jsx("a",{href:"/Purchaserequestcat",className:p("/Purchaserequestcat")?"active":"",children:"Purchase Indent Category"})}),f("Category","Sales Indent Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesCategory",className:p("/SalesCategory")?"active":"",children:"Sales Indent Category"})}),f("Category","PO Category")&&n.jsx("li",{children:n.jsx("a",{href:"/POCategory",className:p("/POCategory")?"active":"",children:"PO Category"})}),f("Category","Sales RFQ Category")&&n.jsx("li",{children:n.jsx("a",{href:"/sale-quotation-category-form",className:p("/sale-quotation-category-form")?"active":"",children:"Sales RFQ Category"})}),f("Category","Sales Order Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrderCategoryForm",className:p("/SalesOrderCategoryForm")?"active":"",children:"Sales Order Category"})}),f("Category","Goods Receipt Category")&&n.jsx("li",{children:n.jsx("a",{href:"/GoodsReceiptCategory",className:p("/GoodsReceiptCategory")?"active":"",children:"Goods Receipt Category"})}),f("Category","Goods Issue Category")&&n.jsx("li",{children:n.jsx("a",{href:"/GoodsIssueCategory",className:p("/GoodsIssueCategory")?"active":"",children:"Goods Issue Category"})}),f("Category","Invoice Category")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceCategory",className:p("/InvoiceCategory")?"active":"",children:"Invoice Category"})}),f("Category","Billing Category")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingCategory",className:p("/BillingCategory")?"active":"",children:"Billing Category"})}),f("Category","Sale Contract Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SaleContractCategoryForm",className:p("/SaleContractCategoryForm")?"active":"",children:"Sale Contract Category"})}),f("Category","Transfer Category")&&n.jsx("li",{children:n.jsx("a",{href:"/TransferCategory",className:p("/TransferCategory")?"active":"",children:"Transfer Category"})}),f("Category","Purchase Quotation Category")&&n.jsx("li",{children:n.jsx("a",{href:"/RFQCategoryForm",className:p("/RFQCategoryForm")?"active":"",children:"RFQ Category"})}),f("Category","Purchase Contract Category")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContractCategory",className:p("/PurchaseContractCategory")?"active":"",children:"Purchase Contract Category"})})]})]})})}),h("Purchase")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu4",children:[n.jsxs("a",{href:"#",className:["/PurchaseEnquiry","/PurchaseQuotation","/PurchaseContract","/PurchaseOrder","/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(g=>p(g))||e.purchase?"active subdrop":"",onClick:g=>{g.preventDefault(),v("purchase")},children:[n.jsx("i",{className:"ti ti-shopping-cart-dollar"}),n.jsx("span",{children:"Purchase"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.purchase?"block":"none"},children:[f("Purchase","Purchase Indent")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseEnquiry",className:p("/PurchaseEnquiry")?"active":"",children:"Purchase Enquiry"})}),f("Purchase","Purchase Quotation")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseQuotation",className:p("/PurchaseQuotation")?"active":"",children:"Purchase Quotation"})}),f("Purchase","Purchase Contract")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContract",className:p("/PurchaseContract")?"active":"",children:"Purchase Contract"})}),f("Purchase","Purchase Order")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseOrder",className:p("/PurchaseOrder")?"active":"",children:"Purchase Order"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(g=>p(g))||e.purchasereport?"active subdrop":"",onClick:g=>{g.preventDefault(),v("purchasereport")},children:["Purchase Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(g=>p(g))||e.purchasereport?"block":"none"},children:[f("Purchase","Purchase Indent List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseIndentsummary",className:p("/PurchaseIndentsummary")?"active":"",children:"Purchase Enquiry List"})}),f("Purchase","Purchase Quotations List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseQuotationsDisplay",className:p("/PurchaseQuotationsDisplay")?"active":"",children:"Purchase Quotations List"})}),f("Purchase","Purchase Contract List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContractsummary",className:p("/PurchaseContractsummary")?"active":"",children:"Purchase Contract List"})}),f("Purchase","Purchase Order List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseOrderList",className:p("/PurchaseOrderList")?"active":"",children:"Purchase Order List"})})]})]})]})]})})}),h("Sales")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu5",children:[n.jsxs("a",{href:"#",className:["/SalesEnquiry","/SalesQuotation","/SalesContract","/SalesOrder","/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(g=>p(g))||e.sales?"active subdrop":"",onClick:g=>{g.preventDefault(),v("sales")},children:[n.jsx("i",{className:"ti ti-shopping-cart-dollar"}),n.jsx("span",{children:"Sales"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.sales?"block":"none"},children:[f("Sales","Sales Indent")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesEnquiry",className:p("/SalesEnquiry")?"active":"",children:"Sales Enquiry"})}),f("Sales","Sales Quotation Form")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesQuotation",className:p("/SalesQuotation")?"active":"",children:"Sales Quotation"})}),f("Sales","Sales Contract")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesContract",className:p("/SalesContract")?"active":"",children:"Sales Contract"})}),f("Sales","Sales Order")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrder",className:p("/SalesOrder")?"active":"",children:"Sales Order"})}),f("Sales","Sales Delivery")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesDelivery",className:p("/SalesDelivery")?"active":"",children:"Sales Delivery"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(g=>p(g))||e.salesreport?"active subdrop":"",onClick:g=>{g.preventDefault(),v("salesreport")},children:["Sales Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(g=>p(g))||e.salesreport?"block":"none"},children:[f("Sales","Sales Indent List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesEnquiryList",className:p("/SalesEnquiryList")?"active":"",children:"Sales Enquiry List"})}),f("Sales","Sales Quotations List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesQuotationList",className:p("/SalesQuotationList")?"active":"",children:"Sales Quotations List"})}),f("Sales","Sales Contract List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesContractsummary",className:p("/SalesContractsummary")?"active":"",children:"Sales Contract List"})}),f("Sales","Sales Order List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrderList",className:p("/SalesOrderList")?"active":"",children:"Sales Order List"})}),f("Sales","Sales Delivery List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesDeliveryList",className:p("/SalesDeliveryList")?"active":"",children:"Sales Delivery List"})})]})]})]})]})})}),h("Inventory")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu6",children:[n.jsxs("a",{href:"#",className:["/MatrialReceipt","/MatrialIssue","/MatrialTransfer","/StockListERP","/MatrialReceiptList","/MatrialTransferList"].some(g=>p(g))||e.inventory?"active subdrop":"",onClick:g=>{g.preventDefault(),v("inventory")},children:[n.jsx("i",{className:"ti ti-box"}),n.jsx("span",{children:"Inventory"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.inventory?"block":"none"},children:[f("Inventory","Material Receipt")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialReceipt",className:p("/MatrialReceipt")?"active":"",children:"Material Receipt"})}),f("Inventory","Material Issue")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialIssue",className:p("/MatrialIssue")?"active":"",children:"Material Issue"})}),f("Inventory","Material Transfer")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialTransfer",className:p("/MatrialTransfer")?"active":"",children:"Delivery Challan"})}),f("Inventory","Stock List")&&n.jsx("li",{children:n.jsx("a",{href:"/StockListERP",className:p("/StockListERP")?"active":"",children:"Stock List"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/MatrialReceiptList","/MaterialIssueList"].some(g=>p(g))||e.inventoryreport?"active subdrop":"",onClick:g=>{g.preventDefault(),v("inventoryreport")},children:["Inventory Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/MatrialReceiptList","/MaterialIssueList"].some(g=>p(g))||e.inventoryreport?"block":"none"},children:[f("Inventory","Material Receipt List")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialReceiptList",className:p("/MatrialReceiptList")?"active":"",children:"Material Receipt List"})}),f("Inventory","Material Issue List")&&n.jsx("li",{children:n.jsx("a",{href:"/MaterialIssueList",className:p("/MaterialIssueList")?"active":"",children:"Material Issue List"})}),f("Inventory","Material Issue List")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialTransferList",className:p("/MatrialTransferList")?"active":"",children:"Material Transfer List"})})]})]})]})]})})}),h("Invoice")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu7",children:[n.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),v("invoice")},className:["/InvoiceForm","/InvoiceList","/BillingForm","/BillingDisplay"].some(g=>p(g))||e.invoice?"active subdrop":"",children:[n.jsx("i",{className:"ti ti-file-dollar"}),n.jsx("span",{children:"Invoice"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.invoice?"block":"none"},children:[n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),v("vendorBilling")},className:["/InvoiceForm","/InvoiceList"].some(g=>p(g))||e.vendorBilling?"active subdrop":"",children:[n.jsx("span",{children:"Vendor Invoice"}),n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:e.vendorBilling?"block":"none"},children:[f("Invoice","Invoice Form")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceForm",className:p("/InvoiceForm")?"active":"text-black",children:"Vendor Invoice Creation"})}),f("Invoice","Invoice List")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceList",className:p("/InvoiceList")?"active":"",children:"Vendor Invoice List"})}),f("Invoice","Diea Company")&&n.jsx("li",{children:n.jsx("a",{href:"/DieaCompany",className:p("/DieaCompany")?"active":"",children:"Diea Company"})}),f("Invoice","Diea Invoice")&&n.jsx("li",{children:n.jsx("a",{href:"/DieaInvoice",className:p("/DieaInvoice")?"active":"",children:"Diea Invoice"})})]})]}),h("Billing")&&n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),v("billing")},className:["/BillingForm","/BillingDisplay"].some(g=>p(g))||e.billing?"active subdrop":"",children:[n.jsx("span",{children:"Customer Invoice"}),n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:e.billing?"block":"none"},children:[f("Billing","Billing Form")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingForm",className:p("/BillingForm")?"active":"",children:"Customer Invoice Creation"})}),f("Billing","Billing List")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingDisplay",className:p("/BillingDisplay")?"active":"",children:"Customer Invoice List"})})]})]})]})]})})}),h("Accounts")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu8",children:[n.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),v("accounts")},className:["/gst","/Ledger","/PaymentDisplay"].some(g=>p(g))||e.accounts?"active subdrop":"",children:[n.jsx("i",{className:"ti ti-credit-card"}),n.jsx("span",{children:"Accounts"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.accounts?"block":"none"},children:[f("Accounts","GST")&&n.jsx("li",{children:n.jsx("a",{href:"/gst",className:p("/gst")?"active":"",children:"GST"})}),f("Accounts","Ledger")&&n.jsx("li",{children:n.jsx("a",{href:"/Ledger",className:p("/Ledger")?"active":"",children:"Ledger"})}),f("Accounts","Payments")&&n.jsx("li",{children:n.jsx("a",{href:"/PaymentDisplay",className:p("/PaymentDisplay")?"active":"",children:"Payments"})})]})]})})}),h("Dashboard")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu submenu6",children:n.jsxs("a",{target:"_blank",href:"https://ewaybillgst.gov.in/login.aspx",children:[n.jsx("i",{className:"ti ti-smart-home"}),n.jsx("span",{children:"E-Way Bill"})]})})})}),h("CRM")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu9",children:[n.jsxs("a",{href:"#",className:["/contacts","/leads","/proposals","/sources","/lost-reason","/contact-stage","/industry","/calls"].some(g=>p(g))||e.crm?"active subdrop":"",onClick:g=>{g.preventDefault(),v("crm")},children:[n.jsx("i",{className:"ti ti-address-book"}),n.jsx("span",{children:"CRM"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.crm?"block":"none"},children:[f("CRM","Contacts List")&&n.jsx("li",{children:n.jsx("a",{href:"/contacts",className:p("/contacts")?"active":"",children:"Contacts List"})}),f("CRM","Leads")&&n.jsx("li",{children:n.jsx("a",{href:"/leads",className:p("/leads")?"active":"",children:"Leads"})}),f("CRM","Proposals")&&n.jsx("li",{children:n.jsx("a",{href:"/proposals",className:p("/proposals")?"active":"",children:"Proposals"})}),f("CRM","Sources")&&n.jsx("li",{children:n.jsx("a",{href:"/sources",className:p("/sources")?"active":"",children:"Sources"})}),f("CRM","Lost Reason")&&n.jsx("li",{children:n.jsx("a",{href:"/lost-reason",className:p("/lost-reason")?"active":"",children:"Lost Reason"})}),f("CRM","Contact Stage")&&n.jsx("li",{children:n.jsx("a",{href:"/contact-stage",className:p("/contact-stage")?"active":"",children:"Contact Stage"})}),f("CRM","Industry")&&n.jsx("li",{children:n.jsx("a",{href:"/industry",className:p("/industry")?"active":"",children:"Industry"})}),f("CRM","Calls")&&n.jsx("li",{children:n.jsx("a",{href:"/calls",className:p("/calls")?"active":"",children:"Calls"})})]})]})})}),h("Project Management")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu10",children:[n.jsxs("a",{href:"#",className:["/projects","/tasks","/milestones","/time-entries"].some(g=>p(g))||e.project?"active subdrop":"",onClick:g=>{g.preventDefault(),v("project")},children:[n.jsx("i",{className:"ti ti-briefcase"}),n.jsx("span",{children:"Project Management"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.project?"block":"none"},children:[f("Project Management","Projects")&&n.jsx("li",{children:n.jsx("a",{href:"/projects",className:p("/projects")?"active":"",children:"Projects"})}),f("Project Management","Tasks")&&n.jsx("li",{children:n.jsx("a",{href:"/tasks",className:p("/tasks")?"active":"",children:"Tasks"})}),f("Project Management","Milestones")&&n.jsx("li",{children:n.jsx("a",{href:"/milestones",className:p("/milestones")?"active":"",children:"Milestones"})}),f("Project Management","Time Entries")&&n.jsx("li",{children:n.jsx("a",{href:"/time-entries",className:p("/time-entries")?"active":"",children:"Time Entries"})})]})]})})}),h("Campaigns")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu ",children:[n.jsxs("a",{href:"#",className:["/campaigns","/analytics"].some(g=>p(g))||e.campaigns?"active subdrop":"",onClick:g=>{g.preventDefault(),v("campaigns")},children:[n.jsx("i",{className:"ti ti-brand-campaignmonitor"}),"  ",n.jsx("span",{children:"Campaigns"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.campaigns?"block":"none"},children:[f("Campaigns","Campaigns")&&n.jsx("li",{children:n.jsx("a",{href:"/campaigns",className:p("/campaigns")?"active":"",children:"Campaigns"})}),f("Campaigns","Analytics")&&n.jsx("li",{children:n.jsx("a",{href:"/analytics",className:p("/analytics")?"active":"",children:"Analytics"})})]})]})})}),h("HRMS")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu submenu2",children:[n.jsxs("a",{href:"#",className:["/designation","/departments","/employee","/leaverequest","/leavemanagement","/payroll","/attendancereg","/attendancetaking","/attendancereport"].some(g=>p(g))||e.hrms?"active subdrop":"",onClick:g=>{g.preventDefault(),v("hrms")},children:[n.jsx("i",{className:"ti ti-user-circle"}),n.jsx("span",{children:"HRMS"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.hrms?"block":"none"},children:[f("HRMS","Designation")&&n.jsx("li",{children:n.jsx("a",{href:"/designation",className:p("/designation")?"active":"",children:"Designation"})}),f("HRMS","Department")&&n.jsx("li",{children:n.jsx("a",{href:"/departments",className:p("/departments")?"active":"",children:"Departments"})}),f("HRMS","Employee")&&n.jsx("li",{children:n.jsx("a",{href:"/employee",className:p("/employee")?"active":"",children:"Employee"})}),f("HRMS","LeaveRequests")&&n.jsx("li",{children:n.jsx("a",{href:"/leaverequest",className:p("/leaverequest")?"active":"",children:"Leave Request"})}),f("HRMS","LeaveRequestManagement")&&n.jsx("li",{children:n.jsx("a",{href:"/leavemanagement",className:p("/leavemanagement")?"active":"",children:"Leave Management"})}),f("HRMS","Payroll")&&n.jsx("li",{children:n.jsx("a",{href:"/payroll",className:p("/payroll")?"active":"",children:"Payroll"})}),f("HRMS","AttendanceRegister")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancereg",className:p("/attendancereg")?"active":"",children:"Attendance Register"})}),f("HRMS","AttendanceTaking")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancetaking",className:p("/attendancetaking")?"active":"",children:"Attendance Taking"})}),(f("HRMS","AttendanceReports")||r?.email==="ruchithas236@gmail.com")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancereport",className:p("/attendancereport")?"active":"",children:"Attendance Reports"})})]})]})})}),a.length===0&&n.jsx("li",{className:"menu-title",children:n.jsxs("span",{children:["No permissions assigned for role: ",l]})})]})})})]})})};function dae({toggleSidebar:e}){rh();const[t,r]=j.useState(!1),[a,s]=j.useState(!1),i=JSON.parse(localStorage.getItem("user"));console.log("user",i);const o=i?.roles?.map(h=>h.roleName)||[],[l,c]=j.useState(()=>localStorage.getItem("activeRole")||o[0]||"");j.useEffect(()=>{!localStorage.getItem("activeRole")&&o.length>0&&(localStorage.setItem("activeRole",i.roles[0]?.roleName||""),c(o[0]))},[o]),console.log("Active Role:",l);const d=h=>{const f=h.target.value;c(f),localStorage.setItem("activeRole",i.roles[0]?.roleName||"")},u=()=>{localStorage.removeItem("user"),localStorage.removeItem("activeRole"),localStorage.removeItem("openSubmenus"),localStorage.clear(),window.location.href="/login"};return n.jsx("div",{className:"header",children:n.jsxs("div",{className:"main-header",children:[n.jsxs("div",{className:"header-left",children:[n.jsx("a",{href:"index.html",className:"logo",children:n.jsx("h2",{children:"Jyothi Cloud ERP"})}),n.jsx("a",{href:"index.html",className:"dark-logo",children:n.jsx("h2",{children:"Jyothi Cloud ERP"})})]}),n.jsx("a",{id:"mobile_btn",className:"mobile_btn",onClick:h=>{h.preventDefault(),e()},children:n.jsxs("span",{className:"bar-icon",children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]})}),n.jsx("div",{className:"header-user",children:n.jsxs("div",{className:"nav user-menu nav-list",children:[n.jsx("div",{className:"me-auto d-flex align-items-center",id:"header-search"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsxs("div",{className:"me-1 notification_item",children:[n.jsxs("a",{href:"#",className:"btn btn-menubar position-relative me-1",id:"notification_popup","data-bs-toggle":"dropdown",children:[n.jsx("i",{className:"ti ti-bell"}),n.jsx("span",{className:"notification-status-dot"})]}),n.jsxs("div",{className:"dropdown-menu dropdown-menu-end notification-dropdown p-4",children:[n.jsxs("div",{className:"d-flex align-items-center justify-content-between border-bottom p-0 pb-3 mb-3",children:[n.jsx("h4",{className:"notification-title",children:"Notifications (2)"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("a",{href:"#",className:"text-primary fs-15 me-3 lh-1",children:"Mark all as read"}),n.jsxs("div",{className:"dropdown",children:[n.jsxs("a",{href:"javascript:void(0);",className:"bg-white dropdown-toggle","data-bs-toggle":"dropdown",children:[n.jsx("i",{className:"ti ti-calendar-due me-1"}),"Today"]}),n.jsxs("ul",{className:"dropdown-menu mt-2 p-3",children:[n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"This Week"})}),n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Week"})}),n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Month"})})]})]})]})]}),n.jsx("div",{className:"noti-content",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-27.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("span",{className:"text-dark fw-semibold",children:"Shawn"})," performance in Math is below the threshold."]}),n.jsx("span",{children:"Just Now"})]})]})})}),n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",className:"pb-0",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-23.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("span",{className:"text-dark fw-semibold",children:"Sylvia"})," added appointment on 02:00 PM"]}),n.jsx("span",{children:"10 mins ago"}),n.jsxs("div",{className:"d-flex justify-content-start align-items-center mt-1",children:[n.jsx("span",{className:"btn btn-light btn-sm me-2",children:"Deny"}),n.jsx("span",{className:"btn btn-primary btn-sm",children:"Approve"})]})]})]})})}),n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-25.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:["New student record ",n.jsx("span",{className:"text-dark fw-semibold",children:" George"})," is created by ",n.jsx("span",{className:"text-dark fw-semibold",children:"Teressa"})]}),n.jsx("span",{children:"2 hrs ago"})]})]})})}),n.jsx("div",{className:"border-0 mb-3 pb-0",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-01.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:["A new teacher record for ",n.jsx("span",{className:"text-dark fw-semibold",children:"Elisa"})," "]}),n.jsx("span",{children:"09:45 AM"})]})]})})})]})}),n.jsxs("div",{className:"d-flex p-0",children:[n.jsx("a",{href:"#",className:"btn btn-light w-100 me-2",children:"Cancel"}),n.jsx("a",{href:"activity.html",className:"btn btn-primary w-100",children:"View All"})]})]})]}),n.jsxs("div",{className:"dropdown profile-dropdown",children:[n.jsx("a",{href:"javascript:void(0);",className:"dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",children:n.jsx("span",{className:"avatar avatar-sm online",children:n.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"Img",className:"img-fluid rounded-circle"})})}),n.jsx("div",{className:"dropdown-menu shadow-none",children:n.jsxs("div",{className:"card mb-0",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{className:"avatar avatar-lg me-2 avatar-rounded",children:n.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"img"})}),n.jsxs("div",{children:[n.jsx("h5",{className:"mb-0",children:i?.username||"User"}),n.jsxs("p",{className:"fs-12 fw-medium mb-0",children:["Active Role: ",n.jsx("strong",{children:l})," "]})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",children:[n.jsx("label",{className:"mb-1 fw-medium",children:"Switch Role"}),n.jsx("select",{className:"form-select form-select-sm",value:l,onChange:d,children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/profile",children:[n.jsx("i",{className:"isax isax-profile-circle me-2"}),"Profile Settings"]}),n.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/reports",children:[n.jsx("i",{className:"isax isax-document-text me-2"}),"Reports"]}),n.jsxs("div",{className:"form-check form-switch form-check-reverse d-flex align-items-center justify-content-between dropdown-item mb-0",children:[n.jsxs("label",{className:"form-check-label",htmlFor:"notify",children:[n.jsx("i",{className:"isax isax-notification me-2"}),"Notifications"]}),n.jsx("input",{className:"form-check-input",type:"checkbox",id:"notify"})]})]}),n.jsx("div",{className:"card-footer",children:n.jsxs("button",{className:"dropdown-item logout d-flex align-items-center",onClick:u,style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[n.jsx("i",{className:"isax isax-logout me-2"}),"Sign Out"]})})]})})]})]})]})}),n.jsxs("div",{className:"dropdown mobile-user-menu",children:[n.jsx("a",{href:"javascript:void(0);",className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:n.jsx("i",{className:"fa fa-ellipsis-v"})}),n.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[n.jsx("a",{className:"dropdown-item",href:"profile.html",children:"My Profile"}),n.jsx("a",{className:"dropdown-item",href:"profile-settings.html",children:"Settings"}),n.jsx("a",{className:"dropdown-item",onClick:u,children:"Logout"})]})]})]})})}const uae=({children:e})=>(()=>{const r=localStorage.getItem("user");return r&&r!=="null"&&r!=="undefined"})()?e:n.jsx(Xee,{to:"/login",replace:!0});function eV(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=eV(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function aa(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=eV(e))&&(a&&(a+=" "),a+=t);return a}var tE={},rE={},IR;function hae(){return IR||(IR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(rE)),rE}var aE={},PR;function tV(){return PR||(PR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(aE)),aE}var nE={},OR;function rV(){return OR||(OR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(nE)),nE}var sE={},MR;function q3(){return MR||(MR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],s=r.length;if(s===0)return a;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<s;){const d=r[i];l?d==="\\"&&i+1<s?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,a.push(o),o=""):o+=d:d==="["?(c=!0,o&&(a.push(o),o="")):d==="."?o&&(a.push(o),o=""):o+=d,i++}return o&&a.push(o),a}e.toPath=t}(sE)),sE}var RR;function z3(){return RR||(RR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hae(),r=tV(),a=rV(),s=q3();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(tE)),tE}var iE,FR;function fae(){return FR||(FR=1,iE=z3().get),iE}var mae=fae();const zm=Kc(mae);var oE={exports:{}},En={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function pae(){if(LR)return En;LR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case a:case c:case d:case f:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case h:case u:return g;case i:return g;default:return b}}case t:return b}}}return En.ContextConsumer=i,En.ContextProvider=o,En.Element=e,En.ForwardRef=l,En.Fragment=r,En.Lazy=h,En.Memo=u,En.Portal=t,En.Profiler=s,En.StrictMode=a,En.Suspense=c,En.SuspenseList=d,En.isContextConsumer=function(g){return v(g)===i},En.isContextProvider=function(g){return v(g)===o},En.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},En.isForwardRef=function(g){return v(g)===l},En.isFragment=function(g){return v(g)===r},En.isLazy=function(g){return v(g)===h},En.isMemo=function(g){return v(g)===u},En.isPortal=function(g){return v(g)===t},En.isProfiler=function(g){return v(g)===s},En.isStrictMode=function(g){return v(g)===a},En.isSuspense=function(g){return v(g)===c},En.isSuspenseList=function(g){return v(g)===d},En.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},En.typeOf=v,En}var BR;function xae(){return BR||(BR=1,oE.exports=pae()),oE.exports}var vae=xae(),Bi=e=>e===0?0:e>0?1:-1,yl=e=>typeof e=="number"&&e!=+e,rx=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Er=e=>(typeof e=="number"||e instanceof Number)&&!yl(e),Xu=e=>Er(e)||typeof e=="string",gae=0,Dx=e=>{var t=++gae;return"".concat(e||"").concat(t)},el=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Er(t)&&typeof t!="string")return a;var i;if(rx(t)){if(r==null)return a;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return yl(i)&&(i=a),s&&r!=null&&i>r&&(i=r),i},aV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},km=(e,t)=>Er(e)&&Er(t)?r=>e+r*(t-e):()=>t;function zv(e,t,r){return Er(e)&&Er(t)?e+r*(t-e):t}function nV(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):zm(a,t))===r)}var Fn=e=>e===null||typeof e>"u",h1=e=>Fn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),bae=["viewBox","children"],yae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],UR=["points","pathLength"],lE={svg:bae,polygon:UR,polyline:UR},H3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],W3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(s=>{H3.includes(s)&&(a[s]=i=>r[s](r,i))}),a},jae=(e,t,r)=>a=>(e(t,r,a),null),f1=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];H3.includes(s)&&typeof i=="function"&&(a||(a={}),a[s]=jae(i,t,r))}),a},$R=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",VR=null,cE=null,sV=e=>{if(e===VR&&Array.isArray(cE))return cE;var t=[];return j.Children.forEach(e,r=>{Fn(r)||(vae.isFragment(r)?t=t.concat(sV(r.props.children)):t.push(r))}),cE=t,VR=e,t};function m1(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(s=>$R(s)):a=[$R(t)],sV(e).forEach(s=>{var i=zm(s,"type.displayName")||zm(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}var iV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Nae=(e,t,r,a)=>{var s,i=(s=a&&lE?.[a])!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(a&&i.includes(t)||yae.includes(t))||r&&H3.includes(t)},Ta=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(j.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(i=>{var o;Nae((o=a)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=a[i])}),s},wae=["children","width","height","viewBox","className","style","title","desc"];function A5(){return A5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A5.apply(null,arguments)}function Sae(e,t){if(e==null)return{};var r,a,s=Cae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Cae(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var G3=j.forwardRef((e,t)=>{var{children:r,width:a,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=Sae(e,wae),h=i||{width:a,height:s,x:0,y:0},f=aa("recharts-surface",o);return j.createElement("svg",A5({},Ta(u,!0,"svg"),{className:f,width:a,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),j.createElement("title",null,c),j.createElement("desc",null,d),r)}),kae=["children","className"];function T5(){return T5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T5.apply(null,arguments)}function Eae(e,t){if(e==null)return{};var r,a,s=_ae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _ae(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ys=j.forwardRef((e,t)=>{var{children:r,className:a}=e,s=Eae(e,kae),i=aa("recharts-layer",a);return j.createElement("g",T5({className:i},Ta(s,!0),{ref:t}),r)}),oV=j.createContext(null),Dae=()=>j.useContext(oV);function Rn(e){return function(){return e}}const lV=Math.cos,Nw=Math.sin,Bd=Math.sqrt,ww=Math.PI,bS=2*ww,I5=Math.PI,P5=2*I5,zp=1e-6,Aae=P5-zp;function cV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Tae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cV;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Iae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cV:Tae(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>zp)if(!(Math.abs(h*c-d*u)>zp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-o,v=s-l,g=c*c+d*d,b=p*p+v*v,y=Math.sqrt(g),S=Math.sqrt(f),w=i*Math.tan((I5-Math.acos((g+f-b)/(2*y*S)))/2),k=w/S,C=w/y;Math.abs(k-1)>zp&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+C*c},${this._y1=r+C*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>zp||Math.abs(this._y1-u)>zp)&&this._append`L${d},${u}`,a&&(f<0&&(f=f%P5+P5),f>Aae?this._append`A${a},${a},0,1,${h},${t-l},${r-c}A${a},${a},0,1,${h},${this._x1=d},${this._y1=u}`:f>zp&&this._append`A${a},${a},0,${+(f>=I5)},${h},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Y3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Iae(t)}function K3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dV(e){this._context=e}dV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yS(e){return new dV(e)}function uV(e){return e[0]}function hV(e){return e[1]}function fV(e,t){var r=Rn(!0),a=null,s=yS,i=null,o=Y3(l);e=typeof e=="function"?e:e===void 0?uV:Rn(e),t=typeof t=="function"?t:t===void 0?hV:Rn(t);function l(c){var d,u=(c=K3(c)).length,h,f=!1,p;for(a==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Rn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Rn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Rn(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function Kj(e,t,r){var a=null,s=Rn(!0),i=null,o=yS,l=null,c=Y3(d);e=typeof e=="function"?e:e===void 0?uV:Rn(+e),t=typeof t=="function"?t:Rn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hV:Rn(+r);function d(h){var f,p,v,g=(h=K3(h)).length,b,y=!1,S,w=new Array(g),k=new Array(g);for(i==null&&(l=o(S=c())),f=0;f<=g;++f){if(!(f<g&&s(b=h[f],f,h))===y)if(y=!y)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=p;--v)l.point(w[v],k[v]);l.lineEnd(),l.areaEnd()}y&&(w[f]=+e(b,f,h),k[f]=+t(b,f,h),l.point(a?+a(b,f,h):w[f],r?+r(b,f,h):k[f]))}if(S)return l=null,S+""||null}function u(){return fV().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),a=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),d):e},d.x1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:Rn(+h),d):a},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Rn(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Rn(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class mV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Pae(e){return new mV(e,!0)}function Oae(e){return new mV(e,!1)}const X3={draw(e,t){const r=Bd(t/ww);e.moveTo(r,0),e.arc(0,0,r,0,bS)}},Mae={draw(e,t){const r=Bd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},pV=Bd(1/3),Rae=pV*2,Fae={draw(e,t){const r=Bd(t/Rae),a=r*pV;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},Lae={draw(e,t){const r=Bd(t),a=-r/2;e.rect(a,a,r,r)}},Bae=.8908130915292852,xV=Nw(ww/10)/Nw(7*ww/10),Uae=Nw(bS/10)*xV,$ae=-lV(bS/10)*xV,Vae={draw(e,t){const r=Bd(t*Bae),a=Uae*r,s=$ae*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=bS*i/5,l=lV(o),c=Nw(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},dE=Bd(3),qae={draw(e,t){const r=-Bd(t/(dE*3));e.moveTo(0,r*2),e.lineTo(-dE*r,-r),e.lineTo(dE*r,-r),e.closePath()}},kc=-.5,Ec=Bd(3)/2,O5=1/Bd(12),zae=(O5/2+1)*3,Hae={draw(e,t){const r=Bd(t/zae),a=r/2,s=r*O5,i=a,o=r*O5+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(kc*a-Ec*s,Ec*a+kc*s),e.lineTo(kc*i-Ec*o,Ec*i+kc*o),e.lineTo(kc*l-Ec*c,Ec*l+kc*c),e.lineTo(kc*a+Ec*s,kc*s-Ec*a),e.lineTo(kc*i+Ec*o,kc*o-Ec*i),e.lineTo(kc*l+Ec*c,kc*c-Ec*l),e.closePath()}};function Wae(e,t){let r=null,a=Y3(s);e=typeof e=="function"?e:Rn(e||X3),t=typeof t=="function"?t:Rn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Rn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Rn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Sw(){}function Cw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function vV(e){this._context=e}vV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gae(e){return new vV(e)}function gV(e){this._context=e}gV.prototype={areaStart:Sw,areaEnd:Sw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yae(e){return new gV(e)}function bV(e){this._context=e}bV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kae(e){return new bV(e)}function yV(e){this._context=e}yV.prototype={areaStart:Sw,areaEnd:Sw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Xae(e){return new yV(e)}function qR(e){return e<0?-1:1}function zR(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(qR(i)+qR(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function HR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function uE(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function kw(e){this._context=e}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uE(this,this._t0,HR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uE(this,HR(this,r=zR(this,e,t)),r);break;default:uE(this,this._t0,r=zR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function jV(e){this._context=new NV(e)}(jV.prototype=Object.create(kw.prototype)).point=function(e,t){kw.prototype.point.call(this,t,e)};function NV(e){this._context=e}NV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function Qae(e){return new kw(e)}function Jae(e){return new jV(e)}function wV(e){this._context=e}wV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=WR(e),s=WR(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WR(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Zae(e){return new wV(e)}function jS(e,t){this._context=e,this._t=t}jS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ene(e){return new jS(e,.5)}function tne(e){return new jS(e,0)}function rne(e){return new jS(e,1)}function $0(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function M5(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ane(e,t){return e[t]}function nne(e){const t=[];return t.key=e,t}function sne(){var e=Rn([]),t=M5,r=$0,a=ane;function s(i){var o=Array.from(e.apply(this,arguments),nne),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(h,o[l].key,d,i)]).data=h;for(l=0,u=K3(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Rn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Rn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?M5:typeof i=="function"?i:Rn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??$0,s):r},s}function ine(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}$0(e,t)}}function one(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}$0(e,t)}}function lne(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[a][1]||0,f=u[a-1][1]||0,p=(h-f)/2,v=0;v<l;++v){var g=e[t[v]],b=g[a][1]||0,y=g[a-1][1]||0;p+=b-y}c+=h,d+=p*h}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,$0(e,t)}}var cne=["type","size","sizeType"];function R5(){return R5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R5.apply(null,arguments)}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function YR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(a){dne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dne(e,t,r){return(t=une(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function une(e){var t=hne(e,"string");return typeof t=="symbol"?t:t+""}function hne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fne(e,t){if(e==null)return{};var r,a,s=mne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mne(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var SV={symbolCircle:X3,symbolCross:Mae,symbolDiamond:Fae,symbolSquare:Lae,symbolStar:Vae,symbolTriangle:qae,symbolWye:Hae},pne=Math.PI/180,xne=e=>{var t="symbol".concat(h1(e));return SV[t]||X3},vne=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*pne;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gne=(e,t)=>{SV["symbol".concat(h1(e))]=t},Q3=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,s=fne(e,cne),i=YR(YR({},s),{},{type:t,size:r,sizeType:a}),o=()=>{var h=xne(t),f=Wae().type(h).size(vne(r,a,t));return f()},{className:l,cx:c,cy:d}=i,u=Ta(i,!0);return c===+c&&d===+d&&r===+r?j.createElement("path",R5({},u,{className:aa("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};Q3.registerSymbol=gne;function F5(){return F5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F5.apply(null,arguments)}function KR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(r),!0).forEach(function(a){J3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function J3(e,t,r){return(t=yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yne(e){var t=jne(e,"string");return typeof t=="symbol"?t:t+""}function jne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _c=32;class Z3 extends j.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,s=_c/2,i=_c/6,o=_c/3,l=t.inactive?a:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:_c,y2:s,className:"recharts-legend-icon"});if(c==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(_c,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return j.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_c/8,"h").concat(_c,"v").concat(_c*3/4,"h").concat(-_c,"z"),className:"recharts-legend-icon"});if(j.isValidElement(t.legendIcon)){var d=bne({},t);return delete d.legendIcon,j.cloneElement(t.legendIcon,d)}return j.createElement(Q3,{fill:l,cx:s,cy:s,size:_c,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:_c,height:_c},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=aa({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,g=f?f(u.value,u,h):u.value;return j.createElement("li",F5({className:p,style:c,key:"legend-item-".concat(h)},f1(this.props,u,h)),j.createElement(G3,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}J3(Z3,"displayName","Legend");J3(Z3,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var hE={},fE={},XR;function Nne(){return XR||(XR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=a(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t}(fE)),fE}var mE={},QR;function CV(){return QR||(QR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(mE)),mE}var pE={},xE={},vE={},JR;function wne(){return JR||(JR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(vE)),vE}var ZR;function eT(){return ZR||(ZR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wne();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(xE)),xE}var gE={},eF;function Sne(){return eF||(eF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(gE)),gE}var tF;function Cne(){return tF||(tF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eT(),r=Sne();function a(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a}(pE)),pE}var bE={},yE={},rF;function kne(){return rF||(rF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z3();function r(a){return function(s){return t.get(s,a)}}e.property=r}(yE)),yE}var jE={},NE={},wE={},SE={},aF;function kV(){return aF||(aF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(SE)),SE}var CE={},nF;function EV(){return nF||(nF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(CE)),CE}var kE={},sF;function tT(){return sF||(sF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(kE)),kE}var iF;function Ene(){return iF||(iF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=kV(),a=EV(),s=tT();function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function v(g,b,y,S,w,k){const C=p(g,b,y,S,w,k);return C!==void 0?!!C:o(g,b,v,k)},new Map)}function o(h,f,p,v){if(f===h)return!0;switch(typeof f){case"object":return l(h,f,p,v);case"function":return Object.keys(f).length>0?o(h,{...f},p,v):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function l(h,f,p,v){if(f==null)return!0;if(Array.isArray(f))return d(h,f,p,v);if(f instanceof Map)return c(h,f,p,v);if(f instanceof Set)return u(h,f,p,v);const g=Object.keys(f);if(h==null)return g.length===0;if(g.length===0)return!0;if(v&&v.has(f))return v.get(f)===h;v&&v.set(f,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!a.isPrimitive(h)&&!(y in h)||f[y]===void 0&&h[y]!==void 0||f[y]===null&&h[y]!==null||!p(h[y],f[y],y,h,f,v))return!1}return!0}finally{v&&v.delete(f)}}function c(h,f,p,v){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of f.entries()){const y=h.get(g);if(p(y,b,g,h,f,v)===!1)return!1}return!0}function d(h,f,p,v){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<f.length;b++){const y=f[b];let S=!1;for(let w=0;w<h.length;w++){if(g.has(w))continue;const k=h[w];let C=!1;if(p(k,y,b,h,f,v)&&(C=!0),C){g.add(w),S=!0;break}}if(!S)return!1}return!0}function u(h,f,p,v){return f.size===0?!0:h instanceof Set?d([...h],[...f],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(wE)),wE}var oF;function rT(){return oF||(oF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ene();function r(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=r}(NE)),NE}var EE={},_E={},DE={},lF;function _V(){return lF||(lF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(DE)),DE}var AE={},cF;function aT(){return cF||(cF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(AE)),AE}var TE={},dF;function nT(){return dF||(dF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",v="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]",k="[object BigUint64Array]",C="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",I="[object Float32Array]",F="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=I,e.float64ArrayTag=F,e.functionTag=h,e.int16ArrayTag=_,e.int32ArrayTag=E,e.int8ArrayTag=C,e.mapTag=c,e.numberTag=a,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=S,e.uint32ArrayTag=w,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(TE)),TE}var IE={},uF;function _ne(){return uF||(uF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(IE)),IE}var hF;function DV(){return hF||(hF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_V(),r=aT(),a=nT(),s=EV(),i=_ne();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,f,p=new Map,v=void 0){const g=v?.(u,h,f,p);if(g!=null)return g;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,S]of u)b.set(y,l(S,y,f,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,f,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,f,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,f,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,f,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,f,p,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,f,p,v),b}return u}function c(u,h,f=u,p,v){const g=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],S=Object.getOwnPropertyDescriptor(u,y);(S==null||S.writable)&&(u[y]=l(h[y],y,f,p,v))}}function d(u){switch(r.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(_E)),_E}var fF;function Dne(){return fF||(fF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DV();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(EE)),EE}var mF;function Ane(){return mF||(mF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=Dne();function a(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a}(jE)),jE}var PE={},OE={},ME={},pF;function Tne(){return pF||(pF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DV(),r=nT();function a(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!=null)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=a}(ME)),ME}var xF;function Ine(){return xF||(xF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tne();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(OE)),OE}var RE={},FE={},vF;function AV(){return vF||(vF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(FE)),FE}var LE={},gF;function Pne(){return gF||(gF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aT();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(LE)),LE}var bF;function One(){return bF||(bF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tV(),r=AV(),a=Pne(),s=q3();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||a.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(RE)),RE}var yF;function Mne(){return yF||(yF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=rV(),a=Ine(),s=z3(),i=One();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=a.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(PE)),PE}var jF;function Rne(){return jF||(jF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CV(),r=kne(),a=Ane(),s=Mne();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(bE)),bE}var NF;function Fne(){return NF||(NF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nne(),r=CV(),a=Cne(),s=Rne();function i(o,l=r.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i}(hE)),hE}var BE,wF;function Lne(){return wF||(wF=1,BE=Fne().uniqBy),BE}var Bne=Lne();const SF=Kc(Bne);function TV(e,t,r){return t===!0?SF(e,r):typeof t=="function"?SF(e,t):e}var UE={exports:{}},$E={},VE={exports:{}},qE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CF;function Une(){if(CF)return qE;CF=1;var e=dg();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,f){var p=f(),v=a({inst:{value:p,getSnapshot:f}}),g=v[0].inst,b=v[1];return i(function(){g.value=p,g.getSnapshot=f,c(g)&&b({inst:g})},[h,p,f]),s(function(){return c(g)&&b({inst:g}),h(function(){c(g)&&b({inst:g})})},[h]),o(p),p}function c(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function d(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return qE.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,qE}var kF;function $ne(){return kF||(kF=1,VE.exports=Une()),VE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EF;function Vne(){if(EF)return $E;EF=1;var e=dg(),t=$ne();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return $E.useSyncExternalStoreWithSelector=function(d,u,h,f,p){var v=i(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=l(function(){function y(_){if(!S){if(S=!0,w=_,_=f(_),p!==void 0&&g.hasValue){var E=g.value;if(p(E,_))return k=E}return k=_}if(E=k,a(w,_))return E;var T=f(_);return p!==void 0&&p(E,T)?(w=_,E):(w=_,k=T)}var S=!1,w,k,C=h===void 0?null:h;return[function(){return y(u())},C===null?void 0:function(){return y(C())}]},[u,h,f,p]);var b=s(d,v[0],v[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),c(b),b},$E}var _F;function qne(){return _F||(_F=1,UE.exports=Vne()),UE.exports}var zne=qne(),sT=j.createContext(null),Hne=e=>e,ss=()=>{var e=j.useContext(sT);return e?e.store.dispatch:Hne},rw=()=>{},Wne=()=>rw,Gne=(e,t)=>e===t;function Mr(e){var t=j.useContext(sT);return zne.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Wne,t?t.store.getState:rw,t?t.store.getState:rw,t?e:rw,Gne)}function Yne(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Kne(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Xne(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var DF=e=>Array.isArray(e)?e:[e];function Qne(e){const t=Array.isArray(e[0])?e[0]:e;return Xne(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Jne(e,t){const r=[],{length:a}=e;for(let s=0;s<a;s++)r.push(e[s].apply(null,t));return r}var Zne=class{constructor(e){this.value=e}deref(){return this.value}},ese=typeof WeakRef<"u"?WeakRef:Zne,tse=0,AF=1;function Xj(){return{s:tse,v:void 0,o:null,p:null}}function IV(e,t={}){let r=Xj();const{resultEqualityCheck:a}=t;let s,i=0;function o(){let l=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const g=v.get(p);g===void 0?(l=Xj(),v.set(p,l)):l=g}else{let v=l.p;v===null&&(l.p=v=new Map);const g=v.get(p);g===void 0?(l=Xj(),v.set(p,l)):l=g}}const d=l;let u;if(l.s===AF)u=l.v;else if(u=e.apply(null,arguments),i++,a){const h=s?.deref?.()??s;h!=null&&a(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new ese(u):u}return d.s=AF,d.v=u,u}return o.clearCache=()=>{r=Xj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function rse(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),Yne(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:p=IV,argsMemoizeOptions:v=[]}=u,g=DF(f),b=DF(v),y=Qne(s),S=h(function(){return i++,d.apply(null,arguments)},...g),w=p(function(){o++;const C=Jne(y,arguments);return l=S.apply(null,C),l},...b);return Object.assign(w,{resultFunc:d,memoizedResultFunc:S,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(a,{withTypes:()=>a}),a}var Ut=rse(IV),ase=Object.assign((e,t=Ut)=>{Kne(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>ase}),zE={},HE={},WE={},TF;function nse(){return TF||(TF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,s,i)=>{if(a!==s){const o=t(a),l=t(s);if(o===l&&o===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(WE)),WE}var GE={},YE={},IF;function PV(){return IF||(IF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(YE)),YE}var PF;function sse(){return PF||(PF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PV(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s}(GE)),GE}var OF;function ise(){return OF||(OF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse(),r=sse(),a=q3();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,v)=>{let g=p;for(let b=0;b<v.length&&g!=null;++b)g=g[v[b]];return g},u=(p,v)=>v==null||p==null?v:typeof p=="object"&&"key"in p?Object.hasOwn(v,p.key)?v[p.key]:d(v,p.path):typeof p=="function"?p(v):Array.isArray(p)?d(v,p):typeof v=="object"?v[p]:v,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:a.toPath(p)}));return i.map(p=>({original:p,criteria:h.map(v=>u(v,p))})).slice().sort((p,v)=>{for(let g=0;g<h.length;g++){const b=t.compareValues(p.criteria[g],v.criteria[g],l[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s}(HE)),HE}var KE={},MF;function ose(){return MF||(MF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const s=[],i=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t}(KE)),KE}var XE={},RF;function OV(){return RF||(RF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AV(),r=eT(),a=kV(),s=tT();function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i}(XE)),XE}var FF;function lse(){return FF||(FF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ise(),r=ose(),a=OV();function s(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s}(zE)),zE}var QE,LF;function cse(){return LF||(LF=1,QE=lse().sortBy),QE}var dse=cse();const NS=Kc(dse);var MV=e=>e.legend.settings,use=e=>e.legend.size,hse=e=>e.legend.payload,fse=Ut([hse,MV],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?NS(a,r):a});function mse(){return Mr(fse)}var Qj=1;function RV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=j.useState({height:0,left:0,top:0,width:0}),a=j.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Qj||Math.abs(o.left-t.left)>Qj||Math.abs(o.top-t.top)>Qj||Math.abs(o.width-t.width)>Qj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Zi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var pse=typeof Symbol=="function"&&Symbol.observable||"@@observable",BF=pse,JE=()=>Math.random().toString(36).substring(7).split("").join("."),xse={INIT:`@@redux/INIT${JE()}`,REPLACE:`@@redux/REPLACE${JE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${JE()}`},Ew=xse;function iT(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function FV(e,t,r){if(typeof e!="function")throw new Error(Zi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Zi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Zi(1));return r(FV)(e,t)}let a=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(Zi(3));return s}function h(b){if(typeof b!="function")throw new Error(Zi(4));if(c)throw new Error(Zi(5));let y=!0;d();const S=l++;return o.set(S,b),function(){if(y){if(c)throw new Error(Zi(6));y=!1,d(),o.delete(S),i=null}}}function f(b){if(!iT(b))throw new Error(Zi(7));if(typeof b.type>"u")throw new Error(Zi(8));if(typeof b.type!="string")throw new Error(Zi(17));if(c)throw new Error(Zi(9));try{c=!0,s=a(s,b)}finally{c=!1}return(i=o).forEach(S=>{S()}),b}function p(b){if(typeof b!="function")throw new Error(Zi(10));a=b,f({type:Ew.REPLACE})}function v(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Zi(11));function S(){const k=y;k.next&&k.next(u())}return S(),{unsubscribe:b(S)}},[BF](){return this}}}return f({type:Ew.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[BF]:v}}function vse(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ew.INIT})>"u")throw new Error(Zi(12));if(typeof r(void 0,{type:Ew.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zi(13))})}function LV(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let s;try{vse(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<a.length;u++){const h=a[u],f=r[h],p=o[h],v=f(p,l);if(typeof v>"u")throw l&&l.type,new Error(Zi(14));d[h]=v,c=c||v!==p}return c=c||a.length!==Object.keys(o).length,c?d:o}}function _w(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function gse(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(Zi(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=_w(...l)(s.dispatch),{...s,dispatch:i}}}function BV(e){return iT(e)&&"type"in e&&typeof e.type=="string"}var UV=Symbol.for("immer-nothing"),UF=Symbol.for("immer-draftable"),lc=Symbol.for("immer-state");function kd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var V0=Object.getPrototypeOf;function Ax(e){return!!e&&!!e[lc]}function of(e){return e?$V(e)||Array.isArray(e)||!!e[UF]||!!e.constructor?.[UF]||SS(e)||CS(e):!1}var bse=Object.prototype.constructor.toString();function $V(e){if(!e||typeof e!="object")return!1;const t=V0(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===bse}function Dw(e,t){wS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function wS(e){const t=e[lc];return t?t.type_:Array.isArray(e)?1:SS(e)?2:CS(e)?3:0}function L5(e,t){return wS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function VV(e,t,r){const a=wS(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function yse(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function SS(e){return e instanceof Map}function CS(e){return e instanceof Set}function Hp(e){return e.copy_||e.base_}function B5(e,t){if(SS(e))return new Map(e);if(CS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=$V(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[lc];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const o=s[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(V0(e),a)}else{const a=V0(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function oT(e,t=!1){return kS(e)||Ax(e)||!of(e)||(wS(e)>1&&(e.set=e.add=e.clear=e.delete=jse),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>oT(a,!0))),e}function jse(){kd(2)}function kS(e){return Object.isFrozen(e)}var Nse={};function Tx(e){const t=Nse[e];return t||kd(0,e),t}var jy;function qV(){return jy}function wse(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $F(e,t){t&&(Tx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function U5(e){$5(e),e.drafts_.forEach(Sse),e.drafts_=null}function $5(e){e===jy&&(jy=e.parent_)}function VF(e){return jy=wse(jy,e)}function Sse(e){const t=e[lc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function qF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[lc].modified_&&(U5(t),kd(4)),of(e)&&(e=Aw(t,e),t.parent_||Tw(t,e)),t.patches_&&Tx("Patches").generateReplacementPatches_(r[lc].base_,e,t.patches_,t.inversePatches_)):e=Aw(t,r,[]),U5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==UV?e:void 0}function Aw(e,t,r){if(kS(t))return t;const a=t[lc];if(!a)return Dw(t,(s,i)=>zF(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Tw(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),Dw(i,(l,c)=>zF(e,a,s,l,c,r,o)),Tw(e,s,!1),r&&e.patches_&&Tx("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function zF(e,t,r,a,s,i,o){if(Ax(s)){const l=i&&t&&t.type_!==3&&!L5(t.assigned_,a)?i.concat(a):void 0,c=Aw(e,s,l);if(VV(r,a,c),Ax(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(of(s)&&!kS(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Aw(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&Tw(e,s)}}function Tw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&oT(t,r)}function Cse(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:qV(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=lT;r&&(s=[a],i=Ny);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return a.draft_=l,a.revoke_=o,l}var lT={get(e,t){if(t===lc)return e;const r=Hp(e);if(!L5(r,t))return kse(e,r,t);const a=r[t];return e.finalized_||!of(a)?a:a===ZE(e.base_,t)?(e_(e),e.copy_[t]=q5(a,e)):a},has(e,t){return t in Hp(e)},ownKeys(e){return Reflect.ownKeys(Hp(e))},set(e,t,r){const a=zV(Hp(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=ZE(Hp(e),t),i=s?.[lc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(yse(r,s)&&(r!==void 0||L5(e.base_,t)))return!0;e_(e),V5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ZE(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,e_(e),V5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Hp(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){kd(11)},getPrototypeOf(e){return V0(e.base_)},setPrototypeOf(){kd(12)}},Ny={};Dw(lT,(e,t)=>{Ny[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ny.deleteProperty=function(e,t){return Ny.set.call(this,e,t,void 0)};Ny.set=function(e,t,r){return lT.set.call(this,e[0],t,r,e[0])};function ZE(e,t){const r=e[lc];return(r?Hp(r):e)[t]}function kse(e,t,r){const a=zV(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function zV(e,t){if(!(t in e))return;let r=V0(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=V0(r)}}function V5(e){e.modified_||(e.modified_=!0,e.parent_&&V5(e.parent_))}function e_(e){e.copy_||(e.copy_=B5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ese=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&kd(6),a!==void 0&&typeof a!="function"&&kd(7);let s;if(of(t)){const i=VF(this),o=q5(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?U5(i):$5(i)}return $F(i,a),qF(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===UV&&(s=void 0),this.autoFreeze_&&oT(s,!0),a){const i=[],o=[];Tx("Patches").generateReplacementPatches_(t,s,i,o),a(i,o)}return s}else kd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,s;return[this.produce(t,r,(o,l)=>{a=o,s=l}),a,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){of(e)||kd(8),Ax(e)&&(e=Yh(e));const t=VF(this),r=q5(e,void 0);return r[lc].isManual_=!0,$5(t),r}finishDraft(e,t){const r=e&&e[lc];(!r||!r.isManual_)&&kd(9);const{scope_:a}=r;return $F(a,t),qF(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=Tx("Patches").applyPatches_;return Ax(e)?a(e,t):this.produce(e,s=>a(s,t))}};function q5(e,t){const r=SS(e)?Tx("MapSet").proxyMap_(e,t):CS(e)?Tx("MapSet").proxySet_(e,t):Cse(e,t);return(t?t.scope_:qV()).drafts_.push(r),r}function Yh(e){return Ax(e)||kd(10,e),HV(e)}function HV(e){if(!of(e)||kS(e))return e;const t=e[lc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=B5(e,t.scope_.immer_.useStrictShallowCopy_)}else r=B5(e,!0);return Dw(r,(a,s)=>{VV(r,a,HV(s))}),t&&(t.finalized_=!1),r}var cc=new Ese,WV=cc.produce;cc.produceWithPatches.bind(cc);cc.setAutoFreeze.bind(cc);cc.setUseStrictShallowCopy.bind(cc);cc.applyPatches.bind(cc);cc.createDraft.bind(cc);cc.finishDraft.bind(cc);function GV(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var _se=GV(),Dse=GV,Ase=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_w:_w.apply(null,arguments)};function Hc(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(nc(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>BV(a)&&a.type===e,r}var YV=class Xb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xb.prototype)}static get[Symbol.species](){return Xb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xb(...t[0].concat(this)):new Xb(...t.concat(this))}};function HF(e){return of(e)?WV(e,()=>{}):e}function Jj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Tse(e){return typeof e=="boolean"}var Ise=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new YV;return r&&(Tse(r)?o.push(_se):o.push(Dse(r.extraArgument))),o},Pse="RTK_autoBatch",WF=e=>t=>{setTimeout(t,e)},Ose=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WF(10):e.type==="callback"?e.queueNotification:WF(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const h=()=>s&&u(),f=a.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){try{return s=!u?.meta?.[Pse],i=!s,i&&(o||(o=!0,c(d))),a.dispatch(u)}finally{s=!0}}})},Mse=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new YV(e);return a&&s.push(Ose(typeof a=="object"?a:void 0)),s};function Rse(e){const t=Ise(),{reducer:r=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(iT(r))l=LV(r);else throw new Error(nc(1));let c;typeof a=="function"?c=a(t):c=t();let d=_w;s&&(d=Ase({trace:!1,...typeof s=="object"&&s}));const u=gse(...c),h=Mse(u);let f=typeof o=="function"?o(h):h();const p=d(...f);return FV(l,i,p)}function KV(e){const t={},r=[];let a;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(nc(28));if(l in t)throw new Error(nc(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function Fse(e){return typeof e=="function"}function Lse(e,t){let[r,a,s]=KV(t),i;if(Fse(e))i=()=>HF(e());else{const l=HF(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...a.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(Ax(u)){const p=h(u,c);return p===void 0?u:p}else{if(of(u))return WV(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=i,o}var Bse="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Use=(e=21)=>{let t="",r=e;for(;r--;)t+=Bse[Math.random()*64|0];return t},$se=Symbol.for("rtk-slice-createasyncthunk");function Vse(e,t){return`${e}/${t}`}function qse({creators:e}={}){const t=e?.asyncThunk?.[$se];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(nc(11));const o=(typeof a.reducers=="function"?a.reducers(Hse()):a.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,k){const C=typeof w=="string"?w:w.type;if(!C)throw new Error(nc(12));if(C in c.sliceCaseReducersByType)throw new Error(nc(13));return c.sliceCaseReducersByType[C]=k,d},addMatcher(w,k){return c.sliceMatchers.push({matcher:w,reducer:k}),d},exposeAction(w,k){return c.actionCreators[w]=k,d},exposeCaseReducer(w,k){return c.sliceCaseReducersByName[w]=k,d}};l.forEach(w=>{const k=o[w],C={reducerName:w,type:Vse(s,w),createNotation:typeof a.reducers=="function"};Gse(k)?Kse(C,k,d,t):Wse(C,k,d)});function u(){const[w={},k=[],C=void 0]=typeof a.extraReducers=="function"?KV(a.extraReducers):[a.extraReducers],_={...w,...c.sliceCaseReducersByType};return Lse(a.initialState,E=>{for(let T in _)E.addCase(T,_[T]);for(let T of c.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of k)E.addMatcher(T.matcher,T.reducer);C&&E.addDefaultCase(C)})}const h=w=>w,f=new Map,p=new WeakMap;let v;function g(w,k){return v||(v=u()),v(w,k)}function b(){return v||(v=u()),v.getInitialState()}function y(w,k=!1){function C(E){let T=E[w];return typeof T>"u"&&k&&(T=Jj(p,C,b)),T}function _(E=h){const T=Jj(f,k,()=>new WeakMap);return Jj(T,E,()=>{const I={};for(const[F,A]of Object.entries(a.selectors??{}))I[F]=zse(A,E,()=>Jj(p,E,b),k);return I})}return{reducerPath:w,getSelectors:_,get selectors(){return _(C)},selectSlice:C}}const S={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...y(i),injectInto(w,{reducerPath:k,...C}={}){const _=k??i;return w.inject({reducerPath:_,reducer:g},C),{...S,...y(_,!0)}}};return S}}function zse(e,t,r,a){function s(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var Xc=qse();function Hse(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Wse({type:e,reducerName:t,createNotation:r},a,s){let i,o;if("reducer"in a){if(r&&!Yse(a))throw new Error(nc(17));i=a.reducer,o=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Hc(e,o):Hc(e))}function Gse(e){return e._reducerDefinitionType==="asyncThunk"}function Yse(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Kse({type:e,reducerName:t},r,a,s){if(!s)throw new Error(nc(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,i,u);a.exposeAction(t,h),o&&a.addCase(h.fulfilled,o),l&&a.addCase(h.pending,l),c&&a.addCase(h.rejected,c),d&&a.addMatcher(h.settled,d),a.exposeCaseReducer(t,{fulfilled:o||Zj,pending:l||Zj,rejected:c||Zj,settled:d||Zj})}function Zj(){}var Xse="task",XV="listener",QV="completed",cT="cancelled",Qse=`task-${cT}`,Jse=`task-${QV}`,z5=`${XV}-${cT}`,Zse=`${XV}-${QV}`,ES=class{constructor(e){this.code=e,this.message=`${Xse} ${cT} (reason: ${e})`}name="TaskAbortError";message},dT=(e,t)=>{if(typeof e!="function")throw new TypeError(nc(32))},Iw=()=>{},JV=(e,t=Iw)=>(e.catch(t),e),ZV=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),px=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},xx=e=>{if(e.aborted){const{reason:t}=e;throw new ES(t)}};function eq(e,t){let r=Iw;return new Promise((a,s)=>{const i=()=>s(new ES(e.reason));if(e.aborted){i();return}r=ZV(e,i),t.finally(()=>r()).then(a,s)}).finally(()=>{r=Iw})}var eie=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ES?"cancelled":"rejected",error:r}}finally{t?.()}},Pw=e=>t=>JV(eq(e,t).then(r=>(xx(e),r))),tq=e=>{const t=Pw(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:y0}=Object,GF={},_S="listenerMiddleware",tie=(e,t)=>{const r=a=>ZV(e,()=>px(a,e.reason));return(a,s)=>{dT(a);const i=new AbortController;r(i);const o=eie(async()=>{xx(e),xx(i.signal);const l=await a({pause:Pw(i.signal),delay:tq(i.signal),signal:i.signal});return xx(i.signal),l},()=>px(i,Jse));return s?.autoJoin&&t.push(o.catch(Iw)),{result:Pw(e)(o),cancel(){px(i,Qse)}}}},rie=(e,t)=>{const r=async(a,s)=>{xx(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:a,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await eq(t,Promise.race(l));return xx(t),c}finally{i()}};return(a,s)=>JV(r(a,s))},rq=e=>{let{type:t,actionCreator:r,matcher:a,predicate:s,effect:i}=e;if(t)s=Hc(t).match;else if(r)t=r.type,s=r.match;else if(a)s=a;else if(!s)throw new Error(nc(21));return dT(i),{predicate:s,type:t,effect:i}},aq=y0(e=>{const{type:t,predicate:r,effect:a}=rq(e);return{id:Use(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(nc(22))}}},{withTypes:()=>aq}),YF=(e,t)=>{const{type:r,effect:a,predicate:s}=rq(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===a)},H5=e=>{e.pending.forEach(t=>{px(t,z5)})},aie=e=>()=>{e.forEach(H5),e.clear()},KF=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},nq=y0(Hc(`${_S}/add`),{withTypes:()=>nq}),nie=Hc(`${_S}/removeAll`),sq=y0(Hc(`${_S}/remove`),{withTypes:()=>sq}),sie=(...e)=>{console.error(`${_S}/error`,...e)},p1=(e={})=>{const t=new Map,{extra:r,onError:a=sie}=e;dT(a);const s=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&H5(u)}),i=u=>{const h=YF(t,u)??aq(u);return s(h)};y0(i,{withTypes:()=>i});const o=u=>{const h=YF(t,u);return h&&(h.unsubscribe(),u.cancelActive&&H5(h)),!!h};y0(o,{withTypes:()=>o});const l=async(u,h,f,p)=>{const v=new AbortController,g=rie(i,v.signal),b=[];try{u.pending.add(v),await Promise.resolve(u.effect(h,y0({},f,{getOriginalState:p,condition:(y,S)=>g(y,S).then(Boolean),take:g,delay:tq(v.signal),pause:Pw(v.signal),extra:r,signal:v.signal,fork:tie(v.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,S,w)=>{y!==v&&(px(y,z5),w.delete(y))})},cancel:()=>{px(v,z5),u.pending.delete(v)},throwIfCancelled:()=>{xx(v.signal)}})))}catch(y){y instanceof ES||KF(a,y,{raisedBy:"effect"})}finally{await Promise.all(b),px(v,Zse),u.pending.delete(v)}},c=aie(t);return{middleware:u=>h=>f=>{if(!BV(f))return h(f);if(nq.match(f))return i(f.payload);if(nie.match(f)){c();return}if(sq.match(f))return o(f.payload);let p=u.getState();const v=()=>{if(p===GF)throw new Error(nc(23));return p};let g;try{if(g=h(f),t.size>0){const b=u.getState(),y=Array.from(t.values());for(const S of y){let w=!1;try{w=S.predicate(f,b,p)}catch(k){w=!1,KF(a,k,{raisedBy:"predicate"})}w&&l(S,f,u,v)}}}finally{p=GF}return g},startListening:i,stopListening:o,clearListeners:c}};function nc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var iie={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},iq=Xc({name:"chartLayout",initialState:iie,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:oie,setLayout:lie,setChartSize:cie,setScale:die}=iq.actions,uie=iq.reducer;function XF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function QF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(r),!0).forEach(function(a){hie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hie(e,t,r){return(t=fie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fie(e){var t=mie(e,"string");return typeof t=="symbol"?t:t+""}function mie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ow=Math.PI/180,pie=e=>e*180/Math.PI,ci=(e,t,r,a)=>({x:e+Math.cos(-Ow*a)*r,y:t+Math.sin(-Ow*a)*r}),oq=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},xie=(e,t)=>{var{x:r,y:a}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(a-i)**2)},vie=(e,t)=>{var{x:r,y:a}=e,{cx:s,cy:i}=t,o=xie({x:r,y:a},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:pie(c),angleInRadian:c}},gie=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:r-i*360}},bie=(e,t)=>{var{startAngle:r,endAngle:a}=t,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return e+o*360},yie=(e,t)=>{var{x:r,y:a}=e,{radius:s,angle:i}=vie({x:r,y:a},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=gie(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?QF(QF({},t),{},{radius:s,angle:bie(u,t)}):null};function JF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Lc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(r),!0).forEach(function(a){jie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jie(e,t,r){return(t=Nie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nie(e){var t=wie(e,"string");return typeof t=="symbol"?t:t+""}function wie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wn(e,t,r){return Fn(e)||Fn(t)?r:Xu(t)?zm(e,t,r):typeof t=="function"?t(e):r}var Sie=(e,t,r,a,s)=>{var i,o=-1,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(Bi(u-d)!==Bi(h-u)){var p=[];if(Bi(h-u)===Bi(s[1]-s[0])){f=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+d)/2),p[1]=Math.max(v,(v+d)/2)}else{f=d;var g=h+s[1]-s[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),S=Math.max(d,h);if(e>(y+u)/2&&e<=(S+u)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},Cie=(e,t,r)=>{if(t&&r){var{width:a,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Er(e[i]))return Lc(Lc({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Er(e[o]))return Lc(Lc({},e),{},{[o]:e[o]+(s||0)})}return e},ff=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",lq=(e,t,r,a)=>{if(a)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},cq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(g=p==="angleAxis"&&i&&i.length>=2?Bi(i[0]-i[1])*2*g:g,h||f){var b=(h||f||[]).map((y,S)=>{var w=a?a.indexOf(y):y;return{coordinate:o(w)+g,value:y,offset:g,index:S}});return b.filter(y=>!yl(y.coordinate))}return c&&d?d.map((y,S)=>({coordinate:o(y)+g,value:y,index:S,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,S)=>({coordinate:o(y)+g,value:y,offset:g,index:S})):o.domain().map((y,S)=>({coordinate:o(y)+g,value:a?a[y]:y,index:S,offset:g}))},ZF=1e-4,kie=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),s=Math.min(a[0],a[1])-ZF,i=Math.max(a[0],a[1])+ZF,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},Eie=(e,t)=>{if(!t||t.length!==2||!Er(t[0])||!Er(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Er(e[0])||e[0]<r)&&(s[0]=r),(!Er(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},_ie=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0,o=0;o<t;++o){var l=yl(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},Die=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0;i<t;++i){var o=yl(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Aie={sign:_ie,expand:ine,none:$0,silhouette:one,wiggle:lne,positive:Die},Tie=(e,t,r)=>{var a=Aie[r],s=sne().keys(t).value((i,o)=>+Wn(i,o,0)).order(M5).offset(a);return s(e)};function uT(e){return e==null?void 0:String(e)}function eL(e){var{axis:t,ticks:r,bandSize:a,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Fn(s[t.dataKey])){var l=nV(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=Wn(s,Fn(o)?t.dataKey:o);return Fn(c)?null:t.scale(c)}var tL=e=>{var{axis:t,ticks:r,offset:a,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+a:null;var l=Wn(i,t.dataKey,t.scale.domain()[o]);return Fn(l)?null:t.scale(l)-s/2+a},Iie=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},Pie=e=>{var t=e.flat(2).filter(Er);return[Math.min(...t),Math.max(...t)]},Oie=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Mie=(e,t,r)=>{if(e!=null)return Oie(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Pie(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},rL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wy=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var s=NS(t,u=>u.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function nL(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:s,name:i}=e;return Lc(Lc({},t),{},{dataKey:r,payload:a,value:s,name:i})}function xg(e,t){if(e)return String(e);if(typeof t=="string")return t}function Rie(e,t,r,a,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?yie({x:e,y:t},a):null}var Fie=(e,t,r,a)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=a;return Lc(Lc(Lc({},a),ci(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=a;return Lc(Lc(Lc({},a),ci(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},Lie=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,mf=e=>e.layout.width,pf=e=>e.layout.height,Bie=e=>e.layout.scale,dq=e=>e.layout.margin,hT=Ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),fT=Ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uq="data-recharts-item-index",hq="data-recharts-item-data-key",DS=60;function sL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sL(Object(r),!0).forEach(function(a){Uie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Uie(e,t,r){return(t=$ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ie(e){var t=Vie(e,"string");return typeof t=="symbol"?t:t+""}function Vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qie=e=>e.brush.height,Ni=Ut([mf,pf,dq,qie,hT,fT,MV,use],(e,t,r,a,s,i,o,l)=>{var c=i.reduce((v,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:DS;return xm(xm({},v),{},{[b]:v[b]+y})}return v},{left:r.left||0,right:r.right||0}),d=s.reduce((v,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?xm(xm({},v),{},{[b]:zm(v,"".concat(b))+g.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=xm(xm({},d),c),h=u.bottom;u.bottom+=a,u=Cie(u,o,l);var f=e-u.left-u.right,p=t-u.top-u.bottom;return xm(xm({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),zie=Ut(Ni,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),fq=Ut(mf,pf,(e,t)=>({x:0,y:0,width:e,height:t})),Hie=j.createContext(null),rl=()=>j.useContext(Hie)!=null,AS=e=>e.brush,TS=Ut([AS,Ni,dq],(e,t,r)=>({height:e.height,x:Er(e.x)?e.x:t.left,y:Er(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Er(e.width)?e.width:t.width})),mT=()=>{var e,t=rl(),r=Mr(zie),a=Mr(TS),s=(e=Mr(AS))===null||e===void 0?void 0:e.padding;return!t||!a||!s?r:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},Wie={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},mq=()=>{var e;return(e=Mr(Ni))!==null&&e!==void 0?e:Wie},pT=()=>Mr(mf),xT=()=>Mr(pf),Gie={top:0,right:0,bottom:0,left:0},Yie=()=>{var e;return(e=Mr(t=>t.layout.margin))!==null&&e!==void 0?e:Gie},en=e=>e.layout.layoutType,IS=()=>Mr(en),Kie={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pq=Xc({name:"legend",initialState:Kie,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Yh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:iL,setLegendSettings:Xie,addLegendPayload:xq,removeLegendPayload:vq}=pq.actions,Qie=pq.reducer,Jie=["contextPayload"];function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W5.apply(null,arguments)}function oL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function q0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oL(Object(r),!0).forEach(function(a){vT(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vT(e,t,r){return(t=Zie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zie(e){var t=eoe(e,"string");return typeof t=="symbol"?t:t+""}function eoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function toe(e,t){if(e==null)return{};var r,a,s=roe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function roe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function aoe(e){return e.value}function noe(e){var{contextPayload:t}=e,r=toe(e,Jie),a=TV(t,e.payloadUniqBy,aoe),s=q0(q0({},r),{},{payload:a});return j.isValidElement(e.content)?j.cloneElement(e.content,s):typeof e.content=="function"?j.createElement(e.content,s):j.createElement(Z3,s)}function soe(e,t,r,a,s,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),q0(q0({},d),u)}function ioe(e){var t=ss();return j.useEffect(()=>{t(Xie(e))},[t,e]),null}function ooe(e){var t=ss();return j.useEffect(()=>(t(iL(e)),()=>{t(iL({width:0,height:0}))}),[t,e]),null}function loe(e){var t=mse(),r=Dae(),a=Yie(),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=RV([t]),u=pT(),h=xT(),f=u-(a.left||0)-(a.right||0),p=ax.getWidthOrHeight(e.layout,i,s,f),v=l?o:q0(q0({position:"absolute",width:p?.width||s||"auto",height:p?.height||i||"auto"},soe(o,e,a,u,h,c)),o),g=l??r;if(g==null)return null;var b=j.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:d},j.createElement(ioe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),j.createElement(ooe,{width:c.width,height:c.height}),j.createElement(noe,W5({},e,p,{margin:a,chartWidth:u,chartHeight:h,contextPayload:t})));return c1.createPortal(b,g)}class ax extends j.PureComponent{static getWidthOrHeight(t,r,a,s){return t==="vertical"&&Er(r)?{height:r}:t==="horizontal"?{width:a||s}:null}render(){return j.createElement(loe,this.props)}}vT(ax,"displayName","Legend");vT(ax,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function G5(){return G5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G5.apply(null,arguments)}function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function t_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(a){coe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function coe(e,t,r){return(t=doe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function doe(e){var t=uoe(e,"string");return typeof t=="symbol"?t:t+""}function uoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hoe(e){return Array.isArray(e)&&Xu(e[0])&&Xu(e[1])?e.join(" ~ "):e}var foe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var C={padding:0,margin:0},_=(l?NS(i,l):i).map((E,T)=>{if(E.type==="none")return null;var I=E.formatter||o||hoe,{value:F,name:A}=E,P=F,q=A;if(I){var V=I(F,A,E,T,i);if(Array.isArray(V))[P,q]=V;else if(V!=null)P=V;else return null}var Y=t_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},a);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Y},Xu(q)?j.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Xu(q)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},P),j.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:C},_)}return null},v=t_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=t_({margin:0},s),b=!Fn(u),y=b?u:"",S=aa("recharts-default-tooltip",c),w=aa("recharts-tooltip-label",d);b&&h&&i!==void 0&&i!==null&&(y=h(u,i));var k=f?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",G5({className:S,style:v},k),j.createElement("p",{className:w,style:g},j.isValidElement(y)?y:"".concat(y)),p())},kb="recharts-tooltip-wrapper",moe={visibility:"hidden"};function poe(e){var{coordinate:t,translateX:r,translateY:a}=e;return aa(kb,{["".concat(kb,"-right")]:Er(r)&&t&&Er(t.x)&&r>=t.x,["".concat(kb,"-left")]:Er(r)&&t&&Er(t.x)&&r<t.x,["".concat(kb,"-bottom")]:Er(a)&&t&&Er(t.y)&&a>=t.y,["".concat(kb,"-top")]:Er(a)&&t&&Er(t.y)&&a<t.y})}function cL(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Er(i[a]))return i[a];var u=r[a]-l-(s>0?s:0),h=r[a]+s;if(t[a])return o[a]?u:h;var f=c[a];if(f==null)return 0;if(o[a]){var p=u,v=f;return p<v?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var g=h+l,b=f+d;return g>b?Math.max(u,f):Math.max(h,f)}function xoe(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function voe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=cL({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=cL({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=xoe({translateX:u,translateY:h,useTranslate3d:l})):d=moe,{cssProperties:d,cssClasses:poe({translateX:u,translateY:h,coordinate:r})}}function dL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(r),!0).forEach(function(a){Y5(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Y5(e,t,r){return(t=goe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function goe(e){var t=boe(e,"string");return typeof t=="symbol"?t:t+""}function boe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yoe extends j.PureComponent{constructor(){super(...arguments),Y5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Y5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:v,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:S,cssProperties:w}=voe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:f,viewBox:p}),k=y?{}:eN(eN({transition:c&&t?"transform ".concat(a,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),C=eN(eN({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:C,ref:b},i)}}var joe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Hx={isSsr:joe()},gq=()=>Mr(e=>e.rootProps.accessibilityLayer);function oo(e){return Number.isFinite(e)}function z0(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function K5(){return K5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K5.apply(null,arguments)}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(a){Noe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Noe(e,t,r){return(t=woe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function woe(e){var t=Soe(e,"string");return typeof t=="symbol"?t:t+""}function Soe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fL={curveBasisClosed:Yae,curveBasisOpen:Kae,curveBasis:Gae,curveBumpX:Pae,curveBumpY:Oae,curveLinearClosed:Xae,curveLinear:yS,curveMonotoneX:Qae,curveMonotoneY:Jae,curveNatural:Zae,curveStep:ene,curveStepAfter:rne,curveStepBefore:tne},tN=e=>oo(e.x)&&oo(e.y),Eb=e=>e.x,_b=e=>e.y,Coe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(h1(e));return(r==="curveMonotone"||r==="curveBump")&&t?fL["".concat(r).concat(t==="vertical"?"Y":"X")]:fL[r]||yS},koe=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=Coe(t,s),l=i?r.filter(tN):r,c;if(Array.isArray(a)){var d=i?a.filter(h=>tN(h)):a,u=l.map((h,f)=>hL(hL({},h),{},{base:d[f]}));return s==="vertical"?c=Kj().y(_b).x1(Eb).x0(h=>h.base.x):c=Kj().x(Eb).y1(_b).y0(h=>h.base.y),c.defined(tN).curve(o),c(u)}return s==="vertical"&&Er(a)?c=Kj().y(_b).x1(Eb).x0(a):Er(a)?c=Kj().x(Eb).y1(_b).y0(a):c=fV().x(Eb).y(_b),c.defined(tN).curve(o),c(l)},ny=e=>{var{className:t,points:r,path:a,pathRef:s}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?koe(e):a;return j.createElement("path",K5({},Ta(e,!1),W3(e),{className:aa("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Eoe=["x","y","top","left","width","height","className"];function X5(){return X5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X5.apply(null,arguments)}function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(r),!0).forEach(function(a){Doe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Doe(e,t,r){return(t=Aoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aoe(e){var t=Toe(e,"string");return typeof t=="symbol"?t:t+""}function Toe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ioe(e,t){if(e==null)return{};var r,a,s=Poe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Poe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ooe=(e,t,r,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),Moe=e=>{var{x:t=0,y:r=0,top:a=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=Ioe(e,Eoe),d=_oe({x:t,y:r,top:a,left:s,width:i,height:o},c);return!Er(t)||!Er(r)||!Er(i)||!Er(o)||!Er(a)||!Er(s)?null:j.createElement("path",X5({},Ta(d,!0),{className:aa("recharts-cross",l),d:Ooe(t,r,i,o,a,s)}))};function Roe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function pL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Foe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pL(Object(r),!0).forEach(function(a){Loe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Loe(e,t,r){return(t=Boe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Boe(e){var t=Uoe(e,"string");return typeof t=="symbol"?t:t+""}function Uoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qc(e,t){var r=Foe({},e),a=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),r);return i}var r_={},a_={},n_={},xL;function $oe(){return xL||(xL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(n_)),n_}var vL;function Voe(){return vL||(vL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$oe(),r=_V(),a=aT(),s=nT(),i=tT();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,f,p,v,g){const b=g(d,u,h,f,p,v);if(b!==void 0)return b;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,v,g)}return c(d,u,v,g)}function c(d,u,h,f){if(Object.is(d,u))return!0;let p=a.getTag(d),v=a.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return d.toString()===u.toString();case s.numberTag:{const y=d.valueOf(),S=u.valueOf();return i.eq(y,S)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),u.valueOf());case s.regexpTag:return d.source===u.source&&d.flags===u.flags;case s.functionTag:return d===u}h=h??new Map;const g=h.get(d),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(d,u),h.set(u,d);try{switch(p){case s.mapTag:{if(d.size!==u.size)return!1;for(const[y,S]of d.entries())if(!u.has(y)||!l(S,u.get(y),y,d,u,h,f))return!1;return!0}case s.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),S=Array.from(u.values());for(let w=0;w<y.length;w++){const k=y[w],C=S.findIndex(_=>l(k,_,void 0,d,u,h,f));if(C===-1)return!1;S.splice(C,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,f))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case s.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case s.errorTag:return d.name===u.name&&d.message===u.message;case s.objectTag:{if(!(c(d.constructor,u.constructor,h,f)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const S=[...Object.keys(d),...r.getSymbols(d)],w=[...Object.keys(u),...r.getSymbols(u)];if(S.length!==w.length)return!1;for(let k=0;k<S.length;k++){const C=S[k],_=d[C];if(!Object.hasOwn(u,C))return!1;const E=u[C];if(!l(_,E,C,d,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(a_)),a_}var s_={},gL;function qoe(){return gL||(gL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(s_)),s_}var bL;function zoe(){return bL||(bL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Voe(),r=qoe();function a(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=a}(r_)),r_}var i_,yL;function Hoe(){return yL||(yL=1,i_=zoe().isEqual),i_}var Woe=Hoe();const Goe=Kc(Woe);function Yoe(e){var t={},r=()=>null,a=!1,s=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var Mw=1e-4,bq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],yq=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),jL=(e,t)=>r=>{var a=bq(e,t);return yq(a,r)},Koe=(e,t)=>r=>{var a=bq(e,t),s=[...a.map((i,o)=>i*o).slice(1),0];return yq(s,r)},NL=function(){for(var t,r,a,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,r,s]=[0,0,1,1];break;case"ease":[t,a,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,s]=[.42,0,1,1];break;case"ease-out":[t,a,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,r,s]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([t,a,r,s]=o);var d=jL(t,r),u=jL(a,s),h=Koe(t,r),f=v=>v>1?1:v<0?0:v,p=v=>{for(var g=v>1?1:v,b=g,y=0;y<8;++y){var S=d(b)-g,w=h(b);if(Math.abs(S-g)<Mw||w<Mw)return u(b);b=f(b-S/w)}return u(b)};return p.isStepper=!1,p},Xoe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*a,h=c+(d-u)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<Mw&&Math.abs(h)<Mw?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},Qoe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NL(e);case"spring":return Xoe();default:if(e.split("(")[0]==="cubic-bezier")return NL(e)}return typeof e=="function"?e:null};function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(a){Joe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Joe(e,t,r){return(t=Zoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zoe(e){var t=ele(e,"string");return typeof t=="symbol"?t:t+""}function ele(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tle=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),rle=(e,t,r)=>e.map(a=>"".concat(tle(a)," ").concat(t,"ms ").concat(r)).join(","),ale=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(s=>a.includes(s))),Sy=(e,t)=>Object.keys(t).reduce((r,a)=>SL(SL({},r),{},{[a]:e(a,t[a])}),{});function CL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(r),!0).forEach(function(a){nle(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nle(e,t,r){return(t=sle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sle(e){var t=ile(e,"string");return typeof t=="symbol"?t:t+""}function ile(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rw=(e,t,r)=>e+(t-e)*r,Q5=e=>{var{from:t,to:r}=e;return t!==r},jq=(e,t,r)=>{var a=Sy((s,i)=>{if(Q5(i)){var[o,l]=e(i.from,i.to,i.velocity);return to(to({},i),{},{from:o,velocity:l})}return i},t);return r<1?Sy((s,i)=>Q5(i)?to(to({},i),{},{velocity:Rw(i.velocity,a[s].velocity,r),from:Rw(i.from,a[s].from,r)}):i,t):jq(e,a,r-1)};function ole(e,t,r,a,s,i){var o,l=a.reduce((f,p)=>to(to({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Sy((f,p)=>p.from,l),d=()=>!Object.values(l).filter(Q5).length,u=null,h=f=>{o||(o=f);var p=f-o,v=p/r.dt;l=jq(r,l,v),s(to(to(to({},e),t),c())),o=f,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function lle(e,t,r,a,s,i,o){var l=null,c=s.reduce((h,f)=>to(to({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/a,p=Sy((g,b)=>Rw(...b,r(f)),c);if(i(to(to(to({},e),t),p)),f<1)l=o.setTimeout(u);else{var v=Sy((g,b)=>Rw(...b,r(1)),c);i(to(to(to({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{l()})}const cle=(e,t,r,a,s,i)=>{var o=ale(e,t);return r.isStepper===!0?ole(e,t,r,o,s,i):lle(e,t,r,a,o,s,i)};class dle{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=o=>{o-a>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var ule=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function J5(){return J5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J5.apply(null,arguments)}function hle(e,t){if(e==null)return{};var r,a,s=fle(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fle(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function kL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kL(Object(r),!0).forEach(function(a){nx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nx(e,t,r){return(t=mle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mle(e){var t=ple(e,"string");return typeof t=="symbol"?t:t+""}function ple(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xle(){return Yoe(new dle)}class gT extends j.PureComponent{constructor(t,r){super(t,r),nx(this,"mounted",!1),nx(this,"manager",null),nx(this,"stopJSAnimation",null),nx(this,"unSubscribe",null);var{isActive:a,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!r){var d={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(d);return}if(!(Goe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var f={style:s?{[s]:h}:h};(s&&c[s]!==h||!s&&c!==h)&&this.setState(f)}this.runAnimation(vm(vm({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=cle(r,a,Qoe(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,s,l])}runAnimation(t){var{begin:r,duration:a,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=rle(Object.keys(u),a,o);this.manager.start([l,r,vm(vm({},u),{},{transition:h}),a,c])}render(){var t=this.props,{children:r,begin:a,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:v}=t,g=hle(t,ule),b=j.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var S=w=>{var{style:k={},className:C}=w.props,_=j.cloneElement(w,vm(vm({},g),{},{style:vm(vm({},k),y),className:C}));return _};return b===1?S(j.Children.only(r)):j.createElement("div",null,j.Children.map(r,w=>S(w)))}}nx(gT,"displayName","Animate");nx(gT,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var vle=j.createContext(null);function Hm(e){var t,r,a=j.useContext(vle);return j.createElement(gT,J5({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:a)!==null&&t!==void 0?t:xle()}))}function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fw.apply(null,arguments)}var EL=(e,t,r,a,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+a-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+a)),d+="L ".concat(e+l*u[3],",").concat(t+a),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*u[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+a-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+a,`
            L `).concat(e+l*p,",").concat(t+a,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},gle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nq=e=>{var t=Qc(e,gle),r=j.useRef(null),[a,s]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var b=aa("recharts-rectangle",u);return g?j.createElement(Hm,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:g},y=>{var{width:S,height:w,x:k,y:C}=y;return j.createElement(Hm,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:v,easing:h},j.createElement("path",Fw({},Ta(t,!0),{className:b,d:EL(k,C,S,w,d),ref:r})))}):j.createElement("path",Fw({},Ta(t,!0),{className:b,d:EL(i,o,l,c,d)}))};function wq(e){var{cx:t,cy:r,radius:a,startAngle:s,endAngle:i}=e,o=ci(t,r,a,s),l=ci(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function Z5(){return Z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Z5.apply(null,arguments)}var ble=(e,t)=>{var r=Bi(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},rN=e=>{var{cx:t,cy:r,radius:a,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,u=Math.asin(l/d)/Ow,h=c?s:s+i*u,f=ci(t,r,d,h),p=ci(t,r,a,h),v=c?s-i*u:s,g=ci(t,r,d*Math.cos(u*Ow),v);return{center:f,circleTangency:p,lineTangency:g,theta:u}},Sq=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:i,endAngle:o}=e,l=ble(i,o),c=i+l,d=ci(t,r,s,i),u=ci(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var f=ci(t,r,a,i),p=ci(t,r,a,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},yle=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=Bi(d-c),{circleTangency:h,lineTangency:f,theta:p}=rN({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:g,theta:b}=rN({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Sq({cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:c,endAngle:d});var S="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var{circleTangency:w,lineTangency:k,theta:C}=rN({cx:t,cy:r,radius:a,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:E,theta:T}=rN({cx:t,cy:r,radius:a,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),I=l?Math.abs(c-d):Math.abs(c-d)-C-T;if(I<0&&i===0)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},jle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cq=e=>{var t=Qc(e,jle),{cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var f=aa("recharts-sector",h),p=i-s,v=el(o,p,0,!0),g;return v>0&&Math.abs(d-u)<360?g=yle({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=Sq({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),j.createElement("path",Z5({},Ta(t,!0),{className:f,d:g}))};function Nle(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,f=ci(l,c,d,h),p=ci(l,c,u,h);a=f.x,s=f.y,i=p.x,o=p.y}else return wq(t);return[{x:a,y:s},{x:i,y:o}]}var o_={},l_={},c_={},_L;function wle(){return _L||(_L=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PV();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(c_)),c_}var DL;function Sle(){return DL||(DL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wle();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(l_)),l_}var AL;function Cle(){return AL||(AL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OV(),r=Sle();function a(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=a}(o_)),o_}var d_,TL;function kle(){return TL||(TL=1,d_=Cle().range),d_}var Ele=kle();const kq=Kc(Ele);function Rm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _le(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bT(e){let t,r,a;e.length!==2?(t=Rm,r=(l,c)=>Rm(e(l),c),a=(l,c)=>e(l)-c):(t=e===Rm||e===_le?e:Dle,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&a(l[h-1],c)>-a(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Dle(){return 0}function Eq(e){return e===null?NaN:+e}function*Ale(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Tle=bT(Rm),x1=Tle.right;bT(Eq).center;class IL extends Map{constructor(t,r=Ole){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(PL(this,t))}has(t){return super.has(PL(this,t))}set(t,r){return super.set(Ile(this,t),r)}delete(t){return super.delete(Ple(this,t))}}function PL({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function Ile({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function Ple({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function Ole(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Mle(e=Rm){if(e===Rm)return _q;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function _q(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Rle=Math.sqrt(50),Fle=Math.sqrt(10),Lle=Math.sqrt(2);function Lw(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=Rle?10:i>=Fle?5:i>=Lle?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?Lw(e,t,r*2):[l,c,d]}function eA(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?Lw(t,e,r):Lw(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function tA(e,t,r){return t=+t,e=+e,r=+r,Lw(e,t,r)[2]}function rA(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?tA(t,e,r):tA(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function OL(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function ML(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function Dq(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?_q:Mle(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+f)),v=Math.min(a,Math.floor(t+(c-d)*h/c+f));Dq(e,t,p,v,s)}const i=e[t];let o=r,l=a;for(Db(e,r,t),s(e[a],i)>0&&Db(e,r,a);o<l;){for(Db(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Db(e,r,l):(++l,Db(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Db(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function Ble(e,t,r){if(e=Float64Array.from(Ale(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return ML(e);if(t>=1)return OL(e);var a,s=(a-1)*t,i=Math.floor(s),o=OL(Dq(e,i).subarray(0,i+1)),l=ML(e.subarray(i+1));return o+(l-o)*(s-i)}}function Ule(e,t,r=Eq){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function $le(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Jc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aA=Symbol("implicit");function yT(){var e=new IL,t=[],r=[],a=aA;function s(i){let o=e.get(i);if(o===void 0){if(a!==aA)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new IL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return yT(t,r).unknown(a)},Jc.apply(s,arguments),s}function jT(){var e=yT().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<a,v=p?s:a,g=p?a:s;i=(g-v)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(f-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=$le(f).map(function(y){return v+i*y});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([a,s]=f,a=+a,s=+s,h()):[a,s]},e.rangeRound=function(f){return[a,s]=f,a=+a,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return jT(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Jc.apply(h(),arguments)}function Aq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Aq(t())},e}function Vle(){return Aq(jT.apply(null,arguments).paddingInner(1))}function NT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Tq(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function v1(){}var Cy=.7,Bw=1/Cy,j0="\\s*([+-]?\\d+)\\s*",ky="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qle=/^#([0-9a-f]{3,8})$/,zle=new RegExp(`^rgb\\(${j0},${j0},${j0}\\)$`),Hle=new RegExp(`^rgb\\(${qu},${qu},${qu}\\)$`),Wle=new RegExp(`^rgba\\(${j0},${j0},${j0},${ky}\\)$`),Gle=new RegExp(`^rgba\\(${qu},${qu},${qu},${ky}\\)$`),Yle=new RegExp(`^hsl\\(${ky},${qu},${qu}\\)$`),Kle=new RegExp(`^hsla\\(${ky},${qu},${qu},${ky}\\)$`),RL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};NT(v1,Ey,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FL,formatHex:FL,formatHex8:Xle,formatHsl:Qle,formatRgb:LL,toString:LL});function FL(){return this.rgb().formatHex()}function Xle(){return this.rgb().formatHex8()}function Qle(){return Iq(this).formatHsl()}function LL(){return this.rgb().formatRgb()}function Ey(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qle.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?BL(t):r===3?new pl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?aN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?aN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zle.exec(e))?new pl(t[1],t[2],t[3],1):(t=Hle.exec(e))?new pl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wle.exec(e))?aN(t[1],t[2],t[3],t[4]):(t=Gle.exec(e))?aN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yle.exec(e))?VL(t[1],t[2]/100,t[3]/100,1):(t=Kle.exec(e))?VL(t[1],t[2]/100,t[3]/100,t[4]):RL.hasOwnProperty(e)?BL(RL[e]):e==="transparent"?new pl(NaN,NaN,NaN,0):null}function BL(e){return new pl(e>>16&255,e>>8&255,e&255,1)}function aN(e,t,r,a){return a<=0&&(e=t=r=NaN),new pl(e,t,r,a)}function Jle(e){return e instanceof v1||(e=Ey(e)),e?(e=e.rgb(),new pl(e.r,e.g,e.b,e.opacity)):new pl}function nA(e,t,r,a){return arguments.length===1?Jle(e):new pl(e,t,r,a??1)}function pl(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}NT(pl,nA,Tq(v1,{brighter(e){return e=e==null?Bw:Math.pow(Bw,e),new pl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cy:Math.pow(Cy,e),new pl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pl(vx(this.r),vx(this.g),vx(this.b),Uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UL,formatHex:UL,formatHex8:Zle,formatRgb:$L,toString:$L}));function UL(){return`#${sx(this.r)}${sx(this.g)}${sx(this.b)}`}function Zle(){return`#${sx(this.r)}${sx(this.g)}${sx(this.b)}${sx((isNaN(this.opacity)?1:this.opacity)*255)}`}function $L(){const e=Uw(this.opacity);return`${e===1?"rgb(":"rgba("}${vx(this.r)}, ${vx(this.g)}, ${vx(this.b)}${e===1?")":`, ${e})`}`}function Uw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sx(e){return e=vx(e),(e<16?"0":"")+e.toString(16)}function VL(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ed(e,t,r,a)}function Iq(e){if(e instanceof Ed)return new Ed(e.h,e.s,e.l,e.opacity);if(e instanceof v1||(e=Ey(e)),!e)return new Ed;if(e instanceof Ed)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Ed(o,l,c,e.opacity)}function ece(e,t,r,a){return arguments.length===1?Iq(e):new Ed(e,t,r,a??1)}function Ed(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}NT(Ed,ece,Tq(v1,{brighter(e){return e=e==null?Bw:Math.pow(Bw,e),new Ed(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cy:Math.pow(Cy,e),new Ed(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new pl(u_(e>=240?e-240:e+120,s,a),u_(e,s,a),u_(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Ed(qL(this.h),nN(this.s),nN(this.l),Uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uw(this.opacity);return`${e===1?"hsl(":"hsla("}${qL(this.h)}, ${nN(this.s)*100}%, ${nN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qL(e){return e=(e||0)%360,e<0?e+360:e}function nN(e){return Math.max(0,Math.min(1,e||0))}function u_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const wT=e=>()=>e;function tce(e,t){return function(r){return e+r*t}}function rce(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function ace(e){return(e=+e)==1?Pq:function(t,r){return r-t?rce(t,r,e):wT(isNaN(t)?r:t)}}function Pq(e,t){var r=t-e;return r?tce(e,r):wT(isNaN(e)?t:e)}const zL=function e(t){var r=ace(t);function a(s,i){var o=r((s=nA(s)).r,(i=nA(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=Pq(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a}(1);function nce(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function sce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ice(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=vg(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function oce(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function $w(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lce(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=vg(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var sA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,h_=new RegExp(sA.source,"g");function cce(e){return function(){return e}}function dce(e){return function(t){return e(t)+""}}function uce(e,t){var r=sA.lastIndex=h_.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=sA.exec(e))&&(s=h_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:$w(a,s)})),r=h_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?dce(c[0].x):cce(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function vg(e,t){var r=typeof t,a;return t==null||r==="boolean"?wT(t):(r==="number"?$w:r==="string"?(a=Ey(t))?(t=a,zL):uce:t instanceof Ey?zL:t instanceof Date?oce:sce(t)?nce:Array.isArray(t)?ice:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lce:$w)(e,t)}function ST(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function hce(e,t){t===void 0&&(t=e,e=vg);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function fce(e){return function(){return e}}function Vw(e){return+e}var HL=[0,1];function Jo(e){return e}function iA(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fce(isNaN(t)?NaN:.5)}function mce(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function pce(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=iA(s,a),i=r(o,i)):(a=iA(a,s),i=r(i,o)),function(l){return i(a(l))}}function xce(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=iA(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=x1(e,l,1,a)-1;return i[c](s[c](l))}}function g1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function PS(){var e=HL,t=HL,r=vg,a,s,i,o=Jo,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==Jo&&(o=mce(e[0],e[f-1])),l=f>2?xce:pce,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(a),t,r)))(a(o(f)))}return h.invert=function(f){return o(s((d||(d=l(t,e.map(a),$w)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Vw),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=ST,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Jo,u()):o!==Jo},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return a=f,s=p,u()}}function CT(){return PS()(Jo,Jo)}function vce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function H0(e){return e=qw(Math.abs(e)),e?e[1]:NaN}function gce(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function bce(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var yce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _y(e){if(!(t=yce.exec(e)))throw new Error("invalid format: "+e);var t;return new kT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_y.prototype=kT.prototype;function kT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jce(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var Oq;function Nce(e,t){var r=qw(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(Oq=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+qw(e,Math.max(0,t+i-1))[0]}function WL(e,t){var r=qw(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const GL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>WL(e*100,t),r:WL,s:Nce,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YL(e){return e}var KL=Array.prototype.map,XL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wce(e){var t=e.grouping===void 0||e.thousands===void 0?YL:gce(KL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?YL:bce(KL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=_y(h);var f=h.fill,p=h.align,v=h.sign,g=h.symbol,b=h.zero,y=h.width,S=h.comma,w=h.precision,k=h.trim,C=h.type;C==="n"?(S=!0,C="g"):GL[C]||(w===void 0&&(w=12),k=!0,C="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var _=g==="$"?r:g==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=g==="$"?a:/[%p]/.test(C)?o:"",T=GL[C],I=/[defgprs%]/.test(C);w=w===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(A){var P=_,q=E,V,Y,B;if(C==="c")q=T(A)+q,A="";else{A=+A;var Q=A<0||1/A<0;if(A=isNaN(A)?c:T(Math.abs(A),w),k&&(A=jce(A)),Q&&+A==0&&v!=="+"&&(Q=!1),P=(Q?v==="("?v:l:v==="-"||v==="("?"":v)+P,q=(C==="s"?XL[8+Oq/3]:"")+q+(Q&&v==="("?")":""),I){for(V=-1,Y=A.length;++V<Y;)if(B=A.charCodeAt(V),48>B||B>57){q=(B===46?s+A.slice(V+1):A.slice(V))+q,A=A.slice(0,V);break}}}S&&!b&&(A=t(A,1/0));var R=P.length+A.length+q.length,Z=R<y?new Array(y-R+1).join(f):"";switch(S&&b&&(A=t(Z+A,Z.length?y-q.length:1/0),Z=""),p){case"<":A=P+A+q+Z;break;case"=":A=P+Z+A+q;break;case"^":A=Z.slice(0,R=Z.length>>1)+P+A+q+Z.slice(R);break;default:A=Z+P+A+q;break}return i(A)}return F.toString=function(){return h+""},F}function u(h,f){var p=d((h=_y(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(H0(f)/3)))*3,g=Math.pow(10,-v),b=XL[8+v/3];return function(y){return p(g*y)+b}}return{format:d,formatPrefix:u}}var sN,ET,Mq;Sce({thousands:",",grouping:[3],currency:["$",""]});function Sce(e){return sN=wce(e),ET=sN.format,Mq=sN.formatPrefix,sN}function Cce(e){return Math.max(0,-H0(Math.abs(e)))}function kce(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(H0(t)/3)))*3-H0(Math.abs(e)))}function Ece(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,H0(t)-H0(e))+1}function Rq(e,t,r,a){var s=rA(e,t,r),i;switch(a=_y(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=kce(s,o))&&(a.precision=i),Mq(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=Ece(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=Cce(s))&&(a.precision=i-(a.type==="%")*2);break}}return ET(a)}function sp(e){var t=e.domain;return e.ticks=function(r){var a=t();return eA(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return Rq(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=tA(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Fq(){var e=CT();return e.copy=function(){return g1(e,Fq())},Jc.apply(e,arguments),sp(e)}function Lq(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Vw),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return Lq(e).unknown(t)},e=arguments.length?Array.from(e,Vw):[0,1],sp(r)}function Bq(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function QL(e){return Math.log(e)}function JL(e){return Math.exp(e)}function _ce(e){return-Math.log(-e)}function Dce(e){return-Math.exp(-e)}function Ace(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tce(e){return e===10?Ace:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ice(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ZL(e){return(t,r)=>-e(-t,r)}function _T(e){const t=e(QL,JL),r=t.domain;let a=10,s,i;function o(){return s=Ice(a),i=Tce(a),r()[0]<0?(s=ZL(s),i=ZL(i),e(_ce,Dce)):e(QL,JL),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=s(d),p=s(u),v,g;const b=l==null?10:+l;let y=[];if(!(a%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),d>0){for(;f<=p;++f)for(v=1;v<a;++v)if(g=f<0?v/i(-f):v*i(f),!(g<d)){if(g>u)break;y.push(g)}}else for(;f<=p;++f)for(v=a-1;v>=1;--v)if(g=f>0?v/i(-f):v*i(f),!(g<d)){if(g>u)break;y.push(g)}y.length*2<b&&(y=eA(d,u,b))}else y=eA(f,p,Math.min(p-f,b)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=_y(c)).precision==null&&(c.trim=!0),c=ET(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*a<a-.5&&(h*=a),h<=d?c(u):""}},t.nice=()=>r(Bq(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function Uq(){const e=_T(PS()).domain([1,10]);return e.copy=()=>g1(e,Uq()).base(e.base()),Jc.apply(e,arguments),e}function e6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function t6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function DT(e){var t=1,r=e(e6(t),t6(t));return r.constant=function(a){return arguments.length?e(e6(t=+a),t6(t)):t},sp(r)}function $q(){var e=DT(PS());return e.copy=function(){return g1(e,$q()).constant(e.constant())},Jc.apply(e,arguments)}function r6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oce(e){return e<0?-e*e:e*e}function AT(e){var t=e(Jo,Jo),r=1;function a(){return r===1?e(Jo,Jo):r===.5?e(Pce,Oce):e(r6(r),r6(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},sp(t)}function TT(){var e=AT(PS());return e.copy=function(){return g1(e,TT()).exponent(e.exponent())},Jc.apply(e,arguments),e}function Mce(){return TT.apply(null,arguments).exponent(.5)}function a6(e){return Math.sign(e)*e*e}function Rce(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Vq(){var e=CT(),t=[0,1],r=!1,a;function s(i){var o=Rce(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(a6(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Vw)).map(a6)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return Vq(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Jc.apply(s,arguments),sp(s)}function qq(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Ule(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[x1(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Rm),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return qq().domain(e).range(t).unknown(a)},Jc.apply(i,arguments)}function zq(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[x1(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return zq().domain([e,t]).range(s).unknown(i)},Jc.apply(sp(o),arguments)}function Hq(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[x1(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Hq().domain(e).range(t).unknown(r)},Jc.apply(s,arguments)}const f_=new Date,m_=new Date;function wi(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>wi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(f_.setTime(+i),m_.setTime(+o),e(f_),e(m_),Math.floor(r(f_,m_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const zw=wi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);zw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):zw);zw.range;const zh=1e3,Vc=zh*60,Hh=Vc*60,lf=Hh*24,IT=lf*7,n6=lf*30,p_=lf*365,ix=wi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zh)},(e,t)=>(t-e)/zh,e=>e.getUTCSeconds());ix.range;const PT=wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zh)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getMinutes());PT.range;const OT=wi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getUTCMinutes());OT.range;const MT=wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zh-e.getMinutes()*Vc)},(e,t)=>{e.setTime(+e+t*Hh)},(e,t)=>(t-e)/Hh,e=>e.getHours());MT.range;const RT=wi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hh)},(e,t)=>(t-e)/Hh,e=>e.getUTCHours());RT.range;const b1=wi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vc)/lf,e=>e.getDate()-1);b1.range;const OS=wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lf,e=>e.getUTCDate()-1);OS.range;const Wq=wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lf,e=>Math.floor(e/lf));Wq.range;function Wx(e){return wi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Vc)/IT)}const MS=Wx(0),Hw=Wx(1),Fce=Wx(2),Lce=Wx(3),W0=Wx(4),Bce=Wx(5),Uce=Wx(6);MS.range;Hw.range;Fce.range;Lce.range;W0.range;Bce.range;Uce.range;function Gx(e){return wi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/IT)}const RS=Gx(0),Ww=Gx(1),$ce=Gx(2),Vce=Gx(3),G0=Gx(4),qce=Gx(5),zce=Gx(6);RS.range;Ww.range;$ce.range;Vce.range;G0.range;qce.range;zce.range;const FT=wi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FT.range;const LT=wi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LT.range;const cf=wi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});cf.range;const df=wi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());df.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});df.range;function Gq(e,t,r,a,s,i){const o=[[ix,1,zh],[ix,5,5*zh],[ix,15,15*zh],[ix,30,30*zh],[i,1,Vc],[i,5,5*Vc],[i,15,15*Vc],[i,30,30*Vc],[s,1,Hh],[s,3,3*Hh],[s,6,6*Hh],[s,12,12*Hh],[a,1,lf],[a,2,2*lf],[r,1,IT],[t,1,n6],[t,3,3*n6],[e,1,p_]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),v=p?p.range(d,+u+1):[];return f?v.reverse():v}function c(d,u,h){const f=Math.abs(u-d)/h,p=bT(([,,b])=>b).right(o,f);if(p===o.length)return e.every(rA(d/p_,u/p_,h));if(p===0)return zw.every(Math.max(rA(d,u,h),1));const[v,g]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return v.every(g)}return[l,c]}const[Hce,Wce]=Gq(df,LT,RS,Wq,RT,OT),[Gce,Yce]=Gq(cf,FT,MS,b1,MT,PT);function x_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function v_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ab(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Kce(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Tb(s),u=Ib(s),h=Tb(i),f=Ib(i),p=Tb(o),v=Ib(o),g=Tb(l),b=Ib(l),y=Tb(c),S=Ib(c),w={a:Q,A:R,b:Z,B:J,c:null,d:d6,e:d6,f:gde,g:_de,G:Ade,H:pde,I:xde,j:vde,L:Yq,m:bde,M:yde,p:ie,q:M,Q:f6,s:m6,S:jde,u:Nde,U:wde,V:Sde,w:Cde,W:kde,x:null,X:null,y:Ede,Y:Dde,Z:Tde,"%":h6},k={a:z,A:ee,b:ne,B:W,c:null,d:u6,e:u6,f:Mde,g:Hde,G:Gde,H:Ide,I:Pde,j:Ode,L:Xq,m:Rde,M:Fde,p:re,q:le,Q:f6,s:m6,S:Lde,u:Bde,U:Ude,V:$de,w:Vde,W:qde,x:null,X:null,y:zde,Y:Wde,Z:Yde,"%":h6},C={a:F,A,b:P,B:q,c:V,d:l6,e:l6,f:ude,g:o6,G:i6,H:c6,I:c6,j:ode,L:dde,m:ide,M:lde,p:I,q:sde,Q:fde,s:mde,S:cde,u:ede,U:tde,V:rde,w:Zce,W:ade,x:Y,X:B,y:o6,Y:i6,Z:nde,"%":hde};w.x=_(r,w),w.X=_(a,w),w.c=_(t,w),k.x=_(r,k),k.X=_(a,k),k.c=_(t,k);function _(te,K){return function(de){var H=[],se=-1,be=0,ue=te.length,oe,ge,Ne;for(de instanceof Date||(de=new Date(+de));++se<ue;)te.charCodeAt(se)===37&&(H.push(te.slice(be,se)),(ge=s6[oe=te.charAt(++se)])!=null?oe=te.charAt(++se):ge=oe==="e"?" ":"0",(Ne=K[oe])&&(oe=Ne(de,ge)),H.push(oe),be=se+1);return H.push(te.slice(be,se)),H.join("")}}function E(te,K){return function(de){var H=Ab(1900,void 0,1),se=T(H,te,de+="",0),be,ue;if(se!=de.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(K&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(be=v_(Ab(H.y,0,1)),ue=be.getUTCDay(),be=ue>4||ue===0?Ww.ceil(be):Ww(be),be=OS.offset(be,(H.V-1)*7),H.y=be.getUTCFullYear(),H.m=be.getUTCMonth(),H.d=be.getUTCDate()+(H.w+6)%7):(be=x_(Ab(H.y,0,1)),ue=be.getDay(),be=ue>4||ue===0?Hw.ceil(be):Hw(be),be=b1.offset(be,(H.V-1)*7),H.y=be.getFullYear(),H.m=be.getMonth(),H.d=be.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),ue="Z"in H?v_(Ab(H.y,0,1)).getUTCDay():x_(Ab(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(ue+5)%7:H.w+H.U*7-(ue+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,v_(H)):x_(H)}}function T(te,K,de,H){for(var se=0,be=K.length,ue=de.length,oe,ge;se<be;){if(H>=ue)return-1;if(oe=K.charCodeAt(se++),oe===37){if(oe=K.charAt(se++),ge=C[oe in s6?K.charAt(se++):oe],!ge||(H=ge(te,de,H))<0)return-1}else if(oe!=de.charCodeAt(H++))return-1}return H}function I(te,K,de){var H=d.exec(K.slice(de));return H?(te.p=u.get(H[0].toLowerCase()),de+H[0].length):-1}function F(te,K,de){var H=p.exec(K.slice(de));return H?(te.w=v.get(H[0].toLowerCase()),de+H[0].length):-1}function A(te,K,de){var H=h.exec(K.slice(de));return H?(te.w=f.get(H[0].toLowerCase()),de+H[0].length):-1}function P(te,K,de){var H=y.exec(K.slice(de));return H?(te.m=S.get(H[0].toLowerCase()),de+H[0].length):-1}function q(te,K,de){var H=g.exec(K.slice(de));return H?(te.m=b.get(H[0].toLowerCase()),de+H[0].length):-1}function V(te,K,de){return T(te,t,K,de)}function Y(te,K,de){return T(te,r,K,de)}function B(te,K,de){return T(te,a,K,de)}function Q(te){return o[te.getDay()]}function R(te){return i[te.getDay()]}function Z(te){return c[te.getMonth()]}function J(te){return l[te.getMonth()]}function ie(te){return s[+(te.getHours()>=12)]}function M(te){return 1+~~(te.getMonth()/3)}function z(te){return o[te.getUTCDay()]}function ee(te){return i[te.getUTCDay()]}function ne(te){return c[te.getUTCMonth()]}function W(te){return l[te.getUTCMonth()]}function re(te){return s[+(te.getUTCHours()>=12)]}function le(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var K=_(te+="",w);return K.toString=function(){return te},K},parse:function(te){var K=E(te+="",!1);return K.toString=function(){return te},K},utcFormat:function(te){var K=_(te+="",k);return K.toString=function(){return te},K},utcParse:function(te){var K=E(te+="",!0);return K.toString=function(){return te},K}}}var s6={"-":"",_:" ",0:"0"},qi=/^\s*\d+/,Xce=/^%/,Qce=/[\\^$*+?|[\]().{}]/g;function Za(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function Jce(e){return e.replace(Qce,"\\$&")}function Tb(e){return new RegExp("^(?:"+e.map(Jce).join("|")+")","i")}function Ib(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Zce(e,t,r){var a=qi.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function ede(e,t,r){var a=qi.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function tde(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function rde(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function ade(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function i6(e,t,r){var a=qi.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function o6(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function nde(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function sde(e,t,r){var a=qi.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function ide(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function l6(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function ode(e,t,r){var a=qi.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function c6(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function lde(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function cde(e,t,r){var a=qi.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function dde(e,t,r){var a=qi.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function ude(e,t,r){var a=qi.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function hde(e,t,r){var a=Xce.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function fde(e,t,r){var a=qi.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function mde(e,t,r){var a=qi.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function d6(e,t){return Za(e.getDate(),t,2)}function pde(e,t){return Za(e.getHours(),t,2)}function xde(e,t){return Za(e.getHours()%12||12,t,2)}function vde(e,t){return Za(1+b1.count(cf(e),e),t,3)}function Yq(e,t){return Za(e.getMilliseconds(),t,3)}function gde(e,t){return Yq(e,t)+"000"}function bde(e,t){return Za(e.getMonth()+1,t,2)}function yde(e,t){return Za(e.getMinutes(),t,2)}function jde(e,t){return Za(e.getSeconds(),t,2)}function Nde(e){var t=e.getDay();return t===0?7:t}function wde(e,t){return Za(MS.count(cf(e)-1,e),t,2)}function Kq(e){var t=e.getDay();return t>=4||t===0?W0(e):W0.ceil(e)}function Sde(e,t){return e=Kq(e),Za(W0.count(cf(e),e)+(cf(e).getDay()===4),t,2)}function Cde(e){return e.getDay()}function kde(e,t){return Za(Hw.count(cf(e)-1,e),t,2)}function Ede(e,t){return Za(e.getFullYear()%100,t,2)}function _de(e,t){return e=Kq(e),Za(e.getFullYear()%100,t,2)}function Dde(e,t){return Za(e.getFullYear()%1e4,t,4)}function Ade(e,t){var r=e.getDay();return e=r>=4||r===0?W0(e):W0.ceil(e),Za(e.getFullYear()%1e4,t,4)}function Tde(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Za(t/60|0,"0",2)+Za(t%60,"0",2)}function u6(e,t){return Za(e.getUTCDate(),t,2)}function Ide(e,t){return Za(e.getUTCHours(),t,2)}function Pde(e,t){return Za(e.getUTCHours()%12||12,t,2)}function Ode(e,t){return Za(1+OS.count(df(e),e),t,3)}function Xq(e,t){return Za(e.getUTCMilliseconds(),t,3)}function Mde(e,t){return Xq(e,t)+"000"}function Rde(e,t){return Za(e.getUTCMonth()+1,t,2)}function Fde(e,t){return Za(e.getUTCMinutes(),t,2)}function Lde(e,t){return Za(e.getUTCSeconds(),t,2)}function Bde(e){var t=e.getUTCDay();return t===0?7:t}function Ude(e,t){return Za(RS.count(df(e)-1,e),t,2)}function Qq(e){var t=e.getUTCDay();return t>=4||t===0?G0(e):G0.ceil(e)}function $de(e,t){return e=Qq(e),Za(G0.count(df(e),e)+(df(e).getUTCDay()===4),t,2)}function Vde(e){return e.getUTCDay()}function qde(e,t){return Za(Ww.count(df(e)-1,e),t,2)}function zde(e,t){return Za(e.getUTCFullYear()%100,t,2)}function Hde(e,t){return e=Qq(e),Za(e.getUTCFullYear()%100,t,2)}function Wde(e,t){return Za(e.getUTCFullYear()%1e4,t,4)}function Gde(e,t){var r=e.getUTCDay();return e=r>=4||r===0?G0(e):G0.ceil(e),Za(e.getUTCFullYear()%1e4,t,4)}function Yde(){return"+0000"}function h6(){return"%"}function f6(e){return+e}function m6(e){return Math.floor(+e/1e3)}var Hv,Jq,Zq;Kde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kde(e){return Hv=Kce(e),Jq=Hv.format,Hv.parse,Zq=Hv.utcFormat,Hv.utcParse,Hv}function Xde(e){return new Date(e)}function Qde(e){return e instanceof Date?+e:+new Date(+e)}function BT(e,t,r,a,s,i,o,l,c,d){var u=CT(),h=u.invert,f=u.domain,p=d(".%L"),v=d(":%S"),g=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),S=d("%b %d"),w=d("%B"),k=d("%Y");function C(_){return(c(_)<_?p:l(_)<_?v:o(_)<_?g:i(_)<_?b:a(_)<_?s(_)<_?y:S:r(_)<_?w:k)(_)}return u.invert=function(_){return new Date(h(_))},u.domain=function(_){return arguments.length?f(Array.from(_,Qde)):f().map(Xde)},u.ticks=function(_){var E=f();return e(E[0],E[E.length-1],_??10)},u.tickFormat=function(_,E){return E==null?C:d(E)},u.nice=function(_){var E=f();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?f(Bq(E,_)):u},u.copy=function(){return g1(u,BT(e,t,r,a,s,i,o,l,c,d))},u}function Jde(){return Jc.apply(BT(Gce,Yce,cf,FT,MS,b1,MT,PT,ix,Jq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zde(){return Jc.apply(BT(Hce,Wce,df,LT,RS,OS,RT,OT,ix,Zq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function FS(){var e=0,t=1,r,a,s,i,o=Jo,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var p,v;return arguments.length?([p,v]=f,o=h(p,v),d):[o(0),o(1)]}}return d.range=u(vg),d.rangeRound=u(ST),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),a=h(t),s=r===a?0:1/(a-r),d}}function ip(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ez(){var e=sp(FS()(Jo));return e.copy=function(){return ip(e,ez())},xf.apply(e,arguments)}function tz(){var e=_T(FS()).domain([1,10]);return e.copy=function(){return ip(e,tz()).base(e.base())},xf.apply(e,arguments)}function rz(){var e=DT(FS());return e.copy=function(){return ip(e,rz()).constant(e.constant())},xf.apply(e,arguments)}function UT(){var e=AT(FS());return e.copy=function(){return ip(e,UT()).exponent(e.exponent())},xf.apply(e,arguments)}function eue(){return UT.apply(null,arguments).exponent(.5)}function az(){var e=[],t=Jo;function r(a){if(a!=null&&!isNaN(a=+a))return t((x1(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Rm),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>Ble(e,i/a))},r.copy=function(){return az(t).domain(e)},xf.apply(r,arguments)}function LS(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=Jo,u,h=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-i)*(a*g<a*i?l:c),d(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(d=g,p):d};function v(g){return function(b){var y,S,w;return arguments.length?([y,S,w]=b,d=hce(g,[y,S,w]),p):[d(0),d(.5),d(1)]}}return p.range=v(vg),p.rangeRound=v(ST),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return u=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p}}function nz(){var e=sp(LS()(Jo));return e.copy=function(){return ip(e,nz())},xf.apply(e,arguments)}function sz(){var e=_T(LS()).domain([.1,1,10]);return e.copy=function(){return ip(e,sz()).base(e.base())},xf.apply(e,arguments)}function iz(){var e=DT(LS());return e.copy=function(){return ip(e,iz()).constant(e.constant())},xf.apply(e,arguments)}function $T(){var e=AT(LS());return e.copy=function(){return ip(e,$T()).exponent(e.exponent())},xf.apply(e,arguments)}function tue(){return $T.apply(null,arguments).exponent(.5)}const Qb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jT,scaleDiverging:nz,scaleDivergingLog:sz,scaleDivergingPow:$T,scaleDivergingSqrt:tue,scaleDivergingSymlog:iz,scaleIdentity:Lq,scaleImplicit:aA,scaleLinear:Fq,scaleLog:Uq,scaleOrdinal:yT,scalePoint:Vle,scalePow:TT,scaleQuantile:qq,scaleQuantize:zq,scaleRadial:Vq,scaleSequential:ez,scaleSequentialLog:tz,scaleSequentialPow:UT,scaleSequentialQuantile:az,scaleSequentialSqrt:eue,scaleSequentialSymlog:rz,scaleSqrt:Mce,scaleSymlog:$q,scaleThreshold:Hq,scaleTime:Jde,scaleUtc:Zde,tickFormat:Rq},Symbol.toStringTag,{value:"Module"}));var Yx=e=>e.chartData,VT=Ut([Yx],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),qT=(e,t,r,a)=>a?VT(e):Yx(e);function Y0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(oo(t)&&oo(r))return!0}return!1}function p6(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function rue(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,s,i;if(oo(r))s=r;else if(typeof r=="function")return;if(oo(a))i=a;else if(typeof a=="function")return;var o=[s,i];if(Y0(o))return o}}function aue(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Y0(a))return p6(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Er(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&rL.test(s)){var c=rL.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Er(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&aL.test(i)){var u=aL.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var f=[o,l];if(Y0(f))return t==null?f:p6(f,t,r)}}}var gg=1e9,nue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HT,rs=!0,Wc="[DecimalError] ",gx=Wc+"Invalid argument: ",zT=Wc+"Exponent out of range: ",bg=Math.floor,Wp=Math.pow,sue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ql,Mi=1e7,zn=7,oz=9007199254740991,Gw=bg(oz/zn),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*zn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return Kh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Tn(Kh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return di(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ql))throw Error(Wc+"NaN");if(r.s<1)throw Error(Wc+(r.s?"NaN":"-Infinity"));return r.eq(Ql)?new a(0):(rs=!1,t=Kh(Dy(r,i),Dy(e,i),i),rs=!0,Tn(t,s))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dz(t,e):lz(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Wc+"NaN");return r.s?(rs=!1,t=Kh(r,e,0,1).times(e),rs=!0,r.minus(t)):Tn(new a(r),s)};Ar.naturalExponential=Ar.exp=function(){return cz(this)};Ar.naturalLogarithm=Ar.ln=function(){return Dy(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lz(t,e):dz(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(gx+e);if(t=di(s)+1,a=s.d.length-1,r=a*zn+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wc+"NaN")}for(e=di(l),rs=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Lu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=bg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(Kh(l,i,o+2)).times(.5),Lu(i.d).slice(0,o)===(t=Lu(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Tn(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return rs=!0,Tn(a,r)};Ar.times=Ar.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=p.length,c<d&&(i=f,f=p,p=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+p[a]*f[s-a-1]+t,i[s--]=l%Mi|0,t=l/Mi|0;i[s]=(i[s]+t)%Mi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,rs?Tn(e,h.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Qu(e,0,gg),t===void 0?t=a.rounding:Qu(t,0,8),Tn(r,e+di(r)+1,t))};Ar.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Ix(a,!0):(Qu(e,0,gg),t===void 0?t=s.rounding:Qu(t,0,8),a=Tn(new s(a),e+1,t),r=Ix(a,!0,e+1)),r};Ar.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Ix(s):(Qu(e,0,gg),t===void 0?t=i.rounding:Qu(t,0,8),a=Tn(new i(s),e+di(s)+1,t),r=Ix(a.abs(),!1,e+di(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Tn(new t(e),di(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Ql);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wc+"Infinity");return l}if(l.eq(Ql))return l;if(a=c.precision,e.eq(Ql))return Tn(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=oz){for(s=new c(Ql),t=Math.ceil(a/zn+4),rs=!1;r%2&&(s=s.times(l),v6(s.d,t)),r=bg(r/2),r!==0;)l=l.times(l),v6(l.d,t);return rs=!0,e.s<0?new c(Ql).div(s):Tn(s,a)}}else if(i<0)throw Error(Wc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,rs=!1,s=e.times(Dy(l,a+d)),rs=!0,s=cz(s),s.s=i,s};Ar.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=di(s),a=Ix(s,r<=i.toExpNeg||r>=i.toExpPos)):(Qu(e,1,gg),t===void 0?t=i.rounding:Qu(t,0,8),s=Tn(new i(s),e,t),r=di(s),a=Ix(s,e<=r||r<=i.toExpNeg,e)),a};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Qu(e,1,gg),t===void 0?t=a.rounding:Qu(t,0,8)),Tn(new a(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=di(e),r=e.constructor;return Ix(e,t<=r.toExpNeg||t>=r.toExpPos)};function lz(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),rs?Tn(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(h/zn),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/Mi|0,c[i]%=Mi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,rs?Tn(t,h):t}function Qu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(gx+e)}function Lu(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=zn-a.length,r&&(i+=Em(r)),i+=a;o=e[t],a=o+"",r=zn-a.length,r&&(i+=Em(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Kh=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Mi|0,o=i/Mi|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Mi+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T,I=a.constructor,F=a.s==s.s?1:-1,A=a.d,P=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(Wc+"Division by zero");for(c=a.e-s.e,E=P.length,C=A.length,p=new I(F),v=p.d=[],d=0;P[d]==(A[d]||0);)++d;if(P[d]>(A[d]||0)&&--c,i==null?S=i=I.precision:o?S=i+(di(a)-di(s))+1:S=i,S<0)return new I(0);if(S=S/zn+2|0,d=0,E==1)for(u=0,P=P[0],S++;(d<C||u)&&S--;d++)w=u*Mi+(A[d]||0),v[d]=w/P|0,u=w%P|0;else{for(u=Mi/(P[0]+1)|0,u>1&&(P=e(P,u),A=e(A,u),E=P.length,C=A.length),k=E,g=A.slice(0,E),b=g.length;b<E;)g[b++]=0;T=P.slice(),T.unshift(0),_=P[0],P[1]>=Mi/2&&++_;do u=0,l=t(P,g,E,b),l<0?(y=g[0],E!=b&&(y=y*Mi+(g[1]||0)),u=y/_|0,u>1?(u>=Mi&&(u=Mi-1),h=e(P,u),f=h.length,b=g.length,l=t(h,g,f,b),l==1&&(u--,r(h,E<f?T:P,f))):(u==0&&(l=u=1),h=P.slice()),f=h.length,f<b&&h.unshift(0),r(g,h,b),l==-1&&(b=g.length,l=t(P,g,E,b),l<1&&(u++,r(g,E<b?T:P,b))),b=g.length):l===0&&(u++,g=[0]),v[d++]=u,l&&g[0]?g[b++]=A[k]||0:(g=[A[k]],b=1);while((k++<C||g[0]!==void 0)&&S--)}return v[0]||v.shift(),p.e=c,Tn(p,o?i+di(p)+1:i)}}();function cz(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(di(e)>16)throw Error(zT+di(e));if(!e.s)return new u(Ql);for(rs=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(Wp(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(Ql),u.precision=l;;){if(s=Tn(s.times(e),l),r=r.times(++c),o=i.plus(Kh(s,r,l)),Lu(o.d).slice(0,l)===Lu(i.d).slice(0,l)){for(;d--;)i=Tn(i.times(i),l);return u.precision=h,t==null?(rs=!0,Tn(i,h)):i}i=o}}function di(e){for(var t=e.e*zn,r=e.d[0];r>=10;r/=10)t++;return t}function g_(e,t,r){if(t>e.LN10.sd())throw rs=!0,r&&(e.precision=r),Error(Wc+"LN10 precision limit exceeded");return Tn(new e(e.LN10),t)}function Em(e){for(var t="";e--;)t+="0";return t}function Dy(e,t){var r,a,s,i,o,l,c,d,u,h=1,f=10,p=e,v=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(Wc+(p.s?"NaN":"-Infinity"));if(p.eq(Ql))return new g(0);if(t==null?(rs=!1,d=b):d=t,p.eq(10))return t==null&&(rs=!0),g_(g,d);if(d+=f,g.precision=d,r=Lu(v),a=r.charAt(0),i=di(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=Lu(p.d),a=r.charAt(0),h++;i=di(p),a>1?(p=new g("0."+r),i++):p=new g(a+"."+r.slice(1))}else return c=g_(g,d+2,b).times(i+""),p=Dy(new g(a+"."+r.slice(1)),d-f).plus(c),g.precision=b,t==null?(rs=!0,Tn(p,b)):p;for(l=o=p=Kh(p.minus(Ql),p.plus(Ql),d),u=Tn(p.times(p),d),s=3;;){if(o=Tn(o.times(u),d),c=l.plus(Kh(o,new g(s),d)),Lu(c.d).slice(0,d)===Lu(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(g_(g,d+2,b).times(i+""))),l=Kh(l,new g(h),d),g.precision=b,t==null?(rs=!0,Tn(l,b)):l;l=c,s+=2}}function x6(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=bg(r/zn),e.d=[],a=(r+1)%zn,r<0&&(a+=zn),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=zn;a<s;)e.d.push(+t.slice(a,a+=zn));t=t.slice(a),a=zn-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),rs&&(e.e>Gw||e.e<-Gw))throw Error(zT+r)}else e.s=0,e.e=0,e.d=[0];return e}function Tn(e,t,r){var a,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=zn,s=t,d=h[u=0];else{if(u=Math.ceil((a+1)/zn),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;a%=zn,s=a-zn+o}if(r!==void 0&&(i=Wp(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/Wp(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=di(e),h.length=1,t=t-i-1,h[0]=Wp(10,(zn-t%zn)%zn),e.e=bg(-t/zn)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(a==0?(h.length=u,i=1,u--):(h.length=u+1,i=Wp(10,zn-a),h[u]=s>0?(d/Wp(10,o-s)%Wp(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==Mi&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Mi)break;h[u--]=0,i=1}for(a=h.length;h[--a]===0;)h.pop();if(rs&&(e.e>Gw||e.e<-Gw))throw Error(zT+di(e));return e}function dz(e,t){var r,a,s,i,o,l,c,d,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),rs?Tn(t,p):t;if(c=e.d,h=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,a=d,l=c.length),s=Math.max(Math.ceil(p/zn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Mi-1;--c[i],c[s]+=Mi}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,rs?Tn(t,p):t):new f(0)}function Ix(e,t,r){var a,s=di(e),i=Lu(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Em(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Em(-s-1)+i,r&&(a=r-o)>0&&(i+=Em(a))):s>=o?(i+=Em(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+Em(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=Em(a))),e.s<0?"-"+i:i}function v6(e,t){if(e.length>t)return e.length=t,!0}function uz(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(gx+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return x6(o,i.toString())}else if(typeof i!="string")throw Error(gx+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,sue.test(i))x6(o,i);else throw Error(gx+i)}if(s.prototype=Ar,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=uz,s.config=s.set=iue,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function iue(e){if(!e||typeof e!="object")throw Error(Wc+"Object expected");var t,r,a,s=["precision",1,gg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(bg(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(gx+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(gx+r+": "+a);return this}var HT=uz(nue);Ql=new HT(1);const yn=HT;var oue=e=>e,hz={},fz=e=>e===hz,g6=e=>function t(){return arguments.length===0||arguments.length===1&&fz(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},mz=(e,t)=>e===1?t:g6(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter(o=>o!==hz).length;return i>=e?t(...a):mz(e-i,g6(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(u=>fz(u)?l.shift():u);return t(...d,...l)}))}),BS=e=>mz(e.length,e),oA=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},lue=BS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),cue=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return oue;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},lA=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),pz=e=>{var t=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function xz(e){var t;return e===0?t=1:t=Math.floor(new yn(e).abs().log(10).toNumber())+1,t}function vz(e,t,r){for(var a=new yn(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}BS((e,t,r)=>{var a=+e,s=+t;return a+r*(s-a)});BS((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});BS((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var gz=e=>{var[t,r]=e,[a,s]=[t,r];return t>r&&([a,s]=[r,t]),[a,s]},bz=(e,t,r)=>{if(e.lte(0))return new yn(0);var a=xz(e.toNumber()),s=new yn(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new yn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new yn(c.toNumber()):new yn(Math.ceil(c.toNumber()))},due=(e,t,r)=>{var a=new yn(1),s=new yn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new yn(10).pow(xz(e)-1),s=new yn(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new yn(Math.floor(e)))}else e===0?s=new yn(Math.floor((t-1)/2)):r||(s=new yn(Math.floor(e)));var o=Math.floor((t-1)/2),l=cue(lue(c=>s.add(new yn(c-o).mul(a)).toNumber()),oA);return l(0,t)},yz=function(t,r,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var o=bz(new yn(r).sub(t).div(a-1),s,i),l;t<=0&&r>=0?l=new yn(0):(l=new yn(t).add(r).div(2),l=l.sub(new yn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new yn(r).sub(l).div(o).toNumber()),u=c+d+1;return u>a?yz(t,r,a,s,i+1):(u<a&&(d=r>0?d+(a-u):d,c=r>0?c:c+(a-u)),{step:o,tickMin:l.sub(new yn(c).mul(o)),tickMax:l.add(new yn(d).mul(o))})};function uue(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=gz([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...oA(0,a-1).map(()=>1/0)]:[...oA(0,a-1).map(()=>-1/0),l];return t>r?lA(c):c}if(o===l)return due(o,a,s);var{step:d,tickMin:u,tickMax:h}=yz(o,l,i,s,0),f=vz(u,h.add(new yn(.1).mul(d)),d);return t>r?lA(f):f}function hue(e,t){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=gz([r,a]);if(i===-1/0||o===1/0)return[r,a];if(i===o)return[i];var l=Math.max(t,2),c=bz(new yn(o).sub(i).div(l-1),s,0),d=[...vz(new yn(i),new yn(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>a?lA(d):d}var fue=pz(uue),mue=pz(hue),jz=e=>e.rootProps.maxBarSize,pue=e=>e.rootProps.barGap,Nz=e=>e.rootProps.barCategoryGap,xue=e=>e.rootProps.barSize,y1=e=>e.rootProps.stackOffset,WT=e=>e.options.chartName,GT=e=>e.rootProps.syncId,wz=e=>e.rootProps.syncMethod,YT=e=>e.options.eventEmitter,$h={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Hl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},US=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},vue={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$h.angleAxisId,includeHidden:!1,name:void 0,reversed:$h.reversed,scale:$h.scale,tick:$h.tick,tickCount:void 0,ticks:void 0,type:$h.type,unit:void 0},gue={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:Hl.type,unit:void 0},bue={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$h.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$h.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$h.scale,tick:$h.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},yue={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:"category",unit:void 0},KT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?bue:vue,XT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?yue:gue,$S=e=>e.polarOptions,QT=Ut([mf,pf,Ni],oq),Sz=Ut([$S,QT],(e,t)=>{if(e!=null)return el(e.innerRadius,t,0)}),Cz=Ut([$S,QT],(e,t)=>{if(e!=null)return el(e.outerRadius,t,t*.8)}),jue=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},kz=Ut([$S],jue);Ut([KT,kz],US);var Ez=Ut([QT,Sz,Cz],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ut([XT,Ez],US);var Nue=Ut([en,$S,Sz,Cz,mf,pf],(e,t,r,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:el(o,s,s/2),cy:el(l,i,i/2),innerRadius:r,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Ks=(e,t)=>t,j1=(e,t,r)=>r;function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(a){wue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wue(e,t,r){return(t=Sue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sue(e){var t=Cue(e,"string");return typeof t=="symbol"?t:t+""}function Cue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cA=[0,"auto"],ql={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},vf=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??ql},zl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:cA,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DS},op=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??zl},kue={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},JT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??kue},Xs=(e,t,r)=>{switch(t){case"xAxis":return vf(e,r);case"yAxis":return op(e,r);case"zAxis":return JT(e,r);case"angleAxis":return KT(e,r);case"radiusAxis":return XT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Eue=(e,t,r)=>{switch(t){case"xAxis":return vf(e,r);case"yAxis":return op(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},N1=(e,t,r)=>{switch(t){case"xAxis":return vf(e,r);case"yAxis":return op(e,r);case"angleAxis":return KT(e,r);case"radiusAxis":return XT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_z=e=>e.graphicalItems.countOfBars>0;function ZT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var VS=e=>e.graphicalItems.cartesianItems,_ue=Ut([Ks,j1],ZT),e4=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),w1=Ut([VS,Xs,_ue],e4),Dz=e=>e.filter(t=>t.stackId===void 0),Due=Ut([w1],Dz),t4=e=>e.map(t=>t.data).filter(Boolean).flat(1),Aue=Ut([w1],t4),r4=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:r.slice(a,s+1)},qS=Ut([Aue,qT],r4),a4=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:Wn(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:Wn(s,a)}))):e.map(a=>({value:a})),zS=Ut([qS,Xs,w1],a4);function Az(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Kx(e){return e.filter(t=>Xu(t)||t instanceof Date).map(Number).filter(t=>yl(t)===!1)}function Tue(e,t,r){return!r||typeof t!="number"||yl(t)?[]:r.length?Kx(r.flatMap(a=>{var s=Wn(e,a.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!oo(i)||!oo(o)))return[t-i,t+o]})):[]}var Tz=(e,t,r)=>{var a={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:Tie(e,c,r),graphicalItems:l}]}))},Ay=Ut([qS,w1,y1],Tz),Iz=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Mie(e,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Iue=Ut([Ay,Yx,Ks],Iz),Pz=(e,t,r,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>Az(a,u)),d=Wn(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:Tue(s,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Wn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Pue=Ut(qS,Xs,Due,Ks,Pz);function Oue(e){var{value:t}=e;if(Xu(t)||t instanceof Date)return t}var Mue=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Kx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Rue=(e,t,r)=>{var a=e.map(Oue).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&aV(a))?kq(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},n4=e=>{var t;if(e==null||!("domain"in e))return cA;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Kx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:cA},s4=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},Oz=e=>e.referenceElements.dots,yg=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),Fue=Ut([Oz,Ks,j1],yg),Mz=e=>e.referenceElements.areas,Lue=Ut([Mz,Ks,j1],yg),Rz=e=>e.referenceElements.lines,Bue=Ut([Rz,Ks,j1],yg),Fz=(e,t)=>{var r=Kx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Uue=Ut(Fue,Ks,Fz),Lz=(e,t)=>{var r=Kx(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$ue=Ut([Lue,Ks],Lz),Bz=(e,t)=>{var r=Kx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Vue=Ut(Bue,Ks,Bz),que=Ut(Uue,Vue,$ue,(e,t,r)=>s4(e,r,t)),Uz=Ut([Xs],n4),i4=(e,t,r,a,s)=>{var i=rue(t,e.allowDataOverflow);return i??aue(t,s4(r,s,Mue(a)),e.allowDataOverflow)},zue=Ut([Xs,Uz,Iue,Pue,que],i4),Hue=[0,1],o4=(e,t,r,a,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,d=ff(t,i);return d&&l==null?kq(0,r.length):c==="category"?Rue(a,e,d):s==="expand"?Hue:o}},l4=Ut([Xs,en,qS,zS,y1,Ks,zue],o4),$z=(e,t,r,a,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(h1(i));return l in Qb?l:"point"}}},jg=Ut([Xs,en,_z,WT,Ks],$z);function Wue(e){if(e!=null){if(e in Qb)return Qb[e]();var t="scale".concat(h1(e));if(t in Qb)return Qb[t]()}}function c4(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var s=Wue(t);if(s!=null){var i=s.domain(r).range(a);return kie(i),i}}}var d4=(e,t,r)=>{var a=n4(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Y0(e))return fue(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Y0(e))return mue(e,t.tickCount,t.allowDecimals)}},u4=Ut([l4,N1,jg],d4),h4=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Y0(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},Gue=Ut([Xs,l4,u4,Ks],h4),Yue=Ut(zS,Xs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Kx(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];r=Math.min(r,o)}return r/s}}),Vz=Ut(Yue,en,Nz,Ni,(e,t,r,a)=>a,(e,t,r,a,s)=>{if(!oo(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=el(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),Kue=(e,t)=>{var r=vf(e,t);return r==null||typeof r.padding!="string"?0:Vz(e,"xAxis",t,r.padding)},Xue=(e,t)=>{var r=op(e,t);return r==null||typeof r.padding!="string"?0:Vz(e,"yAxis",t,r.padding)},Que=Ut(vf,Kue,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),Jue=Ut(op,Xue,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),Zue=Ut([Ni,Que,TS,AS,(e,t,r)=>r],(e,t,r,a,s)=>{var{padding:i}=a;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),ehe=Ut([Ni,en,Jue,TS,AS,(e,t,r)=>r],(e,t,r,a,s,i)=>{var{padding:o}=s;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),S1=(e,t,r,a)=>{var s;switch(t){case"xAxis":return Zue(e,r,a);case"yAxis":return ehe(e,r,a);case"zAxis":return(s=JT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return kz(e);case"radiusAxis":return Ez(e,r);default:return}},qz=Ut([Xs,S1],US),Ng=Ut([Xs,jg,Gue,qz],c4);Ut(w1,Ks,(e,t)=>e.flatMap(r=>{var a;return(a=r.errorBars)!==null&&a!==void 0?a:[]}).filter(r=>Az(t,r)));function zz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var HS=(e,t)=>t,WS=(e,t,r)=>r,the=Ut(hT,HS,WS,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(zz)),rhe=Ut(fT,HS,WS,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(zz)),Hz=(e,t)=>({width:e.width,height:t.height}),ahe=(e,t)=>{var r=typeof t.width=="number"?t.width:DS;return{width:r,height:e.height}},Wz=Ut(Ni,vf,Hz),nhe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},she=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},ihe=Ut(pf,Ni,the,HS,WS,(e,t,r,a,s)=>{var i={},o;return r.forEach(l=>{var c=Hz(t,l);o==null&&(o=nhe(t,a,e));var d=a==="top"&&!s||a==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),ohe=Ut(mf,Ni,rhe,HS,WS,(e,t,r,a,s)=>{var i={},o;return r.forEach(l=>{var c=ahe(t,l);o==null&&(o=she(t,a,e));var d=a==="left"&&!s||a==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),lhe=(e,t)=>{var r=Ni(e),a=vf(e,t);if(a!=null){var s=ihe(e,a.orientation,a.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},che=(e,t)=>{var r=Ni(e),a=op(e,t);if(a!=null){var s=ohe(e,a.orientation,a.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},Gz=Ut(Ni,op,(e,t)=>{var r=typeof t.width=="number"?t.width:DS;return{width:r,height:e.height}}),y6=(e,t,r)=>{switch(t){case"xAxis":return Wz(e,r).width;case"yAxis":return Gz(e,r).height;default:return}},Yz=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=ff(e,a),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&aV(c))return c}},f4=Ut([en,zS,Xs,Ks],Yz),Kz=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=ff(e,a);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},m4=Ut([en,zS,N1,Ks],Kz),j6=Ut([en,Eue,jg,Ng,f4,m4,S1,u4,Ks],(e,t,r,a,s,i,o,l,c)=>{if(t==null)return null;var d=ff(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:a}}),dhe=(e,t,r,a,s,i,o,l,c)=>{if(!(t==null||a==null)){var d=ff(e,c),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,v=u==="category"&&a.bandwidth?a.bandwidth()/p:0;v=c==="angleAxis"&&i!=null&&i.length>=2?Bi(i[0]-i[1])*2*v:v;var g=h||s;if(g){var b=g.map((y,S)=>{var w=o?o.indexOf(y):y;return{index:S,coordinate:a(w)+v,value:y,offset:v}});return b.filter(y=>!yl(y.coordinate))}return d&&l?l.map((y,S)=>({coordinate:a(y)+v,value:y,index:S,offset:v})):a.ticks?a.ticks(f).map(y=>({coordinate:a(y)+v,value:y,offset:v})):a.domain().map((y,S)=>({coordinate:a(y)+v,value:o?o[y]:y,index:S,offset:v}))}},Xz=Ut([en,N1,jg,Ng,u4,S1,f4,m4,Ks],dhe),uhe=(e,t,r,a,s,i,o)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var l=ff(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&a?.length>=2?Bi(a[0]-a[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},Wm=Ut([en,N1,Ng,S1,f4,m4,Ks],uhe),Ju=Ut(Xs,Ng,(e,t)=>{if(!(e==null||t==null))return Yw(Yw({},e),{},{scale:t})}),hhe=Ut([Xs,jg,l4,qz],c4);Ut((e,t,r)=>JT(e,r),hhe,(e,t)=>{if(!(e==null||t==null))return Yw(Yw({},e),{},{scale:t})});var fhe=Ut([en,hT,fT],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Qz=e=>e.options.defaultTooltipEventType,Jz=e=>e.options.validateTooltipEventTypes;function Zz(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function p4(e,t){var r=Qz(e),a=Jz(e);return Zz(t,r,a)}function mhe(e){return Mr(t=>p4(t,e))}var eH=(e,t)=>{var r,a=Number(t);if(!(yl(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},phe=e=>e.tooltip.settings,_m={active:!1,index:null,dataKey:void 0,coordinate:void 0},xhe={itemInteraction:{click:_m,hover:_m},axisInteraction:{click:_m,hover:_m},keyboardInteraction:_m,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tH=Xc({name:"tooltip",initialState:xhe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Yh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:vhe,removeTooltipEntrySettings:ghe,setTooltipSettingsState:bhe,setActiveMouseOverItemIndex:rH,mouseLeaveItem:yhe,mouseLeaveChart:aH,setActiveClickItemIndex:jhe,setMouseOverAxisIndex:nH,setMouseClickAxisIndex:Nhe,setSyncInteraction:dA,setKeyboardInteraction:uA}=tH.actions,whe=tH.reducer;function N6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function iN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N6(Object(r),!0).forEach(function(a){She(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function She(e,t,r){return(t=Che(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Che(e){var t=khe(e,"string");return typeof t=="symbol"?t:t+""}function khe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ehe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function _he(e){return e.index!=null}var sH=(e,t,r,a)=>{if(t==null)return _m;var s=Ehe(e,t,r);if(s==null)return _m;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(_he(s)){if(i)return iN(iN({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return iN(iN({},_m),{},{coordinate:s.coordinate})},x4=(e,t)=>{var r=e?.index;if(r==null)return null;var a=Number(r);if(!oo(a))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},iH=(e,t,r,a,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=s?.[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},oH=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},C1=e=>e.options.tooltipPayloadSearcher,wg=e=>e.tooltip;function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(a){Dhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Dhe(e,t,r){return(t=Ahe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ahe(e){var t=The(e,"string");return typeof t=="symbol"?t:t+""}function The(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ihe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Phe(e,t){return e??t}var lH=(e,t,r,a,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var v,{dataDefinedOnItem:g,settings:b}=p,y=Phe(g,l),S=Ihe(y,d,u),w=(v=b?.dataKey)!==null&&v!==void 0?v:a?.dataKey,k=b?.nameKey,C;if(a!=null&&a.dataKey&&Array.isArray(S)&&!Array.isArray(S[0])&&o==="axis"?C=nV(S,a.dataKey,s):C=i(S,t,c,k),Array.isArray(C))C.forEach(E=>{var T=S6(S6({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});f.push(nL({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:Wn(E.payload,E.dataKey),name:E.name}))});else{var _;f.push(nL({tooltipEntrySettings:b,dataKey:w,payload:C,value:Wn(C,w),name:(_=Wn(C,k))!==null&&_!==void 0?_:b?.name}))}return f},h)}},zi=e=>{var t=en(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Sg=e=>e.tooltip.settings.axisId,lo=e=>{var t=zi(e),r=Sg(e);return N1(e,t,r)},v4=Ut([lo,en,_z,WT,zi],$z),Ohe=Ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Mhe=Ut([zi,Sg],ZT),GS=Ut([Ohe,lo,Mhe],e4),Rhe=Ut([GS],t4),Xx=Ut([Rhe,Yx],r4),g4=Ut([Xx,lo,GS],a4),Fhe=Ut([lo],n4),Lhe=Ut([Xx,GS,y1],Tz),Bhe=Ut([Lhe,Yx,zi],Iz),Uhe=Ut([GS],Dz),$he=Ut([Xx,lo,Uhe,zi],Pz),Vhe=Ut([Oz,zi,Sg],yg),qhe=Ut([Vhe,zi],Fz),zhe=Ut([Mz,zi,Sg],yg),Hhe=Ut([zhe,zi],Lz),Whe=Ut([Rz,zi,Sg],yg),Ghe=Ut([Whe,zi],Bz),Yhe=Ut([qhe,Ghe,Hhe],s4),Khe=Ut([lo,Fhe,Bhe,$he,Yhe],i4),cH=Ut([lo,en,Xx,g4,y1,zi,Khe],o4),Xhe=Ut([cH,lo,v4],d4),Qhe=Ut([lo,cH,Xhe,zi],h4),dH=e=>{var t=zi(e),r=Sg(e),a=!1;return S1(e,t,r,a)},uH=Ut([lo,dH],US),hH=Ut([lo,v4,Qhe,uH],c4),Jhe=Ut([en,g4,lo,zi],Yz),Zhe=Ut([en,g4,lo,zi],Kz),efe=(e,t,r,a,s,i,o,l)=>{if(t){var{type:c}=t,d=ff(e,l);if(a){var u=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,h=c==="category"&&a.bandwidth?a.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?Bi(s[0]-s[1])*2*h:h,d&&o?o.map((f,p)=>({coordinate:a(f)+h,value:f,index:p,offset:h})):a.domain().map((f,p)=>({coordinate:a(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},gf=Ut([en,lo,v4,hH,dH,Jhe,Zhe,zi],efe),b4=Ut([Qz,Jz,phe],(e,t,r)=>Zz(r.shared,e,t)),fH=e=>e.tooltip.settings.trigger,y4=e=>e.tooltip.settings.defaultIndex,YS=Ut([wg,b4,fH,y4],sH),Gm=Ut([YS,Xx],x4),mH=Ut([gf,Gm],eH),pH=Ut([YS],e=>{if(e)return e.dataKey}),xH=Ut([wg,b4,fH,y4],oH),tfe=Ut([mf,pf,en,Ni,gf,y4,xH,C1],iH),rfe=Ut([YS,tfe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),afe=Ut([YS],e=>e.active),nfe=Ut([xH,Gm,Yx,lo,mH,C1,b4],lH),sfe=Ut([nfe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(a){ife(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ife(e,t,r){return(t=ofe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ofe(e){var t=lfe(e,"string");return typeof t=="symbol"?t:t+""}function lfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cfe=()=>Mr(lo),dfe=()=>{var e=cfe(),t=Mr(gf),r=Mr(hH);return wy(k6(k6({},e),{},{scale:r}),t)},vH=()=>Mr(WT),j4=(e,t)=>t,gH=(e,t,r)=>r,N4=(e,t,r,a)=>a,ufe=Ut(gf,e=>NS(e,t=>t.coordinate)),w4=Ut([wg,j4,gH,N4],sH),bH=Ut([w4,Xx],x4),hfe=(e,t,r)=>{if(t!=null){var a=wg(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},yH=Ut([wg,j4,gH,N4],oH),Kw=Ut([mf,pf,en,Ni,gf,N4,yH,C1],iH),ffe=Ut([w4,Kw],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jH=Ut(gf,bH,eH),mfe=Ut([yH,bH,Yx,lo,jH,C1,j4],lH),pfe=Ut([w4],e=>({isActive:e.active,activeIndex:e.index})),xfe=(e,t,r,a,s,i,o,l)=>{if(!(!e||!t||!a||!s||!i)){var c=Rie(e.chartX,e.chartY,t,r,l);if(c){var d=Lie(c,t),u=Sie(d,o,i,a,s),h=Fie(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function hA(){return hA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hA.apply(null,arguments)}function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function oN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(a){vfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vfe(e,t,r){return(t=gfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gfe(e){var t=bfe(e,"string");return typeof t=="symbol"?t:t+""}function bfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yfe(e){var{coordinate:t,payload:r,index:a,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,f=a;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,v;if(d==="ScatterChart")p=u,v=Moe;else if(d==="BarChart")p=Roe(o,u,s,i),v=Nq;else if(o==="radial"){var{cx:g,cy:b,radius:y,startAngle:S,endAngle:w}=wq(u);p={cx:g,cy:b,startAngle:S,endAngle:w,innerRadius:y,outerRadius:y},v=Cq}else p={points:Nle(o,u,s)},v=ny;var k=typeof l=="object"&&"className"in l?l.className:void 0,C=oN(oN(oN(oN({stroke:"#ccc",pointerEvents:"none"},s),p),Ta(l,!1)),{},{payload:h,payloadIndex:f,className:aa("recharts-tooltip-cursor",k)});return j.isValidElement(l)?j.cloneElement(l,C):j.createElement(v,C)}function jfe(e){var t=dfe(),r=mq(),a=IS(),s=vH();return j.createElement(yfe,hA({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:s}))}var NH=j.createContext(null),Nfe=()=>j.useContext(NH),b_={exports:{}},_6;function wfe(){return _6||(_6=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,f),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,v=new Array(p);f<p;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,p,v){var g=r?r+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,S,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,f),!0;case 5:return b.fn.call(b.context,u,h,f,p),!0;case 6:return b.fn.call(b.context,u,h,f,p,v),!0}for(w=1,S=new Array(y-1);w<y;w++)S[w-1]=arguments[w];b.fn.apply(b.context,S)}else{var k=b.length,C;for(w=0;w<k;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,h);break;case 4:b[w].fn.call(b[w].context,u,h,f);break;default:if(!S)for(C=1,S=new Array(y-1);C<y;C++)S[C-1]=arguments[C];b[w].fn.apply(b[w].context,S)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!f||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var g=0,b=[],y=v.length;g<y;g++)(v[g].fn!==u||f&&!v[g].once||h&&v[g].context!==h)&&b.push(v[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(b_)),b_.exports}var Sfe=wfe();const Cfe=Kc(Sfe);var Ty=new Cfe,fA="recharts.syncEvent.tooltip",D6="recharts.syncEvent.brush";function S4(e,t){if(t){var r=Number.parseInt(t,10);if(!yl(r))return e?.[r]}}var kfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wH=Xc({name:"options",initialState:kfe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Efe=wH.reducer,{createEventEmitter:_fe}=wH.actions;function Dfe(e){return e.tooltip.syncInteraction}var Afe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},SH=Xc({name:"chartData",initialState:Afe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:A6,setDataStartEndIndexes:Tfe,setComputedData:DVe}=SH.actions,Ife=SH.reducer,CH=()=>{};function Pfe(){var e=Mr(GT),t=Mr(YT),r=ss(),a=Mr(wz),s=Mr(gf),i=IS(),o=mT(),l=Mr(c=>c.rootProps.className);j.useEffect(()=>{if(e==null)return CH;var c=(d,u,h)=>{if(t!==h&&e===d){if(a==="index"){r(u);return}if(s!=null){var f;if(typeof a=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=a(s,p);f=s[v]}else a==="value"&&(f=s.find(_=>String(_.value)===u.payload.label));var{coordinate:g}=u.payload;if(f==null||u.payload.active===!1||g==null||o==null){r(dA({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,S=Math.min(b,o.x+o.width),w=Math.min(y,o.y+o.height),k={x:i==="horizontal"?f.coordinate:S,y:i==="horizontal"?w:f.coordinate},C=dA({active:u.payload.active,coordinate:k,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(C)}}};return Ty.on(fA,c),()=>{Ty.off(fA,c)}},[l,r,t,e,a,s,i,o])}function Ofe(){var e=Mr(GT),t=Mr(YT),r=ss();j.useEffect(()=>{if(e==null)return CH;var a=(s,i,o)=>{t!==o&&e===s&&r(Tfe(i))};return Ty.on(D6,a),()=>{Ty.off(D6,a)}},[r,t,e])}function Mfe(){var e=ss();j.useEffect(()=>{e(_fe())},[e]),Pfe(),Ofe()}function Rfe(e,t,r,a,s,i){var o=Mr(f=>hfe(f,e,t)),l=Mr(YT),c=Mr(GT),d=Mr(wz),u=Mr(Dfe),h=u?.active;j.useEffect(()=>{if(!h&&c!=null&&l!=null){var f=dA({active:i,coordinate:r,dataKey:o,index:s,label:typeof a=="number"?String(a):a});Ty.emit(fA,c,f,l)}},[h,r,o,s,a,l,c,d,i])}function T6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function I6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(r),!0).forEach(function(a){Ffe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ffe(e,t,r){return(t=Lfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lfe(e){var t=Bfe(e,"string");return typeof t=="symbol"?t:t+""}function Bfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ufe(e){return e.dataKey}function $fe(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(foe,t)}var P6=[],Vfe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Hx.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lN(e){var t=Qc(e,Vfe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:v,cursor:g,shared:b,trigger:y,defaultIndex:S,portal:w,axisId:k}=t,C=ss(),_=typeof S=="number"?String(S):S;j.useEffect(()=>{C(bhe({shared:b,trigger:y,axisId:k,active:r,defaultIndex:_}))},[C,b,y,k,r,_]);var E=mT(),T=gq(),I=mhe(b),{activeIndex:F,isActive:A}=Mr(ne=>pfe(ne,I,y,_)),P=Mr(ne=>mfe(ne,I,y,_)),q=Mr(ne=>jH(ne,I,y,_)),V=Mr(ne=>ffe(ne,I,y,_)),Y=P,B=Nfe(),Q=r??A,[R,Z]=RV([Y,Q]),J=I==="axis"?q:void 0;Rfe(I,y,V,J,F,Q);var ie=w??B;if(ie==null)return null;var M=Y??P6;Q||(M=P6),l&&M.length&&(M=TV(Y.filter(ne=>ne.value!=null&&(ne.hide!==!0||t.includeHidden)),u,Ufe));var z=M.length>0,ee=j.createElement(yoe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:c,active:Q,coordinate:V,hasPayload:z,offset:d,position:h,reverseDirection:f,useTranslate3d:p,viewBox:E,wrapperStyle:v,lastBoundingBox:R,innerRef:Z,hasPortalFromProps:!!w},$fe(o,I6(I6({},t),{},{payload:M,label:J,active:Q,coordinate:V,accessibilityLayer:T})));return j.createElement(j.Fragment,null,c1.createPortal(ee,ie),Q&&j.createElement(jfe,{cursor:g,tooltipEventType:I,coordinate:V,payload:Y,index:F}))}var y_={},j_={},O6;function qfe(){return O6||(O6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=0,s={}){typeof s!="object"&&(s={});let i=null,o=null,l=null,c=0,d=null,u;const{leading:h=!1,trailing:f=!0,maxWait:p}=s,v="maxWait"in s,g=v?Math.max(Number(p)||0,a):0,b=E=>(i!==null&&(u=r.apply(o,i)),i=o=null,c=E,u),y=E=>(c=E,d=setTimeout(C,a),h&&i!==null?b(E):u),S=E=>(d=null,f&&i!==null?b(E):u),w=E=>{if(l===null)return!0;const T=E-l,I=T>=a||T<0,F=v&&E-c>=g;return I||F},k=E=>{const T=l===null?0:E-l,I=a-T,F=g-(E-c);return v?Math.min(I,F):I},C=()=>{const E=Date.now();if(w(E))return S(E);d=setTimeout(C,k(E))},_=function(...E){const T=Date.now(),I=w(T);if(i=E,o=this,l=T,I){if(d===null)return y(T);if(v)return clearTimeout(d),d=setTimeout(C,a),b(T)}return d===null&&(d=setTimeout(C,a)),u};return _.cancel=()=>{d!==null&&clearTimeout(d),c=0,l=i=o=d=null},_.flush=()=>d===null?u:S(Date.now()),_}e.debounce=t}(j_)),j_}var M6;function zfe(){return M6||(M6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qfe();function r(a,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r}(y_)),y_}var N_,R6;function Hfe(){return R6||(R6=1,N_=zfe().throttle),N_}var Wfe=Hfe();const Gfe=Kc(Wfe);var sy=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function F6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function w_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F6(Object(r),!0).forEach(function(a){Yfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yfe(e,t,r){return(t=Kfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kfe(e){var t=Xfe(e,"string");return typeof t=="symbol"?t:t+""}function Xfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cN=j.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:p,style:v={}}=e,g=j.useRef(null),b=j.useRef();b.current=p,j.useImperativeHandle(t,()=>g.current);var[y,S]=j.useState({containerWidth:a.width,containerHeight:a.height}),w=j.useCallback((C,_)=>{S(E=>{var T=Math.round(C),I=Math.round(_);return E.containerWidth===T&&E.containerHeight===I?E:{containerWidth:T,containerHeight:I}})},[]);j.useEffect(()=>{var C=I=>{var F,{width:A,height:P}=I[0].contentRect;w(A,P),(F=b.current)===null||F===void 0||F.call(b,A,P)};u>0&&(C=Gfe(C,u,{trailing:!0,leading:!1}));var _=new ResizeObserver(C),{width:E,height:T}=g.current.getBoundingClientRect();return w(E,T),_.observe(g.current),()=>{_.disconnect()}},[w,u]);var k=j.useMemo(()=>{var{containerWidth:C,containerHeight:_}=y;if(C<0||_<0)return null;sy(rx(s)||rx(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),sy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=rx(s)?C:s,T=rx(i)?_:i;return r&&r>0&&(E?T=E/r:T&&(E=T*r),c&&T>c&&(T=c)),sy(E>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,T,s,i,o,l,r),j.Children.map(d,I=>j.cloneElement(I,{width:E,height:T,style:w_({width:E,height:T},I.props.style)}))},[r,d,i,c,l,o,y,s]);return j.createElement("div",{id:h?"".concat(h):void 0,className:aa("recharts-responsive-container",f),style:w_(w_({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},j.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),Dm=e=>null;Dm.displayName="Cell";function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(a){Qfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qfe(e,t,r){return(t=Jfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jfe(e){var t=Zfe(e,"string");return typeof t=="symbol"?t:t+""}function Zfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wv={widthCache:{},cacheCount:0},eme=2e3,tme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},B6="recharts_measurement_span";function rme(e){var t=mA({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var iy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Hx.isSsr)return{width:0,height:0};var a=rme(r),s=JSON.stringify({text:t,copyStyle:a});if(Wv.widthCache[s])return Wv.widthCache[s];try{var i=document.getElementById(B6);i||(i=document.createElement("span"),i.setAttribute("id",B6),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=mA(mA({},tme),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Wv.widthCache[s]=c,++Wv.cacheCount>eme&&(Wv.cacheCount=0,Wv.widthCache={}),c}catch{return{width:0,height:0}}},U6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ame=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sme=Object.keys(kH),m0="NaN";function ime(e,t){return e*kH[t]}class ul{static parse(t){var r,[,a,s]=(r=nme.exec(t))!==null&&r!==void 0?r:[];return new ul(parseFloat(a),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,yl(t)&&(this.unit=""),r!==""&&!ame.test(r)&&(this.num=NaN,this.unit=""),sme.includes(r)&&(this.num=ime(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ul(NaN,""):new ul(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ul(NaN,""):new ul(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ul(NaN,""):new ul(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ul(NaN,""):new ul(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return yl(this.num)}}function EH(e){if(e.includes(m0))return m0;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,s,i]=(r=U6.exec(t))!==null&&r!==void 0?r:[],o=ul.parse(a??""),l=ul.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return m0;t=t.replace(U6,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=$6.exec(t))!==null&&d!==void 0?d:[],p=ul.parse(u??""),v=ul.parse(f??""),g=h==="+"?p.add(v):p.subtract(v);if(g.isNaN())return m0;t=t.replace($6,g.toString())}return t}var V6=/\(([^()]*)\)/;function ome(e){for(var t=e,r;(r=V6.exec(t))!=null;){var[,a]=r;t=t.replace(V6,EH(a))}return t}function lme(e){var t=e.replace(/\s+/g,"");return t=ome(t),t=EH(t),t}function cme(e){try{return lme(e)}catch{return m0}}function S_(e){var t=cme(e.slice(5,-1));return t===m0?"":t}var dme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ume=["dx","dy","angle","className","breakAll"];function pA(){return pA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pA.apply(null,arguments)}function q6(e,t){if(e==null)return{};var r,a,s=hme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hme(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var _H=/[ \f\n\r\t\v\u2028\u2029]+/,DH=e=>{var{children:t,breakAll:r,style:a}=e;try{var s=[];Fn(t)||(r?s=t.toString().split(""):s=t.toString().split(_H));var i=s.map(l=>({word:l,width:iy(l,a).width})),o=r?0:iy("",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},fme=(e,t,r,a,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Er(i),u=o,h=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce((P,q)=>{var{word:V,width:Y}=q,B=P[P.length-1];if(B&&(a==null||s||B.width+Y+r<Number(a)))B.words.push(V),B.width+=Y+r;else{var Q={words:[V],width:Y};P.push(Q)}return P},[])},f=h(t),p=F=>F.reduce((A,P)=>A.width>P.width?A:P);if(!d||s)return f;var v=f.length>i||p(f).width>Number(a);if(!v)return f;for(var g="",b=F=>{var A=u.slice(0,F),P=DH({breakAll:c,style:l,children:A+g}).wordsWithComputedWidth,q=h(P),V=q.length>i||p(q).width>Number(a);return[V,q]},y=0,S=u.length-1,w=0,k;y<=S&&w<=u.length-1;){var C=Math.floor((y+S)/2),_=C-1,[E,T]=b(_),[I]=b(C);if(!E&&!I&&(y=C+1),E&&I&&(S=C-1),!E&&I){k=T;break}w++}return k||f},z6=e=>{var t=Fn(e)?[]:e.toString().split(_H);return[{words:t}]},mme=e=>{var{width:t,scaleToFit:r,children:a,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Hx.isSsr){var l,c,d=DH({breakAll:i,children:a,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return z6(a);return fme({breakAll:i,children:a,maxLines:o,style:s},l,c,t,r)}return z6(a)},H6="#808080",KS=j.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=H6}=e,u=q6(e,dme),h=j.useMemo(()=>mme({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:v,className:g,breakAll:b}=u,y=q6(u,ume);if(!Xu(r)||!Xu(a))return null;var S=r+(Er(f)?f:0),w=a+(Er(p)?p:0),k;switch(c){case"start":k=S_("calc(".concat(i,")"));break;case"middle":k=S_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:k=S_("calc(".concat(h.length-1," * -").concat(s,")"));break}var C=[];if(o){var _=h[0].width,{width:E}=u;C.push("scale(".concat(Er(E)?E/_:1,")"))}return v&&C.push("rotate(".concat(v,", ").concat(S,", ").concat(w,")")),C.length&&(y.transform=C.join(" ")),j.createElement("text",pA({},Ta(y,!0),{ref:t,x:S,y:w,className:aa("recharts-text",g),textAnchor:l,fill:d.includes("url")?H6:d}),h.map((T,I)=>{var F=T.words.join(b?"":" ");return j.createElement("tspan",{x:S,dy:I===0?k:s,key:"".concat(F,"-").concat(I)},F)}))});KS.displayName="Text";var pme=["offset"],xme=["labelRef"];function W6(e,t){if(e==null)return{};var r,a,s=vme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vme(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function G6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G6(Object(r),!0).forEach(function(a){gme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gme(e,t,r){return(t=bme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bme(e){var t=yme(e,"string");return typeof t=="symbol"?t:t+""}function yme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vh.apply(null,arguments)}var jme=e=>{var{value:t,formatter:r}=e,a=Fn(e.children)?t:e.children;return typeof r=="function"?r(a):a},C4=e=>e!=null&&typeof e=="function",Nme=(e,t)=>{var r=Bi(t-e),a=Math.min(Math.abs(t-e),360);return r*a},wme=(e,t,r)=>{var{position:a,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=s,v=(d+u)/2,g=Nme(h,f),b=g>=0?1:-1,y,S;a==="insideStart"?(y=h+b*i,S=p):a==="insideEnd"?(y=f-b*i,S=!p):a==="end"&&(y=f+b*i,S=p),S=g<=0?S:!S;var w=ci(l,c,v,y),k=ci(l,c,v,y+(S?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),_=Fn(e.id)?Dx("recharts-radial-line-"):e.id;return j.createElement("text",Vh({},r,{dominantBaseline:"central",className:aa("recharts-radial-bar-label",o)}),j.createElement("defs",null,j.createElement("path",{id:_,d:C})),j.createElement("textPath",{xlinkHref:"#".concat(_)},t))},Sme=e=>{var{viewBox:t,offset:r,position:a}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(a==="outside"){var{x:h,y:f}=ci(s,i,l+r,u);return{x:h,y:f,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:g}=ci(s,i,p,u);return{x:v,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Cme=(e,t)=>{var{parentViewBox:r,offset:a,position:s}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,h=d>0?"end":"start",f=d>0?"start":"end",p=l>=0?1:-1,v=p*a,g=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:h};return ni(ni({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var S={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:f};return ni(ni({},S),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return ni(ni({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var k={x:i+l+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"};return ni(ni({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:c}:{})}var C=r?{width:l,height:c}:{};return s==="insideLeft"?ni({x:i+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"},C):s==="insideRight"?ni({x:i+l-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},C):s==="insideTop"?ni({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:f},C):s==="insideBottom"?ni({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},C):s==="insideTopLeft"?ni({x:i+v,y:o+u,textAnchor:b,verticalAnchor:f},C):s==="insideTopRight"?ni({x:i+l-v,y:o+u,textAnchor:g,verticalAnchor:f},C):s==="insideBottomLeft"?ni({x:i+v,y:o+c-u,textAnchor:b,verticalAnchor:h},C):s==="insideBottomRight"?ni({x:i+l-v,y:o+c-u,textAnchor:g,verticalAnchor:h},C):s&&typeof s=="object"&&(Er(s.x)||rx(s.x))&&(Er(s.y)||rx(s.y))?ni({x:i+el(s.x,l),y:o+el(s.y,c),textAnchor:"end",verticalAnchor:"end"},C):ni({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},C)},kme=e=>"cx"in e&&Er(e.cx);function Gl(e){var{offset:t=5}=e,r=W6(e,pme),a=ni({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=a,f=mT(),p=s||f;if(!p||Fn(o)&&Fn(l)&&!j.isValidElement(c)&&typeof c!="function")return null;if(j.isValidElement(c)){var{labelRef:v}=a,g=W6(a,xme);return j.cloneElement(c,g)}var b;if(typeof c=="function"){if(b=j.createElement(c,a),j.isValidElement(b))return b}else b=jme(a);var y=kme(p),S=Ta(a,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return wme(a,b,S);var w=y?Sme(a):Cme(a,p);return j.createElement(KS,Vh({ref:h,className:aa("recharts-label",d)},S,w,{breakAll:u}),b)}Gl.displayName="Label";var AH=e=>{var{cx:t,cy:r,angle:a,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:f,left:p,width:v,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(Er(v)&&Er(g)){if(Er(u)&&Er(h))return{x:u,y:h,width:v,height:g};if(Er(f)&&Er(p))return{x:f,y:p,width:v,height:g}}if(Er(u)&&Er(h))return{x:u,y:h,width:0,height:0};if(Er(t)&&Er(r))return{cx:t,cy:r,startAngle:s||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},Eme=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?j.createElement(Gl,Vh({key:"label-implicit"},a)):Xu(e)?j.createElement(Gl,Vh({key:"label-implicit",value:e},a)):j.isValidElement(e)?e.type===Gl?j.cloneElement(e,ni({key:"label-implicit"},a)):j.createElement(Gl,Vh({key:"label-implicit",content:e},a)):C4(e)?j.createElement(Gl,Vh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?j.createElement(Gl,Vh({},e,{key:"label-implicit"},a)):null},_me=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:s,labelRef:i}=t,o=AH(t),l=m1(s,Gl).map((d,u)=>j.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!a)return l;var c=Eme(t.label,r||o,i);return[c,...l]};Gl.parseViewBox=AH;Gl.renderCallByParent=_me;var C_={},k_={},Y6;function Dme(){return Y6||(Y6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(k_)),k_}var E_={},K6;function Ame(){return K6||(K6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(E_)),E_}var X6;function Tme(){return X6||(X6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dme(),r=Ame(),a=eT();function s(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(C_)),C_}var __,Q6;function Ime(){return Q6||(Q6=1,__=Tme().last),__}var Pme=Ime();const Ome=Kc(Pme);var Mme=["valueAccessor"],Rme=["data","dataKey","clockWise","id","textBreakAll"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xw.apply(null,arguments)}function J6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(r),!0).forEach(function(a){Fme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fme(e,t,r){return(t=Lme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lme(e){var t=Bme(e,"string");return typeof t=="symbol"?t:t+""}function Bme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e8(e,t){if(e==null)return{};var r,a,s=Ume(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ume(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $me=e=>Array.isArray(e.value)?Ome(e.value):e.value;function Fm(e){var{valueAccessor:t=$me}=e,r=e8(e,Mme),{data:a,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=e8(r,Rme);return!a||!a.length?null:j.createElement(Ys,{className:"recharts-label-list"},a.map((d,u)=>{var h=Fn(s)?t(d,u):Wn(d&&d.payload,s),f=Fn(o)?{}:{id:"".concat(o,"-").concat(u)};return j.createElement(Gl,Xw({},Ta(d,!0),c,f,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:Gl.parseViewBox(Fn(i)?d:Z6(Z6({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Fm.displayName="LabelList";function Vme(e,t){return e?e===!0?j.createElement(Fm,{key:"labelList-implicit",data:t}):j.isValidElement(e)||C4(e)?j.createElement(Fm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?j.createElement(Fm,Xw({data:t},e,{key:"labelList-implicit"})):null:null}function qme(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,s=m1(a,Fm).map((o,l)=>j.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=Vme(e.label,t);return[i,...s]}Fm.renderCallByParent=qme;function xA(){return xA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xA.apply(null,arguments)}var TH=e=>{var{cx:t,cy:r,r:a,className:s}=e,i=aa("recharts-dot",s);return t===+t&&r===+r&&a===+a?j.createElement("circle",xA({},Ta(e,!1),W3(e),{className:i,cx:t,cy:r,r:a})):null},IH=e=>e.graphicalItems.polarItems,zme=Ut([Ks,j1],ZT),k4=Ut([IH,Xs,zme],e4),Hme=Ut([k4],t4),E4=Ut([Hme,VT],r4),Wme=Ut([E4,Xs,k4],a4),Gme=Ut([E4,Xs,k4],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(s=>{var i,o=Wn(a,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Wn(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),t8=()=>{},Yme=Ut([Xs,Uz,t8,Gme,t8],i4),PH=Ut([Xs,en,E4,Wme,y1,Ks,Yme],o4),Kme=Ut([PH,Xs,jg],d4);Ut([Xs,PH,Kme,Ks],h4);var Xme={radiusAxis:{},angleAxis:{}},OH=Xc({name:"polarAxis",initialState:Xme,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:AVe,removeRadiusAxis:TVe,addAngleAxis:IVe,removeAngleAxis:PVe}=OH.actions,Qme=OH.reducer;function r8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function a8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(r),!0).forEach(function(a){Jme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jme(e,t,r){return(t=Zme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zme(e){var t=epe(e,"string");return typeof t=="symbol"?t:t+""}function epe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _4=(e,t)=>t,tpe=[],D4=(e,t,r)=>r?.length===0?tpe:r,MH=Ut([VT,_4,D4],(e,t,r)=>{var{chartData:a}=e,s;if(t?.data!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&r!=null&&(s=r.map(i=>a8(a8({},t.presentationProps),i.props))),s!=null)return s}),rpe=Ut([MH,_4,D4],(e,t,r)=>{if(e!=null)return e.map((a,s)=>{var i,o=Wn(a,t.nameKey,t.name),l;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:xg(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),ape=Ut([IH,_4],(e,t)=>{if(e.some(r=>r.type==="pie"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),npe=Ut([MH,ape,D4,Ni],(e,t,r,a)=>{if(!(t==null||e==null))return Kpe({offset:a,pieSettings:t,displayedData:e,cells:r})}),spe={countOfBars:0,cartesianItems:[],polarItems:[]},RH=Xc({name:"graphicalItems",initialState:spe,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,s=Yh(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=a)},removeCartesianGraphicalItem(e,t){var r=Yh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Yh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:ipe,removeBar:ope,addCartesianGraphicalItem:lpe,replaceCartesianGraphicalItem:cpe,removeCartesianGraphicalItem:dpe,addPolarGraphicalItem:upe,removePolarGraphicalItem:hpe}=RH.actions,fpe=RH.reducer;function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function s8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(a){mpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mpe(e,t,r){return(t=ppe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ppe(e){var t=xpe(e,"string");return typeof t=="symbol"?t:t+""}function xpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vpe(e){var t=ss(),r=j.useRef(null);return j.useEffect(()=>{var a=s8(s8({},e),{},{stackId:uT(e.stackId)});r.current===null?t(lpe(a)):r.current!==a&&t(cpe({prev:r.current,next:a})),r.current=a},[t,e]),j.useEffect(()=>()=>{r.current&&(t(dpe(r.current)),r.current=null)},[t]),null}function gpe(e){var t=ss();return j.useEffect(()=>(t(upe(e)),()=>{t(hpe(e))}),[t,e]),null}var D_={},i8;function bpe(){return i8||(i8=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${s}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(D_)),D_}var A_,o8;function ype(){return o8||(o8=1,A_=bpe().isPlainObject),A_}var jpe=ype();const Npe=Kc(jpe);function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qw.apply(null,arguments)}var l8=(e,t,r,a,s)=>{var i=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-a,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},wpe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Spe=e=>{var t=Qc(e,wpe),r=j.useRef(),[a,s]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||l===0&&c===0||d===0)return null;var g=aa("recharts-trapezoid",u);return v?j.createElement(Hm,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:f,animationEasing:h,isActive:v},b=>{var{upperWidth:y,lowerWidth:S,height:w,x:k,y:C}=b;return j.createElement(Hm,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},j.createElement("path",Qw({},Ta(t,!0),{className:g,d:l8(k,C,y,S,w),ref:r})))}):j.createElement("g",null,j.createElement("path",Qw({},Ta(t,!0),{className:g,d:l8(i,o,l,c,d)})))},Cpe=["option","shapeType","propTransformer","activeClassName","isActive"];function kpe(e,t){if(e==null)return{};var r,a,s=Epe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Epe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function c8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c8(Object(r),!0).forEach(function(a){_pe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _pe(e,t,r){return(t=Dpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dpe(e){var t=Ape(e,"string");return typeof t=="symbol"?t:t+""}function Ape(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tpe(e,t){return Jw(Jw({},t),e)}function Ipe(e,t){return e==="symbols"}function d8(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return j.createElement(Nq,r);case"trapezoid":return j.createElement(Spe,r);case"sector":return j.createElement(Cq,r);case"symbols":if(Ipe(t))return j.createElement(Q3,r);break;default:return null}}function Ppe(e){return j.isValidElement(e)?e.props:e}function FH(e){var{option:t,shapeType:r,propTransformer:a=Tpe,activeClassName:s="recharts-active-shape",isActive:i}=e,o=kpe(e,Cpe),l;if(j.isValidElement(t))l=j.cloneElement(t,Jw(Jw({},o),Ppe(t)));else if(typeof t=="function")l=t(o);else if(Npe(t)&&typeof t!="boolean"){var c=a(t,o);l=j.createElement(d8,{shapeType:r,elementProps:c})}else{var d=o;l=j.createElement(d8,{shapeType:r,elementProps:d})}return i?j.createElement(Ys,{className:s},l):l}var A4=(e,t)=>{var r=ss();return(a,s)=>i=>{e?.(a,s,i),r(rH({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},T4=e=>{var t=ss();return(r,a)=>s=>{e?.(r,a,s),t(yhe())}},I4=(e,t)=>{var r=ss();return(a,s)=>i=>{e?.(a,s,i),r(jhe({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function P4(e){var{fn:t,args:r}=e,a=ss(),s=rl();return j.useEffect(()=>{if(!s){var i=t(r);return a(vhe(i)),()=>{a(ghe(i))}}},[t,r,a,s]),null}var LH=()=>{};function BH(e){var{legendPayload:t}=e,r=ss(),a=rl();return j.useEffect(()=>a?LH:(r(xq(t)),()=>{r(vq(t))}),[r,a,t]),null}function Ope(e){var{legendPayload:t}=e,r=ss(),a=Mr(en);return j.useEffect(()=>a!=="centric"&&a!=="radial"?LH:(r(xq(t)),()=>{r(vq(t))}),[r,a,t]),null}function O4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(Dx(t)),a=j.useRef(e);return a.current!==e&&(r.current=Dx(t),a.current=e),r.current}var Mpe=["onMouseEnter","onClick","onMouseLeave"];function Rpe(e,t){if(e==null)return{};var r,a,s=Fpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Fpe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function u8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(r),!0).forEach(function(a){XS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XS(e,t,r){return(t=Lpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lpe(e){var t=Bpe(e,"string");return typeof t=="symbol"?t:t+""}function Bpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Px.apply(null,arguments)}function Upe(e){var t=j.useMemo(()=>Ta(e,!1),[e]),r=j.useMemo(()=>m1(e.children,Dm),[e.children]),a=j.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),s=Mr(i=>rpe(i,a,r));return j.createElement(Ope,{legendPayload:s})}function $pe(e){var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:a?.map(u=>u.tooltipPayload),positions:a?.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:xg(l,t),hide:c,type:d,color:o,unit:""}}}var Vpe=(e,t)=>e>t?"start":e<t?"end":"middle",qpe=(e,t,r)=>typeof t=="function"?t(e):el(t,r,r*.8),zpe=(e,t,r)=>{var{top:a,left:s,width:i,height:o}=t,l=oq(i,o),c=s+el(e.cx,i,i/2),d=a+el(e.cy,o,o/2),u=el(e.innerRadius,l,0),h=qpe(r,e.outerRadius,l),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:h,maxRadius:f}},Hpe=(e,t)=>{var r=Bi(t-e),a=Math.min(Math.abs(t-e),360);return r*a},Wpe=(e,t)=>{if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var r=aa("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return j.createElement(ny,Px({},t,{type:"linear",className:r}))},Gpe=(e,t,r)=>{if(j.isValidElement(e))return j.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),j.isValidElement(a)))return a;var s=aa("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return j.createElement(KS,Px({},t,{alignmentBaseline:"middle",className:s}),a)};function Ype(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:i,dataKey:o}=r;if(!a||!s||!t)return null;var l=Ta(r,!1),c=Ta(s,!1),d=Ta(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var v=(f.startAngle+f.endAngle)/2,g=ci(f.cx,f.cy,f.outerRadius+u,v),b=ks(ks(ks(ks({},l),f),{},{stroke:"none"},c),{},{index:p,textAnchor:Vpe(g.x,f.cx)},g),y=ks(ks(ks(ks({},l),f),{},{fill:"none",stroke:f.fill},d),{},{index:p,points:[ci(f.cx,f.cy,f.outerRadius,v),g],key:"line"});return j.createElement(Ys,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&Wpe(i,y),Gpe(s,b,Wn(f,o)))});return j.createElement(Ys,{className:"recharts-pie-labels"},h)}function UH(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s,showLabels:i}=e,o=Mr(Gm),{onMouseEnter:l,onClick:c,onMouseLeave:d}=s,u=Rpe(s,Mpe),h=A4(l,s.dataKey),f=T4(d),p=I4(c,s.dataKey);return t==null?null:j.createElement(j.Fragment,null,t.map((v,g)=>{if(v?.startAngle===0&&v?.endAngle===0&&t.length!==1)return null;var b=r&&String(g)===o,y=o?a:null,S=b?r:y,w=ks(ks({},v),{},{stroke:v.stroke,tabIndex:-1,[uq]:g,[hq]:s.dataKey});return j.createElement(Ys,Px({tabIndex:-1,className:"recharts-pie-sector"},f1(u,v,g),{onMouseEnter:h(v,g),onMouseLeave:f(v,g),onClick:p(v,g),key:"sector-".concat(v?.startAngle,"-").concat(v?.endAngle,"-").concat(v.midAngle,"-").concat(g)}),j.createElement(FH,Px({option:S,isActive:b,shapeType:"sector"},w)))}),j.createElement(Ype,{sectors:t,props:s,showLabels:i}))}function Kpe(e){var t,{pieSettings:r,displayedData:a,cells:s,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=Hpe(l,c),v=Math.abs(p),g=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=a.filter(_=>Wn(_,d,0)!==0).length,y=(v>=360?b:b-1)*g,S=v-b*f-y,w=a.reduce((_,E)=>{var T=Wn(E,d,0);return _+(Er(T)?T:0)},0),k;if(w>0){var C;k=a.map((_,E)=>{var T=Wn(_,d,0),I=Wn(_,u,E),F=zpe(r,i,_),A=(Er(T)?T:0)/w,P,q=ks(ks({},_),s&&s[E]&&s[E].props);E?P=C.endAngle+Bi(p)*g*(T!==0?1:0):P=l;var V=P+Bi(p)*((T!==0?f:0)+A*S),Y=(P+V)/2,B=(F.innerRadius+F.outerRadius)/2,Q=[{name:I,value:T,payload:q,dataKey:d,type:h}],R=ci(F.cx,F.cy,B,Y);return C=ks(ks(ks(ks({},r.presentationProps),{},{percent:A,cornerRadius:o,name:I,tooltipPayload:Q,midAngle:Y,middleRadius:B,tooltipPosition:R},q),F),{},{value:Wn(_,d),startAngle:P,endAngle:V,payload:q,paddingAngle:Bi(p)*g}),C})}return k}function Xpe(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,f=O4(t,"recharts-pie-"),p=r.current,[v,g]=j.useState(!0),b=j.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=j.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return j.createElement(Hm,{begin:i,duration:o,isActive:s,easing:l,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:b,key:f},S=>{var{t:w}=S,k=[],C=a&&a[0],_=C.startAngle;return a.forEach((E,T)=>{var I=p&&p[T],F=T>0?zm(E,"paddingAngle",0):0;if(I){var A=km(I.endAngle-I.startAngle,E.endAngle-E.startAngle),P=ks(ks({},E),{},{startAngle:_+F,endAngle:_+A(w)+F});k.push(P),_=P.endAngle}else{var{endAngle:q,startAngle:V}=E,Y=km(0,q-V),B=Y(w),Q=ks(ks({},E),{},{startAngle:_+F,endAngle:_+B+F});k.push(Q),_=Q.endAngle}}),r.current=k,j.createElement(Ys,null,j.createElement(UH,{sectors:k,activeShape:c,inactiveShape:d,allOtherPieProps:t,showLabels:!v}))})}function Qpe(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:s}=e,i=j.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?j.createElement(Xpe,{props:e,previousSectorsRef:i}):j.createElement(UH,{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function Jpe(e){var{hide:t,className:r,rootTabIndex:a}=e,s=aa("recharts-pie",r);return t?null:j.createElement(Ys,{tabIndex:a,className:s},j.createElement(Qpe,e))}var $H={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Hx.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Zpe(e){var t=Qc(e,$H),r=j.useMemo(()=>m1(e.children,Dm),[e.children]),a=Ta(t,!1),s=j.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:a}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,a]),i=Mr(o=>npe(o,s,r));return j.createElement(j.Fragment,null,j.createElement(P4,{fn:$pe,args:ks(ks({},t),{},{sectors:i})}),j.createElement(Jpe,Px({},t,{sectors:i})))}class Zw extends j.PureComponent{constructor(){super(...arguments),XS(this,"id",Dx("recharts-pie-"))}render(){return j.createElement(j.Fragment,null,j.createElement(gpe,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),j.createElement(Upe,this.props),j.createElement(Zpe,this.props),this.props.children)}}XS(Zw,"displayName","Pie");XS(Zw,"defaultProps",$H);var exe=Ut([Ni],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),txe=Ut([exe,mf,pf],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),rxe=e=>{var t=rl();return Mr(r=>Ju(r,"xAxis",e,t))},axe=e=>{var t=rl();return Mr(r=>Ju(r,"yAxis",e,t))},M4=()=>Mr(txe),nxe=()=>Mr(sfe);function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function f8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(a){sxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sxe(e,t,r){return(t=ixe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ixe(e){var t=oxe(e,"string");return typeof t=="symbol"?t:t+""}function oxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lxe=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=f8(f8({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ta(s,!1)),W3(s)),l;return j.isValidElement(s)?l=j.cloneElement(s,o):typeof s=="function"?l=s(o):l=j.createElement(TH,o),j.createElement(Ys,{className:"recharts-active-dot"},l)};function m8(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:s}=e,i=Mr(Gm),o=nxe();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Fn(l)?null:lxe({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:a})}var cxe=()=>{var e=ss();return j.useEffect(()=>(e(ipe()),()=>{e(ope())})),null},dxe=["children"];function uxe(e,t){if(e==null)return{};var r,a,s=hxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hxe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var p8=()=>{},VH=j.createContext({addErrorBar:p8,removeErrorBar:p8}),fxe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},qH=j.createContext(fxe);function mxe(e){var{children:t}=e,r=uxe(e,dxe);return j.createElement(qH.Provider,{value:r},t)}var pxe=()=>j.useContext(qH),zH=e=>{var{children:t,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,f]=j.useState([]),p=j.useCallback(b=>{f(y=>[...y,b])},[f]),v=j.useCallback(b=>{f(y=>y.filter(S=>S!==b))},[f]),g=rl();return j.createElement(VH.Provider,{value:{addErrorBar:p,removeErrorBar:v}},j.createElement(vpe,{type:d,data:o,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:g}),t)};function xxe(e){var{addErrorBar:t,removeErrorBar:r}=j.useContext(VH);return j.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var vxe=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function HH(e,t,r){return(t=gxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gxe(e){var t=bxe(e,"string");return typeof t=="symbol"?t:t+""}function bxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Iy.apply(null,arguments)}function yxe(e,t){if(e==null)return{};var r,a,s=jxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jxe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Nxe(e){var{direction:t,width:r,dataKey:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=yxe(e,vxe),d=Ta(c,!1),{data:u,dataPointFormatter:h,xAxisId:f,yAxisId:p,errorBarOffset:v}=pxe(),g=rxe(f),b=axe(p);if(g?.scale==null||b?.scale==null||u==null||t==="x"&&g.type!=="number")return null;var y=u.map(S=>{var{x:w,y:k,value:C,errorVal:_}=h(S,a,t);if(!_)return null;var E=[],T,I;if(Array.isArray(_)?[T,I]=_:T=I=_,t==="x"){var{scale:F}=g,A=k+v,P=A+r,q=A-r,V=F(C-T),Y=F(C+I);E.push({x1:Y,y1:P,x2:Y,y2:q}),E.push({x1:V,y1:A,x2:Y,y2:A}),E.push({x1:V,y1:P,x2:V,y2:q})}else if(t==="y"){var{scale:B}=b,Q=w+v,R=Q-r,Z=Q+r,J=B(C-T),ie=B(C+I);E.push({x1:R,y1:ie,x2:Z,y2:ie}),E.push({x1:Q,y1:J,x2:Q,y2:ie}),E.push({x1:R,y1:J,x2:Z,y2:J})}var M="".concat(w+v,"px ").concat(k+v,"px");return j.createElement(Ys,Iy({className:"recharts-errorBar",key:"bar-".concat(E.map(z=>"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)))},d),E.map(z=>{var ee=s?{transformOrigin:"".concat(z.x1-5,"px")}:void 0;return j.createElement(Hm,{from:{transform:"scaleY(0)",transformOrigin:M},to:{transform:"scaleY(1)",transformOrigin:M},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2),style:{transformOrigin:M}},j.createElement("line",Iy({},z,{style:ee})))}))});return j.createElement(Ys,{className:"recharts-errorBars"},y)}var WH=j.createContext(void 0);function wxe(e){var t=j.useContext(WH);return e??t??"x"}function Sxe(e){var{direction:t,children:r}=e;return j.createElement(WH.Provider,{value:t},r)}var GH={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Cxe(e){var t=wxe(e.direction),{width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o}=Qc(e,GH);return j.createElement(j.Fragment,null,j.createElement(xxe,{dataKey:e.dataKey,direction:t}),j.createElement(Nxe,Iy({},e,{direction:t,width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o})))}class YH extends j.Component{render(){return j.createElement(Cxe,this.props)}}HH(YH,"defaultProps",GH);HH(YH,"displayName","ErrorBar");var kxe="Invariant failed";function Exe(e,t){throw new Error(kxe)}var _xe=["x","y"];function vA(){return vA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vA.apply(null,arguments)}function x8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(r),!0).forEach(function(a){Dxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Dxe(e,t,r){return(t=Axe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Axe(e){var t=Txe(e,"string");return typeof t=="symbol"?t:t+""}function Txe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ixe(e,t){if(e==null)return{};var r,a,s=Pxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Pxe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Oxe(e,t){var{x:r,y:a}=e,s=Ixe(e,_xe),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),h="".concat(t.width||s.width),f=parseInt(h,10);return Pb(Pb(Pb(Pb(Pb({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function KH(e){return j.createElement(FH,vA({shapeType:"rectangle",propTransformer:Oxe,activeClassName:"recharts-active-bar"},e))}var Mxe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(Er(t))return t;var i=Er(a)||Fn(a);return i?t(a,s):(i||Exe(),r)}};function R4(e,t){var r,a,s=Mr(d=>vf(d,e)),i=Mr(d=>op(d,t)),o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:ql.allowDataOverflow,l=(a=i?.allowDataOverflow)!==null&&a!==void 0?a:zl.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function XH(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,s=M4(),{needClipX:i,needClipY:o,needClip:l}=R4(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return j.createElement("clipPath",{id:"clipPath-".concat(a)},j.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var Rxe=["onMouseEnter","onMouseLeave","onClick"],Fxe=["value","background","tooltipPosition"],Lxe=["onMouseEnter","onClick","onMouseLeave"];function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Py.apply(null,arguments)}function v8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v8(Object(r),!0).forEach(function(a){QS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QS(e,t,r){return(t=Bxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bxe(e){var t=Uxe(e,"string");return typeof t=="symbol"?t:t+""}function Uxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gA(e,t){if(e==null)return{};var r,a,s=$xe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $xe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Vxe=e=>{var{dataKey:t,name:r,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:xg(r,t),payload:e}]};function qxe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:xg(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function zxe(e){var t=Mr(Gm),{data:r,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=gA(i,Rxe),u=A4(o,a),h=T4(l),f=I4(c,a);if(!s||r==null)return null;var p=Ta(s,!1);return j.createElement(j.Fragment,null,r.map((v,g)=>{var{value:b,background:y,tooltipPosition:S}=v,w=gA(v,Fxe);if(!y)return null;var k=u(v,g),C=h(v,g),_=f(v,g),E=Eo(Eo(Eo(Eo(Eo({option:s,isActive:String(g)===t},w),{},{fill:"#eee"},y),p),f1(d,v,g)),{},{onMouseEnter:k,onMouseLeave:C,onClick:_,dataKey:a,index:g,className:"recharts-bar-background-rectangle"});return j.createElement(KH,Py({key:"background-bar-".concat(g)},E))}))}function QH(e){var{data:t,props:r,showLabels:a}=e,s=Ta(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=Mr(Gm),d=Mr(pH),{onMouseEnter:u,onClick:h,onMouseLeave:f}=r,p=gA(r,Lxe),v=A4(u,o),g=T4(f),b=I4(h,o);return t?j.createElement(j.Fragment,null,t.map((y,S)=>{var w=l&&String(S)===c&&(d==null||o===d),k=w?l:i,C=Eo(Eo(Eo({},s),y),{},{isActive:w,option:k,index:S,dataKey:o});return j.createElement(Ys,Py({className:"recharts-bar-rectangle"},f1(p,y,S),{onMouseEnter:v(y,S),onMouseLeave:g(y,S),onClick:b(y,S),key:"rectangle-".concat(y?.x,"-").concat(y?.y,"-").concat(y?.value,"-").concat(S)}),j.createElement(KH,C))}),a&&Fm.renderCallByParent(r,t)):null}function Hxe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=r.current,f=O4(t,"recharts-bar-"),[p,v]=j.useState(!1),g=j.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),b=j.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return j.createElement(Hm,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:g,onAnimationStart:b,key:f},y=>{var{t:S}=y,w=S===1?a:a.map((k,C)=>{var _=h&&h[C];if(_){var E=km(_.x,k.x),T=km(_.y,k.y),I=km(_.width,k.width),F=km(_.height,k.height);return Eo(Eo({},k),{},{x:E(S),y:T(S),width:I(S),height:F(S)})}if(s==="horizontal"){var A=km(0,k.height),P=A(S);return Eo(Eo({},k),{},{y:k.y+k.height-P,height:P})}var q=km(0,k.width),V=q(S);return Eo(Eo({},k),{},{width:V})});return S>0&&(r.current=w),j.createElement(Ys,null,j.createElement(QH,{props:t,data:w,showLabels:!p}))})}function Wxe(e){var{data:t,isAnimationActive:r}=e,a=j.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?j.createElement(Hxe,{previousRectanglesRef:a,props:e}):j.createElement(QH,{props:e,data:t,showLabels:!0})}var JH=0,Gxe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Wn(e,t)}};class Yxe extends j.PureComponent{constructor(){super(...arguments),QS(this,"id",Dx("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:a,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d,layout:u}=this.props;if(t)return null;var h=aa("recharts-bar",s),f=Fn(d)?this.id:d;return j.createElement(Ys,{className:h},l&&j.createElement("defs",null,j.createElement(XH,{clipPathId:f,xAxisId:i,yAxisId:o})),j.createElement(Ys,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):null},j.createElement(zxe,{data:r,dataKey:a,background:c,allOtherBarProps:this.props}),j.createElement(Wxe,this.props)),j.createElement(Sxe,{direction:u==="horizontal"?"y":"x"},this.props.children))}}var ZH={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Hx.isSsr,legendType:"rect",minPointSize:JH,xAxisId:0,yAxisId:0};function Kxe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=Qc(e,ZH),{needClip:h}=R4(t,r),f=IS(),p=rl(),v=j.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:uT(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),g=m1(e.children,Dm),b=Mr(w=>wve(w,t,r,p,v,g));if(f!=="vertical"&&f!=="horizontal")return null;var y,S=b?.[0];return S==null||S.height==null||S.width==null?y=0:y=f==="vertical"?S.height/2:S.width/2,j.createElement(mxe,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:Gxe,errorBarOffset:y},j.createElement(Yxe,Py({},e,{layout:f,needClip:h,data:b,xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function Xxe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:f,cells:p}=e,v=t==="horizontal"?l:o,g=u?v.scale.domain():null,b=Iie({numericAxis:v});return h.map((y,S)=>{var w,k,C,_,E,T;u?w=Eie(u[S],g):(w=Wn(y,r),Array.isArray(w)||(w=[b,w]));var I=Mxe(a,JH)(w[1],S);if(t==="horizontal"){var F,[A,P]=[l.scale(w[0]),l.scale(w[1])];k=tL({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:y,index:S}),C=(F=P??A)!==null&&F!==void 0?F:void 0,_=s.size;var q=A-P;if(E=yl(q)?0:q,T={x:k,y:f.top,width:_,height:f.height},Math.abs(I)>0&&Math.abs(E)<Math.abs(I)){var V=Bi(E||I)*(Math.abs(I)-Math.abs(E));C-=V,E+=V}}else{var[Y,B]=[o.scale(w[0]),o.scale(w[1])];if(k=Y,C=tL({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:y,index:S}),_=B-Y,E=s.size,T={x:f.left,y:C,width:f.width,height:E},Math.abs(I)>0&&Math.abs(_)<Math.abs(I)){var Q=Bi(_||I)*(Math.abs(I)-Math.abs(_));_+=Q}}var R=Eo(Eo({},y),{},{x:k,y:C,width:_,height:E,value:u?w:w[1],payload:y,background:T,tooltipPosition:{x:k+_/2,y:C+E/2}},p&&p[S]&&p[S].props);return R})}class e2 extends j.PureComponent{render(){return j.createElement(zH,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},j.createElement(cxe,null),j.createElement(BH,{legendPayload:Vxe(this.props)}),j.createElement(P4,{fn:qxe,args:this.props}),j.createElement(Kxe,this.props))}}QS(e2,"displayName","Bar");QS(e2,"defaultProps",ZH);function g8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g8(Object(r),!0).forEach(function(a){Qxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qxe(e,t,r){return(t=Jxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jxe(e){var t=Zxe(e,"string");return typeof t=="symbol"?t:t+""}function Zxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eve=(e,t)=>t,tve=(e,t,r)=>r,rve=(e,t,r,a)=>a,F4=(e,t,r,a,s)=>s,ave=(e,t,r,a,s)=>s.maxBarSize,nve=(e,t,r,a,s,i)=>i,b8=(e,t,r)=>{var a=r??e;if(!Fn(a))return el(a,t,0)},sve=Ut([en,VS,eve,tve,rve],(e,t,r,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),ive=(e,t,r,a)=>{var s=en(e);return s==="horizontal"?Ay(e,"yAxis",r,a):Ay(e,"xAxis",t,a)},ove=(e,t,r)=>{var a=en(e);return a==="horizontal"?y6(e,"xAxis",t):y6(e,"yAxis",r)};function lve(e){return e.stackId!=null&&e.dataKey!=null}var cve=(e,t,r)=>{var a={},s=e.filter(lve),i=e.filter(d=>d.stackId==null),o=s.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),a),l=Object.entries(o).map(d=>{var[u,h]=d,f=h.map(v=>v.dataKey),p=b8(t,r,h[0].barSize);return{stackId:u,dataKeys:f,barSize:p}}),c=i.map(d=>{var u=[d.dataKey].filter(f=>f!=null),h=b8(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...l,...c]},dve=Ut([sve,xue,ove],cve),uve=(e,t,r,a,s)=>{var i,o,l=en(e),c=jz(e),{maxBarSize:d}=s,u=Fn(d)?c:d,h,f;return l==="horizontal"?(h=Ju(e,"xAxis",t,a),f=Wm(e,"xAxis",t,a)):(h=Ju(e,"yAxis",r,a),f=Wm(e,"yAxis",r,a)),(i=(o=wy(h,f,!0))!==null&&o!==void 0?o:u)!==null&&i!==void 0?i:0},eW=(e,t,r,a)=>{var s=en(e),i,o;return s==="horizontal"?(i=Ju(e,"xAxis",t,a),o=Wm(e,"xAxis",t,a)):(i=Ju(e,"yAxis",r,a),o=Wm(e,"yAxis",r,a)),wy(i,o)};function hve(e,t,r,a,s){var i=a.length;if(!(i<1)){var o=el(e,r,0,!0),l,c=[];if(oo(a[0].barSize)){var d=!1,u=r/i,h=a.reduce((y,S)=>y+(S.barSize||0),0);h+=(i-1)*o,h>=r&&(h-=(i-1)*o,o=0),h>=r&&u>0&&(d=!0,u*=.9,h=i*u);var f=(r-h)/2>>0,p={offset:f-o,size:0};l=a.reduce((y,S)=>{var w,k={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:p.offset+p.size+o,size:d?u:(w=S.barSize)!==null&&w!==void 0?w:0}},C=[...y,k];return p=C[C.length-1].position,C},c)}else{var v=el(t,r,0,!0);r-2*v-(i-1)*o<=0&&(o=0);var g=(r-2*v-(i-1)*o)/i;g>1&&(g>>=0);var b=oo(s)?Math.min(g,s):g;l=a.reduce((y,S,w)=>[...y,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:v+(g+o)*w+(g-b)/2,size:b}}],c)}return l}}var fve=(e,t,r,a,s,i,o)=>{var l=Fn(o)?t:o,c=hve(r,a,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(d=>dN(dN({},d),{},{position:dN(dN({},d.position),{},{offset:d.position.offset-s/2})}))),c},mve=Ut([dve,jz,pue,Nz,uve,eW,ave],fve),pve=(e,t,r,a)=>Ju(e,"xAxis",t,a),xve=(e,t,r,a)=>Ju(e,"yAxis",r,a),vve=(e,t,r,a)=>Wm(e,"xAxis",t,a),gve=(e,t,r,a)=>Wm(e,"yAxis",r,a),bve=Ut([mve,F4],(e,t)=>{if(e!=null){var r=e.find(a=>a.stackId===t.stackId&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),yve=(e,t)=>{if(!(!e||t?.dataKey==null)){var{stackId:r}=t;if(r!=null){var a=e[r];if(a){var{stackedData:s}=a;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},jve=Ut([VS,F4],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),Nve=Ut([ive,F4],yve),wve=Ut([Ni,pve,xve,vve,gve,bve,en,qT,eW,Nve,jve,nve],(e,t,r,a,s,i,o,l,c,d,u,h)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:v}=l;if(!(u==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||a==null||s==null||c==null)){var{data:g}=u,b;if(g!=null&&g.length>0?b=g:b=f?.slice(p,v+1),b!=null)return Xxe({layout:o,barSettings:u,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:b,offset:e,cells:h})}}),tW=e=>{var{chartData:t}=e,r=ss(),a=rl();return j.useEffect(()=>a?()=>{}:(r(A6(t)),()=>{r(A6(void 0))}),[t,r,a]),null},y8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rW=Xc({name:"brush",initialState:y8,reducers:{setBrushSettings(e,t){return t.payload==null?y8:t.payload}}}),{setBrushSettings:OVe}=rW.actions,Sve=rW.reducer;function Cve(e,t,r){return(t=kve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kve(e){var t=Eve(e,"string");return typeof t=="symbol"?t:t+""}function Eve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class L4{static create(t){return new L4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}Cve(L4,"EPS",1e-4);function _ve(e){return(e%180+180)%180}var Dve=function(t){var{width:r,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=_ve(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Ave={dots:[],areas:[],lines:[]},aW=Xc({name:"referenceElements",initialState:Ave,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Yh(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Yh(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Yh(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:MVe,removeDot:RVe,addArea:FVe,removeArea:LVe,addLine:BVe,removeLine:UVe}=aW.actions,Tve=aW.reducer,Ive=j.createContext(void 0),Pve=e=>{var{children:t}=e,[r]=j.useState("".concat(Dx("recharts"),"-clip")),a=M4();if(a==null)return null;var{x:s,y:i,width:o,height:l}=a;return j.createElement(Ive.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function T_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function nW(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Ove(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Dve(a,r)}function Mve(e,t,r){var a=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function t2(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function Rve(e,t){return nW(e,t+1)}function Fve(e,t,r,a,s){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var v=a?.[c];if(v===void 0)return{v:nW(a,d)};var g=c,b,y=()=>(b===void 0&&(b=r(v,g)),b),S=v.coordinate,w=c===0||t2(e,S,y,u,l);w||(c=0,u=o,d+=1),w&&(u=S+e*(y()/2+s),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function j8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j8(Object(r),!0).forEach(function(a){Lve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Lve(e,t,r){return(t=Bve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bve(e){var t=Uve(e,"string");return typeof t=="symbol"?t:t+""}function Uve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ve(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(f){var p=i[f],v,g=()=>(v===void 0&&(v=r(p,f)),v);if(f===o-1){var b=e*(p.coordinate+e*g()/2-c);i[f]=p=wo(wo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[f]=p=wo(wo({},p),{},{tickCoord:p.coordinate});var y=t2(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+s),i[f]=wo(wo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Vve(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=a[l-1],h=r(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=wo(wo({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=t2(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=wo(wo({},u),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(S){var w=o[S],k,C=()=>(k===void 0&&(k=r(w,S)),k);if(S===0){var _=e*(w.coordinate-e*C()/2-c);o[S]=w=wo(wo({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[S]=w=wo(wo({},w),{},{tickCoord:w.coordinate});var E=t2(e,w.tickCoord,C,c,d);E&&(c=w.tickCoord+e*(C()/2+s),o[S]=wo(wo({},w),{},{isShow:!0}))},b=0;b<v;b++)g(b);return o}function B4(e,t,r){var{tick:a,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!a)return[];if(Er(c)||Hx.isSsr){var f;return(f=Rve(s,Er(c)?c:0))!==null&&f!==void 0?f:[]}var p=[],v=l==="top"||l==="bottom"?"width":"height",g=u&&v==="width"?iy(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(w,k)=>{var C=typeof d=="function"?d(w.value,k):w.value;return v==="width"?Ove(iy(C,{fontSize:t,letterSpacing:r}),g,h):iy(C,{fontSize:t,letterSpacing:r})[v]},y=s.length>=2?Bi(s[1].coordinate-s[0].coordinate):1,S=Mve(i,y,v);return c==="equidistantPreserveStart"?Fve(y,S,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Vve(y,S,b,s,o,c==="preserveStartEnd"):p=$ve(y,S,b,s,o),p.filter(w=>w.isShow))}var qve=["viewBox"],zve=["viewBox"];function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p0.apply(null,arguments)}function N8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N8(Object(r),!0).forEach(function(a){U4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function w8(e,t){if(e==null)return{};var r,a,s=Hve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Hve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function U4(e,t,r){return(t=Wve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wve(e){var t=Gve(e,"string");return typeof t=="symbol"?t:t+""}function Gve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lp extends j.Component{constructor(t){super(t),this.tickRefs=j.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,s=w8(t,qve),i=this.props,{viewBox:o}=i,l=w8(i,zve);return!T_(a,o)||!T_(s,l)||!T_(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,f,p,v,g,b=c?-1:1,y=t.tickSize||l,S=Er(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=a+ +!c*i,f=p-b*y,g=f-b*d,v=S;break;case"left":f=p=t.coordinate,h=r+ +!c*s,u=h-b*y,v=u-b*d,g=S;break;case"right":f=p=t.coordinate,h=r+ +c*s,u=h+b*y,v=u+b*d,g=S;break;default:u=h=t.coordinate,p=a+ +c*i,f=p+b*y,g=f+b*d,v=S;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x:v,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=mi(mi(mi({},Ta(this.props,!1)),Ta(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=mi(mi({},c),{},{x1:t,y1:r+d*s,x2:t+a,y2:r+d*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=mi(mi({},c),{},{x1:t+u*a,y1:r,x2:t+u*a,y2:r+s})}return j.createElement("line",p0({},c,{className:aa("recharts-cartesian-axis-line",zm(l,"className"))}))}static renderTickItem(t,r,a){var s,i=aa(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))s=j.cloneElement(t,mi(mi({},r),{},{className:i}));else if(typeof t=="function")s=t(mi(mi({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=aa(o,t.className)),s=j.createElement(KS,p0({},r,{className:o}),a)}return s}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=B4(mi(mi({},this.props),{},{ticks:a}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=Ta(this.props,!1),p=Ta(o,!1),v=mi(mi({},f),{},{fill:"none"},Ta(s,!1)),g=d.map((b,y)=>{var{line:S,tick:w}=this.getTickLineCoord(b),k=mi(mi(mi(mi({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:i},p),w),{},{index:y,payload:b,visibleTicksCount:d.length,tickFormatter:l});return j.createElement(Ys,p0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},f1(this.props,b,y)),s&&j.createElement("line",p0({},v,S,{className:aa("recharts-cartesian-axis-tick-line",zm(s,"className"))})),o&&lp.renderTickItem(o,k,"".concat(typeof l=="function"?l(b.value,y):b.value).concat(c||"")))});return g.length>0?j.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:a,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:j.createElement(Ys,{className:aa("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Gl.renderCallByParent(this.props))}}U4(lp,"displayName","CartesianAxis");U4(lp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Yve=["x1","y1","x2","y2","key"],Kve=["offset"],Xve=["xAxisId","yAxisId"],Qve=["xAxisId","yAxisId"];function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(a){Jve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jve(e,t,r){return(t=Zve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zve(e){var t=e0e(e,"string");return typeof t=="symbol"?t:t+""}function e0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ox.apply(null,arguments)}function r2(e,t){if(e==null)return{};var r,a,s=t0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function t0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var r0e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:s,width:i,height:o,ry:l}=e;return j.createElement("rect",{x:a,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function sW(e,t){var r;if(j.isValidElement(e))r=j.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:s,x2:i,y2:o,key:l}=t,c=r2(t,Yve),d=Ta(c,!1),{offset:u}=d,h=r2(d,Kve);r=j.createElement("line",ox({},h,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function a0e(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=r2(e,Xve),c=s.map((d,u)=>{var h=_o(_o({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return sW(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function n0e(e){var{y:t,height:r,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=r2(e,Qve),c=s.map((d,u)=>{var h=_o(_o({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return sW(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function s0e(e){var{horizontalFill:t,fillOpacity:r,x:a,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],v=p?s+o-h:d[f+1]-h;if(v<=0)return null;var g=f%t.length;return j.createElement("rect",{key:"react-".concat(f),y:h,x:a,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function i0e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],v=p?s+o-h:d[f+1]-h;if(v<=0)return null;var g=f%r.length;return j.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:v,height:l,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var o0e=(e,t)=>{var{xAxis:r,width:a,height:s,offset:i}=e;return lq(B4(_o(_o(_o({},lp.defaultProps),r),{},{ticks:cq(r),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},l0e=(e,t)=>{var{yAxis:r,width:a,height:s,offset:i}=e;return lq(B4(_o(_o(_o({},lp.defaultProps),r),{},{ticks:cq(r),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},c0e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function bA(e){var t=pT(),r=xT(),a=mq(),s=_o(_o({},Qc(e,c0e)),{},{x:Er(e.x)?e.x:a.left,y:Er(e.y)?e.y:a.top,width:Er(e.width)?e.width:a.width,height:Er(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,v=rl(),g=Mr(I=>j6(I,"xAxis",i,v)),b=Mr(I=>j6(I,"yAxis",o,v));if(!Er(d)||d<=0||!Er(u)||u<=0||!Er(l)||l!==+l||!Er(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||o0e,S=s.horizontalCoordinatesGenerator||l0e,{horizontalPoints:w,verticalPoints:k}=s;if((!w||!w.length)&&typeof S=="function"){var C=f&&f.length,_=S({yAxis:b?_o(_o({},b),{},{ticks:C?f:b.ticks}):void 0,width:t,height:r,offset:a},C?!0:h);sy(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(w=_)}if((!k||!k.length)&&typeof y=="function"){var E=p&&p.length,T=y({xAxis:g?_o(_o({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:a},E?!0:h);sy(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(k=T)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(r0e,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),j.createElement(s0e,ox({},s,{horizontalPoints:w})),j.createElement(i0e,ox({},s,{verticalPoints:k})),j.createElement(a0e,ox({},s,{offset:a,horizontalPoints:w,xAxis:g,yAxis:b})),j.createElement(n0e,ox({},s,{offset:a,verticalPoints:k,xAxis:g,yAxis:b})))}bA.displayName="CartesianGrid";var iW=(e,t,r,a)=>Ju(e,"xAxis",t,a),oW=(e,t,r,a)=>Wm(e,"xAxis",t,a),lW=(e,t,r,a)=>Ju(e,"yAxis",r,a),cW=(e,t,r,a)=>Wm(e,"yAxis",r,a),d0e=Ut([en,iW,lW,oW,cW],(e,t,r,a,s)=>ff(e,"xAxis")?wy(t,a,!1):wy(r,s,!1)),u0e=(e,t,r,a,s)=>{var i,o=en(e),l=ff(o,"xAxis"),c;if(l?c=Ay(e,"yAxis",r,a):c=Ay(e,"xAxis",t,a),c!=null){var{dataKey:d,stackId:u}=s;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h?.find(f=>f.key===d)}}},h0e=(e,t,r,a,s)=>s,f0e=Ut([VS,h0e],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&uT(t.stackId)===r.stackId&&t.data===r.data))return t}),m0e=Ut([en,iW,lW,oW,cW,u0e,qT,d0e,f0e],(e,t,r,a,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||a==null||s==null||a.length===0||s.length===0||l==null)){var{data:f}=c,p;if(f&&f.length>0?p=f:p=d?.slice(u,h+1),p!=null){var v=void 0;return P0e({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:v,bandSize:l})}}}),p0e=["layout","type","stroke","connectNulls","isRange"],x0e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function dW(e,t){if(e==null)return{};var r,a,s=v0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function v0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function C8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function lx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C8(Object(r),!0).forEach(function(a){JS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JS(e,t,r){return(t=g0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g0e(e){var t=b0e(e,"string");return typeof t=="symbol"?t:t+""}function b0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lm.apply(null,arguments)}function a2(e,t){return e&&e!=="none"?e:t}var y0e=e=>{var{dataKey:t,name:r,stroke:a,fill:s,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:a2(a,s),value:xg(r,t),payload:e}]};function j0e(e){var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:xg(o,t),hide:l,type:e.tooltipType,color:a2(a,i),unit:c}}}var N0e=(e,t)=>{var r;if(j.isValidElement(e))r=j.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=aa("recharts-area-dot",typeof e!="boolean"?e.className:"");r=j.createElement(TH,Lm({},t,{className:a}))}return r};function w0e(e,t){return e==null?!1:t?!0:e.length===1}function S0e(e){var{clipPathId:t,points:r,props:a}=e,{needClip:s,dot:i,dataKey:o}=a;if(!w0e(r,i))return null;var l=iV(i),c=Ta(a,!1),d=Ta(i,!0),u=r.map((f,p)=>{var v=lx(lx(lx({key:"dot-".concat(p),r:3},c),d),{},{index:p,cx:f.x,cy:f.y,dataKey:o,value:f.value,payload:f.payload,points:r});return N0e(i,v)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return j.createElement(Ys,Lm({className:"recharts-area-dots"},h),u)}function yA(e){var{points:t,baseLine:r,needClip:a,clipPathId:s,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,f=dW(i,p0e);return j.createElement(j.Fragment,null,t?.length>1&&j.createElement(Ys,{clipPath:a?"url(#clipPath-".concat(s,")"):void 0},j.createElement(ny,Lm({},Ta(f,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&j.createElement(ny,Lm({},Ta(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&j.createElement(ny,Lm({},Ta(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),j.createElement(S0e,{points:t,props:i,clipPathId:s}),o&&Fm.renderCallByParent(i,t))}function C0e(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].y,o=a[a.length-1].y;if(!oo(i)||!oo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.x||0));return Er(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Er(c)?j.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function k0e(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].x,o=a[a.length-1].x;if(!oo(i)||!oo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.y||0));return Er(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Er(c)?j.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function E0e(e){var{alpha:t,layout:r,points:a,baseLine:s,strokeWidth:i}=e;return r==="vertical"?j.createElement(C0e,{alpha:t,points:a,baseLine:s,strokeWidth:i}):j.createElement(k0e,{alpha:t,points:a,baseLine:s,strokeWidth:i})}function _0e(e){var{needClip:t,clipPathId:r,props:a,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:p}=a,v=O4(a,"recharts-area-"),[g,b]=j.useState(!0),y=j.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),S=j.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]),w=s.current,k=i.current;return j.createElement(Hm,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:S,key:v},C=>{var{t:_}=C;if(w){var E=w.length/o.length,T=_===1?o:o.map((F,A)=>{var P=Math.floor(A*E);if(w[P]){var q=w[P];return lx(lx({},F),{},{x:zv(q.x,F.x,_),y:zv(q.y,F.y,_)})}return F}),I;return Er(l)?I=zv(k,l,_):Fn(l)||yl(l)?I=zv(k,0,_):I=l.map((F,A)=>{var P=Math.floor(A*E);if(Array.isArray(k)&&k[P]){var q=k[P];return lx(lx({},F),{},{x:zv(q.x,F.x,_),y:zv(q.y,F.y,_)})}return F}),_>0&&(s.current=T,i.current=I),j.createElement(yA,{points:T,baseLine:I,needClip:t,clipPathId:r,props:a,showLabels:!g})}return _>0&&(s.current=o,i.current=l),j.createElement(Ys,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(r)},j.createElement(E0e,{alpha:_,points:o,baseLine:l,layout:a.layout,strokeWidth:a.strokeWidth}))),j.createElement(Ys,{clipPath:"url(#animationClipPath-".concat(r,")")},j.createElement(yA,{points:o,baseLine:l,needClip:t,clipPathId:r,props:a,showLabels:!0})))})}function D0e(e){var{needClip:t,clipPathId:r,props:a}=e,{points:s,baseLine:i,isAnimationActive:o}=a,l=j.useRef(null),c=j.useRef(),d=l.current,u=c.current;return o&&s&&s.length&&(d!==s||u!==i)?j.createElement(_0e,{needClip:t,clipPathId:r,props:a,previousPointsRef:l,previousBaselineRef:c}):j.createElement(yA,{points:s,baseLine:i,needClip:t,clipPathId:r,props:a,showLabels:!0})}class A0e extends j.PureComponent{constructor(){super(...arguments),JS(this,"id",Dx("recharts-area-"))}render(){var t,{hide:r,dot:a,points:s,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:f,id:p,baseLine:v}=this.props;if(r)return null;var g=aa("recharts-area",i),b=Fn(p)?this.id:p,{r:y=3,strokeWidth:S=2}=(t=Ta(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=iV(a),k=y*2+S;return j.createElement(j.Fragment,null,j.createElement(Ys,{className:g},c&&j.createElement("defs",null,j.createElement(XH,{clipPathId:b,xAxisId:d,yAxisId:u}),!w&&j.createElement("clipPath",{id:"clipPath-dots-".concat(b)},j.createElement("rect",{x:l-k/2,y:o-k/2,width:h+k,height:f+k}))),j.createElement(D0e,{needClip:c,clipPathId:b,props:this.props})),j.createElement(m8,{points:s,mainColor:a2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&j.createElement(m8,{points:v,mainColor:a2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var uW={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Hx.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function T0e(e){var t,r=Qc(e,uW),{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:f,legendType:p,stroke:v,xAxisId:g,yAxisId:b}=r,y=dW(r,x0e),S=IS(),w=vH(),{needClip:k}=R4(g,b),C=rl(),_=j.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:E,isRange:T,baseLine:I}=(t=Mr(V=>m0e(V,g,b,C,_)))!==null&&t!==void 0?t:{},{height:F,width:A,x:P,y:q}=M4();return S!=="horizontal"&&S!=="vertical"||w!=="AreaChart"&&w!=="ComposedChart"?null:j.createElement(A0e,Lm({},y,{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:I,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:F,hide:h,layout:S,isAnimationActive:f,isRange:T,legendType:p,needClip:k,points:E,stroke:v,width:A,left:P,top:q,xAxisId:g,yAxisId:b}))}var I0e=(e,t,r,a,s)=>{var i=r??t;if(Er(i))return i;var o=e==="horizontal"?s:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function P0e(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:a},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:p}=e,v=s&&s.length,g=I0e(i,o,r,l,c),b=i==="horizontal",y=!1,S=d.map((k,C)=>{var _;v?_=s[u+C]:(_=Wn(k,a),Array.isArray(_)?y=!0:_=[g,_]);var E=_[1]==null||v&&!t&&Wn(k,a)==null;return b?{x:eL({axis:l,ticks:h,bandSize:p,entry:k,index:C}),y:E?null:c.scale(_[1]),value:_,payload:k}:{x:E?null:l.scale(_[1]),y:eL({axis:c,ticks:f,bandSize:p,entry:k,index:C}),value:_,payload:k}}),w;return v||y?w=S.map(k=>{var C=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:C!=null&&k.y!=null?c.scale(C):null}:{x:C!=null?l.scale(C):null,y:k.y}}):w=b?c.scale(g):l.scale(g),{points:S,baseLine:w,isRange:y}}class x0 extends j.PureComponent{render(){return j.createElement(zH,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},j.createElement(BH,{legendPayload:y0e(this.props)}),j.createElement(P4,{fn:j0e,args:this.props}),j.createElement(T0e,this.props))}}JS(x0,"displayName","Area");JS(x0,"defaultProps",uW);function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(r),!0).forEach(function(a){O0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function O0e(e,t,r){return(t=M0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M0e(e){var t=R0e(e,"string");return typeof t=="symbol"?t:t+""}function R0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F0e={xAxis:{},yAxis:{},zAxis:{}},hW=Xc({name:"cartesianAxis",initialState:F0e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=E8(E8({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:L0e,removeXAxis:B0e,addYAxis:U0e,removeYAxis:$0e,addZAxis:$Ve,removeZAxis:VVe,updateYAxisWidth:V0e}=hW.actions,q0e=hW.reducer,z0e=["children"],H0e=["dangerouslySetInnerHTML","ticks"];function fW(e,t,r){return(t=W0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W0e(e){var t=G0e(e,"string");return typeof t=="symbol"?t:t+""}function G0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jA(){return jA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jA.apply(null,arguments)}function mW(e,t){if(e==null)return{};var r,a,s=Y0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Y0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function K0e(e){var t=ss(),r=j.useMemo(()=>{var{children:i}=e,o=mW(e,z0e);return o},[e]),a=Mr(i=>vf(i,r.id)),s=r===a;return j.useEffect(()=>(t(L0e(r)),()=>{t(B0e(r))}),[r,t]),s?e.children:null}var X0e=e=>{var{xAxisId:t,className:r}=e,a=Mr(fq),s=rl(),i="xAxis",o=Mr(p=>Ng(p,i,t,s)),l=Mr(p=>Xz(p,i,t,s)),c=Mr(p=>Wz(p,t)),d=Mr(p=>lhe(p,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=mW(e,H0e);return j.createElement(lp,jA({},f,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:aa("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:l}))},Q0e=e=>{var t,r,a,s,i;return j.createElement(K0e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},j.createElement(X0e,e))};class n2 extends j.Component{render(){return j.createElement(Q0e,this.props)}}fW(n2,"displayName","XAxis");fW(n2,"defaultProps",{allowDataOverflow:ql.allowDataOverflow,allowDecimals:ql.allowDecimals,allowDuplicatedCategory:ql.allowDuplicatedCategory,height:ql.height,hide:!1,mirror:ql.mirror,orientation:ql.orientation,padding:ql.padding,reversed:ql.reversed,scale:ql.scale,tickCount:ql.tickCount,type:ql.type,xAxisId:0});var J0e=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(r?a:0);return Math.round(d)}return 0},Z0e=["dangerouslySetInnerHTML","ticks"];function pW(e,t,r){return(t=ege(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ege(e){var t=tge(e,"string");return typeof t=="symbol"?t:t+""}function tge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NA(){return NA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},NA.apply(null,arguments)}function rge(e,t){if(e==null)return{};var r,a,s=age(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function age(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function nge(e){var t=ss();return j.useEffect(()=>(t(U0e(e)),()=>{t($0e(e))}),[e,t]),null}var sge=e=>{var t,{yAxisId:r,className:a,width:s,label:i}=e,o=j.useRef(null),l=j.useRef(null),c=Mr(fq),d=rl(),u=ss(),h="yAxis",f=Mr(w=>Ng(w,h,r,d)),p=Mr(w=>Gz(w,r)),v=Mr(w=>che(w,r)),g=Mr(w=>Xz(w,h,r,d));if(j.useLayoutEffect(()=>{var w;if(!(s!=="auto"||!p||C4(i)||j.isValidElement(i))){var k=o.current,C=k==null||(w=k.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:_,tickMargin:E}=k.props,T=J0e({ticks:C,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:E});Math.round(p.width)!==Math.round(T)&&u(V0e({id:r,width:T}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p?.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,S=rge(e,Z0e);return j.createElement(lp,NA({},S,{ref:o,labelRef:l,scale:f,x:v.x,y:v.y,width:p.width,height:p.height,className:aa("recharts-".concat(h," ").concat(h),a),viewBox:c,ticks:g}))},ige=e=>{var t,r,a,s,i;return j.createElement(j.Fragment,null,j.createElement(nge,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),j.createElement(sge,e))},oge={allowDataOverflow:zl.allowDataOverflow,allowDecimals:zl.allowDecimals,allowDuplicatedCategory:zl.allowDuplicatedCategory,hide:!1,mirror:zl.mirror,orientation:zl.orientation,padding:zl.padding,reversed:zl.reversed,scale:zl.scale,tickCount:zl.tickCount,type:zl.type,width:zl.width,yAxisId:0};class s2 extends j.Component{render(){return j.createElement(ige,this.props)}}pW(s2,"displayName","YAxis");pW(s2,"defaultProps",oge);var I_={exports:{}},P_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8;function lge(){if(_8)return P_;_8=1;var e=dg();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return P_.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(C){if(!y){if(y=!0,S=C,C=h(C),f!==void 0&&v.hasValue){var _=v.value;if(f(_,C))return w=_}return w=C}if(_=w,r(S,C))return _;var E=h(C);return f!==void 0&&f(_,E)?(S=C,_):(S=C,w=E)}var y=!1,S,w,k=u===void 0?null:u;return[function(){return b(d())},k===null?void 0:function(){return b(k())}]},[d,u,h,f]);var g=a(c,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),l(g),g},P_}var D8;function cge(){return D8||(D8=1,I_.exports=lge()),I_.exports}cge();function dge(e){e()}function uge(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dge(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var A8={notify(){},get:()=>[]};function hge(e,t){let r,a=A8,s=0,i=!1;function o(g){u();const b=a.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){a.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){s++,r||(r=e.subscribe(c),a=uge())}function h(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=A8)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>a};return v}var fge=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mge=fge(),pge=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xge=pge(),vge=()=>mge||xge?j.useLayoutEffect:j.useEffect,gge=vge(),bge=Symbol.for("react-redux-context"),yge=typeof globalThis<"u"?globalThis:{};function jge(){if(!j.createContext)return{};const e=yge[bge]??=new Map;let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var Nge=jge();function wge(e){const{children:t,context:r,serverState:a,store:s}=e,i=j.useMemo(()=>{const c=hge(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),o=j.useMemo(()=>s.getState(),[s]);gge(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||Nge;return j.createElement(l.Provider,{value:i},t)}var Sge=wge,Cge=(e,t)=>t,$4=Ut([Cge,en,Nue,zi,uH,gf,ufe,Ni],xfe),V4=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},xW=Hc("mouseClick"),vW=p1();vW.startListening({actionCreator:xW,effect:(e,t)=>{var r=e.payload,a=$4(t.getState(),V4(r));a?.activeIndex!=null&&t.dispatch(Nhe({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var wA=Hc("mouseMove"),gW=p1();gW.startListening({actionCreator:wA,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=p4(a,a.tooltip.settings.shared),i=$4(a,V4(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(nH({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(aH()))}});function kge(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var T8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},bW=Xc({name:"rootProps",initialState:T8,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:T8.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Ege=bW.reducer,{updateOptions:_ge}=bW.actions,yW=Xc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Dge}=yW.actions,Age=yW.reducer,jW=Hc("keyDown"),NW=Hc("focus"),q4=p1();q4.startListening({actionCreator:jW,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(x4(s,Xx(r))),l=gf(r);if(i==="Enter"){var c=Kw(r,"axis","hover",String(s.index));t.dispatch(uA({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=fhe(r),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(l==null||f>=l.length||f<0)){var p=Kw(r,"axis","hover",String(f));t.dispatch(uA({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});q4.startListening({actionCreator:NW,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=Kw(r,"axis","hover",String(i));t.dispatch(uA({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ac=Hc("externalEvent"),wW=p1();wW.startListening({actionCreator:Ac,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:rfe(r),activeDataKey:pH(r),activeIndex:Gm(r),activeLabel:mH(r),activeTooltipIndex:Gm(r),isTooltipActive:afe(r)};e.payload.handler(a,e.payload.reactEvent)}}});var Tge=Ut([wg],e=>e.tooltipItemPayloads),Ige=Ut([Tge,C1,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var s=e.find(l=>l.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),SW=Hc("touchMove"),CW=p1();CW.startListening({actionCreator:SW,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=p4(a,a.tooltip.settings.shared);if(s==="axis"){var i=$4(a,V4({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(nH({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(uq),u=(o=c.getAttribute(hq))!==null&&o!==void 0?o:void 0,h=Ige(t.getState(),d,u);t.dispatch(rH({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var Pge=LV({brush:Sve,cartesianAxis:q0e,chartData:Ife,graphicalItems:fpe,layout:uie,legend:Qie,options:Efe,polarAxis:Qme,polarOptions:Age,referenceElements:Tve,rootProps:Ege,tooltip:whe}),Oge=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Rse({reducer:Pge,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([vW.middleware,gW.middleware,q4.middleware,wW.middleware,CW.middleware]),devTools:{serialize:{replacer:kge},name:"recharts-".concat(r)}})};function kW(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,s=rl(),i=j.useRef(null);if(s)return r;i.current==null&&(i.current=Oge(t,a));var o=sT;return j.createElement(Sge,{context:o,store:i.current},r)}function EW(e){var{layout:t,width:r,height:a,margin:s}=e,i=ss(),o=rl();return j.useEffect(()=>{o||(i(lie(t)),i(cie({width:r,height:a})),i(oie(s)))},[i,o,t,r,a,s]),null}function _W(e){var t=ss();return j.useEffect(()=>{t(_ge(e))},[t,e]),null}var Mge=["children"];function Rge(e,t){if(e==null)return{};var r,a,s=Fge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Fge(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i2.apply(null,arguments)}var Lge={width:"100%",height:"100%"},Bge=j.forwardRef((e,t)=>{var r=pT(),a=xT(),s=gq();if(!z0(r)||!z0(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,j.createElement(G3,i2({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:a,style:Lge,ref:t}),i)}),Uge=e=>{var{children:t}=e,r=Mr(TS);if(!r)return null;var{width:a,height:s,y:i,x:o}=r;return j.createElement(G3,{width:a,height:s,x:o,y:i},t)},I8=j.forwardRef((e,t)=>{var{children:r}=e,a=Rge(e,Mge),s=rl();return s?j.createElement(Uge,null,r):j.createElement(Bge,i2({ref:t},a),r)});function $ge(){var e=ss(),[t,r]=j.useState(null),a=Mr(Bie);return j.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;oo(i)&&i!==a&&e(die(i))}},[t,e,a]),r}function P8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P8(Object(r),!0).forEach(function(a){qge(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qge(e,t,r){return(t=zge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zge(e){var t=Hge(e,"string");return typeof t=="symbol"?t:t+""}function Hge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wge=j.forwardRef((e,t)=>{var{children:r,className:a,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:v,onTouchStart:g,style:b,width:y}=e,S=ss(),[w,k]=j.useState(null),[C,_]=j.useState(null);Mfe();var E=$ge(),T=j.useCallback(M=>{E(M),typeof t=="function"&&t(M),k(M),_(M)},[E,t,k,_]),I=j.useCallback(M=>{S(xW(M)),S(Ac({handler:i,reactEvent:M}))},[S,i]),F=j.useCallback(M=>{S(wA(M)),S(Ac({handler:d,reactEvent:M}))},[S,d]),A=j.useCallback(M=>{S(aH()),S(Ac({handler:u,reactEvent:M}))},[S,u]),P=j.useCallback(M=>{S(wA(M)),S(Ac({handler:h,reactEvent:M}))},[S,h]),q=j.useCallback(()=>{S(NW())},[S]),V=j.useCallback(M=>{S(jW(M.key))},[S]),Y=j.useCallback(M=>{S(Ac({handler:o,reactEvent:M}))},[S,o]),B=j.useCallback(M=>{S(Ac({handler:l,reactEvent:M}))},[S,l]),Q=j.useCallback(M=>{S(Ac({handler:c,reactEvent:M}))},[S,c]),R=j.useCallback(M=>{S(Ac({handler:f,reactEvent:M}))},[S,f]),Z=j.useCallback(M=>{S(Ac({handler:g,reactEvent:M}))},[S,g]),J=j.useCallback(M=>{S(SW(M)),S(Ac({handler:v,reactEvent:M}))},[S,v]),ie=j.useCallback(M=>{S(Ac({handler:p,reactEvent:M}))},[S,p]);return j.createElement(NH.Provider,{value:w},j.createElement(oV.Provider,{value:C},j.createElement("div",{className:aa("recharts-wrapper",a),style:Vge({position:"relative",cursor:"default",width:y,height:s},b),onClick:I,onContextMenu:Y,onDoubleClick:B,onFocus:q,onKeyDown:V,onMouseDown:Q,onMouseEnter:F,onMouseLeave:A,onMouseMove:P,onMouseUp:R,onTouchEnd:ie,onTouchMove:J,onTouchStart:Z,ref:T},r)))}),Gge=["children","className","width","height","style","compact","title","desc"];function Yge(e,t){if(e==null)return{};var r,a,s=Kge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Kge(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var DW=j.forwardRef((e,t)=>{var{children:r,className:a,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=Yge(e,Gge),h=Ta(u,!1);return l?j.createElement(I8,{otherAttributes:h,title:c,desc:d},r):j.createElement(Wge,{className:a,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement(I8,{otherAttributes:h,title:c,desc:d,ref:t},j.createElement(Pve,null,r)))}),Xge=["width","height"];function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},SA.apply(null,arguments)}function Qge(e,t){if(e==null)return{};var r,a,s=Jge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Jge(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Zge={top:5,right:5,bottom:5,left:5},ebe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Zge,reverseStackOrder:!1,syncMethod:"index"},AW=j.forwardRef(function(t,r){var a,s=Qc(t.categoricalChartProps,ebe),{width:i,height:o}=s,l=Qge(s,Xge);if(!z0(i)||!z0(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return j.createElement(kW,{preloadedState:{options:p},reduxStoreName:(a=f.id)!==null&&a!==void 0?a:c},j.createElement(tW,{chartData:f.data}),j.createElement(EW,{width:i,height:o,layout:s.layout,margin:s.margin}),j.createElement(_W,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),j.createElement(DW,SA({},l,{width:i,height:o,ref:r})))}),tbe=["axis","item"],rbe=j.forwardRef((e,t)=>j.createElement(AW,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tbe,tooltipPayloadSearcher:S4,categoricalChartProps:e,ref:t}));function abe(e){var t=ss();return j.useEffect(()=>{t(Dge(e))},[t,e]),null}var nbe=["width","height","layout"];function CA(){return CA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},CA.apply(null,arguments)}function sbe(e,t){if(e==null)return{};var r,a,s=ibe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ibe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var obe={top:5,right:5,bottom:5,left:5},lbe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:obe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},cbe=j.forwardRef(function(t,r){var a,s=Qc(t.categoricalChartProps,lbe),{width:i,height:o,layout:l}=s,c=sbe(s,nbe);if(!z0(i)||!z0(o))return null;var{chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f}=t,p={chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(kW,{preloadedState:{options:p},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:d},j.createElement(tW,{chartData:s.data}),j.createElement(EW,{width:i,height:o,layout:l,margin:s.margin}),j.createElement(_W,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),j.createElement(abe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),j.createElement(DW,CA({width:i,height:o},c,{ref:r})))}),dbe=["item"],ube={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},O8=j.forwardRef((e,t)=>{var r=Qc(e,ube);return j.createElement(cbe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:dbe,tooltipPayloadSearcher:S4,categoricalChartProps:r,ref:t})}),hbe=["axis"],fbe=j.forwardRef((e,t)=>j.createElement(AW,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hbe,tooltipPayloadSearcher:S4,categoricalChartProps:e,ref:t}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mbe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),M8=e=>{const t=pbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},TW=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),xbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...vbe,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:TW("lucide",s),...!i&&!xbe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=(e,t)=>{const r=j.forwardRef(({className:a,...s},i)=>j.createElement(gbe,{ref:i,iconNode:t,className:TW(`lucide-${mbe(M8(e))}`,`lucide-${e}`,a),...s}));return r.displayName=M8(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bbe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ybe=k1("credit-card",bbe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jbe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Nbe=k1("dollar-sign",jbe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],O_=k1("file-text",wbe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Cbe=k1("shopping-cart",Sbe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kbe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],R8=k1("trending-up",kbe),Ebe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[u,h]=j.useState(!0),[f,p]=j.useState(new Date().getFullYear()),[v]=j.useState(localStorage.getItem("selectedCompanyId")||""),[g]=j.useState(localStorage.getItem("financialYear")||""),b=new Date().getFullYear(),y=[b-1,b,b+1];j.useEffect(()=>{(async()=>{h(!0);try{const T={companyId:v},[I,F,A,P,q]=await Promise.all([Ie.get("/api/purchase-orders",{params:T}),Ie.get("/api/sales-orders",{params:T}),Ie.get("/api/stock/data",{params:T}),Ie.get("/api/invoiceform",{params:T}),Ie.get("/api/billingform",{params:T})]);t(I.data),a(F.data),i(A.data),l(P.data),console.log("Fetched Invoices:",P.data),d(q.data)}catch(T){console.error("Data fetch error:",T)}finally{h(!1)}})()},[v,g]);const S=j.useMemo(()=>{let E=0,T=11,I=f;if(g&&/^\d{4}-\d{4}$/.test(g)){const[P,q]=g.split("-").map(Number);E=3,T=2,I=P}const F=[];for(let P=0;P<12;P++){let q=(E+P)%12,V=I+(q<E?1:0);F.push({month:new Date(V,q).toLocaleString("default",{month:"short"}),purchases:0,sales:0,inventory:0,invoices:0,billings:0,profitMargin:0})}const A=(P,q,V,Y)=>{P?.forEach(B=>{const Q=new Date(B[q]);if(!isNaN(Q)){let R=I,Z=g&&/^\d{4}-\d{4}$/.test(g)?Number(g.split("-")[1]):I,J=!1;if(g&&/^\d{4}-\d{4}$/.test(g)?(Q.getFullYear()===R&&Q.getMonth()>=E||Q.getFullYear()===Z&&Q.getMonth()<=T)&&(J=!0):J=Q.getFullYear()===f,J){let ie;g&&/^\d{4}-\d{4}$/.test(g)?ie=(Q.getMonth()-E+12)%12:ie=Q.getMonth(),F[ie][Y]+=V?B[V]||0:1}}})};return A(e,"date","finalTotal","purchases"),A(r,"date","finalTotal","sales"),A(s,"createdAt",null,"inventory"),A(o,"documentDate","finalTotal","invoices"),A(c,"documentDate","finalTotal","billings"),F},[e,r,s,o,c,f,g]);e.reduce((E,T)=>E+(T.finalTotal||0),0),r.reduce((E,T)=>E+(T.finalTotal||0),0),o.reduce((E,T)=>E+(T.finalTotal||0),0),c.reduce((E,T)=>E+(T.finalTotal||0),0);const[w,k]=j.useState({paid:0,pending:0}),[C,_]=j.useState({paid:0,pending:0});return j.useEffect(()=>{console.log("Calculating invoice statuses...",o);const E=o.filter(A=>A.balance===0).length,T=o.filter(A=>A.balance>0).length;k({paid:E,pending:T});const I=c.filter(A=>A.balance===0).length,F=c.filter(A=>A.balance>0).length;_({paid:I,pending:F})},[o,c]),u?n.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:n.jsxs("div",{className:"text-center text-white",children:[n.jsx("div",{className:"spinner-border text-light mb-3",role:"status",style:{width:"4rem",height:"4rem"},children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"fs-5",children:"Loading your dashboard..."})]})}):n.jsxs("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[n.jsx("style",{children:`
        .card-hover {
          transition: all 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
          border: none;
          border-radius: 15px;
          overflow: hidden;
          position: relative;
        }
        .metric-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .chart-container {
          border-radius: 15px;
          border: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .stat-item {
          padding: 12px;
          margin: 5px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.7);
          transition: all 0.3s ease;
        }
        .stat-item:hover {
          background: rgba(255,255,255,0.9);
          transform: translateX(5px);
        }
        .progress-custom {
          height: 8px;
          border-radius: 10px;
          background: rgba(0,0,0,0.1);
        }
        .progress-bar-custom {
          border-radius: 10px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
      `}),n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"d-grid gap-4 mb-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[{title:"Purchase Orders",value:e.length,icon:Cbe,color:"primary",bgColor:"bg-primary"},{title:"Sales Orders",value:r.length,icon:Nbe,color:"success",bgColor:"bg-success"},{title:"Vendor Invoices",value:o.length,icon:O_,color:"info",bgColor:"bg-info"},{title:"Customer Invoices",value:c.length,icon:ybe,color:"danger",bgColor:"bg-danger"}].map((E,T)=>n.jsx("div",{className:"card metric-card card-hover h-100",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("div",{className:`${E.bgColor} bg-opacity-10 p-3 rounded-3 text-center`,children:n.jsx(E.icon,{size:24,className:`text-${E.color}`})})}),n.jsxs("div",{className:"col-8 text-end",children:[n.jsx("div",{className:`h4 fw-bold text-${E.color} mb-1`,children:E.value}),n.jsx("div",{className:"small text-muted",children:E.title})]})]})})},T))}),n.jsxs("div",{className:"row g-4 mb-4",children:[n.jsx("div",{className:"col-lg-8",children:n.jsxs("div",{className:"card chart-container",children:[n.jsxs("div",{className:"card-header bg-transparent border-0 d-flex justify-content-between align-items-center",children:[n.jsxs("h5",{className:"card-title fw-bold mb-0 d-flex align-items-center",children:[n.jsx(R8,{size:20,className:"text-primary me-2"}),"Monthly Financial Trends (",f,")"]}),n.jsx("select",{className:"form-select w-auto",value:f,onChange:E=>p(Number(E.target.value)),children:y.map(E=>n.jsx("option",{value:E,children:E},E))})]}),n.jsx("div",{className:"card-body",children:n.jsx(cN,{width:"100%",height:350,children:n.jsxs(fbe,{data:S,children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#28a745",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#28a745",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorPurchases",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#007bff",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#007bff",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorInvoices",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#6f42c1",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#6f42c1",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorBillings",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#dc3545",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#dc3545",stopOpacity:0})]})]}),n.jsx(bA,{strokeDasharray:"3 3",stroke:"#e9ecef"}),n.jsx(n2,{dataKey:"month",stroke:"#6c757d"}),n.jsx(s2,{tickFormatter:E=>`${(E/1e3).toFixed(0)}k`,stroke:"#6c757d"}),n.jsx(lN,{formatter:(E,T)=>["inventory"].includes(T.toLowerCase())?[`${E}`,T]:[`${E.toLocaleString()}`,T],contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),n.jsx(ax,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),n.jsx(x0,{type:"monotone",dataKey:"sales",stroke:"#28a745",fillOpacity:1,fill:"url(#colorSales)",strokeWidth:2,name:"Sales Orders"}),n.jsx(x0,{type:"monotone",dataKey:"purchases",stroke:"#007bff",fillOpacity:1,fill:"url(#colorPurchases)",strokeWidth:2,name:"Purchase Orders"}),n.jsx(x0,{type:"monotone",dataKey:"invoices",stroke:"#6f42c1",fillOpacity:1,fill:"url(#colorInvoices)",strokeWidth:2,name:"Invoices"}),n.jsx(x0,{type:"monotone",dataKey:"billings",stroke:"#dc3545",fillOpacity:1,fill:"url(#colorBillings)",strokeWidth:2,name:"Billings"})]})})})]})}),n.jsx("div",{className:"col-lg-4",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(O_,{size:20,className:"text-info me-2"}),"Vendor Invoice Status"]})}),n.jsx("div",{className:"card-body",children:n.jsx(cN,{width:"100%",height:350,children:n.jsxs(O8,{children:[n.jsxs(Zw,{data:[{name:"Paid",value:w.paid},{name:"Pending",value:w.pending}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:[n.jsx(Dm,{fill:"#28a745"}),n.jsx(Dm,{fill:"#ffc107"})]}),n.jsx(lN,{}),n.jsx(ax,{})]})})})]})}),n.jsx("div",{className:"col-lg-8",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(R8,{size:20,className:"text-primary me-2"}),"Sales vs Purchases"]})}),n.jsx("div",{className:"card-body",children:n.jsx(cN,{width:"100%",height:350,children:n.jsxs(rbe,{data:S,children:[n.jsx(bA,{strokeDasharray:"3 3"}),n.jsx(n2,{dataKey:"month"}),n.jsx(s2,{tickFormatter:E=>`${E/1e3}k`}),n.jsx(lN,{}),n.jsx(ax,{}),n.jsx(e2,{dataKey:"sales",name:"Sales",fill:"#28a745"}),n.jsx(e2,{dataKey:"purchases",name:"Purchases",fill:"#007bff"})]})})})]})}),n.jsx("div",{className:"col-lg-4",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(O_,{size:20,className:"text-info me-2"}),"Customer Invoice Status"]})}),n.jsx("div",{className:"card-body",children:n.jsx(cN,{width:"100%",height:350,children:n.jsxs(O8,{children:[n.jsxs(Zw,{data:[{name:"Paid",value:C.paid},{name:"Pending",value:C.pending}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:[n.jsx(Dm,{fill:"#28a745"}),n.jsx(Dm,{fill:"#ffc107"})]}),n.jsx(lN,{}),n.jsx(ax,{})]})})})]})})]})]})]})},_be=()=>{const e=rh(),[t,r]=j.useState(""),[a,s]=j.useState(""),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(""),h=async f=>{f.preventDefault(),o(!0);try{const p=await Ie.post("/api/users/login",{identifier:d,password:a});console.log(" Logged in user:",p.data.user);const v=p.data.user;localStorage.setItem("user",JSON.stringify(v)),console.log("User data:",v),alert("Login successful!"),e("/loginscreen")}catch(p){alert("Login failed: "+(p.response?.data?.error||"Unknown error"))}finally{o(!1)}};return n.jsx("div",{className:"container-fluid min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundImage:'url("/assets/img/loginbg.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:n.jsx("div",{className:"row w-100 justify-content-center",children:n.jsxs("div",{className:"col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4",children:[n.jsxs("div",{className:"card shadow-lg border-0 rounded-4",style:{maxHeight:"90vh",height:"auto"},children:[n.jsxs("div",{className:"card-body p-4 overflow-auto",children:[n.jsx("div",{className:"text-center mb-3",children:n.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"60px",height:"60px"},children:n.jsx("i",{className:"ti ti-building text-white",style:{fontSize:"1.8rem"}})})}),n.jsxs("div",{className:"text-center mb-3",children:[n.jsx("h1",{className:"fw-bold text-primary mb-1",style:{fontSize:"1.5rem"},children:"Jyothi Cloud ERP"}),n.jsx("p",{style:{textAlign:"center"},children:"(Endless Possibilities)"}),n.jsx("p",{className:"text-muted mb-0 small",children:"Enter your credentials to access your account"})]}),n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[n.jsx("i",{className:"ti ti-mail me-2 text-primary"}),"Email or Phone"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text bg-light border-end-0",children:n.jsx("i",{className:"ti ti-user text-muted"})}),n.jsx("input",{type:"text",id:"identifier",value:d,onChange:f=>u(f.target.value),className:"form-control border-start-0 py-2",placeholder:"Enter your email or phone number",required:!0,disabled:i})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[n.jsx("i",{className:"ti ti-lock me-2 text-primary"}),"Password"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text bg-light border-end-0",children:n.jsx("i",{className:"ti ti-key text-muted"})}),n.jsx("input",{type:l?"text":"password",id:"password",value:a,onChange:f=>s(f.target.value),className:"form-control border-start-0 border-end-0 py-2",placeholder:"Enter your password",required:!0,disabled:i}),n.jsx("span",{className:"input-group-text bg-light border-start-0 cursor-pointer",onClick:()=>c(!l),style:{cursor:"pointer"},children:n.jsx("i",{className:`ti ${l?"ti-eye text-primary":"ti-eye-off text-muted"}`})})]})]}),n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-semibold",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"ti ti-login me-2"}),"Sign In"]})})})]})]}),n.jsx("div",{className:"card-footer bg-light border-0 text-center py-3",children:n.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",n.jsx(ex,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})})]}),n.jsx("div",{className:"text-center mt-3",children:n.jsx("div",{className:"bg-white bg-opacity-90 rounded-3 p-2 d-inline-block",children:n.jsxs("div",{className:"d-flex gap-3 justify-content-center",children:[n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-phone me-1"}),"Support"]}),n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-mail me-1"}),"Contact"]}),n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-book me-1"}),"Guide"]})]})})})]})})})},Dbe=({onOpen:e})=>{const[t,r]=j.useState([]),[a,s]=j.useState(""),[i,o]=j.useState(()=>new Date().toISOString().split("T")[0]),[l,c]=j.useState([]),[d,u]=j.useState(""),[h,f]=j.useState(!1),p=rh(),v=JSON.parse(localStorage.getItem("user"))?.id;console.log("User ID from localStorage:",localStorage.getItem("user")),console.log("Fetching companies for user ID:",v),j.useEffect(()=>{if(!v)return;f(!0),Ie.get(`/api/users/${v}/companies`).then(w=>{r(w.data),w.data.length>0&&s(w.data[0]._id)}).catch(w=>{console.error("Error fetching companies:",w)}).finally(()=>{f(!1)});const b=[],S=new Date().getFullYear();for(let w=2020;w<=S;w++)b.push(`01/04/${w} - 31/03/${w+1}`);c(b.reverse())},[v]);const g=()=>{if(!a||!i)return alert("Please select all fields");localStorage.setItem("selectedCompanyId",a),console.log("financial",localStorage.getItem("financialYear")),e?.({companyId:a}),p("/")};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:n.jsx("div",{className:"row w-100",children:n.jsx("div",{className:"col-12 col-md-6 col-lg-4 mx-auto",children:n.jsxs("div",{className:"card shadow-lg border-0",children:[n.jsx("div",{className:"card-header bg-primary  py-4",children:n.jsx("h3",{className:"mb-0 text-white text-center ",children:"Jyothi Cloud ERP"})}),n.jsx("div",{className:"card-body p-4",children:h?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading companies..."})]}):n.jsxs("form",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"form-label fw-semibold",children:[n.jsx("i",{className:"ti ti-building me-2 text-primary"}),"Company"]}),n.jsxs("select",{className:"form-select form-select-lg",value:a,onChange:b=>s(b.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Choose a company..."}),t.map(b=>n.jsx("option",{value:b._id,children:b.name},b._id))]})]}),n.jsx("div",{className:"d-grid gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"btn btn-primary btn-sm",disabled:!a||!i,children:[n.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"Open Transaction"]})})]})}),n.jsxs("div",{className:"card-footer text-center py-3 bg-light",children:[n.jsxs("small",{className:"text-muted",children:[n.jsx("i",{className:"bi bi-shield-check me-1"}),"Secure transaction portal"]}),n.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",n.jsx(ex,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})]})]})})})}),n.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css",rel:"stylesheet"})]})},Abe=()=>{const[e,t]=j.useState({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]}),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const[p,v]=await Promise.all([Ie.get("/api/companies"),Ie.get("/api/roles")]);a(p.data),i(v.data)}catch(p){console.error("Error fetching data:",p),alert("Error loading companies and roles")}finally{l(!1)}})()},[]);const c=(f,p)=>{t({...e,[f]:p})},d=f=>{const v=e.roles.includes(f)?e.roles.filter(g=>g!==f):[...e.roles,f];t({...e,roles:v})},u=async f=>{f.preventDefault();try{await Ie.post("/api/users/create",e),alert("User created successfully!"),t({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]})}catch(p){console.error("Error creating user:",p),alert("Error creating user. Please try again.")}},h=f=>e.roles.includes(f);return o?n.jsx("div",{className:"container mt-5",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading form data..."})]})})})}):n.jsx("div",{className:"content",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-10 col-lg-8",children:n.jsxs("div",{className:"card shadow",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h3",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Create New User"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("h5",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-user me-2"}),"Basic Information"]})})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"username",className:"form-label",children:[n.jsx("i",{className:"fas fa-user me-2"}),"Username ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",id:"username",className:"form-control",placeholder:"Enter username",value:e.username,onChange:f=>c("username",f.target.value),required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"email",className:"form-label",children:[n.jsx("i",{className:"fas fa-envelope me-2"}),"Email ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email address",value:e.email,onChange:f=>c("email",f.target.value),required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"phone",className:"form-label",children:[n.jsx("i",{className:"fas fa-phone me-2"}),"Phone ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"tel",id:"phone",className:"form-control",placeholder:"Enter phone number",value:e.phone,onChange:f=>{const p=f.target.value.replace(/[^0-9]/g,"").slice(0,10);(p.length===0||/^[6-9]/.test(p))&&c("phone",p)},required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"password",className:"form-label",children:[n.jsx("i",{className:"fas fa-lock me-2"}),"Password ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",value:e.password,onChange:f=>c("password",f.target.value),required:!0})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("label",{htmlFor:"address",className:"form-label",children:[n.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Address ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("textarea",{id:"address",className:"form-control",rows:"3",placeholder:"Enter full address",value:e.address,onChange:f=>c("address",f.target.value),required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"companies",className:"form-label",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Select Companies ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("select",{id:"companies",multiple:!0,className:"form-select",style:{minHeight:"120px"},value:e.companies,onChange:f=>c("companies",Array.from(f.target.selectedOptions,p=>p.value)),required:!0,children:r.map(f=>n.jsx("option",{value:f._id,children:f.name},f._id))}),n.jsxs("div",{className:"form-text",children:[n.jsx("i",{className:"fas fa-info-circle me-1"}),"Hold Ctrl (Cmd on Mac) to select multiple companies"]})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("h5",{className:"text-primary mb-2",children:[n.jsx("i",{className:"fas fa-users-cog me-2"}),"Assign Roles"]})})}),n.jsx("div",{className:"row",children:s.map(f=>n.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:`role-${f._id}`,checked:h(f._id),onChange:()=>d(f._id)}),n.jsxs("label",{className:"form-check-label",htmlFor:`role-${f._id}`,children:[n.jsx("strong",{children:f.roleName}),n.jsx("br",{}),n.jsxs("small",{className:"text-muted",children:["(",f.roleId,")"]})]})]})},f._id))}),n.jsx("div",{className:"d-grid mt-4",children:n.jsxs("button",{type:"submit",className:"btn btn-success btn-lg",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Create User"]})})]})})]})})})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var o2={};o2.version="0.18.5";var IW=1252,Tbe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],z4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},H4=function(e){Tbe.indexOf(e)!=-1&&(IW=z4[0]=e)};function Ibe(){H4(1252)}var _d=function(e){H4(e)};function W4(){_d(1200),Ibe()}function F8(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Pbe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function PW(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Jb=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Pbe(e.slice(2)):t==254&&r==255?PW(e.slice(2)):t==65279?e.slice(1):e},uN=function(t){return String.fromCharCode(t)},L8=function(t){return String.fromCharCode(t)},Oy,Am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function My(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=Am.charAt(i)+Am.charAt(o)+Am.charAt(l)+Am.charAt(c);return t}function dc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Am.indexOf(e.charAt(d++)),o=Am.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Am.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=Am.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var wa=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),bf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Ym(e){return wa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function B8(e){return wa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Jl=function(t){return wa?bf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function ZS(e){if(typeof ArrayBuffer>"u")return Jl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function cp(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Obe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function G4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return G4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Li=wa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:bf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Mbe(e){for(var t=[],r=0,a=e.length+250,s=Ym(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=Ym(65535),a=65530)}return t.push(s.slice(0,r)),Li(t)}var tl=/\u0000/g,Zb=/[\u0001-\u0006]/g;function N0(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Dd(e,t){var r=""+e;return r.length>=t?r:Es("0",t-r.length)+r}function Y4(e,t){var r=""+e;return r.length>=t?r:Es(" ",t-r.length)+r}function l2(e,t){var r=""+e;return r.length>=t?r:r+Es(" ",t-r.length)}function Rbe(e,t){var r=""+Math.round(e);return r.length>=t?r:Es("0",t-r.length)+r}function Fbe(e,t){var r=""+e;return r.length>=t?r:Es("0",t-r.length)+r}var U8=Math.pow(2,32);function Gv(e,t){if(e>U8||e<-U8)return Rbe(e,t);var r=Math.round(e);return Fbe(r,t)}function c2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var $8=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],M_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Lbe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Zr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},V8={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Bbe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function d2(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<t&&(h=Math.floor(s),l=h*o+i,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var f=Math.floor(a*l/u);return[f,a*l-f*u,u]}function cx(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Hbe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var OW=new Date(1899,11,31,0,0,0),Ube=OW.getTime(),$be=new Date(1900,2,1,0,0,0);function MW(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=$be&&(r+=24*60*60*1e3),(r-(Ube+(e.getTimezoneOffset()-OW.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function K4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Vbe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function qbe(e){var t=e<0?12:11,r=K4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function zbe(e){var t=K4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ry(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=qbe(e):t===10?r=e.toFixed(10).substr(0,12):r=zbe(e),K4(Vbe(r.toUpperCase()))}function Ox(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ry(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Gc(14,MW(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Hbe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Wbe(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return M_[r.m-1][1];case 5:return M_[r.m-1][0];default:return M_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return $8[r.q][0];default:return $8[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Dd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Dd(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Dd(c,d):"";return u}function Tm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var RW=/%/g;function Gbe(e,t,r){var a=t.replace(RW,""),s=t.length-a.length;return Xh(e,a,r*Math.pow(10,2*s))+Es("%",s)}function Ybe(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Xh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function FW(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+FW(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var LW=/# (\?+)( ?)\/( ?)(\d+)/;function Kbe(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Es(" ",e[1].length+1+e[4].length):Y4(o,e[1].length)+e[2]+"/"+e[3]+Dd(l,e[4].length))}function Xbe(e,t,r){return r+(t===0?"":""+t)+Es(" ",e[1].length+2+e[4].length)}var BW=/^#*0*\.([0#]+)/,UW=/\).*[0#]/,$W=/\(###\) ###\\?-####/;function Ko(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function q8(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function z8(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Qbe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Jbe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Tc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(UW)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Tc("n",a,r):"("+Tc("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Ybe(e,t,r);if(t.indexOf("%")!==-1)return Gbe(e,t,r);if(t.indexOf("E")!==-1)return FW(t,r);if(t.charCodeAt(0)===36)return"$"+Tc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Gv(c,t.length);if(t.match(/^[#?]+$/))return s=Gv(r,0),s==="0"&&(s=""),s.length>t.length?s:Ko(t.substr(0,t.length-s.length))+s;if(i=t.match(LW))return Kbe(i,c,d);if(t.match(/^#+0+$/))return d+Gv(c,t.length-t.indexOf("0"));if(i=t.match(BW))return s=q8(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ko(i[1])).replace(/\.$/,"."+Ko(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+Es("0",Ko(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+q8(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Tm(Gv(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Tc(e,t,-r):Tm(""+(Math.floor(r)+Qbe(r,i[1].length)))+"."+Dd(z8(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Tc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=N0(Tc(e,t.replace(/[\\-]/g,""),r)),o=0,N0(N0(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match($W))return s=Tc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=d2(c,Math.pow(10,o)-1,!1),s=""+d,u=Xh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=l2(l[2],o),u.length<i[4].length&&(u=Ko(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=d2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Y4(l[1],o)+i[2]+"/"+i[3]+l2(l[2],o):Es(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Gv(r,0),t.length<=s.length?s:Ko(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,f=t.length-s.length-h;return Ko(t.substr(0,h)+s+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=z8(r,i[1].length),r<0?"-"+Tc(e,t,-r):Tm(Jbe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(o,i[1].length);switch(t){case"###,##0.00":return Tc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Tm(Gv(c,0));return p!=="0"?d+p:"";case"###,###.00":return Tc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Tc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Zbe(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Xh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function eye(e,t,r){var a=t.replace(RW,""),s=t.length-a.length;return Xh(e,a,r*Math.pow(10,2*s))+Es("%",s)}function VW(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+VW(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Cu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(UW)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cu("n",a,r):"("+Cu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Zbe(e,t,r);if(t.indexOf("%")!==-1)return eye(e,t,r);if(t.indexOf("E")!==-1)return VW(t,r);if(t.charCodeAt(0)===36)return"$"+Cu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Dd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Ko(t.substr(0,t.length-s.length))+s;if(i=t.match(LW))return Xbe(i,c,d);if(t.match(/^#+0+$/))return d+Dd(c,t.length-t.indexOf("0"));if(i=t.match(BW))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Ko(i[1])).replace(/\.$/,"."+Ko(i[1])),s=s.replace(/\.(\d*)$/,function(v,g){return"."+g+Es("0",Ko(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Tm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cu(e,t,-r):Tm(""+r)+"."+Es("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Cu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=N0(Cu(e,t.replace(/[\\-]/g,""),r)),o=0,N0(N0(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match($W))return s=Cu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=d2(c,Math.pow(10,o)-1,!1),s=""+d,u=Xh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=l2(l[2],o),u.length<i[4].length&&(u=Ko(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=d2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Y4(l[1],o)+i[2]+"/"+i[3]+l2(l[2],o):Es(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Ko(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,f=t.length-s.length-h;return Ko(t.substr(0,h)+s+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Cu(e,t,-r):Tm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Tm(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return Cu(e,t.slice(0,t.lastIndexOf(".")),r)+Ko(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Xh(e,t,r){return(r|0)===r?Cu(e,t,r):Tc(e,t,r)}function tye(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var qW=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Cg(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":c2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(qW))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function rye(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,h,f="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!c2(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),v=p==="("||p===")"?p:"t";s[s.length]={t:v,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=cx(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=cx(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=cx(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",f="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,f="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",o+=5,f="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(qW)){if(d==null&&(d=cx(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Cg(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,y=0,S;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=f,c="h",b<1&&(b=1);break;case"s":(S=s[o].v.match(/\.0+$/))&&(y=Math.max(y,S[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",k;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Wbe(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(k=o+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[o].v+=s[k].v,s[k]={v:"",t:";"},++k;w+=s[o].v,o=k-1;break;case"G":s[o].t="t",s[o].v=Ox(t,r);break}var C="",_,E;if(w.length>0){w.charCodeAt(0)==40?(_=t<0&&w.charCodeAt(0)===45?-t:t,E=Xh("n",w,_)):(_=t<0&&a>1?-t:t,E=Xh("n",w,_),_<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),k=E.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var I=s.length;if(T===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(k>=s[o].v.length-1?(k-=s[o].v.length,s[o].v=E.substr(k+1,s[o].v.length)):k<0?s[o].v="":(s[o].v=E.substr(0,k+1),k=-1),s[o].t="t",I=o);k>=0&&I<s.length&&(s[I].v=E.substr(0,k+1)+s[I].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(k=E.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,C=s[o].v.substr(u+1);u>=0;--u)k>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(C=E.charAt(k--)+C);s[o].v=C,s[o].t="t",I=o}for(k>=0&&I<s.length&&(s[I].v=E.substr(0,k+1)+s[I].v),k=E.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,C=s[o].v.substr(0,u);u<s[o].v.length;++u)k<E.length&&(C+=E.charAt(k++));s[o].v=C,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(_=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Xh(s[o].t,s[o].v,_),s[o].t="t");var F="";for(o=0;o!==s.length;++o)s[o]!=null&&(F+=s[o].v);return F}var H8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function W8(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function aye(e,t){var r=tye(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(H8),l=r[1].match(H8);return W8(t,o)?[a,r[0]]:W8(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function Gc(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Zr)[e],a==null&&(a=r.table&&r.table[V8[e]]||Zr[V8[e]]),a==null&&(a=Bbe[e]||"General");break}if(c2(a,0))return Ox(t,r);t instanceof Date&&(t=MW(t,r.date1904));var s=aye(a,t);if(c2(s[1]))return Ox(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return rye(s[1],t,r,s[0])}function Qh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Zr[r]==null){t<0&&(t=r);continue}if(Zr[r]==e){t=r;break}}t<0&&(t=391)}return Zr[t]=e,t}function eC(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Qh(e[t],t)}function kg(){Zr=Lbe()}var nye={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},zW=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function sye(e){var t=typeof e=="number"?Zr[e]:e;return t=t.replace(zW,"(\\d+)"),new RegExp("^"+t+"$")}function iye(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(zW)||[]).forEach(function(h,f){var p=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var oye=function(){var e={};e.version="1.2.0";function t(){for(var E=0,T=new Array(256),I=0;I!=256;++I)E=I,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[I]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function a(E){var T=0,I=0,F=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)A[F]=E[F];for(F=0;F!=256;++F)for(I=E[F],T=256+F;T<4096;T+=256)I=A[T]=I>>>8^E[I&255];var P=[];for(F=1;F!=16;++F)P[F-1]=typeof Int32Array<"u"?A.subarray(F*256,F*256+256):A.slice(F*256,F*256+256);return P}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],f=s[7],p=s[8],v=s[9],g=s[10],b=s[11],y=s[12],S=s[13],w=s[14];function k(E,T){for(var I=T^-1,F=0,A=E.length;F<A;)I=I>>>8^r[(I^E.charCodeAt(F++))&255];return~I}function C(E,T){for(var I=T^-1,F=E.length-15,A=0;A<F;)I=w[E[A++]^I&255]^S[E[A++]^I>>8&255]^y[E[A++]^I>>16&255]^b[E[A++]^I>>>24]^g[E[A++]]^v[E[A++]]^p[E[A++]]^f[E[A++]]^h[E[A++]]^u[E[A++]]^d[E[A++]]^c[E[A++]]^l[E[A++]]^o[E[A++]]^i[E[A++]]^r[E[A++]];for(F+=15;A<F;)I=I>>>8^r[(I^E[A++])&255];return~I}function _(E,T){for(var I=T^-1,F=0,A=E.length,P=0,q=0;F<A;)P=E.charCodeAt(F++),P<128?I=I>>>8^r[(I^P)&255]:P<2048?(I=I>>>8^r[(I^(192|P>>6&31))&255],I=I>>>8^r[(I^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,q=E.charCodeAt(F++)&1023,I=I>>>8^r[(I^(240|P>>8&7))&255],I=I>>>8^r[(I^(128|P>>2&63))&255],I=I>>>8^r[(I^(128|q>>6&15|(P&3)<<4))&255],I=I>>>8^r[(I^(128|q&63))&255]):(I=I>>>8^r[(I^(224|P>>12&15))&255],I=I>>>8^r[(I^(128|P>>6&63))&255],I=I>>>8^r[(I^(128|P&63))&255]);return~I}return e.table=r,e.bstr=k,e.buf=C,e.str=_,e}(),Hr=function(){var t={};t.version="1.2.1";function r(he,Le){for(var Ae=he.split("/"),_e=Le.split("/"),Ue=0,He=0,xt=Math.min(Ae.length,_e.length);Ue<xt;++Ue){if(He=Ae[Ue].length-_e[Ue].length)return He;if(Ae[Ue]!=_e[Ue])return Ae[Ue]<_e[Ue]?-1:1}return Ae.length-_e.length}function a(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:a(he.slice(0,-1));var Le=he.lastIndexOf("/");return Le===-1?he:he.slice(0,Le+1)}function s(he){if(he.charAt(he.length-1)=="/")return s(he.slice(0,-1));var Le=he.lastIndexOf("/");return Le===-1?he:he.slice(Le+1)}function i(he,Le){typeof Le=="string"&&(Le=new Date(Le));var Ae=Le.getHours();Ae=Ae<<6|Le.getMinutes(),Ae=Ae<<5|Le.getSeconds()>>>1,he.write_shift(2,Ae);var _e=Le.getFullYear()-1980;_e=_e<<4|Le.getMonth()+1,_e=_e<<5|Le.getDate(),he.write_shift(2,_e)}function o(he){var Le=he.read_shift(2)&65535,Ae=he.read_shift(2)&65535,_e=new Date,Ue=Ae&31;Ae>>>=5;var He=Ae&15;Ae>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ae+1980),_e.setMonth(He-1),_e.setDate(Ue);var xt=Le&31;Le>>>=5;var jt=Le&63;return Le>>>=6,_e.setHours(Le),_e.setMinutes(jt),_e.setSeconds(xt<<1),_e}function l(he){ao(he,0);for(var Le={},Ae=0;he.l<=he.length-4;){var _e=he.read_shift(2),Ue=he.read_shift(2),He=he.l+Ue,xt={};switch(_e){case 21589:Ae=he.read_shift(1),Ae&1&&(xt.mtime=he.read_shift(4)),Ue>5&&(Ae&2&&(xt.atime=he.read_shift(4)),Ae&4&&(xt.ctime=he.read_shift(4))),xt.mtime&&(xt.mt=new Date(xt.mtime*1e3));break}he.l=He,Le[_e]=xt}return Le}var c;function d(){return c||(c={})}function u(he,Le){if(he[0]==80&&he[1]==75)return Pe(he,Le);if((he[0]|32)==109&&(he[1]|32)==105)return lr(he,Le);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ae=3,_e=512,Ue=0,He=0,xt=0,jt=0,ct=0,Nt=[],wt=he.slice(0,512);ao(wt,0);var er=h(wt);switch(Ae=er[0],Ae){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(er[1]==0)return Pe(he,Le);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ae)}_e!==512&&(wt=he.slice(0,_e),ao(wt,28));var cr=he.slice(0,_e);f(wt,Ae);var xr=wt.read_shift(4,"i");if(Ae===3&&xr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xr);wt.l+=4,xt=wt.read_shift(4,"i"),wt.l+=4,wt.chk("00100000","Mini Stream Cutoff Size: "),jt=wt.read_shift(4,"i"),Ue=wt.read_shift(4,"i"),ct=wt.read_shift(4,"i"),He=wt.read_shift(4,"i");for(var ur=-1,Ke=0;Ke<109&&(ur=wt.read_shift(4,"i"),!(ur<0));++Ke)Nt[Ke]=ur;var mr=p(he,_e);b(ct,He,mr,_e,Nt);var fr=S(mr,xt,Nt,_e);fr[xt].name="!Directory",Ue>0&&jt!==q&&(fr[jt].name="!MiniFAT"),fr[Nt[0]].name="!FAT",fr.fat_addrs=Nt,fr.ssz=_e;var Lr={},fa=[],Pa=[],wn=[];w(xt,fr,mr,fa,Ue,Lr,Pa,jt),v(Pa,wn,fa),fa.shift();var Bn={FileIndex:Pa,FullPaths:wn};return Le&&Le.raw&&(Bn.raw={header:cr,sectors:mr}),Bn}function h(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(V,"Header Signature: "),he.l+=16;var Le=he.read_shift(2,"u");return[he.read_shift(2,"u"),Le]}function f(he,Le){var Ae=9;switch(he.l+=2,Ae=he.read_shift(2)){case 9:if(Le!=3)throw new Error("Sector Shift: Expected 9 saw "+Ae);break;case 12:if(Le!=4)throw new Error("Sector Shift: Expected 12 saw "+Ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ae)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,Le){for(var Ae=Math.ceil(he.length/Le)-1,_e=[],Ue=1;Ue<Ae;++Ue)_e[Ue-1]=he.slice(Ue*Le,(Ue+1)*Le);return _e[Ae-1]=he.slice(Ae*Le),_e}function v(he,Le,Ae){for(var _e=0,Ue=0,He=0,xt=0,jt=0,ct=Ae.length,Nt=[],wt=[];_e<ct;++_e)Nt[_e]=wt[_e]=_e,Le[_e]=Ae[_e];for(;jt<wt.length;++jt)_e=wt[jt],Ue=he[_e].L,He=he[_e].R,xt=he[_e].C,Nt[_e]===_e&&(Ue!==-1&&Nt[Ue]!==Ue&&(Nt[_e]=Nt[Ue]),He!==-1&&Nt[He]!==He&&(Nt[_e]=Nt[He])),xt!==-1&&(Nt[xt]=_e),Ue!==-1&&_e!=Nt[_e]&&(Nt[Ue]=Nt[_e],wt.lastIndexOf(Ue)<jt&&wt.push(Ue)),He!==-1&&_e!=Nt[_e]&&(Nt[He]=Nt[_e],wt.lastIndexOf(He)<jt&&wt.push(He));for(_e=1;_e<ct;++_e)Nt[_e]===_e&&(He!==-1&&Nt[He]!==He?Nt[_e]=Nt[He]:Ue!==-1&&Nt[Ue]!==Ue&&(Nt[_e]=Nt[Ue]));for(_e=1;_e<ct;++_e)if(he[_e].type!==0){if(jt=_e,jt!=Nt[jt])do jt=Nt[jt],Le[_e]=Le[jt]+"/"+Le[_e];while(jt!==0&&Nt[jt]!==-1&&jt!=Nt[jt]);Nt[_e]=-1}for(Le[0]+="/",_e=1;_e<ct;++_e)he[_e].type!==2&&(Le[_e]+="/")}function g(he,Le,Ae){for(var _e=he.start,Ue=he.size,He=[],xt=_e;Ae&&Ue>0&&xt>=0;)He.push(Le.slice(xt*P,xt*P+P)),Ue-=P,xt=Qp(Ae,xt*4);return He.length===0?Ht(0):Li(He).slice(0,he.size)}function b(he,Le,Ae,_e,Ue){var He=q;if(he===q){if(Le!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var xt=Ae[he],jt=(_e>>>2)-1;if(!xt)return;for(var ct=0;ct<jt&&(He=Qp(xt,ct*4))!==q;++ct)Ue.push(He);b(Qp(xt,_e-4),Le-1,Ae,_e,Ue)}}function y(he,Le,Ae,_e,Ue){var He=[],xt=[];Ue||(Ue=[]);var jt=_e-1,ct=0,Nt=0;for(ct=Le;ct>=0;){Ue[ct]=!0,He[He.length]=ct,xt.push(he[ct]);var wt=Ae[Math.floor(ct*4/_e)];if(Nt=ct*4&jt,_e<4+Nt)throw new Error("FAT boundary crossed: "+ct+" 4 "+_e);if(!he[wt])break;ct=Qp(he[wt],Nt)}return{nodes:He,data:nB([xt])}}function S(he,Le,Ae,_e){var Ue=he.length,He=[],xt=[],jt=[],ct=[],Nt=_e-1,wt=0,er=0,cr=0,xr=0;for(wt=0;wt<Ue;++wt)if(jt=[],cr=wt+Le,cr>=Ue&&(cr-=Ue),!xt[cr]){ct=[];var ur=[];for(er=cr;er>=0;){ur[er]=!0,xt[er]=!0,jt[jt.length]=er,ct.push(he[er]);var Ke=Ae[Math.floor(er*4/_e)];if(xr=er*4&Nt,_e<4+xr)throw new Error("FAT boundary crossed: "+er+" 4 "+_e);if(!he[Ke]||(er=Qp(he[Ke],xr),ur[er]))break}He[cr]={nodes:jt,data:nB([ct])}}return He}function w(he,Le,Ae,_e,Ue,He,xt,jt){for(var ct=0,Nt=_e.length?2:0,wt=Le[he].data,er=0,cr=0,xr;er<wt.length;er+=128){var ur=wt.slice(er,er+128);ao(ur,64),cr=ur.read_shift(2),xr=rI(ur,0,cr-Nt),_e.push(xr);var Ke={name:xr,type:ur.read_shift(1),color:ur.read_shift(1),L:ur.read_shift(4,"i"),R:ur.read_shift(4,"i"),C:ur.read_shift(4,"i"),clsid:ur.read_shift(16),state:ur.read_shift(4,"i"),start:0,size:0},mr=ur.read_shift(2)+ur.read_shift(2)+ur.read_shift(2)+ur.read_shift(2);mr!==0&&(Ke.ct=k(ur,ur.l-8));var fr=ur.read_shift(2)+ur.read_shift(2)+ur.read_shift(2)+ur.read_shift(2);fr!==0&&(Ke.mt=k(ur,ur.l-8)),Ke.start=ur.read_shift(4,"i"),Ke.size=ur.read_shift(4,"i"),Ke.size<0&&Ke.start<0&&(Ke.size=Ke.type=0,Ke.start=q,Ke.name=""),Ke.type===5?(ct=Ke.start,Ue>0&&ct!==q&&(Le[ct].name="!StreamData")):Ke.size>=4096?(Ke.storage="fat",Le[Ke.start]===void 0&&(Le[Ke.start]=y(Ae,Ke.start,Le.fat_addrs,Le.ssz)),Le[Ke.start].name=Ke.name,Ke.content=Le[Ke.start].data.slice(0,Ke.size)):(Ke.storage="minifat",Ke.size<0?Ke.size=0:ct!==q&&Ke.start!==q&&Le[ct]&&(Ke.content=g(Ke,Le[ct].data,(Le[jt]||{}).data))),Ke.content&&ao(Ke.content,0),He[xr]=Ke,xt.push(Ke)}}function k(he,Le){return new Date((Kl(he,Le+4)/1e7*Math.pow(2,32)+Kl(he,Le)/1e7-11644473600)*1e3)}function C(he,Le){return d(),u(c.readFileSync(he),Le)}function _(he,Le){var Ae=Le&&Le.type;switch(Ae||wa&&Buffer.isBuffer(he)&&(Ae="buffer"),Ae||"base64"){case"file":return C(he,Le);case"base64":return u(Jl(dc(he)),Le);case"binary":return u(Jl(he),Le)}return u(he,Le)}function E(he,Le){var Ae=Le||{},_e=Ae.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=_e+"/",he.FileIndex[0]={name:_e,type:5}),Ae.CLSID&&(he.FileIndex[0].clsid=Ae.CLSID),T(he)}function T(he){var Le="Sh33tJ5";if(!Hr.find(he,"/"+Le)){var Ae=Ht(4);Ae[0]=55,Ae[1]=Ae[3]=50,Ae[2]=54,he.FileIndex.push({name:Le,type:2,content:Ae,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Le),I(he)}}function I(he,Le){E(he);for(var Ae=!1,_e=!1,Ue=he.FullPaths.length-1;Ue>=0;--Ue){var He=he.FileIndex[Ue];switch(He.type){case 0:_e?Ae=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(He.R*He.L*He.C)&&(Ae=!0),He.R>-1&&He.L>-1&&He.R==He.L&&(Ae=!0);break;default:Ae=!0;break}}if(!(!Ae&&!Le)){var xt=new Date(1987,1,19),jt=0,ct=Object.create?Object.create(null):{},Nt=[];for(Ue=0;Ue<he.FullPaths.length;++Ue)ct[he.FullPaths[Ue]]=!0,he.FileIndex[Ue].type!==0&&Nt.push([he.FullPaths[Ue],he.FileIndex[Ue]]);for(Ue=0;Ue<Nt.length;++Ue){var wt=a(Nt[Ue][0]);_e=ct[wt],_e||(Nt.push([wt,{name:s(wt).replace("/",""),type:1,clsid:B,ct:xt,mt:xt,content:null}]),ct[wt]=!0)}for(Nt.sort(function(xr,ur){return r(xr[0],ur[0])}),he.FullPaths=[],he.FileIndex=[],Ue=0;Ue<Nt.length;++Ue)he.FullPaths[Ue]=Nt[Ue][0],he.FileIndex[Ue]=Nt[Ue][1];for(Ue=0;Ue<Nt.length;++Ue){var er=he.FileIndex[Ue],cr=he.FullPaths[Ue];if(er.name=s(cr).replace("/",""),er.L=er.R=er.C=-(er.color=1),er.size=er.content?er.content.length:0,er.start=0,er.clsid=er.clsid||B,Ue===0)er.C=Nt.length>1?1:-1,er.size=0,er.type=5;else if(cr.slice(-1)=="/"){for(jt=Ue+1;jt<Nt.length&&a(he.FullPaths[jt])!=cr;++jt);for(er.C=jt>=Nt.length?-1:jt,jt=Ue+1;jt<Nt.length&&a(he.FullPaths[jt])!=a(cr);++jt);er.R=jt>=Nt.length?-1:jt,er.type=1}else a(he.FullPaths[Ue+1]||"")==a(cr)&&(er.R=Ue+1),er.type=2}}}function F(he,Le){var Ae=Le||{};if(Ae.fileType=="mad")return Rt(he,Ae);switch(I(he),Ae.fileType){case"zip":return Ye(he,Ae)}var _e=function(xr){for(var ur=0,Ke=0,mr=0;mr<xr.FileIndex.length;++mr){var fr=xr.FileIndex[mr];if(fr.content){var Lr=fr.content.length;Lr>0&&(Lr<4096?ur+=Lr+63>>6:Ke+=Lr+511>>9)}}for(var fa=xr.FullPaths.length+3>>2,Pa=ur+7>>3,wn=ur+127>>7,Bn=Pa+Ke+fa+wn,cn=Bn+127>>7,Is=cn<=109?0:Math.ceil((cn-109)/127);Bn+cn+Is+127>>7>cn;)Is=++cn<=109?0:Math.ceil((cn-109)/127);var tn=[1,Is,cn,wn,fa,Ke,ur,0];return xr.FileIndex[0].size=ur<<6,tn[7]=(xr.FileIndex[0].start=tn[0]+tn[1]+tn[2]+tn[3]+tn[4]+tn[5])+(tn[6]+7>>3),tn}(he),Ue=Ht(_e[7]<<9),He=0,xt=0;{for(He=0;He<8;++He)Ue.write_shift(1,Y[He]);for(He=0;He<8;++He)Ue.write_shift(2,0);for(Ue.write_shift(2,62),Ue.write_shift(2,3),Ue.write_shift(2,65534),Ue.write_shift(2,9),Ue.write_shift(2,6),He=0;He<3;++He)Ue.write_shift(2,0);for(Ue.write_shift(4,0),Ue.write_shift(4,_e[2]),Ue.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Ue.write_shift(4,0),Ue.write_shift(4,4096),Ue.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:q),Ue.write_shift(4,_e[3]),Ue.write_shift(-4,_e[1]?_e[0]-1:q),Ue.write_shift(4,_e[1]),He=0;He<109;++He)Ue.write_shift(-4,He<_e[2]?_e[1]+He:-1)}if(_e[1])for(xt=0;xt<_e[1];++xt){for(;He<236+xt*127;++He)Ue.write_shift(-4,He<_e[2]?_e[1]+He:-1);Ue.write_shift(-4,xt===_e[1]-1?q:xt+1)}var jt=function(xr){for(xt+=xr;He<xt-1;++He)Ue.write_shift(-4,He+1);xr&&(++He,Ue.write_shift(-4,q))};for(xt=He=0,xt+=_e[1];He<xt;++He)Ue.write_shift(-4,Q.DIFSECT);for(xt+=_e[2];He<xt;++He)Ue.write_shift(-4,Q.FATSECT);jt(_e[3]),jt(_e[4]);for(var ct=0,Nt=0,wt=he.FileIndex[0];ct<he.FileIndex.length;++ct)wt=he.FileIndex[ct],wt.content&&(Nt=wt.content.length,!(Nt<4096)&&(wt.start=xt,jt(Nt+511>>9)));for(jt(_e[6]+7>>3);Ue.l&511;)Ue.write_shift(-4,Q.ENDOFCHAIN);for(xt=He=0,ct=0;ct<he.FileIndex.length;++ct)wt=he.FileIndex[ct],wt.content&&(Nt=wt.content.length,!(!Nt||Nt>=4096)&&(wt.start=xt,jt(Nt+63>>6)));for(;Ue.l&511;)Ue.write_shift(-4,Q.ENDOFCHAIN);for(He=0;He<_e[4]<<2;++He){var er=he.FullPaths[He];if(!er||er.length===0){for(ct=0;ct<17;++ct)Ue.write_shift(4,0);for(ct=0;ct<3;++ct)Ue.write_shift(4,-1);for(ct=0;ct<12;++ct)Ue.write_shift(4,0);continue}wt=he.FileIndex[He],He===0&&(wt.start=wt.size?wt.start-1:q);var cr=He===0&&Ae.root||wt.name;if(Nt=2*(cr.length+1),Ue.write_shift(64,cr,"utf16le"),Ue.write_shift(2,Nt),Ue.write_shift(1,wt.type),Ue.write_shift(1,wt.color),Ue.write_shift(-4,wt.L),Ue.write_shift(-4,wt.R),Ue.write_shift(-4,wt.C),wt.clsid)Ue.write_shift(16,wt.clsid,"hex");else for(ct=0;ct<4;++ct)Ue.write_shift(4,0);Ue.write_shift(4,wt.state||0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,wt.start),Ue.write_shift(4,wt.size),Ue.write_shift(4,0)}for(He=1;He<he.FileIndex.length;++He)if(wt=he.FileIndex[He],wt.size>=4096)if(Ue.l=wt.start+1<<9,wa&&Buffer.isBuffer(wt.content))wt.content.copy(Ue,Ue.l,0,wt.size),Ue.l+=wt.size+511&-512;else{for(ct=0;ct<wt.size;++ct)Ue.write_shift(1,wt.content[ct]);for(;ct&511;++ct)Ue.write_shift(1,0)}for(He=1;He<he.FileIndex.length;++He)if(wt=he.FileIndex[He],wt.size>0&&wt.size<4096)if(wa&&Buffer.isBuffer(wt.content))wt.content.copy(Ue,Ue.l,0,wt.size),Ue.l+=wt.size+63&-64;else{for(ct=0;ct<wt.size;++ct)Ue.write_shift(1,wt.content[ct]);for(;ct&63;++ct)Ue.write_shift(1,0)}if(wa)Ue.l=Ue.length;else for(;Ue.l<Ue.length;)Ue.write_shift(1,0);return Ue}function A(he,Le){var Ae=he.FullPaths.map(function(ct){return ct.toUpperCase()}),_e=Ae.map(function(ct){var Nt=ct.split("/");return Nt[Nt.length-(ct.slice(-1)=="/"?2:1)]}),Ue=!1;Le.charCodeAt(0)===47?(Ue=!0,Le=Ae[0].slice(0,-1)+Le):Ue=Le.indexOf("/")!==-1;var He=Le.toUpperCase(),xt=Ue===!0?Ae.indexOf(He):_e.indexOf(He);if(xt!==-1)return he.FileIndex[xt];var jt=!He.match(Zb);for(He=He.replace(tl,""),jt&&(He=He.replace(Zb,"!")),xt=0;xt<Ae.length;++xt)if((jt?Ae[xt].replace(Zb,"!"):Ae[xt]).replace(tl,"")==He||(jt?_e[xt].replace(Zb,"!"):_e[xt]).replace(tl,"")==He)return he.FileIndex[xt];return null}var P=64,q=-2,V="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],B="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:q,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:B,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function R(he,Le,Ae){d();var _e=F(he,Ae);c.writeFileSync(Le,_e)}function Z(he){for(var Le=new Array(he.length),Ae=0;Ae<he.length;++Ae)Le[Ae]=String.fromCharCode(he[Ae]);return Le.join("")}function J(he,Le){var Ae=F(he,Le);switch(Le&&Le.type||"buffer"){case"file":return d(),c.writeFileSync(Le.filename,Ae),Ae;case"binary":return typeof Ae=="string"?Ae:Z(Ae);case"base64":return My(typeof Ae=="string"?Ae:Z(Ae));case"buffer":if(wa)return Buffer.isBuffer(Ae)?Ae:bf(Ae);case"array":return typeof Ae=="string"?Jl(Ae):Ae}return Ae}var ie;function M(he){try{var Le=he.InflateRaw,Ae=new Le;if(Ae._processChunk(new Uint8Array([3,0]),Ae._finishFlushFlag),Ae.bytesRead)ie=he;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function z(he,Le){if(!ie)return Ve(he,Le);var Ae=ie.InflateRaw,_e=new Ae,Ue=_e._processChunk(he.slice(he.l),_e._finishFlushFlag);return he.l+=_e.bytesRead,Ue}function ee(he){return ie?ie.deflateRawSync(he):ve(he)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(he){var Le=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Le>>16|Le>>8|Le)&255}for(var te=typeof Uint8Array<"u",K=te?new Uint8Array(256):[],de=0;de<256;++de)K[de]=le(de);function H(he,Le){var Ae=K[he&255];return Le<=8?Ae>>>8-Le:(Ae=Ae<<8|K[he>>8&255],Le<=16?Ae>>>16-Le:(Ae=Ae<<8|K[he>>16&255],Ae>>>24-Le))}function se(he,Le){var Ae=Le&7,_e=Le>>>3;return(he[_e]|(Ae<=6?0:he[_e+1]<<8))>>>Ae&3}function be(he,Le){var Ae=Le&7,_e=Le>>>3;return(he[_e]|(Ae<=5?0:he[_e+1]<<8))>>>Ae&7}function ue(he,Le){var Ae=Le&7,_e=Le>>>3;return(he[_e]|(Ae<=4?0:he[_e+1]<<8))>>>Ae&15}function oe(he,Le){var Ae=Le&7,_e=Le>>>3;return(he[_e]|(Ae<=3?0:he[_e+1]<<8))>>>Ae&31}function ge(he,Le){var Ae=Le&7,_e=Le>>>3;return(he[_e]|(Ae<=1?0:he[_e+1]<<8))>>>Ae&127}function Ne(he,Le,Ae){var _e=Le&7,Ue=Le>>>3,He=(1<<Ae)-1,xt=he[Ue]>>>_e;return Ae<8-_e||(xt|=he[Ue+1]<<8-_e,Ae<16-_e)||(xt|=he[Ue+2]<<16-_e,Ae<24-_e)||(xt|=he[Ue+3]<<24-_e),xt&He}function Me(he,Le,Ae){var _e=Le&7,Ue=Le>>>3;return _e<=5?he[Ue]|=(Ae&7)<<_e:(he[Ue]|=Ae<<_e&255,he[Ue+1]=(Ae&7)>>8-_e),Le+3}function We(he,Le,Ae){var _e=Le&7,Ue=Le>>>3;return Ae=(Ae&1)<<_e,he[Ue]|=Ae,Le+1}function tt(he,Le,Ae){var _e=Le&7,Ue=Le>>>3;return Ae<<=_e,he[Ue]|=Ae&255,Ae>>>=8,he[Ue+1]=Ae,Le+8}function mt(he,Le,Ae){var _e=Le&7,Ue=Le>>>3;return Ae<<=_e,he[Ue]|=Ae&255,Ae>>>=8,he[Ue+1]=Ae&255,he[Ue+2]=Ae>>>8,Le+16}function Be(he,Le){var Ae=he.length,_e=2*Ae>Le?2*Ae:Le+5,Ue=0;if(Ae>=Le)return he;if(wa){var He=B8(_e);if(he.copy)he.copy(He);else for(;Ue<he.length;++Ue)He[Ue]=he[Ue];return He}else if(te){var xt=new Uint8Array(_e);if(xt.set)xt.set(he);else for(;Ue<Ae;++Ue)xt[Ue]=he[Ue];return xt}return he.length=_e,he}function dt(he){for(var Le=new Array(he),Ae=0;Ae<he;++Ae)Le[Ae]=0;return Le}function Dt(he,Le,Ae){var _e=1,Ue=0,He=0,xt=0,jt=0,ct=he.length,Nt=te?new Uint16Array(32):dt(32);for(He=0;He<32;++He)Nt[He]=0;for(He=ct;He<Ae;++He)he[He]=0;ct=he.length;var wt=te?new Uint16Array(ct):dt(ct);for(He=0;He<ct;++He)Nt[Ue=he[He]]++,_e<Ue&&(_e=Ue),wt[He]=0;for(Nt[0]=0,He=1;He<=_e;++He)Nt[He+16]=jt=jt+Nt[He-1]<<1;for(He=0;He<ct;++He)jt=he[He],jt!=0&&(wt[He]=Nt[jt+16]++);var er=0;for(He=0;He<ct;++He)if(er=he[He],er!=0)for(jt=H(wt[He],_e)>>_e-er,xt=(1<<_e+4-er)-1;xt>=0;--xt)Le[jt|xt<<er]=er&15|He<<4;return _e}var It=te?new Uint16Array(512):dt(512),zt=te?new Uint16Array(32):dt(32);if(!te){for(var xe=0;xe<512;++xe)It[xe]=0;for(xe=0;xe<32;++xe)zt[xe]=0}(function(){for(var he=[],Le=0;Le<32;Le++)he.push(5);Dt(he,zt,32);var Ae=[];for(Le=0;Le<=143;Le++)Ae.push(8);for(;Le<=255;Le++)Ae.push(9);for(;Le<=279;Le++)Ae.push(7);for(;Le<=287;Le++)Ae.push(8);Dt(Ae,It,288)})();var fe=function(){for(var Le=te?new Uint8Array(32768):[],Ae=0,_e=0;Ae<re.length-1;++Ae)for(;_e<re[Ae+1];++_e)Le[_e]=Ae;for(;_e<32768;++_e)Le[_e]=29;var Ue=te?new Uint8Array(259):[];for(Ae=0,_e=0;Ae<W.length-1;++Ae)for(;_e<W[Ae+1];++_e)Ue[_e]=Ae;function He(jt,ct){for(var Nt=0;Nt<jt.length;){var wt=Math.min(65535,jt.length-Nt),er=Nt+wt==jt.length;for(ct.write_shift(1,+er),ct.write_shift(2,wt),ct.write_shift(2,~wt&65535);wt-- >0;)ct[ct.l++]=jt[Nt++]}return ct.l}function xt(jt,ct){for(var Nt=0,wt=0,er=te?new Uint16Array(32768):[];wt<jt.length;){var cr=Math.min(65535,jt.length-wt);if(cr<10){for(Nt=Me(ct,Nt,+(wt+cr==jt.length)),Nt&7&&(Nt+=8-(Nt&7)),ct.l=Nt/8|0,ct.write_shift(2,cr),ct.write_shift(2,~cr&65535);cr-- >0;)ct[ct.l++]=jt[wt++];Nt=ct.l*8;continue}Nt=Me(ct,Nt,+(wt+cr==jt.length)+2);for(var xr=0;cr-- >0;){var ur=jt[wt];xr=(xr<<5^ur)&32767;var Ke=-1,mr=0;if((Ke=er[xr])&&(Ke|=wt&-32768,Ke>wt&&(Ke-=32768),Ke<wt))for(;jt[Ke+mr]==jt[wt+mr]&&mr<250;)++mr;if(mr>2){ur=Ue[mr],ur<=22?Nt=tt(ct,Nt,K[ur+1]>>1)-1:(tt(ct,Nt,3),Nt+=5,tt(ct,Nt,K[ur-23]>>5),Nt+=3);var fr=ur<8?0:ur-4>>2;fr>0&&(mt(ct,Nt,mr-W[ur]),Nt+=fr),ur=Le[wt-Ke],Nt=tt(ct,Nt,K[ur]>>3),Nt-=3;var Lr=ur<4?0:ur-2>>1;Lr>0&&(mt(ct,Nt,wt-Ke-re[ur]),Nt+=Lr);for(var fa=0;fa<mr;++fa)er[xr]=wt&32767,xr=(xr<<5^jt[wt])&32767,++wt;cr-=mr-1}else ur<=143?ur=ur+48:Nt=We(ct,Nt,1),Nt=tt(ct,Nt,K[ur]),er[xr]=wt&32767,++wt}Nt=tt(ct,Nt,0)-1}return ct.l=(Nt+7)/8|0,ct.l}return function(ct,Nt){return ct.length<8?He(ct,Nt):xt(ct,Nt)}}();function ve(he){var Le=Ht(50+Math.floor(he.length*1.1)),Ae=fe(he,Le);return Le.slice(0,Ae)}var pe=te?new Uint16Array(32768):dt(32768),Te=te?new Uint16Array(32768):dt(32768),Xe=te?new Uint16Array(128):dt(128),kt=1,Je=1;function ze(he,Le){var Ae=oe(he,Le)+257;Le+=5;var _e=oe(he,Le)+1;Le+=5;var Ue=ue(he,Le)+4;Le+=4;for(var He=0,xt=te?new Uint8Array(19):dt(19),jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ct=1,Nt=te?new Uint8Array(8):dt(8),wt=te?new Uint8Array(8):dt(8),er=xt.length,cr=0;cr<Ue;++cr)xt[ne[cr]]=He=be(he,Le),ct<He&&(ct=He),Nt[He]++,Le+=3;var xr=0;for(Nt[0]=0,cr=1;cr<=ct;++cr)wt[cr]=xr=xr+Nt[cr-1]<<1;for(cr=0;cr<er;++cr)(xr=xt[cr])!=0&&(jt[cr]=wt[xr]++);var ur=0;for(cr=0;cr<er;++cr)if(ur=xt[cr],ur!=0){xr=K[jt[cr]]>>8-ur;for(var Ke=(1<<7-ur)-1;Ke>=0;--Ke)Xe[xr|Ke<<ur]=ur&7|cr<<3}var mr=[];for(ct=1;mr.length<Ae+_e;)switch(xr=Xe[ge(he,Le)],Le+=xr&7,xr>>>=3){case 16:for(He=3+se(he,Le),Le+=2,xr=mr[mr.length-1];He-- >0;)mr.push(xr);break;case 17:for(He=3+be(he,Le),Le+=3;He-- >0;)mr.push(0);break;case 18:for(He=11+ge(he,Le),Le+=7;He-- >0;)mr.push(0);break;default:mr.push(xr),ct<xr&&(ct=xr);break}var fr=mr.slice(0,Ae),Lr=mr.slice(Ae);for(cr=Ae;cr<286;++cr)fr[cr]=0;for(cr=_e;cr<30;++cr)Lr[cr]=0;return kt=Dt(fr,pe,286),Je=Dt(Lr,Te,30),Le}function Fe(he,Le){if(he[0]==3&&!(he[1]&3))return[Ym(Le),2];for(var Ae=0,_e=0,Ue=B8(Le||1<<18),He=0,xt=Ue.length>>>0,jt=0,ct=0;(_e&1)==0;){if(_e=be(he,Ae),Ae+=3,_e>>>1)_e>>1==1?(jt=9,ct=5):(Ae=ze(he,Ae),jt=kt,ct=Je);else{Ae&7&&(Ae+=8-(Ae&7));var Nt=he[Ae>>>3]|he[(Ae>>>3)+1]<<8;if(Ae+=32,Nt>0)for(!Le&&xt<He+Nt&&(Ue=Be(Ue,He+Nt),xt=Ue.length);Nt-- >0;)Ue[He++]=he[Ae>>>3],Ae+=8;continue}for(;;){!Le&&xt<He+32767&&(Ue=Be(Ue,He+32767),xt=Ue.length);var wt=Ne(he,Ae,jt),er=_e>>>1==1?It[wt]:pe[wt];if(Ae+=er&15,er>>>=4,(er>>>8&255)===0)Ue[He++]=er;else{if(er==256)break;er-=257;var cr=er<8?0:er-4>>2;cr>5&&(cr=0);var xr=He+W[er];cr>0&&(xr+=Ne(he,Ae,cr),Ae+=cr),wt=Ne(he,Ae,ct),er=_e>>>1==1?zt[wt]:Te[wt],Ae+=er&15,er>>>=4;var ur=er<4?0:er-2>>1,Ke=re[er];for(ur>0&&(Ke+=Ne(he,Ae,ur),Ae+=ur),!Le&&xt<xr&&(Ue=Be(Ue,xr+100),xt=Ue.length);He<xr;)Ue[He]=Ue[He-Ke],++He}}}return Le?[Ue,Ae+7>>>3]:[Ue.slice(0,He),Ae+7>>>3]}function Ve(he,Le){var Ae=he.slice(he.l||0),_e=Fe(Ae,Le);return he.l+=_e[1],_e[0]}function pt(he,Le){if(he)typeof console<"u"&&console.error(Le);else throw new Error(Le)}function Pe(he,Le){var Ae=he;ao(Ae,0);var _e=[],Ue=[],He={FileIndex:_e,FullPaths:Ue};E(He,{root:Le.root});for(var xt=Ae.length-4;(Ae[xt]!=80||Ae[xt+1]!=75||Ae[xt+2]!=5||Ae[xt+3]!=6)&&xt>=0;)--xt;Ae.l=xt+4,Ae.l+=4;var jt=Ae.read_shift(2);Ae.l+=6;var ct=Ae.read_shift(4);for(Ae.l=ct,xt=0;xt<jt;++xt){Ae.l+=20;var Nt=Ae.read_shift(4),wt=Ae.read_shift(4),er=Ae.read_shift(2),cr=Ae.read_shift(2),xr=Ae.read_shift(2);Ae.l+=8;var ur=Ae.read_shift(4),Ke=l(Ae.slice(Ae.l+er,Ae.l+er+cr));Ae.l+=er+cr+xr;var mr=Ae.l;Ae.l=ur+4,Re(Ae,Nt,wt,He,Ke),Ae.l=mr}return He}function Re(he,Le,Ae,_e,Ue){he.l+=2;var He=he.read_shift(2),xt=he.read_shift(2),jt=o(he);if(He&8257)throw new Error("Unsupported ZIP encryption");for(var ct=he.read_shift(4),Nt=he.read_shift(4),wt=he.read_shift(4),er=he.read_shift(2),cr=he.read_shift(2),xr="",ur=0;ur<er;++ur)xr+=String.fromCharCode(he[he.l++]);if(cr){var Ke=l(he.slice(he.l,he.l+cr));(Ke[21589]||{}).mt&&(jt=Ke[21589].mt),((Ue||{})[21589]||{}).mt&&(jt=Ue[21589].mt)}he.l+=cr;var mr=he.slice(he.l,he.l+Nt);switch(xt){case 8:mr=z(he,wt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+xt)}var fr=!1;He&8&&(ct=he.read_shift(4),ct==134695760&&(ct=he.read_shift(4),fr=!0),Nt=he.read_shift(4),wt=he.read_shift(4)),Nt!=Le&&pt(fr,"Bad compressed size: "+Le+" != "+Nt),wt!=Ae&&pt(fr,"Bad uncompressed size: "+Ae+" != "+wt),pr(_e,xr,mr,{unsafe:!0,mt:jt})}function Ye(he,Le){var Ae=Le||{},_e=[],Ue=[],He=Ht(1),xt=Ae.compression?8:0,jt=0,ct=0,Nt=0,wt=0,er=0,cr=he.FullPaths[0],xr=cr,ur=he.FileIndex[0],Ke=[],mr=0;for(ct=1;ct<he.FullPaths.length;++ct)if(xr=he.FullPaths[ct].slice(cr.length),ur=he.FileIndex[ct],!(!ur.size||!ur.content||xr=="Sh33tJ5")){var fr=wt,Lr=Ht(xr.length);for(Nt=0;Nt<xr.length;++Nt)Lr.write_shift(1,xr.charCodeAt(Nt)&127);Lr=Lr.slice(0,Lr.l),Ke[er]=oye.buf(ur.content,0);var fa=ur.content;xt==8&&(fa=ee(fa)),He=Ht(30),He.write_shift(4,67324752),He.write_shift(2,20),He.write_shift(2,jt),He.write_shift(2,xt),ur.mt?i(He,ur.mt):He.write_shift(4,0),He.write_shift(-4,Ke[er]),He.write_shift(4,fa.length),He.write_shift(4,ur.content.length),He.write_shift(2,Lr.length),He.write_shift(2,0),wt+=He.length,_e.push(He),wt+=Lr.length,_e.push(Lr),wt+=fa.length,_e.push(fa),He=Ht(46),He.write_shift(4,33639248),He.write_shift(2,0),He.write_shift(2,20),He.write_shift(2,jt),He.write_shift(2,xt),He.write_shift(4,0),He.write_shift(-4,Ke[er]),He.write_shift(4,fa.length),He.write_shift(4,ur.content.length),He.write_shift(2,Lr.length),He.write_shift(2,0),He.write_shift(2,0),He.write_shift(2,0),He.write_shift(2,0),He.write_shift(4,0),He.write_shift(4,fr),mr+=He.l,Ue.push(He),mr+=Lr.length,Ue.push(Lr),++er}return He=Ht(22),He.write_shift(4,101010256),He.write_shift(2,0),He.write_shift(2,0),He.write_shift(2,er),He.write_shift(2,er),He.write_shift(4,mr),He.write_shift(4,wt),He.write_shift(2,0),Li([Li(_e),Li(Ue),He])}var At={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Gt(he,Le){if(he.ctype)return he.ctype;var Ae=he.name||"",_e=Ae.match(/\.([^\.]+)$/);return _e&&At[_e[1]]||Le&&(_e=(Ae=Le).match(/[\.\\]([^\.\\])+$/),_e&&At[_e[1]])?At[_e[1]]:"application/octet-stream"}function De(he){for(var Le=My(he),Ae=[],_e=0;_e<Le.length;_e+=76)Ae.push(Le.slice(_e,_e+76));return Ae.join(`\r
`)+`\r
`}function Ee(he){var Le=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Nt){var wt=Nt.charCodeAt(0).toString(16).toUpperCase();return"="+(wt.length==1?"0"+wt:wt)});Le=Le.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Le.charAt(0)==`
`&&(Le="=0D"+Le.slice(1)),Le=Le.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ae=[],_e=Le.split(`\r
`),Ue=0;Ue<_e.length;++Ue){var He=_e[Ue];if(He.length==0){Ae.push("");continue}for(var xt=0;xt<He.length;){var jt=76,ct=He.slice(xt,xt+jt);ct.charAt(jt-1)=="="?jt--:ct.charAt(jt-2)=="="?jt-=2:ct.charAt(jt-3)=="="&&(jt-=3),ct=He.slice(xt,xt+jt),xt+=jt,xt<He.length&&(ct+="="),Ae.push(ct)}}return Ae.join(`\r
`)}function it(he){for(var Le=[],Ae=0;Ae<he.length;++Ae){for(var _e=he[Ae];Ae<=he.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+he[++Ae];Le.push(_e)}for(var Ue=0;Ue<Le.length;++Ue)Le[Ue]=Le[Ue].replace(/[=][0-9A-Fa-f]{2}/g,function(He){return String.fromCharCode(parseInt(He.slice(1),16))});return Jl(Le.join(`\r
`))}function Tt(he,Le,Ae){for(var _e="",Ue="",He="",xt,jt=0;jt<10;++jt){var ct=Le[jt];if(!ct||ct.match(/^\s*$/))break;var Nt=ct.match(/^(.*?):\s*([^\s].*)$/);if(Nt)switch(Nt[1].toLowerCase()){case"content-location":_e=Nt[2].trim();break;case"content-type":He=Nt[2].trim();break;case"content-transfer-encoding":Ue=Nt[2].trim();break}}switch(++jt,Ue.toLowerCase()){case"base64":xt=Jl(dc(Le.slice(jt).join("")));break;case"quoted-printable":xt=it(Le.slice(jt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ue)}var wt=pr(he,_e.slice(Ae.length),xt,{unsafe:!0});He&&(wt.ctype=He)}function lr(he,Le){if(Z(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ae=Le&&Le.root||"",_e=(wa&&Buffer.isBuffer(he)?he.toString("binary"):Z(he)).split(`\r
`),Ue=0,He="";for(Ue=0;Ue<_e.length;++Ue)if(He=_e[Ue],!!/^Content-Location:/i.test(He)&&(He=He.slice(He.indexOf("file")),Ae||(Ae=He.slice(0,He.lastIndexOf("/")+1)),He.slice(0,Ae.length)!=Ae))for(;Ae.length>0&&(Ae=Ae.slice(0,Ae.length-1),Ae=Ae.slice(0,Ae.lastIndexOf("/")+1),He.slice(0,Ae.length)!=Ae););var xt=(_e[1]||"").match(/boundary="(.*?)"/);if(!xt)throw new Error("MAD cannot find boundary");var jt="--"+(xt[1]||""),ct=[],Nt=[],wt={FileIndex:ct,FullPaths:Nt};E(wt);var er,cr=0;for(Ue=0;Ue<_e.length;++Ue){var xr=_e[Ue];xr!==jt&&xr!==jt+"--"||(cr++&&Tt(wt,_e.slice(er,Ue),Ae),er=Ue)}return wt}function Rt(he,Le){var Ae=Le||{},_e=Ae.boundary||"SheetJS";_e="------="+_e;for(var Ue=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],He=he.FullPaths[0],xt=He,jt=he.FileIndex[0],ct=1;ct<he.FullPaths.length;++ct)if(xt=he.FullPaths[ct].slice(He.length),jt=he.FileIndex[ct],!(!jt.size||!jt.content||xt=="Sh33tJ5")){xt=xt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(mr){return"_x"+mr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(mr){return"_u"+mr.charCodeAt(0).toString(16)+"_"});for(var Nt=jt.content,wt=wa&&Buffer.isBuffer(Nt)?Nt.toString("binary"):Z(Nt),er=0,cr=Math.min(1024,wt.length),xr=0,ur=0;ur<=cr;++ur)(xr=wt.charCodeAt(ur))>=32&&xr<128&&++er;var Ke=er>=cr*4/5;Ue.push(_e),Ue.push("Content-Location: "+(Ae.root||"file:///C:/SheetJS/")+xt),Ue.push("Content-Transfer-Encoding: "+(Ke?"quoted-printable":"base64")),Ue.push("Content-Type: "+Gt(jt,xt)),Ue.push(""),Ue.push(Ke?Ee(wt):De(wt))}return Ue.push(_e+`--\r
`),Ue.join(`\r
`)}function sr(he){var Le={};return E(Le,he),Le}function pr(he,Le,Ae,_e){var Ue=_e&&_e.unsafe;Ue||E(he);var He=!Ue&&Hr.find(he,Le);if(!He){var xt=he.FullPaths[0];Le.slice(0,xt.length)==xt?xt=Le:(xt.slice(-1)!="/"&&(xt+="/"),xt=(xt+Le).replace("//","/")),He={name:s(Le),type:2},he.FileIndex.push(He),he.FullPaths.push(xt),Ue||Hr.utils.cfb_gc(he)}return He.content=Ae,He.size=Ae?Ae.length:0,_e&&(_e.CLSID&&(He.clsid=_e.CLSID),_e.mt&&(He.mt=_e.mt),_e.ct&&(He.ct=_e.ct)),He}function Nr(he,Le){E(he);var Ae=Hr.find(he,Le);if(Ae){for(var _e=0;_e<he.FileIndex.length;++_e)if(he.FileIndex[_e]==Ae)return he.FileIndex.splice(_e,1),he.FullPaths.splice(_e,1),!0}return!1}function gt(he,Le,Ae){E(he);var _e=Hr.find(he,Le);if(_e){for(var Ue=0;Ue<he.FileIndex.length;++Ue)if(he.FileIndex[Ue]==_e)return he.FileIndex[Ue].name=s(Ae),he.FullPaths[Ue]=Ae,!0}return!1}function Bt(he){I(he,!0)}return t.find=A,t.read=_,t.parse=u,t.write=J,t.writeFile=R,t.utils={cfb_new:sr,cfb_add:pr,cfb_del:Nr,cfb_mov:gt,cfb_gc:Bt,ReadShift:oy,CheckField:hG,prep_blob:ao,bconcat:Li,use_zlib:M,_deflateRaw:ve,_inflateRaw:Ve,consts:Q},t}();function lye(e){return typeof e=="string"?ZS(e):Array.isArray(e)?Obe(e):e}function E1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=ZS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Bu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([lye(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=cp(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function cye(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function As(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function G8(e,t){for(var r=[],a=As(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function tC(e){for(var t=[],r=As(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function rC(e){for(var t=[],r=As(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function dye(e){for(var t=[],r=As(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var u2=new Date(1899,11,30,0,0,0);function bi(e,t){var r=e.getTime(),a=u2.getTime()+(e.getTimezoneOffset()-u2.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var HW=new Date,uye=u2.getTime()+(HW.getTimezoneOffset()-u2.getTimezoneOffset())*6e4,Y8=HW.getTimezoneOffset();function aC(e){var t=new Date;return t.setTime(e*24*60*60*1e3+uye),t.getTimezoneOffset()!==Y8&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Y8)*6e4),t}function hye(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var K8=new Date("2017-02-19T19:06:09.000Z"),WW=isNaN(K8.getFullYear())?new Date("2/19/17"):K8,fye=WW.getFullYear()==2017;function Yn(e,t){var r=new Date(e);if(fye)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(WW.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Mx(e,t){if(wa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Bu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Bu(PW(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Bu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Bu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Kn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Kn(e[r]));return t}function Es(e,t){for(var r="";r.length<t;)r+=e;return r}function Td(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var mye=["january","february","march","april","may","june","july","august","september","october","november","december"];function K0(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&mye.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var pye=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function GW(e){return e?e.content&&e.type?Mx(e.content,!0):e.data?Jb(e.data):e.asNodeBuffer&&wa?Jb(e.asNodeBuffer().toString("binary")):e.asBinary?Jb(e.asBinary()):e._data&&e._data.getContent?Jb(Mx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function YW(e){if(!e)return null;if(e.data)return F8(e.data);if(e.asNodeBuffer&&wa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?F8(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function xye(e){return e&&e.name.slice(-4)===".bin"?YW(e):GW(e)}function Oc(e,t){for(var r=e.FullPaths||As(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function X4(e,t){var r=Oc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function si(e,t,r){if(!r)return xye(X4(e,t));if(!t)return null;try{return si(e,t)}catch{return null}}function Zl(e,t,r){if(!r)return GW(X4(e,t));if(!t)return null;try{return Zl(e,t)}catch{return null}}function vye(e,t,r){return YW(X4(e,t))}function X8(e){for(var t=e.FullPaths||As(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function ba(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return wa?a=bf(r):a=Mbe(r),Hr.utils.cfb_add(e,t,a)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function Q4(){return Hr.utils.cfb_new()}function KW(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function ey(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Qs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,gye=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Q8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,bye=/<[^>]*>/g,$o=Qs.match(Q8)?Q8:bye,yye=/<\w*:/,jye=/<(\/?)\w+:/;function sa(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(gye),l=0,c="",d=0,u="",h="",f=1;if(o)for(d=0;d!=o.length;++d){for(h=o[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(f=(s=h.charCodeAt(i+1))==34||s==39?1:0,c=h.slice(i+1+f,h.length-f),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[p]&&u.slice(l-3,l)=="ext")continue;a[p]=c,a[p.toLowerCase()]=c}}return a}function ah(e){return e.replace(jye,"<$1")}var XW={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},J4=tC(XW),Ha=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return XW[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),Z4=/[&<>'"]/g,Nye=/[\u0000-\u0008\u000b-\u001f]/g;function jn(e){var t=e+"";return t.replace(Z4,function(r){return J4[r]}).replace(Nye,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function J8(e){return jn(e).replace(/ /g,"_x0020_")}var QW=/[\u0000-\u001f]/g;function eI(e){var t=e+"";return t.replace(Z4,function(r){return J4[r]}).replace(/\n/g,"<br/>").replace(QW,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function wye(e){var t=e+"";return t.replace(Z4,function(r){return J4[r]}).replace(QW,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var Z8=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function Sye(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Hn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function R_(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function eB(e){var t=Ym(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function tB(e){return bf(e,"binary").toString("utf8")}var hN="foo bar baz",_n=wa&&(tB(hN)==R_(hN)&&tB||eB(hN)==R_(hN)&&eB)||R_,Bu=wa?function(e){return bf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Fy=function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),JW=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),Cye=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),kye=/<\/?(?:vt:)?variant>/g,Eye=/<(?:vt:)([^>]*)>([\s\S]*)</;function rB(e,t){var r=sa(e),a=e.match(Cye(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(kye,"").match(Eye);o&&s.push({v:_n(o[2]),t:o[1]})}),s}var ZW=/(^\s|\s$|\n)/;function io(e,t){return"<"+e+(t.match(ZW)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Ly(e){return As(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vr(e,t,r){return"<"+e+(r!=null?Ly(r):"")+(t!=null?(t.match(ZW)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function kA(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function _ye(e,t){switch(typeof e){case"string":var r=vr("vt:lpwstr",jn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return vr((e|0)==e?"vt:i4":"vt:r8",jn(String(e)));case"boolean":return vr("vt:bool",e?"true":"false")}if(e instanceof Date)return vr("vt:filetime",kA(e));throw new Error("Unable to serialize "+e)}function tI(e){if(wa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return _n(cp(G4(e)));throw new Error("Bad input format: expected Buffer or string")}var By=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,xi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Qx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Yl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Dye(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function Aye(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var aB=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},nB=wa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:bf(t)})):aB(e)}:aB,sB=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(Wh(e,s)));return a.join("").replace(tl,"")},rI=wa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(tl,""):sB(e,t,r)}:sB,iB=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},eG=wa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):iB(e,t,r)}:iB,oB=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(i0(e,s)));return a.join("")},_1=wa?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):oB(t,r,a)}:oB,tG=function(e,t){var r=Kl(e,t);return r>0?_1(e,t+4,t+4+r-1):""},rG=tG,aG=function(e,t){var r=Kl(e,t);return r>0?_1(e,t+4,t+4+r-1):""},nG=aG,sG=function(e,t){var r=2*Kl(e,t);return r>0?_1(e,t+4,t+4+r-1):""},iG=sG,oG=function(t,r){var a=Kl(t,r);return a>0?rI(t,r+4,r+4+a):""},lG=oG,cG=function(e,t){var r=Kl(e,t);return r>0?_1(e,t+4,t+4+r):""},dG=cG,uG=function(e,t){return Dye(e,t)},h2=uG,aI=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};wa&&(rG=function(t,r){if(!Buffer.isBuffer(t))return tG(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},nG=function(t,r){if(!Buffer.isBuffer(t))return aG(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},iG=function(t,r){if(!Buffer.isBuffer(t))return sG(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},lG=function(t,r){if(!Buffer.isBuffer(t))return oG(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},dG=function(t,r){if(!Buffer.isBuffer(t))return cG(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},h2=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):uG(t,r)},aI=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var i0=function(e,t){return e[t]},Wh=function(e,t){return e[t+1]*256+e[t]},Tye=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Kl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Iye=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function oy(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,wa&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Wh(this,d)),d+=2;e*=2;break;case"utf8":r=_1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=rI(this,this.l,this.l+e);break;case"wstr":return oy.call(this,e,"dbcs");case"lpstr-ansi":r=rG(this,this.l),e=4+Kl(this,this.l);break;case"lpstr-cp":r=nG(this,this.l),e=4+Kl(this,this.l);break;case"lpwstr":r=iG(this,this.l),e=4+2*Kl(this,this.l);break;case"lpp4":e=4+Kl(this,this.l),r=lG(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Kl(this,this.l),r=dG(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=i0(this,this.l+e++))!==0;)i.push(uN(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Wh(this,this.l+e))!==0;)i.push(uN(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=i0(this,d),this.l=d+1,l=oy.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(uN(Wh(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=i0(this,d),this.l=d+1,l=oy.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(uN(i0(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=i0(this,this.l),this.l++,a;case 2:return a=(t==="i"?Tye:Wh)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Qp:Iye)(this,this.l),this.l+=4,a):(s=Kl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=h2(this,this.l):s=h2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=eG(this,this.l,e);break}}return this.l+=e,r}var Pye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Oye=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Mye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Rye(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Mye(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Pye(this,t,this.l);break;case 8:if(a=8,r==="f"){Aye(this,t,this.l);break}case 16:break;case-4:a=4,Oye(this,t,this.l);break}return this.l+=a,this}function hG(e,t){var r=eG(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ao(e,t){e.l=t,e.read_shift=oy,e.chk=hG,e.write_shift=Rye}function Bo(e,t){e.l+=t}function Ht(e){var t=Ym(e);return ao(t,0),t}function yf(e,t,r){if(e){var a,s,i;ao(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=Hy[l]||Hy[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function gl(){var e=[],t=wa?256:2048,r=function(d){var u=Ht(d);return ao(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),Li(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function or(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=Hy[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&aI(r)&&e.push(r)}}function ly(e,t,r){var a=Kn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function lB(e,t,r){var a=Kn(e);return a.s=ly(a.s,t.s,r),a.e=ly(a.e,t.s,r),a}function cy(e,t){if(e.cRel&&e.c<0)for(e=Kn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Kn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ra(e);return!e.cRel&&e.cRel!=null&&(r=Bye(r)),!e.rRel&&e.rRel!=null&&(r=Fye(r)),r}function F_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ms(e.s.c)+":"+(e.e.cRel?"":"$")+ms(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ws(e.s.r)+":"+(e.e.rRel?"":"$")+Ws(e.e.r):cy(e.s,t.biff)+":"+cy(e.e,t.biff)}function nI(e){return parseInt(Lye(e),10)-1}function Ws(e){return""+(e+1)}function Fye(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Lye(e){return e.replace(/\$(\d+)$/,"$1")}function sI(e){for(var t=Uye(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function ms(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Bye(e){return e.replace(/^([A-Z])/,"$$$1")}function Uye(e){return e.replace(/^\$([A-Z])/,"$1")}function $ye(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ps(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function ra(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function jl(e){var t=e.indexOf(":");return t==-1?{s:ps(e),e:ps(e)}:{s:ps(e.slice(0,t)),e:ps(e.slice(t+1))}}function pa(e,t){return typeof t>"u"||typeof t=="number"?pa(e.s,e.e):(typeof e!="string"&&(e=ra(e)),typeof t!="string"&&(t=ra(t)),e==t?e:e+":"+t)}function Wa(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function cB(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Gc(e.z,r?bi(t):t)}catch{}try{return e.w=Gc((e.XF||{}).numFmtId||(r?14:0),r?bi(t):t)}catch{return""+t}}function uf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?jf[e.v]||e.v:t==null?cB(e,e.v):cB(e,t))}function dp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function fG(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ps(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Wa(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[h].length;++f)if(!(typeof t[h][f]>"u")){var p={v:t[h][f]},v=o+h,g=l+f;if(d.s.r>v&&(d.s.r=v),d.s.c>g&&(d.s.c=g),d.e.r<v&&(d.e.r=v),d.e.c<g&&(d.e.c=g),t[h][f]&&typeof t[h][f]=="object"&&!Array.isArray(t[h][f])&&!(t[h][f]instanceof Date))p=t[h][f];else if(Array.isArray(p.v)&&(p.f=t[h][f][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||Zr[14],a.cellDates?(p.t="d",p.w=Gc(p.z,bi(p.v))):(p.t="n",p.v=bi(p.v),p.w=Gc(p.z,p.v))):p.t="s";if(s)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var b=ra({c:g,r:v});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return d.s.c<1e7&&(i["!ref"]=pa(d)),i}function Eg(e,t){return fG(null,e,t)}function Vye(e){return e.read_shift(4,"i")}function Id(e,t){return t||(t=Ht(4)),t.write_shift(4,e),t}function Lo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ui(e,t){var r=!1;return t==null&&(r=!0,t=Ht(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function qye(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function zye(e,t){return t||(t=Ht(4)),t.write_shift(2,0),t.write_shift(2,0),t}function iI(e,t){var r=e.l,a=e.read_shift(1),s=Lo(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(qye(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Hye(e,t){var r=!1;return t==null&&(r=!0,t=Ht(15+4*e.t.length)),t.write_shift(1,0),Ui(e.t,t),r?t.slice(0,t.l):t}var Wye=iI;function Gye(e,t){var r=!1;return t==null&&(r=!0,t=Ht(23+4*e.t.length)),t.write_shift(1,1),Ui(e.t,t),t.write_shift(4,1),zye({},t),r?t.slice(0,t.l):t}function Zc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Jx(e,t){return t==null&&(t=Ht(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Zx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ev(e,t){return t==null&&(t=Ht(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Yye=Lo,mG=Ui;function oI(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function f2(e,t){var r=!1;return t==null&&(r=!0,t=Ht(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Kye=Lo,EA=oI,lI=f2;function cI(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?h2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Qp(t,0)>>2;return r?s/100:s}function pG(e,t){t==null&&(t=Ht(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function xG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Xye(e,t){return t||(t=Ht(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var tv=xG,_g=Xye;function Io(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Rx(e,t){return(t||Ht(8)).write_shift(8,e,"f")}function Qye(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=bx[s];d&&(t.rgb=$y(d));break;case 2:t.rgb=$y([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function m2(e,t){if(t||(t=Ht(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Jye(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Zye(e,t){t||(t=Ht(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function vG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function e1e(e){return vG(e,1)}function t1e(e){return vG(e,2)}var dI=2,hl=3,fN=11,dB=12,p2=19,mN=64,r1e=65,a1e=71,n1e=4108,s1e=4126,Ri=80,gG=81,i1e=[Ri,gG],_A={1:{n:"CodePage",t:dI},2:{n:"Category",t:Ri},3:{n:"PresentationFormat",t:Ri},4:{n:"ByteCount",t:hl},5:{n:"LineCount",t:hl},6:{n:"ParagraphCount",t:hl},7:{n:"SlideCount",t:hl},8:{n:"NoteCount",t:hl},9:{n:"HiddenCount",t:hl},10:{n:"MultimediaClipCount",t:hl},11:{n:"ScaleCrop",t:fN},12:{n:"HeadingPairs",t:n1e},13:{n:"TitlesOfParts",t:s1e},14:{n:"Manager",t:Ri},15:{n:"Company",t:Ri},16:{n:"LinksUpToDate",t:fN},17:{n:"CharacterCount",t:hl},19:{n:"SharedDoc",t:fN},22:{n:"HyperlinksChanged",t:fN},23:{n:"AppVersion",t:hl,p:"version"},24:{n:"DigSig",t:r1e},26:{n:"ContentType",t:Ri},27:{n:"ContentStatus",t:Ri},28:{n:"Language",t:Ri},29:{n:"Version",t:Ri},255:{},2147483648:{n:"Locale",t:p2},2147483651:{n:"Behavior",t:p2},1919054434:{}},DA={1:{n:"CodePage",t:dI},2:{n:"Title",t:Ri},3:{n:"Subject",t:Ri},4:{n:"Author",t:Ri},5:{n:"Keywords",t:Ri},6:{n:"Comments",t:Ri},7:{n:"Template",t:Ri},8:{n:"LastAuthor",t:Ri},9:{n:"RevNumber",t:Ri},10:{n:"EditTime",t:mN},11:{n:"LastPrinted",t:mN},12:{n:"CreatedDate",t:mN},13:{n:"ModifiedDate",t:mN},14:{n:"PageCount",t:hl},15:{n:"WordCount",t:hl},16:{n:"CharCount",t:hl},17:{n:"Thumbnail",t:a1e},18:{n:"Application",t:Ri},19:{n:"DocSecurity",t:hl},255:{},2147483648:{n:"Locale",t:p2},2147483651:{n:"Behavior",t:p2},1919054434:{}},uB={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},o1e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function l1e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var c1e=l1e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),bx=Kn(c1e),jf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},bG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},AA={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},pN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function d1e(e){var t=uI();if(!e||!e.match)return t;var r={};if((e.match($o)||[]).forEach(function(a){var s=sa(a);switch(s[0].replace(yye,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[AA[s.ContentType]]!==void 0&&t[AA[s.ContentType]].push(s.PartName);break}}),t.xmlns!==xi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function yG(e,t){var r=dye(AA),a=[],s;a[a.length]=Qs,a[a.length]=vr("Types",null,{xmlns:xi.CT,"xmlns:xsd":xi.xsd,"xmlns:xsi":xi.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return vr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=vr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:pN[c][t.bookType]||pN[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:pN[c][t.bookType]||pN[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var ka={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Uy(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function dy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match($o)||[]).forEach(function(s){var i=sa(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:ey(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function w0(e){var t=[Qs,vr("Relationships",null,{xmlns:xi.RELS})];return As(e["!id"]).forEach(function(r){t[t.length]=vr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function bn(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[ka.HLINK,ka.XPATH,ka.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var u1e="application/vnd.oasis.opendocument.spreadsheet";function h1e(e,t){for(var r=tI(e),a,s;a=By.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=sa(a[0],!1),s.path=="/"&&s.type!==u1e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function f1e(e){var t=[Qs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function hB(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function m1e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function p1e(e){var t=[Qs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(hB(e[r][0],e[r][1])),t.push(m1e("",e[r][0]));return t.push(hB("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function jG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+o2.version+"</meta:generator></office:meta></office:document-meta>"}var zc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],x1e=function(){for(var e=new Array(zc.length),t=0;t<zc.length;++t){var r=zc[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function NG(e){var t={};e=_n(e);for(var r=0;r<zc.length;++r){var a=zc[r],s=e.match(x1e[r]);s!=null&&s.length>0&&(t[a[1]]=Ha(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Yn(t[a[1]]))}return t}function L_(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=jn(t),a[a.length]=r?vr(e,t,r):io(e,t))}function wG(e,t){var r=t||{},a=[Qs,vr("cp:coreProperties",null,{"xmlns:cp":xi.CORE_PROPS,"xmlns:dc":xi.dc,"xmlns:dcterms":xi.dcterms,"xmlns:dcmitype":xi.dcmitype,"xmlns:xsi":xi.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&L_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:kA(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&L_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:kA(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=zc.length;++i){var o=zc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&L_(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var yx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],SG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function CG(e,t,r,a){var s=[];if(typeof e=="string")s=rB(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?rB(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function v1e(e,t,r){var a={};return t||(t={}),e=_n(e),yx.forEach(function(s){var i=(e.match(Fy(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Ha(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&CG(a.HeadingPairs,a.TitlesOfParts,t,r),t}function kG(e){var t=[],r=vr;return e||(e={}),e.Application="SheetJS",t[t.length]=Qs,t[t.length]=vr("Properties",null,{xmlns:xi.EXT_PROPS,"xmlns:vt":xi.vt}),yx.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=jn(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+jn(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var g1e=/<[^>]+>[^<]*/g;function b1e(e,t){var r={},a="",s=e.match(g1e);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=sa(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Ha(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=Ha(u);break;case"bool":r[a]=Hn(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=Yn(u);break;case"cy":case"error":r[a]=Ha(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function EG(e){var t=[Qs,vr("Properties",null,{xmlns:xi.CUST_PROPS,"xmlns:vt":xi.vt})];if(!e)return t.join("");var r=1;return As(e).forEach(function(s){++r,t[t.length]=vr("property",_ye(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:jn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var TA={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},B_;function y1e(e,t,r){B_||(B_=tC(TA)),t=B_[t]||t,e[t]=r}function j1e(e,t){var r=[];return As(TA).map(function(a){for(var s=0;s<zc.length;++s)if(zc[s][1]==a)return zc[s];for(s=0;s<yx.length;++s)if(yx[s][1]==a)return yx[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(io(TA[a[1]]||a[1],s))}}),vr("DocumentProperties",r.join(""),{xmlns:Yl.o})}function N1e(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&As(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<zc.length;++o)if(i==zc[o][1])return;for(o=0;o<yx.length;++o)if(i==yx[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(vr(J8(i),l,{"dt:dt":c}))}}),t&&As(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(vr(J8(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Yl.o+'">'+s.join("")+"</"+a+">"}function hI(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function w1e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=Ht(8);return o.write_shift(4,a),o.write_shift(4,s),o}function _G(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function DG(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function AG(e,t,r){return t===31?DG(e):_G(e,t,r)}function IA(e,t,r){return AG(e,t,r===!1?0:4)}function S1e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return AG(e,t,0)}function C1e(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(tl,""),e.l-s&2&&(e.l+=2)}return r}function k1e(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(tl,"");return r}function E1e(e){var t=e.l,r=x2(e,gG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=x2(e,hl);return[r,a]}function _1e(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(E1e(e));return r}function fB(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(tl,"").replace(Zb,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function TG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function D1e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function x2(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==dB&&a!==t&&i1e.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===dB?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return _G(e,a,4).replace(tl,"");case 31:return DG(e);case 64:return hI(e);case 65:return TG(e);case 71:return D1e(e);case 80:return IA(e,a,!i.raw).replace(tl,"");case 81:return S1e(e,a).replace(tl,"");case 4108:return _1e(e);case 4126:case 4127:return a==4127?C1e(e):k1e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function mB(e,t){var r=Ht(4),a=Ht(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Ht(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=w1e(t);break;case 31:case 80:for(a=Ht(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Li([r,a])}function pB(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),h=e.read_shift(4);i[o]=[u,h+r]}i.sort(function(S,w){return S[1]-w[1]});var f={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(f[v.n]=x2(e,v.t,{raw:!0}),v.p==="version"&&(f[v.n]=String(f[v.n]>>16)+"."+("0000"+String(f[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(f[v.n]){case 0:f[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_d(l=f[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[v.n])}}else if(i[o][0]===1){if(l=f.CodePage=x2(e,dI),_d(l),c!==-1){var g=e.l;e.l=i[c][1],d=fB(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=fB(e,l)}else{var b=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=TG(e);break;case 30:e.l+=4,y=IA(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=IA(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Us(e,4);break;case 64:e.l+=4,y=Yn(hI(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[b]=y}}return e.l=r+a,f}var IG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function A1e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function xB(e,t,r){var a=Ht(8),s=[],i=[],o=8,l=0,c=Ht(8),d=Ht(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=Ht(8),d.write_shift(4,0),s.unshift(d);var u=[Ht(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var h=e[l][0];for(c=Ht(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Li(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(IG.indexOf(e[l][0])>-1||SG.indexOf(e[l][0])>-1)&&e[l][1]!=null){var f=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof f=="string"){var g=f.split(".");f=(+g[0]<<16)+(+g[1]||0)}c=mB(v.t,f)}else{var b=A1e(f);b==-1&&(b=31,f=String(f)),c=mB(b,f)}i.push(c),d=Ht(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),Li([a].concat(s).concat(i))}function vB(e,t,r){var a=e.content;if(!a)return{};ao(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Hr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var h=pB(a,t),f={SystemIdentifier:d};for(var p in h)f[p]=h[p];if(f.FMTID=i,s===1)return f;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var v;try{v=pB(a,null)}catch{}for(p in v)f[p]=v[p];return f.FMTID=[i,o],f}function gB(e,t,r,a,s,i){var o=Ht(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=xB(e,r,a);if(l.push(c),s){var d=xB(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return Li(l)}function gm(e,t){return e.read_shift(t),null}function T1e(e,t){t||(t=Ht(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function I1e(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Us(e,t){return e.read_shift(t)===1}function Xo(e,t){return t||(t=Ht(2)),t.write_shift(2,+!!e),t}function ii(e){return e.read_shift(2,"u")}function Mc(e,t){return t||(t=Ht(2)),t.write_shift(2,e),t}function PG(e,t){return I1e(e,t,ii)}function P1e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function OG(e,t,r){return r||(r=Ht(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function D1(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function O1e(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function M1e(e){var t=e.t||"",r=Ht(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Ht(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Li(s)}function Fx(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function A1(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Fx(e,a,r)}function rv(e,t,r){if(r.biff>5)return A1(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function MG(e,t,r){return r||(r=Ht(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function R1e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function F1e(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(tl,"");return a&&(e.l+=24),s}function L1e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(tl,"");return r+o}function B1e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return F1e(e);case"0303000000000000c000000000000046":return L1e(e);default:throw new Error("Unsupported Moniker "+r)}}function xN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(tl,""):"";return r}function bB(e,t){t||(t=Ht(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function U1e(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,h;s&16&&(i=xN(e,r-e.l)),s&128&&(o=xN(e,r-e.l)),(s&257)===257&&(l=xN(e,r-e.l)),(s&257)===1&&(c=B1e(e,r-e.l)),s&8&&(d=xN(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(h=hI(e)),e.l=r;var f=o||l||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var p={Target:f};return u&&(p.guid=u),h&&(p.time=h),i&&(p.Tooltip=i),p}function $1e(e){var t=Ht(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),bB(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&bB(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function RG(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function FG(e,t){var r=RG(e);return r[3]=0,r}function nh(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Lx(e,t,r,a){return a||(a=Ht(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function V1e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function q1e(e,t,r){return t===0?"":rv(e,t,r)}function z1e(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function LG(e){var t=e.read_shift(2),r=cI(e);return[t,r]}function H1e(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=D1(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function nC(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function BG(e,t){return t||(t=Ht(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function UG(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var W1e=UG;function $G(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function G1e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Y1e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function vo(e){e.l+=2,e.l+=e.read_shift(2)}var K1e={0:vo,4:vo,5:vo,6:vo,7:Y1e,8:vo,9:vo,10:vo,11:vo,12:vo,13:G1e,14:vo,15:vo,16:vo,17:vo,18:vo,19:vo,20:vo,21:$G};function X1e(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(K1e[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function vN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function fI(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ht(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Q1e(e,t){return t===0||e.read_shift(2),1200}function J1e(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=rv(e,0,r);return e.read_shift(t+a-e.l),s}function Z1e(e,t){var r=!t||t.biff==8,a=Ht(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function eje(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function tje(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=D1(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function rje(e,t){var r=!t||t.biff>=8?2:1,a=Ht(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function aje(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(O1e(e));return i.Count=a,i.Unique=s,i}function nje(e,t){var r=Ht(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=M1e(e[s]);var i=Li([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function sje(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function ije(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function oje(e){var t=V1e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function lje(e){return e.read_shift(2),e.read_shift(4)}function yB(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function cje(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function dje(){var e=Ht(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function uje(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function hje(e){var t=Ht(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function fje(){}function mje(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=D1(e,0,r),a}function pje(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=Ht(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function xje(e){var t=nh(e);return t.isst=e.read_shift(4),t}function vje(e,t,r,a){var s=Ht(10);return Lx(e,t,a,s),s.write_shift(4,r),s}function gje(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=nh(e);r.biff==2&&e.l++;var i=A1(e,a-e.l,r);return s.val=i,s}function bje(e,t,r,a,s){var i=!s||s.biff==8,o=Ht(8+ +i+(1+i)*r.length);return Lx(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function yje(e,t,r){var a=e.read_shift(2),s=rv(e,0,r);return[a,s]}function jje(e,t,r,a){var s=r&&r.biff==5;a||(a=Ht(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var Nje=rv;function jB(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function wje(e,t){var r=t.biff==8||!t.biff?4:2,a=Ht(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function Sje(e){var t=e.read_shift(2),r=e.read_shift(2),a=LG(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function Cje(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(LG(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function kje(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function Eje(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=o1e[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function _je(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=Eje(e,t,a.fStyle,r),a}function NB(e,t,r,a){var s=r&&r.biff==5;a||(a=Ht(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function Dje(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Aje(e){var t=Ht(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function wB(e,t,r){var a=nh(e);(r.biff==2||t==9)&&++e.l;var s=P1e(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function Tje(e,t,r,a,s,i){var o=Ht(8);return Lx(e,t,a,o),OG(r,i,o),o}function Ije(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=nh(e),s=Io(e);return a.val=s,a}function Pje(e,t,r,a){var s=Ht(14);return Lx(e,t,a,s),Rx(r,s),s}var SB=q1e;function Oje(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Fx(e,i),l=[];a>e.l;)l.push(A1(e));return[i,s,o,l]}function CB(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=H1e(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Mje=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function kB(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Fx(e,o,r);s&32&&(d=Mje[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var h=a==e.l||l===0||!(u>0)?[]:XSe(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function VG(e,t,r){if(r.biff<8)return Rje(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(z1e(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Rje(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=D1(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Fje(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Fx(e,a,r),o=Fx(e,s,r);return[i,o]}function Lje(e,t,r){var a=UG(e);e.l++;var s=e.read_shift(1);return t-=8,[QSe(e,t,r),s,a]}function EB(e,t,r){var a=W1e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,YSe(e,t,r)]}function Bje(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Uje(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=rv(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function $je(e,t,r){return Uje(e,t,r)}function Vje(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(nC(e));return r}function qje(e){var t=Ht(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)BG(e[r],t);return t}function zje(e,t,r){if(r&&r.biff<8)return Wje(e,t,r);var a=$G(e),s=X1e(e,t-22,a[1]);return{cmo:a,ft:s}}var Hje={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Wje(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Hje[a]||Bo)(e,t,r)),{cmo:[s,a,i],ft:o}}function Gje(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=R1e(e,6,r);var l=e.read_shift(2);e.read_shift(2),ii(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=Fx(e,e.lens[d+1]-e.lens[d]-1);if(s+=h,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Yje(e,t){var r=nC(e);e.l+=16;var a=U1e(e,t-24);return[r,a]}function Kje(e){var t=Ht(24),r=ps(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Li([t,$1e(e[1])])}function Xje(e,t){e.read_shift(2);var r=nC(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(tl,""),[r,a]}function Qje(e){var t=e[1].Tooltip,r=Ht(10+2*(t.length+1));r.write_shift(2,2048);var a=ps(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Jje(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=uB[r]||r,r=e.read_shift(2),t[1]=uB[r]||r,t}function Zje(e){return e||(e=Ht(4)),e.write_shift(2,1),e.write_shift(2,1),e}function eNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(FG(e));return r}function tNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(FG(e));return r}function rNe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function qG(e,t,r){if(!r.cellStyles)return Bo(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function aNe(e,t){var r=Ht(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function nNe(e,t){var r={};return t<32||(e.l+=16,r.header=Io(e),r.footer=Io(e),e.l+=2),r}function sNe(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function iNe(e){for(var t=Ht(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var oNe=nh,lNe=PG,cNe=A1;function dNe(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function uNe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=nh(e);++e.l;var s=rv(e,t-7,r);return a.t="str",a.val=s,a}function hNe(e){var t=nh(e);++e.l;var r=Io(e);return t.t="n",t.val=r,t}function fNe(e,t,r){var a=Ht(15);return O1(a,e,t),a.write_shift(8,r,"f"),a}function mNe(e){var t=nh(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function pNe(e,t,r){var a=Ht(9);return O1(a,e,t),a.write_shift(2,r),a}function xNe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function vNe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function gNe(e,t,r){var a=e.l+t,s=nh(e),i=e.read_shift(2),o=Fx(e,i,r);return e.l=a,s.t="str",s.val=o,s}var bNe=[2,3,48,49,131,139,140,245],PA=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=tC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Ym(1);switch(c.type){case"base64":u=Jl(dc(l));break;case"binary":u=Jl(l);break;case"buffer":case"array":u=l;break}ao(u,0);var h=u.read_shift(1),f=!!(h&136),p=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,f=!0;break;case 49:p=!0,f=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,b=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(b=u.read_shift(2));var y=u.read_shift(2),S=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(S=e[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var w=[],k={},C=Math.min(u.length,h==2?521:b-10-(p?264:0)),_=v?32:11;u.l<C&&u[u.l]!=13;)switch(k={},k.name=Oy.utils.decode(S,u.slice(u.l,u.l+_)).replace(/[\u0000\r\n].*$/g,""),u.l+=_,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&w.push(k),h!=2&&(u.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var E=0,T=0;for(d[0]=[],T=0;T!=w.length;++T)d[0][T]=w[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++E]=[],T=0,T=0;T!=w.length;++T){var I=u.slice(u.l,u.l+w[T].len);u.l+=w[T].len,ao(I,0);var F=Oy.utils.decode(S,I);switch(w[T].type){case"C":F.trim().length&&(d[E][T]=F.replace(/\s+$/,""));break;case"D":F.length===8?d[E][T]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):d[E][T]=F;break;case"F":d[E][T]=parseFloat(F.trim());break;case"+":case"I":d[E][T]=v?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":d[E][T]=!0;break;case"N":case"F":d[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][T]="##MEMO##"+(v?parseInt(F.trim(),10):I.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(d[E][T]=+F||0);break;case"@":d[E][T]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":d[E][T]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":d[E][T]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][T]=-I.read_shift(-8,"f");break;case"B":if(p&&w[T].len==8){d[E][T]=I.read_shift(8,"f");break}case"G":case"P":I.l+=w[T].len;break;case"0":if(w[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[T].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Eg(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return dp(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&_d(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=gl(),h=b2(l,{header:1,raw:!0,cellDates:!0}),f=h[0],p=h.slice(1),v=l["!cols"]||[],g=0,b=0,y=0,S=1;for(g=0;g<f.length;++g){if(((v[g]||{}).DBF||{}).name){f[g]=v[g].DBF.name,++y;continue}if(f[g]!=null){if(++y,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(b=0;b<1024;++b)if(f.indexOf(f[g]+"_"+b)==-1){f[g]+="_"+b;break}}}}var w=Wa(l["!ref"]),k=[],C=[],_=[];for(g=0;g<=w.e.c-w.s.c;++g){var E="",T="",I=0,F=[];for(b=0;b<p.length;++b)p[b][g]!=null&&F.push(p[b][g]);if(F.length==0||f[g]==null){k[g]="?";continue}for(b=0;b<F.length;++b){switch(typeof F[b]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=F[b]instanceof Date?"D":"C";break;default:T="C"}I=Math.max(I,String(F[b]).length),E=E&&E!=T?"C":T}I>250&&(I=250),T=((v[g]||{}).DBF||{}).type,T=="C"&&v[g].DBF.len>I&&(I=v[g].DBF.len),E=="B"&&T=="N"&&(E="N",_[g]=v[g].DBF.dec,I=v[g].DBF.len),C[g]=E=="C"||T=="N"?I:i[E]||0,S+=C[g],k[g]=E}var A=u.next(32);for(A.write_shift(4,318902576),A.write_shift(4,p.length),A.write_shift(2,296+32*y),A.write_shift(2,S),g=0;g<4;++g)A.write_shift(4,0);for(A.write_shift(4,0|(+t[IW]||3)<<8),g=0,b=0;g<f.length;++g)if(f[g]!=null){var P=u.next(32),q=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,q,"sbcs"),P.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),P.write_shift(4,b),P.write_shift(1,C[g]||i[k[g]]||0),P.write_shift(1,_[g]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),b+=C[g]||i[k[g]]||0}var V=u.next(264);for(V.write_shift(4,13),g=0;g<65;++g)V.write_shift(4,0);for(g=0;g<p.length;++g){var Y=u.next(S);for(Y.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(k[b]){case"L":Y.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":Y.write_shift(8,p[g][b]||0,"f");break;case"N":var B="0";for(typeof p[g][b]=="number"&&(B=p[g][b].toFixed(_[b]||0)),y=0;y<C[b]-B.length;++y)Y.write_shift(1,32);Y.write_shift(1,B,"sbcs");break;case"D":p[g][b]?(Y.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(p[g][b]!=null?p[g][b]:"").slice(0,C[b]);for(Y.write_shift(1,Q,"sbcs"),y=0;y<C[b]-Q.length;++y)Y.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}}(),zG=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+As(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,p){var v=e[p];return typeof v=="number"?L8(v):v},a=function(f,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?f:L8(g)};e["|"]=254;function s(f,p){switch(p.type){case"base64":return i(dc(f),p);case"binary":return i(f,p);case"buffer":return i(wa&&Buffer.isBuffer(f)?f.toString("binary"):cp(f),p);case"array":return i(Mx(f),p)}throw new Error("Unrecognized type "+p.type)}function i(f,p){var v=f.split(/[\n\r]+/),g=-1,b=-1,y=0,S=0,w=[],k=[],C=null,_={},E=[],T=[],I=[],F=0,A;for(+p.codepage>=0&&_d(+p.codepage);y!==v.length;++y){F=0;var P=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),q=P.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),V=q[0],Y;if(P.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":q[1].charAt(0)=="P"&&k.push(P.slice(3).replace(/;;/g,";"));break;case"C":var B=!1,Q=!1,R=!1,Z=!1,J=-1,ie=-1;for(S=1;S<q.length;++S)switch(q[S].charAt(0)){case"A":break;case"X":b=parseInt(q[S].slice(1))-1,Q=!0;break;case"Y":for(g=parseInt(q[S].slice(1))-1,Q||(b=0),A=w.length;A<=g;++A)w[A]=[];break;case"K":Y=q[S].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Td(Y))?isNaN(K0(Y).getDate())||(Y=Yn(Y)):(Y=Td(Y),C!==null&&Cg(C)&&(Y=aC(Y))),B=!0;break;case"E":Z=!0;var M=S0(q[S].slice(1),{r:g,c:b});w[g][b]=[w[g][b],M];break;case"S":R=!0,w[g][b]=[w[g][b],"S5S"];break;case"G":break;case"R":J=parseInt(q[S].slice(1))-1;break;case"C":ie=parseInt(q[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}if(B&&(w[g][b]&&w[g][b].length==2?w[g][b][0]=Y:w[g][b]=Y,C=null),R){if(Z)throw new Error("SYLK shared formula cannot have own formula");var z=J>-1&&w[J][ie];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");w[g][b][1]=lY(z[1],{r:g-J,c:b-ie})}break;case"F":var ee=0;for(S=1;S<q.length;++S)switch(q[S].charAt(0)){case"X":b=parseInt(q[S].slice(1))-1,++ee;break;case"Y":for(g=parseInt(q[S].slice(1))-1,A=w.length;A<=g;++A)w[A]=[];break;case"M":F=parseInt(q[S].slice(1))/20;break;case"F":break;case"G":break;case"P":C=k[parseInt(q[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=q[S].slice(1).split(" "),A=parseInt(I[0],10);A<=parseInt(I[1],10);++A)F=parseInt(I[2],10),T[A-1]=F===0?{hidden:!0}:{wch:F},Km(T[A-1]);break;case"C":b=parseInt(q[S].slice(1))-1,T[b]||(T[b]={});break;case"R":g=parseInt(q[S].slice(1))-1,E[g]||(E[g]={}),F>0?(E[g].hpt=F,E[g].hpx=Q0(F)):F===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}ee<1&&(C=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}}return E.length>0&&(_["!rows"]=E),T.length>0&&(_["!cols"]=T),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,_]}function o(f,p){var v=s(f,p),g=v[0],b=v[1],y=Eg(g,p);return As(b).forEach(function(S){y[S]=b[S]}),y}function l(f,p){return dp(o(f,p),p)}function c(f,p,v,g){var b="C;Y"+(v+1)+";X"+(g+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+bI(f.f,{r:v,c:g}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(f,p){p.forEach(function(v,g){var b="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Vy(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=qy(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,p){p.forEach(function(v,g){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*zy(v.hpx)+";"),b.length>2&&f.push(b+"R"+(g+1))})}function h(f,p){var v=["ID;PWXL;N;E"],g=[],b=Wa(f["!ref"]),y,S=Array.isArray(f),w=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),f["!cols"]&&d(v,f["!cols"]),f["!rows"]&&u(v,f["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var C=b.s.c;C<=b.e.c;++C){var _=ra({r:k,c:C});y=S?(f[k]||[])[C]:f[_],!(!y||y.v==null&&(!y.f||y.F))&&g.push(c(y,f,k,C))}return v.join(w)+w+g.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),HG=function(){function e(i,o){switch(o.type){case"base64":return t(dc(i),o);case"binary":return t(i,o);case"buffer":return t(wa&&Buffer.isBuffer(i)?i.toString("binary"):cp(i),o);case"array":return t(Mx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var f=l[u].trim().split(","),p=f[0],v=f[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Td(v))?isNaN(K0(v).getDate())?h[c][d]=v:h[c][d]=Yn(v):h[c][d]=Td(v),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return Eg(e(i,o),o)}function a(i,o){return dp(r(i,o),o)}var s=function(){var i=function(c,d,u,h,f){c.push(d),c.push(u+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Wa(c["!ref"]),h,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var g=ra({r:p,c:v});if(h=f?(c[p]||[])[v]:c[g],!h){o(d,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(d,1,0,"="+h.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Gc(h.z||Zr[14],bi(Yn(h.v)))),o(d,0,h.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,S=d.join(y);return S}}();return{to_workbook:a,to_sheet:r,from_sheet:s}}(),WG=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var p=h.split(`
`),v=-1,g=-1,b=0,y=[];b!==p.length;++b){var S=p[b].trim().split(":");if(S[0]==="cell"){var w=ps(S[1]);if(y.length<=w.r)for(v=y.length;v<=w.r;++v)y[v]||(y[v]=[]);switch(v=w.r,g=w.c,S[2]){case"t":y[v][g]=e(S[3]);break;case"v":y[v][g]=+S[3];break;case"vtf":var k=S[S.length-1];case"vtc":switch(S[3]){case"nl":y[v][g]=!!+S[4];break;default:y[v][g]=+S[4];break}S[2]=="vtf"&&(y[v][g]=[y[v][g],k])}}}return f&&f.sheetRows&&(y=y.slice(0,f.sheetRows)),y}function a(h,f){return Eg(r(h,f),f)}function s(h,f){return dp(a(h,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var f=[],p=[],v,g="",b=jl(h["!ref"]),y=Array.isArray(h),S=b.s.r;S<=b.e.r;++S)for(var w=b.s.c;w<=b.e.c;++w)if(g=ra({r:S,c:w}),v=y?(h[S]||[])[w]:h[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=bi(Yn(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||Gc(v.z||Zr[14],k);break;case"e":continue}f.push(p.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[i,o,l,o,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}}(),X0=function(){function e(u,h,f,p,v){v.raw?h[f][p]=u:u===""||(u==="TRUE"?h[f][p]=!0:u==="FALSE"?h[f][p]=!1:isNaN(Td(u))?isNaN(K0(u).getDate())?h[f][p]=u:h[f][p]=Yn(u):h[f][p]=Td(u))}function t(u,h){var f=h||{},p=[];if(!u||u.length===0)return p;for(var v=u.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var b=10,y=0,S=0;S<=g;++S)y=v[S].indexOf(" "),y==-1?y=v[S].length:y++,b=Math.max(b,y);for(S=0;S<=g;++S){p[S]=[];var w=0;for(e(v[S].slice(0,b).trim(),p,S,w,f),w=1;w<=(v[S].length-b)/10+1;++w)e(v[S].slice(b+(w-1)*10,b+w*10).trim(),p,S,w,f)}return f.sheetRows&&(p=p.slice(0,f.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var h={},f=!1,p=0,v=0;p<u.length;++p)(v=u.charCodeAt(p))==34?f=!f:!f&&v in r&&(h[v]=(h[v]||0)+1);v=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p]);if(!v.length){h=a;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p])}return v.sort(function(g,b){return g[0]-b[0]||a[g[1]]-a[b[1]]}),r[v.pop()[1]]||44}function i(u,h){var f=h||{},p="",v=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):f&&f.FS?p=f.FS:p=s(u.slice(0,1024));var b=0,y=0,S=0,w=0,k=0,C=p.charCodeAt(0),_=!1,E=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var I=f.dateNF!=null?sye(f.dateNF):null;function F(){var A=u.slice(w,k),P={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)P.t="z";else if(f.raw)P.t="s",P.v=A;else if(A.trim().length===0)P.t="s",P.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(P.t="s",P.v=A.slice(2,-1).replace(/""/g,'"')):O2e(A)?(P.t="n",P.f=A.slice(1)):(P.t="s",P.v=A);else if(A=="TRUE")P.t="b",P.v=!0;else if(A=="FALSE")P.t="b",P.v=!1;else if(!isNaN(S=Td(A)))P.t="n",f.cellText!==!1&&(P.w=A),P.v=S;else if(!isNaN(K0(A).getDate())||I&&A.match(I)){P.z=f.dateNF||Zr[14];var q=0;I&&A.match(I)&&(A=iye(A,f.dateNF,A.match(I)||[]),q=1),f.cellDates?(P.t="d",P.v=Yn(A,q)):(P.t="n",P.v=bi(Yn(A,q))),f.cellText!==!1&&(P.w=Gc(P.z,P.v instanceof Date?bi(P.v):P.v)),f.cellNF||delete P.z}else P.t="s",P.v=A;if(P.t=="z"||(f.dense?(v[b]||(v[b]=[]),v[b][y]=P):v[ra({c:y,r:b})]=P),w=k+1,T=u.charCodeAt(w),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==C)++y;else if(y=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;k<u.length;++k)switch(E=u.charCodeAt(k)){case 34:T===34&&(_=!_);break;case C:case 10:case 13:if(!_&&F())break e;break}return k-w>0&&F(),v["!ref"]=pa(g),v}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):Eg(t(u,h),h)}function l(u,h){var f="",p=h.type=="string"?[0,0,0,0]:EI(u,h);switch(h.type){case"base64":f=dc(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof Oy<"u"||(f=wa&&Buffer.isBuffer(u)?u.toString("binary"):cp(u));break;case"array":f=Mx(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?f=_n(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=_n(f):h.type=="binary"&&typeof Oy<"u",f.slice(0,19)=="socialcalc:version:"?WG.to_sheet(h.type=="string"?f:_n(f),h):o(f,h)}function c(u,h){return dp(l(u,h),h)}function d(u){for(var h=[],f=Wa(u["!ref"]),p,v=Array.isArray(u),g=f.s.r;g<=f.e.r;++g){for(var b=[],y=f.s.c;y<=f.e.c;++y){var S=ra({r:g,c:y});if(p=v?(u[g]||[])[y]:u[S],!p||p.v==null){b.push("          ");continue}for(var w=(p.w||(uf(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";b.push(w+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function yNe(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=zG.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return X0.to_workbook(e,t)}}var jx=function(){function e(M,z,ee){if(M){ao(M,M.l||0);for(var ne=ee.Enum||J;M.l<M.length;){var W=M.read_shift(2),re=ne[W]||ne[65535],le=M.read_shift(2),te=M.l+le,K=re.f&&re.f(M,le,ee);if(M.l=te,z(K,re,W))return}}}function t(M,z){switch(z.type){case"base64":return r(Jl(dc(M)),z);case"binary":return r(Jl(M),z);case"buffer":case"array":return r(M,z)}throw"Unsupported type "+z.type}function r(M,z){if(!M)return M;var ee=z||{},ne=ee.dense?[]:{},W="Sheet1",re="",le=0,te={},K=[],de=[],H={s:{r:0,c:0},e:{r:0,c:0}},se=ee.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)ee.Enum=J,e(M,function(ge,Ne,Me){switch(Me){case 0:ee.vers=ge,ge>=4096&&(ee.qpro=!0);break;case 6:H=ge;break;case 204:ge&&(re=ge);break;case 222:re=ge;break;case 15:case 51:ee.qpro||(ge[1].v=ge[1].v.slice(1));case 13:case 14:case 16:Me==14&&(ge[2]&112)==112&&(ge[2]&15)>1&&(ge[2]&15)<15&&(ge[1].z=ee.dateNF||Zr[14],ee.cellDates&&(ge[1].t="d",ge[1].v=aC(ge[1].v))),ee.qpro&&ge[3]>le&&(ne["!ref"]=pa(H),te[W]=ne,K.push(W),ne=ee.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},le=ge[3],W=re||"Sheet"+(le+1),re="");var We=ee.dense?(ne[ge[0].r]||[])[ge[0].c]:ne[ra(ge[0])];if(We){We.t=ge[1].t,We.v=ge[1].v,ge[1].z!=null&&(We.z=ge[1].z),ge[1].f!=null&&(We.f=ge[1].f);break}ee.dense?(ne[ge[0].r]||(ne[ge[0].r]=[]),ne[ge[0].r][ge[0].c]=ge[1]):ne[ra(ge[0])]=ge[1];break}},ee);else if(M[2]==26||M[2]==14)ee.Enum=ie,M[2]==14&&(ee.qpro=!0,M.l=0),e(M,function(ge,Ne,Me){switch(Me){case 204:W=ge;break;case 22:ge[1].v=ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ge[3]>le&&(ne["!ref"]=pa(H),te[W]=ne,K.push(W),ne=ee.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},le=ge[3],W="Sheet"+(le+1)),se>0&&ge[0].r>=se)break;ee.dense?(ne[ge[0].r]||(ne[ge[0].r]=[]),ne[ge[0].r][ge[0].c]=ge[1]):ne[ra(ge[0])]=ge[1],H.e.c<ge[0].c&&(H.e.c=ge[0].c),H.e.r<ge[0].r&&(H.e.r=ge[0].r);break;case 27:ge[14e3]&&(de[ge[14e3][0]]=ge[14e3][1]);break;case 1537:de[ge[0]]=ge[1],ge[0]==le&&(W=ge[1]);break}},ee);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(ne["!ref"]=pa(H),te[re||W]=ne,K.push(re||W),!de.length)return{SheetNames:K,Sheets:te};for(var be={},ue=[],oe=0;oe<de.length;++oe)te[K[oe]]?(ue.push(de[oe]||K[oe]),be[de[oe]]=te[de[oe]]||te[K[oe]]):(ue.push(de[oe]),be[de[oe]]={"!ref":"A1"});return{SheetNames:ue,Sheets:be}}function a(M,z){var ee=z||{};if(+ee.codepage>=0&&_d(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=gl(),W=Wa(M["!ref"]),re=Array.isArray(M),le=[];gr(ne,0,i(1030)),gr(ne,6,c(W));for(var te=Math.min(W.e.r,8191),K=W.s.r;K<=te;++K)for(var de=Ws(K),H=W.s.c;H<=W.e.c;++H){K===W.s.r&&(le[H]=ms(H));var se=le[H]+de,be=re?(M[K]||[])[H]:M[se];if(!(!be||be.t=="z"))if(be.t=="n")(be.v|0)==be.v&&be.v>=-32768&&be.v<=32767?gr(ne,13,p(K,H,be.v)):gr(ne,14,g(K,H,be.v));else{var ue=uf(be);gr(ne,15,h(K,H,ue.slice(0,239)))}}return gr(ne,1),ne.end()}function s(M,z){var ee=z||{};if(+ee.codepage>=0&&_d(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=gl();gr(ne,0,o(M));for(var W=0,re=0;W<M.SheetNames.length;++W)(M.Sheets[M.SheetNames[W]]||{})["!ref"]&&gr(ne,27,Z(M.SheetNames[W],re++));var le=0;for(W=0;W<M.SheetNames.length;++W){var te=M.Sheets[M.SheetNames[W]];if(!(!te||!te["!ref"])){for(var K=Wa(te["!ref"]),de=Array.isArray(te),H=[],se=Math.min(K.e.r,8191),be=K.s.r;be<=se;++be)for(var ue=Ws(be),oe=K.s.c;oe<=K.e.c;++oe){be===K.s.r&&(H[oe]=ms(oe));var ge=H[oe]+ue,Ne=de?(te[be]||[])[oe]:te[ge];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")gr(ne,23,F(be,oe,le,Ne.v));else{var Me=uf(Ne);gr(ne,22,E(be,oe,le,Me.slice(0,239)))}}++le}}return gr(ne,1),ne.end()}function i(M){var z=Ht(2);return z.write_shift(2,M),z}function o(M){var z=Ht(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var ee=0,ne=0,W=0,re=0;re<M.SheetNames.length;++re){var le=M.SheetNames[re],te=M.Sheets[le];if(!(!te||!te["!ref"])){++W;var K=jl(te["!ref"]);ee<K.e.r&&(ee=K.e.r),ne<K.e.c&&(ne=K.e.c)}}return ee>8191&&(ee=8191),z.write_shift(2,ee),z.write_shift(1,W),z.write_shift(1,ne),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function l(M,z,ee){var ne={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&ee.qpro?(ne.s.c=M.read_shift(1),M.l++,ne.s.r=M.read_shift(2),ne.e.c=M.read_shift(1),M.l++,ne.e.r=M.read_shift(2),ne):(ne.s.c=M.read_shift(2),ne.s.r=M.read_shift(2),z==12&&ee.qpro&&(M.l+=2),ne.e.c=M.read_shift(2),ne.e.r=M.read_shift(2),z==12&&ee.qpro&&(M.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function c(M){var z=Ht(8);return z.write_shift(2,M.s.c),z.write_shift(2,M.s.r),z.write_shift(2,M.e.c),z.write_shift(2,M.e.r),z}function d(M,z,ee){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return ee.qpro&&ee.vers!=20768?(ne[0].c=M.read_shift(1),ne[3]=M.read_shift(1),ne[0].r=M.read_shift(2),M.l+=2):(ne[2]=M.read_shift(1),ne[0].c=M.read_shift(2),ne[0].r=M.read_shift(2)),ne}function u(M,z,ee){var ne=M.l+z,W=d(M,z,ee);if(W[1].t="s",ee.vers==20768){M.l++;var re=M.read_shift(1);return W[1].v=M.read_shift(re,"utf8"),W}return ee.qpro&&M.l++,W[1].v=M.read_shift(ne-M.l,"cstr"),W}function h(M,z,ee){var ne=Ht(7+ee.length);ne.write_shift(1,255),ne.write_shift(2,z),ne.write_shift(2,M),ne.write_shift(1,39);for(var W=0;W<ne.length;++W){var re=ee.charCodeAt(W);ne.write_shift(1,re>=128?95:re)}return ne.write_shift(1,0),ne}function f(M,z,ee){var ne=d(M,z,ee);return ne[1].v=M.read_shift(2,"i"),ne}function p(M,z,ee){var ne=Ht(7);return ne.write_shift(1,255),ne.write_shift(2,z),ne.write_shift(2,M),ne.write_shift(2,ee,"i"),ne}function v(M,z,ee){var ne=d(M,z,ee);return ne[1].v=M.read_shift(8,"f"),ne}function g(M,z,ee){var ne=Ht(13);return ne.write_shift(1,255),ne.write_shift(2,z),ne.write_shift(2,M),ne.write_shift(8,ee,"f"),ne}function b(M,z,ee){var ne=M.l+z,W=d(M,z,ee);if(W[1].v=M.read_shift(8,"f"),ee.qpro)M.l=ne;else{var re=M.read_shift(2);k(M.slice(M.l,M.l+re),W),M.l+=re}return W}function y(M,z,ee){var ne=z&32768;return z&=-32769,z=(ne?M:0)+(z>=8192?z-16384:z),(ne?"":"$")+(ee?ms(z):Ws(z))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,z){ao(M,0);for(var ee=[],ne=0,W="",re="",le="",te="";M.l<M.length;){var K=M[M.l++];switch(K){case 0:ee.push(M.read_shift(8,"f"));break;case 1:re=y(z[0].c,M.read_shift(2),!0),W=y(z[0].r,M.read_shift(2),!1),ee.push(re+W);break;case 2:{var de=y(z[0].c,M.read_shift(2),!0),H=y(z[0].r,M.read_shift(2),!1);re=y(z[0].c,M.read_shift(2),!0),W=y(z[0].r,M.read_shift(2),!1),ee.push(de+H+":"+re+W)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:ee.push("("+ee.pop()+")");break;case 5:ee.push(M.read_shift(2));break;case 6:{for(var se="";K=M[M.l++];)se+=String.fromCharCode(K);ee.push('"'+se.replace(/"/g,'""')+'"')}break;case 8:ee.push("-"+ee.pop());break;case 23:ee.push("+"+ee.pop());break;case 22:ee.push("NOT("+ee.pop()+")");break;case 20:case 21:te=ee.pop(),le=ee.pop(),ee.push(["AND","OR"][K-20]+"("+le+","+te+")");break;default:if(K<32&&w[K])te=ee.pop(),le=ee.pop(),ee.push(le+w[K]+te);else if(S[K]){if(ne=S[K][1],ne==69&&(ne=M[M.l++]),ne>ee.length){console.error("WK1 bad formula parse 0x"+K.toString(16)+":|"+ee.join("|")+"|");return}var be=ee.slice(-ne);ee.length-=ne,ee.push(S[K][0]+"("+be.join(",")+")")}else return K<=7?console.error("WK1 invalid opcode "+K.toString(16)):K<=24?console.error("WK1 unsupported op "+K.toString(16)):K<=30?console.error("WK1 invalid opcode "+K.toString(16)):K<=115?console.error("WK1 unsupported function opcode "+K.toString(16)):console.error("WK1 unrecognized opcode "+K.toString(16))}}ee.length==1?z[1].f=""+ee[0]:console.error("WK1 bad formula parse |"+ee.join("|")+"|")}function C(M){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=M.read_shift(2),z[3]=M[M.l++],z[0].c=M[M.l++],z}function _(M,z){var ee=C(M);return ee[1].t="s",ee[1].v=M.read_shift(z-4,"cstr"),ee}function E(M,z,ee,ne){var W=Ht(6+ne.length);W.write_shift(2,M),W.write_shift(1,ee),W.write_shift(1,z),W.write_shift(1,39);for(var re=0;re<ne.length;++re){var le=ne.charCodeAt(re);W.write_shift(1,le>=128?95:le)}return W.write_shift(1,0),W}function T(M,z){var ee=C(M);ee[1].v=M.read_shift(2);var ne=ee[1].v>>1;if(ee[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return ee[1].v=ne,ee}function I(M,z){var ee=C(M),ne=M.read_shift(4),W=M.read_shift(4),re=M.read_shift(2);if(re==65535)return ne===0&&W===3221225472?(ee[1].t="e",ee[1].v=15):ne===0&&W===3489660928?(ee[1].t="e",ee[1].v=42):ee[1].v=0,ee;var le=re&32768;return re=(re&32767)-16446,ee[1].v=(1-le*2)*(W*Math.pow(2,re+32)+ne*Math.pow(2,re)),ee}function F(M,z,ee,ne){var W=Ht(14);if(W.write_shift(2,M),W.write_shift(1,ee),W.write_shift(1,z),ne==0)return W.write_shift(4,0),W.write_shift(4,0),W.write_shift(2,65535),W;var re=0,le=0,te=0,K=0;return ne<0&&(re=1,ne=-ne),le=Math.log2(ne)|0,ne/=Math.pow(2,le-31),K=ne>>>0,(K&2147483648)==0&&(ne/=2,++le,K=ne>>>0),ne-=K,K|=2147483648,K>>>=0,ne*=Math.pow(2,32),te=ne>>>0,W.write_shift(4,te),W.write_shift(4,K),le+=16383+(re?32768:0),W.write_shift(2,le),W}function A(M,z){var ee=I(M);return M.l+=z-14,ee}function P(M,z){var ee=C(M),ne=M.read_shift(4);return ee[1].v=ne>>6,ee}function q(M,z){var ee=C(M),ne=M.read_shift(8,"f");return ee[1].v=ne,ee}function V(M,z){var ee=q(M);return M.l+=z-10,ee}function Y(M,z){return M[M.l+z-1]==0?M.read_shift(z,"cstr"):""}function B(M,z){var ee=M[M.l++];ee>z-1&&(ee=z-1);for(var ne="";ne.length<ee;)ne+=String.fromCharCode(M[M.l++]);return ne}function Q(M,z,ee){if(!(!ee.qpro||z<21)){var ne=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var W=M.read_shift(z-21,"cstr");return[ne,W]}}function R(M,z){for(var ee={},ne=M.l+z;M.l<ne;){var W=M.read_shift(2);if(W==14e3){for(ee[W]=[0,""],ee[W][0]=M.read_shift(2);M[M.l];)ee[W][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return ee}function Z(M,z){var ee=Ht(5+M.length);ee.write_shift(2,14e3),ee.write_shift(2,z);for(var ne=0;ne<M.length;++ne){var W=M.charCodeAt(ne);ee[ee.l++]=W>127?95:W}return ee[ee.l++]=0,ee}var J={0:{n:"BOF",f:ii},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:B},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:_},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:R},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:q},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}();function jNe(e){var t={},r=e.match($o),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=sa(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=z4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var NNe=function(){var e=Fy("t"),t=Fy("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Ha(o[1])},c=i.match(t);return c&&(l.s=jNe(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}}(),wNe=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),SNe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,CNe=/<(?:\w+:)?r>/,kNe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function mI(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Ha(_n(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=_n(e),r&&(a.h=eI(a.t))):e.match(CNe)&&(a.r=_n(e),a.t=Ha(_n((e.replace(kNe,"").match(SNe)||[]).join("").replace($o,""))),r&&(a.h=wNe(NNe(a.r)))),a):{t:""}}var ENe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_Ne=/<(?:\w+:)?(?:si|sstItem)>/g,DNe=/<\/(?:\w+:)?(?:si|sstItem)>/;function ANe(e,t){var r=[],a="";if(!e)return r;var s=e.match(ENe);if(s){a=s[2].replace(_Ne,"").split(DNe);for(var i=0;i!=a.length;++i){var o=mI(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=sa(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var TNe=/^\s|\s$|[\t\n\r]/;function GG(e,t){if(!t.bookSST)return"";var r=[Qs];r[r.length]=vr("sst",null,{xmlns:Qx[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(TNe)&&(i+=' xml:space="preserve"'),i+=">"+jn(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function INe(e){return[e.read_shift(4),e.read_shift(4)]}function PNe(e,t){var r=[],a=!1;return yf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function ONe(e,t){return t||(t=Ht(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var MNe=Hye;function RNe(e){var t=gl();or(t,159,ONe(e));for(var r=0;r<e.length;++r)or(t,19,MNe(e[r]));return or(t,160),t.end()}function YG(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Jh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function FNe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Jh(e,4),t.U=Jh(e,4),t.W=Jh(e,4),t}function LNe(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function BNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(LNe(e));return t}function UNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function $Ne(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Jh(e,4),t.U=Jh(e,4),t.W=Jh(e,4),t}function VNe(e){var t=$Ne(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function KG(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function XG(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function qNe(e){var t=Jh(e);switch(t.Minor){case 2:return[t.Minor,zNe(e)];case 3:return[t.Minor,HNe()];case 4:return[t.Minor,WNe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function zNe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=KG(e,r),s=XG(e,e.length-e.l);return{t:"Std",h:a,v:s}}function HNe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function WNe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace($o,function(i){var o=sa(i);switch(ah(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function GNe(e,t){var r={},a=r.EncryptionVersionInfo=Jh(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=KG(e,s),t-=s,r.EncryptionVerifier=XG(e,t),r}function YNe(e){var t={},r=t.EncryptionVersionInfo=Jh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function pI(e){var t=0,r,a=YG(e),s=a.length+1,i,o,l,c,d;for(r=Ym(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var QG=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=YG(o),c=i(l),d=l.length,u=Ym(16),h=0;h!=16;++h)u[h]=0;var f,p,v;for((d&1)===1&&(f=c>>8,u[d]=s(e[0],f),--d,f=c&255,p=l[l.length-1],u[d]=s(p,f));d>0;)--d,f=c>>8,u[d]=s(l[d],f),--d,f=c&255,u[d]=s(l[d],f);for(d=15,v=15-l.length;v>0;)f=c>>8,u[d]=s(e[v],f),--d,--v,f=c&255,u[d]=s(l[d],f),--d,--v;return u}}(),KNe=function(e,t,r,a,s){s||(s=t),a||(a=QG(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},XNe=function(e){var t=0,r=QG(e);return function(a){var s=KNe("",a,t,r);return t=s[1],s[0]}};function QNe(e,t,r,a){var s={key:ii(e),verificationBytes:ii(e)};return r.password&&(s.verifier=pI(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=XNe(r.password)),s}function JNe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=YNe(e):a.Data=GNe(e,t),a}function ZNe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?JNe(e,t-2,a):QNe(e,r.biff>=8?t:t-2,r,a),a}var JG=function(){function e(s,i){switch(i.type){case"base64":return t(dc(s),i);case"binary":return t(s,i);case"buffer":return t(wa&&Buffer.isBuffer(s)?s.toString("binary"):cp(s),i);case"array":return t(Mx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,p=0,v,g=-1;v=f.exec(u);){switch(v[0]){case"\\cell":var b=u.slice(p,f.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][g]=y:l[ra({r:h,c:g})]=y}break}p=f.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=pa(d),l}function r(s,i){return dp(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Wa(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=ra({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(uf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function ewe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function $y(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function twe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function rwe(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function v2(e,t){if(t===0)return e;var r=twe(ewe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),$y(rwe(r))}var ZG=6,awe=15,nwe=1,Do=ZG;function Vy(e){return Math.floor((e+Math.round(128/Do)/256)*Do)}function qy(e){return Math.floor((e-5)/Do*100+.5)/100}function g2(e){return Math.round((e*Do+5)/Do*256)/256}function U_(e){return g2(qy(Vy(e)))}function xI(e){var t=Math.abs(e-U_(e)),r=Do;if(t>.005)for(Do=nwe;Do<awe;++Do)Math.abs(e-U_(e))<=t&&(t=Math.abs(e-U_(e)),r=Do);Do=r}function Km(e){e.width?(e.wpx=Vy(e.width),e.wch=qy(e.wpx),e.MDW=Do):e.wpx?(e.wch=qy(e.wpx),e.width=g2(e.wch),e.MDW=Do):typeof e.wch=="number"&&(e.width=g2(e.wch),e.wpx=Vy(e.width),e.MDW=Do),e.customWidth&&delete e.customWidth}var swe=96,eY=swe;function zy(e){return e*96/eY}function Q0(e){return e*eY/96}var iwe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function owe(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match($o)||[]).forEach(function(o){var l=sa(o);switch(ah(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Hn(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Hn(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function lwe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match($o)||[]).forEach(function(o){var l=sa(o);switch(ah(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function cwe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match($o)||[]).forEach(function(o){var l=sa(o);switch(ah(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=_n(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Hn(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Hn(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Hn(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Hn(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Hn(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Hn(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Hn(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=z4[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Hn(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=bx[s.color.index];s.color.index==81&&(c=bx[1]),c||(c=bx[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=v2(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function dwe(e,t,r){t.NumberFmt=[];for(var a=As(Zr),s=0;s<a.length;++s)t.NumberFmt[a[s]]=Zr[a[s]];var i=e[0].match($o);if(i)for(s=0;s<i.length;++s){var o=sa(i[s]);switch(ah(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Ha(_n(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Qh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function uwe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=vr("numFmt",null,{numFmtId:a,formatCode:jn(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=vr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gN=["numFmtId","fillId","fontId","borderId","xfId"],bN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function hwe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match($o)||[]).forEach(function(i){var o=sa(i),l=0;switch(ah(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<gN.length;++l)a[gN[l]]&&(a[gN[l]]=parseInt(a[gN[l]],10));for(l=0;l<bN.length;++l)a[bN[l]]&&(a[bN[l]]=Hn(a[bN[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Hn(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function fwe(e){var t=[];return t[t.length]=vr("cellXfs",null),e.forEach(function(r){t[t.length]=vr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=vr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var mwe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&dwe(h,u,d),(h=l.match(s))&&cwe(h,u,c,d),(h=l.match(a))&&lwe(h,u,c,d),(h=l.match(i))&&owe(h,u,c,d),(h=l.match(r))&&hwe(h,u,d),u}}();function tY(e,t){var r=[Qs,vr("styleSheet",null,{xmlns:Qx[0],"xmlns:vt":xi.vt})],a;return e.SSF&&(a=uwe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=fwe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function pwe(e,t){var r=e.read_shift(2),a=Lo(e);return[r,a]}function xwe(e,t,r){r||(r=Ht(6+4*t.length)),r.write_shift(2,e),Ui(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function vwe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Jye(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Qye(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Lo(e),a}function gwe(e,t){t||(t=Ht(25+4*32)),t.write_shift(2,e.sz*20),Zye(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),m2(e.color,t);var a=0;return a=2,t.write_shift(1,a),Ui(e.name,t),t.length>t.l?t.slice(0,t.l):t}var bwe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],$_,ywe=Bo;function _B(e,t){t||(t=Ht(4*3+8*7+16*1)),$_||($_=tC(bwe));var r=$_[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(m2({auto:1},t),m2({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function jwe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function rY(e,t,r){r||(r=Ht(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ob(e,t){return t||(t=Ht(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Nwe=Bo;function wwe(e,t){return t||(t=Ht(51)),t.write_shift(1,0),Ob(null,t),Ob(null,t),Ob(null,t),Ob(null,t),Ob(null,t),t.length>t.l?t.slice(0,t.l):t}function Swe(e,t){return t||(t=Ht(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),f2(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Cwe(e,t,r){var a=Ht(2052);return a.write_shift(4,e),f2(t,a),f2(r,a),a.length>a.l?a.slice(0,a.l):a}function kwe(e,t,r){var a={};a.NumberFmt=[];for(var s in Zr)a.NumberFmt[s]=Zr[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return yf(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Qh(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=v2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function Ewe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(or(e,615,Id(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&or(e,44,xwe(s,t[s]))}),or(e,616))}}function _we(e){var t=1;or(e,611,Id(t)),or(e,43,gwe({sz:12,color:{theme:1},name:"Calibri",family:2})),or(e,612)}function Dwe(e){var t=2;or(e,603,Id(t)),or(e,45,_B({patternType:"none"})),or(e,45,_B({patternType:"gray125"})),or(e,604)}function Awe(e){var t=1;or(e,613,Id(t)),or(e,46,wwe()),or(e,614)}function Twe(e){var t=1;or(e,626,Id(t)),or(e,47,rY({numFmtId:0},65535)),or(e,627)}function Iwe(e,t){or(e,617,Id(t.length)),t.forEach(function(r){or(e,47,rY(r,0))}),or(e,618)}function Pwe(e){var t=1;or(e,619,Id(t)),or(e,48,Swe({xfId:0,name:"Normal"})),or(e,620)}function Owe(e){var t=0;or(e,505,Id(t)),or(e,506)}function Mwe(e){var t=0;or(e,508,Cwe(t,"TableStyleMedium9","PivotStyleMedium4")),or(e,509)}function Rwe(e,t){var r=gl();return or(r,278),Ewe(r,e.SSF),_we(r),Dwe(r),Awe(r),Twe(r),Iwe(r,t.cellXfs),Pwe(r),Owe(r),Mwe(r),or(r,279),r.end()}var Fwe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Lwe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match($o)||[]).forEach(function(s){var i=sa(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Fwe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Bwe(){}function Uwe(){}var $we=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Vwe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,qwe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zwe(e,t,r){t.themeElements={};var a;[["clrScheme",$we,Lwe],["fontScheme",Vwe,Bwe],["fmtScheme",qwe,Uwe]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var Hwe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function aY(e,t){(!e||e.length===0)&&(e=vI());var r,a={};if(!(r=e.match(Hwe)))throw new Error("themeElements not found in theme");return zwe(r[0],a,t),a.raw=e,a}function vI(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Qs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Wwe(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=KW(i,{type:"array"})}catch{return}var l=Zl(o,"theme/theme/theme1.xml",!0);if(l)return aY(l,r)}}function Gwe(e){return e.read_shift(4)}function Ywe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Kwe(e,4);break;case 2:t.xclrValue=RG(e);break;case 3:t.xclrValue=Gwe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Kwe(e,t){return Bo(e,t)}function Xwe(e,t){return Bo(e,t)}function Qwe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=Ywe(e);break;case 6:a[1]=Xwe(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function Jwe(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Qwe(e,r-e.l));return{ixfe:a,ext:i}}function Zwe(e,t){t.forEach(function(r){r[0]})}function e2e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Lo(e)}}function t2e(e){var t=Ht(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ui(e.name,t),t.slice(0,t.l)}function r2e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function a2e(e){var t=Ht(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function n2e(e,t){var r=Ht(8+2*t.length);return r.write_shift(4,e),Ui(t,r),r.slice(0,r.l)}function s2e(e){return e.l+=4,e.read_shift(4)!=0}function i2e(e,t){var r=Ht(8);return r.write_shift(4,e),r.write_shift(4,1),r}function o2e(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return yf(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?a.Cell.push({type:a.Types[h[0]-1].name,index:h[1]}):l==0&&a.Value.push({type:a.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function l2e(){var e=gl();return or(e,332),or(e,334,Id(1)),or(e,335,t2e({name:"XLDAPR",version:12e4,flags:3496657072})),or(e,336),or(e,339,n2e(1,"XLDAPR")),or(e,52),or(e,35,Id(514)),or(e,4096,Id(0)),or(e,4097,Mc(1)),or(e,36),or(e,53),or(e,340),or(e,337,i2e(1)),or(e,51,a2e([[1,0]])),or(e,338),or(e,333),e.end()}function c2e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace($o,function(l){var c=sa(l);switch(ah(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function nY(){var e=[Qs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function d2e(e){var t=[];if(!e)return t;var r=1;return(e.match($o)||[]).forEach(function(a){var s=sa(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function u2e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ra(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function h2e(e,t,r){var a=[];return yf(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function f2e(e,t,r,a){if(!e)return e;var s=a||{},i=!1;yf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function m2e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var v0=1024;function sY(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[vr("xml",null,{"xmlns:v":Yl.v,"xmlns:o":Yl.o,"xmlns:x":Yl.x,"xmlns:mv":Yl.mv}).replace(/\/>/,">"),vr("o:shapelayout",vr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vr("v:shapetype",[vr("v:stroke",null,{joinstyle:"miter"}),vr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];v0<e*1e3;)v0+=1e3;return t.forEach(function(i){var o=ps(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?vr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=vr("v:fill",c,l),u={on:"t",obscured:"t"};++v0,s=s.concat(["<v:shape"+Ly({id:"_x0000_s"+v0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,vr("v:shadow",null,u),vr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",io("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),io("x:AutoFill","False"),io("x:Row",String(o.r)),io("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function DB(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=ps(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Wa(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=pa(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&a){for(h=0;h<a.length;++h)if(u.a==a[h].id){u.a=a[h].name||u.a;break}}i.c.push(u)})}function p2e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=sa(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=ps(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&mI(h[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=f.h),a.push(d)}}}}),a}function iY(e){var t=[Qs,vr("comments",null,{xmlns:Qx[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=jn(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(jn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(io("t",jn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(io("t",jn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function x2e(e,t){var r=[],a=!1,s={},i=0;return e.replace($o,function(l,c){var d=sa(l);switch(ah(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function v2e(e,t,r){var a=[Qs,vr("ThreadedComments",null,{xmlns:xi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(vr("threadedComment",io("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function g2e(e,t){var r=[],a=!1;return e.replace($o,function(i){var o=sa(i);switch(ah(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function b2e(e){var t=[Qs,vr("personList",null,{xmlns:xi.TCMNT,"xmlns:x":Qx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(vr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function y2e(e){var t={};t.iauthor=e.read_shift(4);var r=tv(e);return t.rfx=r.s,t.ref=ra(r.s),e.l+=16,t}function j2e(e,t){return t==null&&(t=Ht(36)),t.write_shift(4,e[1].iauthor),_g(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var N2e=Lo;function w2e(e){return Ui(e.slice(0,54))}function S2e(e,t){var r=[],a=[],s={},i=!1;return yf(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function C2e(e){var t=gl(),r=[];return or(t,628),or(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),or(t,632,w2e(s.a)))})}),or(t,631),or(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:ps(a[0]),e:ps(a[0])};or(t,635,j2e([i,s])),s.t&&s.t.length>0&&or(t,637,Gye(s)),or(t,636),delete s.iauthor})}),or(t,634),or(t,629),t.end()}var k2e="application/vnd.ms-office.vbaProject";function E2e(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Hr.write(t)}function _2e(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var oY=["xlsb","xlsm","xlam","biff8","xla"];function D2e(){return{"!type":"dialog"}}function A2e(){return{"!type":"dialog"}}function T2e(){return{"!type":"macro"}}function I2e(){return{"!type":"macro"}}var S0=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+ms(u)+(c?"":"$")+Ws(d)}return function(s,i){return t=i,s.replace(e,r)}}(),gI=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,bI=function(){return function(t,r){return t.replace(gI,function(a,s,i,o,l,c){var d=sI(o)-(i?0:r.c),u=nI(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return s+"R"+h+"C"+f})}}();function lY(e,t){return e.replace(gI,function(r,a,s,i,o,l){return a+(s=="$"?s+i:ms(sI(i)+t.c))+(o=="$"?o+l:Ws(nI(l)+t.r))})}function P2e(e,t,r){var a=jl(t),s=a.s,i=ps(r),o={r:i.r-s.r,c:i.c-s.c};return lY(e,o)}function O2e(e){return e.length!=1}function AB(e){return e.replace(/_xlfn\./g,"")}function ai(e){e.l+=1}function Xm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function cY(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return dY(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=Xm(e),l=Xm(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function dY(e){var t=Xm(e),r=Xm(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function M2e(e,t,r){if(r.biff<8)return dY(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Xm(e),o=Xm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function uY(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return R2e(e);var a=e.read_shift(r&&r.biff==12?4:2),s=Xm(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function R2e(e){var t=Xm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function F2e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function L2e(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return B2e(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function B2e(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function U2e(e,t,r){var a=(e[e.l++]&96)>>5,s=cY(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function $2e(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=cY(e,i,r);return[a,s,o]}function V2e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function q2e(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function z2e(e,t,r){var a=(e[e.l++]&96)>>5,s=M2e(e,t-1,r);return[a,s]}function H2e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function TB(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function W2e(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function G2e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Y2e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function K2e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function X2e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function hY(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Q2e(e){return e.read_shift(2),hY(e)}function J2e(e){return e.read_shift(2),hY(e)}function Z2e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=uY(e,0,r);return[a,s]}function eSe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=L2e(e,0,r);return[a,s]}function tSe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=uY(e,0,r);return[a,s,i]}function rSe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[sCe[s],pY[s],a]}function aSe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:nSe(e);return[s,(i[0]===0?pY:nCe)[i[1]]]}function nSe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function sSe(e,t,r){e.l+=r&&r.biff==2?3:4}function iSe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function oSe(e){return e.l++,jf[e.read_shift(1)]}function lSe(e){return e.l++,e.read_shift(2)}function cSe(e){return e.l++,e.read_shift(1)!==0}function dSe(e){return e.l++,Io(e)}function uSe(e,t,r){return e.l++,D1(e,t-1,r)}function hSe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Us(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=jf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Io(e);break;case 2:r[1]=rv(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function fSe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?tv:nC)(e));return s}function mSe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=hSe(e,r.biff);return o}function pSe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function xSe(e,t,r){if(r.biff==5)return vSe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function vSe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function gSe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function bSe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function ySe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function jSe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var NSe=Bo,wSe=Bo,SSe=Bo;function T1(e,t,r){return e.l+=2,[F2e(e)]}function yI(e){return e.l+=6,[]}var CSe=T1,kSe=yI,ESe=yI,_Se=T1;function fY(e){return e.l+=2,[ii(e),e.read_shift(2)&1]}var DSe=T1,ASe=fY,TSe=yI,ISe=T1,PSe=T1,OSe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function MSe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=OSe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function RSe(e){return e.l+=2,[e.read_shift(4)]}function FSe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function LSe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function BSe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function USe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $Se(e){return e.l+=4,[0,0]}var IB={1:{n:"PtgExp",f:iSe},2:{n:"PtgTbl",f:SSe},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:uSe},26:{n:"PtgSheet",f:FSe},27:{n:"PtgEndSheet",f:LSe},28:{n:"PtgErr",f:oSe},29:{n:"PtgBool",f:cSe},30:{n:"PtgInt",f:lSe},31:{n:"PtgNum",f:dSe},32:{n:"PtgArray",f:H2e},33:{n:"PtgFunc",f:rSe},34:{n:"PtgFuncVar",f:aSe},35:{n:"PtgName",f:pSe},36:{n:"PtgRef",f:Z2e},37:{n:"PtgArea",f:U2e},38:{n:"PtgMemArea",f:gSe},39:{n:"PtgMemErr",f:NSe},40:{n:"PtgMemNoMem",f:wSe},41:{n:"PtgMemFunc",f:bSe},42:{n:"PtgRefErr",f:ySe},43:{n:"PtgAreaErr",f:V2e},44:{n:"PtgRefN",f:eSe},45:{n:"PtgAreaN",f:z2e},46:{n:"PtgMemAreaN",f:BSe},47:{n:"PtgMemNoMemN",f:USe},57:{n:"PtgNameX",f:xSe},58:{n:"PtgRef3d",f:tSe},59:{n:"PtgArea3d",f:$2e},60:{n:"PtgRefErr3d",f:jSe},61:{n:"PtgAreaErr3d",f:q2e},255:{}},VSe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},qSe={1:{n:"PtgElfLel",f:fY},2:{n:"PtgElfRw",f:ISe},3:{n:"PtgElfCol",f:CSe},6:{n:"PtgElfRwV",f:PSe},7:{n:"PtgElfColV",f:_Se},10:{n:"PtgElfRadical",f:DSe},11:{n:"PtgElfRadicalS",f:TSe},13:{n:"PtgElfColS",f:kSe},15:{n:"PtgElfColSV",f:ESe},16:{n:"PtgElfRadicalLel",f:ASe},25:{n:"PtgList",f:MSe},29:{n:"PtgSxName",f:RSe},255:{}},zSe={0:{n:"PtgAttrNoop",f:$Se},1:{n:"PtgAttrSemi",f:X2e},2:{n:"PtgAttrIf",f:Y2e},4:{n:"PtgAttrChoose",f:W2e},8:{n:"PtgAttrGoto",f:G2e},16:{n:"PtgAttrSum",f:sSe},32:{n:"PtgAttrBaxcel",f:TB},33:{n:"PtgAttrBaxcel",f:TB},64:{n:"PtgAttrSpace",f:Q2e},65:{n:"PtgAttrSpaceSemi",f:J2e},128:{n:"PtgAttrIfError",f:K2e},255:{}};function I1(e,t,r,a){if(a.biff<8)return Bo(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=mSe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=fSe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Bo(e,t)),i}function P1(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=IB[i]||IB[VSe[i]],(i===24||i===25)&&(s=(i===24?qSe:zSe)[e[e.l+1]]),!s||!s.f?Bo(e,t):o.push([s.n,s.f(e,t,r)]);return o}function HSe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var WSe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function GSe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function mY(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function PB(e,t,r){var a=mY(e,t,r);return a=="#REF"?a:GSe(a,r)}function ko(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,h=0,f=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,S=e[0].length;y<S;++y){var w=e[0][y];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=Es(" ",e[0][g][1][1]);break;case 1:b=Es("\r",e[0][g][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+b,g=-1}l.push(d+WSe[w[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ly(w[1][1],o,s),l.push(cy(u,i));break;case"PtgRefN":u=r?ly(w[1][1],r,s):w[1][1],l.push(cy(u,i));break;case"PtgRef3d":h=w[1][1],u=ly(w[1][2],o,s),v=PB(a,h,s),l.push(v+"!"+cy(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=w[1][0],C=w[1][1];k||(k=0),k&=127;var _=k==0?[]:l.slice(-k);l.length-=k,C==="User"&&(C=_.shift()),l.push(C+"("+_.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":p=lB(w[1][1],r?{s:r}:o,s),l.push(F_(p,s));break;case"PtgArea":p=lB(w[1][1],o,s),l.push(F_(p,s));break;case"PtgArea3d":h=w[1][1],p=w[1][2],v=PB(a,h,s),l.push(v+"!"+F_(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=w[1][2];var E=(a.names||[])[f-1]||(a[0]||[])[f],T=E?E.Name:"SH33TJSNAME"+String(f);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var I=w[1][1];f=w[1][2];var F;if(s.biff<=5)I<0&&(I=-I),a[I]&&(F=a[I][f]);else{var A="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][f]&&a[I][f].itab>0&&(A=a.SheetNames[a[I][f].itab-1]+"!"):A=a.SheetNames[f-1]+"!"),a[I]&&a[I][f])A+=a[I][f].Name;else if(a[0]&&a[0][f])A+=a[0][f].Name;else{var P=(mY(a,I,s)||"").split(";;");P[f-1]?A=P[f-1]:A+="SH33TJSERRX"}l.push(A);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var q="(",V=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:q=Es(" ",e[0][g][1][1])+q;break;case 3:q=Es("\r",e[0][g][1][1])+q;break;case 4:V=Es(" ",e[0][g][1][1])+V;break;case 5:V=Es("\r",e[0][g][1][1])+V;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(q+l.pop()+V);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:w[1][1],r:w[1][0]};var Y={c:r.c,r:r.r};if(a.sharedf[ra(u)]){var B=a.sharedf[ra(u)];l.push(ko(B,o,Y,a,s))}else{var Q=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(ko(d[1],o,Y,a,s)),Q=!0;break}Q||l.push(w[1])}break;case"PtgArray":l.push("{"+HSe(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var R=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&R.indexOf(e[0][y][0])==-1){w=e[0][g];var Z=!0;switch(w[1][0]){case 4:Z=!1;case 0:b=Es(" ",w[1][1]);break;case 5:Z=!1;case 1:b=Es("\r",w[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((Z?b:"")+l.pop()+(Z?"":b)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function YSe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Bo(e,t-2)];var l=P1(e,o,r);return t!==o+s&&(i=I1(e,t-o-s,l,r)),e.l=a,[l,i]}function KSe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Bo(e,t-2)];var l=P1(e,o,r);return t!==o+s&&(i=I1(e,t-o-s,l,r)),e.l=a,[l,i]}function XSe(e,t,r,a){var s=e.l+t,i=P1(e,a,r),o;return s!==e.l&&(o=I1(e,s-e.l,i,r)),[i,o]}function QSe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=P1(e,i,r);return i==65535?[[],Bo(e,t-2)]:(t!==i+2&&(s=I1(e,a-i-2,o,r)),[o,s])}function JSe(e){var t;if(Wh(e,e.l+6)!==65535)return[Io(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function ZSe(e){if(e==null){var t=Ht(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Rx(e);return Rx(0)}function V_(e,t,r){var a=e.l+t,s=nh(e);r.biff==2&&++e.l;var i=JSe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=KSe(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function eCe(e,t,r,a,s){var i=Lx(t,r,s),o=ZSe(e.v),l=Ht(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Ht(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var h=Li([i,o,l,d]);return h}function sC(e,t,r){var a=e.read_shift(4),s=P1(e,a,r),i=e.read_shift(4),o=i>0?I1(e,i,s,r):null;return[s,o]}var tCe=sC,iC=sC,rCe=sC,aCe=sC,nCe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},pY={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},sCe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function OB(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function iCe(e){var t="of:="+e.replace(gI,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function q_(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function oCe(e){return e.replace(/\./,"!")}var uy={},C0={},hy=typeof Map<"u";function jI(e,t,r){var a=0,s=e.length;if(r){if(hy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=hy?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(hy?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function oC(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Do=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=qy(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=g2(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Nx(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function up(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Qh(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function xY(e,t,r,a,s,i){try{a.cellNF&&(e.z=Zr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Yn(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(Zr[t]==null&&Qh(nye[t]||"General",t),e.t==="e")e.w=e.w||jf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ry(e.v);else if(e.t==="d"){var o=bi(e.v);(o|0)===o?e.w=o.toString(10):e.w=Ry(o)}else{if(e.v===void 0)return"";e.w=Ox(e.v,C0)}else e.t==="d"?e.w=Gc(t,bi(e.v),C0):e.w=Gc(t,e.v,C0)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=v2(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=v2(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function lCe(e,t,r){if(e&&e["!ref"]){var a=Wa(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function cCe(e,t){var r=Wa(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=pa(r))}var dCe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,uCe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hCe=/<(?:\w:)?hyperlink [^>]*>/mg,fCe=/"(\w*:\w*)"/,mCe=/<(?:\w:)?col\b[^>]*[\/]?>/g,pCe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,xCe=/<(?:\w:)?pageMargins[^>]*\/>/g,vY=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,vCe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,gCe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function bCe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(uCe);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var f=d.match(vY);f?NI(f[0],l,s,r):(f=d.match(vCe))&&jCe(f[0],f[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=d.slice(p,p+50).match(fCe);v&&cCe(l,v[1])}var g=d.match(gCe);g&&g[1]&&OCe(g[1],s);var b=[];if(t.cellStyles){var y=d.match(mCe);y&&DCe(b,y)}h&&FCe(h[1],l,t,c,i,o);var S=u.match(pCe);S&&(l["!autofilter"]=TCe(S[0]));var w=[],k=u.match(dCe);if(k)for(p=0;p!=k.length;++p)w[p]=Wa(k[p].slice(k[p].indexOf('"')+1));var C=u.match(hCe);C&&kCe(l,C,a);var _=u.match(xCe);if(_&&(l["!margins"]=ECe(sa(_[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=pa(c)),t.sheetRows>0&&l["!ref"]){var E=Wa(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=pa(E))}return b.length>0&&(l["!cols"]=b),w.length>0&&(l["!merges"]=w),l}function yCe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+pa(e[r])+'"/>';return t+"</mergeCells>"}function NI(e,t,r,a){var s=sa(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=Ha(_n(s.codeName)))}function jCe(e,t,r,a,s){NI(e.slice(0,e.indexOf(">")),r,a,s)}function NCe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Bu(jn(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+vr("outlinePr",null,d)}!i&&!l||(s[s.length]=vr("sheetPr",l,o))}var wCe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],SCe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function CCe(e){var t={sheet:1};return wCe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),SCe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=pI(e.password).toString(16).toUpperCase()),vr("sheetProtection",null,t)}function kCe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=sa(_n(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Ha(i.location))):(i.Target="#"+Ha(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Wa(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=ra({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function ECe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _Ce(e){return Nx(e),vr("pageMargins",null,e)}function DCe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=sa(t[a],!0);s.hidden&&(s.hidden=Hn(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,xI(s.width)),Km(s);i<=o;)e[i++]=Kn(s)}}function ACe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=vr("col",null,oC(s,a)));return r[r.length]="</cols>",r.join("")}function TCe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function ICe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:pa(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=jl(s);o.s.r==o.e.r&&(o.e.r=jl(t["!ref"]).e.r,s=pa(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),vr("autoFilter",null,{ref:s})}var PCe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function OCe(e,t){t.Views||(t.Views=[{}]),(e.match(PCe)||[]).forEach(function(r,a){var s=sa(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),Hn(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function MCe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),vr("sheetViews",vr("sheetView",null,s),{})}function RCe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=jf[e.v];break;case"d":a&&a.cellDates?s=Yn(e.v,-1).toISOString():(e=Kn(e),e.t="n",s=""+(e.v=bi(Yn(e.v)))),typeof e.z>"u"&&(e.z=Zr[14]);break;default:s=e.v;break}var l=io("v",jn(s)),c={r:t},d=up(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=io("v",""+jI(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=vr("f",jn(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),vr("c",l,c)}var FCe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Fy("v"),o=Fy("f");return function(c,d,u,h,f,p){for(var v=0,g="",b=[],y=[],S=0,w=0,k=0,C="",_,E,T=0,I=0,F,A,P=0,q=0,V=Array.isArray(p.CellXf),Y,B=[],Q=[],R=Array.isArray(d),Z=[],J={},ie=!1,M=!!u.sheetStubs,z=c.split(t),ee=0,ne=z.length;ee!=ne;++ee){g=z[ee].trim();var W=g.length;if(W!==0){var re=0;e:for(v=0;v<W;++v)switch(g[v]){case">":if(g[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(E=sa(g.slice(re,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,I=-1,u.sheetRows&&u.sheetRows<T)continue;J={},ie=!1,E.ht&&(ie=!0,J.hpt=parseFloat(E.ht),J.hpx=Q0(J.hpt)),E.hidden=="1"&&(ie=!0,J.hidden=!0),E.outlineLevel!=null&&(ie=!0,J.level=+E.outlineLevel),ie&&(Z[T-1]=J)}break;case"<":re=v;break}if(re>=v)break;if(E=sa(g.slice(re,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,I=-1,!(u.sheetRows&&u.sheetRows<T)){h.s.r>T-1&&(h.s.r=T-1),h.e.r<T-1&&(h.e.r=T-1),u&&u.cellStyles&&(J={},ie=!1,E.ht&&(ie=!0,J.hpt=parseFloat(E.ht),J.hpx=Q0(J.hpt)),E.hidden=="1"&&(ie=!0,J.hidden=!0),E.outlineLevel!=null&&(ie=!0,J.level=+E.outlineLevel),ie&&(Z[T-1]=J)),b=g.slice(v).split(e);for(var le=0;le!=b.length&&b[le].trim().charAt(0)=="<";++le);for(b=b.slice(le),v=0;v!=b.length;++v)if(g=b[v].trim(),g.length!==0){if(y=g.match(r),S=v,w=0,k=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(S=0,C=y[1],w=0;w!=C.length&&!((k=C.charCodeAt(w)-64)<1||k>26);++w)S=26*S+k;--S,I=S}else++I;for(w=0;w!=g.length&&g.charCodeAt(w)!==62;++w);if(++w,E=sa(g.slice(0,w),!0),E.r||(E.r=ra({r:T-1,c:I})),C=g.slice(w),_={t:""},(y=C.match(i))!=null&&y[1]!==""&&(_.v=Ha(y[1])),u.cellFormula){if((y=C.match(o))!=null&&y[1]!==""){if(_.f=Ha(_n(y[1])).replace(/\r\n/g,`
`),u.xlfn||(_.f=AB(_.f)),y[0].indexOf('t="array"')>-1)_.F=(C.match(s)||[])[1],_.F.indexOf(":")>-1&&B.push([Wa(_.F),_.F]);else if(y[0].indexOf('t="shared"')>-1){A=sa(y[0]);var te=Ha(_n(y[1]));u.xlfn||(te=AB(te)),Q[parseInt(A.si,10)]=[A,te,E.r]}}else(y=C.match(/<f[^>]*\/>/))&&(A=sa(y[0]),Q[A.si]&&(_.f=P2e(Q[A.si][1],Q[A.si][2],E.r)));var K=ps(E.r);for(w=0;w<B.length;++w)K.r>=B[w][0].s.r&&K.r<=B[w][0].e.r&&K.c>=B[w][0].s.c&&K.c<=B[w][0].e.c&&(_.F=B[w][1])}if(E.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(M)_.t="z";else continue;else _.t=E.t||"n";switch(h.s.c>I&&(h.s.c=I),h.e.c<I&&(h.e.c=I),_.t){case"n":if(_.v==""||_.v==null){if(!M)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!M)continue;_.t="z"}else F=uy[parseInt(_.v,10)],_.v=F.t,_.r=F.r,u.cellHTML&&(_.h=F.h);break;case"str":_.t="s",_.v=_.v!=null?_n(_.v):"",u.cellHTML&&(_.h=eI(_.v));break;case"inlineStr":y=C.match(a),_.t="s",y!=null&&(F=mI(y[1]))?(_.v=F.t,u.cellHTML&&(_.h=F.h)):_.v="";break;case"b":_.v=Hn(_.v);break;case"d":u.cellDates?_.v=Yn(_.v,1):(_.v=bi(Yn(_.v,1)),_.t="n");break;case"e":(!u||u.cellText!==!1)&&(_.w=_.v),_.v=bG[_.v];break}if(P=q=0,Y=null,V&&E.s!==void 0&&(Y=p.CellXf[E.s],Y!=null&&(Y.numFmtId!=null&&(P=Y.numFmtId),u.cellStyles&&Y.fillId!=null&&(q=Y.fillId))),xY(_,P,q,u,f,p),u.cellDates&&V&&_.t=="n"&&Cg(Zr[P])&&(_.t="d",_.v=aC(_.v)),E.cm&&u.xlmeta){var de=(u.xlmeta.Cell||[])[+E.cm-1];de&&de.type=="XLDAPR"&&(_.D=!0)}if(R){var H=ps(E.r);d[H.r]||(d[H.r]=[]),d[H.r][H.c]=_}else d[E.r]=_}}}}Z.length>0&&(d["!rows"]=Z)}}();function LCe(e,t,r,a){var s=[],i=[],o=Wa(e["!ref"]),l="",c,d="",u=[],h=0,f=0,p=e["!rows"],v=Array.isArray(e),g={r:d},b,y=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=ms(f);for(h=o.s.r;h<=o.e.r;++h){for(i=[],d=Ws(h),f=o.s.c;f<=o.e.c;++f){c=u[f]+d;var S=v?(e[h]||[])[f]:e[c];S!==void 0&&(l=RCe(S,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[h])&&(g={r:d},p&&p[h]&&(b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=zy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),s[s.length]=vr("row",i.join(""),g))}if(p)for(;h<p.length;++h)p&&p[h]&&(g={r:h+1},b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=zy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),s[s.length]=vr("row","",g));return s.join("")}function gY(e,t,r,a){var s=[Qs,vr("worksheet",null,{xmlns:Qx[0],"xmlns:r":xi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Wa(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=pa(u)}a||(a={}),c["!comments"]=[];var h=[];NCe(c,r,e,t,s),s[s.length]=vr("dimension",null,{ref:d}),s[s.length]=MCe(c,t,e,r),t.sheetFormat&&(s[s.length]=vr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=ACe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=LCe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=CCe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=ICe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=yCe(c["!merges"]));var f=-1,p,v=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=bn(a,-1,jn(g[1].Target).replace(/#.*$/,""),ka.HLINK),p["r:id"]="rId"+v),(f=g[1].Target.indexOf("#"))>-1&&(p.location=jn(g[1].Target.slice(f+1))),g[1].Tooltip&&(p.tooltip=jn(g[1].Tooltip)),s[s.length]=vr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=_Ce(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=io("ignoredErrors",vr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(v=bn(a,-1,"../drawings/drawing"+(e+1)+".xml",ka.DRAW),s[s.length]=vr("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=h),c["!comments"].length>0&&(v=bn(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ka.VML),s[s.length]=vr("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function BCe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function UCe(e,t,r){var a=Ht(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=zy(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,f=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var v=Array.isArray(r)?(r[d.r]||[])[d.c]:r[ra(d)];v&&(h<0&&(h=p),f=p)}h<0||(++l,a.write_shift(4,h),a.write_shift(4,f))}var g=a.l;return a.l=c,a.write_shift(4,l),a.l=g,a.length>a.l?a.slice(0,a.l):a}function $Ce(e,t,r,a){var s=UCe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&or(e,0,s)}var VCe=tv,qCe=_g;function zCe(){}function HCe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Yye(e),r}function WCe(e,t,r){r==null&&(r=Ht(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return m2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),mG(e,r),r.slice(0,r.l)}function GCe(e){var t=Zc(e);return[t]}function YCe(e,t,r){return r==null&&(r=Ht(8)),Jx(t,r)}function KCe(e){var t=Zx(e);return[t]}function XCe(e,t,r){return r==null&&(r=Ht(4)),ev(t,r)}function QCe(e){var t=Zc(e),r=e.read_shift(1);return[t,r,"b"]}function JCe(e,t,r){return r==null&&(r=Ht(9)),Jx(t,r),r.write_shift(1,e.v?1:0),r}function ZCe(e){var t=Zx(e),r=e.read_shift(1);return[t,r,"b"]}function eke(e,t,r){return r==null&&(r=Ht(5)),ev(t,r),r.write_shift(1,e.v?1:0),r}function tke(e){var t=Zc(e),r=e.read_shift(1);return[t,r,"e"]}function rke(e,t,r){return r==null&&(r=Ht(9)),Jx(t,r),r.write_shift(1,e.v),r}function ake(e){var t=Zx(e),r=e.read_shift(1);return[t,r,"e"]}function nke(e,t,r){return r==null&&(r=Ht(8)),ev(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function ske(e){var t=Zc(e),r=e.read_shift(4);return[t,r,"s"]}function ike(e,t,r){return r==null&&(r=Ht(12)),Jx(t,r),r.write_shift(4,t.v),r}function oke(e){var t=Zx(e),r=e.read_shift(4);return[t,r,"s"]}function lke(e,t,r){return r==null&&(r=Ht(8)),ev(t,r),r.write_shift(4,t.v),r}function cke(e){var t=Zc(e),r=Io(e);return[t,r,"n"]}function dke(e,t,r){return r==null&&(r=Ht(16)),Jx(t,r),Rx(e.v,r),r}function bY(e){var t=Zx(e),r=Io(e);return[t,r,"n"]}function uke(e,t,r){return r==null&&(r=Ht(12)),ev(t,r),Rx(e.v,r),r}function hke(e){var t=Zc(e),r=cI(e);return[t,r,"n"]}function fke(e,t,r){return r==null&&(r=Ht(12)),Jx(t,r),pG(e.v,r),r}function mke(e){var t=Zx(e),r=cI(e);return[t,r,"n"]}function pke(e,t,r){return r==null&&(r=Ht(8)),ev(t,r),pG(e.v,r),r}function xke(e){var t=Zc(e),r=iI(e);return[t,r,"is"]}function vke(e){var t=Zc(e),r=Lo(e);return[t,r,"str"]}function gke(e,t,r){return r==null&&(r=Ht(12+4*e.v.length)),Jx(t,r),Ui(e.v,r),r.length>r.l?r.slice(0,r.l):r}function bke(e){var t=Zx(e),r=Lo(e);return[t,r,"str"]}function yke(e,t,r){return r==null&&(r=Ht(8+4*e.v.length)),ev(t,r),Ui(e.v,r),r.length>r.l?r.slice(0,r.l):r}function jke(e,t,r){var a=e.l+t,s=Zc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=iC(e,a-e.l,r);o[3]=ko(l,null,s,r.supbooks,r)}else e.l=a;return o}function Nke(e,t,r){var a=e.l+t,s=Zc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=iC(e,a-e.l,r);o[3]=ko(l,null,s,r.supbooks,r)}else e.l=a;return o}function wke(e,t,r){var a=e.l+t,s=Zc(e);s.r=r["!row"];var i=Io(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=iC(e,a-e.l,r);o[3]=ko(l,null,s,r.supbooks,r)}else e.l=a;return o}function Ske(e,t,r){var a=e.l+t,s=Zc(e);s.r=r["!row"];var i=Lo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=iC(e,a-e.l,r);o[3]=ko(l,null,s,r.supbooks,r)}else e.l=a;return o}var Cke=tv,kke=_g;function Eke(e,t){return t==null&&(t=Ht(4)),t.write_shift(4,e),t}function _ke(e,t){var r=e.l+t,a=tv(e),s=oI(e),i=Lo(e),o=Lo(e),l=Lo(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function Dke(e,t){var r=Ht(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));_g({s:ps(e[0]),e:ps(e[0])},r),lI("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Ui(s||"",r),Ui(e[1].Tooltip||"",r),Ui("",r),r.slice(0,r.l)}function Ake(){}function Tke(e,t,r){var a=e.l+t,s=xG(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=tCe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Ike(e,t,r){var a=e.l+t,s=tv(e),i=[s];if(r.cellFormula){var o=aCe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function Pke(e,t,r){r==null&&(r=Ht(18));var a=oC(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var yY=["left","right","top","bottom","header","footer"];function Oke(e){var t={};return yY.forEach(function(r){t[r]=Io(e)}),t}function Mke(e,t){return t==null&&(t=Ht(6*8)),Nx(e),yY.forEach(function(r){Rx(e[r],t)}),t}function Rke(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Fke(e,t,r){r==null&&(r=Ht(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Lke(e){var t=Ht(24);return t.write_shift(4,4),t.write_shift(4,1),_g(e,t),t}function Bke(e,t){return t==null&&(t=Ht(16*4+2)),t.write_shift(2,e.password?pI(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Uke(){}function $ke(){}function Vke(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,p,v,g,b,y,S,w,k,C,_=[];l.biff=12,l["!row"]=0;var E=0,T=!1,I=[],F={},A=l.supbooks||s.supbooks||[[]];if(A.sharedf=F,A.arrayf=I,A.SheetNames=s.SheetNames||s.Sheets.map(function(R){return R.name}),!l.supbooks&&(l.supbooks=A,s.Names))for(var P=0;P<s.Names.length;++P)A[0][P+1]=s.Names[P];var q=[],V=[],Y=!1;Hy[16]={n:"BrtShortReal",f:bY};var B;if(yf(e,function(Z,J,ie){if(!f)switch(ie){case 148:d=Z;break;case 0:p=Z,l.sheetRows&&l.sheetRows<=p.r&&(f=!0),k=Ws(b=p.r),l["!row"]=p.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=Q0(Z.hpt)),V[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:Z[2]},Z[2]){case"n":v.v=Z[1];break;case"s":w=uy[Z[1]],v.v=w.t,v.r=w.r;break;case"b":v.v=!!Z[1];break;case"e":v.v=Z[1],l.cellText!==!1&&(v.w=jf[v.v]);break;case"str":v.t="s",v.v=Z[1];break;case"is":v.t="s",v.v=Z[1].t;break}if((g=o.CellXf[Z[0].iStyleRef])&&xY(v,g.numFmtId,null,l,i,o),y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[ms(y)+k]=v,l.cellFormula){for(T=!1,E=0;E<I.length;++E){var M=I[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(v.F=pa(M[0]),T=!0)}!T&&Z.length>3&&(v.f=Z[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),l.cellDates&&g&&v.t=="n"&&Cg(Zr[g.numFmtId])){var z=cx(v.v);z&&(v.t="d",v.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}B&&(B.type=="XLDAPR"&&(v.D=!0),B=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;v={t:"z",v:void 0},y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[ms(y)+k]=v,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),B&&(B.type=="XLDAPR"&&(v.D=!0),B=void 0);break;case 176:_.push(Z);break;case 49:B=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var ee=a["!id"][Z.relId];for(ee?(Z.Target=ee.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=ee):Z.relId==""&&(Z.Target="#"+Z.loc),b=Z.rfx.s.r;b<=Z.rfx.e.r;++b)for(y=Z.rfx.s.c;y<=Z.rfx.e.c;++y)l.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=Z):(S=ra({c:y,r:b}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=Z);break;case 426:if(!l.cellFormula)break;I.push(Z),C=l.dense?c[b][y]:c[ms(y)+k],C.f=ko(Z[1],u,{r:p.r,c:y},A,l),C.F=pa(Z[0]);break;case 427:if(!l.cellFormula)break;F[ra(Z[0].s)]=Z[1],C=l.dense?c[b][y]:c[ms(y)+k],C.f=ko(Z[1],u,{r:p.r,c:y},A,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)q[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},Y||(Y=!0,xI(Z.w/256)),Km(q[Z.e+1]);break;case 161:c["!autofilter"]={ref:pa(Z)};break;case 476:c["!margins"]=Z;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),Z.name&&(s.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),Z.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!J.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=pa(d||u)),l.sheetRows&&c["!ref"]){var Q=Wa(c["!ref"]);l.sheetRows<=+Q.e.r&&(Q.e.r=l.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=pa(Q))}return _.length>0&&(c["!merges"]=_),q.length>0&&(c["!cols"]=q),V.length>0&&(c["!rows"]=V),c}function qke(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Kn(t),t.z=t.z||Zr[14],t.v=bi(Yn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=up(s.cellXfs,t,s),t.l&&i["!links"].push([ra(c),t.l]),t.c&&i["!comments"].push([ra(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=jI(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?or(e,18,lke(t,c)):or(e,7,ike(t,c))):(c.t="str",o?or(e,17,yke(t,c)):or(e,6,gke(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?or(e,13,pke(t,c)):or(e,2,fke(t,c)):o?or(e,16,uke(t,c)):or(e,5,dke(t,c)),!0;case"b":return c.t="b",o?or(e,15,eke(t,c)):or(e,4,JCe(t,c)),!0;case"e":return c.t="e",o?or(e,14,nke(t,c)):or(e,3,rke(t,c)),!0}return o?or(e,12,XCe(t,c)):or(e,1,YCe(t,c)),!0}function zke(e,t,r,a){var s=Wa(t["!ref"]||"A1"),i,o="",l=[];or(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=Ws(u),$Ce(e,t,s,u);var h=!1;if(u<=s.e.r)for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=ms(f)),i=l[f]+o;var p=c?(t[u]||[])[f]:t[i];if(!p){h=!1;continue}h=qke(e,p,u,f,a,t,h)}}or(e,146)}function Hke(e,t){!t||!t["!merges"]||(or(e,177,Eke(t["!merges"].length)),t["!merges"].forEach(function(r){or(e,176,kke(r))}),or(e,178))}function Wke(e,t){!t||!t["!cols"]||(or(e,390),t["!cols"].forEach(function(r,a){r&&or(e,60,Pke(a,r))}),or(e,391))}function Gke(e,t){!t||!t["!ref"]||(or(e,648),or(e,649,Lke(Wa(t["!ref"]))),or(e,650))}function Yke(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=bn(r,-1,a[1].Target.replace(/#.*$/,""),ka.HLINK);or(e,494,Dke(a,s))}}),delete t["!links"]}function Kke(e,t,r,a){if(t["!comments"].length>0){var s=bn(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ka.VML);or(e,551,lI("rId"+s)),t["!legacy"]=s}}function Xke(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:pa(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=jl(i);l.s.r==l.e.r&&(l.e.r=jl(t["!ref"]).e.r,i=pa(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),or(e,161,_g(Wa(i))),or(e,162)}}function Qke(e,t,r){or(e,133),or(e,137,Fke(t,r)),or(e,138),or(e,134)}function Jke(e,t){t["!protect"]&&or(e,535,Bke(t["!protect"]))}function Zke(e,t,r,a){var s=gl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Wa(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],or(s,129),(r.vbaraw||o["!outline"])&&or(s,147,WCe(l,o["!outline"])),or(s,148,qCe(c)),Qke(s,o,r.Workbook),Wke(s,o),zke(s,o,e,t),Jke(s,o),Xke(s,o,r,e),Hke(s,o),Yke(s,o,a),o["!margins"]&&or(s,476,Mke(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Gke(s,o),Kke(s,o,e,a),or(s,130),s.end()}function eEe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Ha((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function tEe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=eEe(h);u.s.r=u.s.c=0,u.e.c=l,d=ms(l),f[0].forEach(function(p,v){o[d+Ws(v)]={t:"n",v:p,z:f[1]},c=v}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=pa(u)),o}function rEe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(vY);return l&&NI(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function aEe(e,t){e.l+=10;var r=Lo(e);return{name:r}}function nEe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return yf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var wI=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],sEe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],iEe=[],oEe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function MB(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Hn(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function RB(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Hn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function jY(e){RB(e.WBProps,wI),RB(e.CalcPr,oEe),MB(e.WBView,sEe),MB(e.Sheets,iEe),C0.date1904=Hn(e.WBProps.date1904)}function lEe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Hn(e.Workbook.WBProps.date1904)?"true":"false"}var cEe="][*?/\\".split("");function NY(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return cEe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function dEe(e,t,r){e.forEach(function(a,s){NY(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function uEe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];dEe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)lCe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var hEe=/<\w+:workbook/;function fEe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace($o,function(c,d){var u=sa(c);switch(ah(u[0])){case"<?xml":break;case"<workbook":c.match(hEe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wI.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=Hn(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=_n(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Ha(_n(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=_n(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Hn(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Ha(_n(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Qx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return jY(r),r}function wY(e){var t=[Qs];t[t.length]=vr("workbook",null,{xmlns:Qx[0],"xmlns:r":xi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(wI.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=vr("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:jn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=vr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=vr("definedName",jn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function mEe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=EA(e),r.name=Lo(e),r}function pEe(e,t){return t||(t=Ht(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),lI(e.strRelID,t),Ui(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function xEe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Lo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function vEe(e,t){t||(t=Ht(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),mG(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function gEe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function bEe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Kye(e),o=rCe(e,0,r),l=oI(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function yEe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Hy[16]={n:"BrtFRTArchID$",f:gEe},yf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ko(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),jY(r),r.Names=i,r.supbooks=o,r}function jEe(e,t){or(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};or(e,156,pEe(s))}or(e,144)}function NEe(e,t){t||(t=Ht(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ui("SheetJS",t),Ui(o2.version,t),Ui(o2.version,t),Ui("7262",t),t.length>t.l?t.slice(0,t.l):t}function wEe(e,t){t||(t=Ht(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function SEe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(or(e,135),or(e,158,wEe(s)),or(e,136))}}function CEe(e,t){var r=gl();return or(r,131),or(r,128,NEe()),or(r,153,vEe(e.Workbook&&e.Workbook.WBProps||null)),SEe(r,e),jEe(r,e),or(r,132),r.end()}function kEe(e,t,r){return t.slice(-4)===".bin"?yEe(e,r):fEe(e,r)}function EEe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Vke(e,a,r,s,i,o,l):bCe(e,a,r,s,i,o,l)}function _Ee(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?nEe(e,a,r,s,i):rEe(e,a,r,s,i)}function DEe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?T2e():I2e()}function AEe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?D2e():A2e()}function TEe(e,t,r,a){return t.slice(-4)===".bin"?kwe(e,r,a):mwe(e,r,a)}function IEe(e,t,r){return aY(e,r)}function PEe(e,t,r){return t.slice(-4)===".bin"?PNe(e,r):ANe(e,r)}function OEe(e,t,r){return t.slice(-4)===".bin"?S2e(e,r):p2e(e,r)}function MEe(e,t,r){return t.slice(-4)===".bin"?h2e(e):d2e(e)}function REe(e,t,r,a){return r.slice(-4)===".bin"?f2e(e,t,r,a):void 0}function FEe(e,t,r){return t.slice(-4)===".bin"?o2e(e,t,r):c2e(e,t,r)}function LEe(e,t,r){return(t.slice(-4)===".bin"?CEe:wY)(e)}function BEe(e,t,r,a,s){return(t.slice(-4)===".bin"?Zke:gY)(e,r,a,s)}function UEe(e,t,r){return(t.slice(-4)===".bin"?Rwe:tY)(e,r)}function $Ee(e,t,r){return(t.slice(-4)===".bin"?RNe:GG)(e,r)}function VEe(e,t,r){return(t.slice(-4)===".bin"?C2e:iY)(e)}function qEe(e){return(e.slice(-4)===".bin"?l2e:nY)()}var SY=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,CY=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function jd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(SY),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(CY),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function zEe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(SY),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(CY),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var fy;function HEe(e,t){var r=fy[e]||Ha(e);return r==="General"?Ox(t):Gc(r,t)}function WEe(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Hn(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=Yn(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ha(t)]=s}function GEe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||jf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ry(e.v):e.w=Ox(e.v):e.w=HEe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=fy[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&Cg(a)){var s=cx(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function YEe(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=iwe[a.Pattern]||a.Pattern)}e[t.ID]=t}function KEe(e,t,r,a,s,i,o,l,c,d){var u="General",h=a.StyleID,f={};d=d||{};var p=[],v=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&p.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Hn(e);break;case"String":a.t="s",a.r=Z8(Ha(e)),a.v=e.indexOf("<")>-1?Ha(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Yn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=Ha(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=bG[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=Z8(t||e));break}if(GEe(a,u,d),d.cellFormula!==!1)if(a.Formula){var g=Ha(a.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),a.f=S0(g,s),delete a.Formula,a.ArrayRange=="RC"?a.F=S0("RC:RC",s):a.ArrayRange&&(a.F=S0(a.ArrayRange,s),c.push([Wa(a.F),a.F]))}else for(v=0;v<c.length;++v)s.r>=c[v][0].s.r&&s.r<=c[v][0].e.r&&s.c>=c[v][0].s.c&&s.c<=c[v][0].e.c&&(a.F=c[v][1]);d.cellStyles&&(p.forEach(function(b){!f.patternType&&b.patternType&&(f.patternType=b.patternType)}),a.s=f),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function XEe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function z_(e,t){var r=t||{};kg();var a=Jb(tI(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=_n(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Kn(r);return o.type="string",X0.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){s.indexOf("<"+Ne)>=0&&(i=!0)}),i)return M_e(a,r);fy={"General Number":"General","General Date":Zr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Zr[15],"Short Date":Zr[14],"Long Time":Zr[19],"Medium Time":Zr[18],"Short Time":Zr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Zr[2],Standard:Zr[4],Percent:Zr[10],Scientific:Zr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],f=r.dense?[]:{},p="",v={},g={},b=jd('<Data ss:Type="String">'),y=0,S=0,w=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},_={},E="",T=0,I=[],F={},A={},P=0,q=[],V=[],Y={},B=[],Q,R=!1,Z=[],J=[],ie={},M=0,z=0,ee={Sheets:[],WBProps:{date1904:!1}},ne={};By.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var W="";l=By.exec(a);)switch(l[3]=(W=l[3]).toLowerCase()){case"data":if(W=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?KEe(a.slice(y,l.index),E,b,c[c.length-1][0]=="comment"?Y:v,{c:S,r:w},C,B[S],g,Z,r):(E="",b=jd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(V.length>0&&(v.c=V),(!r.sheetRows||r.sheetRows>w)&&v.v!==void 0&&(r.dense?(f[w]||(f[w]=[]),f[w][S]=v):f[ms(S)+Ws(w)]=v),v.HRef&&(v.l={Target:Ha(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=S+(parseInt(v.MergeAcross,10)|0),z=w+(parseInt(v.MergeDown,10)|0),I.push({s:{c:S,r:w},e:{c:M,r:z}})),!r.sheetStubs)v.MergeAcross?S=M+1:++S;else if(v.MergeAcross||v.MergeDown){for(var re=S;re<=M;++re)for(var le=w;le<=z;++le)(re>S||le>w)&&(r.dense?(f[le]||(f[le]=[]),f[le][re]={t:"z"}):f[ms(re)+Ws(le)]={t:"z"});S=M+1}else++S;else v=zEe(l[0]),v.Index&&(S=+v.Index-1),S<k.s.c&&(k.s.c=S),S>k.e.c&&(k.e.c=S),l[0].slice(-2)==="/>"&&++S,V=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<k.s.r&&(k.s.r=w),w>k.e.r&&(k.e.r=w),l[0].slice(-2)==="/>"&&(g=jd(l[0]),g.Index&&(w=+g.Index-1)),S=0,++w):(g=jd(l[0]),g.Index&&(w=+g.Index-1),ie={},(g.AutoFitHeight=="0"||g.Height)&&(ie.hpx=parseInt(g.Height,10),ie.hpt=zy(ie.hpx),J[w]=ie),g.Hidden=="1"&&(ie.hidden=!0,J[w]=ie));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(f["!ref"]=pa(k),r.sheetRows&&r.sheetRows<=k.e.r&&(f["!fullref"]=f["!ref"],k.e.r=r.sheetRows-1,f["!ref"]=pa(k))),I.length&&(f["!merges"]=I),B.length>0&&(f["!cols"]=B),J.length>0&&(f["!rows"]=J),u[p]=f}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=S=0,c.push([l[3],!1]),d=jd(l[0]),p=Ha(d.Name),f=r.dense?[]:{},I=[],Z=[],J=[],ne={name:p,Hidden:0},ee.Sheets.push(ne);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),B=[],R=!1}break;case"style":l[1]==="/"?YEe(C,_,r):_=jd(l[0]);break;case"numberformat":_.nf=Ha(jd(l[0]).Format||"General"),fy[_.nf]&&(_.nf=fy[_.nf]);for(var te=0;te!=392&&Zr[te]!=_.nf;++te);if(te==392){for(te=57;te!=392;++te)if(Zr[te]==null){Qh(_.nf,te);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=jd(l[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!R&&Q.wpx>10){R=!0,Do=ZG;for(var K=0;K<B.length;++K)B[K]&&Km(B[K])}R&&Km(Q),B[Q.Index-1||B.length]=Q;for(var de=0;de<+Q.Span;++de)B[B.length]=Kn(Q);break;case"namedrange":if(l[1]==="/")break;ee.Names||(ee.Names=[]);var H=sa(l[0]),se={Name:H.Name,Ref:S0(H.RefersTo.slice(1),{r:0,c:0})};ee.Sheets.length>0&&(se.Sheet=ee.Sheets.length-1),ee.Names.push(se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=a.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;_.Interior=jd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?y1e(F,W,a.slice(P,l.index)):P=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));XEe(Y),V.push(Y)}else c.push([l[3],!1]),d=jd(l[0]),Y={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var be=jd(l[0]);f["!autofilter"]={ref:S0(be.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return $B(a,r);var ue=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ue=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ue=!1}break;case"excelworkbook":switch(l[3]){case"date1904":ee.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ue=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ue=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(P,l.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else P=l.index+l[0].length;break;case"header":f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+sa(l[0]).Margin)||(f["!margins"].header=+sa(l[0]).Margin);break;case"footer":f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+sa(l[0]).Margin)||(f["!margins"].footer=+sa(l[0]).Margin);break;case"pagemargins":var oe=sa(l[0]);f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+oe.Top)||(f["!margins"].top=+oe.Top),isNaN(+oe.Left)||(f["!margins"].left=+oe.Left),isNaN(+oe.Right)||(f["!margins"].right=+oe.Right),isNaN(+oe.Bottom)||(f["!margins"].bottom=+oe.Bottom);break;case"displayrighttoleft":ee.Views||(ee.Views=[]),ee.Views[0]||(ee.Views[0]={}),ee.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ue=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ue=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ue=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ue=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ue=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ue=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ue=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ue=!1}break;case"smarttags":break;default:ue=!1;break}if(ue||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?WEe(A,W,q,a.slice(P,l.index)):(q=l,P=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ge={};return!r.bookSheets&&!r.bookProps&&(ge.Sheets=u),ge.SheetNames=h,ge.Workbook=ee,ge.SSF=Kn(Zr),ge.Props=F,ge.Custprops=A,ge}function OA(e,t){switch(CI(t=t||{}),t.type||"base64"){case"base64":return z_(dc(e),t);case"binary":case"buffer":case"file":return z_(e,t);case"array":return z_(cp(e),t)}}function QEe(e,t){var r=[];return e.Props&&r.push(j1e(e.Props,t)),e.Custprops&&r.push(N1e(e.Props,e.Custprops)),r.join("")}function JEe(){return""}function ZEe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(vr("NumberFormat",null,{"ss:Format":jn(Zr[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(vr("Style",i.join(""),o))}),vr("Styles",r.join(""))}function kY(e){return vr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+bI(e.Ref,{r:0,c:0})})}function e_e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(kY(s)))}return vr("Names",r.join(""))}function t_e(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(kY(l)))}return i.join("")}function r_e(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(vr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(vr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(vr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(vr("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(io("ProtectContents","True")),e["!protect"].objects&&s.push(io("ProtectObjects","True")),e["!protect"].scenarios&&s.push(io("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(io("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(io("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":vr("WorksheetOptions",s.join(""),{xmlns:Yl.x})}function a_e(e){return e.map(function(t){var r=Sye(t.t||""),a=vr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return vr("Comment",a,{"ss:Author":t.a})}).join("")}function n_e(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+jn(bI(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ps(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=jn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=jn(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",f="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":h="Number",f=String(e.v);break;case"b":h="Boolean",f=e.v?"1":"0";break;case"e":h="Error",f=jf[e.v];break;case"d":h="DateTime",f=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Zr[14]);break;case"s":h="String",f=wye(e.v||"");break}var p=up(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var v=e.v!=null?f:"",g=e.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=a_e(e.c)),vr("Cell",g,l)}function s_e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Q0(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function i_e(e,t,r,a){if(!e["!ref"])return"";var s=Wa(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,y){Km(b);var S=!!b.width,w=oC(y,b),k={"ss:Index":y+1};S&&(k["ss:Width"]=Vy(w.width)),b.hidden&&(k["ss:Hidden"]="1"),l.push(vr("Column",null,k))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[s_e(d,(e["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var f=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>h)&&!(i[o].s.r>d)&&!(i[o].e.c<h)&&!(i[o].e.r<d)){(i[o].s.c!=h||i[o].s.r!=d)&&(f=!0);break}if(!f){var p={r:d,c:h},v=ra(p),g=c?(e[d]||[])[h]:e[v];u.push(n_e(g,v,e,t,r,a,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function o_e(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?t_e(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?i_e(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(r_e(i,t,e,r)),a.join("")}function l_e(e,t){t||(t={}),e.SSF||(e.SSF=Kn(Zr)),e.SSF&&(kg(),eC(e.SSF),t.revssf=rC(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],up(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(QEe(e,t)),r.push(JEe()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(vr("Worksheet",o_e(a,t,e),{"ss:Name":jn(e.SheetNames[a])}));return r[2]=ZEe(e,t),r[3]=e_e(e),Qs+vr("Workbook",r.join(""),{xmlns:Yl.ss,"xmlns:o":Yl.o,"xmlns:x":Yl.x,"xmlns:ss":Yl.ss,"xmlns:dt":Yl.dt,"xmlns:html":Yl.html})}function c_e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=e1e(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=t1e(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var d_e=[60,1084,2066,2165,2175];function u_e(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Wh(r,r.l),d=MA[c],u=0;d!=null&&d_e.indexOf(c)>-1;)i=Wh(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=MA[c=Wh(r,r.l)];var h=Li(o);ao(h,0);var f=0;h.lens=[];for(var p=0;p<o.length;++p)h.lens.push(f),f+=o[p].length;if(h.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+a;return t.f(h,h.length,s)}function Nu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Zr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||jf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ry(e.v):e.w=Ox(e.v):e.w=Gc(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&Cg(Zr[a]||String(a))){var s=cx(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function yN(e,t,r){return{v:e,ixfe:t,t:r}}function h_e(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},h,f="",p,v,g,b,y={},S=[],w,k,C=[],_=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},I=function(ve){return ve<8?bx[ve]:ve<64&&_[ve-8]||bx[ve]},F=function(ve,pe,Te){var Xe=pe.XF.data;if(!(!Xe||!Xe.patternType||!Te||!Te.cellStyles)){pe.s={},pe.s.patternType=Xe.patternType;var kt;(kt=$y(I(Xe.icvFore)))&&(pe.s.fgColor={rgb:kt}),(kt=$y(I(Xe.icvBack)))&&(pe.s.bgColor={rgb:kt})}},A=function(ve,pe,Te){if(!(ie>1)&&!(Te.sheetRows&&ve.r>=Te.sheetRows)){if(Te.cellStyles&&pe.XF&&pe.XF.data&&F(ve,pe,Te),delete pe.ixfe,delete pe.XF,h=ve,f=ra(ve),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<o.s.r&&(o.s.r=ve.r),ve.c<o.s.c&&(o.s.c=ve.c),ve.r+1>o.e.r&&(o.e.r=ve.r+1),ve.c+1>o.e.c&&(o.e.c=ve.c+1),Te.cellFormula&&pe.f){for(var Xe=0;Xe<S.length;++Xe)if(!(S[Xe][0].s.c>ve.c||S[Xe][0].s.r>ve.r)&&!(S[Xe][0].e.c<ve.c||S[Xe][0].e.r<ve.r)){pe.F=pa(S[Xe][0]),(S[Xe][0].s.c!=ve.c||S[Xe][0].s.r!=ve.r)&&delete pe.f,pe.f&&(pe.f=""+ko(S[Xe][1],o,ve,Z,P));break}}Te.dense?(s[ve.r]||(s[ve.r]=[]),s[ve.r][ve.c]=pe):s[f]=pe}},P={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(P.password=t.password);var q,V=[],Y=[],B=[],Q=[],R=!1,Z=[];Z.SheetNames=P.snames,Z.sharedf=P.sharedf,Z.arrayf=P.arrayf,Z.names=[],Z.XTI=[];var J=0,ie=0,M=0,z=[],ee=[],ne;P.codepage=1200,_d(1200);for(var W=!1;e.l<e.length-1;){var re=e.l,le=e.read_shift(2);if(le===0&&J===10)break;var te=e.l===e.length?0:e.read_shift(2),K=MA[le];if(K&&K.f){if(t.bookSheets&&J===133&&le!==133)break;if(J=le,K.r===2||K.r==12){var de=e.read_shift(2);if(te-=2,!P.enc&&de!==le&&((de&255)<<8|de>>8)!==le)throw new Error("rt mismatch: "+de+"!="+le);K.r==12&&(e.l+=10,te-=10)}var H={};if(le===10?H=K.f(e,te,P):H=u_e(le,K,e,te,P),ie==0&&[9,521,1033,2057].indexOf(J)===-1)continue;switch(le){case 34:r.opts.Date1904=E.WBProps.date1904=H;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(e.l=0),P.enc=H,!t.password)throw new Error("File is password-protected");if(H.valid==null)throw new Error("Encryption scheme unsupported");if(!H.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=H;break;case 66:var se=Number(H);switch(se){case 21010:se=1200;break;case 32768:se=1e4;break;case 32769:se=1252;break}_d(P.codepage=se),W=!0;break;case 317:P.rrtabid=H;break;case 25:P.winlocked=H;break;case 439:r.opts.RefreshAll=H;break;case 12:r.opts.CalcCount=H;break;case 16:r.opts.CalcDelta=H;break;case 17:r.opts.CalcIter=H;break;case 13:r.opts.CalcMode=H;break;case 14:r.opts.CalcPrecision=H;break;case 95:r.opts.CalcSaveRecalc=H;break;case 15:P.CalcRefMode=H;break;case 2211:r.opts.FullCalc=H;break;case 129:H.fDialog&&(s["!type"]="dialog"),H.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),H.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:C.push(H);break;case 430:Z.push([H]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(H);break;case 24:case 536:ne={Name:H.Name,Ref:ko(H.rgce,o,null,Z,P)},H.itab>0&&(ne.Sheet=H.itab-1),Z.names.push(ne),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(H),H.Name=="_xlnm._FilterDatabase"&&H.itab>0&&H.rgce&&H.rgce[0]&&H.rgce[0][0]&&H.rgce[0][0][0]=="PtgArea3d"&&(ee[H.itab-1]={ref:pa(H.rgce[0][0][1][2])});break;case 22:P.ExternCount=H;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(H),Z.XTI=Z.XTI.concat(H);break;case 2196:if(P.biff<8)break;ne!=null&&(ne.Comment=H[1]);break;case 18:s["!protect"]=H;break;case 19:H!==0&&P.WTF&&console.error("Password verifier: "+H);break;case 133:i[H.pos]=H,P.snames.push(H.name);break;case 10:{if(--ie)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=pa(o),t.sheetRows&&t.sheetRows<=o.e.r){var be=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=pa(o),o.e.r=be}o.e.r++,o.e.c++}V.length>0&&(s["!merges"]=V),Y.length>0&&(s["!objects"]=Y),B.length>0&&(s["!cols"]=B),Q.length>0&&(s["!rows"]=Q),E.Sheets.push(T)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[le]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[H.BIFFVer]||8),P.biffguess=H.BIFFVer==0,H.BIFFVer==0&&H.dt==4096&&(P.biff=5,W=!0,_d(P.codepage=28591)),P.biff==8&&H.BIFFVer==0&&H.dt==16&&(P.biff=2),ie++)break;if(s=t.dense?[]:{},P.biff<8&&!W&&(W=!0,_d(P.codepage=t.codepage||1252)),P.biff<5||H.BIFFVer==0&&H.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ue={pos:e.l-te,name:d};i[ue.pos]=ue,P.snames.push(d)}else d=(i[re]||{name:""}).name;H.dt==32&&(s["!type"]="chart"),H.dt==64&&(s["!type"]="macro"),V=[],Y=[],P.arrayf=S=[],B=[],Q=[],R=!1,T={Hidden:(i[re]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[H.r]||[])[H.c]:s[ra({c:H.c,r:H.r})])&&++H.c,w={ixfe:H.ixfe,XF:C[H.ixfe]||{},v:H.val,t:"n"},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t);break;case 5:case 517:w={ixfe:H.ixfe,XF:C[H.ixfe],v:H.val,t:H.t},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t);break;case 638:w={ixfe:H.ixfe,XF:C[H.ixfe],v:H.rknum,t:"n"},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t);break;case 189:for(var oe=H.c;oe<=H.C;++oe){var ge=H.rkrec[oe-H.c][0];w={ixfe:ge,XF:C[ge],v:H.rkrec[oe-H.c][1],t:"n"},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:oe,r:H.r},w,t)}break;case 6:case 518:case 1030:{if(H.val=="String"){l=H;break}if(w=yN(H.val,H.cell.ixfe,H.tt),w.XF=C[w.ixfe],t.cellFormula){var Ne=H.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var Me=Ne[0][0][1][0],We=Ne[0][0][1][1],tt=ra({r:Me,c:We});y[tt]?w.f=""+ko(H.formula,o,H.cell,Z,P):w.F=((t.dense?(s[Me]||[])[We]:s[tt])||{}).F}else w.f=""+ko(H.formula,o,H.cell,Z,P)}M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A(H.cell,w,t),l=H}break;case 7:case 519:if(l)l.val=H,w=yN(H,l.cell.ixfe,"s"),w.XF=C[w.ixfe],t.cellFormula&&(w.f=""+ko(l.formula,o,l.cell,Z,P)),M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(H);var mt=ra(H[0].s);if(p=t.dense?(s[H[0].s.r]||[])[H[0].s.c]:s[mt],t.cellFormula&&p){if(!l||!mt||!p)break;p.f=""+ko(H[1],o,H[0],Z,P),p.F=pa(H[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!l)break;y[ra(l.cell)]=H[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[ra(l.cell)],(p||{}).f=""+ko(H[0],o,h,Z,P)}}break;case 253:w=yN(c[H.isst].t,H.ixfe,"s"),c[H.isst].h&&(w.h=c[H.isst].h),w.XF=C[w.ixfe],M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:H.ixfe,XF:C[H.ixfe],t:"z"},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t));break;case 190:if(t.sheetStubs)for(var Be=H.c;Be<=H.C;++Be){var dt=H.ixfe[Be-H.c];w={ixfe:dt,XF:C[dt],t:"z"},M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:Be,r:H.r},w,t)}break;case 214:case 516:case 4:w=yN(H.val,H.ixfe,"s"),w.XF=C[w.ixfe],M>0&&(w.z=z[w.ixfe>>8&63]),Nu(w,t,r.opts.Date1904),A({c:H.c,r:H.r},w,t);break;case 0:case 512:ie===1&&(o=H);break;case 252:c=H;break;case 1054:if(P.biff==4){z[M++]=H[1];for(var Dt=0;Dt<M+163&&Zr[Dt]!=H[1];++Dt);Dt>=163&&Qh(H[1],M+163)}else Qh(H[1],H[0]);break;case 30:{z[M++]=H;for(var It=0;It<M+163&&Zr[It]!=H;++It);It>=163&&Qh(H,M+163)}break;case 229:V=V.concat(H);break;case 93:Y[H.cmo[0]]=P.lastobj=H;break;case 438:P.lastobj.TxO=H;break;case 127:P.lastobj.ImData=H;break;case 440:for(b=H[0].s.r;b<=H[0].e.r;++b)for(g=H[0].s.c;g<=H[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[ra({c:g,r:b})],p&&(p.l=H[1]);break;case 2048:for(b=H[0].s.r;b<=H[0].e.r;++b)for(g=H[0].s.c;g<=H[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[ra({c:g,r:b})],p&&p.l&&(p.l.Tooltip=H[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;p=t.dense?(s[H[0].r]||[])[H[0].c]:s[ra(H[0])];var zt=Y[H[2]];p||(t.dense?(s[H[0].r]||(s[H[0].r]=[]),p=s[H[0].r][H[0].c]={t:"z"}):p=s[ra(H[0])]={t:"z"},o.e.r=Math.max(o.e.r,H[0].r),o.s.r=Math.min(o.s.r,H[0].r),o.e.c=Math.max(o.e.c,H[0].c),o.s.c=Math.min(o.s.c,H[0].c)),p.c||(p.c=[]),v={a:H[1],t:zt.TxO.t},p.c.push(v)}break;case 2173:Zwe(C[H.ixfe],H.ext);break;case 125:{if(!P.cellStyles)break;for(;H.e>=H.s;)B[H.e--]={width:H.w/256,level:H.level||0,hidden:!!(H.flags&1)},R||(R=!0,xI(H.w/256)),Km(B[H.e+1])}break;case 520:{var xe={};H.level!=null&&(Q[H.r]=xe,xe.level=H.level),H.hidden&&(Q[H.r]=xe,xe.hidden=!0),H.hpt&&(Q[H.r]=xe,xe.hpt=H.hpt,xe.hpx=Q0(H.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Nx(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[le]]=H;break;case 161:s["!margins"]||Nx(s["!margins"]={}),s["!margins"].header=H.header,s["!margins"].footer=H.footer;break;case 574:H.RTL&&(E.Views[0].RTL=!0);break;case 146:_=H;break;case 2198:q=H;break;case 140:k=H;break;case 442:d?T.CodeName=H||T.name:E.WBProps.CodeName=H||"ThisWorkbook";break}}else K||console.error("Missing Info for XLS Record 0x"+le.toString(16)),e.l+=te}return r.SheetNames=As(i).sort(function(fe,ve){return Number(fe)-Number(ve)}).map(function(fe){return i[fe].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&ee.forEach(function(fe,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=fe}),r.Strings=c,r.SSF=Kn(Zr),P.enc&&(r.Encryption=P.enc),q&&(r.Themes=q),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),Z.names.length>0&&(E.Names=Z.names),r.Workbook=E,r}var my={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function f_e(e,t,r){var a=Hr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=vB(a,_A,my.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Hr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=vB(o,DA,my.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(CG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function m_e(e,t){var r=[],a=[],s=[],i=0,o,l=G8(_A,"n"),c=G8(DA,"n");if(e.Props)for(o=As(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=As(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)IG.indexOf(s[i][0])>-1||SG.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Hr.utils.cfb_add(t,"/SummaryInformation",gB(a,my.SI,c,DA)),(r.length||d.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",gB(r,my.DSI,l,_A,d.length?d:null,my.UDI))}function EY(e,t){t||(t={}),CI(t),W4(),t.codepage&&H4(t.codepage);var r,a;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),a=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=Jl(dc(e));break;case"binary":e=Jl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ao(e,0),a={content:e}}var s,i;if(r&&c_e(r),t.bookProps&&!t.bookSheets)s={};else{var o=wa?"buffer":"array";if(a&&a.content)s=h_e(a.content,t);else if((i=Hr.find(e,"PerfectOffice_MAIN"))&&i.content)s=jx.to_workbook(i.content,(t.type=o,t));else if((i=Hr.find(e,"NativeContent_MAIN"))&&i.content)s=jx.to_workbook(i.content,(t.type=o,t));else throw(i=Hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=E2e(e))}var l={};return e.FullPaths&&f_e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function p_e(e,t){var r=t||{},a=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(a,s,_Y(e,r)),r.biff==8&&(e.Props||e.Custprops)&&m_e(e,a),r.biff==8&&e.vbaraw&&_2e(a,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var Hy={0:{f:BCe},1:{f:GCe},2:{f:hke},3:{f:tke},4:{f:QCe},5:{f:cke},6:{f:vke},7:{f:ske},8:{f:Ske},9:{f:wke},10:{f:jke},11:{f:Nke},12:{f:KCe},13:{f:mke},14:{f:ake},15:{f:ZCe},16:{f:bY},17:{f:bke},18:{f:oke},19:{f:iI},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:bEe},40:{},42:{},43:{f:vwe},44:{f:pwe},45:{f:ywe},46:{f:Nwe},47:{f:jwe},48:{},49:{f:Vye},50:{},51:{f:r2e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:qG},62:{f:xke},63:{f:u2e},64:{f:Uke},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Bo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Rke},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:HCe},148:{f:VCe,p:16},151:{f:Ake},152:{},153:{f:xEe},154:{},155:{},156:{f:mEe},157:{},158:{},159:{T:1,f:INe},160:{T:-1},161:{T:1,f:tv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Cke},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:e2e},336:{T:-1},337:{f:s2e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:EA},357:{},358:{},359:{},360:{T:1},361:{},362:{f:VG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Tke},427:{f:Ike},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Oke},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zCe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:_ke},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:EA},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:N2e},633:{T:1},634:{T:-1},635:{T:1,f:y2e},636:{T:-1},637:{f:Wye},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:aEe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:$ke},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},MA={6:{f:V_},10:{f:gm},12:{f:ii},13:{f:ii},14:{f:Us},15:{f:Us},16:{f:Io},17:{f:Us},18:{f:Us},19:{f:ii},20:{f:SB},21:{f:SB},23:{f:VG},24:{f:kB},25:{f:Us},26:{},27:{},28:{f:$je},29:{},34:{f:Us},35:{f:CB},38:{f:Io},39:{f:Io},40:{f:Io},41:{f:Io},42:{f:Us},43:{f:Us},47:{f:ZNe},49:{f:mje},51:{f:ii},60:{},61:{f:cje},64:{f:Us},65:{f:fje},66:{f:ii},77:{},80:{},81:{},82:{},85:{f:ii},89:{},90:{},91:{},92:{f:J1e},93:{f:zje},94:{},95:{f:Us},96:{},97:{},99:{f:Us},125:{f:qG},128:{f:Dje},129:{f:eje},130:{f:ii},131:{f:Us},132:{f:Us},133:{f:tje},134:{},140:{f:Jje},141:{f:ii},144:{},146:{f:tNe},151:{},152:{},153:{},154:{},155:{},156:{f:ii},157:{},158:{},160:{f:lNe},161:{f:nNe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Cje},190:{f:kje},193:{f:gm},197:{},198:{},199:{},200:{},201:{},202:{f:Us},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ii},220:{},221:{f:Us},222:{},224:{f:_je},225:{f:Q1e},226:{f:gm},227:{},229:{f:Vje},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:aje},253:{f:xje},255:{f:sje},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:PG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Us},353:{f:gm},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Oje},431:{f:Us},432:{},433:{},434:{},437:{},438:{f:Gje},439:{f:Us},440:{f:Yje},441:{},442:{f:A1},443:{},444:{f:ii},445:{},446:{},448:{f:gm},449:{f:lje,r:2},450:{f:gm},512:{f:jB},513:{f:oNe},515:{f:Ije},516:{f:gje},517:{f:wB},519:{f:cNe},520:{f:ije},523:{},545:{f:EB},549:{f:yB},566:{},574:{f:uje},638:{f:Sje},659:{},1048:{},1054:{f:yje},1084:{},1212:{f:Lje},2048:{f:Xje},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:vN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:gm},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:rNe,r:12},2173:{f:Jwe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Us,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Fje,r:12},2197:{},2198:{f:Wwe,r:12},2199:{},2200:{},2201:{},2202:{f:Bje,r:12},2203:{f:gm},2204:{},2205:{},2206:{},2207:{},2211:{f:oje},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ii},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:sNe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:eNe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:jB},1:{},2:{f:mNe},3:{f:hNe},4:{f:uNe},5:{f:wB},7:{f:xNe},8:{},9:{f:vN},11:{},22:{f:ii},30:{f:Nje},31:{},32:{},33:{f:EB},36:{},37:{f:yB},50:{f:vNe},62:{},52:{},67:{},68:{f:ii},69:{},86:{},126:{},127:{f:dNe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:gNe},223:{},234:{},354:{},421:{},518:{f:V_},521:{f:vN},536:{f:kB},547:{f:CB},561:{},579:{},1030:{f:V_},1033:{f:vN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&aI(r)&&e.push(r)}}function x_e(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return gr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function O1(e,t,r){return e||(e=Ht(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function v_e(e,t,r,a){var s=Ht(9);return O1(s,e,t),OG(r,a||"b",s),s}function g_e(e,t,r){var a=Ht(8+2*r.length);return O1(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function b_e(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?bi(Yn(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?gr(e,2,pNe(r,a,s)):gr(e,3,fNe(r,a,s));return;case"b":case"e":gr(e,5,v_e(r,a,t.v,t.t));return;case"s":case"str":gr(e,4,g_e(r,a,(t.v||"").slice(0,255)));return}gr(e,1,O1(null,r,a))}function y_e(e,t,r,a){var s=Array.isArray(t),i=Wa(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=pa(i)}for(var d=i.s.r;d<=i.e.r;++d){l=Ws(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=ms(u)),o=c[u]+l;var h=s?(t[d]||[])[u]:t[o];h&&b_e(e,h,d,u)}}}function j_e(e,t){for(var r=t||{},a=gl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return gr(a,r.biff==4?1033:r.biff==3?521:9,fI(e,16,r)),y_e(a,e.Sheets[e.SheetNames[s]],s,r),gr(a,10),a.end()}function N_e(e,t,r){gr(e,49,pje({sz:12,name:"Arial"},r))}function w_e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&gr(e,1054,jje(s,t[s],r))})}function S_e(e,t){var r=Ht(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),gr(e,2151,r),r=Ht(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),BG(Wa(t["!ref"]||"A1"),r),r.write_shift(4,4),gr(e,2152,r)}function C_e(e,t){for(var r=0;r<16;++r)gr(e,224,NB({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){gr(e,224,NB(a,0,t))})}function k_e(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];gr(e,440,Kje(a)),a[1].Tooltip&&gr(e,2048,Qje(a))}delete t["!links"]}function E_e(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&gr(e,125,aNe(oC(s,a),s))})}}function __e(e,t,r,a,s){var i=16+up(s.cellXfs,t,s);if(t.v==null&&!t.bf){gr(e,513,Lx(r,a,i));return}if(t.bf)gr(e,6,eCe(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?bi(Yn(t.v)):t.v;gr(e,515,Pje(r,a,o,i));break;case"b":case"e":gr(e,517,Tje(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=jI(s.Strings,t.v,s.revStrings);gr(e,253,vje(r,a,l,i))}else gr(e,516,bje(r,a,(t.v||"").slice(0,255),i,s));break;default:gr(e,513,Lx(r,a,i))}}function D_e(e,t,r){var a=gl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,h="",f=[],p=Wa(i["!ref"]||"A1"),v=d?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}gr(a,2057,fI(r,16,t)),gr(a,13,Mc(1)),gr(a,12,Mc(100)),gr(a,15,Xo(!0)),gr(a,17,Xo(!1)),gr(a,16,Rx(.001)),gr(a,95,Xo(!0)),gr(a,42,Xo(!1)),gr(a,43,Xo(!1)),gr(a,130,Mc(1)),gr(a,128,Aje()),gr(a,131,Xo(!1)),gr(a,132,Xo(!1)),d&&E_e(a,i["!cols"]),gr(a,512,wje(p,t)),d&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){h=Ws(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(f[b]=ms(b)),u=f[b]+h;var y=c?(i[g]||[])[b]:i[u];y&&(__e(a,y,g,b,t),d&&y.l&&i["!links"].push([u,y.l]))}}var S=l.CodeName||l.name||s;return d&&gr(a,574,hje((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&gr(a,229,qje(i["!merges"])),d&&k_e(a,i),gr(a,442,MG(S)),d&&S_e(a,i),gr(a,10),a.end()}function A_e(e,t,r){var a=gl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(gr(a,2057,fI(e,5,r)),r.bookType=="xla"&&gr(a,135),gr(a,225,l?Mc(1200):null),gr(a,193,T1e(2)),c&&gr(a,191),c&&gr(a,192),gr(a,226),gr(a,92,Z1e("SheetJS",r)),gr(a,66,Mc(l?1200:1252)),l&&gr(a,353,Mc(0)),l&&gr(a,448),gr(a,317,iNe(e.SheetNames.length)),l&&e.vbaraw&&gr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";gr(a,442,MG(d))}gr(a,156,Mc(17)),gr(a,25,Xo(!1)),gr(a,18,Xo(!1)),gr(a,19,Mc(0)),l&&gr(a,431,Xo(!1)),l&&gr(a,444,Mc(0)),gr(a,61,dje()),gr(a,64,Xo(!1)),gr(a,141,Mc(0)),gr(a,34,Xo(lEe(e)=="true")),gr(a,14,Xo(!0)),l&&gr(a,439,Xo(!1)),gr(a,218,Mc(0)),N_e(a,e,r),w_e(a,e.SSF,r),C_e(a,r),l&&gr(a,352,Xo(!1));var u=a.end(),h=gl();l&&gr(h,140,Zje()),l&&r.Strings&&x_e(h,252,nje(r.Strings)),gr(h,10);var f=h.end(),p=gl(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var b=u.length+v+f.length;for(g=0;g<e.SheetNames.length;++g){var y=i[g]||{};gr(p,133,rje({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var S=p.end();if(v!=S.length)throw new Error("BS8 "+v+" != "+S.length);var w=[];return u.length&&w.push(u),S.length&&w.push(S),f.length&&w.push(f),Li(w)}function T_e(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Kn(Zr)),e&&e.SSF&&(kg(),eC(e.SSF),r.revssf=rC(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,kI(r),r.cellXfs=[],up(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=D_e(s,r,e);return a.unshift(A_e(e,a,r)),Li(a)}function _Y(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=jl(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return T_e(e,t);case 4:case 3:case 2:return j_e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function FB(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=pye(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,f=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var g=c[o].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var S=y[l].trim();if(S.match(/<t[dh]/i)){for(var w=S,k=0;w.charAt(0)=="<"&&(k=w.indexOf(">"))>-1;)w=w.slice(k+1);for(var C=0;C<v.length;++C){var _=v[C];_.s.c==u&&_.s.r<d&&d<=_.e.r&&(u=_.e.c+1,C=-1)}var E=sa(S.slice(0,S.indexOf(">")));f=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||f>1)&&v.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+f-1}});var T=E.t||E["data-t"]||"";if(!w.length){u+=f;continue}if(w=JW(w),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!w.length){u+=f;continue}var I={t:"s",v:w};r.raw||!w.trim().length||T=="s"||(w==="TRUE"?I={t:"b",v:!0}:w==="FALSE"?I={t:"b",v:!1}:isNaN(Td(w))?isNaN(K0(w).getDate())||(I={t:"d",v:Yn(w)},r.cellDates||(I={t:"n",v:bi(I.v)}),I.z=r.dateNF||Zr[14]):I={t:"n",v:Td(w)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=I):a[ra({r:d,c:u})]=I,u+=f}}}}return a["!ref"]=pa(p),v.length&&(a["!merges"]=v),a}function I_e(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=ra({r,c:o}),h=a.dense?(e[r]||[])[o]:e[u],f=h&&h.v!=null&&(h.h||eI(h.w||(uf(h),h.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?f='<span contenteditable="true">'+f+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),p.id=(a.id||"sjs")+"-"+u,i.push(vr("td",f,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var P_e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',O_e="</body></html>";function M_e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return dp(FB(r[0],t),t);var a=DI();return r.forEach(function(s,i){AI(a,FB(s,t),"Sheet"+(i+1))}),a}function R_e(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function DY(e,t){var r=t||{},a=r.header!=null?r.header:P_e,s=r.footer!=null?r.footer:O_e,i=[a],o=jl(e["!ref"]);r.dense=Array.isArray(e),i.push(R_e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(I_e(e,o,l,r));return i.push("</table>"+s),i.join("")}function AY(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?ps(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=jl(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],f=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,b=0,y=0,S=0,w=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var k=l[v];if(LB(k)){if(a.display)continue;p[g]={hidden:!0}}var C=k.children;for(b=y=0;b<C.length;++b){var _=C[b];if(!(a.display&&LB(_))){var E=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):JW(_.innerHTML),T=_.getAttribute("data-z")||_.getAttribute("z");for(f=0;f<h.length;++f){var I=h[f];I.s.c==y+i&&I.s.r<g+s&&g+s<=I.e.r&&(y=I.e.c+1-i,f=-1)}w=+_.getAttribute("colspan")||1,((S=+_.getAttribute("rowspan")||1)>1||w>1)&&h.push({s:{r:g+s,c:y+i},e:{r:g+s+(S||1)-1,c:y+i+(w||1)-1}});var F={t:"s",v:E},A=_.getAttribute("data-t")||_.getAttribute("t")||"";E!=null&&(E.length==0?F.t=A||"z":a.raw||E.trim().length==0||A=="s"||(E==="TRUE"?F={t:"b",v:!0}:E==="FALSE"?F={t:"b",v:!1}:isNaN(Td(E))?isNaN(K0(E).getDate())||(F={t:"d",v:Yn(E)},a.cellDates||(F={t:"n",v:bi(F.v)}),F.z=a.dateNF||Zr[14]):F={t:"n",v:Td(E)})),F.z===void 0&&T!=null&&(F.z=T);var P="",q=_.getElementsByTagName("A");if(q&&q.length)for(var V=0;V<q.length&&!(q[V].hasAttribute("href")&&(P=q[V].getAttribute("href"),P.charAt(0)!="#"));++V);P&&P.charAt(0)!="#"&&(F.l={Target:P}),a.dense?(e[g+s]||(e[g+s]=[]),e[g+s][y+i]=F):e[ra({c:y+i,r:g+s})]=F,d.e.c<y+i&&(d.e.c=y+i),y+=w}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=pa(d),g>=c&&(e["!fullref"]=pa((d.e.r=l.length-v+g-1+s,d))),e}function TY(e,t){var r=t||{},a=r.dense?[]:{};return AY(a,e,t)}function F_e(e,t){return dp(TY(e,t),t)}function LB(e){var t="",r=L_e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function L_e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function B_e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ha(t.replace(/<[^>]*>/g,""));return[r]}var BB={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function IY(e,t){var r=t||{},a=tI(e),s=[],i,o,l={name:""},c="",d=0,u,h,f={},p=[],v=r.dense?[]:{},g,b,y={value:""},S="",w=0,k=[],C=-1,_=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,I={},F=[],A={},P=0,q=0,V=[],Y=1,B=1,Q=[],R={Names:[]},Z={},J=["",""],ie=[],M={},z="",ee=0,ne=!1,W=!1,re=0;for(By.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=By.exec(a);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=pa(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=pa(E)),F.length&&(v["!merges"]=F),V.length&&(v["!rows"]=V),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),f[u.name]=v,W=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=sa(g[0],!1),C=_=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},F=[],V=[],W=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){C+=Y,Y=1;break}if(h=sa(g[0],!1),h.?C=h.-1:C==-1&&(C=0),Y=+h["number-rows-repeated"]||1,Y<10)for(re=0;re<Y;++re)T>0&&(V[C+re]={level:T});_=-1;break;case"covered-table-cell":g[1]!=="/"&&++_,r.sheetStubs&&(r.dense?(v[C]||(v[C]=[]),v[C][_]={t:"z"}):v[ra({r:C,c:_})]={t:"z"}),S="",k=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++_,y=sa(g[0],!1),B=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=OB(Ha(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Ha(y["string-value"]||""),r.dense?(v[C]||(v[C]=[]),v[C][_]=b):v[ra({r:C,c:_})]=b),_+=B-1;else if(g[1]!=="/"){++_,S="",w=0,k=[],B=1;var le=Y?C+Y-1:C;if(_>E.e.c&&(E.e.c=_),_<E.s.c&&(E.s.c=_),C<E.s.r&&(E.s.r=C),le>E.e.r&&(E.e.r=le),y=sa(g[0],!1),ie=[],M={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Ha(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(P=parseInt(y["number-matrix-rows-spanned"],10)||0,q=parseInt(y["number-matrix-columns-spanned"],10)||0,A={s:{r:C,c:_},e:{r:C+P-1,c:_+q-1}},b.F=pa(A),Q.push([A,b.F])),y.formula)b.f=OB(y.formula);else for(re=0;re<Q.length;++re)C>=Q[re][0].s.r&&C<=Q[re][0].e.r&&_>=Q[re][0].s.c&&_<=Q[re][0].e.c&&(b.F=Q[re][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(P=parseInt(y["number-rows-spanned"],10)||0,q=parseInt(y["number-columns-spanned"],10)||0,A={s:{r:C,c:_},e:{r:C+P-1,c:_+q-1}},F.push(A)),y["number-columns-repeated"]&&(B=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Hn(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Yn(y["date-value"]),r.cellDates||(b.t="n",b.v=bi(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=hye(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=aC(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(S=Ha(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(ne=!1,b.t==="s"&&(b.v=S||"",k.length&&(b.R=k),ne=w==0),Z.Target&&(b.l=Z),ie.length>0&&(b.c=ie,ie=[]),S&&r.cellText!==!1&&(b.w=S),ne&&(b.t="z",delete b.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=C))for(var te=0;te<Y;++te){if(B=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(v[C+te]||(v[C+te]=[]),v[C+te][_]=te==0?b:Kn(b);--B>0;)v[C+te][_+B]=Kn(b);else for(v[ra({r:C+te,c:_})]=b;--B>0;)v[ra({r:C+te,c:_+B})]=Kn(b);E.e.c<=_&&(E.e.c=_)}B=parseInt(y["number-columns-repeated"]||"1",10),_+=B-1,B=0,b={},S="",k=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;M.t=S,k.length&&(M.R=k),M.a=z,ie.push(M)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);z="",ee=0,S="",w=0,k=[];break;case"creator":g[1]==="/"?z=a.slice(ee,g.index):ee=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);S="",w=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=sa(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=sa(g[0],!1),c+=BB[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=sa(g[0],!1),c+=BB[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=sa(g[0],!1),J=q_(o["cell-range-address"]);var K={Name:o.name,Ref:J[0]+"!"+J[1]};W&&(K.Sheet=p.length),R.Names.push(K);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var de=B_e(a.slice(w,g.index));S=(S.length>0?S+`
`:"")+de[0]}else sa(g[0],!1),w=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{J=q_(sa(g[0])["target-range-address"]),f[J[0]]["!autofilter"]={ref:J[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(Z=sa(g[0],!1),!Z.href)break;Z.Target=Ha(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(J=q_(Z.Target.slice(1)),Z.Target="#"+J[0]+"!"+J[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var H={Sheets:f,SheetNames:p,Workbook:R};return r.bookSheets&&delete H.Sheets,H}function UB(e,t){t=t||{},Oc(e,"META-INF/manifest.xml")&&h1e(si(e,"META-INF/manifest.xml"),t);var r=Zl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=IY(_n(r),t);return Oc(e,"meta.xml")&&(a.Props=NG(si(e,"meta.xml"))),a}function $B(e,t){return IY(e,t)}var U_e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Ly({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Qs+t}}(),VB=function(){var e=function(i){return jn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+jn(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=jl(i["!ref"]||"A1"),f=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",b=i["!rows"]||[];for(d=0;d<h.s.r;++d)g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(t);for(;u<=h.e.c;++u){var y=!1,S={},w="";for(p=0;p!=f.length;++p)if(!(f[p].s.c>u)&&!(f[p].s.r>d)&&!(f[p].e.c<u)&&!(f[p].e.r<d)){(f[p].s.c!=u||f[p].s.r!=d)&&(y=!0),S["table:number-columns-spanned"]=f[p].e.c-f[p].s.c+1,S["table:number-rows-spanned"]=f[p].e.r-f[p].s.r+1;break}if(y){c.push(r);continue}var k=ra({r:d,c:u}),C=v?(i[d]||[])[u]:i[k];if(C&&C.f&&(S["table:formula"]=jn(iCe(C.f)),C.F&&C.F.slice(0,k.length)==k)){var _=jl(C.F);S["table:number-matrix-columns-spanned"]=_.e.c-_.s.c+1,S["table:number-matrix-rows-spanned"]=_.e.r-_.s.r+1}if(!C){c.push(t);continue}switch(C.t){case"b":w=C.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=C.v?"true":"false";break;case"n":w=C.w||String(C.v||0),S["office:value-type"]="float",S["office:value"]=C.v||0;break;case"s":case"str":w=C.v==null?"":C.v,S["office:value-type"]="string";break;case"d":w=C.w||Yn(C.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Yn(C.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(w);if(C.l&&C.l.Target){var T=C.l.Target;T=T.charAt(0)=="#"?"#"+oCe(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),E=vr("text:a",E,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+vr("table:table-cell",vr("text:p",E,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Km(h),h.ods=l;var f=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Qs],d=Ly({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Ly({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(jG().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(a(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function PY(e,t){if(t.bookType=="fods")return VB(e,t);var r=Q4(),a="",s=[],i=[];return a="mimetype",ba(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",ba(r,a,VB(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",ba(r,a,U_e(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",ba(r,a,Qs+jG()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",ba(r,a,p1e(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",ba(r,a,f1e(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function RA(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):_n(cp(e))}function $_e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Jl(Bu(e))}function V_e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Qm(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function qB(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function q_e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function z_e(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function Wy(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function vn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function _s(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ja(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=Wy(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Wy(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ji(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(vn(a*8+s.type)),s.type==2&&t.push(vn(s.data.length)),t.push(s.data))})}),Qm(t)}function SI(e,t){return e?.map(function(r){return t(r.data)})||[]}function Ic(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=Wy(e,a),i=Ja(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:_s(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Ja(l.data),d=_s(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=_s(i[3][0].data)>>>0>0),r.push(o)}return r}function Yv(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:vn(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:vn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:vn(o.data.length)}],a[2].push({data:Ji(o.meta),type:2})});var i=Ji(a);t.push(vn(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),Qm(t)}function H_e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Wy(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Qm(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=Qm(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function Pc(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(H_e(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Qm(t)}function Kv(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=vn(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return Qm(t)}function W_e(e,t,r,a){var s=Bx(e),i=s.getUint32(4,!0),o=(a>1?12:8)+qB(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=qB(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function G_e(e,t,r){var a=Bx(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=q_e(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return h}function H_(e,t){var r=new Uint8Array(32),a=Bx(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,z_e(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function W_(e,t){var r=new Uint8Array(32),a=Bx(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Y_e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return W_e(e,t,r,e[0]);case 5:return G_e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function So(e){var t=Ja(e);return Wy(t[1][0].data)}function zB(e,t){var r=Ja(t.data),a=_s(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Ja(o.data),c=_s(l[1][0].data)>>>0;switch(a){case 1:i[c]=RA(l[3][0].data);break;case 8:{var d=e[So(l[9][0].data)][0],u=Ja(d.data),h=e[So(u[1][0].data)][0],f=_s(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var p=Ja(h.data);i[c]=p[3].map(function(v){return RA(v.data)}).join("")}break}}),i}function K_e(e,t){var r,a,s,i,o,l,c,d,u,h,f,p,v,g,b=Ja(e),y=_s(b[1][0].data)>>>0,S=_s(b[2][0].data)>>>0,w=((a=(r=b[8])==null?void 0:r[0])==null?void 0:a.data)&&_s(b[8][0].data)>0||!1,k,C;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)k=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,C=(d=(c=b[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=b[4])==null?void 0:u[0])!=null&&h.data&&t!=1)k=(p=(f=b[4])==null?void 0:f[0])==null?void 0:p.data,C=(g=(v=b[3])==null?void 0:v[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var _=w?4:1,E=Bx(k),T=[],I=0;I<k.length/2;++I){var F=E.getUint16(I*2,!0);F<65535&&T.push([I,F])}if(T.length!=S)throw"Expected ".concat(S," cells, found ").concat(T.length);var A=[];for(I=0;I<T.length-1;++I)A[T[I][0]]=C.subarray(T[I][1]*_,T[I+1][1]*_);return T.length>=1&&(A[T[T.length-1][0]]=C.subarray(T[T.length-1][1]*_)),{R:y,cells:A}}function X_e(e,t){var r,a=Ja(t.data),s=(r=a?.[7])!=null&&r[0]?_s(a[7][0].data)>>>0>0?1:0:-1,i=SI(a[5],function(o){return K_e(o,s)});return{nrows:_s(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function Q_e(e,t,r){var a,s=Ja(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(_s(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(_s(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=pa(i);var o=Ja(s[4][0].data),l=zB(e,e[So(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?zB(e,e[So(o[17][0].data)][0]):[],d=Ja(o[3][0].data),u=0;d[1].forEach(function(h){var f=Ja(h.data),p=e[So(f[2][0].data)][0],v=_s(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var g=X_e(e,p);g.data.forEach(function(b,y){b.forEach(function(S,w){var k=ra({r:u+y,c:w}),C=Y_e(S,l,c);C&&(r[k]=C)})}),u+=g.nrows})}function J_e(e,t){var r=Ja(t.data),a={"!ref":"A1"},s=e[So(r[2][0].data)],i=_s(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Q_e(e,s[0],a),a}function Z_e(e,t){var r,a=Ja(t.data),s={name:(r=a[1])!=null&&r[0]?RA(a[1][0].data):"",sheets:[]},i=SI(a[2],So);return i.forEach(function(o){e[o].forEach(function(l){var c=_s(l.meta[1][0].data);c==6e3&&s.sheets.push(J_e(e,l))})}),s}function eDe(e,t){var r=DI(),a=Ja(t.data),s=SI(a[1],So);if(s.forEach(function(i){e[i].forEach(function(o){var l=_s(o.meta[1][0].data);if(l==2){var c=Z_e(e,o);c.sheets.forEach(function(d,u){AI(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function G_(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Pc(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Ic(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&_s(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=_s(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return eDe(i,l)}function tDe(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&_s(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Bx(e[7][0].data),u=0,h=[],f=Bx(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),f.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=H_({t:"s",v:t[g]},r),y=W_({t:"s",v:t[g]},r);break;case"number":b=H_({t:"n",v:t[g]},r),y=W_({t:"n",v:t[g]},r);break;case"boolean":b=H_({t:"b",v:t[g]},r),y=W_({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}h.push(b),u+=b.length,v.push(y),p+=y.length,++c}for(e[2][0].data=vn(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535,!0);return e[6][0].data=Qm(h),e[3][0].data=Qm(v),c}function rDe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=jl(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(pa(a)));var i=b2(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(z){return z.forEach(function(ee){typeof ee=="string"&&o.push(ee)})});var l={},c=[],d=Hr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(z,ee){return[z,d.FullPaths[ee]]}).forEach(function(z){var ee=z[0],ne=z[1];if(ee.type==2&&ee.name.match(/\.iwa/)){var W=ee.content,re=Pc(W),le=Ic(re);le.forEach(function(te){c.push(te.id),l[te.id]={deps:[],location:ne,type:_s(te.messages[0].meta[1][0].data)}})}}),c.sort(function(z,ee){return z-ee});var u=c.filter(function(z){return z>1}).map(function(z){return[z,vn(z)]});d.FileIndex.map(function(z,ee){return[z,d.FullPaths[ee]]}).forEach(function(z){var ee=z[0];if(z[1],!!ee.name.match(/\.iwa/)){var ne=Ic(Pc(ee.content));ne.forEach(function(W){W.messages.forEach(function(re){u.forEach(function(le){W.messages.some(function(te){return _s(te.meta[1][0].data)!=11006&&V_e(te.data,le[1])})&&l[le[0]].deps.push(W.id)})})})}});for(var h=Hr.find(d,l[1].location),f=Ic(Pc(h.content)),p,v=0;v<f.length;++v){var g=f[v];g.id==1&&(p=g)}var b=So(Ja(p.messages[0].data)[1][0].data);for(h=Hr.find(d,l[b].location),f=Ic(Pc(h.content)),v=0;v<f.length;++v)g=f[v],g.id==b&&(p=g);for(b=So(Ja(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),f=Ic(Pc(h.content)),v=0;v<f.length;++v)g=f[v],g.id==b&&(p=g);for(b=So(Ja(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),f=Ic(Pc(h.content)),v=0;v<f.length;++v)g=f[v],g.id==b&&(p=g);var y=Ja(p.messages[0].data);{y[6][0].data=vn(a.e.r+1),y[7][0].data=vn(a.e.c+1);var S=So(y[46][0].data),w=Hr.find(d,l[S].location),k=Ic(Pc(w.content));{for(var C=0;C<k.length&&k[C].id!=S;++C);if(k[C].id!=S)throw"Bad ColumnRowUIDMapArchive";var _=Ja(k[C].messages[0].data);_[1]=[],_[2]=[],_[3]=[];for(var E=0;E<=a.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:vn(E+420690)}],_[1].push({type:2,data:Ji(T)}),_[2].push({type:0,data:vn(E)}),_[3].push({type:0,data:vn(E)})}_[4]=[],_[5]=[],_[6]=[];for(var I=0;I<=a.e.r;++I)T=[],T[1]=T[2]=[{type:0,data:vn(I+726270)}],_[4].push({type:2,data:Ji(T)}),_[5].push({type:0,data:vn(I)}),_[6].push({type:0,data:vn(I)});k[C].messages[0].data=Ji(_)}w.content=Kv(Yv(k)),w.size=w.content.length,delete y[46];var F=Ja(y[4][0].data);{F[7][0].data=vn(a.e.r+1);var A=Ja(F[1][0].data),P=So(A[2][0].data);w=Hr.find(d,l[P].location),k=Ic(Pc(w.content));{if(k[0].id!=P)throw"Bad HeaderStorageBucket";var q=Ja(k[0].messages[0].data);for(I=0;I<i.length;++I){var V=Ja(q[2][0].data);V[1][0].data=vn(I),V[4][0].data=vn(i[I].length),q[2][I]={type:q[2][0].type,data:Ji(V)}}k[0].messages[0].data=Ji(q)}w.content=Kv(Yv(k)),w.size=w.content.length;var Y=So(F[2][0].data);w=Hr.find(d,l[Y].location),k=Ic(Pc(w.content));{if(k[0].id!=Y)throw"Bad HeaderStorageBucket";for(q=Ja(k[0].messages[0].data),E=0;E<=a.e.c;++E)V=Ja(q[2][0].data),V[1][0].data=vn(E),V[4][0].data=vn(a.e.r+1),q[2][E]={type:q[2][0].type,data:Ji(V)};k[0].messages[0].data=Ji(q)}w.content=Kv(Yv(k)),w.size=w.content.length;var B=So(F[4][0].data);(function(){for(var z=Hr.find(d,l[B].location),ee=Ic(Pc(z.content)),ne,W=0;W<ee.length;++W){var re=ee[W];re.id==B&&(ne=re)}var le=Ja(ne.messages[0].data);{le[3]=[];var te=[];o.forEach(function(H,se){te[1]=[{type:0,data:vn(se)}],te[2]=[{type:0,data:vn(1)}],te[3]=[{type:2,data:$_e(H)}],le[3].push({type:2,data:Ji(te)})})}ne.messages[0].data=Ji(le);var K=Yv(ee),de=Kv(K);z.content=de,z.size=z.content.length})();var Q=Ja(F[3][0].data);{var R=Q[1][0];delete Q[2];var Z=Ja(R.data);{var J=So(Z[2][0].data);(function(){for(var z=Hr.find(d,l[J].location),ee=Ic(Pc(z.content)),ne,W=0;W<ee.length;++W){var re=ee[W];re.id==J&&(ne=re)}var le=Ja(ne.messages[0].data);{delete le[6],delete Q[7];var te=new Uint8Array(le[5][0].data);le[5]=[];for(var K=0,de=0;de<=a.e.r;++de){var H=Ja(te);K+=tDe(H,i[de],o),H[1][0].data=vn(de),le[5].push({data:Ji(H),type:2})}le[1]=[{type:0,data:vn(a.e.c+1)}],le[2]=[{type:0,data:vn(a.e.r+1)}],le[3]=[{type:0,data:vn(K)}],le[4]=[{type:0,data:vn(a.e.r+1)}]}ne.messages[0].data=Ji(le);var se=Yv(ee),be=Kv(se);z.content=be,z.size=z.content.length})()}R.data=Ji(Z)}F[3][0].data=Ji(Q)}y[4][0].data=Ji(F)}p.messages[0].data=Ji(y);var ie=Yv(f),M=Kv(ie);return h.content=M,h.size=h.content.length,d}function OY(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function CI(e){OY([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function kI(e){OY([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function aDe(e){return ka.WS.indexOf(e)>-1?"sheet":e==ka.CS?"chart":e==ka.DS?"dialog":e==ka.MS?"macro":e&&e.length?e:"sheet"}function nDe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,aDe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function sDe(e,t,r,a,s,i,o,l,c,d,u,h){try{i[a]=dy(Zl(e,r,!0),t);var f=si(e,t),p;switch(l){case"sheet":p=EEe(f,t,s,c,i[a],d,u,h);break;case"chart":if(p=_Ee(f,t,s,c,i[a],d,u,h),!p||!p["!drawel"])break;var v=ey(p["!drawel"].Target,t),g=Uy(v),b=m2e(Zl(e,v,!0),dy(Zl(e,g,!0),v)),y=ey(b,v),S=Uy(y);p=tEe(Zl(e,y,!0),y,c,dy(Zl(e,S,!0),y),d,p);break;case"macro":p=DEe(f,t,s,c,i[a],d,u,h);break;case"dialog":p=AEe(f,t,s,c,i[a],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var w=[];i&&i[a]&&As(i[a]).forEach(function(k){var C="";if(i[a][k].Type==ka.CMNT){C=ey(i[a][k].Target,t);var _=OEe(si(e,C,!0),C,c);if(!_||!_.length)return;DB(p,_,!1)}i[a][k].Type==ka.TCMNT&&(C=ey(i[a][k].Target,t),w=w.concat(x2e(si(e,C,!0),c)))}),w&&w.length&&DB(p,w,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Dc(e){return e.charAt(0)=="/"?e.slice(1):e}function iDe(e,t){if(kg(),t=t||{},CI(t),Oc(e,"META-INF/manifest.xml")||Oc(e,"objectdata.xml"))return UB(e,t);if(Oc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof G_<"u"){if(e.FileIndex)return G_(e);var r=Hr.utils.cfb_new();return X8(e).forEach(function(V){ba(r,V,vye(e,V))}),G_(r)}throw new Error("Unsupported NUMBERS file")}if(!Oc(e,"[Content_Types].xml"))throw Oc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Oc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=X8(e),s=d1e(Zl(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",si(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!si(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(uy=[],s.sst)try{uy=PEe(si(e,Dc(s.sst)),s.sst,t)}catch(V){if(t.WTF)throw V}t.cellStyles&&s.themes.length&&(c=IEe(Zl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=TEe(si(e,Dc(s.style)),s.style,c,t))}s.links.map(function(V){try{var Y=dy(Zl(e,Uy(Dc(V))),V);return REe(si(e,Dc(V)),Y,V,t)}catch{}});var u=kEe(si(e,Dc(s.workbooks[0])),s.workbooks[0],t),h={},f="";s.coreprops.length&&(f=si(e,Dc(s.coreprops[0]),!0),f&&(h=NG(f)),s.extprops.length!==0&&(f=si(e,Dc(s.extprops[0]),!0),f&&v1e(f,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(f=Zl(e,Dc(s.custprops[0]),!0),f&&(p=b1e(f,t)));var v={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(Y){return Y.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(v.Props=h,v.Custprops=p),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var g={};t.bookDeps&&s.calcchain&&(g=MEe(si(e,Dc(s.calcchain)),s.calcchain));var b=0,y={},S,w;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var C=0;C!=k.length;++C)h.SheetNames[C]=k[C].name}var _=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Oc(e,T)||(T="xl/_rels/workbook."+_+".rels");var I=dy(Zl(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=FEe(si(e,Dc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=g2e(si(e,Dc(s.people[0])),t)),I&&(I=nDe(I,u.Sheets));var F=si(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var A="sheet";if(I&&I[b]?(S="xl/"+I[b][1].replace(/[\/]?xl\//,""),Oc(e,S)||(S=I[b][1]),Oc(e,S)||(S=T.replace(/_rels\/.*$/,"")+I[b][1]),A=I[b][2]):(S="xl/worksheets/sheet"+(b+1-F)+"."+_,S=S.replace(/sheet0\./,"sheet.")),w=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var P=!1,q=0;q!=t.sheets.length;++q)typeof t.sheets[q]=="number"&&t.sheets[q]==b&&(P=1),typeof t.sheets[q]=="string"&&t.sheets[q].toLowerCase()==h.SheetNames[b].toLowerCase()&&(P=1);if(!P)continue e}}sDe(e,S,w,h.SheetNames[b],b,y,o,A,t,u,c,d)}return v={Directory:s,Workbook:u,Props:h,Custprops:p,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:uy,Styles:d,Themes:c,SSF:Kn(Zr)},t&&t.bookFiles&&(e.files?(v.keys=a,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(V,Y){V=V.replace(/^Root Entry[\/]/,""),v.keys.push(V),v.files[V]=e.FileIndex[Y]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=si(e,Dc(s.vba[0]),!0):s.defaults&&s.defaults.bin===k2e&&(v.vbaraw=si(e,"xl/vbaProject.bin",!0))),v}function oDe(e,t){var r=t||{},a="Workbook",s=Hr.find(e,a);try{if(a="/!DataSpaces/Version",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(FNe(s.content),a="/!DataSpaces/DataSpaceMap",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=BNe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=UNe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);VNe(s.content)}catch{}if(a="/EncryptionInfo",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=qNe(s.content);if(a="/EncryptedPackage",s=Hr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function lDe(e,t){return t.bookType=="ods"?PY(e,t):t.bookType=="numbers"?rDe(e,t):t.bookType=="xlsb"?cDe(e,t):dDe(e,t)}function cDe(e,t){v0=1024,e&&!e.SSF&&(e.SSF=Kn(Zr)),e&&e.SSF&&(kg(),eC(e.SSF),t.revssf=rC(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,hy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=oY.indexOf(t.bookType)>-1,s=uI();kI(t=t||{});var i=Q4(),o="",l=0;if(t.cellXfs=[],up(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ba(i,o,wG(e.Props,t)),s.coreprops.push(o),bn(t.rels,2,o,ka.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,ba(i,o,kG(e.Props)),s.extprops.push(o),bn(t.rels,3,o,ka.EXT_PROPS),e.Custprops!==e.Props&&As(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ba(i,o,EG(e.Custprops)),s.custprops.push(o),bn(t.rels,4,o,ka.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ba(i,o,BEe(l-1,o,t,e,u)),s.sheets.push(o),bn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ka.WS[0])}if(h){var p=h["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,ba(i,g,VEe(p,g)),s.comments.push(g),bn(u,-1,"../comments"+l+"."+r,ka.CMNT),v=!0),h["!legacy"]&&v&&ba(i,"xl/drawings/vmlDrawing"+l+".vml",sY(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&ba(i,Uy(o),w0(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ba(i,o,$Ee(t.Strings,o,t)),s.strs.push(o),bn(t.wbrels,-1,"sharedStrings."+r,ka.SST)),o="xl/workbook."+r,ba(i,o,LEe(e,o)),s.workbooks.push(o),bn(t.rels,1,o,ka.WB),o="xl/theme/theme1.xml",ba(i,o,vI(e.Themes,t)),s.themes.push(o),bn(t.wbrels,-1,"theme/theme1.xml",ka.THEME),o="xl/styles."+r,ba(i,o,UEe(e,o,t)),s.styles.push(o),bn(t.wbrels,-1,"styles."+r,ka.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",ba(i,o,e.vbaraw),s.vba.push(o),bn(t.wbrels,-1,"vbaProject.bin",ka.VBA)),o="xl/metadata."+r,ba(i,o,qEe(o)),s.metadata.push(o),bn(t.wbrels,-1,"metadata."+r,ka.XLMETA),ba(i,"[Content_Types].xml",yG(s,t)),ba(i,"_rels/.rels",w0(t.rels)),ba(i,"xl/_rels/workbook."+r+".rels",w0(t.wbrels)),delete t.revssf,delete t.ssf,i}function dDe(e,t){v0=1024,e&&!e.SSF&&(e.SSF=Kn(Zr)),e&&e.SSF&&(kg(),eC(e.SSF),t.revssf=rC(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,hy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=oY.indexOf(t.bookType)>-1,s=uI();kI(t=t||{});var i=Q4(),o="",l=0;if(t.cellXfs=[],up(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ba(i,o,wG(e.Props,t)),s.coreprops.push(o),bn(t.rels,2,o,ka.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,ba(i,o,kG(e.Props)),s.extprops.push(o),bn(t.rels,3,o,ka.EXT_PROPS),e.Custprops!==e.Props&&As(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ba(i,o,EG(e.Custprops)),s.custprops.push(o),bn(t.rels,4,o,ka.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var h={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ba(i,o,gY(l-1,t,e,h)),s.sheets.push(o),bn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ka.WS[0])}if(f){var v=f["!comments"],g=!1,b="";if(v&&v.length>0){var y=!1;v.forEach(function(S){S[1].forEach(function(w){w.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+r,ba(i,b,v2e(v,u,t)),s.threadedcomments.push(b),bn(h,-1,"../threadedComments/threadedComment"+l+"."+r,ka.TCMNT)),b="xl/comments"+l+"."+r,ba(i,b,iY(v)),s.comments.push(b),bn(h,-1,"../comments"+l+"."+r,ka.CMNT),g=!0}f["!legacy"]&&g&&ba(i,"xl/drawings/vmlDrawing"+l+".vml",sY(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&ba(i,Uy(o),w0(h))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ba(i,o,GG(t.Strings,t)),s.strs.push(o),bn(t.wbrels,-1,"sharedStrings."+r,ka.SST)),o="xl/workbook."+r,ba(i,o,wY(e)),s.workbooks.push(o),bn(t.rels,1,o,ka.WB),o="xl/theme/theme1.xml",ba(i,o,vI(e.Themes,t)),s.themes.push(o),bn(t.wbrels,-1,"theme/theme1.xml",ka.THEME),o="xl/styles."+r,ba(i,o,tY(e,t)),s.styles.push(o),bn(t.wbrels,-1,"styles."+r,ka.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",ba(i,o,e.vbaraw),s.vba.push(o),bn(t.wbrels,-1,"vbaProject.bin",ka.VBA)),o="xl/metadata."+r,ba(i,o,nY()),s.metadata.push(o),bn(t.wbrels,-1,"metadata."+r,ka.XLMETA),u.length>1&&(o="xl/persons/person.xml",ba(i,o,b2e(u)),s.people.push(o),bn(t.wbrels,-1,"persons/person.xml",ka.PEOPLE)),ba(i,"[Content_Types].xml",yG(s,t)),ba(i,"_rels/.rels",w0(t.rels)),ba(i,"xl/_rels/workbook."+r+".rels",w0(t.wbrels)),delete t.revssf,delete t.ssf,i}function EI(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=dc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function uDe(e,t){return Hr.find(e,"EncryptedPackage")?oDe(e,t):EY(e,t)}function hDe(e,t){var r,a=e,s=t||{};return s.type||(s.type=wa&&Buffer.isBuffer(e)?"buffer":"base64"),r=KW(a,s),iDe(r,s)}function MY(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return OA(e.slice(r),t);default:break e}return X0.to_workbook(e,t)}function fDe(e,t){var r="",a=EI(e,t);switch(t.type){case"base64":r=dc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Mx(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=_n(r)),t.type="binary",MY(r,t)}function mDe(e,t){var r=e;return t.type=="base64"&&(r=dc(r)),r=Oy.utils.decode(1200,r.slice(2),"str"),t.type="binary",MY(r,t)}function pDe(e){return e.match(/[^\x00-\x7F]/)?Bu(e):e}function Y_(e,t,r,a){return a?(r.type="string",X0.to_workbook(e,r)):X0.to_workbook(t,r)}function FA(e,t){W4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return FA(new Uint8Array(e),(r=Kn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),C0={},r.dateNF&&(C0.dateNF=r.dateNF),r.type||(r.type=wa&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=wa?"buffer":"binary",a=cye(e),typeof Uint8Array<"u"&&!wa&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=pDe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Kn(r),r.type="array",FA(G4(a),r)}switch((s=EI(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return uDe(Hr.read(a,r),r);break;case 9:if(s[1]<=8)return EY(a,r);break;case 60:return OA(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return yNe(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return HG.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?hDe(a,r):Y_(e,a,r,i);case 239:return s[3]===60?OA(a,r):Y_(e,a,r,i);case 255:if(s[1]===254)return mDe(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return jx.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return jx.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return PA.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return JG.to_workbook(a,r);break;case 10:case 13:case 32:return fDe(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return bNe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?PA.to_workbook(a,r):Y_(e,a,r,i)}function RY(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return E1(t.file,Hr.write(e,{type:wa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function xDe(e,t){var r=Kn(t||{}),a=lDe(e,r);return vDe(a,r)}function vDe(e,t){var r={},a=wa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(ZS(s))}return t.password&&typeof encrypt_agile<"u"?RY(encrypt_agile(s,t.password),t):t.type==="file"?E1(t.file,s):t.type=="string"?_n(s):s}function gDe(e,t){var r=t||{},a=p_e(e,r);return RY(a,r)}function ku(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return My(Bu(a));case"binary":return Bu(a);case"string":return e;case"file":return E1(t.file,a,"utf8");case"buffer":return wa?bf(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ku(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function bDe(e,t){switch(t.type){case"base64":return My(e);case"binary":return e;case"string":return e;case"file":return E1(t.file,e,"binary");case"buffer":return wa?bf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?My(r):t.type=="string"?_n(r):r;case"file":return E1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function FY(e,t){W4(),uEe(e);var r=Kn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=FY(e,r);return r.type="array",ZS(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ku(l_e(e,r),r);case"slk":case"sylk":return ku(zG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ku(DY(e.Sheets[e.SheetNames[s]],r),r);case"txt":return bDe(LY(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ku(_I(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ku(HG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return jN(PA.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ku(X0.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ku(JG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ku(WG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ku(PY(e,r),r);case"wk1":return jN(jx.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return jN(jx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),jN(_Y(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),gDe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return xDe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function yDe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function sh(e,t,r){var a={};return a.type="file",a.file=t,yDe(a),FY(e,a)}function jDe(e,t,r,a,s,i,o,l){var c=Ws(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=o?e[r][p]:e[a[p]+c];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[p]!=null&&(f[i[p]]=d);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)f[i[p]]=null;else if(d!==void 0)f[i[p]]=d;else if(u&&g===null)f[i[p]]=null;else continue;else f[i[p]]=u&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:uf(v,g,l);g!=null&&(h=!1)}}return{row:f,isempty:h}}function b2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Wa(u);break;case"number":c=Wa(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var h=Ws(c.s.r),f=[],p=[],v=0,g=0,b=Array.isArray(e),y=c.s.r,S=0,w={};b&&!e[y]&&(e[y]=[]);var k=d.skipHidden&&e["!cols"]||[],C=d.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(k[S]||{}).hidden)switch(f[S]=ms(S),r=b?e[y][S]:e[f[S]+h],a){case 1:i[S]=S-c.s.c;break;case 2:i[S]=f[S];break;case 3:i[S]=d.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=uf(r,null,d),g=w[o]||0,!g)w[o]=1;else{do l=o+"_"+g++;while(w[l]);w[o]=g,w[l]=1}i[S]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(C[y]||{}).hidden){var _=jDe(e,c,y,f,a,i,b,d);(_.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(p[v++]=_.row)}return p.length=v,p}var HB=/"/g;function NDe(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",h=Ws(r),f=t.s.c;f<=t.e.c;++f)if(a[f]){var p=l.dense?(e[r]||[])[f]:e[a[f]+h];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:uf(p,null,l));for(var v=0,g=0;v!==u.length;++v)if((g=u.charCodeAt(v))===s||g===i||g===34||l.forceQuotes){u='"'+u.replace(HB,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(HB,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function _I(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Wa(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];a.dense=Array.isArray(e);for(var f=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(f[v]||{}).hidden||(h[v]=ms(v));for(var g=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(u=NDe(e,s,b,h,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete a.dense,r.join("")}function LY(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=_I(e,t);return r}function wDe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Wa(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=ms(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=Ws(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function BY(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ps(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var h=Wa(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var f=a.header||[],p=0;t.forEach(function(g,b){As(g).forEach(function(y){(p=f.indexOf(y))==-1&&(f[p=f.length]=y);var S=g[y],w="z",k="",C=ra({c:l+p,r:o+b+s});d=Gy(i,C),S&&typeof S=="object"&&!(S instanceof Date)?i[C]=S:(typeof S=="number"?w="n":typeof S=="boolean"?w="b":typeof S=="string"?w="s":S instanceof Date?(w="d",a.cellDates||(w="n",S=bi(S)),k=a.dateNF||Zr[14]):S===null&&a.nullError&&(w="e",S=0),d?(d.t=w,d.v=S,delete d.w,delete d.R,k&&(d.z=k)):i[C]=d={t:w,v:S},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+f.length-1);var v=Ws(o);if(s)for(p=0;p<f.length;++p)i[ms(p+l)+v]={t:"s",v:f[p]};return i["!ref"]=pa(u),i}function SDe(e,t){return BY(null,e,t)}function Gy(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=ps(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Gy(e,ra(t)):Gy(e,ra({r:t,c:r||0}))}function CDe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function DI(){return{SheetNames:[],Sheets:{}}}function AI(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(NY(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function kDe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=CDe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function EDe(e,t){return e.z=t,e}function UY(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function _De(e,t,r){return UY(e,"#"+t,r)}function DDe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function ADe(e,t,r,a){for(var s=typeof t!="string"?t:Wa(t),i=typeof t=="string"?t:pa(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Gy(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var on={encode_col:ms,encode_row:Ws,encode_cell:ra,encode_range:pa,decode_col:sI,decode_row:nI,split_cell:$ye,decode_cell:ps,decode_range:jl,format_cell:uf,sheet_add_aoa:fG,sheet_add_json:BY,sheet_add_dom:AY,aoa_to_sheet:Eg,json_to_sheet:SDe,table_to_sheet:TY,table_to_book:F_e,sheet_to_csv:_I,sheet_to_txt:LY,sheet_to_json:b2,sheet_to_html:DY,sheet_to_formulae:wDe,sheet_to_row_object_array:b2,sheet_get_cell:Gy,book_new:DI,book_append_sheet:AI,book_set_sheet_visibility:kDe,cell_set_number_format:EDe,cell_set_hyperlink:UY,cell_set_internal_link:_De,cell_add_comment:DDe,sheet_set_array_formula:ADe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Nf=({show:e,onClose:t,onImport:r,masterDataType:a,templateFields:s=[],apiEndpoint:i})=>{const[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState(!1),[f,p]=j.useState(0),[v,g]=j.useState([]),[b,y]=j.useState([]),[S,w]=j.useState(!1),[k,C]=j.useState(null),_=j.useRef(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("selectedFinancialYear");const E={material:{name:"Material Master",fields:["materialId","categoryName","description","baseUnit","orderUnit","conversionValue","dimension","hsn","mpn","minstock","safetyStock","maxstock","pdt","materialgroup","location"],sampleData:{materialId:"MAT001",categoryName:"Raw Materials",description:"Sample Raw Material Description",baseUnit:"KG",orderUnit:"KG",conversionValue:1,dimension:"10x10x10",hsn:"1234567890",mpn:"MPN001",minstock:10,safetyStock:5,maxstock:100,pdt:7,materialgroup:"RAW_MATERIAL",location:"WH01"}},customer:{name:"Customer Master",fields:["cnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","gstin","name","email","isDeleted","isBlocked"],sampleData:{cnNo:"CUST000001",categoryName:"Retail Customers",name1:"Sample Customer Pvt Ltd",name2:"Sample Customer",search:"SAMPLE_CUSTOMER",address1:"123, Business Street",address2:"Near Business Park",extraAddresses:"Alternative Address 1, Alternative Address 2",city:"Mumbai",pincode:"400001",region:"Maharashtra",country:"India",contactNo:"9876543210",gstin:"29AAAAP0267H1ZK",name:"Contact Person Name",email:"customer@example.com",isDeleted:!1,isBlocked:!1}},vendor:{name:"Vendor Master",fields:["vnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","gstin","contactname","email","isDeleted","isBlocked"],sampleData:{vnNo:"VEND000001",categoryName:"Raw Material Suppliers",name1:"Sample Vendor Pvt Ltd",name2:"Sample Vendor",search:"SAMPLE_VENDOR",address1:"456, Supplier Avenue",address2:"Industrial Area",extraAddresses:"Warehouse Address 1, Backup Address 2",city:"Delhi",pincode:"110001",region:"Delhi",country:"India",contactNo:"9876543210",gstin:"29AAAAP0267H1ZK",contactname:"Vendor Contact Person",email:"vendor@example.com",isDeleted:!1,isBlocked:!1}},customerPriceList:{name:"Customer Price List",fields:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup","taxCode","tandc"],sampleData:{categoryName:"Retail Customers",customerCode:"CUST000001",materialCode:"MAT001",unit:"KG",bum:250.75,orderUnit:"BOX",salesGroup:"RETAIL",taxCode:"GST1",tandc:"Payment terms: 30 days net. Delivery: FOB warehouse."}},vendorPriceList:{name:"Vendor Price List",fields:["categoryName","vendorCode","materialCode","unit","bum","orderUnit","buyer","taxCode"],sampleData:{categoryName:"Raw Material Suppliers",vendorCode:"VEND000001",materialCode:"MAT001",unit:"KG",bum:150.5,orderUnit:100,buyer:"John Doe",taxCode:"GST1"}},tax:{name:"Tax Master",fields:["taxCode","taxName","cgst","sgst","igst"],sampleData:{taxCode:"GST1",taxName:"GST Standard Rate 18%",cgst:"9",sgst:"9",igst:"18"}},location:{name:"Location Master",fields:["name","address","city","state","country","postalCode","contactPerson","contactNumber"],sampleData:{name:"Main Warehouse",address:"123, Industrial Area, Sector 5",city:"Bangalore",state:"Karnataka",country:"India",postalCode:"560001",contactPerson:"Warehouse Manager",contactNumber:"+91-9876543210"}},generalCondition:{name:"General Condition Master",fields:["name","description","isDeleted","isBlocked"],sampleData:{name:"Standard Terms and Conditions",description:"Default terms and conditions applicable to all transactions. Payment due within 30 days. Quality complaints must be reported within 48 hours.",isDeleted:!1,isBlocked:!1}},process:{name:"Process Master",fields:["processId","processDescription","isDeleted","isBlocked"],sampleData:{processId:"PROC001",processDescription:"Standard manufacturing process for raw material conversion. Includes quality checks at each stage.",isDeleted:!1,isBlocked:!1}}},T=()=>E[a]||E.material,I=Q=>{const R=Q.target.files[0];if(!R)return;if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"].includes(R.type)){alert("Please select a valid file format (CSV, Excel, or JSON)");return}l(R),g([]),C(null),F(R)},F=async Q=>{h(!0),p(10);try{if(Q.type==="application/json"){const R=await Q.text(),Z=JSON.parse(R);d(Array.isArray(Z)?Z:[Z])}else if(Q.type==="text/csv"){const Z=(await Q.text()).split(`
`),J=Z[0].split(",").map(M=>M.trim().replace(/"/g,"")),ie=Z.slice(1).filter(M=>M.trim()).map(M=>{const z=[];let ee="",ne=!1;for(let re=0;re<M.length;re++){const le=M[re];le==='"'&&(re===0||M[re-1]===",")?ne=!0:le==='"'&&ne&&(re===M.length-1||M[re+1]===",")?ne=!1:le===","&&!ne?(z.push(ee.trim()),ee=""):ee+=le}z.push(ee.trim());const W={};return J.forEach((re,le)=>{W[re]=z[le]||""}),W});d(ie)}else{const R=await Q.arrayBuffer(),Z=FA(R,{type:"buffer"}),J=Z.SheetNames[0],ie=Z.Sheets[J],M=on.sheet_to_json(ie);d(M)}p(50),A()}catch(R){console.error("Error parsing file:",R),g([{row:0,error:"Failed to parse file: "+R.message}])}finally{h(!1),p(100)}},A=()=>{const Q=[],R=c.slice(0,5);c.forEach((Z,J)=>{({material:["materialId","categoryName","description","baseUnit","orderUnit"],customer:["cnNo","categoryName","name1","search","address1","contactNo","region","country"],vendor:["vnNo","categoryName","name1","search","address1","contactNo","region","country"],vendorPriceList:["categoryName","vendorCode","materialCode","unit","bum","orderUnit"],customerPriceList:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup"],tax:["taxCode","taxName","cgst","sgst","igst"],location:["name"],generalCondition:[],process:[]}[a]||[]).forEach(z=>{(!Z[z]||Z[z].toString().trim()==="")&&Q.push({row:J+1,field:z,error:`${z} is required`})}),a==="tax"&&(Z.taxCode&&Z.taxCode.length>4&&Q.push({row:J+1,field:"taxCode",error:"taxCode must be 4 characters or less"}),Z.taxName&&Z.taxName.length>25&&Q.push({row:J+1,field:"taxName",error:"taxName must be 25 characters or less"}),Z.cgst&&Z.cgst.length>2&&Q.push({row:J+1,field:"cgst",error:"cgst must be 2 characters or less"}),Z.sgst&&Z.sgst.length>2&&Q.push({row:J+1,field:"sgst",error:"sgst must be 2 characters or less"}),Z.igst&&Z.igst.length>2&&Q.push({row:J+1,field:"igst",error:"igst must be 2 characters or less"}))}),g(Q),y(R)},P=Q=>{const R=T(),Z=[R.sampleData];if(Q==="csv"){const J=[R.fields.join(","),R.fields.map(ee=>{const ne=R.sampleData[ee]||"";return typeof ne=="string"&&ne.includes(",")?`"${ne}"`:ne}).join(",")].join(`
`),ie=new Blob([J],{type:"text/csv"}),M=window.URL.createObjectURL(ie),z=document.createElement("a");z.href=M,z.download=`${R.name.replace(/\s+/g,"_")}_Template.csv`,z.click(),window.URL.revokeObjectURL(M)}else if(Q==="excel"){const J=on.json_to_sheet(Z),ie=on.book_new();on.book_append_sheet(ie,J,"Template"),sh(ie,`${R.name.replace(/\s+/g,"_")}_Template.xlsx`)}else if(Q==="json"){const J=JSON.stringify(Z,null,2),ie=new Blob([J],{type:"application/json"}),M=window.URL.createObjectURL(ie),z=document.createElement("a");z.href=M,z.download=`${R.name.replace(/\s+/g,"_")}_Template.json`,z.click(),window.URL.revokeObjectURL(M)}},q=async()=>{if(v.length>0){alert("Please fix validation errors before importing");return}h(!0);try{const Q=localStorage.getItem("selectedCompanyId"),R=localStorage.getItem("financialYear"),Z=await fetch(`/api/master-data/${a}/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c,companyId:Q,financialYear:R})}),J=await Z.json();Z.ok?(C(J),r&&r(J)):alert("Import failed: "+J.message)}catch(Q){console.error("Import error:",Q),alert("Import failed: "+Q.message)}finally{h(!1)}},V=()=>{l(null),d([]),g([]),y([]),w(!1),C(null),p(0),_.current&&(_.current.value="")},Y=()=>{V(),t()};if(!e)return null;const B=T();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-upload me-2"}),"Import ",B.name]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Y})]}),n.jsx("div",{className:"modal-body",children:k?n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-check-circle me-2"}),"Import Complete"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-success",children:k.results?.imported||0}),n.jsx("p",{className:"text-muted",children:"Records Imported"})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-warning",children:k.results?.updated||0}),n.jsx("p",{className:"text-muted",children:"Records Updated"})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-danger",children:k.results?.failed||0}),n.jsx("p",{className:"text-muted",children:"Records Failed"})]})})]}),k.results?.errors&&k.results.errors.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{children:"Error Details:"}),n.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:k.results.errors.map((Q,R)=>n.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:n.jsx("small",{children:Q})},R))})]}),n.jsx("div",{className:"mt-3 d-flex justify-content-end",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Y,children:"Close"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-download me-2"}),"Download Template"]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("p",{className:"text-muted",children:"Download the template in your preferred format and fill in your data:"}),n.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:()=>P("csv"),children:[n.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Template"]}),n.jsxs("button",{className:"btn btn-outline-info btn-sm",onClick:()=>P("excel"),children:[n.jsx("i",{className:"fas fa-file-excel me-1"}),"Excel Template"]}),n.jsxs("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>P("json"),children:[n.jsx("i",{className:"fas fa-file-code me-1"}),"JSON Template"]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("small",{className:"text-muted",children:[n.jsx("strong",{children:"Template Fields:"})," ",B.fields.join(", ")]})})]})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-upload me-2"}),"Upload File"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"mb-3 col-xl-6",children:[n.jsx("input",{ref:_,type:"file",className:"form-control form-control-sm",accept:".csv,.xlsx,.xls,.json",onChange:I}),n.jsx("div",{className:"form-text",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]}),f>0&&f<100&&n.jsx("div",{className:"progress mb-3",children:n.jsxs("div",{className:"progress-bar",style:{width:`${f}%`},children:[f,"%"]})})]})]}),v.length>0&&n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-danger text-white",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"Validation Errors (",v.length,")"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:v.map((Q,R)=>n.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:n.jsxs("small",{children:["Row ",Q.row,": ",Q.field&&`${Q.field} - `,Q.error]})},R))})})]}),b.length>0&&n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-eye me-2"}),"Preview (First 5 records)"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsx("tr",{children:B.fields.map(Q=>n.jsx("th",{style:{minWidth:"120px"},children:Q},Q))})}),n.jsx("tbody",{children:b.map((Q,R)=>n.jsx("tr",{children:B.fields.map(Z=>n.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Q[Z]!==void 0&&Q[Z]!==null?Q[Z].toString():"-"},Z))},R))})]})})})]}),!k&&c.length>0&&n.jsx("div",{className:"d-flex justify-content-end",children:n.jsx("button",{type:"button",className:"btn btn-primary",onClick:q,disabled:u||v.length>0,children:u?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-upload me-1"}),"Import Data (",c.length," records)"]})})})]})})]})})})]})},WB=["Piece","Box","Kg","Ltr"],TDe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",minstock:"",safetyStock:"",maxstock:"",pdt:"",mpn:"",location:"",materialgroup:"",hsn:""}),[f,p]=j.useState(""),[v,g]=j.useState(1),[b]=j.useState(10),[y,S]=j.useState(!1),[w,k]=j.useState(!1),[C,_]=j.useState(""),[E,T]=j.useState(""),[I,F]=j.useState(null);j.useEffect(()=>{A(),V()},[]),j.useEffect(()=>{if(!f)l(r);else{const Ne=r.filter(Me=>{const We=f.toLowerCase();return(Me.materialId||"").toLowerCase().includes(We)||(Me.description||"").toLowerCase().includes(We)||(Me.baseUnit||"").toLowerCase().includes(We)||(Me.orderUnit||"").toLowerCase().includes(We)||(Me.conversionValue||"").toString().toLowerCase().includes(We)||(Me.dimension||"").toLowerCase().includes(We)||(Me.mpn||"").toLowerCase().includes(We)||(Me.hsn||"").toLowerCase().includes(We)||(Me.location||"").toLowerCase().includes(We)||(Me.materialgroup||"").toLowerCase().includes(We)});l(Ne)}g(1)},[f,r]);const A=async()=>{const Ne=await Ie.get("/api/category",{params:{companyId:P,financialYear:q}});t(Ne.data)},P=localStorage.getItem("selectedCompanyId"),q=localStorage.getItem("financialYear"),V=async()=>{const Ne=await Ie.get("/api/material",{params:{companyId:P,financialYear:q}});console.log(Ne);const Me=Ne.data.sort((We,tt)=>new Date(tt.createdAt)-new Date(We.createdAt));a(Me)},Y=Ne=>{const{name:Me,value:We}=Ne.target;h(tt=>({...tt,[Me]:We}))},B=Ne=>{p(Ne.target.value)},Q=Ne=>{d(Ne),h({categoryId:Ne.categoryId?._id||Ne.categoryId,description:Ne.description,baseUnit:Ne.baseUnit,orderUnit:Ne.orderUnit,conversionValue:Ne.conversionValue||"",dimension:Ne.dimension||"",mpn:Ne.mpn||"",location:Ne.location||"",materialgroup:Ne.materialgroup||"",hsn:Ne.hsn||"",minstock:Ne.minstock||"",safetyStock:Ne.safetyStock||"",maxstock:Ne.maxstock||"",pdt:Ne.pdt||""})},R=()=>{d(null),h({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",hsn:"",mpn:"",location:"",materialgroup:"",minstock:"",safetyStock:"",maxstock:"",pdt:""}),_(""),T(""),F(null)},Z=async Ne=>{Ne.preventDefault();try{c?(await Ie.put(`/api/material/${c._id}`,u),alert("Material updated!"),V(),R(),ee()):(F(u),S(!1),k(!0))}catch(Me){console.error(Me),alert("Operation failed!")}},J=async()=>{try{let Ne;const Me=localStorage.getItem("selectedCompanyId"),We=localStorage.getItem("financialYear");C==="external"?Ne=E:Ne=(await Ie.post("/api/material/generate-id",{categoryId:I.categoryId})).data.materialId,await Ie.post("/api/material",{...I,materialId:Ne,materialIdType:C,companyId:Me,financialYear:We}),alert("Material added!"),V(),R(),ee()}catch(Ne){console.error(Ne),alert("Operation failed!")}},ie=async(Ne,Me,We)=>{try{const tt={[Me]:We};await Ie.put(`/api/material/status/${Ne}`,tt),a(r.map(mt=>mt._id===Ne?{...mt,[Me]:We}:mt)),alert("Status updated successfully!")}catch(tt){console.error("Error updating status:",tt),alert("Failed to update status!")}},M=()=>{const Ne=o.map(It=>({"Material ID":It.materialId||"",Description:It.description||"","Base Unit":It.baseUnit||"","Order Unit":It.orderUnit||"","Conversion Value":It.conversionValue||"",Dimension:It.dimension||"",MPN:It.mpn||"",HSN:It.hsn||"","Min Stock":It.minstock||"","Safety Stock":It.safetyStock||"","Max Stock":It.maxstock||"",PDT:It.pdt||"",Location:It.location||"","Material Group":It.materialgroup||"","Is Deleted":It.isDeleted?"Yes":"No","Is Blocked":It.isBlocked?"Yes":"No","Created Date":It.createdAt?new Date(It.createdAt).toLocaleDateString():"","Updated Date":It.updatedAt?new Date(It.updatedAt).toLocaleDateString():""})),Me=on.book_new(),We=on.json_to_sheet(Ne),tt=[{wch:15},{wch:30},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:15},{wch:12},{wch:15},{wch:12},{wch:10},{wch:20},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];We["!cols"]=tt,on.book_append_sheet(Me,We,"Materials");const mt=new Date,Be=mt.toLocaleDateString("en-GB").replace(/\//g,"-"),dt=mt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Dt=`Material-Master-${Be}-${dt}.xlsx`;sh(Me,Dt),te()},z=()=>S(!0),ee=()=>{S(!1),k(!1),F(null)},ne=()=>{k(!1),_(""),T(""),F(null),S(!0)},W=Ne=>{_(Ne),Ne==="internal"&&J()},[re,le]=j.useState(!1),te=()=>le(!1),[K,de]=j.useState([]);j.useEffect(()=>{(async()=>{try{const Me=await Ie.get("/api/locations",{params:{companyId:P}});de(Me.data)}catch(Me){console.error("Error fetching locations:",Me)}})()},[]);const H=v*b,se=H-b,be=o.slice(se,H),ue=Math.ceil(o.length/b),oe=Ne=>{g(Ne)},ge=Ne=>{console.log("Import successful:",Ne),V()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:f,onChange:B})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-info btn-sm me-2",onClick:()=>i(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:M,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{z(),R()},className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"New Material"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base"}),n.jsx("th",{children:"Order"}),n.jsx("th",{children:"Conversion"}),n.jsx("th",{children:"Packing"}),n.jsx("th",{children:"MPN"}),n.jsx("th",{children:"HSN"}),n.jsx("th",{children:"Min Stock"}),n.jsx("th",{children:"safety Stock"}),n.jsx("th",{children:"Max Stock"}),n.jsx("th",{children:"PDT"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:be.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"16",className:"text-center",children:f?"No materials found matching your search":"No materials found"})}):be.map(Ne=>n.jsxs("tr",{children:[n.jsx("td",{children:Ne.materialId}),n.jsx("td",{className:"text-wrap",children:Ne.description}),n.jsx("td",{children:Ne.baseUnit}),n.jsx("td",{children:Ne.orderUnit}),n.jsx("td",{children:Ne.conversionValue||"-"}),n.jsx("td",{className:"text-wrap",children:Ne.dimension||"-"}),n.jsx("td",{children:Ne.mpn||"_"}),n.jsx("td",{children:Ne.hsn||"_"}),n.jsx("td",{children:Ne.minstock||"_"}),n.jsx("td",{children:Ne.safetyStock||"_"}),n.jsx("td",{children:Ne.maxstock||"_"}),n.jsx("td",{children:Ne.pdt||"_"}),n.jsx("td",{className:"text-wrap",children:Ne.location||"_"}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isDeleted||!1,onChange:Me=>ie(Ne._id,"isDeleted",Me.target.checked)})})}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isBlocked||!1,onChange:Me=>ie(Ne._id,"isBlocked",Me.target.checked)})})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!Ne.isDeleted&&!Ne.isBlocked?"bg-success":Ne.isDeleted&&Ne.isBlocked?"bg-dark":Ne.isDeleted?"bg-secondary":"bg-danger"}`,children:!Ne.isDeleted&&!Ne.isBlocked?"Active":Ne.isDeleted&&Ne.isBlocked?"Deleted & Blocked":Ne.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{Q(Ne),z()},children:"Edit"})})]},Ne._id))})]})})})]}),ue>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>oe(v-1),disabled:v===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Me=[],We=[];Me.push(1);for(let Be=Math.max(2,v-2);Be<=Math.min(ue-1,v+2);Be++)Me.push(Be);ue>1&&Me.push(ue);const tt=[...new Set(Me)].sort((Be,dt)=>Be-dt);let mt;for(let Be of tt)mt&&(Be-mt===2?We.push(mt+1):Be-mt!==1&&We.push("...")),We.push(Be),mt=Be;return We.map((Be,dt)=>Be==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${dt}`):n.jsx("li",{className:`page-item ${v===Be?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>oe(Be),children:Be})},Be))})(),n.jsx("li",{className:`page-item ${v===ue?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>oe(v+1),disabled:v===ue,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})}),w&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Material ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ne,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Material ID:"}),C==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3 ",children:[n.jsx("label",{className:"form-label",children:"External Material ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:E,onChange:Ne=>T(Ne.target.value),maxLength:50,required:!0,placeholder:"Enter custom material ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[E.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:J,disabled:!E.trim(),children:"Create Material"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>_(""),children:"Back"})]})]}):n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>W("internal"),children:[n.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>W("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Custom ID)"]})})]})]})]})})})]}),y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:c?"Edit Material":"Add New Material"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:Z,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",value:u.categoryId,onChange:Y,className:"form-select",placeholder:"Select Category",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),e.map(Ne=>n.jsx("option",{value:Ne._id,children:Ne.categoryName},Ne._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"description",value:u.description,onChange:Y,className:"form-control",placeholder:"Enter Description",maxLength:100,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"HSN"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"hsn",value:u.hsn,onChange:Y,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Base Unit"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"baseUnit",value:u.baseUnit,onChange:Y,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),WB.map(Ne=>n.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Order Unit"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"orderUnit",value:u.orderUnit,onChange:Y,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),WB.map(Ne=>n.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),u.baseUnit&&u.orderUnit&&u.baseUnit!==u.orderUnit&&n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label text-primary",children:"Unit Conversion"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{name:"conversionValue",value:u.conversionValue,onChange:Y,className:"form-control",required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Min Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"minstock",value:u.minstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),Y(Ne)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Safety Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"safetyStock",value:u.safetyStock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),Y(Ne)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Max Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"maxstock",value:u.maxstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),Y(Ne)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Material Group"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"materialgroup",value:u.materialgroup,onChange:Y,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"MPN"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"mpn",value:u.mpn,onChange:Y,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Packing"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"dimension",value:u.dimension,onChange:Y,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Shipping Note"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"pdt",type:"text",value:u.pdt,onChange:Y,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"location",value:u.location,onChange:Y,className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"Select Location"}),K.map(Ne=>n.jsx("option",{value:Ne.name,children:Ne.name},Ne.name))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:R,children:"Clear"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update Material":"Save Material"})]})]})})]})})})]}),n.jsx(Nf,{show:s,onClose:()=>i(!1),onImport:ge,masterDataType:"material",apiEndpoint:"materials"})]})};function Qr(){return Qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qr.apply(null,arguments)}function IDe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function LA(e,t){return LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},LA(e,t)}function PDe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[v,g]=j.useState(""),[b,y]=j.useState({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),S=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),A()},w=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase(),R=!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked";return B.processId?.toLowerCase().includes(Q)||B.processDescription?.toLowerCase().includes(Q)||R.toLowerCase().includes(Q)||(B.isDeleted?"yes deleted":"no active").includes(Q)||(B.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(w.length/f),C=(u-1)*f,_=C+f,E=w.slice(C,_),T=B=>{g(B.target.value),h(1)},I=B=>{h(B)},F=()=>{const Q=(v?w:e).map((re,le)=>({"S.No":le+1,"Process ID":re.processId||"","Process Description":re.processDescription||"","Is Deleted":re.isDeleted?"Yes":"No","Is Blocked":re.isBlocked?"Yes":"No",Status:!re.isDeleted&&!re.isBlocked?"Active":re.isDeleted&&re.isBlocked?"Deleted & Blocked":re.isDeleted?"Deleted":"Blocked","Created Date":re.createdAt?new Date(re.createdAt).toLocaleDateString():"","Updated Date":re.updatedAt?new Date(re.updatedAt).toLocaleDateString():""})),R=on.book_new(),Z=on.json_to_sheet(Q),J=[{wch:8},{wch:15},{wch:40},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];Z["!cols"]=J,on.book_append_sheet(R,Z,"Process List Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),z=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ne=`Process-List-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${z}.xlsx`;sh(R,ne);const W=v?w.length:e.length;alert(`Excel file exported successfully: ${W} records exported as ${ne}`)},A=async()=>{try{const B=await Ie.get("/api/processes",{params:{companyId:o,financialYear:l}});t(B.data),h(1)}catch(B){console.error("Fetch failed:",B),alert("Error loading processes")}},P=(B=null)=>{B?(y({processId:B.processId||"",processDescription:B.processDescription||"",isDeleted:B.isDeleted||!1,isBlocked:B.isBlocked||!1}),i(B)):(y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1}),i(null)),a(!0)},q=async()=>{try{if(!b.processId.trim()){alert("Process ID is required");return}if(!b.processDescription.trim()){alert("Process Description is required");return}const B={...b,companyId:o,financialYear:l};s?(await Ie.put(`/api/processes/${s._id}`,B),alert("Process updated successfully!")):(await Ie.post("/api/processes",B),alert("Process added successfully!")),A(),a(!1),i(null)}catch(B){console.error("Save failed:",B),alert("Error saving process. Please try again.")}},V=async(B,Q,R)=>{try{const Z={[Q]:R,companyId:o,financialYear:l};await Ie.put(`/api/processes/${B}`,Z),alert(`Process ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),A()}catch(Z){console.error("Status update failed:",Z),alert("Error updating status")}},Y=()=>{a(!1),i(null),y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1})};return j.useEffect(()=>{A()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Process List Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Process List Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by ID, description, or status...",value:v,onChange:T})]})}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:F,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&n.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>P(),children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Process"]})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Process ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Is Deleted"}),n.jsx("th",{children:"Is Blocked"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:v?"No processes found matching your search criteria":"No processes found"})}):E.map((B,Q)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+Q+1}),n.jsx("td",{children:n.jsx("strong",{children:B.processId})}),n.jsx("td",{className:"text-wrap",children:B.processDescription}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isDeleted||!1,onChange:R=>V(B._id,"isDeleted",R.target.checked)})}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isBlocked||!1,onChange:R=>V(B._id,"isBlocked",R.target.checked)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!B.isDeleted&&!B.isBlocked?"bg-success":B.isDeleted&&B.isBlocked?"bg-danger":B.isDeleted?"bg-warning":"bg-secondary"}`,children:!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>P(B),children:"Edit"})})]},B._id))})]})})})]}),k>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&I(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(B,Q)=>n.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:R=>{R.preventDefault(),I(Q+1)},children:Q+1})},Q)),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<k&&I(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:s?"Edit Process":"Add New Process"}),n.jsx("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"d-flex  align-items-center",children:[n.jsxs("div",{className:" col-md-2 row me-4",children:[n.jsx("label",{className:"form-label col-xl-7",children:"Process_ID"}),n.jsx("input",{type:"text",className:" col-xl-5  form-control-sm",placeholder:"Enter Process ID",value:b.processId,onChange:B=>y({...b,processId:B.target.value}),required:!0})]}),n.jsxs("div",{className:"col-md-10 row",children:[n.jsx("label",{className:"form-label col-xl-2 mt-4",children:"Process Description"}),n.jsx("textarea",{type:"text",className:"form-control-sm col-xl-10",rows:"4",placeholder:"Enter Process Description",value:b.processDescription,onChange:B=>y({...b,processDescription:B.target.value}),required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:B=>y({...b,isDeleted:B.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:B=>y({...b,isBlocked:B.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-secondary me-3",onClick:Y,children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:q,children:[s?"Update":"Save"," Process"]})]})]})})})]}),n.jsx(Nf,{show:c,onClose:()=>d(!1),onImportSuccess:S,masterDataType:"process"})]})}function ODe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[v,g]=j.useState(""),[b,y]=j.useState({name:"",description:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),S=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),A()},w=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase(),R=!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked";return B.name?.toLowerCase().includes(Q)||B.description?.toLowerCase().includes(Q)||R.toLowerCase().includes(Q)||(B.isDeleted?"yes deleted":"no active").includes(Q)||(B.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(w.length/f),C=(u-1)*f,_=C+f,E=w.slice(C,_),T=B=>{g(B.target.value),h(1)},I=B=>{h(B)},F=()=>{const Q=(v?w:e).map((re,le)=>({"S.No":le+1,"Condition Name":re.name||"",Description:re.description||"","Is Deleted":re.isDeleted?"Yes":"No","Is Blocked":re.isBlocked?"Yes":"No",Status:!re.isDeleted&&!re.isBlocked?"Active":re.isDeleted&&re.isBlocked?"Deleted & Blocked":re.isDeleted?"Deleted":"Blocked","Created Date":re.createdAt?new Date(re.createdAt).toLocaleDateString():"","Updated Date":re.updatedAt?new Date(re.updatedAt).toLocaleDateString():""})),R=on.book_new(),Z=on.json_to_sheet(Q),J=[{wch:8},{wch:25},{wch:50},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];Z["!cols"]=J,on.book_append_sheet(R,Z,"General Condition Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),z=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ne=`General-Condition-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${z}.xlsx`;sh(R,ne);const W=v?w.length:e.length;alert(`Excel file exported successfully: ${W} records exported as ${ne}`)},A=async()=>{try{const B=await Ie.get("/api/general-conditions",{params:{companyId:o,financialYear:l}});t(B.data),h(1)}catch(B){console.error("Failed to fetch:",B),alert("Error loading general conditions")}},P=(B=null)=>{B?(y({name:B.name||"",description:B.description||"",isDeleted:B.isDeleted||!1,isBlocked:B.isBlocked||!1}),i(B)):(y({name:"",description:"",isDeleted:!1,isBlocked:!1}),i(null)),a(!0)},q=async()=>{try{if(!b.name.trim()){alert("Condition name is required");return}if(!b.description.trim()){alert("Description is required");return}const B={...b,companyId:o,financialYear:l};s?(await Ie.put(`/api/general-conditions/${s._id}`,B),alert("General condition updated successfully!")):(await Ie.post("/api/general-conditions",B),alert("General condition added successfully!")),A(),a(!1),i(null)}catch(B){console.error("Save failed:",B),alert("Error saving general condition. Please try again.")}},V=async(B,Q,R)=>{try{const Z={[Q]:R,companyId:o,financialYear:l};await Ie.put(`/api/general-conditions/${B}`,Z),alert(`General condition ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),A()}catch(Z){console.error("Status update failed:",Z),alert("Error updating status")}},Y=()=>{a(!1),i(null),y({name:"",description:"",isDeleted:!1,isBlocked:!1})};return j.useEffect(()=>{A()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"General Condition Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"General Condition Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, description, or status...",value:v,onChange:T})]})}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:F,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&n.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>P(),children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add General Condition"]})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Condition Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Deleted"}),n.jsx("th",{children:"Blocked"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:v?"No general conditions found matching your search criteria":"No general conditions found"})}):E.map((B,Q)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+Q+1}),n.jsx("td",{children:n.jsx("strong",{children:B.name})}),n.jsx("td",{className:"text-wrap",children:B.description}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isDeleted||!1,onChange:R=>V(B._id,"isDeleted",R.target.checked)})}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isBlocked||!1,onChange:R=>V(B._id,"isBlocked",R.target.checked)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!B.isDeleted&&!B.isBlocked?"bg-success":B.isDeleted&&B.isBlocked?"bg-danger":B.isDeleted?"bg-warning":"bg-secondary"}`,children:!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>P(B),children:"Edit"})})]},B._id))})]})})})]}),k>1&&n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&I(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(B,Q)=>n.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:R=>{R.preventDefault(),I(Q+1)},children:Q+1})},Q)),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<k&&I(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," General Condition"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:" row input-group",children:[n.jsx("label",{className:" form-label col-xl-6",children:"Condition Name"}),n.jsx("input",{type:"text",className:"form-control col-xl-6",placeholder:"Enter General Condition Name",value:b.name,onChange:B=>y({...b,name:B.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-9",children:n.jsxs("div",{className:" row input-group",children:[n.jsx("label",{className:"form-label col-xl-2",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",placeholder:"Enter Description",value:b.description,onChange:B=>y({...b,description:B.target.value}),required:!0})]})})]}),n.jsxs("div",{className:"row ",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:B=>y({...b,isDeleted:B.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:B=>y({...b,isBlocked:B.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"me-3 btn btn-secondary",onClick:Y,children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:q,children:[s?"Update":"Save"," Condition"]})]})]})})})]}),n.jsx(Nf,{show:c,onClose:()=>d(!1),onImportSuccess:S,masterDataType:"generalCondition"})]})}const GB=["Piece","Box","Kg","Ltr"],MDe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState(""),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState(new Date().toISOString().split("T")[0]),[S,w]=j.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}]),[k,C]=j.useState(!1),[_,E]=j.useState(""),[T,I]=j.useState([]),[F,A]=j.useState("materialId"),[P,q]=j.useState(null),[V,Y]=j.useState(!1),[B,Q]=j.useState([]),[R,Z]=j.useState(""),[J,ie]=j.useState(""),[M,z]=j.useState(1),[ee]=j.useState(5),[ne,W]=j.useState(1),[re]=j.useState(3),le="MMNR-",te=localStorage.getItem("selectedCompanyId"),K=localStorage.getItem("financialYear");j.useEffect(()=>{Ie.get("/api/material",{params:{companyId:te}}).then(Te=>{const Xe=Te.data.filter(kt=>!kt.isDeleted&&!kt.isBlocked);t(Xe),console.log("Fetched materials:",Xe)}).catch(Te=>console.error(Te)),Ie.get("/api/locations").then(Te=>Q(Te.data))},[]),j.useEffect(()=>{Ie.get("/api/purchasecategory",{params:{companyId:te,financialYear:K}}).then(Te=>d(Te.data)).catch(Te=>console.error(Te))},[]);const de=()=>{w(Te=>[...Te,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}])},H=Te=>{w(kt=>kt.filter((Je,ze)=>ze!==Te));const Xe=Math.ceil((S.length-1)/ee);M>Xe&&Xe>0&&z(Xe)},se=async(Te,Xe,kt)=>{const Je=[...S];if(Je[Te][Xe]=kt,Xe==="materialId"&&Je[Te].isManual)try{const Fe=(await Ie.get(`/api/material/byId/${kt}`)).data;Fe&&(Je[Te]={...Je[Te],materialId:Fe.materialId,description:Fe.description,baseUnit:Fe.baseUnit,orderUnit:Fe.orderUnit,location:Fe.location,materialgroup:Fe.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",kt)}w(Je)},be=()=>{if(!_.trim()){I([]);return}if(F==="materialId"){let Te=_;/^\d+$/.test(_)&&(Te=le+_);const Xe=e.filter(kt=>(kt.materialId||"").toLowerCase().includes(Te.toLowerCase()));I(Xe)}else{const Te=e.filter(Xe=>(Xe.description||"").toLowerCase().includes(_.toLowerCase()));I(Te)}};j.useEffect(()=>{const Te=setTimeout(()=>{_.trim()?be():I([])},300);return()=>clearTimeout(Te)},[_,F,e]);const ue=Te=>{const Xe=Te.target.value;E(Xe)},oe=()=>{I(e),E("")},ge=()=>{I([]),E("")},Ne=Te=>{q(Te),C(!0),E(""),I([])},Me=()=>{C(!1),q(null),E(""),I([])},We=Te=>{if(P!==null){const Xe=[...S];Xe[P]={...Xe[P],materialId:Te.materialId,description:Te.description,baseUnit:Te.baseUnit,orderUnit:Te.orderUnit,location:Te.location,materialgroup:Te.materialgroup,isManual:!0},w(Xe)}Me()},[tt,mt]=j.useState([]);j.useEffect(()=>{Ie.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Te=>mt(Te.data)).catch(Te=>console.error("Failed to fetch saved indents",Te))},[]);const Be=async()=>{if(!u){alert("Please select a purchase category");return}if(!f||!v){alert("Please fill in Location and Buyer Group");return}const Te=S.filter(ze=>ze.materialId&&ze.materialId.trim()!==""&&ze.description&&ze.description.trim()!==""&&ze.qty&&ze.qty>0);if(Te.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const Xe=c.find(ze=>ze.name===u||ze.categoryName===u||ze._id===u),kt=localStorage.getItem("selectedCompanyId"),Je=localStorage.getItem("financialYear");try{const ze={indentIdType:R,externalIndentId:J,categoryId:Xe._id,categoryName:Xe.name||Xe.categoryName,location:f,buyerGroup:v,documentDate:b,items:Te,companyId:kt,financialYear:Je};if(R==="")l(ze),a(!1),Y(!0);else{if(R==="internal"){const Fe=await Ie.post("/api/indent/create",ze);alert(`Indent saved successfully with ID: ${Fe.data.indentId}`)}else if(R==="external"){if(!J||J.trim()===""){alert("Please enter an External Indent ID");return}ze.indentId=J;const Fe=await Ie.post("/api/indent/create",ze);alert(`Indent saved successfully with External ID: ${Fe.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);Y(!1),w([]),p(""),g(""),y(new Date().toISOString().split("T")[0]),z(1)}Ie.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Fe=>mt(Fe.data)).catch(Fe=>console.error("Failed to fetch saved indents",Fe))}catch(ze){console.error(ze),alert("Failed to save indent")}},dt=M*ee,Dt=dt-ee,It=S.slice(Dt,dt),zt=Math.ceil(S.length/ee),xe=Te=>z(Te),fe=({currentPage:Te,totalPages:Xe,onPageChange:kt,size:Je="normal"})=>{if(Xe<=1)return null;const ze=[],Fe=5;let Ve=Math.max(1,Te-Math.floor(Fe/2)),pt=Math.min(Xe,Ve+Fe-1);pt-Ve+1<Fe&&(Ve=Math.max(1,pt-Fe+1));for(let Re=Ve;Re<=pt;Re++)ze.push(Re);const Pe=Je==="small"?"btn-sm":"";return n.jsx("nav",{"aria-label":"Page navigation mt-2",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${Te===1?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Pe}`,onClick:()=>kt(Te-1),disabled:Te===1,children:"Previous"})}),Ve>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Pe}`,onClick:()=>kt(1),children:"1"})}),Ve>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Pe}`,children:"..."})})]}),ze.map(Re=>n.jsx("li",{className:`page-item ${Te===Re?"active":""}`,children:n.jsx("button",{className:`page-link ${Pe}`,onClick:()=>kt(Re),children:Re})},Re)),pt<Xe&&n.jsxs(n.Fragment,{children:[pt<Xe-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Pe}`,children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Pe}`,onClick:()=>kt(Xe),children:Xe})})]}),n.jsx("li",{className:`page-item ${Te===Xe?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Pe}`,onClick:()=>kt(Te+1),disabled:Te===Xe,children:"Next"})})]})})},ve=()=>{Y(!1),Z(""),ie(""),l(null),a(!0)},pe=Te=>{Z(Te),Be()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto mb-2",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Enquiry"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Enquiry"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-6",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Purchase Category",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-6",children:n.jsxs("select",{className:"form-select form-select-sm",value:u,onChange:Te=>h(Te.target.value),children:[n.jsx("option",{value:"",children:"-- Select Category --"}),c.map((Te,Xe)=>n.jsx("option",{value:Te.name||Te.categoryName||Te._id,children:Te.name||Te.categoryName||`Category ${Xe+1}`},Xe))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Doc Date",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:Te=>y(Te.target.value)})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Location",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:Te=>p(Te.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),B.map((Te,Xe)=>n.jsx("option",{value:Te.name||Te._id,children:Te.name||Te._id},Xe))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Buyer Group",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:Te=>g(Te.target.value),placeholder:"Buyer Group"})})]})})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"}),n.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",S.length,")"]})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body ",children:[S.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:n.jsxs("table",{className:" table-bordered table-sm mb-0",children:[n.jsx("thead",{className:" sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:It.map((Te,Xe)=>{const kt=Dt+Xe;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center fw-bold",children:kt+1}),n.jsx("td",{children:Te.isManual?n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm w-50",value:Te.materialId,onChange:Je=>se(kt,"materialId",Je.target.value),placeholder:"Material ID"}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>Ne(kt),title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]}):n.jsx("span",{className:"badge ",children:Te.materialId})}),n.jsx("td",{children:Te.isManual?n.jsx("input",{className:"form-control form-control-sm",value:Te.description,onChange:Je=>se(kt,"description",Je.target.value),placeholder:"Description",readOnly:!!Te.materialId}):n.jsx("span",{title:Te.description,children:Te.description})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Te.qty,onChange:Je=>se(kt,"qty",Je.target.value),min:"1"})}),n.jsx("td",{children:n.jsxs("select",{value:Te.baseUnit,onChange:Je=>se(kt,"baseUnit",Je.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),GB.map(Je=>n.jsx("option",{value:Je,children:Je},Je))]})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Te.deliveryDate,onChange:Je=>se(kt,"deliveryDate",Je.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:Te.orderUnit,onChange:Je=>se(kt,"orderUnit",Je.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),GB.map(Je=>n.jsx("option",{value:Je,children:Je},Je))]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Te.materialgroup||"-"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>H(kt),title:"Delete Item",children:n.jsx("i",{className:"fas fa-trash"})})})]},kt)})})]})}),n.jsx(fe,{currentPage:M,totalPages:zt,onPageChange:xe,size:"small"})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]}),"   ",n.jsx("div",{className:"col-xl-2",children:n.jsxs("button",{onClick:de,className:"btn btn-outline-primary btn-sm me-2 mt-2",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})})]})]}),n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-md-6 col-xl-2 col-sm-12",children:n.jsxs("button",{onClick:Be,className:"btn btn-success btn-sm",disabled:!u||S.length===0,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]})})}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Me})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select form-select-sm",value:F,onChange:Te=>A(Te.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:F==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:_,onChange:ue})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info btn-sm",onClick:oe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),T.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:ge,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:T.length>0?n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:T.map((Te,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{children:Te.materialId})}),n.jsx("td",{children:Te.description}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Te.baseUnit})}),n.jsx("td",{children:Te.location}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:Te.materialgroup})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>We(Te),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":_?`No materials found matching "${_}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Me,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),V&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ve,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>pe("internal"),children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Z("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),R==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"External Indent ID"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Indent ID (max 50 characters)",value:J,onChange:Te=>ie(Te.target.value),onKeyPress:Te=>{Te.key==="Enter"&&J.trim()&&Be()},maxLength:50}),n.jsxs("div",{className:"form-text",children:[J.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"btn btn-primary",onClick:Be,disabled:!J.trim(),children:"Create Indent"})})]})]})]})})})]})]})},RDe=()=>{const[e,t]=j.useState(1),[r]=j.useState(10),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(""),[d,u]=j.useState("indentId"),[h,f]=j.useState(!1),[p,v]=j.useState(!1),[g,b]=j.useState([]),[y]=j.useState(10),[S,w]=j.useState(null),[k,C]=j.useState(null);j.useEffect(()=>{_()},[]),j.useEffect(()=>{const re=a.find(le=>le._id===S);C(re)},[S,a]);const _=()=>{f(!0);const re=localStorage.getItem("selectedCompanyId"),le=localStorage.getItem("financialYear");Ie.get("/api/indent/get",{params:{companyId:re,financialYear:le}}).then(te=>{const K=te.data.sort((de,H)=>new Date(H.createdAt||H.documentDate)-new Date(de.createdAt||de.documentDate));s(K),console.log("Fetched saved indents:",K),o(K)}).catch(te=>console.error("Failed to fetch saved indents",te)).finally(()=>f(!1))},E=async(re,le,te)=>{try{const K={[le]:te};await Ie.put(`/api/indent/status/${re}`,K);const de=H=>H.map(se=>se._id===re?{...se,[le]:te}:se);s(de),o(H=>de(H)),alert("Status updated successfully!")}catch(K){console.error("Error updating status:",K),alert("Failed to update status!")}},T=()=>{v(!0),b(a)},I=()=>{v(!1),c(""),b([])},F=re=>{const le=re.target.value;if(c(le),le.trim()===""){b(a);return}const te=a.filter(K=>{if(d==="indentId"){const de=le.toLowerCase(),H=K.indentId.toLowerCase();return H.includes(de)||H.replace(/[^0-9]/g,"").includes(de.replace(/[^0-9]/g,""))}else{if(d==="location")return K.location.toLowerCase().includes(le.toLowerCase());if(d==="buyerGroup")return K.buyerGroup.toLowerCase().includes(le.toLowerCase());if(d==="categoryName")return K.categoryName.toLowerCase().includes(le.toLowerCase())}return!1});b(te)},A=()=>{b(a),c("")},P=()=>{b([]),c("")},q=re=>{o([re]),t(1),I()},V=()=>{o(a),t(1)},Y=re=>{const le=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${re.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(re.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${re.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${re.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${re.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${re.items.map((K,de)=>`
                                <tr style="${de%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${de+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${K.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${K.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,te=window.open("","","width=900,height=700");te.document.write("<html><head><title>Indent Print - "+re.indentId+"</title></head><body>"),te.document.write(le),te.document.write("</body></html>"),te.document.close(),te.print()},B=e*r,Q=B-r,R=i.slice(Q,B),Z=Math.ceil(i.length/r),J=re=>t(re),ie=({currentPage:re,totalPages:le,onPageChange:te})=>{if(le<=1)return null;const K=[],de=5;let H=Math.max(1,re-Math.floor(de/2)),se=Math.min(le,H+de-1);se-H+1<de&&(H=Math.max(1,se-de+1));for(let be=H;be<=se;be++)K.push(be);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${re===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(re-1),disabled:re===1,children:"Previous"})}),H>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>te(1),children:"1"})}),H>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),K.map(be=>n.jsx("li",{className:`page-item ${re===be?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(be),children:be})},be)),se<le&&n.jsxs(n.Fragment,{children:[se<le-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>te(le),children:le})})]}),n.jsx("li",{className:`page-item ${re===le?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(re+1),disabled:re===le,children:"Next"})})]})})},M=e*y,z=M-y,ee=g.slice(z,M);Math.ceil(g.length/y);const ne=re=>t(re),W=({currentPage:re,totalPages:le,onPageChange:te})=>{if(le<=1)return null;const K=[],de=5;let H=Math.max(1,re-Math.floor(de/2)),se=Math.min(le,H+de-1);se-H+1<de&&(H=Math.max(1,se-de+1));for(let be=H;be<=se;be++)K.push(be);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${re===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(re-1),disabled:re===1,children:"Previous"})}),H>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>te(1),children:"1"})}),H>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),K.map(be=>n.jsx("li",{className:`page-item ${re===be?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(be),children:be})},be)),se<le&&n.jsxs(n.Fragment,{children:[se<le-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>te(le),children:le})})]}),n.jsx("li",{className:`page-item ${re===le?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(re+1),disabled:re===le,children:"Next"})})]})})};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Indent List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Indent List"})]})})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-dark btn-sm",onClick:T,children:[n.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:V,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:h?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):R.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-bordered table-sm align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"60px"},children:"S.No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{style:{width:"100px"},children:"Materials"}),n.jsx("th",{children:"Delete Status"}),n.jsx("th",{children:"Block Status"}),n.jsx("th",{style:{width:"100px"},children:"Action"})]})}),n.jsx("tbody",{children:R.map((re,le)=>{const te=Q+le;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:te+1}),n.jsx("td",{children:re.indentId}),n.jsx("td",{children:(()=>{const K=new Date(re.documentDate),de=String(K.getDate()).padStart(2,"0"),H=String(K.getMonth()+1).padStart(2,"0"),se=K.getFullYear();return`${de}/${H}/${se}`})()}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),re.location]}),n.jsx("td",{children:re.buyerGroup}),n.jsx("td",{children:re.categoryName}),n.jsxs("td",{className:"text-center",children:[re.items.length," items"]}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:re.isDeleted||!1,onChange:K=>E(re._id,"isDeleted",K.target.checked)}),n.jsx("label",{className:"form-check-label",children:re.isDeleted?"Deleted":"Active"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:re.isBlocked||!1,onChange:K=>E(re._id,"isBlocked",K.target.checked)}),n.jsx("label",{className:"form-check-label",children:re.isBlocked?"Blocked":"Active"})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>Y(re),title:"Print Indent",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{type:"button",onClick:()=>w(re._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:n.jsx("i",{className:"ti ti-eye"})})]})]},re._id)})})]})}),Z>1&&n.jsx("div",{className:"d-flex justify-content-center mt-4",children:n.jsx(ie,{currentPage:e,totalPages:Z,onPageChange:J})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("h5",{className:"text-muted",children:i.length!==a.length?"Filtered results":"No indents available"}),n.jsx("p",{className:"text-muted",children:i.length!==a.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:V,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:I})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:d,onChange:re=>u(re.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"location",children:"Location"}),n.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:F})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:A,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:P,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{children:ee.length>0?n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ee.map((re,le)=>n.jsxs("tr",{children:[n.jsx("td",{children:le+1}),n.jsx("td",{children:re.indentId}),n.jsx("td",{children:new Date(re.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),re.location]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:re.buyerGroup})}),n.jsx("td",{children:re.categoryName}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-warning text-dark",children:[re.items.length," items"]})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>q(re),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},le))}),Z>1&&n.jsx("tfoot",{children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx(W,{currentPage:e,totalPages:Z,onPageChange:ne})})})})})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:a.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:I,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"table-responsive",children:k?.items?.length>0&&n.jsxs("table",{className:"table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Delivery Date"})]})}),n.jsx("tbody",{children:k?.items.map((re,le)=>n.jsxs("tr",{children:[n.jsx("td",{children:le+1}),n.jsx("td",{children:re.materialId}),n.jsx("td",{children:re.description}),n.jsx("td",{children:re.qty}),n.jsx("td",{children:re.baseUnit}),n.jsx("td",{children:re.orderUnit}),n.jsx("td",{children:k.location}),n.jsx("td",{children:k.buyerGroup}),n.jsx("td",{children:new Date(re.deliveryDate).toLocaleDateString()})]},re._id))})]})})})]})})})]})};function FDe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]);rh();const[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState(null),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState([]),[T,I]=j.useState(""),[F,A]=j.useState(""),[P,q]=j.useState(""),[V,Y]=j.useState(!1),[B,Q]=j.useState(null),[R,Z]=j.useState(0),[J,ie]=j.useState(!1),[M,z]=j.useState(!1),[ee,ne]=j.useState(""),[W,re]=j.useState(""),[le,te]=j.useState(""),[K,de]=j.useState(""),[H,se]=j.useState(""),[be,ue]=j.useState(""),[oe,ge]=j.useState(null);console.log("cat",r),j.useEffect(()=>{if(H){const ze=e.filter(Fe=>Fe.indentId.toLowerCase().includes(H.toLowerCase()));setFilteredIndents(ze)}},[H]);const[Ne,Me]=j.useState([]);j.useEffect(()=>{const ze=localStorage.getItem("selectedCompanyId"),Fe=localStorage.getItem("financialYear"),Ve={params:{companyId:ze,financialYear:Fe}};Ie.get("/api/indent/get",Ve).then(pt=>{const Pe=pt.data.filter(Re=>!Re.isDeleted&&!Re.isBlocked);t(Pe.map(Re=>({label:`${Re.indentId} (${Re.categoryName})`,value:Re}))),t(Pe.map(Re=>({label:`${Re.indentId} (${Re.categoryName})`,value:Re})))}),Ie.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(pt=>{a(pt.data.map(Pe=>({label:`${Pe.categoryName}`,value:Pe._id})))}),Ie.get("/api/vendors",Ve).then(pt=>{const Pe=pt.data.filter(Re=>!Re.isDeleted&&!Re.isBlocked);i(Pe.map(Re=>({label:`${Re.name1} ${Re.name2||""}`,value:Re._id,vnNo:Re.vnNo||""})))}),Ie.get("/api/locations",Ve).then(pt=>{console.log("Locations API response:",pt.data),Array.isArray(pt.data)?Me(pt.data):pt.data&&Array.isArray(pt.data.locations)?Me(pt.data.locations):Me([])}).catch(pt=>{console.error("Failed to fetch locations:",pt),Me([])}),console.log("location",T),Ie.get("/api/material",Ve).then(pt=>{console.log("Fetched materials:",pt.data);const Pe=pt.data.filter(Re=>!Re.isDeleted&&!Re.isBlocked);l(Pe),console.log("Filtered materials:",Pe)}).catch(pt=>console.error("Failed to fetch materials:",pt))},[]);const We=ze=>{h(ze);const{buyerGroup:Fe,materialGroup:Ve,deliveryDate:pt,location:Pe}=ze.value;I(Pe||""),A(Fe||"");const Re=ze.value.items.map(Ye=>({...Ye,unit:Ye.unit||"",price:Ye.price||"",materialGroup:Ye.materialGroup||Ve||"",deliveryDate:Ye.deliveryDate||pt||""}));E(Re)},tt=(ze,Fe,Ve)=>{const pt=[..._];pt[ze][Fe]=Ve,E(pt)},mt=ze=>{console.log("Opening modal for item at index:",ze),Q(ze),Y(!0)},Be=()=>{E([..._,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date().toISOString().slice(0,10),price:0}])},[dt,Dt]=j.useState(!1),[It,zt]=j.useState("internal"),[xe,fe]=j.useState(""),ve=async ze=>{ze.preventDefault(),Dt(!0)};j.useEffect(()=>{const ze=_.reduce((Fe,Ve)=>{const pt=parseFloat(Ve.price)||0,Pe=parseFloat(Ve.qty)||0;return Fe+pt*Pe},0);Z(ze)},[_]);const pe=async()=>{const ze=localStorage.getItem("selectedCompanyId"),Fe=localStorage.getItem("financialYear"),Ve={indentId:u?.value?.indentId,categoryId:u?.value?.categoryId,rfqCategoryId:f?.value,vendor:v,vendorName:b,quotationReference:c,validityDate:P,vnNo:k,companyId:ze,financialYear:Fe,note:S,buyerGroup:F,location:T,totalPrice:R,items:_,quotationGenType:It,externalQuotationNumber:It==="external"?xe:null};console.log("Payload for submission:",Ve);try{const pt=await Ie.post("/api/quotations/create",Ve);alert("Quotation Created Successfully"),console.log(pt.data),Dt(!1)}catch(pt){console.error(pt),alert("Failed to create quotation")}},Te=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Quotation Number Generation"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>Dt(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{zt("internal"),pe()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>zt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),It==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:xe,onChange:ze=>{ze.target.value.length<=50&&fe(ze.target.value)},onKeyPress:ze=>{ze.key==="Enter"&&xe.trim()&&pe()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[xe.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:pe,disabled:!xe.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Create Quotation"]})})]}),It==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"alert alert-info",role:"alert",children:"Quotation number will be auto-generated based on category and range count."})})]})]})})})]}),Xe=()=>{const[ze,Fe]=j.useState([]),[Ve,pt]=j.useState("materialId"),[Pe,Re]=j.useState(""),Ye=Ee=>{const it=Ee.target.value;Re(it);const Tt=o.filter(lr=>(Ve==="materialId"?lr.materialId:lr.description)?.toLowerCase().includes(it.toLowerCase()));Fe(Tt)},At=()=>{Fe(o),Re("")},Gt=()=>{Fe([]),Re("")},De=Ee=>{if(console.log("selectedItemIndex when selecting:",B),B==null){console.error("No item selected for update");return}E(it=>{console.log("Previous items:",it);const Tt=[...it];return Tt[B]={...Tt[B],materialId:Ee.materialId,description:Ee.description,materialGroup:Ee.materialgroup||"",baseUnit:Ee.baseUnit,orderUnit:Ee.orderUnit},console.log("Updated items:",Tt),Tt}),Y(!1)};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Y(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ve,onChange:Ee=>pt(Ee.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:Ve==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Pe,onChange:Ye})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:At,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ze.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Gt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ze.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ze.map((Ee,it)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ee.materialId}),n.jsx("td",{children:Ee.description}),n.jsx("td",{children:Ee.baseUnit}),n.jsx("td",{children:Ee.orderUnit}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>De(Ee),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},it))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Pe?`No materials found matching "${Pe}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Y(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},kt=()=>{const[ze,Fe]=j.useState("indentId"),[Ve,pt]=j.useState([]),[Pe,Re]=j.useState(""),Ye=De=>{const Ee=De.target.value;Re(Ee);const it=e.filter(Tt=>(ze==="indentId"?Tt?.value?.indentId:Tt?.value?.categoryName)?.toLowerCase().includes(Ee.toLowerCase()));pt(it)},At=()=>{pt(e),Re("")},Gt=()=>{pt([]),Re("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ie(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ze,onChange:De=>Fe(De.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Pe,onChange:Ye})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:At,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ve.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Gt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ve.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ve.map((De,Ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:De.value.indentId})}),n.jsx("td",{children:De.value.categoryName}),n.jsx("td",{children:De.value.buyerGroup}),n.jsx("td",{children:De.value.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{We(De),ie(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ee))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ie(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Je=()=>{const[ze,Fe]=j.useState("name1"),[Ve,pt]=j.useState([]),[Pe,Re]=j.useState(""),Ye=De=>{const Ee=De.target.value;Re(Ee);const it=s.filter(Tt=>(ze==="vnNo"?Tt.vnNo:Tt.label)?.toLowerCase().includes(Ee.toLowerCase()));pt(it)},At=()=>{pt(s),Re("")},Gt=()=>{pt([]),Re("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>z(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ze,onChange:De=>Fe(De.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Pe,onChange:Ye})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:At,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ve.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Gt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ve.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Vendor No"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ve.map((De,Ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:De.label}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:De.vnNo})}),n.jsx("td",{children:De.city||"-"}),n.jsx("td",{children:De.region||"-"}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(De.value),y(De.label),C(De.vnNo||""),z(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ee))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>z(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Quotation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Quotation"})]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Indent"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:ze=>{const Fe=ze.target.value;de(Fe);const Ve=e.find(pt=>pt.indentId.toLowerCase()===Fe.toLowerCase());h(Ve||null)},readOnly:!0}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{se(K),ie(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Quotation Category"})}),n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select form-control-sm",value:f?.value||"",onChange:ze=>p(r.find(Fe=>Fe.value===ze.target.value)||null),children:[n.jsx("option",{value:"",children:"Select"}),r.map((ze,Fe)=>n.jsx("option",{value:ze.value,children:ze.label},Fe))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:ze=>{const Fe=ze.target.value;y(Fe);const Ve=s.find(pt=>pt.name.toLowerCase()===Fe.toLowerCase());ge(Ve||null)}}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{z(!0),ue(b)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Quotation Reference",value:c,onChange:ze=>d(ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-lg-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:ze=>I(ze.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Ne)&&Ne.map((ze,Fe)=>n.jsx("option",{value:ze.name||ze._id||ze,children:ze.name||ze.locationName||ze},Fe))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:F,onChange:ze=>A(ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:P,onChange:ze=>q(ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Additional Notes"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:S,onChange:ze=>w(ze.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:ve,children:[n.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[n.jsx("h6",{className:"mb-3",children:"Items & Details"}),n.jsxs("div",{className:"table-responsive",children:[n.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:_.map((ze,Fe)=>n.jsxs("tr",{children:[n.jsx("td",{children:Fe+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:ze.materialId}),n.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>mt(Fe),children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ze.description,onChange:Ve=>tt(Fe,"description",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:ze.qty,onChange:Ve=>tt(Fe,"qty",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ze.baseUnit,onChange:Ve=>tt(Fe,"baseUnit",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ze.orderUnit,onChange:Ve=>tt(Fe,"orderUnit",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ze.materialGroup,onChange:Ve=>tt(Fe,"materialGroup",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:ze.deliveryDate,onChange:Ve=>tt(Fe,"deliveryDate",Ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:ze.price,onChange:Ve=>{Ve.target.value=Ve.target.value.replace(/[^0-9.]/g,""),tt(Fe,"price",Ve.target.value)}})})]},Fe))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",onClick:Be,className:"btn btn-link",children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})}),n.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:n.jsxs("h6",{className:"mb-0",children:["Total Price: ",n.jsxs("span",{className:"text-primary",children:["",R.toFixed(2)]})]})})]})})})]})]}),V&&n.jsx(Xe,{}),J&&n.jsx(kt,{}),M&&n.jsx(Je,{}),dt&&n.jsx(Te,{})]})]})})}function Ba(e){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ba(e)}function LDe(e,t){if(Ba(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ba(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Y(e){var t=LDe(e,"string");return Ba(t)=="symbol"?t:t+""}function ty(e,t,r){return(t=$Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YB(Object(r),!0).forEach(function(a){ty(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BDe(e){if(Array.isArray(e))return e}function UDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function BA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function VY(e,t){if(e){if(typeof e=="string")return BA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BA(e,t):void 0}}function $De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zh(e,t){return BDe(e)||UDe(e,t)||VY(e,t)||$De()}function wf(e,t){if(e==null)return{};var r,a,s=IDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var VDe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function qDe(e){var t=e.defaultInputValue,r=t===void 0?"":t,a=e.defaultMenuIsOpen,s=a===void 0?!1:a,i=e.defaultValue,o=i===void 0?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,f=e.onMenuOpen,p=e.value,v=wf(e,VDe),g=j.useState(l!==void 0?l:r),b=Zh(g,2),y=b[0],S=b[1],w=j.useState(c!==void 0?c:s),k=Zh(w,2),C=k[0],_=k[1],E=j.useState(p!==void 0?p:o),T=Zh(E,2),I=T[0],F=T[1],A=j.useCallback(function(R,Z){typeof d=="function"&&d(R,Z),F(R)},[d]),P=j.useCallback(function(R,Z){var J;typeof u=="function"&&(J=u(R,Z)),S(J!==void 0?J:R)},[u]),q=j.useCallback(function(){typeof f=="function"&&f(),_(!0)},[f]),V=j.useCallback(function(){typeof h=="function"&&h(),_(!1)},[h]),Y=l!==void 0?l:y,B=c!==void 0?c:C,Q=p!==void 0?p:I;return Yr(Yr({},v),{},{inputValue:Y,menuIsOpen:B,onChange:A,onInputChange:P,onMenuClose:V,onMenuOpen:q,value:Q})}function zDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KB(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$Y(a.key),a)}}function HDe(e,t,r){return t&&KB(e.prototype,t),r&&KB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LA(e,t)}function y2(e){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y2(e)}function qY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qY=function(){return!!e})()}function GDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YDe(e,t){if(t&&(Ba(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GDe(e)}function KDe(e){var t=qY();return function(){var r,a=y2(e);if(t){var s=y2(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return YDe(this,r)}}function XDe(e){if(Array.isArray(e))return BA(e)}function QDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TI(e){return XDe(e)||QDe(e)||VY(e)||JDe()}function ZDe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function e5e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var t5e=function(){function e(r){var a=this;this._insertTag=function(s){var i;a.tags.length===0?a.insertionPoint?i=a.insertionPoint.nextSibling:a.prepend?i=a.container.firstChild:i=a.before:i=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(s,i),a.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(e5e(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=ZDe(s);try{i.insertRule(a,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var s;return(s=a.parentNode)==null?void 0:s.removeChild(a)}),this.tags=[],this.ctr=0},e}(),No="-ms-",j2="-moz-",an="-webkit-",zY="comm",II="rule",PI="decl",r5e="@import",HY="@keyframes",a5e="@layer",n5e=Math.abs,lC=String.fromCharCode,s5e=Object.assign;function i5e(e,t){return no(e,0)^45?(((t<<2^no(e,0))<<2^no(e,1))<<2^no(e,2))<<2^no(e,3):0}function WY(e){return e.trim()}function o5e(e,t){return(e=t.exec(e))?e[0]:e}function nn(e,t,r){return e.replace(t,r)}function UA(e,t){return e.indexOf(t)}function no(e,t){return e.charCodeAt(t)|0}function Yy(e,t,r){return e.slice(t,r)}function Au(e){return e.length}function OI(e){return e.length}function NN(e,t){return t.push(e),e}function l5e(e,t){return e.map(t).join("")}var cC=1,J0=1,GY=0,Nl=0,oi=0,Dg="";function dC(e,t,r,a,s,i,o){return{value:e,root:t,parent:r,type:a,props:s,children:i,line:cC,column:J0,length:o,return:""}}function Mb(e,t){return s5e(dC("",null,null,"",null,null,0),e,{length:-e.length},t)}function c5e(){return oi}function d5e(){return oi=Nl>0?no(Dg,--Nl):0,J0--,oi===10&&(J0=1,cC--),oi}function sc(){return oi=Nl<GY?no(Dg,Nl++):0,J0++,oi===10&&(J0=1,cC++),oi}function zu(){return no(Dg,Nl)}function aw(){return Nl}function M1(e,t){return Yy(Dg,e,t)}function Ky(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YY(e){return cC=J0=1,GY=Au(Dg=e),Nl=0,[]}function KY(e){return Dg="",e}function nw(e){return WY(M1(Nl-1,$A(e===91?e+2:e===40?e+1:e)))}function u5e(e){for(;(oi=zu())&&oi<33;)sc();return Ky(e)>2||Ky(oi)>3?"":" "}function h5e(e,t){for(;--t&&sc()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return M1(e,aw()+(t<6&&zu()==32&&sc()==32))}function $A(e){for(;sc();)switch(oi){case e:return Nl;case 34:case 39:e!==34&&e!==39&&$A(oi);break;case 40:e===41&&$A(e);break;case 92:sc();break}return Nl}function f5e(e,t){for(;sc()&&e+oi!==57;)if(e+oi===84&&zu()===47)break;return"/*"+M1(t,Nl-1)+"*"+lC(e===47?e:sc())}function m5e(e){for(;!Ky(zu());)sc();return M1(e,Nl)}function p5e(e){return KY(sw("",null,null,null,[""],e=YY(e),0,[0],e))}function sw(e,t,r,a,s,i,o,l,c){for(var d=0,u=0,h=o,f=0,p=0,v=0,g=1,b=1,y=1,S=0,w="",k=s,C=i,_=a,E=w;b;)switch(v=S,S=sc()){case 40:if(v!=108&&no(E,h-1)==58){UA(E+=nn(nw(S),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=nw(S);break;case 9:case 10:case 13:case 32:E+=u5e(v);break;case 92:E+=h5e(aw()-1,7);continue;case 47:switch(zu()){case 42:case 47:NN(x5e(f5e(sc(),aw()),t,r),c);break;default:E+="/"}break;case 123*g:l[d++]=Au(E)*y;case 125*g:case 59:case 0:switch(S){case 0:case 125:b=0;case 59+u:y==-1&&(E=nn(E,/\f/g,"")),p>0&&Au(E)-h&&NN(p>32?QB(E+";",a,r,h-1):QB(nn(E," ","")+";",a,r,h-2),c);break;case 59:E+=";";default:if(NN(_=XB(E,t,r,d,u,s,l,w,k=[],C=[],h),i),S===123)if(u===0)sw(E,t,_,_,k,i,h,l,C);else switch(f===99&&no(E,3)===110?100:f){case 100:case 108:case 109:case 115:sw(e,_,_,a&&NN(XB(e,_,_,0,0,s,l,w,s,k=[],h),C),s,C,h,l,a?k:C);break;default:sw(E,_,_,_,[""],C,0,l,C)}}d=u=p=0,g=y=1,w=E="",h=o;break;case 58:h=1+Au(E),p=v;default:if(g<1){if(S==123)--g;else if(S==125&&g++==0&&d5e()==125)continue}switch(E+=lC(S),S*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(Au(E)-1)*y,y=1;break;case 64:zu()===45&&(E+=nw(sc())),f=zu(),u=h=Au(w=E+=m5e(aw())),S++;break;case 45:v===45&&Au(E)==2&&(g=0)}}return i}function XB(e,t,r,a,s,i,o,l,c,d,u){for(var h=s-1,f=s===0?i:[""],p=OI(f),v=0,g=0,b=0;v<a;++v)for(var y=0,S=Yy(e,h+1,h=n5e(g=o[v])),w=e;y<p;++y)(w=WY(g>0?f[y]+" "+S:nn(S,/&\f/g,f[y])))&&(c[b++]=w);return dC(e,t,r,s===0?II:l,c,d,u)}function x5e(e,t,r){return dC(e,t,r,zY,lC(c5e()),Yy(e,2,-2),0)}function QB(e,t,r,a){return dC(e,t,r,PI,Yy(e,0,a),Yy(e,a+1,-1),a)}function k0(e,t){for(var r="",a=OI(e),s=0;s<a;s++)r+=t(e[s],s,e,t)||"";return r}function v5e(e,t,r,a){switch(e.type){case a5e:if(e.children.length)break;case r5e:case PI:return e.return=e.return||e.value;case zY:return"";case HY:return e.return=e.value+"{"+k0(e.children,a)+"}";case II:e.value=e.props.join(",")}return Au(r=k0(e.children,a))?e.return=e.value+"{"+r+"}":""}function g5e(e){var t=OI(e);return function(r,a,s,i){for(var o="",l=0;l<t;l++)o+=e[l](r,a,s,i)||"";return o}}function b5e(e){return function(t){t.root||(t=t.return)&&e(t)}}function y5e(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var j5e=function(t,r,a){for(var s=0,i=0;s=i,i=zu(),s===38&&i===12&&(r[a]=1),!Ky(i);)sc();return M1(t,Nl)},N5e=function(t,r){var a=-1,s=44;do switch(Ky(s)){case 0:s===38&&zu()===12&&(r[a]=1),t[a]+=j5e(Nl-1,r,a);break;case 2:t[a]+=nw(s);break;case 4:if(s===44){t[++a]=zu()===58?"&\f":"",r[a]=t[a].length;break}default:t[a]+=lC(s)}while(s=sc());return t},w5e=function(t,r){return KY(N5e(YY(t),r))},JB=new WeakMap,S5e=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,a=t.parent,s=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!JB.get(a))&&!s){JB.set(t,!0);for(var i=[],o=w5e(r,i),l=a.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},C5e=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function XY(e,t){switch(i5e(e,t)){case 5103:return an+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return an+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return an+e+j2+e+No+e+e;case 6828:case 4268:return an+e+No+e+e;case 6165:return an+e+No+"flex-"+e+e;case 5187:return an+e+nn(e,/(\w+).+(:[^]+)/,an+"box-$1$2"+No+"flex-$1$2")+e;case 5443:return an+e+No+"flex-item-"+nn(e,/flex-|-self/,"")+e;case 4675:return an+e+No+"flex-line-pack"+nn(e,/align-content|flex-|-self/,"")+e;case 5548:return an+e+No+nn(e,"shrink","negative")+e;case 5292:return an+e+No+nn(e,"basis","preferred-size")+e;case 6060:return an+"box-"+nn(e,"-grow","")+an+e+No+nn(e,"grow","positive")+e;case 4554:return an+nn(e,/([^-])(transform)/g,"$1"+an+"$2")+e;case 6187:return nn(nn(nn(e,/(zoom-|grab)/,an+"$1"),/(image-set)/,an+"$1"),e,"")+e;case 5495:case 3959:return nn(e,/(image-set\([^]*)/,an+"$1$`$1");case 4968:return nn(nn(e,/(.+:)(flex-)?(.*)/,an+"box-pack:$3"+No+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+an+e+e;case 4095:case 3583:case 4068:case 2532:return nn(e,/(.+)-inline(.+)/,an+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Au(e)-1-t>6)switch(no(e,t+1)){case 109:if(no(e,t+4)!==45)break;case 102:return nn(e,/(.+:)(.+)-([^]+)/,"$1"+an+"$2-$3$1"+j2+(no(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~UA(e,"stretch")?XY(nn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(no(e,t+1)!==115)break;case 6444:switch(no(e,Au(e)-3-(~UA(e,"!important")&&10))){case 107:return nn(e,":",":"+an)+e;case 101:return nn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+an+(no(e,14)===45?"inline-":"")+"box$3$1"+an+"$2$3$1"+No+"$2box$3")+e}break;case 5936:switch(no(e,t+11)){case 114:return an+e+No+nn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return an+e+No+nn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return an+e+No+nn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return an+e+No+e+e}return e}var k5e=function(t,r,a,s){if(t.length>-1&&!t.return)switch(t.type){case PI:t.return=XY(t.value,t.length);break;case HY:return k0([Mb(t,{value:nn(t.value,"@","@"+an)})],s);case II:if(t.length)return l5e(t.props,function(i){switch(o5e(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return k0([Mb(t,{props:[nn(i,/:(read-\w+)/,":"+j2+"$1")]})],s);case"::placeholder":return k0([Mb(t,{props:[nn(i,/:(plac\w+)/,":"+an+"input-$1")]}),Mb(t,{props:[nn(i,/:(plac\w+)/,":"+j2+"$1")]}),Mb(t,{props:[nn(i,/:(plac\w+)/,No+"input-$1")]})],s)}return""})}},E5e=[k5e],_5e=function(t){var r=t.key;if(r==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||E5e,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;l.push(g)});var c,d=[S5e,C5e];{var u,h=[v5e,b5e(function(g){u.insert(g)})],f=g5e(d.concat(s,h)),p=function(b){return k0(p5e(b),f)};c=function(b,y,S,w){u=S,p(b?b+"{"+y.styles+"}":y.styles),w&&(v.inserted[y.name]=!0)}}var v={key:r,sheet:new t5e({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},K_={exports:{}},un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZB;function D5e(){if(ZB)return un;ZB=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function w(C){if(typeof C=="object"&&C!==null){var _=C.$$typeof;switch(_){case t:switch(C=C.type,C){case c:case d:case a:case i:case s:case h:return C;default:switch(C=C&&C.$$typeof,C){case l:case u:case v:case p:case o:return C;default:return _}}case r:return _}}}function k(C){return w(C)===d}return un.AsyncMode=c,un.ConcurrentMode=d,un.ContextConsumer=l,un.ContextProvider=o,un.Element=t,un.ForwardRef=u,un.Fragment=a,un.Lazy=v,un.Memo=p,un.Portal=r,un.Profiler=i,un.StrictMode=s,un.Suspense=h,un.isAsyncMode=function(C){return k(C)||w(C)===c},un.isConcurrentMode=k,un.isContextConsumer=function(C){return w(C)===l},un.isContextProvider=function(C){return w(C)===o},un.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},un.isForwardRef=function(C){return w(C)===u},un.isFragment=function(C){return w(C)===a},un.isLazy=function(C){return w(C)===v},un.isMemo=function(C){return w(C)===p},un.isPortal=function(C){return w(C)===r},un.isProfiler=function(C){return w(C)===i},un.isStrictMode=function(C){return w(C)===s},un.isSuspense=function(C){return w(C)===h},un.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===a||C===d||C===i||C===s||C===h||C===f||typeof C=="object"&&C!==null&&(C.$$typeof===v||C.$$typeof===p||C.$$typeof===o||C.$$typeof===l||C.$$typeof===u||C.$$typeof===b||C.$$typeof===y||C.$$typeof===S||C.$$typeof===g)},un.typeOf=w,un}var e7;function A5e(){return e7||(e7=1,K_.exports=D5e()),K_.exports}var X_,t7;function T5e(){if(t7)return X_;t7=1;var e=A5e(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=a,i[e.Memo]=s;function o(v){return e.isMemo(v)?s:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function p(v,g,b){if(typeof g!="string"){if(f){var y=h(g);y&&y!==f&&p(v,y,b)}var S=c(g);d&&(S=S.concat(d(g)));for(var w=o(v),k=o(g),C=0;C<S.length;++C){var _=S[C];if(!r[_]&&!(b&&b[_])&&!(k&&k[_])&&!(w&&w[_])){var E=u(g,_);try{l(v,_,E)}catch{}}}}return v}return X_=p,X_}T5e();var I5e=!0;function P5e(e,t,r){var a="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(a+=s+" ")}),a}var QY=function(t,r,a){var s=t.key+"-"+r.name;(a===!1||I5e===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},O5e=function(t,r,a){QY(t,r,a);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function M5e(e){for(var t=0,r,a=0,s=e.length;s>=4;++a,s-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var R5e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},F5e=/[A-Z]|^ms/g,L5e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JY=function(t){return t.charCodeAt(1)===45},r7=function(t){return t!=null&&typeof t!="boolean"},Q_=y5e(function(e){return JY(e)?e:e.replace(F5e,"-$&").toLowerCase()}),a7=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(L5e,function(a,s,i){return Tu={name:s,styles:i,next:Tu},s})}return R5e[t]!==1&&!JY(t)&&typeof r=="number"&&r!==0?r+"px":r};function Xy(e,t,r){if(r==null)return"";var a=r;if(a.__emotion_styles!==void 0)return a;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Tu={name:s.name,styles:s.styles,next:Tu},s.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Tu={name:o.name,styles:o.styles,next:Tu},o=o.next;var l=i.styles+";";return l}return B5e(e,t,r)}case"function":{if(e!==void 0){var c=Tu,d=r(e);return Tu=c,Xy(e,t,d)}break}}var u=r;return u}function B5e(e,t,r){var a="";if(Array.isArray(r))for(var s=0;s<r.length;s++)a+=Xy(e,t,r[s])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var l=o;r7(l)&&(a+=Q_(i)+":"+a7(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)r7(o[c])&&(a+=Q_(i)+":"+a7(i,o[c])+";");else{var d=Xy(e,t,o);switch(i){case"animation":case"animationName":{a+=Q_(i)+":"+d+";";break}default:a+=i+"{"+d+"}"}}}return a}var n7=/label:\s*([^\s;{]+)\s*(;|$)/g,Tu;function ZY(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,s="";Tu=void 0;var i=e[0];if(i==null||i.raw===void 0)a=!1,s+=Xy(r,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=Xy(r,t,e[l]),a){var c=i;s+=c[l]}n7.lastIndex=0;for(var d="",u;(u=n7.exec(s))!==null;)d+="-"+u[1];var h=M5e(s)+d;return{name:h,styles:s,next:Tu}}var U5e=function(t){return t()},$5e=gw.useInsertionEffect?gw.useInsertionEffect:!1,V5e=$5e||U5e,eK=j.createContext(typeof HTMLElement<"u"?_5e({key:"css"}):null);eK.Provider;var q5e=function(t){return j.forwardRef(function(r,a){var s=j.useContext(eK);return t(r,s,a)})},z5e=j.createContext({}),MI={}.hasOwnProperty,VA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",H5e=function(t,r){var a={};for(var s in r)MI.call(r,s)&&(a[s]=r[s]);return a[VA]=t,a},W5e=function(t){var r=t.cache,a=t.serialized,s=t.isStringTag;return QY(r,a,s),V5e(function(){return O5e(r,a,s)}),null},G5e=q5e(function(e,t,r){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var s=e[VA],i=[a],o="";typeof e.className=="string"?o=P5e(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=ZY(i,void 0,j.useContext(z5e));o+=t.key+"-"+l.name;var c={};for(var d in e)MI.call(e,d)&&d!=="css"&&d!==VA&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),j.createElement(j.Fragment,null,j.createElement(W5e,{cache:t,serialized:l,isStringTag:typeof s=="string"}),j.createElement(s,c))}),Y5e=G5e,Wr=function(t,r){var a=arguments;if(r==null||!MI.call(r,"css"))return j.createElement.apply(void 0,a);var s=a.length,i=new Array(s);i[0]=Y5e,i[1]=H5e(t,r);for(var o=2;o<s;o++)i[o]=a[o];return j.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Wr||(Wr={}));function RI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ZY(t)}function K5e(){var e=RI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function X5e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Z0=Math.min,wx=Math.max,N2=Math.round,wN=Math.floor,Hu=e=>({x:e,y:e}),Q5e={left:"right",right:"left",bottom:"top",top:"bottom"},J5e={start:"end",end:"start"};function Z5e(e,t,r){return wx(e,Z0(t,r))}function uC(e,t){return typeof e=="function"?e(t):e}function eg(e){return e.split("-")[0]}function R1(e){return e.split("-")[1]}function eAe(e){return e==="x"?"y":"x"}function FI(e){return e==="y"?"height":"width"}const tAe=new Set(["top","bottom"]);function dx(e){return tAe.has(eg(e))?"y":"x"}function LI(e){return eAe(dx(e))}function rAe(e,t,r){r===void 0&&(r=!1);const a=R1(e),s=LI(e),i=FI(s);let o=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=w2(o)),[o,w2(o)]}function aAe(e){const t=w2(e);return[qA(e),t,qA(t)]}function qA(e){return e.replace(/start|end/g,t=>J5e[t])}const s7=["left","right"],i7=["right","left"],nAe=["top","bottom"],sAe=["bottom","top"];function iAe(e,t,r){switch(e){case"top":case"bottom":return r?t?i7:s7:t?s7:i7;case"left":case"right":return t?nAe:sAe;default:return[]}}function oAe(e,t,r,a){const s=R1(e);let i=iAe(eg(e),r==="start",a);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(qA)))),i}function w2(e){return e.replace(/left|right|bottom|top/g,t=>Q5e[t])}function lAe(e){return{top:0,right:0,bottom:0,left:0,...e}}function tK(e){return typeof e!="number"?lAe(e):{top:e,right:e,bottom:e,left:e}}function S2(e){const{x:t,y:r,width:a,height:s}=e;return{width:a,height:s,top:r,left:t,right:t+a,bottom:r+s,x:t,y:r}}function o7(e,t,r){let{reference:a,floating:s}=e;const i=dx(t),o=LI(t),l=FI(o),c=eg(t),d=i==="y",u=a.x+a.width/2-s.width/2,h=a.y+a.height/2-s.height/2,f=a[l]/2-s[l]/2;let p;switch(c){case"top":p={x:u,y:a.y-s.height};break;case"bottom":p={x:u,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:h};break;case"left":p={x:a.x-s.width,y:h};break;default:p={x:a.x,y:a.y}}switch(R1(t)){case"start":p[o]-=f*(r&&d?-1:1);break;case"end":p[o]+=f*(r&&d?-1:1);break}return p}const cAe=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=o7(d,a,c),f=a,p={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:S,y:w,data:k,reset:C}=await y({x:u,y:h,initialPlacement:a,placement:f,strategy:s,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=S??u,h=w??h,p={...p,[b]:{...p[b],...k}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:u,y:h}=o7(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function dAe(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=uC(t,e),v=tK(p),b=l[f?h==="floating"?"reference":"floating":h],y=S2(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),S=h==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},C=S2(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:w,strategy:c}):S);return{top:(y.top-C.top+v.top)/k.y,bottom:(C.bottom-y.bottom+v.bottom)/k.y,left:(y.left-C.left+v.left)/k.x,right:(C.right-y.right+v.right)/k.x}}const uAe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=uC(e,t)||{};if(d==null)return{};const h=tK(u),f={x:r,y:a},p=LI(s),v=FI(p),g=await o.getDimensions(d),b=p==="y",y=b?"top":"left",S=b?"bottom":"right",w=b?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[p]-f[p]-i.floating[v],C=f[p]-i.reference[p],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=_?_[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(_)))&&(E=l.floating[w]||i.floating[v]);const T=k/2-C/2,I=E/2-g[v]/2-1,F=Z0(h[y],I),A=Z0(h[S],I),P=F,q=E-g[v]-A,V=E/2-g[v]/2+T,Y=Z5e(P,V,q),B=!c.arrow&&R1(s)!=null&&V!==Y&&i.reference[v]/2-(V<P?F:A)-g[v]/2<0,Q=B?V<P?V-P:V-q:0;return{[p]:f[p]+Q,data:{[p]:Y,centerOffset:V-Y-Q,...B&&{alignmentOffset:Q}},reset:B}}}),hAe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=uC(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=eg(s),S=dx(l),w=eg(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=f||(w||!g?[w2(l)]:aAe(l)),_=v!=="none";!f&&_&&C.push(...oAe(l,g,v,k));const E=[l,...C],T=await dAe(t,b),I=[];let F=((a=i.flip)==null?void 0:a.overflows)||[];if(u&&I.push(T[y]),h){const V=rAe(s,o,k);I.push(T[V[0]],T[V[1]])}if(F=[...F,{placement:s,overflows:I}],!I.every(V=>V<=0)){var A,P;const V=(((A=i.flip)==null?void 0:A.index)||0)+1,Y=E[V];if(Y&&(!(h==="alignment"?S!==dx(Y):!1)||F.every(R=>dx(R.placement)===S?R.overflows[0]>0:!0)))return{data:{index:V,overflows:F},reset:{placement:Y}};let B=(P=F.filter(Q=>Q.overflows[0]<=0).sort((Q,R)=>Q.overflows[1]-R.overflows[1])[0])==null?void 0:P.placement;if(!B)switch(p){case"bestFit":{var q;const Q=(q=F.filter(R=>{if(_){const Z=dx(R.placement);return Z===S||Z==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(Z=>Z>0).reduce((Z,J)=>Z+J,0)]).sort((R,Z)=>R[1]-Z[1])[0])==null?void 0:q[0];Q&&(B=Q);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}},fAe=new Set(["left","top"]);async function mAe(e,t){const{placement:r,platform:a,elements:s}=e,i=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=eg(r),l=R1(r),c=dx(r)==="y",d=fAe.has(o)?-1:1,u=i&&c?-1:1,h=uC(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:f*d}:{x:f*d,y:p*u}}const pAe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await mAe(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function hC(){return typeof window<"u"}function Ag(e){return rK(e)?(e.nodeName||"").toLowerCase():"#document"}function ic(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ih(e){var t;return(t=(rK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rK(e){return hC()?e instanceof Node||e instanceof ic(e).Node:!1}function Zo(e){return hC()?e instanceof Element||e instanceof ic(e).Element:!1}function Zu(e){return hC()?e instanceof HTMLElement||e instanceof ic(e).HTMLElement:!1}function l7(e){return!hC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ic(e).ShadowRoot}const xAe=new Set(["inline","contents"]);function F1(e){const{overflow:t,overflowX:r,overflowY:a,display:s}=Yc(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!xAe.has(s)}const vAe=new Set(["table","td","th"]);function gAe(e){return vAe.has(Ag(e))}const bAe=[":popover-open",":modal"];function fC(e){return bAe.some(t=>{try{return e.matches(t)}catch{return!1}})}const yAe=["transform","translate","scale","rotate","perspective"],jAe=["transform","translate","scale","rotate","perspective","filter"],NAe=["paint","layout","strict","content"];function BI(e){const t=UI(),r=Zo(e)?Yc(e):e;return yAe.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||jAe.some(a=>(r.willChange||"").includes(a))||NAe.some(a=>(r.contain||"").includes(a))}function wAe(e){let t=Jm(e);for(;Zu(t)&&!tg(t);){if(BI(t))return t;if(fC(t))return null;t=Jm(t)}return null}function UI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const SAe=new Set(["html","body","#document"]);function tg(e){return SAe.has(Ag(e))}function Yc(e){return ic(e).getComputedStyle(e)}function mC(e){return Zo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Jm(e){if(Ag(e)==="html")return e;const t=e.assignedSlot||e.parentNode||l7(e)&&e.host||ih(e);return l7(t)?t.host:t}function aK(e){const t=Jm(e);return tg(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zu(t)&&F1(t)?t:aK(t)}function Qy(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=aK(e),i=s===((a=e.ownerDocument)==null?void 0:a.body),o=ic(s);if(i){const l=zA(o);return t.concat(o,o.visualViewport||[],F1(s)?s:[],l&&r?Qy(l):[])}return t.concat(s,Qy(s,[],r))}function zA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function nK(e){const t=Yc(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=Zu(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:a,l=N2(r)!==i||N2(a)!==o;return l&&(r=i,a=o),{width:r,height:a,$:l}}function $I(e){return Zo(e)?e:e.contextElement}function E0(e){const t=$I(e);if(!Zu(t))return Hu(1);const r=t.getBoundingClientRect(),{width:a,height:s,$:i}=nK(t);let o=(i?N2(r.width):r.width)/a,l=(i?N2(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const CAe=Hu(0);function sK(e){const t=ic(e);return!UI()||!t.visualViewport?CAe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kAe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ic(e)?!1:t}function Ux(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=$I(e);let o=Hu(1);t&&(a?Zo(a)&&(o=E0(a)):o=E0(e));const l=kAe(i,r,a)?sK(i):Hu(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=ic(i),p=a&&Zo(a)?ic(a):a;let v=f,g=zA(v);for(;g&&a&&p!==v;){const b=E0(g),y=g.getBoundingClientRect(),S=Yc(g),w=y.left+(g.clientLeft+parseFloat(S.paddingLeft))*b.x,k=y.top+(g.clientTop+parseFloat(S.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=w,d+=k,v=ic(g),g=zA(v)}}return S2({width:u,height:h,x:c,y:d})}function VI(e,t){const r=mC(e).scrollLeft;return t?t.left+r:Ux(ih(e)).left+r}function iK(e,t,r){r===void 0&&(r=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(r?0:VI(e,a)),i=a.top+t.scrollTop;return{x:s,y:i}}function EAe(e){let{elements:t,rect:r,offsetParent:a,strategy:s}=e;const i=s==="fixed",o=ih(a),l=t?fC(t.floating):!1;if(a===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Hu(1);const u=Hu(0),h=Zu(a);if((h||!h&&!i)&&((Ag(a)!=="body"||F1(o))&&(c=mC(a)),Zu(a))){const p=Ux(a);d=E0(a),u.x=p.x+a.clientLeft,u.y=p.y+a.clientTop}const f=o&&!h&&!i?iK(o,c,!0):Hu(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:r.y*d.y-c.scrollTop*d.y+u.y+f.y}}function _Ae(e){return Array.from(e.getClientRects())}function DAe(e){const t=ih(e),r=mC(e),a=e.ownerDocument.body,s=wx(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=wx(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+VI(e);const l=-r.scrollTop;return Yc(a).direction==="rtl"&&(o+=wx(t.clientWidth,a.clientWidth)-s),{width:s,height:i,x:o,y:l}}function AAe(e,t){const r=ic(e),a=ih(e),s=r.visualViewport;let i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=UI();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const TAe=new Set(["absolute","fixed"]);function IAe(e,t){const r=Ux(e,!0,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft,i=Zu(e)?E0(e):Hu(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=a*i.y;return{width:o,height:l,x:c,y:d}}function c7(e,t,r){let a;if(t==="viewport")a=AAe(e,r);else if(t==="document")a=DAe(ih(e));else if(Zo(t))a=IAe(t,r);else{const s=sK(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return S2(a)}function oK(e,t){const r=Jm(e);return r===t||!Zo(r)||tg(r)?!1:Yc(r).position==="fixed"||oK(r,t)}function PAe(e,t){const r=t.get(e);if(r)return r;let a=Qy(e,[],!1).filter(l=>Zo(l)&&Ag(l)!=="body"),s=null;const i=Yc(e).position==="fixed";let o=i?Jm(e):e;for(;Zo(o)&&!tg(o);){const l=Yc(o),c=BI(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&TAe.has(s.position)||F1(o)&&!c&&oK(e,o))?a=a.filter(u=>u!==o):s=l,o=Jm(o)}return t.set(e,a),a}function OAe(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const o=[...r==="clippingAncestors"?fC(t)?[]:PAe(t,this._c):[].concat(r),a],l=o[0],c=o.reduce((d,u)=>{const h=c7(t,u,s);return d.top=wx(h.top,d.top),d.right=Z0(h.right,d.right),d.bottom=Z0(h.bottom,d.bottom),d.left=wx(h.left,d.left),d},c7(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function MAe(e){const{width:t,height:r}=nK(e);return{width:t,height:r}}function RAe(e,t,r){const a=Zu(t),s=ih(t),i=r==="fixed",o=Ux(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hu(0);function d(){c.x=VI(s)}if(a||!a&&!i)if((Ag(t)!=="body"||F1(s))&&(l=mC(t)),a){const p=Ux(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();i&&!a&&s&&d();const u=s&&!a&&!i?iK(s,l):Hu(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function J_(e){return Yc(e).position==="static"}function d7(e,t){if(!Zu(e)||Yc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ih(e)===r&&(r=r.ownerDocument.body),r}function lK(e,t){const r=ic(e);if(fC(e))return r;if(!Zu(e)){let s=Jm(e);for(;s&&!tg(s);){if(Zo(s)&&!J_(s))return s;s=Jm(s)}return r}let a=d7(e,t);for(;a&&gAe(a)&&J_(a);)a=d7(a,t);return a&&tg(a)&&J_(a)&&!BI(a)?r:a||wAe(e)||r}const FAe=async function(e){const t=this.getOffsetParent||lK,r=this.getDimensions,a=await r(e.floating);return{reference:RAe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function LAe(e){return Yc(e).direction==="rtl"}const BAe={convertOffsetParentRelativeRectToViewportRelativeRect:EAe,getDocumentElement:ih,getClippingRect:OAe,getOffsetParent:lK,getElementRects:FAe,getClientRects:_Ae,getDimensions:MAe,getScale:E0,isElement:Zo,isRTL:LAe};function cK(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function UAe(e,t){let r=null,a;const s=ih(e);function i(){var l;clearTimeout(a),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=d;if(l||t(),!f||!p)return;const v=wN(h),g=wN(s.clientWidth-(u+f)),b=wN(s.clientHeight-(h+p)),y=wN(u),w={rootMargin:-v+"px "+-g+"px "+-b+"px "+-y+"px",threshold:wx(0,Z0(1,c))||1};let k=!0;function C(_){const E=_[0].intersectionRatio;if(E!==c){if(!k)return o();E?o(!1,E):a=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!cK(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(C,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(C,w)}r.observe(e)}return o(!0),i}function dK(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=$I(e),u=s||i?[...d?Qy(d):[],...Qy(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=d&&l?UAe(d,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[S]=y;S&&S.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let v,g=c?Ux(e):null;c&&b();function b(){const y=Ux(e);g&&!cK(g,y)&&r(),g=y,v=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(S=>{s&&S.removeEventListener("scroll",r),i&&S.removeEventListener("resize",r)}),h?.(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const $Ae=pAe,VAe=hAe,u7=uAe,qAe=(e,t,r)=>{const a=new Map,s={platform:BAe,...r},i={...s.platform,_c:a};return cAe(e,t,{...s,platform:i})};var HA=j.useLayoutEffect,zAe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],C2=function(){};function HAe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function WAe(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];var i=[].concat(a);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(HAe(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var h7=function(t){return t3e(t)?t.filter(Boolean):Ba(t)==="object"&&t!==null?[t]:[]},uK=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=wf(t,zAe);return Yr({},r)},Ds=function(t,r,a){var s=t.cx,i=t.getStyles,o=t.getClassNames,l=t.className;return{css:i(r,t),className:s(a??{},o(r,t),l)}};function pC(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function GAe(e){return pC(e)?window.innerHeight:e.clientHeight}function hK(e){return pC(e)?window.pageYOffset:e.scrollTop}function k2(e,t){if(pC(e)){window.scrollTo(0,t);return}e.scrollTop=t}function YAe(e){var t=getComputedStyle(e),r=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function KAe(e,t,r,a){return r*((e=e/a-1)*e*e+1)+t}function SN(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C2,s=hK(e),i=t-s,o=10,l=0;function c(){l+=o;var d=KAe(l,s,i,r);k2(e,d),l<r?window.requestAnimationFrame(c):a(e)}c()}function f7(e,t){var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=t.offsetHeight/3;a.bottom+s>r.bottom?k2(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):a.top-s<r.top&&k2(e,Math.max(t.offsetTop-s,0))}function XAe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function m7(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function QAe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var fK=!1,JAe={get passive(){return fK=!0}},CN=typeof window<"u"?window:{};CN.addEventListener&&CN.removeEventListener&&(CN.addEventListener("p",C2,JAe),CN.removeEventListener("p",C2,!1));var ZAe=fK;function e3e(e){return e!=null}function t3e(e){return Array.isArray(e)}function kN(e,t,r){return e?t:r}var r3e=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var i=Object.entries(t).filter(function(o){var l=Zh(o,1),c=l[0];return!a.includes(c)});return i.reduce(function(o,l){var c=Zh(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},a3e=["children","innerProps"],n3e=["children","innerProps"];function s3e(e){var t=e.maxHeight,r=e.menuEl,a=e.minHeight,s=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=YAe(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),h=u.height,f=r.getBoundingClientRect(),p=f.bottom,v=f.height,g=f.top,b=r.offsetParent.getBoundingClientRect(),y=b.top,S=o?window.innerHeight:GAe(c),w=hK(c),k=parseInt(getComputedStyle(r).marginBottom,10),C=parseInt(getComputedStyle(r).marginTop,10),_=y-C,E=S-g,T=_+w,I=h-w-g,F=p-S+w+k,A=w+g-C,P=160;switch(s){case"auto":case"bottom":if(E>=v)return{placement:"bottom",maxHeight:t};if(I>=v&&!o)return i&&SN(c,F,P),{placement:"bottom",maxHeight:t};if(!o&&I>=a||o&&E>=a){i&&SN(c,F,P);var q=o?E-k:I-k;return{placement:"bottom",maxHeight:q}}if(s==="auto"||o){var V=t,Y=o?_:T;return Y>=a&&(V=Math.min(Y-k-l,t)),{placement:"top",maxHeight:V}}if(s==="bottom")return i&&k2(c,F),{placement:"bottom",maxHeight:t};break;case"top":if(_>=v)return{placement:"top",maxHeight:t};if(T>=v&&!o)return i&&SN(c,A,P),{placement:"top",maxHeight:t};if(!o&&T>=a||o&&_>=a){var B=t;return(!o&&T>=a||o&&_>=a)&&(B=o?_-C:T-C),i&&SN(c,A,P),{placement:"top",maxHeight:B}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return d}function i3e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var mK=function(t){return t==="auto"?"bottom":t},o3e=function(t,r){var a,s=t.placement,i=t.theme,o=i.borderRadius,l=i.spacing,c=i.colors;return Yr((a={label:"menu"},ty(a,i3e(s),"100%"),ty(a,"position","absolute"),ty(a,"width","100%"),ty(a,"zIndex",1),a),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},pK=j.createContext(null),l3e=function(t){var r=t.children,a=t.minMenuHeight,s=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=j.useContext(pK)||{},u=d.setPortalPlacement,h=j.useRef(null),f=j.useState(s),p=Zh(f,2),v=p[0],g=p[1],b=j.useState(null),y=Zh(b,2),S=y[0],w=y[1],k=c.spacing.controlHeight;return HA(function(){var C=h.current;if(C){var _=o==="fixed",E=l&&!_,T=s3e({maxHeight:s,menuEl:C,minHeight:a,placement:i,shouldScroll:E,isFixedPosition:_,controlHeight:k});g(T.maxHeight),w(T.placement),u?.(T.placement)}},[s,i,o,l,a,u,k]),r({ref:h,placerProps:Yr(Yr({},t),{},{placement:S||mK(i),maxHeight:v})})},c3e=function(t){var r=t.children,a=t.innerRef,s=t.innerProps;return Wr("div",Qr({},Ds(t,"menu",{menu:!0}),{ref:a},s),r)},d3e=c3e,u3e=function(t,r){var a=t.maxHeight,s=t.theme.spacing.baseUnit;return Yr({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},h3e=function(t){var r=t.children,a=t.innerProps,s=t.innerRef,i=t.isMulti;return Wr("div",Qr({},Ds(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},a),r)},xK=function(t,r){var a=t.theme,s=a.spacing.baseUnit,i=a.colors;return Yr({textAlign:"center"},r?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},f3e=xK,m3e=xK,p3e=function(t){var r=t.children,a=r===void 0?"No options":r,s=t.innerProps,i=wf(t,a3e);return Wr("div",Qr({},Ds(Yr(Yr({},i),{},{children:a,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),a)},x3e=function(t){var r=t.children,a=r===void 0?"Loading...":r,s=t.innerProps,i=wf(t,n3e);return Wr("div",Qr({},Ds(Yr(Yr({},i),{},{children:a,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),a)},v3e=function(t){var r=t.rect,a=t.offset,s=t.position;return{left:r.left,position:s,top:a,width:r.width,zIndex:1}},g3e=function(t){var r=t.appendTo,a=t.children,s=t.controlElement,i=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=j.useRef(null),d=j.useRef(null),u=j.useState(mK(o)),h=Zh(u,2),f=h[0],p=h[1],v=j.useMemo(function(){return{setPortalPlacement:p}},[]),g=j.useState(null),b=Zh(g,2),y=b[0],S=b[1],w=j.useCallback(function(){if(s){var E=XAe(s),T=l==="fixed"?0:window.pageYOffset,I=E[f]+T;(I!==y?.offset||E.left!==y?.rect.left||E.width!==y?.rect.width)&&S({offset:I,rect:E})}},[s,l,f,y?.offset,y?.rect.left,y?.rect.width]);HA(function(){w()},[w]);var k=j.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),s&&c.current&&(d.current=dK(s,c.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);HA(function(){k()},[k]);var C=j.useCallback(function(E){c.current=E,k()},[k]);if(!r&&l!=="fixed"||!y)return null;var _=Wr("div",Qr({ref:C},Ds(Yr(Yr({},t),{},{offset:y.offset,position:l,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),a);return Wr(pK.Provider,{value:v},r?c1.createPortal(_,r):_)},b3e=function(t){var r=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},y3e=function(t){var r=t.children,a=t.innerProps,s=t.isDisabled,i=t.isRtl;return Wr("div",Qr({},Ds(t,"container",{"--is-disabled":s,"--is-rtl":i}),a),r)},j3e=function(t,r){var a=t.theme.spacing,s=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Yr({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},N3e=function(t){var r=t.children,a=t.innerProps,s=t.isMulti,i=t.hasValue;return Wr("div",Qr({},Ds(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),a),r)},w3e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},S3e=function(t){var r=t.children,a=t.innerProps;return Wr("div",Qr({},Ds(t,"indicatorsContainer",{indicators:!0}),a),r)},p7,C3e=["size"],k3e=["innerProps","isRtl","size"],E3e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vK=function(t){var r=t.size,a=wf(t,C3e);return Wr("svg",Qr({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:E3e},a))},qI=function(t){return Wr(vK,Qr({size:20},t),Wr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},gK=function(t){return Wr(vK,Qr({size:20},t),Wr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bK=function(t,r){var a=t.isFocused,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Yr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:a?o.neutral60:o.neutral20,padding:i*2,":hover":{color:a?o.neutral80:o.neutral40}})},_3e=bK,D3e=function(t){var r=t.children,a=t.innerProps;return Wr("div",Qr({},Ds(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),r||Wr(gK,null))},A3e=bK,T3e=function(t){var r=t.children,a=t.innerProps;return Wr("div",Qr({},Ds(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),r||Wr(qI,null))},I3e=function(t,r){var a=t.isDisabled,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Yr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},P3e=function(t){var r=t.innerProps;return Wr("span",Qr({},r,Ds(t,"indicatorSeparator",{"indicator-separator":!0})))},O3e=K5e(p7||(p7=X5e([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),M3e=function(t,r){var a=t.isFocused,s=t.size,i=t.theme,o=i.colors,l=i.spacing.baseUnit;return Yr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},Z_=function(t){var r=t.delay,a=t.offset;return Wr("span",{css:RI({animation:"".concat(O3e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},R3e=function(t){var r=t.innerProps,a=t.isRtl,s=t.size,i=s===void 0?4:s,o=wf(t,k3e);return Wr("div",Qr({},Ds(Yr(Yr({},o),{},{innerProps:r,isRtl:a,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Wr(Z_,{delay:0,offset:a}),Wr(Z_,{delay:160,offset:!0}),Wr(Z_,{delay:320,offset:!a}))},F3e=function(t,r){var a=t.isDisabled,s=t.isFocused,i=t.theme,o=i.colors,l=i.borderRadius,c=i.spacing;return Yr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:s?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},L3e=function(t){var r=t.children,a=t.isDisabled,s=t.isFocused,i=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return Wr("div",Qr({ref:i},Ds(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":s,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),r)},B3e=L3e,U3e=["data"],$3e=function(t,r){var a=t.theme.spacing;return r?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},V3e=function(t){var r=t.children,a=t.cx,s=t.getStyles,i=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,h=t.selectProps;return Wr("div",Qr({},Ds(t,"group",{group:!0}),c),Wr(o,Qr({},l,{selectProps:h,theme:u,getStyles:s,getClassNames:i,cx:a}),d),Wr("div",null,r))},q3e=function(t,r){var a=t.theme,s=a.colors,i=a.spacing;return Yr({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},z3e=function(t){var r=uK(t);r.data;var a=wf(r,U3e);return Wr("div",Qr({},Ds(t,"groupHeading",{"group-heading":!0}),a))},H3e=V3e,W3e=["innerRef","isDisabled","isHidden","inputClassName"],G3e=function(t,r){var a=t.isDisabled,s=t.value,i=t.theme,o=i.spacing,l=i.colors;return Yr(Yr({visibility:a?"hidden":"visible",transform:s?"translateZ(0)":""},Y3e),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},yK={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Y3e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},yK)},K3e=function(t){return Yr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},yK)},X3e=function(t){var r=t.cx,a=t.value,s=uK(t),i=s.innerRef,o=s.isDisabled,l=s.isHidden,c=s.inputClassName,d=wf(s,W3e);return Wr("div",Qr({},Ds(t,"input",{"input-container":!0}),{"data-value":a||""}),Wr("input",Qr({className:r({input:!0},c),ref:i,style:K3e(l),disabled:o},d)))},Q3e=X3e,J3e=function(t,r){var a=t.theme,s=a.spacing,i=a.borderRadius,o=a.colors;return Yr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},Z3e=function(t,r){var a=t.theme,s=a.borderRadius,i=a.colors,o=t.cropWithEllipsis;return Yr({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},eTe=function(t,r){var a=t.theme,s=a.spacing,i=a.borderRadius,o=a.colors,l=t.isFocused;return Yr({alignItems:"center",display:"flex"},r?{}:{borderRadius:i/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},jK=function(t){var r=t.children,a=t.innerProps;return Wr("div",a,r)},tTe=jK,rTe=jK;function aTe(e){var t=e.children,r=e.innerProps;return Wr("div",Qr({role:"button"},r),t||Wr(qI,{size:14}))}var nTe=function(t){var r=t.children,a=t.components,s=t.data,i=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=a.Container,u=a.Label,h=a.Remove;return Wr(d,{data:s,innerProps:Yr(Yr({},Ds(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},Wr(u,{data:s,innerProps:Yr({},Ds(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),Wr(h,{data:s,innerProps:Yr(Yr({},Ds(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},sTe=nTe,iTe=function(t,r){var a=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Yr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:a?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:i?c.primary:c.primary50}})},oTe=function(t){var r=t.children,a=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.innerRef,l=t.innerProps;return Wr("div",Qr({},Ds(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":a},l),r)},lTe=oTe,cTe=function(t,r){var a=t.theme,s=a.spacing,i=a.colors;return Yr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},dTe=function(t){var r=t.children,a=t.innerProps;return Wr("div",Qr({},Ds(t,"placeholder",{placeholder:!0}),a),r)},uTe=dTe,hTe=function(t,r){var a=t.isDisabled,s=t.theme,i=s.spacing,o=s.colors;return Yr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:a?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},fTe=function(t){var r=t.children,a=t.isDisabled,s=t.innerProps;return Wr("div",Qr({},Ds(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),s),r)},mTe=fTe,pTe={ClearIndicator:T3e,Control:B3e,DropdownIndicator:D3e,DownChevron:gK,CrossIcon:qI,Group:H3e,GroupHeading:z3e,IndicatorsContainer:S3e,IndicatorSeparator:P3e,Input:Q3e,LoadingIndicator:R3e,Menu:d3e,MenuList:h3e,MenuPortal:g3e,LoadingMessage:x3e,NoOptionsMessage:p3e,MultiValue:sTe,MultiValueContainer:tTe,MultiValueLabel:rTe,MultiValueRemove:aTe,Option:lTe,Placeholder:uTe,SelectContainer:y3e,SingleValue:mTe,ValueContainer:N3e},xTe=function(t){return Yr(Yr({},pTe),t.components)},x7=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function vTe(e,t){return!!(e===t||x7(e)&&x7(t))}function gTe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!vTe(e[r],t[r]))return!1;return!0}function bTe(e,t){t===void 0&&(t=gTe);var r=null;function a(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return a.clear=function(){r=null},a}var yTe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},jTe=function(t){return Wr("span",Qr({css:yTe},t))},v7=jTe,NTe={guidance:function(t){var r=t.isSearchable,a=t.isMulti,s=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,a=t.label,s=a===void 0?"":a,i=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,a=t.focused,s=t.options,i=t.label,o=i===void 0?"":i,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,h=function(g,b){return g&&g.length?"".concat(g.indexOf(b)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(h(l,a),".");if(r==="menu"&&u){var f=c?" disabled":"",p="".concat(d?" selected":"").concat(f);return"".concat(o).concat(p,", ").concat(h(s,a),".")}return""},onFilter:function(t){var r=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(r?" for search term "+r:"",".")}},wTe=function(t){var r=t.ariaSelection,a=t.focusedOption,s=t.focusedValue,i=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,h=c.ariaLiveMessages,f=c.getOptionLabel,p=c.inputValue,v=c.isMulti,g=c.isOptionDisabled,b=c.isSearchable,y=c.menuIsOpen,S=c.options,w=c.screenReaderStatus,k=c.tabSelectsValue,C=c.isLoading,_=c["aria-label"],E=c["aria-live"],T=j.useMemo(function(){return Yr(Yr({},NTe),h||{})},[h]),I=j.useMemo(function(){var Y="";if(r&&T.onChange){var B=r.option,Q=r.options,R=r.removedValue,Z=r.removedValues,J=r.value,ie=function(le){return Array.isArray(le)?null:le},M=R||B||ie(J),z=M?f(M):"",ee=Q||Z||void 0,ne=ee?ee.map(f):[],W=Yr({isDisabled:M&&g(M,l),label:z,labels:ne},r);Y=T.onChange(W)}return Y},[r,T,g,l,f]),F=j.useMemo(function(){var Y="",B=a||s,Q=!!(a&&l&&l.includes(a));if(B&&T.onFocus){var R={focused:B,label:f(B),isDisabled:g(B,l),isSelected:Q,options:i,context:B===a?"menu":"value",selectValue:l,isAppleDevice:u};Y=T.onFocus(R)}return Y},[a,s,f,g,T,i,l,u]),A=j.useMemo(function(){var Y="";if(y&&S.length&&!C&&T.onFilter){var B=w({count:i.length});Y=T.onFilter({inputValue:p,resultsMessage:B})}return Y},[i,p,y,T,S,w,C]),P=r?.action==="initial-input-focus",q=j.useMemo(function(){var Y="";if(T.guidance){var B=s?"value":y?"menu":"input";Y=T.guidance({"aria-label":_,context:B,isDisabled:a&&g(a,l),isMulti:v,isSearchable:b,tabSelectsValue:k,isInitialFocus:P})}return Y},[_,a,s,v,g,b,y,T,l,k,P]),V=Wr(j.Fragment,null,Wr("span",{id:"aria-selection"},I),Wr("span",{id:"aria-focused"},F),Wr("span",{id:"aria-results"},A),Wr("span",{id:"aria-guidance"},q));return Wr(j.Fragment,null,Wr(v7,{id:d},P&&V),Wr(v7,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!P&&V))},STe=wTe,WA=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],CTe=new RegExp("["+WA.map(function(e){return e.letters}).join("")+"]","g"),NK={};for(var eD=0;eD<WA.length;eD++)for(var tD=WA[eD],rD=0;rD<tD.letters.length;rD++)NK[tD.letters[rD]]=tD.base;var wK=function(t){return t.replace(CTe,function(r){return NK[r]})},kTe=bTe(wK),g7=function(t){return t.replace(/^\s+|\s+$/g,"")},ETe=function(t){return"".concat(t.label," ").concat(t.value)},_Te=function(t){return function(r,a){if(r.data.__isNew__)return!0;var s=Yr({ignoreCase:!0,ignoreAccents:!0,stringify:ETe,trim:!0,matchFrom:"any"},t),i=s.ignoreCase,o=s.ignoreAccents,l=s.stringify,c=s.trim,d=s.matchFrom,u=c?g7(a):a,h=c?g7(l(r)):l(r);return i&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=kTe(u),h=wK(h)),d==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},DTe=["innerRef"];function ATe(e){var t=e.innerRef,r=wf(e,DTe),a=r3e(r,"onExited","in","enter","exit","appear");return Wr("input",Qr({ref:t},a,{css:RI({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var TTe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function ITe(e){var t=e.isEnabled,r=e.onBottomArrive,a=e.onBottomLeave,s=e.onTopArrive,i=e.onTopLeave,o=j.useRef(!1),l=j.useRef(!1),c=j.useRef(0),d=j.useRef(null),u=j.useCallback(function(b,y){if(d.current!==null){var S=d.current,w=S.scrollTop,k=S.scrollHeight,C=S.clientHeight,_=d.current,E=y>0,T=k-C-w,I=!1;T>y&&o.current&&(a&&a(b),o.current=!1),E&&l.current&&(i&&i(b),l.current=!1),E&&y>T?(r&&!o.current&&r(b),_.scrollTop=k,I=!0,o.current=!0):!E&&-y>w&&(s&&!l.current&&s(b),_.scrollTop=0,I=!0,l.current=!0),I&&TTe(b)}},[r,a,s,i]),h=j.useCallback(function(b){u(b,b.deltaY)},[u]),f=j.useCallback(function(b){c.current=b.changedTouches[0].clientY},[]),p=j.useCallback(function(b){var y=c.current-b.changedTouches[0].clientY;u(b,y)},[u]),v=j.useCallback(function(b){if(b){var y=ZAe?{passive:!1}:!1;b.addEventListener("wheel",h,y),b.addEventListener("touchstart",f,y),b.addEventListener("touchmove",p,y)}},[p,f,h]),g=j.useCallback(function(b){b&&(b.removeEventListener("wheel",h,!1),b.removeEventListener("touchstart",f,!1),b.removeEventListener("touchmove",p,!1))},[p,f,h]);return j.useEffect(function(){if(t){var b=d.current;return v(b),function(){g(b)}}},[t,v,g]),function(b){d.current=b}}var b7=["boxSizing","height","overflow","paddingRight","position"],y7={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function j7(e){e.cancelable&&e.preventDefault()}function N7(e){e.stopPropagation()}function w7(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function S7(){return"ontouchstart"in window||navigator.maxTouchPoints}var C7=!!(typeof window<"u"&&window.document&&window.document.createElement),Rb=0,Xv={capture:!1,passive:!1};function PTe(e){var t=e.isEnabled,r=e.accountForScrollbars,a=r===void 0?!0:r,s=j.useRef({}),i=j.useRef(null),o=j.useCallback(function(c){if(C7){var d=document.body,u=d&&d.style;if(a&&b7.forEach(function(v){var g=u&&u[v];s.current[v]=g}),a&&Rb<1){var h=parseInt(s.current.paddingRight,10)||0,f=document.body?document.body.clientWidth:0,p=window.innerWidth-f+h||0;Object.keys(y7).forEach(function(v){var g=y7[v];u&&(u[v]=g)}),u&&(u.paddingRight="".concat(p,"px"))}d&&S7()&&(d.addEventListener("touchmove",j7,Xv),c&&(c.addEventListener("touchstart",w7,Xv),c.addEventListener("touchmove",N7,Xv))),Rb+=1}},[a]),l=j.useCallback(function(c){if(C7){var d=document.body,u=d&&d.style;Rb=Math.max(Rb-1,0),a&&Rb<1&&b7.forEach(function(h){var f=s.current[h];u&&(u[h]=f)}),d&&S7()&&(d.removeEventListener("touchmove",j7,Xv),c&&(c.removeEventListener("touchstart",w7,Xv),c.removeEventListener("touchmove",N7,Xv)))}},[a]);return j.useEffect(function(){if(t){var c=i.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){i.current=c}}var OTe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},MTe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function RTe(e){var t=e.children,r=e.lockEnabled,a=e.captureEnabled,s=a===void 0?!0:a,i=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=ITe({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=PTe({isEnabled:r}),h=function(p){d(p),u(p)};return Wr(j.Fragment,null,r&&Wr("div",{onClick:OTe,css:MTe}),t(h))}var FTe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},LTe=function(t){var r=t.name,a=t.onFocus;return Wr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:FTe,value:"",onChange:function(){}})},BTe=LTe;function zI(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function UTe(){return zI(/^iPhone/i)}function SK(){return zI(/^Mac/i)}function $Te(){return zI(/^iPad/i)||SK()&&navigator.maxTouchPoints>1}function VTe(){return UTe()||$Te()}function qTe(){return SK()||VTe()}var zTe=function(t){return t.label},HTe=function(t){return t.label},WTe=function(t){return t.value},GTe=function(t){return!!t.isDisabled},YTe={clearIndicator:A3e,container:b3e,control:F3e,dropdownIndicator:_3e,group:$3e,groupHeading:q3e,indicatorsContainer:w3e,indicatorSeparator:I3e,input:G3e,loadingIndicator:M3e,loadingMessage:m3e,menu:o3e,menuList:u3e,menuPortal:v3e,multiValue:J3e,multiValueLabel:Z3e,multiValueRemove:eTe,noOptionsMessage:f3e,option:iTe,placeholder:cTe,singleValue:hTe,valueContainer:j3e},KTe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},XTe=4,CK=4,QTe=38,JTe=CK*2,ZTe={baseUnit:CK,controlHeight:QTe,menuGutter:JTe},aD={borderRadius:XTe,colors:KTe,spacing:ZTe},e4e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:m7(),captureMenuScroll:!m7(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:_Te(),formatGroupLabel:zTe,getOptionLabel:HTe,getOptionValue:WTe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:GTe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!QAe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function k7(e,t,r,a){var s=_K(e,t,r),i=DK(e,t,r),o=EK(e,t),l=E2(e,t);return{type:"option",data:t,isDisabled:s,isSelected:i,label:o,value:l,index:a}}function iw(e,t){return e.options.map(function(r,a){if("options"in r){var s=r.options.map(function(o,l){return k7(e,o,t,l)}).filter(function(o){return _7(e,o)});return s.length>0?{type:"group",data:r,options:s,index:a}:void 0}var i=k7(e,r,t,a);return _7(e,i)?i:void 0}).filter(e3e)}function kK(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,TI(r.options.map(function(a){return a.data}))):t.push(r.data),t},[])}function E7(e,t){return e.reduce(function(r,a){return a.type==="group"?r.push.apply(r,TI(a.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(a.index,"-").concat(s.index)}}))):r.push({data:a.data,id:"".concat(t,"-").concat(a.index)}),r},[])}function t4e(e,t){return kK(iw(e,t))}function _7(e,t){var r=e.inputValue,a=r===void 0?"":r,s=t.data,i=t.isSelected,o=t.label,l=t.value;return(!TK(e)||!i)&&AK(e,{label:o,value:l,data:s},a)}function r4e(e,t){var r=e.focusedValue,a=e.selectValue,s=a.indexOf(r);if(s>-1){var i=t.indexOf(r);if(i>-1)return r;if(s<t.length)return t[s]}return null}function a4e(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var nD=function(t,r){var a,s=(a=t.find(function(i){return i.data===r}))===null||a===void 0?void 0:a.id;return s||null},EK=function(t,r){return t.getOptionLabel(r)},E2=function(t,r){return t.getOptionValue(r)};function _K(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function DK(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var a=E2(e,t);return r.some(function(s){return E2(e,s)===a})}function AK(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var TK=function(t){var r=t.hideSelectedOptions,a=t.isMulti;return r===void 0?a:r},n4e=1,IK=function(e){WDe(r,e);var t=KDe(r);function r(a){var s;if(zDe(this,r),s=t.call(this,a),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,d){var u=s.props,h=u.onChange,f=u.name;d.name=f,s.ariaOnChange(c,d),h(c,d)},s.setValue=function(c,d,u){var h=s.props,f=h.closeMenuOnSelect,p=h.isMulti,v=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:v}),f&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:d,option:u})},s.selectOption=function(c){var d=s.props,u=d.blurInputOnSelect,h=d.isMulti,f=d.name,p=s.state.selectValue,v=h&&s.isOptionSelected(c,p),g=s.isOptionDisabled(c,p);if(v){var b=s.getOptionValue(c);s.setValue(p.filter(function(y){return s.getOptionValue(y)!==b}),"deselect-option",c)}else if(!g)h?s.setValue([].concat(TI(p),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:f});return}u&&s.blurInput()},s.removeValue=function(c){var d=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(c),f=u.filter(function(v){return s.getOptionValue(v)!==h}),p=kN(d,f,f[0]||null);s.onChange(p,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(kN(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,d=s.state.selectValue,u=d[d.length-1],h=d.slice(0,d.length-1),f=kN(c,h,h[0]||null);u&&s.onChange(f,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(c){return nD(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return E7(iw(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return WAe.apply(void 0,[s.props.classNamePrefix].concat(d))},s.getOptionLabel=function(c){return EK(s.props,c)},s.getOptionValue=function(c){return E2(s.props,c)},s.getStyles=function(c,d){var u=s.props.unstyled,h=YTe[c](d,u);h.boxSizing="border-box";var f=s.props.styles[c];return f?f(h,d):h},s.getClassNames=function(c,d){var u,h;return(u=(h=s.props.classNames)[c])===null||u===void 0?void 0:u.call(h,d)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return xTe(s.props)},s.buildCategorizedOptions=function(){return iw(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return kK(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,d){s.setState({ariaSelection:Yr({value:c},d)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():d&&s.openMenu("first"):(d&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var d=s.props,u=d.isMulti,h=d.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&pC(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),f=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||f>p}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var d=s.props.inputValue,u=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:d}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var d=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:d}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var d=s.getFocusableOptions(),u=d.indexOf(c);s.setState({focusedOption:c,focusedOptionId:u>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return TK(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var d=s.props,u=d.isMulti,h=d.backspaceRemovesValue,f=d.escapeClearsValue,p=d.inputValue,v=d.isClearable,g=d.isDisabled,b=d.menuIsOpen,y=d.onKeyDown,S=d.tabSelectsValue,w=d.openMenuOnFocus,k=s.state,C=k.focusedOption,_=k.focusedValue,E=k.selectValue;if(!g&&!(typeof y=="function"&&(y(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(_)s.removeValue(_);else{if(!h)return;u?s.popValue():v&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!b||!S||!C||w&&s.isOptionSelected(C,E))return;s.selectOption(C);break;case"Enter":if(c.keyCode===229)break;if(b){if(!C||s.isComposing)return;s.selectOption(C);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):v&&f&&s.clearValue();break;case" ":if(p)return;if(!b){s.openMenu("first");break}if(!C)return;s.selectOption(C);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++n4e),s.state.selectValue=h7(a.value),a.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),l=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[l],s.state.focusedOptionId=nD(i,o[l])}return s}return HDe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&f7(this.menuListRef,this.focusedOptionRef),qTe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,l=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&l&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(f7(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=s==="first"?0:d.length-1;if(!this.props.isMulti){var h=d.indexOf(l[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,l=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(s){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),s==="up"?c=d>0?d-1:l.length-1:s==="down"?c=(d+1)%l.length:s==="pageup"?(c=d-i,c<0&&(c=0)):s==="pagedown"?(c=d+i,c>l.length-1&&(c=l.length-1)):s==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(aD):Yr(Yr({},aD),this.props.theme):aD}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,h=this.props,f=h.isMulti,p=h.isRtl,v=h.options,g=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:f,isRtl:p,options:v,selectOption:d,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return _K(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return DK(this.props,s,i)}},{key:"filterOption",value:function(s,i){return AK(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:l})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,l=s.inputId,c=s.inputValue,d=s.tabIndex,u=s.form,h=s.menuIsOpen,f=s.required,p=this.getComponents(),v=p.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,S=this.commonProps,w=l||this.getElementId("input"),k=Yr(Yr(Yr({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":f,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?y?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?j.createElement(v,Qr({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},k)):j.createElement(ATe,Qr({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:C2,onFocus:this.onInputFocus,disabled:i,tabIndex:d,inputMode:"none",form:u,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,l=i.MultiValueContainer,c=i.MultiValueLabel,d=i.MultiValueRemove,u=i.SingleValue,h=i.Placeholder,f=this.commonProps,p=this.props,v=p.controlShouldRenderValue,g=p.isDisabled,b=p.isMulti,y=p.inputValue,S=p.placeholder,w=this.state,k=w.selectValue,C=w.focusedValue,_=w.isFocused;if(!this.hasValue()||!v)return y?null:j.createElement(h,Qr({},f,{key:"placeholder",isDisabled:g,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),S);if(b)return k.map(function(T,I){var F=T===C,A="".concat(s.getOptionLabel(T),"-").concat(s.getOptionValue(T));return j.createElement(o,Qr({},f,{components:{Container:l,Label:c,Remove:d},isFocused:F,isDisabled:g,key:A,index:I,removeProps:{onClick:function(){return s.removeValue(T)},onTouchEnd:function(){return s.removeValue(T)},onMouseDown:function(q){q.preventDefault()}},data:T}),s.formatOptionLabel(T,"value"))});if(y)return null;var E=k[0];return j.createElement(u,Qr({},f,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,Qr({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!i||!d)return null;var h={"aria-hidden":"true"};return j.createElement(i,Qr({},o,{innerProps:h,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return j.createElement(o,Qr({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,Qr({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,l=i.GroupHeading,c=i.Menu,d=i.MenuList,u=i.MenuPortal,h=i.LoadingMessage,f=i.NoOptionsMessage,p=i.Option,v=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,S=b.inputValue,w=b.isLoading,k=b.loadingMessage,C=b.minMenuHeight,_=b.maxMenuHeight,E=b.menuIsOpen,T=b.menuPlacement,I=b.menuPosition,F=b.menuPortalTarget,A=b.menuShouldBlockScroll,P=b.menuShouldScrollIntoView,q=b.noOptionsMessage,V=b.onMenuScrollToTop,Y=b.onMenuScrollToBottom;if(!E)return null;var B=function(z,ee){var ne=z.type,W=z.data,re=z.isDisabled,le=z.isSelected,te=z.label,K=z.value,de=g===W,H=re?void 0:function(){return s.onOptionHover(W)},se=re?void 0:function(){return s.selectOption(W)},be="".concat(s.getElementId("option"),"-").concat(ee),ue={id:be,onClick:se,onMouseMove:H,onMouseOver:H,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:le};return j.createElement(p,Qr({},v,{innerProps:ue,data:W,isDisabled:re,isSelected:le,key:be,label:te,type:ne,value:K,isFocused:de,innerRef:de?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(z.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var z=M.data,ee=M.options,ne=M.index,W="".concat(s.getElementId("group"),"-").concat(ne),re="".concat(W,"-heading");return j.createElement(o,Qr({},v,{key:W,data:z,options:ee,Heading:l,headingProps:{id:re,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(le){return B(le,"".concat(ne,"-").concat(le.index))}))}else if(M.type==="option")return B(M,"".concat(M.index))});else if(w){var R=k({inputValue:S});if(R===null)return null;Q=j.createElement(h,v,R)}else{var Z=q({inputValue:S});if(Z===null)return null;Q=j.createElement(f,v,Z)}var J={minMenuHeight:C,maxMenuHeight:_,menuPlacement:T,menuPosition:I,menuShouldScrollIntoView:P},ie=j.createElement(l3e,Qr({},v,J),function(M){var z=M.ref,ee=M.placerProps,ne=ee.placement,W=ee.maxHeight;return j.createElement(c,Qr({},v,J,{innerRef:z,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:ne}),j.createElement(RTe,{captureEnabled:y,onTopArrive:V,onBottomArrive:Y,lockEnabled:A},function(re){return j.createElement(d,Qr({},v,{innerRef:function(te){s.getMenuListRef(te),re(te)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:W,focusedOption:g}),Q)}))});return F||I==="fixed"?j.createElement(u,Qr({},v,{appendTo:F,controlElement:this.controlRef,menuPlacement:T,menuPosition:I}),ie):ie}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,l=i.isDisabled,c=i.isMulti,d=i.name,u=i.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!l)return j.createElement(BTe,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var f=h.map(function(g){return s.getOptionValue(g)}).join(o);return j.createElement("input",{name:d,type:"hidden",value:f})}else{var p=h.length>0?h.map(function(g,b){return j.createElement("input",{key:"i-".concat(b),name:d,type:"hidden",value:s.getOptionValue(g)})}):j.createElement("input",{name:d,type:"hidden",value:""});return j.createElement("div",null,p)}else{var v=h[0]?this.getOptionValue(h[0]):"";return j.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,l=i.focusedOption,c=i.focusedValue,d=i.isFocused,u=i.selectValue,h=this.getFocusableOptions();return j.createElement(STe,Qr({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,l=s.SelectContainer,c=s.ValueContainer,d=this.props,u=d.className,h=d.id,f=d.isDisabled,p=d.menuIsOpen,v=this.state.isFocused,g=this.commonProps=this.getCommonProps();return j.createElement(l,Qr({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:f,isFocused:v}),this.renderLiveRegion(),j.createElement(i,Qr({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:f,isFocused:v,menuIsOpen:p}),j.createElement(c,Qr({},g,{isDisabled:f}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(o,Qr({},g,{isDisabled:f}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,l=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,d=i.ariaSelection,u=i.isFocused,h=i.prevWasFocused,f=i.instancePrefix,p=s.options,v=s.value,g=s.menuIsOpen,b=s.inputValue,y=s.isMulti,S=h7(v),w={};if(o&&(v!==o.value||p!==o.options||g!==o.menuIsOpen||b!==o.inputValue)){var k=g?t4e(s,S):[],C=g?E7(iw(s,S),"".concat(f,"-option")):[],_=l?r4e(i,S):null,E=a4e(i,k),T=nD(C,E);w={selectValue:S,focusedOption:E,focusedOptionId:T,focusableOptionsWithIds:C,focusedValue:_,clearFocusValueOnUpdate:!1}}var I=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},F=d,A=u&&h;return u&&!A&&(F={value:kN(y,S,S[0]||null),options:S,action:"initial-input-focus"},A=!h),d?.action==="initial-input-focus"&&(F=null),Yr(Yr(Yr({},w),I),{},{prevProps:s,ariaSelection:F,prevWasFocused:A})}}]),r}(j.Component);IK.defaultProps=e4e;var s4e=j.forwardRef(function(e,t){var r=qDe(e);return j.createElement(IK,Qr({ref:t},r))}),_2=s4e;const sD=10;function i4e(){const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState([]),[k,C]=j.useState([]),_=async()=>{try{const de=(await Ie.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(H=>({label:`${H.categoryName} (${H.prefix})`,value:H._id}));h(de),y(de)}catch(K){console.error("Failed to fetch categories:",K)}},E=async()=>{try{const K=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),be=(await Ie.get("/api/vendors",{params:{companyId:K,financialYear:de}})).data.filter(ue=>!ue.isDeleted&&!ue.isBlocked).map(ue=>({label:`${ue.name1} ${ue.name2||""}`,value:ue._id,vnNo:ue.vnNo||""}));d(be),w(be)}catch(K){console.error("Failed to fetch vendors:",K)}},T=async()=>{try{const K=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),H=await Ie.get("/api/locations",{params:{companyId:K,financialYear:de}});Array.isArray(H.data)?C(H.data):H.data&&Array.isArray(H.data.locations)?C(H.data.locations):C([])}catch(K){console.error("Failed to fetch locations:",K),C([])}};j.useEffect(()=>{A(),E(),_(),T()},[]);const I=async K=>{try{const H=(await Ie.get(`/api/quotations/${K}`)).data;l({...H,validityDate:H.validityDate?new Date(H.validityDate).toISOString().split("T")[0]:"",items:H.items.map(se=>({...se,deliveryDate:se.deliveryDate?new Date(se.deliveryDate).toISOString().split("T")[0]:""}))})}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},F=async()=>{try{const K=o.items.reduce((H,se)=>H+(parseFloat(se.price)||0),0),de={...o,totalPrice:K,items:o.items.map(H=>({...H,deliveryDate:H.deliveryDate||null}))};await Ie.put(`/api/quotations/${o._id}`,de),alert("Quotation updated successfully!"),l(null),A()}catch(K){console.error("Failed to update quotation:",K),alert("Failed to update quotation")}};j.useEffect(()=>{A(),E(),_()},[]);const A=async()=>{try{const K=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear");a(!0);const se=(await Ie.get("/api/quotations/get",{params:{companyId:K,financialYear:de}})).data.sort((be,ue)=>new Date(ue.createdAt)-new Date(be.createdAt));t(se),i(null)}catch(K){console.error("Failed to fetch quotations:",K),i("Failed to load quotations. Please try again.")}finally{a(!1)}},P=()=>{l(null)},q=(K,de)=>{l(H=>({...H,[K]:de}))},V=(K,de,H)=>{const se=[...o.items];se[K][de]=H,l(be=>({...be,items:se}))},Y=K=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Quotation - ${K._id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div className="header">
          <h1>QUOTATION</h1>
          <h3>Quotation ID: ${K._id}</h3>
        </div>
        
        <div className="info-grid">
          <div>
            <div className="info-item"><strong>Indent ID:</strong> ${K.indentId}</div>
            <div className="info-item"><strong>Category ID:</strong> ${K.categoryId}</div>
            <div className="info-item"><strong>RFQ Category:</strong> ${K.rfqCategoryId}</div>
          </div>
          <div>
            <div className="info-item"><strong>Vendor:</strong> ${K.vendorName}</div>
            <div className="info-item"><strong>Date:</strong> ${new Date(K.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${K.note?`<div className="info-item"><strong>Note:</strong> ${K.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${K.items.map((se,be)=>`
              <tr>
                <td>${be+1}</td>
                <td>${se.materialId}</td>
                <td>${se.description}</td>
                <td>${se.qty}</td>
                <td>${se.unit||se.baseUnit}</td>
                <td>${se.price?parseFloat(se.price).toFixed(2):"0.00"}</td>
                <td>${se.price&&se.qty?(parseFloat(se.price)*parseFloat(se.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr className="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${K.items.reduce((se,be)=>{const ue=be.price&&be.qty?parseFloat(be.price)*parseFloat(be.qty):0;return se+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div className="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,H=window.open("","_blank");H.document.write(de),H.document.close(),H.focus(),H.print()},[B,Q]=j.useState(""),[R,Z]=j.useState(1),[J,ie]=j.useState(null),M=j.useMemo(()=>{let K=e;return(f||v)&&(K=K.filter(de=>{const H=new Date(de.createdAt),se=f?new Date(f):null,be=v?new Date(v):null;return se&&be?H>=se&&H<=be:se?H>=se:be?H<=be:!0})),B&&(K=K.filter(de=>[de.quotationNumber,de.indentId,de.vendorName,de.vnNo,de.note,de.vendor,de.location,de.quotationReference].join(" ").toLowerCase().includes(B.toLowerCase())),K=K.sort((de,H)=>{const se=parseFloat(de.totalPrice)||0,be=parseFloat(H.totalPrice)||0;return se-be})),K},[B,e,f,v]),z=()=>{Q(""),p(""),g(""),Z(1)},ee=async K=>{try{const de=await Ie.get(`/api/quotations/${K}`);ie(de.data)}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},ne=(K,de)=>{if(!de)return"transparent";switch(K){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},W=Math.ceil(M.length/sD),re=j.useMemo(()=>{const K=(R-1)*sD;return M.slice(K,K+sD)},[M,R]),le=K=>{Q(K.target.value),Z(1)},te=K=>{K<1||K>W||Z(K)};return r?n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsxs("div",{style:{padding:"20px",marginLeft:"300px"},children:[n.jsx("h2",{children:"Quotations"}),n.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),n.jsx("button",{onClick:A,style:{padding:"10px 20px"},children:"Retry"})]}):J?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Quotation Preview - ",J.quotationNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>ie(null)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Indent ID"}),n.jsx("div",{className:"fw-bold",children:J.indentId})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor"}),n.jsx("div",{className:"fw-bold",children:J.vendorName})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor No"}),n.jsx("div",{className:"fw-bold",children:J.vnNo||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Quotation Reference"}),n.jsx("div",{className:"fw-bold",children:J.quotationReference||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Validity Date"}),n.jsx("div",{className:"fw-bold",children:J.validityDate?new Date(J.validityDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Location"}),n.jsx("div",{className:"fw-bold",children:J.location||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Buyer Group"}),n.jsx("div",{className:"fw-bold",children:J.buyerGroup||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Created Date"}),n.jsx("div",{className:"fw-bold",children:new Date(J.createdAt).toLocaleDateString()})]})})})]}),J.note&&n.jsxs("div",{className:"alert alert-info mb-4",children:[n.jsx("strong",{children:"Note:"})," ",J.note]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:J.items.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:K.materialId}),n.jsx("td",{children:K.description}),n.jsx("td",{children:K.qty}),n.jsx("td",{children:K.unit||K.baseUnit}),n.jsxs("td",{children:["",K.price?parseFloat(K.price).toFixed(2):"0.00"]}),n.jsx("td",{children:K.deliveryDate?new Date(K.deliveryDate).toLocaleDateString():"-"}),n.jsxs("td",{children:["",K.price&&K.qty?(parseFloat(K.price)*parseFloat(K.qty)).toFixed(2):"0.00"]})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"7",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",J.items.reduce((K,de)=>{const H=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return K+H},0).toFixed(2)]})]})})]})})]})]})})}):o?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Quotation - ",o.quotationNumber]}),n.jsxs("div",{children:[n.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:F,children:"Save Changes"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:P,children:"Cancel"})]})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Indent ID"}),n.jsx("input",{type:"text",className:"form-control",value:o.indentId||"",onChange:K=>q("indentId",K.target.value),readOnly:!0})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"RFQ Category"}),n.jsx(_2,{options:b,value:b.find(K=>K.value===o.rfqCategoryId),onChange:K=>q("rfqCategoryId",K?.value),placeholder:"Select Category"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Vendor"}),n.jsx(_2,{options:S,value:S.find(K=>K.value===o.vendor),onChange:K=>{o.vendor||(q("vendor",K?.value),q("vendorName",K?.label),q("vnNo",K?.vnNo||""))},placeholder:"Select Vendor",isDisabled:!!o.vendor})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Quotation Reference"}),n.jsx("input",{type:"text",className:"form-control",value:o.quotationReference||"",onChange:K=>q("quotationReference",K.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Validity Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityDate||"",onChange:K=>q("validityDate",K.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsxs("select",{className:"form-select",value:o.location||"",onChange:K=>q("location",K.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),k.map((K,de)=>n.jsx("option",{value:K.name||K,children:K.name||K},de))]})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Buyer Group"}),n.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:K=>q("buyerGroup",K.target.value)})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Note"}),n.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:K=>q("note",K.target.value),placeholder:"Add any notes (optional)"})]})]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:o.items.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.materialId||"",onChange:H=>V(de,"materialId",H.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.description||"",onChange:H=>V(de,"description",H.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:K.qty||"",onChange:H=>V(de,"qty",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.baseUnit||"",onChange:H=>V(de,"baseUnit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.orderUnit||"",onChange:H=>V(de,"orderUnit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.unit||"",onChange:H=>V(de,"unit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.materialgroup||"",onChange:H=>V(de,"materialgroup",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:K.deliveryDate||"",onChange:H=>V(de,"deliveryDate",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:K.price||"",onChange:H=>V(de,"price",H.target.value),step:"0.01"})}),n.jsx("td",{children:n.jsxs("span",{className:"fw-bold text-success",children:["",K.price&&K.qty?(parseFloat(K.price)*parseFloat(K.qty)).toFixed(2):"0.00"]})})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"10",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((K,de)=>{const H=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return K+H},0).toFixed(2)]})]})})]})})]})})})]})})}):n.jsxs("div",{className:"content",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h6",{children:"All Quotations"}),n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Search by Quotation Reference etc.......",value:B,onChange:le,className:"form-control",style:{width:250,marginTop:"22px"}}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),n.jsx("input",{type:"date",value:f,onChange:K=>{p(K.target.value),Z(1)},className:"form-control",style:{width:150}})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),n.jsx("input",{type:"date",value:v,onChange:K=>{g(K.target.value),Z(1)},className:"form-control",style:{width:150}})]}),n.jsx("button",{onClick:z,className:"btn btn-sm btn-soft-warning",children:"Reset"}),n.jsx("button",{onClick:A,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",id:"DataTables_Table_0","aria-describedby":"DataTables_Table_0_info",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Quotation ID"}),n.jsx("th",{children:"Quotation Reference"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),"              ",n.jsx("th",{children:"Validity Date"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"TotalPrice"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:re.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:K.quotationNumber}),n.jsx("td",{children:K.quotationReference}),n.jsx("td",{className:"text-wrap",children:K.vendorName}),n.jsx("td",{className:"text-wrap",children:K.location}),n.jsx("td",{children:new Date(K.validityDate).toLocaleDateString()}),n.jsx("td",{children:new Date(K.createdAt).toLocaleDateString()}),n.jsx("td",{style:{backgroundColor:ne(de,!!B)},children:K.totalPrice}),n.jsx("td",{className:"text-wrap",children:K.note||"-"}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>ee(K._id),className:"btn btn-sm ",title:"Preview",children:n.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),n.jsx("button",{onClick:()=>I(K._id),className:"btn btn-sm ",title:"Edit",children:n.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),n.jsx("button",{onClick:()=>Y(K),className:"btn btn-sm ",title:"Print",children:n.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},K._id||de))})]})})})}),n.jsx("div",{className:"d-flex justify-content-end mt-2",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item${R===1?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(R-1),disabled:R===1,children:n.jsx("i",{className:"fas fa-angle-left"})})}),(()=>{const K=[];let de=[1,2],H=[W-1,W].filter(ue=>ue>2),se=[];R<=4?(de=[1,2,3,4,5].filter(ue=>ue<=W),H=[W-1,W].filter(ue=>ue>5)):R>=W-3?(de=[1,2].filter(ue=>ue<W-4),H=[W-4,W-3,W-2,W-1,W].filter(ue=>ue>2&&ue<=W)):(de=[1,2],se=[R-1,R,R+1],H=[W-1,W]);const be=ue=>ue.map(oe=>n.jsx("li",{className:`page-item${R===oe?" active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(oe),children:oe})},oe));return K.push(...be(de)),(se.length>0&&se[0]>de[de.length-1]+1||se.length===0&&H[0]>de[de.length-1]+1)&&K.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),K.push(...be(se)),H.length>0&&(se.length>0&&H[0]>se[se.length-1]+1||se.length===0&&H[0]>de[de.length-1]+1)&&K.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),K.push(...be(H)),K})(),n.jsx("li",{className:`page-item${R===W?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(R+1),disabled:R===W,children:n.jsx("i",{className:"fas fa-angle-right"})})})]})})})]})}function o4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(new Date().toISOString().substring(0,10)),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(0),[_,E]=j.useState([]),[T,I]=j.useState([]),[F,A]=j.useState(""),[P,q]=j.useState([]),[V,Y]=j.useState([]),[B,Q]=j.useState(!1),[R,Z]=j.useState("quotation"),[J,ie]=j.useState(""),[M,z]=j.useState([]),[ee,ne]=j.useState(!1),[W,re]=j.useState(""),[le,te]=j.useState([]),[K,de]=j.useState(!1),[H,se]=j.useState(""),[be,ue]=j.useState([]),[oe,ge]=j.useState(""),[Ne,Me]=j.useState(""),[We,tt]=j.useState(""),[mt,Be]=j.useState(""),[dt,Dt]=j.useState(""),[It,zt]=j.useState(0),[xe,fe]=j.useState(0),[ve,pe]=j.useState(0),[Te,Xe]=j.useState(""),[kt,Je]=j.useState(""),[ze,Fe]=j.useState(""),[Ve,pt]=j.useState([]),[Pe,Re]=j.useState(null),[Ye,At]=j.useState(0),[Gt,De]=j.useState(0),[Ee,it]=j.useState(0),[Tt,lr]=j.useState(0),[Rt,sr]=j.useState(0),[pr,Nr]=j.useState([]),[gt,Bt]=j.useState(!1),[he,Le]=j.useState(""),[Ae,_e]=j.useState(null),[Ue,He]=j.useState([]),[xt,jt]=j.useState([]),[ct,Nt]=j.useState([]),[wt,er]=j.useState([]),[cr,xr]=j.useState([]);j.useEffect(()=>{const Ze=localStorage.getItem("selectedCompanyId"),Jt=localStorage.getItem("financialYear"),rt={params:{companyId:Ze,financialYear:Jt}};Ie.get("/api/po-categories",rt).then(Cr=>t(Cr.data)),Ie.get("/api/general-conditions",{params:{companyId:Ze}}).then(Cr=>{const Ps=Cr.data.filter(Ma=>!Ma.isDeleted).map(Ma=>({_id:Ma._id,name:Ma.name,description:Ma.description}));jt(Ps)}),Ke(),Ie.get("/api/processes",{params:{companyId:Ze}}).then(Cr=>{const Ps=Cr.data.filter(Ma=>!Ma.isDeleted).map(Ma=>({_id:Ma._id,processId:Ma.processId,processDescription:Ma.processDescription}));Nt(Ps)}),Ie.get("/api/locations",{params:{companyId:Ze}}).then(Cr=>He(Cr.data)),Ie.get("/api/tax",{params:{companyId:Ze}}).then(Cr=>pt(Cr.data)),Ie.get("/api/material",{params:{companyId:Ze}}).then(Cr=>Nr(Cr.data)),Ie.get("/api/vendors",{params:{companyId:Ze}}).then(Cr=>E(Cr.data)),w([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:"",selectedTax:null,cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,itemTotalWithTax:0}))])},[]);const ur=Ze=>{const Jt=(Ze.quantity||0)*(Ze.price||0)-(Ze.discount||0),rt=Jt*(parseFloat(Ze.cgst)||0)/100,Cr=Jt*(parseFloat(Ze.sgst)||0)/100,Ps=Jt*(parseFloat(Ze.igst)||0)/100,Ma=parseFloat(Ze.taxDiscount)||0;return{itemSubtotal:Jt,cgstAmount:rt,sgstAmount:Cr,igstAmount:Ps,itemTotalWithTax:Jt+rt+Cr+Ps-Ma}},Ke=async()=>{try{const Ze=localStorage.getItem("selectedCompanyId"),Jt=localStorage.getItem("financialYear"),rt=await Ie.get("/api/purchase-orders",{params:{companyId:Ze,financialYear:Jt}});a(rt.data)}catch(Ze){console.error("Error fetching purchase orders:",Ze)}};j.useEffect(()=>{const Ze=localStorage.getItem("selectedCompanyId"),Jt=localStorage.getItem("financialYear"),rt={params:{companyId:Ze,financialYear:Jt}};Ie.get("/api/po-categories",rt).then(Cr=>t(Cr.data)),Ie.get("/api/quotations/get",rt).then(Cr=>{I(Cr.data)}),Ie.get("/api/indent/get",rt).then(Cr=>{q(Cr.data)}),Ie.get("/api/contracts/get",rt).then(Cr=>{Y(Cr.data)}).catch(Cr=>{console.error("Error fetching contracts:",Cr),Y([])}),Ke()},[]);const mr=Ze=>{if(console.log("Selected Purchase Order:",Ze),l(Ze.poNumber),p(Ze.vendor||""),g(Ze.deliveryLocation||""),y(Ze.deliveryAddress||""),ge(Ze.buyerGroup||""),Me(Ze.contactPerson||""),tt(Ze.payTerms||""),Dt(Ze.validityDate||""),Xe(Ze.remarks||""),Fe(Ze.preparedby||""),Je(Ze.approvedby||""),Ze.items&&Ze.items.length>0){const Jt=Ze.items.map(rt=>({materialId:rt.materialId||"",description:rt.description||"",quantity:rt.quantity||0,baseUnit:rt.baseUnit||"",unit:rt.unit||"",orderUnit:rt.orderUnit||"",price:rt.price||0,priceUnit:rt.priceUnit||"",buyerGroup:rt.buyerGroup||"",materialgroup:rt.materialgroup||"",deliveryDate:rt.deliveryDate?String(rt.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:rt.note||""}));w(Jt),tn(Jt)}if(Ze.taxName){const Jt=Ve.find(rt=>rt.taxName===Ze.taxName);Re(Jt)}if(At(Ze.cgst||0),De(Ze.sgst||0),it(Ze.igst||0),lr(Ze.taxDiscount||0),Ze.taxName&&Ve.length>0){const Jt=Ve.find(rt=>rt.taxName===Ze.taxName);Re(Jt)}ne(!1)},fr=Ze=>{l(Ze);const Jt=r.find(rt=>rt.poNumber===Ze);if(Jt&&(p(Jt.vendor||""),g(Jt.deliveryLocation||""),y(Jt.deliveryAddress||""),ge(Jt.buyerGroup||""),Me(Jt.contactPerson||""),tt(Jt.payTerms||""),Dt(Jt.validityDate||""),Jt.items&&Jt.items.length>0)){const rt=Jt.items.map(Cr=>({materialId:Cr.materialId||"",description:Cr.description||"",quantity:Cr.quantity||0,baseUnit:Cr.baseUnit||"",unit:Cr.unit||"",orderUnit:Cr.orderUnit||"",price:Cr.price||0,priceUnit:Cr.priceUnit||"",materialgroup:Cr.materialgroup||"",deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:Cr.note||""}));w(rt),tn(rt)}},Lr=(Ze,Jt,rt)=>{Jt.includes(Ze)?rt(Jt.filter(Cr=>Cr!==Ze)):rt([...Jt,Ze])},fa=Ze=>{if(se(Ze),Ze.trim()){const Jt=_.filter(rt=>rt.vendorName?.toLowerCase().includes(Ze.toLowerCase())||rt.vendorCode?.toLowerCase().includes(Ze.toLowerCase())||rt.name1?.toLowerCase().includes(Ze.toLowerCase())||rt.vnNo?.toLowerCase().includes(Ze.toLowerCase()));ue(Jt)}else ue([])},Pa=()=>{ue(_)},wn=Ze=>{p(Ze.name1||Ze.vendorName),de(!1),se(""),ue([])},Bn=()=>{de(!1),se(""),ue([])},cn=(Ze,Jt,rt)=>{const Cr=[...S];if(Cr[Ze][Jt]=Jt==="quantity"||Jt==="price"||Jt==="cgst"||Jt==="sgst"||Jt==="igst"||Jt==="taxDiscount"?parseFloat(rt)||0:rt,["quantity","price","discount","cgst","sgst","igst","taxDiscount"].includes(Jt)){const Ps=ur(Cr[Ze]);Cr[Ze]={...Cr[Ze],...Ps}}w(Cr),tn(Cr)},Is=(Ze,Jt)=>{const rt=[...S];rt[Ze].selectedTax=Jt,rt[Ze].cgst=Jt?.cgst||0,rt[Ze].sgst=Jt?.sgst||0,rt[Ze].igst=Jt?.igst||0;const Cr=ur(rt[Ze]);rt[Ze]={...rt[Ze],...Cr},w(rt),tn(rt)},tn=Ze=>{const Jt=Ze.reduce(($a,_i)=>$a+(_i.itemSubtotal||0),0),rt=Ze.reduce(($a,_i)=>$a+(_i.cgstAmount||0),0),Cr=Ze.reduce(($a,_i)=>$a+(_i.sgstAmount||0),0),Ps=Ze.reduce(($a,_i)=>$a+(_i.igstAmount||0),0),Ma=Ze.reduce(($a,_i)=>$a+(_i.itemTotalWithTax||0),0);C(Jt.toFixed(2)),zt(rt.toFixed(2)),fe(Cr.toFixed(2)),pe(Ps.toFixed(2)),sr(Ma.toFixed(2))},Ga=()=>{w([...S,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:"",selectedTax:null,cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,itemTotalWithTax:0}])},In=Ze=>{const Jt=[...S];Jt.splice(Ze,1),w(Jt),tn(Jt)},[Ci,ki]=j.useState(!1),[Xn,kl]=j.useState(""),[Un,co]=j.useState(""),[rn,Vo]=j.useState(null),td=async Ze=>{if(Ze.preventDefault(),!s)return alert("Please select category");const Jt=T.find($a=>$a.quotationNumber===F),rt=P.find($a=>$a.indentId===F),Cr=V.find($a=>($a.contractNumber||$a.contractId)===F),Ps=r.find($a=>$a.poNumber===F),Ma={quotationId:Jt?._id,enquiryId:rt?._id,contractId:Cr?._id,purchaseOrderId:Ps?._id,referenceDocumentNumber:F,categoryId:s._id,category:s.categoryName,date:u,vendor:f,notes:mt,contactPerson:Ne,selectedConditions:wt,selectedProcesses:cr,preparedby:ze,approvedby:kt,remarks:Te,validityDate:dt,buyerGroup:oe,deliveryLocation:v,deliveryAddress:b,items:S,total:parseFloat(k)||0,taxName:Pe?.taxName||"",cgst:parseFloat(Ye)||0,sgst:parseFloat(Gt)||0,igst:parseFloat(Ee)||0,taxDiscount:parseFloat(Tt)||0,finalTotal:parseFloat(Rt)||0};Vo(Ma),ki(!0)},El=async()=>{try{const Ze=localStorage.getItem("selectedCompanyId"),Jt=localStorage.getItem("financialYear");let rt={...rn,companyId:Ze,financialYear:Jt};if(Xn==="internal")rt.poGenerationType="internal";else if(Xn==="external"){if(!Un.trim())return alert("Please enter external PO number");rt.poGenerationType="external",rt.poNumber=Un.trim()}const Cr=await Ie.post("/api/purchase-orders",rt);console.log("Saved PO:",Cr.data),ut(),ki(!1),kl(""),co(""),Vo(null),alert("PO Created Successfully with PO Number: "+Cr.data.poNumber)}catch(Ze){console.error("Error during PO creation:",Ze),alert("Failed to create PO")}},ut=()=>{i(null),l(""),h(new Date().toISOString().substring(0,10)),p(""),g(""),y(""),w([]),C(""),Re(null),At(""),De(""),it(""),lr(""),sr(""),tt(""),Be(""),ge(""),Me(""),Dt(""),Xe(""),Fe(""),Je("")},nr=()=>{ki(!1),kl(""),co(""),Vo(null)},Ot=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-cog me-2"}),"PO Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:nr,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the PO Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{kl("internal"),El()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>kl("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Xn==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom PO Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"External PO Number (max 50 characters)",value:Un,onChange:Ze=>co(Ze.target.value),onKeyPress:Ze=>{Ze.key==="Enter"&&Un.trim()&&El()},maxLength:50,autoComplete:"off",spellCheck:"false",autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[Un.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:El,disabled:!Un.trim(),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Create PO"]})})]}),Xn==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("strong",{children:"System Generated Number"}),n.jsx("br",{}),"Format: ",s?.prefix,"-XXXXXX"]})})]})]})})})]}),jr=()=>{const Ze=pr.filter(rt=>rt.materialId.toLowerCase().includes(he.toLowerCase())||rt.description.toLowerCase().includes(he.toLowerCase())),Jt=rt=>{const Cr=[...S];Cr[Ae]={...Cr[Ae],materialId:rt.materialId,description:rt.description,baseUnit:rt.baseUnit,unit:rt.unit,price:rt.price,buyerGroup:rt.buyerGroup,materialgroup:rt.materialgroup},w(Cr),tn(Cr),Bt(!1)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:n.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[n.jsx("h3",{children:"Select Material"}),n.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:he,onChange:rt=>Le(rt.target.value),style:{width:"100%",marginBottom:10}}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Price Unit"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Select"})]})}),n.jsx("tbody",{children:Ze.map((rt,Cr)=>n.jsxs("tr",{children:[n.jsx("td",{children:rt.materialId}),n.jsx("td",{children:rt.description}),n.jsx("td",{children:rt.baseUnit}),n.jsx("td",{children:rt.unit}),n.jsx("td",{children:rt.price}),n.jsx("td",{children:rt.priceUnit}),n.jsx("td",{children:rt.buyerGroup}),n.jsx("td",{children:rt.materialgroup}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>Jt(rt),children:"Select"})})]},Cr))})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>Bt(!1),style:{marginTop:10},children:"Close"})]})})},gs=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Bn})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Vendor"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:H,onChange:Ze=>fa(Ze.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Pa,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:be.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:be.map((Ze,Jt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:Ze.vnNo})}),n.jsx("td",{children:Ze.name1}),n.jsx("td",{children:Ze.email}),n.jsx("td",{children:Ze.phone}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>wn(Ze),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Jt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:H?`No vendors found matching "${H}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Bn,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),zd=Ze=>{if(ie(Ze),Ze.trim()){let Jt=[];R==="quotation"?Jt=T.filter(rt=>rt.quotationNumber.toLowerCase().includes(Ze.toLowerCase())):R==="enquiry"?Jt=P.filter(rt=>rt.quotationNumber?.toLowerCase().includes(Ze.toLowerCase())||rt.indentId?.toLowerCase().includes(Ze.toLowerCase())):R==="contract"?Jt=V.filter(rt=>rt.contractNumber?.toLowerCase().includes(Ze.toLowerCase())||rt.contractId?.toLowerCase().includes(Ze.toLowerCase())):R==="purchaseorder"&&(Jt=r.filter(rt=>rt.poNumber?.toLowerCase().includes(Ze.toLowerCase())||rt.vendor?.toLowerCase().includes(Ze.toLowerCase()))),z(Jt)}else z([])},Ei=()=>{R==="quotation"?z(T):R==="enquiry"?z(P):R==="contract"?z(V):R==="purchaseorder"&&z(r)},ui=Ze=>{console.log("Selected Document:",Ze),R==="quotation"?(A(Ze.quotationNumber),Hd(Ze)):R==="enquiry"?(A(Ze.indentId),Dl(Ze)):R==="contract"?(A(Ze.contractNumber||Ze.contractId),Wd(Ze)):R==="purchaseorder"&&(l(Ze.poNumber),mr(Ze)),Q(!1),ie(""),z([])},_l=()=>{Q(!1),ie(""),z([])},Hd=Ze=>{p(Ze.name1||Ze.vendorName),g(Ze.items[0]?.location||""),ge(Ze.items[0]?.buyerGroup||"");const Jt=Ze.items.map(rt=>({materialId:rt.materialId,description:rt.description,quantity:rt.qty,baseUnit:rt.baseUnit,unit:rt.unit,orderUnit:rt.orderUnit,price:rt.price,priceUnit:rt.priceUnit,materialgroup:rt.materialgroup,deliveryDate:rt.deliveryDate?String(rt.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:rt.note||""}));w(Jt),tn(Jt)},Dl=Ze=>{p(Ze.name1||Ze.vendorName),g(Ze.items[0]?.location||""),ge(Ze.items[0]?.buyerGroup||"");const Jt=Ze.items.map(rt=>({materialId:rt.materialId,description:rt.description,quantity:rt.qty,baseUnit:rt.baseUnit,unit:rt.unit,orderUnit:rt.orderUnit,price:rt.price,priceUnit:rt.priceUnit,materialgroup:rt.materialgroup,deliveryDate:rt.deliveryDate?String(rt.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:rt.note||""}));w(Jt),tn(Jt)},Wd=Ze=>{p(Ze.vendorName||Ze.name1),g(Ze.items?.[0]?.location||""),ge(Ze.items?.[0]?.buyerGroup||"");const Jt=Ze.items?.map(rt=>({materialId:rt.materialId,description:rt.description,quantity:rt.qty||rt.quantity,baseUnit:rt.baseUnit,unit:rt.unit,orderUnit:rt.orderUnit,price:rt.price,priceUnit:rt.priceUnit,materialgroup:rt.materialgroup,deliveryDate:rt.deliveryDate?String(rt.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:rt.note||""}))||[];w(Jt),tn(Jt)},bs=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header text-white",children:[n.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${R==="quotation"?"active":""}`,onClick:()=>Z("quotation"),href:"#",children:"Quotation"})}),n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${R==="purchaseorder"?"active":""}`,onClick:()=>Z("purchaseorder"),href:"#",children:"Purchase Order"})})]}),n.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:_l})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"form-label",children:["Search ",R.charAt(0).toUpperCase()+R.slice(1)," Number"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${R} number...`,value:J,onChange:Ze=>zd(Ze.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Ei,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Number"}),n.jsx("th",{children:"Vendor/Customer"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:M.map((Ze,Jt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:`badge ${R==="quotation"?"bg-info":R==="enquiry"?"bg-warning":R==="contract"?"bg-success":"bg-primary"}`,children:Ze.quotationNumber||Ze.indentId||Ze.contractNumber||Ze.contractId||Ze.poNumber})}),n.jsx("td",{children:Ze.vendorName||Ze.name1||Ze.customerName||Ze.vendor}),n.jsx("td",{children:new Date(Ze.validityDate||Ze.documentDate||Ze.date||Ze.createdAt).toLocaleDateString()}),n.jsxs("td",{children:["",Ze.totalPrice||Ze.finalTotal||Ze.total]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ui(Ze),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Jt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:J?`No ${R}s found matching "${J}"`:'Enter search term or click "View All"'})]})})]})})})]})})});return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Order"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Order Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference PO No:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference PO number",value:o,onChange:Ze=>{l(Ze.target.value),Ze.target.value&&fr(Ze.target.value)}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),style:{border:"0px solid"},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"PO_Category:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",onChange:Ze=>{const Jt=e.find(rt=>rt._id===Ze.target.value);i(Jt)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),e.map(Ze=>n.jsx("option",{value:Ze._id,children:Ze.categoryName},Ze._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:f,onChange:Ze=>p(Ze.target.value),placeholder:"Enter vendor name"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>de(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:c,readOnly:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"PO Creating date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:Ze=>h(Ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:v,onChange:Ze=>{g(Ze.target.value);const Jt=Ue.find(rt=>rt.name===selectedValue||rt.locationName===selectedValue||rt._id===selectedValue);if(Jt){const rt=Jt.address+", "+Jt.city+`, 
`+Jt.state+`, 
`+Jt.country+", "+Jt.postalCode+`, 
`+Jt.contactPerson+", "+Jt.contactNumber+".";y(rt)}else y("")},children:[n.jsx("option",{value:"",children:"-- Select Location --"}),Ue.map(Ze=>n.jsx("option",{value:Ze.name||Ze.locationName||Ze._id,children:Ze.name||Ze.locationName||Ze._id},Ze._id||Ze.id||Ze.name))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:oe,onChange:Ze=>ge(Ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:Ze=>Me(Ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:dt,onChange:Ze=>Dt(Ze.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:wt.length===0?"Select...":`${wt.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:xt.map(Ze=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:wt.includes(Ze._id),onChange:()=>Lr(Ze._id,wt,er)}),n.jsx("label",{className:"form-check-label ms-1",children:Ze.name})]})},Ze._id))})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Processes"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:cr.length===0?"Select...":`${cr.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:ct.map(Ze=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:cr.includes(Ze._id),onChange:()=>Lr(Ze._id,cr,xr)}),n.jsx("label",{className:"form-check-label ms-1",children:Ze.processId})]})},Ze._id))})]})})]}),n.jsxs("div",{className:"col-lg-3  row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Header Note:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("textarea",{className:"form-control form-control-sm",value:We,onChange:Ze=>tt(Ze.target.value),maxLength:"250"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Remarks:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{className:"form-control",value:Te,onChange:Ze=>Xe(Ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prepared By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:ze,onChange:Ze=>Fe(Ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Approved By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:kt,onChange:Ze=>Je(Ze.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Discount"}),n.jsx("th",{children:"Sub Total"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"CGST"}),n.jsx("th",{children:"SGST/UGST"}),n.jsx("th",{children:"IGST"}),n.jsx("th",{children:"PriceUnit"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:S.map((Ze,Jt)=>n.jsxs("tr",{children:[n.jsx("td",{children:Jt+1}),n.jsx("td",{children:n.jsx("input",{value:Ze.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{_e(Jt),Bt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ze.description,onChange:rt=>cn(Jt,"description",rt.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"text",value:Ze.quantity,onChange:rt=>{rt.target.value=rt.target.value.replace(/[^0-9./]/g,""),cn(Jt,"quantity",rt.target.value)}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ze.baseUnit,onChange:rt=>cn(Jt,"baseUnit",rt.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:Ze.deliveryDate,onChange:rt=>cn(Jt,"deliveryDate",rt.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ze.materialgroup,onChange:rt=>cn(Jt,"materialgroup",rt.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"text",value:Ze.price,onChange:rt=>{rt.target.value=rt.target.value.replace(/[^0-9./.]/g,""),cn(Jt,"price",rt.target.value)}})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Ze.discount||0,onChange:rt=>{rt.target.value=rt.target.value.replace(/[^0-9./]/g,""),cn(Jt,"discount",rt.target.value)}})}),n.jsx("td",{children:(Ze.quantity*Ze.price-(Ze.discount||0)).toFixed(2)}),n.jsx("td",{children:n.jsxs("select",{className:"form-select form-select-sm",value:Ze.selectedTax?.taxName||"",onChange:rt=>{const Cr=Ve.find(Ps=>Ps.taxName===rt.target.value);Is(Jt,Cr)},children:[n.jsx("option",{value:"",children:"-- Select Tax --"}),Ve.map(rt=>n.jsx("option",{value:rt.taxName,children:rt.taxName},rt._id))]})}),n.jsx("td",{children:(Ze.cgstAmount||0).toFixed(2)}),n.jsx("td",{children:(Ze.sgstAmount||0).toFixed(2)}),n.jsx("td",{children:(Ze.igstAmount||0).toFixed(2)}),n.jsx("td",{children:n.jsxs("select",{value:Ze.priceUnit,onChange:rt=>cn(Jt,"priceUnit",rt.target.value),required:!0,className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"INR",children:"INR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),n.jsx("td",{children:(Ze.itemTotalWithTax||0).toFixed(2)}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:Ze.note,onChange:rt=>cn(Jt,"note",rt.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>In(Jt),children:n.jsx("i",{className:"ti ti-trash"})})})]},Jt))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",className:"btn btn-link",onClick:Ga,children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:td,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address:"}),n.jsx("textarea",{className:"form-control form-control-sm",value:b,onChange:Ze=>y(Ze.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{className:"",children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"border-top pt-3",children:n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-6",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("strong",{children:["",k]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"CGST:"}),n.jsxs("span",{children:["",It]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"SGST:"}),n.jsxs("span",{children:["",xe]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"IGST:"}),n.jsxs("span",{children:["",ve]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{className:"text-success",children:["",Rt]})]})]})})})})]})})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit PO"})})]})})})})})]}),gt&&n.jsx(jr,{}),B&&n.jsx(bs,{}),K&&n.jsx(gs,{}),Ci&&n.jsx(Ot,{})]})})]})}var Qv={},iD,D7;function l4e(){return D7||(D7=1,iD=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),iD}var oD={},bm={},A7;function av(){if(A7)return bm;A7=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return bm.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},bm.getSymbolTotalCodewords=function(a){return t[a]},bm.getBCHDigit=function(r){let a=0;for(;r!==0;)a++,r>>>=1;return a},bm.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');e=a},bm.isKanjiModeEnabled=function(){return typeof e<"u"},bm.toSJIS=function(a){return e(a)},bm}var lD={},T7;function HI(){return T7||(T7=1,function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,s){if(e.isValid(a))return a;try{return t(a)}catch{return s}}}(lD)),lD}var cD,I7;function c4e(){if(I7)return cD;I7=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let a=0;a<r;a++)this.putBit((t>>>r-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},cD=e,cD}var dD,P7;function d4e(){if(P7)return dD;P7=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,r,a,s){const i=t*this.size+r;this.data[i]=a,s&&(this.reservedBit[i]=!0)},e.prototype.get=function(t,r){return this.data[t*this.size+r]},e.prototype.xor=function(t,r,a){this.data[t*this.size+r]^=a},e.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]},dD=e,dD}var uD={},O7;function u4e(){return O7||(O7=1,function(e){const t=av().getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const s=Math.floor(a/7)+2,i=t(a),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(a){const s=[],i=e.getRowColCoords(a),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}}(uD)),uD}var hD={},M7;function h4e(){if(M7)return hD;M7=1;const e=av().getSymbolSize,t=7;return hD.getPositions=function(a){const s=e(a);return[[0,0],[s-t,0],[0,s-t]]},hD}var fD={},R7;function f4e(){return R7||(R7=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,d=null,u=null;for(let h=0;h<i;h++){l=c=0,d=u=null;for(let f=0;f<i;f++){let p=s.get(h,f);p===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=p,l=1),p=s.get(f,h),p===u?c++:(c>=5&&(o+=t.N1+(c-5)),u=p,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let u=0;u<i;u++)l=l<<1&2047|s.get(d,u),u>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(u,d),u>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(a,s,i){switch(a){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,r(s,c,l))},e.getBestMask=function(s,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,s);const u=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(d,s),u<c&&(c=u,l=d)}return l}}(fD)),fD}var EN={},F7;function PK(){if(F7)return EN;F7=1;const e=HI(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return EN.getBlocksCount=function(s,i){switch(i){case e.L:return t[(s-1)*4+0];case e.M:return t[(s-1)*4+1];case e.Q:return t[(s-1)*4+2];case e.H:return t[(s-1)*4+3];default:return}},EN.getTotalCodewordsCount=function(s,i){switch(i){case e.L:return r[(s-1)*4+0];case e.M:return r[(s-1)*4+1];case e.Q:return r[(s-1)*4+2];case e.H:return r[(s-1)*4+3];default:return}},EN}var mD={},Fb={},L7;function m4e(){if(L7)return Fb;L7=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let a=1;for(let s=0;s<255;s++)e[s]=a,t[a]=s,a<<=1,a&256&&(a^=285);for(let s=255;s<512;s++)e[s]=e[s-255]}(),Fb.log=function(a){if(a<1)throw new Error("log("+a+")");return t[a]},Fb.exp=function(a){return e[a]},Fb.mul=function(a,s){return a===0||s===0?0:e[t[a]+t[s]]},Fb}var B7;function p4e(){return B7||(B7=1,function(e){const t=m4e();e.mul=function(a,s){const i=new Uint8Array(a.length+s.length-1);for(let o=0;o<a.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=t.mul(a[o],s[l]);return i},e.mod=function(a,s){let i=new Uint8Array(a);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(a){let s=new Uint8Array([1]);for(let i=0;i<a;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}}(mD)),mD}var pD,U7;function x4e(){if(U7)return pD;U7=1;const e=p4e();function t(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(a){this.degree=a,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(a.length+this.degree);s.set(a);const i=e.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i},pD=t,pD}var xD={},vD={},gD={},$7;function OK(){return $7||($7=1,gD.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),gD}var wu={},V7;function MK(){if(V7)return wu;V7=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;wu.KANJI=new RegExp(r,"g"),wu.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),wu.BYTE=new RegExp(a,"g"),wu.NUMERIC=new RegExp(e,"g"),wu.ALPHANUMERIC=new RegExp(t,"g");const s=new RegExp("^"+r+"$"),i=new RegExp("^"+e+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return wu.testKanji=function(c){return s.test(c)},wu.testNumeric=function(c){return i.test(c)},wu.testAlphanumeric=function(c){return o.test(c)},wu}var q7;function nv(){return q7||(q7=1,function(e){const t=OK(),r=MK();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function a(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,o){if(e.isValid(i))return i;try{return a(i)}catch{return o}}}(vD)),vD}var z7;function v4e(){return z7||(z7=1,function(e){const t=av(),r=PK(),a=HI(),s=nv(),i=OK(),o=7973,l=t.getBCHDigit(o);function c(f,p,v){for(let g=1;g<=40;g++)if(p<=e.getCapacity(g,v,f))return g}function d(f,p){return s.getCharCountIndicator(f,p)+4}function u(f,p){let v=0;return f.forEach(function(g){const b=d(g.mode,p);v+=b+g.getBitsLength()}),v}function h(f,p){for(let v=1;v<=40;v++)if(u(f,v)<=e.getCapacity(v,p,s.MIXED))return v}e.from=function(p,v){return i.isValid(p)?parseInt(p,10):v},e.getCapacity=function(p,v,g){if(!i.isValid(p))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=s.BYTE);const b=t.getSymbolTotalCodewords(p),y=r.getTotalCodewordsCount(p,v),S=(b-y)*8;if(g===s.MIXED)return S;const w=S-d(g,p);switch(g){case s.NUMERIC:return Math.floor(w/10*3);case s.ALPHANUMERIC:return Math.floor(w/11*2);case s.KANJI:return Math.floor(w/13);case s.BYTE:default:return Math.floor(w/8)}},e.getBestVersionForData=function(p,v){let g;const b=a.from(v,a.M);if(Array.isArray(p)){if(p.length>1)return h(p,b);if(p.length===0)return 1;g=p[0]}else g=p;return c(g.mode,g.getLength(),b)},e.getEncodedBits=function(p){if(!i.isValid(p)||p<7)throw new Error("Invalid QR Code version");let v=p<<12;for(;t.getBCHDigit(v)-l>=0;)v^=o<<t.getBCHDigit(v)-l;return p<<12|v}}(xD)),xD}var bD={},H7;function g4e(){if(H7)return bD;H7=1;const e=av(),t=1335,r=21522,a=e.getBCHDigit(t);return bD.getEncodedBits=function(i,o){const l=i.bit<<3|o;let c=l<<10;for(;e.getBCHDigit(c)-a>=0;)c^=t<<e.getBCHDigit(c)-a;return(l<<10|c)^r},bD}var yD={},jD,W7;function b4e(){if(W7)return jD;W7=1;const e=nv();function t(r){this.mode=e.NUMERIC,this.data=r.toString()}return t.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),a.put(o,10);const l=this.data.length-s;l>0&&(i=this.data.substr(s),o=parseInt(i,10),a.put(o,l*3+1))},jD=t,jD}var ND,G7;function y4e(){if(G7)return ND;G7=1;const e=nv(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(a){this.mode=e.ALPHANUMERIC,this.data=a}return r.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=t.indexOf(this.data[i])*45;o+=t.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(t.indexOf(this.data[i]),6)},ND=r,ND}var wD,Y7;function j4e(){if(Y7)return wD;Y7=1;const e=nv();function t(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return t.getBitsLength=function(a){return a*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){for(let a=0,s=this.data.length;a<s;a++)r.put(this.data[a],8)},wD=t,wD}var SD,K7;function N4e(){if(K7)return SD;K7=1;const e=nv(),t=av();function r(a){this.mode=e.KANJI,this.data=a}return r.getBitsLength=function(s){return s*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let s;for(s=0;s<this.data.length;s++){let i=t.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),a.put(i,13)}},SD=r,SD}var CD={exports:{}},X7;function w4e(){return X7||(X7=1,function(e){var t={single_source_shortest_paths:function(r,a,s){var i={},o={};o[a]=0;var l=t.PriorityQueue.make();l.push(a,0);for(var c,d,u,h,f,p,v,g,b;!l.empty();){c=l.pop(),d=c.value,h=c.cost,f=r[d]||{};for(u in f)f.hasOwnProperty(u)&&(p=f[u],v=h+p,g=o[u],b=typeof o[u]>"u",(b||g>v)&&(o[u]=v,l.push(u,v),i[u]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var y=["Could not find a path from ",a," to ",s,"."].join("");throw new Error(y)}return i},extract_shortest_path_from_predecessor_list:function(r,a){for(var s=[],i=a;i;)s.push(i),r[i],i=r[i];return s.reverse(),s},find_path:function(r,a,s){var i=t.single_source_shortest_paths(r,a,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(r){var a=t.PriorityQueue,s={},i;r=r||{};for(i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);return s.queue=[],s.sorter=r.sorter||a.default_sorter,s},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var s={value:r,cost:a};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t}(CD)),CD.exports}var Q7;function S4e(){return Q7||(Q7=1,function(e){const t=nv(),r=b4e(),a=y4e(),s=j4e(),i=N4e(),o=MK(),l=av(),c=w4e();function d(y){return unescape(encodeURIComponent(y)).length}function u(y,S,w){const k=[];let C;for(;(C=y.exec(w))!==null;)k.push({data:C[0],index:C.index,mode:S,length:C[0].length});return k}function h(y){const S=u(o.NUMERIC,t.NUMERIC,y),w=u(o.ALPHANUMERIC,t.ALPHANUMERIC,y);let k,C;return l.isKanjiModeEnabled()?(k=u(o.BYTE,t.BYTE,y),C=u(o.KANJI,t.KANJI,y)):(k=u(o.BYTE_KANJI,t.BYTE,y),C=[]),S.concat(w,k,C).sort(function(E,T){return E.index-T.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function f(y,S){switch(S){case t.NUMERIC:return r.getBitsLength(y);case t.ALPHANUMERIC:return a.getBitsLength(y);case t.KANJI:return i.getBitsLength(y);case t.BYTE:return s.getBitsLength(y)}}function p(y){return y.reduce(function(S,w){const k=S.length-1>=0?S[S.length-1]:null;return k&&k.mode===w.mode?(S[S.length-1].data+=w.data,S):(S.push(w),S)},[])}function v(y){const S=[];for(let w=0;w<y.length;w++){const k=y[w];switch(k.mode){case t.NUMERIC:S.push([k,{data:k.data,mode:t.ALPHANUMERIC,length:k.length},{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.ALPHANUMERIC:S.push([k,{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.KANJI:S.push([k,{data:k.data,mode:t.BYTE,length:d(k.data)}]);break;case t.BYTE:S.push([{data:k.data,mode:t.BYTE,length:d(k.data)}])}}return S}function g(y,S){const w={},k={start:{}};let C=["start"];for(let _=0;_<y.length;_++){const E=y[_],T=[];for(let I=0;I<E.length;I++){const F=E[I],A=""+_+I;T.push(A),w[A]={node:F,lastCount:0},k[A]={};for(let P=0;P<C.length;P++){const q=C[P];w[q]&&w[q].node.mode===F.mode?(k[q][A]=f(w[q].lastCount+F.length,F.mode)-f(w[q].lastCount,F.mode),w[q].lastCount+=F.length):(w[q]&&(w[q].lastCount=F.length),k[q][A]=f(F.length,F.mode)+4+t.getCharCountIndicator(F.mode,S))}}C=T}for(let _=0;_<C.length;_++)k[C[_]].end=0;return{map:k,table:w}}function b(y,S){let w;const k=t.getBestModeForData(y);if(w=t.from(S,k),w!==t.BYTE&&w.bit<k.bit)throw new Error('"'+y+'" cannot be encoded with mode '+t.toString(w)+`.
 Suggested mode is: `+t.toString(k));switch(w===t.KANJI&&!l.isKanjiModeEnabled()&&(w=t.BYTE),w){case t.NUMERIC:return new r(y);case t.ALPHANUMERIC:return new a(y);case t.KANJI:return new i(y);case t.BYTE:return new s(y)}}e.fromArray=function(S){return S.reduce(function(w,k){return typeof k=="string"?w.push(b(k,null)):k.data&&w.push(b(k.data,k.mode)),w},[])},e.fromString=function(S,w){const k=h(S,l.isKanjiModeEnabled()),C=v(k),_=g(C,w),E=c.find_path(_.map,"start","end"),T=[];for(let I=1;I<E.length-1;I++)T.push(_.table[E[I]].node);return e.fromArray(p(T))},e.rawSplit=function(S){return e.fromArray(h(S,l.isKanjiModeEnabled()))}}(yD)),yD}var J7;function C4e(){if(J7)return oD;J7=1;const e=av(),t=HI(),r=c4e(),a=d4e(),s=u4e(),i=h4e(),o=f4e(),l=PK(),c=x4e(),d=v4e(),u=g4e(),h=nv(),f=S4e();function p(_,E){const T=_.size,I=i.getPositions(E);for(let F=0;F<I.length;F++){const A=I[F][0],P=I[F][1];for(let q=-1;q<=7;q++)if(!(A+q<=-1||T<=A+q))for(let V=-1;V<=7;V++)P+V<=-1||T<=P+V||(q>=0&&q<=6&&(V===0||V===6)||V>=0&&V<=6&&(q===0||q===6)||q>=2&&q<=4&&V>=2&&V<=4?_.set(A+q,P+V,!0,!0):_.set(A+q,P+V,!1,!0))}}function v(_){const E=_.size;for(let T=8;T<E-8;T++){const I=T%2===0;_.set(T,6,I,!0),_.set(6,T,I,!0)}}function g(_,E){const T=s.getPositions(E);for(let I=0;I<T.length;I++){const F=T[I][0],A=T[I][1];for(let P=-2;P<=2;P++)for(let q=-2;q<=2;q++)P===-2||P===2||q===-2||q===2||P===0&&q===0?_.set(F+P,A+q,!0,!0):_.set(F+P,A+q,!1,!0)}}function b(_,E){const T=_.size,I=d.getEncodedBits(E);let F,A,P;for(let q=0;q<18;q++)F=Math.floor(q/3),A=q%3+T-8-3,P=(I>>q&1)===1,_.set(F,A,P,!0),_.set(A,F,P,!0)}function y(_,E,T){const I=_.size,F=u.getEncodedBits(E,T);let A,P;for(A=0;A<15;A++)P=(F>>A&1)===1,A<6?_.set(A,8,P,!0):A<8?_.set(A+1,8,P,!0):_.set(I-15+A,8,P,!0),A<8?_.set(8,I-A-1,P,!0):A<9?_.set(8,15-A-1+1,P,!0):_.set(8,15-A-1,P,!0);_.set(I-8,8,1,!0)}function S(_,E){const T=_.size;let I=-1,F=T-1,A=7,P=0;for(let q=T-1;q>0;q-=2)for(q===6&&q--;;){for(let V=0;V<2;V++)if(!_.isReserved(F,q-V)){let Y=!1;P<E.length&&(Y=(E[P]>>>A&1)===1),_.set(F,q-V,Y),A--,A===-1&&(P++,A=7)}if(F+=I,F<0||T<=F){F-=I,I=-I;break}}}function w(_,E,T){const I=new r;T.forEach(function(V){I.put(V.mode.bit,4),I.put(V.getLength(),h.getCharCountIndicator(V.mode,_)),V.write(I)});const F=e.getSymbolTotalCodewords(_),A=l.getTotalCodewordsCount(_,E),P=(F-A)*8;for(I.getLengthInBits()+4<=P&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const q=(P-I.getLengthInBits())/8;for(let V=0;V<q;V++)I.put(V%2?17:236,8);return k(I,_,E)}function k(_,E,T){const I=e.getSymbolTotalCodewords(E),F=l.getTotalCodewordsCount(E,T),A=I-F,P=l.getBlocksCount(E,T),q=I%P,V=P-q,Y=Math.floor(I/P),B=Math.floor(A/P),Q=B+1,R=Y-B,Z=new c(R);let J=0;const ie=new Array(P),M=new Array(P);let z=0;const ee=new Uint8Array(_.buffer);for(let te=0;te<P;te++){const K=te<V?B:Q;ie[te]=ee.slice(J,J+K),M[te]=Z.encode(ie[te]),J+=K,z=Math.max(z,K)}const ne=new Uint8Array(I);let W=0,re,le;for(re=0;re<z;re++)for(le=0;le<P;le++)re<ie[le].length&&(ne[W++]=ie[le][re]);for(re=0;re<R;re++)for(le=0;le<P;le++)ne[W++]=M[le][re];return ne}function C(_,E,T,I){let F;if(Array.isArray(_))F=f.fromArray(_);else if(typeof _=="string"){let Y=E;if(!Y){const B=f.rawSplit(_);Y=d.getBestVersionForData(B,T)}F=f.fromString(_,Y||40)}else throw new Error("Invalid data");const A=d.getBestVersionForData(F,T);if(!A)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=A;else if(E<A)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+A+`.
`);const P=w(E,T,F),q=e.getSymbolSize(E),V=new a(q);return p(V,E),v(V),g(V,E),y(V,T,0),E>=7&&b(V,E),S(V,P),isNaN(I)&&(I=o.getBestMask(V,y.bind(null,V,T))),o.applyMask(I,V),y(V,T,I),{modules:V,version:E,errorCorrectionLevel:T,maskPattern:I,segments:F}}return oD.create=function(E,T){if(typeof E>"u"||E==="")throw new Error("No input text");let I=t.M,F,A;return typeof T<"u"&&(I=t.from(T.errorCorrectionLevel,t.M),F=d.from(T.version),A=o.from(T.maskPattern),T.toSJISFunc&&e.setToSJISFunction(T.toSJISFunc)),C(E,F,I,A)},oD}var kD={},ED={},Z7;function RK(){return Z7||(Z7=1,function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const s=parseInt(a.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const s=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,o=a.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,s){return s.width&&s.width>=a+s.margin*2?s.width/(a+s.margin*2):s.scale},e.getImageWidth=function(a,s){const i=e.getScale(a,s);return Math.floor((a+s.margin*2)*i)},e.qrToImageData=function(a,s,i){const o=s.modules.size,l=s.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),u=i.margin*c,h=[i.color.light,i.color.dark];for(let f=0;f<d;f++)for(let p=0;p<d;p++){let v=(f*d+p)*4,g=i.color.light;if(f>=u&&p>=u&&f<d-u&&p<d-u){const b=Math.floor((f-u)/c),y=Math.floor((p-u)/c);g=h[l[b*o+y]?1:0]}a[v++]=g.r,a[v++]=g.g,a[v++]=g.b,a[v]=g.a}}}(ED)),ED}var e9;function k4e(){return e9||(e9=1,function(e){const t=RK();function r(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=a()),c=t.getOptions(c);const u=t.getImageWidth(i.modules.size,c),h=d.getContext("2d"),f=h.createImageData(u,u);return t.qrToImageData(f.data,i,c),r(h,d,u),h.putImageData(f,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return d.toDataURL(u,h.quality)}}(kD)),kD}var _D={},t9;function E4e(){if(t9)return _D;t9=1;const e=RK();function t(s,i){const o=s.a/255,l=i+'="'+s.hex+'"';return o<1?l+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function r(s,i,o){let l=s+i;return typeof o<"u"&&(l+=" "+o),l}function a(s,i,o){let l="",c=0,d=!1,u=0;for(let h=0;h<s.length;h++){const f=Math.floor(h%i),p=Math.floor(h/i);!f&&!d&&(d=!0),s[h]?(u++,h>0&&f>0&&s[h-1]||(l+=d?r("M",f+o,.5+p+o):r("m",c,0),c=0,d=!1),f+1<i&&s[h+1]||(l+=r("h",u),u=0)):c++}return l}return _D.render=function(i,o,l){const c=e.getOptions(o),d=i.modules.size,u=i.modules.data,h=d+c.margin*2,f=c.color.light.a?"<path "+t(c.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",p="<path "+t(c.color.dark,"stroke")+' d="'+a(u,d,c.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+v+' shape-rendering="crispEdges">'+f+p+`</svg>
`;return typeof l=="function"&&l(null,b),b},_D}var r9;function _4e(){if(r9)return Qv;r9=1;const e=l4e(),t=C4e(),r=k4e(),a=E4e();function s(i,o,l,c,d){const u=[].slice.call(arguments,1),h=u.length,f=typeof u[h-1]=="function";if(!f&&!e())throw new Error("Callback required as last argument");if(f){if(h<2)throw new Error("Too few arguments provided");h===2?(d=l,l=o,o=c=void 0):h===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=l,l=o,o=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(l=o,o=c=void 0):h===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(p,v){try{const g=t.create(l,c);p(i(g,o,c))}catch(g){v(g)}})}try{const p=t.create(l,c);d(null,i(p,o,c))}catch(p){d(p)}}return Qv.create=t.create,Qv.toCanvas=s.bind(null,r.render),Qv.toDataURL=s.bind(null,r.renderToDataURL),Qv.toString=s.bind(null,function(i,o,l){return a.render(i,l)}),Qv}var D4e=_4e();const A4e=Kc(D4e);function T4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),o=localStorage.getItem("activeRole"),[l,c]=j.useState(""),[d,u]=j.useState({fromDate:"",toDate:""}),[h,f]=j.useState(!1),[p,v]=j.useState("poNumber"),[g,b]=j.useState([]),[y,S]=j.useState(1),[w]=j.useState(10),[k,C]=j.useState(!1),[_,E]=j.useState(null),[T,I]=j.useState({approvedBy:"",approvalDate:"",approvalComments:""}),[F,A]=j.useState(!1),[P,q]=j.useState({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0}),[V,Y]=j.useState([]),[B,Q]=j.useState([]);j.useEffect(()=>{J(),R(),Z()},[]);const R=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),fe=localStorage.getItem("financialYear"),ve=await Ie.get("/api/vendors",{params:{companyId:xe}});Y(ve.data)}catch(xe){console.error("Error fetching vendors:",xe)}},Z=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),fe=await Ie.get("/api/po-categories",{params:{companyId:xe}});Q(fe.data)}catch(xe){console.error("Error fetching categories:",xe)}},J=()=>{i(!0);const xe=localStorage.getItem("selectedCompanyId"),fe=localStorage.getItem("financialYear");Ie.get("/api/purchase-orders",{params:{companyId:xe,financialYear:fe}}).then(ve=>{const pe=ve.data.slice().sort((Te,Xe)=>{const kt=Te.createdAt?new Date(Te.createdAt):new Date(Te.date||0),Je=Xe.createdAt?new Date(Xe.createdAt):new Date(Xe.date||0);return isNaN(kt)&&isNaN(Je)?0:isNaN(kt)?1:isNaN(Je)?-1:Je-kt});t(pe),a(pe),i(!1)}).catch(ve=>{console.error("Error fetching POs:",ve),alert("Failed to fetch POs"),i(!1)})},ie=()=>{let xe=e;l.trim()&&(xe=xe.filter(fe=>[fe.poNumber,fe.vendor,fe.category,fe.quotationNumber,fe.deliveryLocation,fe.deliveryAddress,fe.date].some(pe=>pe&&pe.toString().toLowerCase().includes(l.toLowerCase())))),(d.fromDate||d.toDate)&&(xe=xe.filter(fe=>{const ve=new Date(fe.date),pe=d.fromDate?new Date(d.fromDate):null,Te=d.toDate?new Date(d.toDate):null;Te&&Te.setHours(23,59,59,999);let Xe=!0;return pe&&ve<pe&&(Xe=!1),Te&&ve>Te&&(Xe=!1),Xe})),a(xe),S(1)},M=xe=>{c(xe.target.value)},z=(xe,fe)=>{u(ve=>({...ve,[xe]:fe}))},ee=()=>{c(""),u({fromDate:"",toDate:""}),a(e),S(1)};j.useEffect(()=>{ie()},[l,d,e]);const ne=xe=>{const fe=xe.target.value;if(c(fe),fe.trim()===""){b([]);return}const ve=e.filter(pe=>{switch(p){case"poNumber":return pe.poNumber?.toLowerCase().includes(fe.toLowerCase());case"vendor":return pe.vendor?.toLowerCase().includes(fe.toLowerCase());case"category":return pe.category?.toLowerCase().includes(fe.toLowerCase());case"quotationNumber":return pe.quotationNumber?.toLowerCase().includes(fe.toLowerCase());default:return pe.poNumber?.toLowerCase().includes(fe.toLowerCase())}});b(ve)},W=()=>{b(e),c("")},re=()=>{b([]),c("")},le=xe=>{a([xe]),S(1),te()},te=()=>{f(!1),b([]),c("")},K=xe=>{q({_id:xe._id,poNumber:xe.poNumber||"",category:xe.category||"",date:xe.date||"",vendor:xe.vendor||"",deliveryLocation:xe.deliveryLocation||"",deliveryAddress:xe.deliveryAddress||"",quotationNumber:xe.quotationNumber||"",items:xe.items||[],remarks:xe.remarks||"",notes:xe.notes||"",preparedby:xe.preparedby||"",cgst:xe.cgst||0,sgst:xe.sgst||0,igst:xe.igst||0,taxDiscount:xe.taxDiscount||0,total:xe.total||0,finalTotal:xe.finalTotal||0}),A(!0)},de=()=>{A(!1),q({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0})},H=(xe,fe)=>{q(ve=>({...ve,[xe]:fe}))},se=(xe,fe,ve)=>{const pe=[...P.items];if(pe[xe]={...pe[xe],[fe]:ve},fe==="price"||fe==="quantity"){const Te=fe==="price"?parseFloat(ve)||0:parseFloat(pe[xe].price)||0,Xe=fe==="quantity"?parseFloat(ve)||0:parseFloat(pe[xe].quantity)||0;pe[xe].total=Te*Xe}q(Te=>({...Te,items:pe})),oe(pe)},be=()=>{const xe={materialId:"",description:"",quantity:0,unit:"",price:0,deliveryDate:"",total:0};q(fe=>({...fe,items:[...fe.items,xe]}))},ue=xe=>{const fe=P.items.filter((ve,pe)=>pe!==xe);q(ve=>({...ve,items:fe})),oe(fe)},oe=(xe=P.items)=>{const fe=xe.reduce((Je,ze)=>Je+(parseFloat(ze.price)||0)*(parseFloat(ze.quantity)||0),0),ve=fe*(parseFloat(P.cgst)||0)/100,pe=fe*(parseFloat(P.sgst)||0)/100,Te=fe*(parseFloat(P.igst)||0)/100,Xe=parseFloat(P.taxDiscount)||0,kt=fe+ve+pe+Te-Xe;q(Je=>({...Je,total:fe,finalTotal:kt}))};j.useEffect(()=>{P.items.length>0&&oe()},[P.cgst,P.sgst,P.igst,P.taxDiscount]);const ge=async()=>{try{if(!P.poNumber||!P.vendor){alert("Please fill in all required fields (PO Number and Vendor)");return}const xe=localStorage.getItem("selectedCompanyId"),fe=localStorage.getItem("financialYear"),ve={...P,companyId:xe,financialYear:fe,updatedAt:new Date().toISOString()},pe=await Ie.put(`/api/purchase-orders/${P._id}`,ve),Te=e.map(Xe=>Xe._id===P._id?pe.data:Xe);t(Te),a(Te.filter(Xe=>r.some(kt=>kt._id===Xe._id))),de(),alert("Purchase Order updated successfully!")}catch(xe){console.error("Error updating PO:",xe),alert(`Failed to update Purchase Order: ${xe.response?.data?.error||xe.message}`)}},Ne=xe=>{E(xe),I({approvedBy:"",approvalDate:"",approvalComments:""}),C(!0)},Me=async()=>{try{if(!T.approvedBy||!T.approvalDate){alert("Please fill in all required approval fields");return}const xe=localStorage.getItem("selectedCompanyId"),fe=localStorage.getItem("financialYear"),ve={status:"approved",approvedBy:T.approvedBy,approvalDate:T.approvalDate,approvalComments:T.approvalComments,companyId:xe,financialYear:fe},pe=await Ie.put(`/api/purchase-orders/${_._id}/approve`,ve),Te=e.map(Xe=>Xe._id===_._id?pe.data.purchaseOrder||pe.data:Xe);t(Te),a(Te.filter(Xe=>r.some(kt=>kt._id===Xe._id))),C(!1),E(null),alert("Purchase Order approved successfully!")}catch(xe){console.error("Error approving PO:",xe),alert(`Failed to approve Purchase Order: ${xe.response?.data?.error||xe.message}`)}},We=()=>{C(!1),E(null),I({approvedBy:"",approvalDate:"2025-01-02",approvalComments:""})},tt=y*w,mt=tt-w,Be=r.slice(mt,tt),dt=Math.ceil(r.length/w),Dt=xe=>S(xe),It=async xe=>{try{const fe=localStorage.getItem("selectedCompanyId"),ve=localStorage.getItem("financialYear"),[pe,Te]=await Promise.all([Ie.get(`/api/vendors/${xe.vendor}`,{params:{companyId:fe,financialYear:ve}}),Ie.get(`/api/companies/${fe}`)]),Xe=pe.data,kt=Te.data,Je=`PO:${xe.poNumber}|Date:${xe.date}|Vendor:${Xe.name}|Amount:${xe.total}|GST:${Xe.gstin}`;let ze="";try{ze=await A4e.toDataURL(Je,{width:80,margin:1,color:{dark:"#000000",light:"#FFFFFF"}})}catch(Re){console.error("Error generating QR code:",Re),ze=""}const Fe=xe.items.map((Re,Ye)=>{const At=(parseFloat(Re.price)||0)*(parseFloat(Re.quantity)||0),Gt=parseFloat(xe.cgst)||0,De=parseFloat(xe.sgst)||0,Ee=parseFloat(xe.igst)||0,it=parseFloat(Re.discount)||0;return`
        <tr>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${Ye+1}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: left; font-size: 10px;">${Re.materialId||""}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: left; font-size: 10px;">
            <div><strong>${Re.description||""}</strong></div>
            ${Re.notes?`<div style="font-size: 8px; margin-top: 6px; white-space: pre-line; line-height: 1.3;">${Re.notes}</div>`:""}
          </td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${Re.quantity||0}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${Re.unit||"PC"}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: right; font-size: 10px;">${(Re.price||0).toFixed(3)}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${Gt} %</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${De} %</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${Ee>0?Ee+" %":"0 %"}</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px;">${it} %</td>
          <td style="border: 1px solid #000; padding: 4px; text-align: left; font-size: 10px;">${Re.hsnSac||""}</td>
        </tr>
      `}).join(""),Ve=Re=>{const Ye=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],At=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],Gt=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return Re===0?"Zero":Re<10?Ye[Re]:Re<20?At[Re-10]:Re<100?Gt[Math.floor(Re/10)]+(Re%10?" "+Ye[Re%10]:""):Re<1e3?Ye[Math.floor(Re/100)]+" Hundred"+(Re%100?" "+Ve(Re%100):""):Re<1e5?Ve(Math.floor(Re/1e3))+" Thousand"+(Re%1e3?" "+Ve(Re%1e3):""):Re<1e7?Ve(Math.floor(Re/1e5))+" Lakh"+(Re%1e5?" "+Ve(Re%1e5):""):Ve(Math.floor(Re/1e7))+" Crore"+(Re%1e7?" "+Ve(Re%1e7):"")},pt=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Purchase Order - ${xe.poNumber}</title>
      <style>
        @page {
          size: A4;
          margin: 0.3in;
        }
        body {
          font-family: Arial, sans-serif;
          font-size: 10px;
          line-height: 1.2;
          margin: 0;
          padding: 0;
          color: #000;
        }
        .main-container {
          width: 100%;
          border: 2px solid #000;
          border-collapse: collapse;
        }
        .main-container td {
          border: 1px solid #000;
          padding: 4px;
          vertical-align: top;
        }
        .no-border {
          border: none !important;
        }
        .text-center {
          text-align: center;
        }
        .text-right {
          text-align: right;
        }
        .bold {
          font-weight: bold;
        }
        table {
          border-collapse: collapse;
        }
        .qr-code-img {
          width: 60px;
          height: 60px;
          border: 1px solid #000;
        }
      </style>
    </head>
    <body>
      <table class="main-container">
        <!-- Header Section -->
        <tr>
          <td colspan="2" style="vertical-align: top;">
            <table style="width: 100%; border: none;">
              <tr>
                <td class="no-border" style="width: 70%;">
                  <div style="font-size: 13px; font-weight: bold;">${kt.division||kt.name||"VOLVO BUS DIVISION"}</div>
                  <div style="font-size: 12px; font-weight: bold;">${kt.name||"VE COMMERCIAL VEHICLES LIMITED"}</div>
                  <div style="margin-top: 4px;">${kt.address1||"Yalachahally Village Tavarekere Post"}</div>
                  <div>${kt.address||"Hoskote Taluk, Bengaluru"}</div>
                  <div>Karnataka ${kt.pincode||"562122"}</div>
                  <div>Telep.:${kt.phone||"+91 8067121200"},FAX No.${kt.fax||"+91 8067121222"}</div>
                  <div style="font-size: 9px;">Supplier portal: ${kt.supplierPortal||"http://supplier.vecv.net/irj/portal"}</div>
                </td>
                <td class="no-border" style="width: 30%; text-align: right; vertical-align: top;">
                  <div style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">Purchase Order</div>
                  ${ze?`<img src="${ze}" alt="QR Code" class="qr-code-img" />`:'<div style="width: 60px; height: 60px; border: 1px solid #000; display: inline-block; text-align: center; line-height: 60px; font-size: 8px;">[QR]</div>'}
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- Supplier and PO Details Row -->
        <tr>
          <td style="width: 50%; vertical-align: top;">
            <table style="width: 100%; border: none;">
              <tr>
                <td class="no-border" style="width: 30%;"><strong>Supplier</strong></td>
                <td class="no-border" style="width: 35%;">${Xe.vendorCode||Xe._id||""}</td>
                <td class="no-border" style="width: 15%;"><strong>PAN No.</strong></td>
                <td class="no-border" style="width: 20%;">${Xe.pan||""}</td>
              </tr>
            </table>
            <div style="margin-top: 4px;"><strong>${Xe.name||Xe.name1||""}</strong></div>
            <div style="margin-top: 8px;">${Xe.address1||""}</div>
            <div>${Xe.address2||""}</div>
            <div>${Xe.city||"BANGALORE"}, ${Xe.region||Xe.state||"Karnataka"}</div>
            <div>${Xe.country||"INDIA"} Telephone</div>
            <div>${Xe.email||""}</div>
            <div style="margin-top: 4px;"><strong>Supplier GST No.</strong> ${Xe.gstin||""}</div>
          </td>
          <td style="width: 50%; vertical-align: top;">
            <table style="width: 100%; border: none; font-size: 10px;">
              <tr>
                <td class="no-border" style="width: 50%;"><strong>Purchase Order No.</strong></td>
                <td class="no-border" style="width: 50%;"><strong>${xe.poNumber||""}</strong></td>
              </tr>
              <tr>
                <td class="no-border">Format No.</td>
                <td class="no-border">${xe.formatNo||"VEF-011"}</td>
              </tr>
              <tr>
                <td class="no-border">Page No.</td>
                <td class="no-border">1 of 1</td>
              </tr>
              <tr><td class="no-border" colspan="2">&nbsp;</td></tr>
              <tr>
                <td class="no-border"><strong>VECV GST</strong></td>
                <td class="no-border">${kt.gstin||""}</td>
              </tr>
              <tr>
                <td class="no-border">Doc Type</td>
                <td class="no-border">${xe.docType||"22NB"}</td>
              </tr>
              <tr>
                <td class="no-border">PO Date</td>
                <td class="no-border">${xe.date||""}</td>
              </tr>
              <tr>
                <td class="no-border">Your Ref.</td>
                <td class="no-border">${xe.yourRef||""}</td>
              </tr>
              <tr>
                <td class="no-border">Validity Start</td>
                <td class="no-border">${xe.validityStart||xe.date||""}</td>
              </tr>
              <tr>
                <td class="no-border">Our Ref.</td>
                <td class="no-border">${xe.ourRef||""}</td>
              </tr>
              <tr>
                <td class="no-border">DD Vendor</td>
                <td class="no-border">${xe.ddVendor||""}</td>
              </tr>
              <tr>
                <td class="no-border">CIN</td>
                <td class="no-border" style="font-size: 8px;">${xe.cin||kt.cin||""}</td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- Plant, Purchase Org, etc. Row -->
        <tr>
          <td colspan="2">
            <table style="width: 100%; border: none;">
              <tr>
                <td class="no-border" style="width: 16.66%;"><strong>Plant</strong></td>
                <td class="no-border" style="width: 16.66%;">${xe.plant||""}</td>
                <td class="no-border" style="width: 16.66%;"><strong>Purchase Org.</strong></td>
                <td class="no-border" style="width: 16.66%;">${xe.purchaseOrg||""}</td>
                <td class="no-border" style="width: 16.66%;"><strong>Currency</strong></td>
                <td class="no-border" style="width: 16.66%;">${xe.currency||"INR"}</td>
              </tr>
              <tr>
                <td class="no-border"><strong>Purchase Grp</strong></td>
                <td class="no-border">${xe.purchaseGrp||""}</td>
                <td class="no-border"><strong>PAN</strong></td>
                <td class="no-border">${Xe.pan||""}</td>
                <td class="no-border"><strong>Validity End</strong></td>
                <td class="no-border">${xe.validityEnd||"31/12/9999"}</td>
              </tr>
              <tr>
                <td class="no-border"></td>
                <td class="no-border"></td>
                <td class="no-border"><strong>TAN</strong></td>
                <td class="no-border">${kt.tan||""}</td>
                <td class="no-border"><strong>Quot. Date</strong></td>
                <td class="no-border">${xe.quotationDate||""}</td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- Single Items Table -->
        <tr>
          <td colspan="2" style="padding: 0;">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background-color: #e8e8e8;">
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 4%;">Item</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 10%;">Material</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 28%;">Material Description</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 8%;">Quantity</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 5%;">Unit</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 10%;">Basic Price</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 6%;">CGST</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 6%;">SGST</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 6%;">IGST</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 8%;">Discount</th>
                  <th style="border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; width: 9%;">HSN/SAC</th>
                </tr>
              </thead>
              <tbody>
                ${Fe}
              </tbody>
            </table>
          </td>
        </tr>

        <!-- Footer Information -->
        <tr>
          <td colspan="2">
            <table style="width: 100%; border: none;">
              <tr>
                <td class="no-border" style="width: 20%;"><strong>G/L Account</strong></td>
                <td class="no-border" style="width: 80%;">
                  <strong>Payment Conditions:</strong> ${xe.paymentTerms||xe.paymentConditions||"GPS -30 days from GR/Inv. + next Thu"}
                </td>
              </tr>
              <tr>
                <td class="no-border"><strong>Cost Center</strong></td>
                <td class="no-border"><strong>Ex Works</strong> ${xe.exWorks||kt.city||"Banglore"}</td>
              </tr>
              <tr>
                <td class="no-border"><strong>WBS Element</strong></td>
                <td class="no-border">${xe.priceInclusive||xe.deliveryTerms||"Price inclusive of all storage & unloading charges till delivery at VECV plant uploading points."}</td>
              </tr>
              <tr>
                <td class="no-border"><strong>Int. Order</strong></td>
                <td class="no-border">${xe.intOrder||""}</td>
              </tr>
              <tr>
                <td class="no-border" colspan="2">
                  <table style="width: 100%; border: none;">
                    <tr>
                      <td class="no-border" style="width: 70%;"><strong>Total Value(Without Taxes)</strong></td>
                      <td class="no-border" style="width: 30%; text-align: right;"><strong>${(xe.total||0).toFixed(2)}</strong></td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td class="no-border" colspan="2">
                  <strong>Value (In Words)</strong> ${xe.currency||"INR"} ${Ve(Math.floor(xe.total||0))} Only
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- Signature Section -->
        <tr>
          <td colspan="2">
            <table style="width: 100%; border: none;">
              <tr>
                <td class="no-border" colspan="3" style="text-align: center; font-weight: bold; padding: 4px 0;">
                  For ${kt.legalName||kt.name||"VE COMMERCIAL VEHICLES LTD"}
                </td>
              </tr>
              <tr>
                <td class="no-border" colspan="3" style="text-align: center; font-size: 9px; padding-bottom: 2px;">
                  ${kt.tagline||kt.subtitle||"(A Volvo Group and Eicher Motors Joint Venture)"}
                </td>
              </tr>
              <tr style="text-align: center;">
                <td class="no-border" style="width: 33%; padding: 30px 0 10px 0;">
                  <div style="font-weight: bold;">Prepared By</div>
                </td>
                <td class="no-border" style="width: 34%; padding: 30px 0 10px 0;">
                  <div style="font-weight: bold;">Authorized Signatory 1</div>
                </td>
                <td class="no-border" style="width: 33%; padding: 30px 0 10px 0;">
                  <div style="font-weight: bold;">Authorized Signatory 2</div>
                </td>
              </tr>
              <tr style="text-align: center;">
                <td class="no-border">
                  <div style="font-weight: bold;">${xe.preparedby||""}</div>
                  <div>${xe.preparedByDesignation||""}</div>
                </td>
                <td class="no-border">
                  <div style="font-weight: bold;">${xe.approvedBy||xe.authorizedSignatory1||""}</div>
                  <div>${xe.approvedByDesignation||xe.authorizedSignatory1Designation||""}</div>
                </td>
                <td class="no-border">
                  <div style="font-weight: bold;">${xe.authorizedSignatory2||""}</div>
                  <div>${xe.authorizedSignatory2Designation||""}</div>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- GST Compliance Note -->
        <tr>
          <td colspan="2" style="font-size: 8px; font-style: italic; padding: 6px; background-color: #f9f9f9;">
            "As per GST law Supplier/Service provider need to pass on commensurate reduction in the prices towards any reduction in tax rate/any benefit accrued due to input tax credit. Kindly confirm benefits accrued to you so that prices can be modified accordingly"
          </td>
        </tr>
      </table>
    </body>
    </html>
  `,Pe=window.open("","_blank","width=800,height=600");Pe.document.write(pt),Pe.document.close(),Pe.focus(),Pe.onload=function(){Pe.print()}}catch(fe){console.error("Error generating print:",fe),alert("Error generating print. Please try again.")}},zt=xe=>{switch(xe){case"approved":return n.jsx("span",{className:"badge bg-success",children:"Approved"});case"rejected":return n.jsx("span",{className:"badge bg-danger",children:"Rejected"});case"pending":return n.jsx("span",{className:"badge bg-warning",children:"Pending"});default:return n.jsx("span",{className:"badge bg-secondary",children:"Draft"})}};return s?n.jsx("div",{className:"content",children:n.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading Purchase Orders..."})]})})}):n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Order Display"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order Display"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6"}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search All Fields"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search across all fields...",value:l,onChange:M})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:d.fromDate,onChange:xe=>z("fromDate",xe.target.value)})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:d.toDate,onChange:xe=>z("toDate",xe.target.value)})]})]}),(l||d.fromDate||d.toDate)&&n.jsx("div",{className:"row mt-2",children:n.jsx("div",{className:"col-12",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:ee,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear All Filters"]})})})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Quotation Number"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Be.length>0?Be.map(xe=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),n.jsx("td",{children:xe.date}),n.jsx("td",{children:xe.vendor}),n.jsx("td",{children:xe.category}),n.jsx("td",{children:xe.quotationNumber}),n.jsx("td",{children:xe.deliveryLocation}),n.jsx("td",{children:zt(xe.status)}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>K(xe),title:"Edit Purchase Order",disabled:xe.status==="approved",children:n.jsx("i",{className:"fas fa-edit"})}),xe.status!=="approved"&&o.toLowerCase()==="admin"&&n.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>Ne(xe),title:"Approve Purchase Order",children:n.jsx("i",{className:"fas fa-check"})}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>It(xe),title:"Print Purchase Order",children:n.jsx("i",{className:"fas fa-print"})})]})})]},xe._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No purchase orders found"}),(l||d.fromDate||d.toDate)&&n.jsxs("button",{className:"btn btn-outline-primary btn-sm mt-2",onClick:ee,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear Filters"]})]})})})]})})})]}),dt>1&&n.jsx("nav",{"aria-label":"Purchase Orders pagination",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Dt(y-1),disabled:y===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:dt},(xe,fe)=>fe+1).map(xe=>n.jsx("li",{className:`page-item ${y===xe?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Dt(xe),children:xe})},xe)),n.jsx("li",{className:`page-item ${y===dt?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Dt(y+1),disabled:y===dt,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})}),F&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-edit me-2"}),"Edit Purchase Order - ",P.poNumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:de})]}),n.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[n.jsxs("div",{className:"row mb-4",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"Basic Information"]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["PO Number ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",className:"form-control",value:P.poNumber,onChange:xe=>H("poNumber",xe.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Date ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"date",className:"form-control",value:P.date,onChange:xe=>H("date",xe.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:P.category,onChange:xe=>H("category",xe.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),B.map(xe=>n.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Delivery Information"]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Vendor ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs("select",{className:"form-select",value:P.vendor,onChange:xe=>H("vendor",xe.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Vendor"}),V.map(xe=>n.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Location"}),n.jsx("input",{type:"text",className:"form-control",value:P.deliveryLocation,onChange:xe=>H("deliveryLocation",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address"}),n.jsx("textarea",{className:"form-control",rows:"2",value:P.deliveryAddress,onChange:xe=>H("deliveryAddress",xe.target.value)})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsxs("h6",{className:"text-primary mb-0",children:[n.jsx("i",{className:"fas fa-list me-2"}),"Items (",P.items.length,")"]}),n.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:be,children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:P.items.map((xe,fe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.materialId||"",onChange:ve=>se(fe,"materialId",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.description||"",onChange:ve=>se(fe,"description",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.quantity||"",onChange:ve=>se(fe,"quantity",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.unit||"",onChange:ve=>se(fe,"unit",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",step:"0.01",className:"form-control form-control-sm",value:xe.price||"",onChange:ve=>se(fe,"price",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate||"",onChange:ve=>se(fe,"deliveryDate",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:((parseFloat(xe.price)||0)*(parseFloat(xe.quantity)||0)).toFixed(2),readOnly:!0})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>ue(fe),disabled:P.items.length<=1,children:n.jsx("i",{className:"fas fa-trash"})})})]},fe))})]})})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-percentage me-2"}),"Tax Information"]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"CGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:P.cgst,onChange:xe=>H("cgst",xe.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"SGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:P.sgst,onChange:xe=>H("sgst",xe.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"IGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:P.igst,onChange:xe=>H("igst",xe.target.value)})]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Totals"]}),n.jsx("div",{className:"card bg-light",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Subtotal:"}),n.jsxs("span",{children:["",P.total.toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["CGST (",P.cgst,"%):"]}),n.jsxs("span",{children:["",(P.total*P.cgst/100).toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["SGST (",P.sgst,"%):"]}),n.jsxs("span",{children:["",(P.total*P.sgst/100).toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["IGST (",P.igst,"%):"]}),n.jsxs("span",{children:["",(P.total*P.igst/100).toFixed(2)]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{children:["",P.finalTotal.toFixed(2)]})]})]})})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",value:P.quotationNumber,onChange:xe=>H("quotationNumber",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Prepared By"}),n.jsx("input",{type:"text",className:"form-control",value:P.preparedby,onChange:xe=>H("preparedby",xe.target.value)})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Remarks"}),n.jsx("textarea",{className:"form-control",rows:"2",value:P.remarks,onChange:xe=>H("remarks",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Notes"}),n.jsx("textarea",{className:"form-control",rows:"2",value:P.notes,onChange:xe=>H("notes",xe.target.value)})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:de,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:ge,disabled:!P.poNumber||!P.vendor,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Update Purchase Order"]})]})]})})}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-success text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-check me-2"}),"Approve Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:We})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"PO Number:"})," ",_?.poNumber]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Vendor:"})," ",_?.vendor]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Total Amount:"})," ",(_?.finalTotal||_?.total||0).toLocaleString("en-IN")]}),n.jsx("hr",{}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Approved By ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",className:"form-control",value:T.approvedBy,onChange:xe=>I(fe=>({...fe,approvedBy:xe.target.value})),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Approval Date ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"date",className:"form-control",value:T.approvalDate,onChange:xe=>I(fe=>({...fe,approvalDate:xe.target.value})),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Comments (Optional)"}),n.jsx("textarea",{className:"form-control",rows:"3",value:T.approvalComments,onChange:xe=>I(fe=>({...fe,approvalComments:xe.target.value})),placeholder:"Enter approval comments..."})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:We,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),n.jsxs("button",{type:"button",className:"btn btn-success",onClick:Me,disabled:!T.approvedBy||!T.approvalDate,children:[n.jsx("i",{className:"fas fa-check me-1"}),"Approve Purchase Order"]})]})]})})}),h&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:te})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search By"}),n.jsxs("select",{className:"form-select",value:p,onChange:xe=>v(xe.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"category",children:"Category"}),n.jsx("option",{value:"quotationNumber",children:"Quotation Number"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${p==="poNumber"?"PO Number":p}...`,value:l,onChange:ne})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:W,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:re,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:g.map((xe,fe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),n.jsx("td",{children:xe.date}),n.jsx("td",{children:xe.vendor}),n.jsx("td",{children:xe.category}),n.jsx("td",{children:zt(xe.status)}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>le(xe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No purchase orders loaded from API":l?`No purchase orders found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:te,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const a9=["Piece","Box","Kg","Ltr"],I4e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState(""),[T,I]=j.useState(new Date().toISOString().split("T")[0]),[F,A]=j.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}]),[P,q]=j.useState(!1),[V,Y]=j.useState(""),[B,Q]=j.useState([]),[R,Z]=j.useState("materialId"),[J,ie]=j.useState(null),[M,z]=j.useState(1),[ee]=j.useState(5),ne="MMNR-",W=localStorage.getItem("selectedCompanyId"),re=localStorage.getItem("financialYear"),le=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Ie.get("/api/material",{params:{companyId:W,financialYear:re}}).then(xe=>{const fe=xe.data.filter(ve=>!ve.isDeleted&&!ve.isBlocked);console.log("Filtered materials:",fe),t(fe)}).catch(xe=>console.error(xe)),Ie.get("/api/locations",{params:{companyId:W,financialYear:re}}).then(xe=>l(xe.data))},[]),j.useEffect(()=>{Ie.get("/api/salecategory",{params:{companyId:W,financialYear:re}}).then(xe=>y(xe.data)).catch(xe=>console.error(xe))},[]);const te=()=>{A(xe=>[...xe,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}])},K=xe=>{A(ve=>ve.filter((pe,Te)=>Te!==xe));const fe=Math.ceil((F.length-1)/ee);M>fe&&fe>0&&z(fe)},de=async(xe,fe,ve)=>{const pe=[...F];if(pe[xe][fe]=ve,fe==="materialId"&&pe[xe].isManual)try{const Xe=(await Ie.get(`/api/material/byId/${ve}`)).data;Xe&&(pe[xe]={...pe[xe],materialId:Xe.materialId,description:Xe.description,baseUnit:Xe.baseUnit,orderUnit:Xe.orderUnit,location:Xe.location,materialgroup:Xe.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",ve)}A(pe)},H=()=>{if(!V.trim()){Q([]);return}if(console.log("Searching with query:",V,"Type:",R),console.log("Available materials:",e),R==="materialId"){let xe=V;/^\d+$/.test(V)&&(xe=ne+V);const fe=e.filter(ve=>(ve.materialId||"").toLowerCase().includes(xe.toLowerCase()));console.log("Filtered results for materialId:",fe),Q(fe)}else{const xe=e.filter(fe=>(fe.description||"").toLowerCase().includes(V.toLowerCase()));console.log("Filtered results for description:",xe),Q(xe)}};j.useEffect(()=>{const xe=setTimeout(()=>{V.trim()?H():Q([])},300);return()=>clearTimeout(xe)},[V,R,e]);const se=xe=>{const fe=xe.target.value;Y(fe)},be=()=>{Q(e),Y("")},ue=()=>{Q([]),Y("")},oe=xe=>{ie(xe),q(!0),Y(""),Q([])},ge=()=>{q(!1),ie(null),Y(""),Q([])},Ne=xe=>{if(J!==null){const fe=[...F];fe[J]={...fe[J],materialId:xe.materialId,description:xe.description,baseUnit:xe.baseUnit,orderUnit:xe.orderUnit,location:xe.location,materialgroup:xe.materialgroup,isManual:!0},A(fe)}ge()},Me=async()=>{if(!S){alert("Please select a purchase category");return}if(!k||!_){alert("Please fill in Location and Buyer Group");return}const xe=F.filter(ve=>ve.materialId&&ve.materialId.trim()!==""&&ve.description&&ve.description.trim()!==""&&ve.qty&&ve.qty>0);if(xe.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const fe=b.find(ve=>ve.name===S||ve.categoryName===S||ve._id===S);try{const ve={indentIdType:f,externalIndentId:v,categoryId:fe._id,categoryName:fe.name||fe.categoryName,location:k,salesGroup:_,documentDate:T,items:xe,companyId:le,financialYear:re};if(f==="")h(ve),d(!1),i(!0);else{if(f==="internal"){const pe=await Ie.post("/api/salerequest/create",ve);alert(`Indent saved successfully with ID: ${pe.data.indentId}`)}else if(f==="external"){if(!v||v.trim()===""){alert("Please enter an External Indent ID");return}ve.indentId=v;const pe=await Ie.post("/api/indent/create",ve);alert(`Indent saved successfully with External ID: ${pe.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);i(!1),A([]),C(""),E(""),I(new Date().toISOString().split("T")[0]),z(1)}}catch(ve){console.error(ve),alert("Failed to save indent")}},We=M*ee,tt=We-ee,mt=F.slice(tt,We),Be=Math.ceil(F.length/ee),dt=xe=>z(xe),Dt=({currentPage:xe,totalPages:fe,onPageChange:ve,size:pe="normal"})=>{if(fe<=1)return null;const Te=[],Xe=5;let kt=Math.max(1,xe-Math.floor(Xe/2)),Je=Math.min(fe,kt+Xe-1);Je-kt+1<Xe&&(kt=Math.max(1,Je-Xe+1));for(let Fe=kt;Fe<=Je;Fe++)Te.push(Fe);const ze=pe==="small"?"btn-sm":"";return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:n.jsx("button",{className:`page-link ${ze}`,onClick:()=>ve(xe-1),disabled:xe===1,children:"Previous"})}),kt>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${ze}`,onClick:()=>ve(1),children:"1"})}),kt>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${ze}`,children:"..."})})]}),Te.map(Fe=>n.jsx("li",{className:`page-item ${xe===Fe?"active":""}`,children:n.jsx("button",{className:`page-link ${ze}`,onClick:()=>ve(Fe),children:Fe})},Fe)),Je<fe&&n.jsxs(n.Fragment,{children:[Je<fe-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${ze}`,children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${ze}`,onClick:()=>ve(fe),children:fe})})]}),n.jsx("li",{className:`page-item ${xe===fe?"disabled":""}`,children:n.jsx("button",{className:`page-link ${ze}`,onClick:()=>ve(xe+1),disabled:xe===fe,children:"Next"})})]})})},It=()=>{i(!1),p(""),g(""),h(null),d(!0)},zt=xe=>{p(xe),xe==="internal"&&Me()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"mb-1",children:"Sales Enquiry"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Sales Category ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select form-select-lg",value:S,onChange:xe=>w(xe.target.value),children:[n.jsx("option",{value:"",children:"-- Select Category --"}),b.map((xe,fe)=>n.jsx("option",{value:xe.name||xe.categoryName||xe._id,children:xe.name||xe.categoryName||`Category ${fe+1}`},fe))]})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Doc Date ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:xe=>I(xe.target.value)})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Location ",n.jsx("span",{className:"text-danger",children:"*"})]})})," ",n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select form-control-sm",value:k,onChange:xe=>C(xe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),o.map((xe,fe)=>n.jsx("option",{value:xe.name||xe._id,children:xe.name||xe._id},fe))]})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Sales Group ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:_,onChange:xe=>E(xe.target.value),placeholder:"Buyer Group"})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"}),n.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",F.length,")"]})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsx("div",{className:"card-body p-0",children:F.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:n.jsxs("table",{className:"table-sm table-bordered table-striped mb-0",children:[n.jsx("thead",{className:" sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:mt.map((xe,fe)=>{const ve=tt+fe;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center fw-bold",children:ve+1}),n.jsx("td",{children:xe.isManual?n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",value:xe.materialId,onChange:pe=>de(ve,"materialId",pe.target.value),placeholder:"Material ID"}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>oe(ve),title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]}):n.jsx("span",{className:"badge ",children:xe.materialId})}),n.jsx("td",{children:xe.isManual?n.jsx("input",{className:"form-control form-control-sm",value:xe.description,onChange:pe=>de(ve,"description",pe.target.value),placeholder:"Description",readOnly:!!xe.materialId}):n.jsx("span",{title:xe.description,children:xe.description})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.qty,onChange:pe=>de(ve,"qty",pe.target.value),min:"1"})}),n.jsx("td",{children:n.jsxs("select",{value:xe.baseUnit,onChange:pe=>de(ve,"baseUnit",pe.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),a9.map(pe=>n.jsx("option",{value:pe,children:pe},pe))]})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate,onChange:pe=>de(ve,"deliveryDate",pe.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:xe.orderUnit,onChange:pe=>de(ve,"orderUnit",pe.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),a9.map(pe=>n.jsx("option",{value:pe,children:pe},pe))]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:xe.materialgroup||"-"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>K(ve),title:"Delete Item",children:n.jsx("i",{className:"fas fa-trash"})})})]},ve)})})]})}),n.jsx("div",{className:"card-footer bg-light",children:n.jsx(Dt,{currentPage:M,totalPages:Be,onPageChange:dt,size:"small"})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]})}),n.jsx("div",{className:"col-md-6 d-flex align-items-end",children:n.jsxs("button",{onClick:te,className:"btn btn-outline-primary me-2 btn-sm",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})]})]}),n.jsxs("button",{onClick:Me,className:"btn btn-success btn-sm",disabled:!S||F.length===0,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]}),P&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ge})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:R,onChange:xe=>Z(xe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:R==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:V,onChange:se})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:be,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),B.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ue,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:B.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:B.map((xe,fe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge ",children:xe.materialId})}),n.jsx("td",{children:xe.description}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:xe.baseUnit})}),n.jsx("td",{children:xe.location}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:xe.materialgroup})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(xe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":V?`No materials found matching "${V}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ge,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:It,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),f==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"External Indent ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:xe=>g(xe.target.value),maxLength:50,required:!0,placeholder:"Enter custom Indent ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[v.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:Me,disabled:!v.trim(),children:"Create Indent"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>p(""),children:"Back"})]})]}):n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>zt("internal"),children:[n.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]}),n.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>zt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External(Custom ID)"]})]})})]})]})})})]})]})},P4e=()=>{const[e,t]=j.useState(1),[r]=j.useState(10),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(""),[d,u]=j.useState("indentId"),[h,f]=j.useState(!1),[p,v]=j.useState(!1),[g,b]=j.useState([]),[y,S]=j.useState(null),[w,k]=j.useState(null),C=localStorage.getItem("selectedCompanyId"),_=localStorage.getItem("financialYear");j.useEffect(()=>{E()},[]);const E=()=>{f(!0),Ie.get("/api/salerequest/get",{params:{companyId:C,financialYear:_}}).then(z=>{const ee=z.data.sort((ne,W)=>new Date(W.createdAt||W.documentDate)-new Date(ne.createdAt||ne.documentDate));s(ee),o(ee)}).catch(z=>console.error("Failed to fetch saved indents",z)).finally(()=>f(!1))},T=async(z,ee,ne)=>{try{const W={[ee]:ne};await Ie.put(`/api/salerequest/status/${z}`,W);const re=le=>le.map(te=>te._id===z?{...te,[ee]:ne}:te);s(re),o(le=>re(le)),alert("Status updated successfully!")}catch(W){console.error("Error updating status:",W),alert("Failed to update status!")}},I=()=>{v(!0),b(a)},F=()=>{v(!1),c(""),b([])},A=z=>{const ee=z.target.value;if(c(ee),ee.trim()===""){b(a);return}const ne=a.filter(W=>{if(d==="indentId"){const re=ee.toLowerCase(),le=W.indentId.toLowerCase();return le.includes(re)||le.replace(/[^0-9]/g,"").includes(re.replace(/[^0-9]/g,""))}else{if(d==="location")return W.location.toLowerCase().includes(ee.toLowerCase());if(d==="buyerGroup")return W.buyerGroup.toLowerCase().includes(ee.toLowerCase());if(d==="categoryName")return W.categoryName.toLowerCase().includes(ee.toLowerCase())}return!1});b(ne)};j.useEffect(()=>{const z=a.find(ee=>ee._id===y);k(z)},[y,a]);const P=()=>{b(a),c("")},q=()=>{b([]),c("")},V=z=>{o([z]),t(1),F()},Y=()=>{o(a),t(1)},B=z=>{const ee=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${z.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(z.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${z.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${z.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${z.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${z.items.map((W,re)=>`
                                <tr style="${re%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${re+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${W.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${W.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ne=window.open("","","width=900,height=700");ne.document.write("<html><head><title>Indent Print - "+z.indentId+"</title></head><body>"),ne.document.write(ee),ne.document.write("</body></html>"),ne.document.close(),ne.print()},Q=e*r,R=Q-r,Z=i.slice(R,Q),J=Math.ceil(i.length/r),ie=z=>t(z),M=({currentPage:z,totalPages:ee,onPageChange:ne})=>{if(ee<=1)return null;const W=[],re=5;let le=Math.max(1,z-Math.floor(re/2)),te=Math.min(ee,le+re-1);te-le+1<re&&(le=Math.max(1,te-re+1));for(let K=le;K<=te;K++)W.push(K);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${z===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ne(z-1),disabled:z===1,children:"Previous"})}),le>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ne(1),children:"1"})}),le>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),W.map(K=>n.jsx("li",{className:`page-item ${z===K?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ne(K),children:K})},K)),te<ee&&n.jsxs(n.Fragment,{children:[te<ee-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ne(ee),children:ee})})]}),n.jsx("li",{className:`page-item ${z===ee?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ne(z+1),disabled:z===ee,children:"Next"})})]})})};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Enquiry List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("div",{}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-light btn-sm",onClick:I,children:[n.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:Y,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),n.jsx("div",{className:"card-body",children:h?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):Z.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table-sm table table-bordered align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Delete Status"}),n.jsx("th",{children:"Block Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Z.map((z,ee)=>{const ne=R+ee;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:ne+1}),n.jsx("td",{children:z.indentId}),n.jsx("td",{children:new Date(z.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),z.location]}),n.jsx("td",{children:z.salesGroup}),n.jsx("td",{children:z.categoryName}),n.jsxs("td",{className:"text-center",children:[z.items.length," items"]}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:z.isDeleted||!1,onChange:W=>T(z._id,"isDeleted",W.target.checked)}),n.jsx("label",{className:"form-check-label",children:z.isDeleted?"Deleted":"Active"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:z.isBlocked||!1,onChange:W=>T(z._id,"isBlocked",W.target.checked)}),n.jsx("label",{className:"form-check-label",children:z.isBlocked?"Blocked":"Active"})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>B(z),title:"Print Indent",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{type:"button",onClick:()=>S(z._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:n.jsx("i",{className:"ti ti-eye"})})]})]},z._id)})})]})}),J>1&&n.jsx("div",{className:"d-flex justify-content-center mt-4",children:n.jsx(M,{currentPage:e,totalPages:J,onPageChange:ie})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("h5",{className:"text-muted",children:i.length!==a.length?"Filtered results":"No indents available"}),n.jsx("p",{className:"text-muted",children:i.length!==a.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:Y,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:F})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:d,onChange:z=>u(z.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"location",children:"Location"}),n.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:A})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:P,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:q,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:g.map((z,ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:z.indentId})}),n.jsx("td",{children:new Date(z.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),z.location]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:z.buyerGroup})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-success",children:z.categoryName})}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-warning text-dark",children:[z.items.length," items"]})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>V(z),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ee))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:a.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:F,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"table-responsive",children:w?.items?.length>0&&n.jsxs("table",{className:"table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Delivery Date"})]})}),n.jsx("tbody",{children:w?.items.map((z,ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:ee+1}),n.jsx("td",{children:z.materialId}),n.jsx("td",{children:z.description}),n.jsx("td",{children:z.qty}),n.jsx("td",{children:z.baseUnit}),n.jsx("td",{children:z.orderUnit}),n.jsx("td",{children:z.location}),n.jsx("td",{children:new Date(z.deliveryDate).toLocaleDateString()})]},z._id))})]})})})]})})})]})};function O4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState([]),[f,p]=j.useState(null),[v,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState([]),[T,I]=j.useState(""),[F,A]=j.useState(""),[P,q]=j.useState(""),[V,Y]=j.useState(!1),[B,Q]=j.useState(!1),[R,Z]=j.useState(!1),[J,ie]=j.useState(null),[M,z]=j.useState(""),[ee,ne]=j.useState([]),W=localStorage.getItem("selectedCompanyId"),re=localStorage.getItem("financialYear"),le=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Ie.get("/api/salerequest/get",{params:{companyId:W,financialYear:re}}).then(fe=>{const ve=fe.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);t(ve)}).catch(console.error),Ie.get("/api/sale-quotation-categories",{params:{companyId:W,financialYear:re}}).then(fe=>a(fe.data)).catch(console.error),Ie.get("/api/locations",{params:{companyId:W,financialYear:re}}).then(fe=>{console.log("Locations API response:",fe.data),Array.isArray(fe.data)?ne(fe.data):fe.data&&Array.isArray(fe.data.locations)?ne(fe.data.locations):ne([])}).catch(fe=>{console.error("Failed to fetch locations:",fe),ne([])}),console.log("location",M),Ie.get("/api/customers",{params:{companyId:W,financialYear:re}}).then(fe=>{const ve=fe.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);i(ve)}).catch(console.error),Ie.get("/api/material").then(fe=>l(fe.data)).catch(console.error),te()},[]);const te=()=>{Ie.get("/api/salesquotations").then(fe=>h(fe.data)).catch(console.error)},K=fe=>{p({label:fe.indentId,value:fe._id}),d(fe.salesGroup||""),E(fe.items.map(ve=>({...ve,customerName:b?.name1||"",price:"",unit:""}))),Z(!1)},de=fe=>{y({label:`${fe.name1} ${fe.name2}`,value:fe._id}),E(ve=>ve.map(pe=>({...pe,customerName:fe.name1}))),Q(!1)},H=fe=>{const ve=[..._];ve[J]={...ve[J],materialId:fe.materialId,description:fe.description,baseUnit:fe.baseUnit,unit:fe.unit,price:fe.price},E(ve),Y(!1)},se=(fe,ve,pe)=>{const Te=[..._];Te[fe][ve]=pe,E(Te)},be=()=>{E(fe=>[...fe,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ue,oe]=j.useState(!1),[ge,Ne]=j.useState("internal"),[Me,We]=j.useState(""),tt=fe=>{fe.preventDefault(),oe(!0)},mt=()=>{const fe={indentId:f?.label,categoryId:v?.value,customerId:b?.value,note:S,companyId:le,financialYear:re,validityDate:k,salesGroup:c,location:M,items:_,quotationNumberType:ge,externalQuotationNumber:ge==="external"?Me:null};Ie.post("/api/salesquotations",fe).then(()=>{alert("Quotation saved successfully!"),te(),dt(),oe(!1),Ne("internal"),We("")}).catch(ve=>{console.error(ve),alert("Error saving quotation")})},Be=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-hashtag me-2"}),"Quotation Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>oe(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ne("internal"),mt()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ne("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ge==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Me,onChange:fe=>{fe.target.value.length<=50&&We(fe.target.value)},onKeyPress:fe=>{fe.key==="Enter"&&Me.trim()&&mt()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[Me.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:mt,disabled:!Me.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Quotation"]})})]})]})]})})})]}),dt=()=>{p(null),g(null),y(null),w(""),C(""),E([])},Dt=({children:fe,onClose:ve})=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h5",{className:"modal-title",children:"Select"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ve})]}),n.jsx("div",{className:"modal-body",children:fe})]})})}),It=()=>{const[fe,ve]=j.useState([]),[pe,Te]=j.useState("materialId"),Xe=ze=>{const Fe=ze.target.value;I(Fe);const Ve=o.filter(pt=>(pe==="materialId"?pt.materialId:pt.description)?.toLowerCase().includes(Fe.toLowerCase()));ve(Ve)},kt=()=>{ve(o),I("")},Je=()=>{ve([]),I("")};return n.jsxs(Dt,{onClose:()=>Y(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:ze=>Te(ze.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:pe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:T,onChange:Xe})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:kt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),fe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:fe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:fe.map((ze,Fe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ze.materialId})}),n.jsx("td",{children:ze.description}),n.jsx("td",{children:ze.baseUnit}),n.jsx("td",{children:ze.unit}),n.jsx("td",{children:ze.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>H(ze),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Fe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":T?`No materials found matching "${T}"`:'Enter search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Y(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},zt=()=>{const[fe,ve]=j.useState("name1"),[pe,Te]=j.useState([]),Xe=ze=>{const Fe=ze.target.value;A(Fe);const Ve=s.filter(pt=>(fe==="name1"?pt.name1:fe==="city"?pt.city:fe==="region"?pt.region:`${pt.name1} ${pt.name2}`)?.toLowerCase().includes(Fe.toLowerCase()));Te(Ve)},kt=()=>{Te(s),A("")},Je=()=>{Te([]),A("")};return n.jsxs(Dt,{onClose:()=>Q(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:fe,onChange:ze=>ve(ze.target.value),children:[n.jsx("option",{value:"name1",children:"Name"}),n.jsx("option",{value:"city",children:"City"}),n.jsx("option",{value:"region",children:"Region"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:F,onChange:Xe})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:kt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((ze,Fe)=>n.jsxs("tr",{children:[n.jsxs("td",{children:[ze.name1," ",ze.name2]}),n.jsx("td",{children:ze.city}),n.jsx("td",{children:ze.region}),n.jsx("td",{children:ze.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(ze),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Fe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":F?`No match found for "${F}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>Q(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},xe=()=>{const[fe,ve]=j.useState([]),[pe,Te]=j.useState("indentId"),[Xe,kt]=j.useState(""),Je=Ve=>{const pt=Ve.target.value;kt(pt);const Pe=e.filter(Re=>(pe==="indentId"?Re.indentId:pe==="categoryName"?Re.categoryName:Re.location)?.toLowerCase().includes(pt.toLowerCase()));ve(Pe)},ze=()=>{ve(e),kt("")},Fe=()=>{ve([]),kt("")};return n.jsxs(Dt,{onClose:()=>Z(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:Ve=>Te(Ve.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Xe,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:ze,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),fe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Fe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:fe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:fe.map((Ve,pt)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ve.indentId}),n.jsx("td",{children:Ve.categoryName}),n.jsx("td",{children:Ve.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>K(Ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Xe?`No match for "${Xe}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>Z(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Quotation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Quotation Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Request:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:f?.label||"",onChange:fe=>{const ve=fe.target.value;p({label:ve,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Z(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})})," ",n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:fe=>{const ve=fe.target.value;y({label:ve,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select",value:M,onChange:fe=>z(fe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(ee)&&ee.map((fe,ve)=>n.jsx("option",{value:fe.name||fe._id||fe,children:fe.name||fe.locationName||fe},ve))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Quotation Category:"})}),"  ",n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select",value:v?.value||"",onChange:fe=>{const ve=fe.target.value,pe=r.find(Te=>Te._id===ve);g(pe?{label:pe.categoryName,value:pe._id}:null)},children:[n.jsx("option",{value:"",children:"Select"}),r.map(fe=>n.jsxs("option",{value:fe._id,children:[fe.categoryName," (",fe.prefix,")"]},fe._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:fe=>C(fe.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:fe=>d(fe.target.value),placeholder:"Enter or edit Sales Group"})})]}),n.jsxs("div",{className:"col-xl-4 row",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{className:"form-label",children:"Notes"})})," ",n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:S,onChange:fe=>w(fe.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:tt,children:[n.jsx("div",{className:"table-responsive mb-3",children:n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:_.map((fe,ve)=>n.jsxs("tr",{children:[n.jsx("td",{children:ve+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:fe.materialId,onChange:pe=>se(ve,"materialId",pe.target.value)}),n.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{ie(ve),Y(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.description,onChange:pe=>se(ve,"description",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:fe.qty,onChange:pe=>se(ve,"qty",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.baseUnit,onChange:pe=>se(ve,"baseUnit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.orderUnit,onChange:pe=>se(ve,"orderUnit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.location,onChange:pe=>se(ve,"location",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.customerName,onChange:pe=>se(ve,"customerName",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:fe.unit,onChange:pe=>se(ve,"unit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:fe.price,onChange:pe=>se(ve,"price",pe.target.value)})})]},ve))})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"button",className:"btn btn-link",onClick:be,children:"+ Add Quotation Item"})})}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})})})})})]}),V&&n.jsx(It,{}),B&&n.jsx(zt,{}),R&&n.jsx(xe,{}),ue&&n.jsx(Be,{})]})]})}function M4e(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),o=10,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");j.useEffect(()=>{Ie.get("/api/salesquotations",{params:{companyId:l,financialYear:c}}).then(k=>{const C=k.data.sort((_,E)=>new Date(E.createdAt)-new Date(_.createdAt));t(C)}).catch(k=>{console.error("Failed to fetch quotations",k),alert("Error loading quotations")})},[]);const d=k=>{const C=window.open("","_blank"),_=`
      <html>
        <head>
          <title>Print Quotation</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Quotation: ${k.quotationNumber}</h2>
          <p><strong>Indent ID:</strong> ${k.indentId}</p>
          <p><strong>Customer Name:</strong> ${k.customerName}</p>
          <p><strong>Validity Date:</strong> ${k.validityDate}</p>
          <p><strong>Note:</strong> ${k.note}</p>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const I=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId}</td>
                      <td>${E.description}</td>
                      <td>${E.qty}</td>
                      <td>${E.baseUnit}</td>
                      <td>${E.orderUnit}</td>
                      <td>${E.location}</td>
                      <td>${E.unit}</td>
                      <td>${E.price}</td>
                      <td>${I.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;C.document.write(_),C.document.close(),C.print()},[u,h]=j.useState(""),[f,p]=j.useState(""),v=e.filter(k=>{const C=k.quotationNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),_=new Date(k.createdAt),E=u?new Date(u):null,T=f?new Date(f):null,I=(!E||_>=E)&&(!T||_<=T);return C&&I}),g=s*o,b=g-o,y=v.slice(b,g),S=Math.ceil(v.length/o),w=k=>i(k);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Quotation List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item",children:"Sales Report"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6"}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Quotation No, Indent ID or Customer Name",value:r,onChange:k=>{a(k.target.value),i(1)}})]})}),n.jsxs("div",{className:" col-xl-3  d-flex gap-2",children:[n.jsx("label",{children:"From:"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}}),n.jsx("label",{children:"To:"}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:k=>{p(k.target.value),i(1)}})]})]})}),n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Quotation No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Validity Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-flex",children:k.quotationNumber}),n.jsx("td",{className:"text-flex",children:k.indentId}),n.jsx("td",{className:"text-flex",children:k.customerName}),n.jsx("td",{className:"text-flex",children:k.location}),n.jsx("td",{className:"text-flex",children:k.validityDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>d(k),children:[n.jsx("i",{className:"fas fa-print"})," Print"]})})]},C))})]})})]}),S>1&&n.jsx("nav",{className:"ms-auto",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{onClick:()=>w(s-1),className:"page-link",disabled:s===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const C=[],_=[];C.push(1);for(let I=Math.max(2,s-2);I<=Math.min(S-1,s+2);I++)C.push(I);S>1&&C.push(S);const E=[...new Set(C)].sort((I,F)=>I-F);let T;for(let I of E)T&&(I-T===2?_.push(T+1):I-T!==1&&_.push("...")),_.push(I),T=I;return _.map((I,F)=>I==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${F}`):n.jsx("li",{className:`page-item ${s===I?"active":""}`,children:n.jsx("button",{onClick:()=>w(I),className:"page-link",children:I})},I))})(),n.jsx("li",{className:`page-item ${s===S?"disabled":""}`,children:n.jsx("button",{onClick:()=>w(s+1),className:"page-link",disabled:s===S,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})}function R4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(new Date().toISOString().substring(0,10)),[f,p]=j.useState([]),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[_,E]=j.useState(0),[T,I]=j.useState([]),[F,A]=j.useState(""),[P,q]=j.useState([]),[V,Y]=j.useState(""),[B,Q]=j.useState([]),[R,Z]=j.useState(""),[J,ie]=j.useState(!1),[M,z]=j.useState("quotation"),[ee,ne]=j.useState(""),[W,re]=j.useState([]),[le,te]=j.useState(!1),[K,de]=j.useState(""),[H,se]=j.useState([]),[be,ue]=j.useState(!1),[oe,ge]=j.useState(""),[Ne,Me]=j.useState([]),[We,tt]=j.useState(""),[mt,Be]=j.useState(""),[dt,Dt]=j.useState(""),[It,zt]=j.useState(""),[xe,fe]=j.useState(0),[ve,pe]=j.useState(0),[Te,Xe]=j.useState(0),[kt,Je]=j.useState([]),[ze,Fe]=j.useState([]),[Ve,pt]=j.useState(null),[Pe,Re]=j.useState(0),[Ye,At]=j.useState(0),[Gt,De]=j.useState(0),[Ee,it]=j.useState(0),[Tt,lr]=j.useState(0),[Rt,sr]=j.useState([]),[pr,Nr]=j.useState([]),[gt,Bt]=j.useState(!1),[he,Le]=j.useState(""),[Ae,_e]=j.useState(null);localStorage.getItem("selectedCompanyId");const Ue=localStorage.getItem("financialYear"),He=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{const ut={params:{companyId:He,financialYear:Ue}};Ie.get("/api/sales-order-categories",ut).then(nr=>t(nr.data)),Ie.get("/api/sales-orders",ut).then(nr=>{a(nr.data);const Ot=[];nr.data.forEach(jr=>{jr.items&&jr.items.forEach(gs=>{gs.salesGroup&&!Ot.includes(gs.salesGroup)&&Ot.push(gs.salesGroup)})}),q(Ot)}),Ie.get("/api/quotations/get",ut).then(nr=>{Q(nr.data)}),Ie.get("/api/general-conditions",ut).then(nr=>{const Ot=nr.data.filter(jr=>!jr.isDeleted).map(jr=>({_id:jr._id,name:jr.name,description:jr.description}));Je(Ot)}),Ie.get("/api/locations",ut).then(nr=>p(nr.data)),Ie.get("/api/tax",ut).then(nr=>Fe(nr.data)),Ie.get("/api/material",ut).then(nr=>Nr(nr.data)),Ie.get("/api/customers",ut).then(nr=>I(nr.data)),C([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:"",selectedTax:null,cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,itemTotalWithTax:0}))])},[]);const xt=ut=>{const nr=(ut.quantity||0)*(ut.price||0)-(ut.discount||0),Ot=nr*(parseFloat(ut.cgst)||0)/100,jr=nr*(parseFloat(ut.sgst)||0)/100,gs=nr*(parseFloat(ut.igst)||0)/100;return{itemSubtotal:nr,cgstAmount:Ot,sgstAmount:jr,igstAmount:gs,itemTotalWithTax:nr+Ot+jr+gs}},jt=(ut,nr)=>{const Ot=[...k];Ot[ut].selectedTax=nr,Ot[ut].cgst=nr?.cgst||0,Ot[ut].sgst=nr?.sgst||0,Ot[ut].igst=nr?.igst||0;const jr=xt(Ot[ut]);Ot[ut]={...Ot[ut],...jr},C(Ot),Pa(Ot)},ct=ut=>{if(ne(ut),ut.trim()){let nr=[];M==="quotation"?nr=B.filter(Ot=>Ot.quotationNumber.toLowerCase().includes(ut.toLowerCase())):M==="salesorder"&&(nr=r.filter(Ot=>Ot.soNumber?.toLowerCase().includes(ut.toLowerCase())||Ot.customerName?.toLowerCase().includes(ut.toLowerCase()))),re(nr)}else re([])},Nt=()=>{M==="quotation"?re(B):M==="salesorder"&&re(r)},wt=ut=>{console.log("Selected Document:",ut),M==="quotation"?(Z(ut.quotationNumber),cr(ut)):M==="salesorder"&&(l(ut.soNumber),xr(ut)),ie(!1),ne(""),re([])},er=()=>{ie(!1),ne(""),re([])},cr=ut=>{A(ut.name1||ut.customerName),y(ut.items[0]?.location||""),tt(ut.items[0]?.salesGroup||"");const nr=ut.items.map(Ot=>({materialId:Ot.materialId,description:Ot.description,quantity:Ot.qty,baseUnit:Ot.baseUnit,unit:Ot.unit,orderUnit:Ot.orderUnit,price:Ot.price,priceUnit:Ot.priceUnit,materialgroup:Ot.materialgroup,deliveryDate:Ot.deliveryDate?String(Ot.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:Ot.note||"",selectedTax:null,cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,itemTotalWithTax:0}));C(nr),Pa(nr)},xr=ut=>{if(console.log("Selected Sales Order:",ut),l(ut.soNumber),A(ut.customerName||""),y(ut.deliveryLocation||""),w(ut.deliveryAddress||""),tt(ut.salesGroup||""),Be(ut.contactPerson||""),Dt(ut.payTerms||""),zt(ut.validityDate||""),ut.items&&ut.items.length>0){const nr=ut.items.map(Ot=>({materialId:Ot.materialId||"",description:Ot.description||"",quantity:Ot.quantity||0,baseUnit:Ot.baseUnit||"",unit:Ot.unit||"",orderUnit:Ot.orderUnit||"",price:Ot.price||0,priceUnit:Ot.priceUnit||"",salesGroup:Ot.salesGroup||"",materialgroup:Ot.materialgroup||"",deliveryDate:Ot.deliveryDate?String(Ot.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:Ot.note||"",selectedTax:Ot.selectedTax||null,cgst:Ot.cgst||0,sgst:Ot.sgst||0,igst:Ot.igst||0,discount:Ot.discount||0,itemSubtotal:Ot.itemSubtotal||0,itemTotalWithTax:Ot.itemTotalWithTax||0}));C(nr),Pa(nr)}if(ut.taxName){const nr=ze.find(Ot=>Ot.taxName===ut.taxName);pt(nr)}Re(ut.cgst||0),At(ut.sgst||0),De(ut.igst||0),it(ut.taxDiscount||0),te(!1)},ur=(ut,nr,Ot)=>{nr.includes(ut)?Ot(nr.filter(jr=>jr!==ut)):Ot([...nr,ut])},Ke=ut=>{if(ge(ut),ut.trim()){const nr=T.filter(Ot=>Ot.name1?.toLowerCase().includes(ut.toLowerCase())||Ot.cnNo?.toLowerCase().includes(ut.toLowerCase()));Me(nr)}else Me([])},mr=()=>{Me(T)},fr=ut=>{A(ut.name1||ut.customerName),ue(!1),ge(""),Me([])},Lr=ut=>{l(ut);const nr=r.find(Ot=>Ot.soNumber===ut);if(nr&&(A(nr.customerName||""),y(nr.deliveryLocation||""),w(nr.deliveryAddress||""),tt(nr.salesGroup||""),Be(nr.contactPerson||""),Dt(nr.payTerms||""),zt(nr.validityDate||""),nr.items&&nr.items.length>0)){const Ot=nr.items.map(jr=>({materialId:jr.materialId||"",description:jr.description||"",quantity:jr.quantity||0,baseUnit:jr.baseUnit||"",unit:jr.unit||"",orderUnit:jr.orderUnit||"",price:jr.price||0,priceUnit:jr.priceUnit||"",materialgroup:jr.materialgroup||"",deliveryDate:jr.deliveryDate?String(jr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:jr.note||"",selectedTax:jr.selectedTax||null,cgst:jr.cgst||0,sgst:jr.sgst||0,igst:jr.igst||0,discount:jr.discount||0,itemSubtotal:jr.itemSubtotal||0,itemTotalWithTax:jr.itemTotalWithTax||0}));C(Ot),Pa(Ot)}},fa=()=>{ue(!1),ge(""),Me([])},Pa=ut=>{const nr=ut.reduce((Ei,ui)=>Ei+(ui.itemSubtotal||0),0),Ot=ut.reduce((Ei,ui)=>Ei+(ui.cgstAmount||0),0),jr=ut.reduce((Ei,ui)=>Ei+(ui.sgstAmount||0),0),gs=ut.reduce((Ei,ui)=>Ei+(ui.igstAmount||0),0),zd=ut.reduce((Ei,ui)=>Ei+(ui.itemTotalWithTax||0),0);E(nr.toFixed(2)),fe(Ot.toFixed(2)),pe(jr.toFixed(2)),Xe(gs.toFixed(2)),lr(zd.toFixed(2))},wn=(ut,nr,Ot)=>{const jr=[...k];if(jr[ut][nr]=nr==="quantity"||nr==="price"||nr==="cgst"||nr==="sgst"||nr==="igst"||nr==="discount"?parseFloat(Ot)||0:Ot,["quantity","price","discount","cgst","sgst","igst"].includes(nr)){const gs=xt(jr[ut]);jr[ut]={...jr[ut],...gs}}C(jr),Pa(jr)},Bn=()=>{C([...k,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",note:"",deliveryDate:new Date().toISOString().slice(0,10),selectedTax:null,cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,itemTotalWithTax:0}])},cn=ut=>{const nr=[...k];nr.splice(ut,1),C(nr),Pa(nr)},[Is,tn]=j.useState(!1),[Ga,In]=j.useState("internal"),[Ci,ki]=j.useState(""),[Xn,kl]=j.useState(""),Un=async ut=>{if(ut.preventDefault(),!s)return alert("Please select category");tn(!0)},co=async(ut=null)=>{const nr=r.find(jr=>jr.soNumber===o),Ot={soNumber:V,salesOrderId:nr?._id,referenceSalesOrderNumber:o,categoryId:s._id,category:s.categoryName,date:u,customerName:F,contactPerson:mt,salesGroup:We,payTerms:dt,validityDate:It,deliveryLocation:b,deliveryAddress:S,items:k,generalCondition:Rt,companyId:He,financialYear:Ue,total:parseFloat(_)||0,taxName:Ve?.taxName||"",cgst:parseFloat(Pe)||0,sgst:parseFloat(Ye)||0,igst:parseFloat(Gt)||0,taxDiscount:parseFloat(Ee)||0,finalTotal:parseFloat(Tt)||0,soNumberType:ut?"external":"internal",customSONumber:ut};try{const jr=await Ie.post("/api/sales-orders",Ot);console.log("Saved SO:",jr.data),i(null),l(""),h(new Date().toISOString().substring(0,10)),A(""),y(""),w(""),C([]),E(""),pt(null),Re(""),At(""),De(""),it(""),lr(""),Dt(""),tt(""),Be(""),tn(!1),In("internal"),ki(""),kl(""),alert("Sales Order Created Successfully with SO Number: "+jr.data.soNumber)}catch(jr){console.error("Error during SO creation:",jr),alert("Failed to create Sales Order")}},rn=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header text-white",children:[n.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${M==="quotation"?"active":""}`,onClick:()=>z("quotation"),href:"#",children:"Quotation"})}),n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${M==="salesorder"?"active":""}`,onClick:()=>z("salesorder"),href:"#",children:"Sales Order"})})]}),n.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:er})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"form-label",children:["Search ",M.charAt(0).toUpperCase()+M.slice(1)," Number"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${M} number...`,value:ee,onChange:ut=>ct(ut.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:W.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Number"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:W.map((ut,nr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:`badge ${M==="quotation"?"bg-info":"bg-primary"}`,children:ut.quotationNumber||ut.soNumber})}),n.jsx("td",{children:ut.customerName||ut.name1}),n.jsx("td",{children:new Date(ut.validityDate||ut.date||ut.createdAt).toLocaleDateString()}),n.jsxs("td",{children:["",ut.totalPrice||ut.finalTotal||ut.total]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>wt(ut),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},nr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:ee?`No ${M}s found matching "${ee}"`:'Enter search term or click "View All"'})]})})]})})})]})})}),Vo=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Generate Sales Order Number"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{tn(!1),In("internal"),ki("")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the SO Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{In("internal"),co(null)},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>In("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Ga==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom SO Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number (max 50 characters)",value:Ci,onChange:ut=>ki(ut.target.value),onKeyPress:ut=>{ut.key==="Enter"&&Ci.trim()&&co(Ci)},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[Ci.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>co(Ci),disabled:!Ci.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save SO"]})})]}),Ga==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"SO number will be auto-generated based on category: ",n.jsx("strong",{children:s?.categoryName}),n.jsx("br",{}),n.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]}),td=()=>{const ut=pr.filter(Ot=>Ot.materialId.toLowerCase().includes(he.toLowerCase())||Ot.description.toLowerCase().includes(he.toLowerCase())),nr=Ot=>{const jr=[...k];jr[Ae]={...jr[Ae],materialId:Ot.materialId,description:Ot.description,baseUnit:Ot.baseUnit,unit:Ot.unit,price:Ot.price,salesGroup:Ot.salesGroup,materialgroup:Ot.materialgroup},C(jr),Pa(jr),Bt(!1)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:n.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[n.jsx("h3",{children:"Select Material"}),n.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:he,onChange:Ot=>Le(Ot.target.value),style:{width:"100%",marginBottom:10}}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Price Unit"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Select"})]})}),n.jsx("tbody",{children:ut.map((Ot,jr)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ot.materialId}),n.jsx("td",{children:Ot.description}),n.jsx("td",{children:Ot.baseUnit}),n.jsx("td",{children:Ot.unit}),n.jsx("td",{children:Ot.price}),n.jsx("td",{children:Ot.priceUnit}),n.jsx("td",{children:Ot.salesGroup}),n.jsx("td",{children:Ot.materialgroup}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>nr(Ot),children:"Select"})})]},jr))})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>Bt(!1),style:{marginTop:10},children:"Close"})]})})},El=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:fa})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Customer"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by customer name or code...",value:oe,onChange:ut=>Ke(ut.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:mr,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer Code"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ne.map((ut,nr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:ut.cnNo})}),n.jsx("td",{children:ut.name1}),n.jsx("td",{children:ut.email}),n.jsx("td",{children:ut.address1}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fr(ut),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},nr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:oe?`No customers found matching "${oe}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:fa,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Order"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Order"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Sales Order Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference SO No:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference SO number",value:o,onChange:ut=>{l(ut.target.value),ut.target.value&&Lr(ut.target.value)}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>ie(!0),style:{border:"0px solid"},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"SO Category:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",onChange:ut=>{const nr=e.find(Ot=>Ot._id===ut.target.value);i(nr)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),e.map(ut=>n.jsx("option",{value:ut._id,children:ut.categoryName},ut._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:F,onChange:ut=>A(ut.target.value),placeholder:"Enter customer name"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>ue(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"SO Number:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:V,readOnly:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Creating date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:ut=>h(ut.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:b,onChange:ut=>{const nr=ut.target.value;y(nr);const Ot=f.find(jr=>jr.name===nr||jr.locationName===nr||jr._id===nr);if(Ot){const jr=Ot.address+", "+Ot.city+`, 
`+Ot.state+`, 
`+Ot.country+", "+Ot.postalCode+`, 
`+Ot.contactPerson+", "+Ot.contactNumber+".";w(jr)}else w("")},children:[n.jsx("option",{value:"",children:"-- Select Location --"}),f.map(ut=>n.jsx("option",{value:ut.name||ut.locationName||ut._id,children:ut.name||ut.locationName||ut._id},ut._id||ut.id||ut.name))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:We,onChange:ut=>tt(ut.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:mt,onChange:ut=>Be(ut.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:It,onChange:ut=>zt(ut.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:Rt.length===0?"Select...":`${Rt.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:kt.map(ut=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Rt.includes(ut._id),onChange:()=>ur(ut._id,Rt,sr)}),n.jsx("label",{className:"form-check-label ms-1",children:ut.name})]})},ut._id))})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Header Note:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("textarea",{className:"form-control form-control-sm",value:dt,onChange:ut=>Dt(ut.target.value),maxLength:"250"})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Discount"}),n.jsx("th",{children:"Sub Total"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"CGST"}),n.jsx("th",{children:"SGST/UGST"}),n.jsx("th",{children:"IGST"}),n.jsx("th",{children:"PriceUnit"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:k.map((ut,nr)=>n.jsxs("tr",{children:[n.jsx("td",{children:nr+1}),n.jsx("td",{children:n.jsx("input",{value:ut.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{_e(nr),Bt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ut.description,onChange:Ot=>wn(nr,"description",Ot.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"text",value:ut.quantity,onChange:Ot=>{Ot.target.value=Ot.target.value.replace(/[^0-9./]/g,""),wn(nr,"quantity",Ot.target.value)}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ut.baseUnit,onChange:Ot=>wn(nr,"baseUnit",Ot.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:ut.deliveryDate,onChange:Ot=>wn(nr,"deliveryDate",Ot.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:ut.materialgroup,onChange:Ot=>wn(nr,"materialgroup",Ot.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"text",value:ut.price,onChange:Ot=>{Ot.target.value=Ot.target.value.replace(/[^0-9./.]/g,""),wn(nr,"price",Ot.target.value)}})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:ut.discount||0,onChange:Ot=>{Ot.target.value=Ot.target.value.replace(/[^0-9./]/g,""),wn(nr,"discount",Ot.target.value)}})}),n.jsx("td",{children:(ut.quantity*ut.price-(ut.discount||0)).toFixed(2)}),n.jsx("td",{children:n.jsxs("select",{className:"form-select form-select-sm",value:ut.selectedTax?.taxName||"",onChange:Ot=>{const jr=ze.find(gs=>gs.taxName===Ot.target.value);jt(nr,jr)},children:[n.jsx("option",{value:"",children:"-- Select Tax --"}),ze.map(Ot=>n.jsx("option",{value:Ot.taxName,children:Ot.taxName},Ot._id))]})}),n.jsx("td",{children:(ut.cgstAmount||0).toFixed(2)}),n.jsx("td",{children:(ut.sgstAmount||0).toFixed(2)}),n.jsx("td",{children:(ut.igstAmount||0).toFixed(2)}),n.jsx("td",{children:n.jsxs("select",{value:ut.priceUnit,onChange:Ot=>wn(nr,"priceUnit",Ot.target.value),required:!0,className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"INR",children:"INR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),n.jsx("td",{children:(ut.itemTotalWithTax||0).toFixed(2)}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:ut.note,onChange:Ot=>wn(nr,"note",Ot.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>cn(nr),children:n.jsx("i",{className:"ti ti-trash"})})})]},nr))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",className:"btn btn-link",onClick:Bn,children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:Un,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address:"}),n.jsx("textarea",{className:"form-control form-control-sm",value:S,onChange:ut=>w(ut.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"border-top pt-3",children:n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-6",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("strong",{children:["",_]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"CGST:"}),n.jsxs("span",{children:["",xe]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"SGST:"}),n.jsxs("span",{children:["",ve]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"IGST:"}),n.jsxs("span",{children:["",Te]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{className:"text-success",children:["",Tt]})]})]})})})})]})})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit SO"})})]})})})})})]}),gt&&n.jsx(td,{}),J&&n.jsx(rn,{}),be&&n.jsx(El,{}),Is&&n.jsx(Vo,{})]})})]})})}function F4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState([]),[f,p]=j.useState([]),v=localStorage.getItem("selectedCompanyId")||"",g=localStorage.getItem("financialYear")||"",[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState(1),[T]=j.useState(10);j.useEffect(()=>{const W=e.filter(re=>{const le=re.soNumber?.toLowerCase().includes(b.toLowerCase())||re.poNumber?.toLowerCase().includes(b.toLowerCase())||re.vendor?.toLowerCase().includes(b.toLowerCase())||re.customer?.toLowerCase().includes(b.toLowerCase())||re.customerName?.toLowerCase().includes(b.toLowerCase())||re.category?.toLowerCase().includes(b.toLowerCase())||re.quotationNumber?.toLowerCase().includes(b.toLowerCase())||re.deliveryLocation?.toLowerCase().includes(b.toLowerCase())||re.deliveryAddress?.toLowerCase().includes(b.toLowerCase()),te=new Date(re.createdAt),K=S?new Date(S):null,de=k?new Date(k):null,H=(!K||te>=K)&&(!de||te<=de);return le&&H});a(W)},[b,S,k,e]),j.useEffect(()=>{P(),F(),A()},[]);const I={params:{companyId:v}},F=async()=>{try{const W=await Ie.get("/api/sales-order-categories",I);h(W.data)}catch(W){console.error("Error fetching categories:",W)}},A=async()=>{try{const W=await Ie.get("/api/tax",I);p(W.data)}catch(W){console.error("Error fetching tax options:",W),p([{_id:"gst18",taxName:"GST 18%",cgst:9,sgst:9,igst:18},{_id:"gst12",taxName:"GST 12%",cgst:6,sgst:6,igst:12},{_id:"gst5",taxName:"GST 5%",cgst:2.5,sgst:2.5,igst:5},{_id:"gst0",taxName:"GST 0%",cgst:0,sgst:0,igst:0}])}},P=()=>{i(!0),Ie.get("/api/sales-orders",{params:{companyId:v,financialYear:g}}).then(W=>{const re=W.data.sort((le,te)=>new Date(te.createdAt)-new Date(le.createdAt));t(re),a(re),i(!1)}).catch(W=>{console.error("Error fetching SOs:",W),alert("Failed to fetch Sales Orders"),i(!1)})},q=_*T,V=q-T,Y=r.slice(V,q),B=Math.ceil(r.length/T),Q=W=>E(W),R=W=>{l({...W,items:W.items?.map(re=>({...re,selectedTax:re.selectedTax||{},cgst:re.cgst!==void 0?re.cgst:0,sgst:re.sgst!==void 0?re.sgst:0,igst:re.igst!==void 0?re.igst:0,discount:re.discount!==void 0?re.discount:0,itemSubtotal:re.itemSubtotal||re.quantity*re.price,cgstAmount:re.cgstAmount||0,sgstAmount:re.sgstAmount||0,igstAmount:re.igstAmount||0,itemTotalWithTax:re.itemTotalWithTax||re.quantity*re.price}))||[]}),d(!0)},Z=W=>{const re=parseFloat(W.quantity)||0,le=parseFloat(W.price)||0,te=parseFloat(W.discount)||0,H=re*le-te,se=parseFloat(W.cgst)||0,be=parseFloat(W.sgst)||0,ue=parseFloat(W.igst)||0;console.log(se,be,ue);const oe=H*se/100,ge=H*be/100,Ne=H*ue/100,Me=H+oe+ge+Ne;return{itemSubtotal:parseFloat(H.toFixed(2)),cgstAmount:parseFloat(oe.toFixed(2)),sgstAmount:parseFloat(ge.toFixed(2)),igstAmount:parseFloat(Ne.toFixed(2)),itemTotalWithTax:parseFloat(Me.toFixed(2))}},J=async()=>{try{const W=o.items.map(K=>{const de=Z(K);return{...K,...de}}),re={total:W.reduce((K,de)=>K+de.itemSubtotal,0),cgstAmount:W.reduce((K,de)=>K+de.cgstAmount,0),sgstAmount:W.reduce((K,de)=>K+de.sgstAmount,0),igstAmount:W.reduce((K,de)=>K+de.igstAmount,0),finalTotal:W.reduce((K,de)=>K+de.itemTotalWithTax,0)},le=await Ie.put(`/api/sales-orders/${o._id}`,{...o,items:W,...re,companyId:v,financialYear:g}),te=e.map(K=>K._id===o._id?le.data:K);t(te),a(te),d(!1),l(null),alert("Sales Order updated successfully!")}catch(W){console.error("Error updating sales order:",W),alert("Failed to update sales order: "+(W.response?.data?.error||W.message))}},ie=(W,re)=>{l(le=>({...le,[W]:re}))},M=(W,re,le)=>{l(te=>{const K=te.items.map((de,H)=>{if(H===W){const se={...de,[re]:le};if(re==="selectedTax"){const be=f.find(ue=>ue._id===le);be?(se.selectedTax={_id:be._id,taxName:be.taxName,cgst:be.cgst,sgst:be.sgst,igst:be.igst},se.cgst=be.cgst||0,se.sgst=be.sgst||0,se.igst=be.igst||0):le===""&&(se.selectedTax={},se.cgst=0,se.sgst=0,se.igst=0)}if(["quantity","price","discount","selectedTax"].includes(re)){const be=Z(se);return{...se,...be}}return se}return de});return{...te,items:K}})},z=()=>{l(W=>({...W,items:[...W.items,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,salesGroup:"",materialGroup:"",deliveryDate:"",selectedTax:{},cgst:0,sgst:0,igst:0,discount:0,itemSubtotal:0,cgstAmount:0,sgstAmount:0,igstAmount:0,itemTotalWithTax:0}]}))},ee=W=>{l(re=>({...re,items:re.items.filter((le,te)=>te!==W)}))},ne=W=>{const re=W.items?.map((K,de)=>`
      <tr>  
        <td>${de+1}</td>
        <td>${K.materialId||""}</td>
        <td>${K.description||""}</td>
        <td>${K.quantity||0}</td>
        <td>${K.baseUnit||""}</td>
        <td>${K.price||0}</td>
        <td>${K.discount||0}%</td>
        <td>${K.itemSubtotal||0}</td>
        <td>${K.cgst||0}% (${K.cgstAmount||0})</td>
        <td>${K.sgst||0}% (${K.sgstAmount||0})</td>
        <td>${K.igst||0}% (${K.igstAmount||0})</td>
        <td><strong>${K.itemTotalWithTax||0}</strong></td>
        <td>${K.deliveryDate||""}</td>
      </tr>
    `).join("")||'<tr><td colspan="13">No items found</td></tr>',le=`
      <html>
      <head>
        <title>Sales Order - ${W.soNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 6px; text-align: left; font-size: 11px; }
          th { background-color: #f0f0f0; }
          .header { margin-bottom: 20px; }
          .company-info { text-align: center; margin-bottom: 20px; }
        </style>
      </head>
      <body>
        <div class="company-info">
          <h1>Sales Order</h1>
        </div>
        
        <div class="header">
          <table style="border: none;">
            <tr style="border: none;">
              <td style="border: none; width: 50%;"><strong>SO Number:</strong> ${W.soNumber||""}</td>
              <td style="border: none;"><strong>Date:</strong> ${W.date||""}</td>
            </tr>
            <tr style="border: none;">
              <td style="border: none;"><strong>Customer:</strong> ${W.customerName||""}</td>
              <td style="border: none;"><strong>Category:</strong> ${W.category||""}</td>
            </tr>
            <tr style="border: none;">
              <td style="border: none;"><strong>Reference Number:</strong> ${W.quotationNumber||""}</td>
              <td style="border: none;"><strong>Sales Group:</strong> ${W.salesGroup||""}</td>
            </tr>
            <tr style="border: none;">
              <td style="border: none;"><strong>Delivery Location:</strong> ${W.deliveryLocation||""}</td>
              <td style="border: none;"><strong>Contact Person:</strong> ${W.contactPerson||""}</td>
            </tr>
            <tr style="border: none;">
              <td style="border: none;" colspan="2"><strong>Delivery Address:</strong> ${W.deliveryAddress||""}</td>
            </tr>
          </table>
        </div>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Discount</th>
              <th>Subtotal</th>
              <th>CGST</th>
              <th>SGST</th>
              <th>IGST</th>
              <th>Total</th>
              <th>Delivery Date</th>
            </tr>
          </thead>
          <tbody>
            ${re}
          </tbody>
        </table>

        <div style="margin-top: 20px;">
          <h3>Tax Summary</h3>
          <table style="width: 400px; float: right;">
            <tr><td><strong>Items Subtotal:</strong></td><td>${W.total||0}</td></tr>
            <tr><td><strong>Total CGST:</strong></td><td>${W.cgstAmount||0}</td></tr>
            <tr><td><strong>Total SGST:</strong></td><td>${W.sgstAmount||0}</td></tr>
            <tr><td><strong>Total IGST:</strong></td><td>${W.igstAmount||0}</td></tr>
            <tr><td><strong>Tax Discount:</strong></td><td>${W.taxDiscount||0}</td></tr>
            <tr style="border-top: 2px solid black;"><td><strong>Final Total:</strong></td><td><strong>${W.finalTotal||0}</strong></td></tr>
          </table>
        </div>
        
        <div style="clear: both; margin-top: 50px;">
          <table style="border: none; width: 100%;">
            <tr style="border: none;">
              <td style="border: none; width: 50%;"><strong>Prepared By:</strong> ${W.preparedby||""}</td>
              <td style="border: none;"><strong>Approved By:</strong> ${W.approvedby||""}</td>
            </tr>
          </table>
          <div style="margin-top: 20px;">
            <strong>Remarks:</strong> ${W.remarks||""}
          </div>
          <div style="margin-top: 10px;">
            <strong>Payment Terms:</strong> ${W.payTerms||""}
          </div>
          <div style="margin-top: 10px;">
            <strong>Validity Date:</strong> ${W.validityDate||""}
          </div>
        </div>
      </body>
      </html>
    `,te=window.open("","","width=800,height=600");te.document.write(le),te.document.close(),te.print()};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h2",{children:"Sales Order Display"}),n.jsxs("div",{className:"row w-75",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search SO Number, Customer, Category, etc.",value:b,onChange:W=>{y(W.target.value),E(1)}})}),n.jsx("div",{className:"col-md-3",children:n.jsx("input",{type:"date",className:"form-control",placeholder:"From Date",value:S,onChange:W=>{w(W.target.value),E(1)}})}),n.jsx("div",{className:"col-md-3",children:n.jsx("input",{type:"date",className:"form-control",placeholder:"To Date",value:k,onChange:W=>{C(W.target.value),E(1)}})}),n.jsx("div",{className:"col-md-2",children:n.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{y(""),w(""),C(""),E(1)},children:"Reset Filters"})})]})]}),s?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Reference Number"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Delivery Address"}),n.jsx("th",{children:"Final Total"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Y.length>0?Y.map(W=>n.jsxs("tr",{children:[n.jsx("td",{children:W.soNumber}),n.jsx("td",{children:W.date}),n.jsx("td",{children:W.customerName}),n.jsx("td",{children:W.category}),n.jsx("td",{children:W.quotationNumber||"Not Applicable"}),n.jsx("td",{children:W.deliveryLocation}),n.jsx("td",{className:"text-wrap",style:{maxWidth:"200px"},children:W.deliveryAddress}),n.jsxs("td",{children:["",W.finalTotal||0]}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>R(W),title:"Edit",children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>ne(W),title:"Print",children:n.jsx("i",{className:"fas fa-print"})})]})})]},W._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"9",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No sales orders found"})]})})})]})})})}),B>1&&n.jsx("nav",{"aria-label":"Sales Orders pagination",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${_===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Q(_-1),disabled:_===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const re=[],le=[];re.push(1);for(let de=Math.max(2,_-2);de<=Math.min(B-1,_+2);de++)re.push(de);B>1&&re.push(B);const te=[...new Set(re)].sort((de,H)=>de-H);let K;for(let de of te)K&&(de-K===2?le.push(K+1):de-K!==1&&le.push("...")),le.push(de),K=de;return le.map((de,H)=>de==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${H}`):n.jsx("li",{className:`page-item ${_===de?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Q(de),children:de})},de))})(),n.jsx("li",{className:`page-item ${_===B?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Q(_+1),disabled:_===B,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]}),c&&o&&n.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>d(!1),children:n.jsx("div",{className:"modal-dialog modal-xl",onClick:W=>W.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Sales Order - ",o.soNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),n.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"SO Number"}),n.jsx("input",{type:"text",className:"form-control",value:o.soNumber||"",onChange:W=>ie("soNumber",W.target.value),disabled:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.date||"",onChange:W=>ie("date",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Customer Name"}),n.jsx("input",{type:"text",className:"form-control",value:o.customerName||"",onChange:W=>ie("customerName",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Sales Group"}),n.jsx("input",{type:"text",className:"form-control",value:o.salesGroup||"",onChange:W=>ie("salesGroup",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Contact Person"}),n.jsx("input",{type:"text",className:"form-control",value:o.contactPerson||"",onChange:W=>ie("contactPerson",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Reference Number"}),n.jsx("input",{type:"text",className:"form-control",value:o.quotationNumber||"",onChange:W=>ie("quotationNumber",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:o.categoryId||"",onChange:W=>ie("category",W.target.value),children:[n.jsx("option",{value:"",children:"-- Select Category --"}),u.map(W=>n.jsx("option",{value:W._id,children:W.categoryName},W._id))]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Location"}),n.jsx("input",{type:"text",className:"form-control",value:o.deliveryLocation||"",onChange:W=>ie("deliveryLocation",W.target.value)})]})}),n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address"}),n.jsx("textarea",{className:"form-control",rows:"2",value:o.deliveryAddress||"",onChange:W=>ie("deliveryAddress",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Prepared By"}),n.jsx("input",{type:"text",className:"form-control",value:o.preparedby||"",onChange:W=>ie("preparedby",W.target.value)})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Approved By"}),n.jsx("input",{type:"text",className:"form-control",value:o.approvedby||"",onChange:W=>ie("approvedby",W.target.value)})]})}),n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Remarks"}),n.jsx("textarea",{className:"form-control",rows:"2",value:o.remarks||"",onChange:W=>ie("remarks",W.target.value)})]})})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h6",{children:"Items"}),n.jsxs("button",{className:"btn btn-success btn-sm",onClick:z,children:[n.jsx("i",{className:"fas fa-plus"})," Add Item"]})]}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Discount %"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"CGST %"}),n.jsx("th",{children:"SGST %"}),n.jsx("th",{children:"IGST %"}),n.jsx("th",{children:"Subtotal"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:o.items?.map((W,re)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:W.materialId||"",onChange:le=>M(re,"materialId",le.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:W.description||"",onChange:le=>M(re,"description",le.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:W.quantity||0,onChange:le=>M(re,"quantity",parseFloat(le.target.value)||0)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:W.baseUnit||"",onChange:le=>M(re,"baseUnit",le.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:W.price||0,onChange:le=>M(re,"price",parseFloat(le.target.value)||0)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:W.discount||0,onChange:le=>{const te=le.target.value;(te===""||/^[0-9]*\.?[0-9]*$/.test(te))&&M(re,"discount",parseFloat(te)||0)}})}),n.jsx("td",{children:n.jsxs("select",{className:"form-select form-select-sm",value:W.selectedTax?.taxName&&f.find(le=>le.taxName===W.selectedTax.taxName)?._id||"",onChange:le=>M(re,"selectedTax",le.target.value),children:[n.jsx("option",{value:"",children:"Select Tax"}),f.map(le=>n.jsx("option",{value:le._id,children:le.taxName},le._id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:W.cgst||0,onChange:le=>M(re,"cgst",parseFloat(le.target.value)||0),step:"0.01",readOnly:!0,disabled:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:W.sgst||0,onChange:le=>M(re,"sgst",parseFloat(le.target.value)||0),step:"0.01",disabled:!0,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:W.igst||0,onChange:le=>M(re,"igst",parseFloat(le.target.value)||0),step:"0.01",disabled:!0,readOnly:!0})}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-light text-dark",children:["",W.itemSubtotal?.toFixed(2)||0]})}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-primary",children:["",W.itemTotalWithTax?.toFixed(2)||0]})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:W.deliveryDate||"",onChange:le=>M(re,"deliveryDate",le.target.value)})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>ee(re),children:n.jsx("i",{className:"fas fa-trash"})})})]},re))||n.jsx("tr",{children:n.jsx("td",{colSpan:"14",className:"text-center text-muted",children:'No items added. Click "Add Item" to add items.'})})})]})}),n.jsx("div",{className:"row mt-3",children:n.jsx("div",{className:"col-md-6 offset-md-6",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("h6",{className:"card-title",children:"Order Summary"}),n.jsx("table",{className:"table table-sm mb-0",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Subtotal:"}),n.jsxs("td",{className:"text-end",children:["",o.items?.reduce((W,re)=>W+(re.itemSubtotal||0),0).toFixed(2)||0]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"CGST Amount:"}),n.jsxs("td",{className:"text-end",children:["",o.items?.reduce((W,re)=>W+(re.cgstAmount||0),0).toFixed(2)||0]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"SGST Amount:"}),n.jsxs("td",{className:"text-end",children:["",o.items?.reduce((W,re)=>W+(re.sgstAmount||0),0).toFixed(2)||0]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"IGST Amount:"}),n.jsxs("td",{className:"text-end",children:["",o.items?.reduce((W,re)=>W+(re.igstAmount||0),0).toFixed(2)||0]})]}),n.jsxs("tr",{className:"fw-bold border-top",children:[n.jsx("td",{children:"Final Total:"}),n.jsxs("td",{className:"text-end",children:["",o.items?.reduce((W,re)=>W+(re.itemTotalWithTax||0),0).toFixed(2)||0]})]})]})})]})})})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:J,children:"Save Changes"})]})]})})})]})}function L4e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(new Date().toISOString().substring(0,10)),[u,h]=j.useState(new Date().toISOString().substring(0,10)),[f,p]=j.useState([]),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(0),[_,E]=j.useState([]),[T,I]=j.useState(""),[F,A]=j.useState(""),[P,q]=j.useState(!1),[V,Y]=j.useState(""),[B,Q]=j.useState([]),[R,Z]=j.useState(!1),[J,ie]=j.useState(""),[M,z]=j.useState([]),[ee,ne]=j.useState(""),[W,re]=j.useState(""),[le,te]=j.useState([]),[K,de]=j.useState([]),[H,se]=j.useState(""),[be,ue]=j.useState(""),[oe,ge]=j.useState(""),[Ne,Me]=j.useState(""),[We,tt]=j.useState("Full"),[mt,Be]=j.useState("Pending"),[dt,Dt]=j.useState(""),It=localStorage.getItem("selectedCompanyId"),zt=localStorage.getItem("financialYear"),xe=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Ie.get("/api/sales-order-categories",{params:{companyId:It,financialYear:zt}}).then(gt=>t(gt.data)),Ie.get("/api/sales-orders",{params:{companyId:It,financialYear:zt}}).then(gt=>{a(gt.data)}),Ie.get("/api/general-conditions",{params:{companyId:It,financialYear:zt}}).then(gt=>{const Bt=gt.data.filter(he=>!he.isDeleted).map(he=>({_id:he._id,name:he.name,description:he.description}));te(Bt)}),Ie.get("/api/locations",{params:{companyId:It,financialYear:zt}}).then(gt=>p(gt.data)),Ie.get("/api/customers",{params:{companyId:It,financialYear:zt}}).then(gt=>E(gt.data)),w([...Array(4).fill(null).map(()=>({materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}))])},[]);const fe=gt=>{console.log("Selected Sales Order:",gt),l(gt.soNumber),I(gt.customerName||""),g(gt.deliveryLocation||""),y(gt.deliveryAddress||""),ne(gt.salesGroup||""),re(gt.contactPerson||""),de(gt.generalCondition||[]);const Bt=gt.items?.map(he=>({materialId:he.materialId||"",description:he.description||"",orderedQuantity:he.quantity||0,deliveredQuantity:0,pendingQuantity:he.quantity||0,baseUnit:he.baseUnit||"",unit:he.unit||"",orderUnit:he.orderUnit||"",price:he.price||0,priceUnit:he.priceUnit||"",deliveryDate:he.deliveryDate||new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:he.note||"",isPartialDelivery:!1}))||[];w(Bt),Fe(Bt),q(!1)},ve=()=>{q(!1),Y(""),Q([])},pe=(gt,Bt,he)=>{Bt.includes(gt)?he(Bt.filter(Le=>Le!==gt)):he([...Bt,gt])},Te=gt=>{if(ie(gt),gt.trim()){const Bt=_.filter(he=>he.name1?.toLowerCase().includes(gt.toLowerCase())||he.cnNo?.toLowerCase().includes(gt.toLowerCase()));z(Bt)}else z([])},Xe=()=>{z(_)},kt=gt=>{I(gt.name1||gt.customerName),Z(!1),ie(""),z([])},Je=()=>{Z(!1),ie(""),z([])},ze=gt=>{l(gt);const Bt=r.find(he=>he.soNumber===gt);Bt&&fe(Bt)},Fe=gt=>{const Bt=gt.reduce((he,Le)=>he+(Le.deliveredQuantity||0)*(Le.price||0),0);C(Bt.toFixed(2))},Ve=(gt,Bt,he)=>{const Le=[...S];if(Bt==="deliveredQuantity"){const Ae=parseFloat(he)||0,_e=Le[gt].orderedQuantity||0,Ue=Math.max(0,_e-Ae);Le[gt].deliveredQuantity=Ae,Le[gt].pendingQuantity=Ue,Le[gt].isPartialDelivery=Ae<_e&&Ae>0}else Le[gt][Bt]=Bt==="orderedQuantity"||Bt==="price"?parseFloat(he)||0:he;w(Le),Fe(Le)},pt=()=>{w([...S,{materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}])},Pe=gt=>{const Bt=[...S];Bt.splice(gt,1),w(Bt),Fe(Bt)},[Re,Ye]=j.useState(!1),[At,Gt]=j.useState("internal"),[De,Ee]=j.useState(""),[it,Tt]=j.useState(""),lr=async gt=>{if(gt.preventDefault(),!s||!o)return alert("Please select both category and sales order");Ye(!0)},Rt=async(gt=null)=>{const Bt=r.find(Le=>Le.soNumber===o),he={deliveryNumber:F,salesOrderId:Bt?._id,soNumber:o,categoryId:s._id,category:s.categoryName,deliveryDate:c,actualDeliveryDate:u,customerName:T,contactPerson:W,salesGroup:ee,deliveryLocation:v,deliveryAddress:b,transportDetails:H,vehicleNumber:be,driverName:oe,driverPhone:Ne,items:S,deliveryType:We,deliveryStatus:mt,generalCondition:K,remarks:dt,companyId:xe,financialYear:zt,total:parseFloat(k)||0,deliveryNumberType:gt?"external":"internal",customDeliveryNumber:gt};try{console.log("data",he);const Le=await Ie.post("/api/del/salesdeliveries",he);console.log("Saved Delivery:",Le.data),i(null),l(""),d(new Date().toISOString().substring(0,10)),h(new Date().toISOString().substring(0,10)),I(""),g(""),y(""),w([]),C(""),ne(""),re(""),se(""),ue(""),ge(""),Me(""),tt("Full"),Be("Pending"),Dt(""),Ye(!1),Gt("internal"),Ee(""),Tt(""),alert("Sales Delivery Created Successfully with Delivery Number: "+Le.data.deliveryNumber)}catch(Le){console.error("Error during Delivery creation:",Le),alert("Failed to create Sales Delivery")}},sr=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Generate Sales Delivery Number"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Ye(!1),Gt("internal"),Ee("")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Delivery Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Gt("internal"),Rt(null)},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Gt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),At==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom Delivery Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter delivery number (max 50 characters)",value:De,onChange:gt=>Ee(gt.target.value),onKeyPress:gt=>{gt.key==="Enter"&&De.trim()&&Rt(De)},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[De.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>Rt(De),disabled:!De.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save Delivery"]})})]}),At==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"Delivery number will be auto-generated based on category: ",n.jsx("strong",{children:s?.categoryName}),n.jsx("br",{}),n.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]});function pr({show:gt,onClose:Bt,onSelect:he}){const[Le,Ae]=j.useState(""),[_e,Ue]=j.useState([]);j.useEffect(()=>{gt&&Ue(r)},[gt]);const He=xt=>{if(Ae(xt),!xt){Ue(r);return}Ue(r.filter(jt=>jt.soNumber?.toLowerCase().includes(xt.toLowerCase())||jt.customerName?.toLowerCase().includes(xt.toLowerCase())))};return gt?n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Bt})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search SO Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number or customer name...",value:Le,onChange:xt=>He(xt.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:()=>Ue(r),children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:_e.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:_e.map((xt,jt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:xt.soNumber})}),n.jsx("td",{children:xt.customerName}),n.jsx("td",{children:new Date(xt.date).toLocaleDateString()}),n.jsxs("td",{children:["",xt.finalTotal||xt.total]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{he(xt),Bt()},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},jt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Le?`No sales orders found matching "${Le}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Bt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const Nr=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Je})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Customer"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by customer name or code...",value:J,onChange:gt=>Te(gt.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer Code"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:M.map((gt,Bt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:gt.cnNo})}),n.jsx("td",{children:gt.name1}),n.jsx("td",{children:gt.email}),n.jsx("td",{children:gt.address1}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>kt(gt),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Bt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:J?`No customers found matching "${J}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Delivery"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Delivery"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-truck me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Sales Delivery Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Reference:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter SO number",value:o,onChange:gt=>{l(gt.target.value),gt.target.value&&ze(gt.target.value)},required:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>q(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",onChange:gt=>{const Bt=e.find(he=>he._id===gt.target.value);i(Bt)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),e.map(gt=>n.jsx("option",{value:gt._id,children:gt.categoryName},gt._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Number:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:F,readOnly:!0})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c,onChange:gt=>d(gt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Actual Delivery Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:gt=>h(gt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:T,onChange:gt=>I(gt.target.value),placeholder:"Enter customer name"}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Z(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:v,onChange:gt=>g(gt.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),f.map(gt=>n.jsx("option",{value:gt.name||gt.locationName||gt._id,children:gt.name||gt.locationName||gt._id},gt._id||gt.id||gt.name))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:ee,onChange:gt=>ne(gt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:W,onChange:gt=>re(gt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Type:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:We,onChange:gt=>tt(gt.target.value),children:[n.jsx("option",{value:"Full",children:"Full Delivery"}),n.jsx("option",{value:"Partial",children:"Partial Delivery"})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Status:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:mt,onChange:gt=>Be(gt.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:K.length===0?"Select...":`${K.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:le.map(gt=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:K.includes(gt._id),onChange:()=>pe(gt._id,K,de)}),n.jsx("label",{className:"form-check-label ms-1",children:gt.name})]})},gt._id))})]})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTransport",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTransport","aria-controls":"collapseTransport","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-shipping-fast me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Transport Details"})]})]})})})})}),n.jsx("div",{id:"collapseTransport",className:"accordion-collapse collapse","aria-labelledby":"headingTransport","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Transport Details:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("textarea",{className:"form-control form-control-sm",value:H,onChange:gt=>se(gt.target.value),rows:"2",placeholder:"Enter transport company details..."})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Vehicle Number:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:be,onChange:gt=>ue(gt.target.value),placeholder:"Enter vehicle number"})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Driver Name:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:oe,onChange:gt=>ge(gt.target.value),placeholder:"Enter driver name"})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Driver Phone:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:gt=>Me(gt.target.value),placeholder:"Enter driver phone"})})]}),n.jsxs("div",{className:"col-xl-6 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Delivery Address:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control form-control-sm",value:b,onChange:gt=>y(gt.target.value),rows:"3",placeholder:"Enter complete delivery address..."})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Delivery Items"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Ordered Qty"}),n.jsx("th",{children:"Delivered Qty"}),n.jsx("th",{children:"Pending Qty"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Actual Delivery"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:S.map((gt,Bt)=>n.jsxs("tr",{className:gt.isPartialDelivery?"table-warning":"",children:[n.jsx("td",{children:Bt+1}),n.jsx("td",{children:gt.materialId}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:gt.description,onChange:he=>Ve(Bt,"description",he.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.orderedQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.deliveredQuantity,onChange:he=>Ve(Bt,"deliveredQuantity",he.target.value),max:gt.orderedQuantity})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.pendingQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:gt.baseUnit,onChange:he=>Ve(Bt,"baseUnit",he.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.price,onChange:he=>Ve(Bt,"price",he.target.value)})}),n.jsx("td",{children:(gt.deliveredQuantity*gt.price).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:gt.deliveryDate,onChange:he=>Ve(Bt,"deliveryDate",he.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:gt.actualDeliveryDate,onChange:he=>Ve(Bt,"actualDeliveryDate",he.target.value)})}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:gt.note,onChange:he=>Ve(Bt,"note",he.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>Pe(Bt),children:n.jsx("i",{className:"ti ti-trash"})})})]},Bt))})]})}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:pt,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-check me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Delivery Summary"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:lr,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-comment me-2"}),"Remarks"]})}),n.jsx("div",{className:"card-body",children:n.jsx("textarea",{className:"form-control form-control-sm",value:dt,onChange:gt=>Dt(gt.target.value),rows:"4",placeholder:"Enter delivery remarks..."})})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Delivery Summary"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Total Delivered Amount:"}),n.jsxs("strong",{className:"text-success",children:["",k]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Delivery Type:"}),n.jsx("span",{className:`badge ${We==="Full"?"bg-success":"bg-warning"}`,children:We})]}),n.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[n.jsx("span",{children:"Status:"}),n.jsx("span",{className:`badge ${mt==="Delivered"?"bg-success":mt==="In Transit"?"bg-info":mt==="Cancelled"?"bg-danger":"bg-warning"}`,children:mt})]})]})]})})]}),n.jsxs("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:[n.jsx("i",{className:"fas fa-truck me-1"}),"Submit Delivery"]})]})})})})})]})]})}),P&&n.jsx(pr,{show:P,onClose:ve,onSelect:fe}),R&&n.jsx(Nr,{}),Re&&n.jsx(sr,{})]})})}const B4e=()=>{const[e,t]=j.useState({name:"",address:"",pincode:"",country:"",phone:"",email:""}),r=l=>{t(c=>({...c,[l.target.name]:l.target.value}))},[a,s]=j.useState(null),i=l=>{s(l.target.files[0])},o=async l=>{l.preventDefault();const c=new FormData;Object.entries(e).forEach(([d,u])=>{c.append(d,u)}),a&&c.append("logo",a);try{await Ie.post("/api/companies/create",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Company added successfully!"),t({name:"",address:"",pincode:"",country:"",phone:"",email:""}),s(null),document.getElementById("logoInput").value=""}catch(d){alert("Error adding company. Please try again."),console.error("Error:",d)}};return n.jsx("div",{className:"content",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-8 col-lg-6",children:n.jsxs("div",{className:"card shadow",children:[n.jsx("div",{className:"card-header bg-primary text-white",children:n.jsxs("h3",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Create Company"]})}),n.jsx("div",{className:"card-body",children:n.jsx("form",{onSubmit:o,children:n.jsxs("div",{className:"row",children:[[{label:"Company Name",name:"name",icon:"fas fa-building"},{label:"Address",name:"address",icon:"fas fa-map-marker-alt"},{label:"Pincode",name:"pincode",icon:"fas fa-map-pin"},{label:"Country",name:"country",icon:"fas fa-globe"},{label:"Phone",name:"phone",icon:"fas fa-phone"},{label:"Email",name:"email",type:"email",icon:"fas fa-envelope"}].map(({label:l,name:c,type:d="text",icon:u})=>n.jsxs("div",{className:"col-xl-4 mb-3",children:[n.jsxs("label",{htmlFor:c,className:"form-label",children:[n.jsx("i",{className:`${u} me-2`}),l,c==="name"&&n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:d,id:c,name:c,value:e[c],onChange:r,placeholder:`Enter ${l.toLowerCase()}`,className:"form-control",required:c==="name"})]},c)),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"logoInput",className:"form-label",children:[n.jsx("i",{className:"fas fa-image me-2"}),"Company Logo"]}),n.jsx("input",{type:"file",id:"logoInput",accept:"image/*",onChange:i,className:"form-control form-control-sm"}),n.jsx("div",{className:"form-text",children:"Upload your company logo (PNG, JPG, or GIF format)"})]}),n.jsx("div",{className:"d-grid",children:n.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Company"]})})]})})})]})})})})};function U4e(){const[e,t]=j.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:"",gstin:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState({}),[v,g]=j.useState([]),[b,y]=j.useState(!1),[S,w]=j.useState(!1),[k,C]=j.useState(""),[_,E]=j.useState(""),[T,I]=j.useState(!1),F=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","West Bengal","Odisha","Bihar","Jharkhand","Madhya Pradesh","Chhattisgarh","Uttar Pradesh"],A=["India","USA","Germany","France","UK"];j.useEffect(()=>{P(),q()},[]);const P=async()=>{try{const Be=await Ie.get("/api/customer-categories",{params:{companyId:r,financialYear:a}});i(Be.data)}catch(Be){console.error("Error fetching categories:",Be)}},q=async()=>{try{const dt=(await Ie.get("/api/customers",{params:{companyId:r,financialYear:a}})).data.sort((Dt,It)=>new Date(It.createdAt)-new Date(Dt.createdAt));l(dt)}catch(Be){console.error("Error fetching customers:",Be)}},V=Be=>{const{name:dt,value:Dt}=Be.target;dt==="email"&&Dt&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(Dt)?Be.target.setCustomValidity(""):Be.target.setCustomValidity("Please enter a valid email address")),t(It=>({...It,[dt]:Dt})),f[dt]&&p(It=>({...It,[dt]:""}))},Y=()=>{const Be={};return e.categoryId||(Be.categoryId="Category is required."),e.name1.trim()||(Be.name1="Name 1 is required."),e.search.trim()||(Be.search="Search term is required."),e.address1.trim()||(Be.address1="Address 1 is required."),e.region||(Be.region="Region is required."),e.country||(Be.country="Country is required."),e.contactNo.trim()?/^[0-9]{10}$/.test(e.contactNo.trim())||(Be.contactNo="Contact No must be exactly 10 digits."):Be.contactNo="Contact No is required.",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())&&(Be.email="Please enter a valid email address."),e.pincode.trim()&&!/^[0-9]{6}$/.test(e.pincode.trim())&&(Be.pincode="Pincode must be exactly 6 digits."),k==="external"&&!_.trim()&&(Be.externalCustomerId="External Customer ID is required."),k==="external"&&_.length>50&&(Be.externalCustomerId="External Customer ID cannot exceed 50 characters."),p(Be),Object.keys(Be).length===0},B=async Be=>{if(Be.preventDefault(),!Y()){const dt=Object.values(f).filter(Dt=>Dt);alert(dt.join(`
`));return}u?Q():(w(!0),I(!1))},Q=async(Be=k)=>{try{const dt={...e,customerType:Be,companyId:r,financialYear:a,externalCustomerId:Be==="external"?_:null};if(u)await Ie.put(`/api/customers/${u}`,dt),alert("Customer updated successfully!");else{const Dt=await Ie.post("/api/customers",dt);d(Dt.data.cnNo),alert(`Customer saved successfully! CNNo: ${Dt.data.cnNo}`)}q(),R(),I(!1),w(!1)}catch(dt){console.error("Error saving customer:",dt),alert("Error saving customer. Please try again.")}},R=()=>{t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:"",gstin:""}),h(null),p({}),d(""),C(""),E("")},Z=Be=>{t({categoryId:Be.categoryId?._id||"",name1:Be.name1||"",name2:Be.name2||"",search:Be.search||"",address1:Be.address1||"",address2:Be.address2||"",city:Be.city||"",pincode:Be.pincode||"",region:Be.region||"",country:Be.country||"",contactNo:Be.contactNo||"",name:Be.name||"",email:Be.email||"",gstin:Be.gstin||""}),h(Be._id),d(Be.cnNo),C(Be.customerType||"internal"),E(Be.externalCustomerId||""),p({}),I(!0)},J=()=>{w(!1),C(""),E("")},ie=Be=>{C(Be),Be==="internal"&&Q("internal")},M=()=>{if(!_.trim()){alert("Please enter External Customer ID");return}if(_.length>50){alert("External Customer ID cannot exceed 50 characters");return}Q("external")},[z,ee]=j.useState(""),[ne,W]=j.useState(1),re=10,le=o.filter(Be=>{const dt=z.toLowerCase();return Be.cnNo?.toLowerCase().includes(dt)||Be.name1?.toLowerCase().includes(dt)||Be.categoryId?.categoryName?.toLowerCase().includes(dt)||Be.search?.toLowerCase().includes(dt)||Be.address1?.toLowerCase().includes(dt)||Be.city?.toLowerCase().includes(dt)||Be.pincode?.toLowerCase().includes(dt)||Be.region?.toLowerCase().includes(dt)||Be.country?.toLowerCase().includes(dt)||Be.contactNo?.includes(dt)||Be.email?.toLowerCase().includes(dt)}).sort((Be,dt)=>new Date(dt.createdAt)-new Date(Be.createdAt)),te=ne*re,K=te-re,de=le.slice(K,te),H=Math.ceil(le.length/re),se=()=>{I(!1),R()},[be,ue]=j.useState(!1),oe=()=>ue(!1),ge=()=>{const Be=le.map(pe=>({"Customer No":pe.cnNo||"","Name 1":pe.name1||"","Name 2":pe.name2||"",Category:pe.categoryId?.categoryName||"","Search Term":pe.search||"","Address 1":pe.address1||"","Address 2":pe.address2||"","Extra Addresses":pe.extraAddresses?pe.extraAddresses.join(", "):"",City:pe.city||"",Pincode:pe.pincode||"",Region:pe.region||"",Country:pe.country||"","Contact No":pe.contactNo||"",Email:pe.email||"","Contact Person":pe.name||"",GstIN:pe.gstin||"","Customer Type":pe.customerType||"internal","External Customer ID":pe.externalCustomerId||"","Is Deleted":pe.isDeleted?"Yes":"No","Is Blocked":pe.isBlocked?"Yes":"No","Created Date":pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"","Updated Date":pe.updatedAt?new Date(pe.updatedAt).toLocaleDateString():""})),dt=on.book_new(),Dt=on.json_to_sheet(Be),It=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Dt["!cols"]=It,on.book_append_sheet(dt,Dt,"Customers");const zt=new Date,xe=zt.toLocaleDateString("en-GB").replace(/\//g,"-"),fe=zt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ve=`Customer-Master-${xe}-${fe}.xlsx`;sh(dt,ve),oe(),alert(`Excel file exported successfully as: ${ve}`)},Ne=()=>{t(Be=>({...Be,extraAddresses:[...Be.extraAddresses,""]}))},Me=(Be,dt)=>{const Dt=[...e.extraAddresses];Dt[Be]=dt,t(It=>({...It,extraAddresses:Dt}))},We=Be=>{const dt=[...e.extraAddresses];dt.splice(Be,1),t(Dt=>({...Dt,extraAddresses:dt}))},tt=async(Be,dt,Dt)=>{try{const It={[dt]:Dt};await Ie.put(`/api/customers/status/${Be}`,It),l(o.map(zt=>zt._id===Be?{...zt,[dt]:Dt}:zt)),alert("Status updated successfully!")}catch(It){console.error("Error updating status:",It),alert("Failed to update status!")}},mt=Be=>{console.log("Import successful:",Be),q()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search customers...",value:z,onChange:Be=>ee(Be.target.value)})]})})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline-primary btn-sm",children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ge,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsx("a",{onClick:()=>I(!0),className:"btn btn-primary btn-sm",children:"New Customer"})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"CNNo"}),n.jsx("th",{children:"Name 1"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Search"}),n.jsx("th",{children:"Address 1"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Pincode"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact No"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"GSTIN"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:de.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"13",children:"No customers found"})}):de.map(Be=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Be.cnNo}),n.jsx("td",{className:"text-wrap",children:Be.name1}),n.jsx("td",{className:"text-wrap",children:Be.categoryId?.categoryName||"N/A"}),n.jsx("td",{className:"text-wrap",children:Be.search}),n.jsx("td",{className:"text-wrap",children:Be.address1}),n.jsx("td",{className:"text-wrap",children:Be.city}),n.jsx("td",{className:"text-wrap",children:Be.pincode}),n.jsx("td",{className:"text-wrap",children:Be.region}),n.jsx("td",{className:"text-wrap",children:Be.contactNo}),n.jsx("td",{className:"text-wrap",children:Be.email}),n.jsx("td",{className:"text-wrap",children:Be.gstin||"_"}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Be.isDeleted||!1,onChange:dt=>tt(Be._id,"isDeleted",dt.target.checked)})})}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Be.isBlocked||!1,onChange:dt=>tt(Be._id,"isBlocked",dt.target.checked)})})}),n.jsx("td",{children:n.jsx("button",{onClick:()=>Z(Be),className:"btn btn-primary btn-sm",children:"Edit"})})]},Be._id))})]})})})]}),n.jsx("div",{className:"d-flex justify-content-end align-items-center mt-3",children:H>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>W(Be=>Math.max(Be-1,1)),disabled:ne===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const dt=[],Dt=[];dt.push(1);for(let xe=Math.max(2,ne-2);xe<=Math.min(H-1,ne+2);xe++)dt.push(xe);H>1&&dt.push(H);const It=[...new Set(dt)].sort((xe,fe)=>xe-fe);let zt;for(let xe of It)zt&&(xe-zt===2?Dt.push(zt+1):xe-zt!==1&&Dt.push("...")),Dt.push(xe),zt=xe;return Dt.map((xe,fe)=>xe==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${fe}`):n.jsx("li",{className:`page-item ${ne===xe?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>W(xe),children:xe})},xe))})(),n.jsx("li",{className:`page-item ${ne===H?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>W(Be=>Math.min(Be+1,H)),disabled:ne===H,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),S&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Customer Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:J,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the ID:"}),k==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"External Customer ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:_,onChange:Be=>E(Be.target.value),maxLength:50,required:!0,placeholder:"Enter External Customer ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[_.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:M,disabled:!_.trim(),children:"Continue"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>C(""),children:"Back"})]})]}):n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>ie("internal"),children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ie("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]})]})]})})})]}),T&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[u?"Edit Customer":"Add New Customer",k&&n.jsx("span",{className:"badge bg-info ms-2",children:k==="internal"?"Internal":"External"})]}),n.jsx("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:B,children:[k==="external"&&n.jsxs("div",{className:"alert alert-info mb-3",children:[n.jsx("strong",{children:"External Customer ID:"})," ",_]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Category ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",value:e.categoryId,onChange:V,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Category"}),s.map(Be=>n.jsx("option",{value:Be._id,children:Be.categoryName},Be._id))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Name1 ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name1",placeholder:"Enter Name 1",value:e.name1,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name2"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2 (Optional)",value:e.name2,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["SearchTerm ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",value:e.search,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Address1 ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address2"})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:V,className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Ne,children:"+"})})]}),e?.extraAddresses?.map((Be,dt)=>n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:`Address ${dt+3}`})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",placeholder:`Enter Address ${dt+3}`,value:Be,onChange:Dt=>Me(dt,Dt.target.value),className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>We(dt),children:n.jsx("i",{className:"ti ti-x"})})})]},dt)),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"City"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"city",placeholder:"Enter City",value:e.city,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Pincode"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit Pincode",value:e.pincode,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Region ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"region",value:e.region,onChange:V,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Region"}),F.map(Be=>n.jsx("option",{value:Be,children:Be},Be))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Country ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"country",value:e.country,onChange:V,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Country"}),A.map(Be=>n.jsx("option",{value:Be,children:Be},Be))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Contact No ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter 10-digit Contact No",value:e.contactNo,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Email"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"email",name:"email",placeholder:"Enter Email (Optional)",value:e.email,pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name",placeholder:"Enter name (Optional)",value:e.name,onChange:V,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"GSTIN"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"gstin",placeholder:"Enter GSTIN",value:e.gstin,onChange:V,className:"form-control"})})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("button",{type:"submit",className:"btn btn-success",children:u?"Update Customer":"Save Customer"}),u&&n.jsx("button",{type:"button",onClick:R,className:"btn btn-danger ms-2",children:"Cancel"})]})]})})]})})})]}),n.jsx(Nf,{show:b,onClose:()=>y(!1),onImport:mt,masterDataType:"customer",apiEndpoint:"/api/customers/import"})]})}function $4e(){const e="MMNR-",[t,r]=j.useState([]),[a,s]=j.useState(!1),[i,o]=j.useState({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",contactperson:"",contactnumber:"",salesGroup:"",taxId:"",tandc:""}),l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear"),[d,u]=j.useState(1),[h,f]=j.useState([]),[p,v]=j.useState([]),[g,b]=j.useState([]),[y,S]=j.useState([]),[w,k]=j.useState([]),[C,_]=j.useState(!1),[E,T]=j.useState([]),[I,F]=j.useState("materialId"),[A,P]=j.useState(null),[q,V]=j.useState(!1),[Y,B]=j.useState(1),Q=10,[R,Z]=j.useState(""),[J,ie]=j.useState(!1),[M,z]=j.useState([]),[ee,ne]=j.useState("customerId"),[W,re]=j.useState(""),le=Fe=>{s(!1),be()},te=()=>{const Fe=Ne.map(De=>({"Customer Name":De.customerId?.name1||"","Customer ID":De.customerId?.cnNo||"",Category:De.categoryId?.categoryName||"","Material ID":De.materialId?.materialId||"","Material Description":De.materialId?.description||"",Unit:De.unit||"","BUM (Base Unit Measure)":De.bum||"","Contact Person":De.contactperson||"","Contact Number":De.contactnumber||"",Price:De.price||"","Sales Group":De.salesGroup||"","Tax Name":De.taxId?.taxName||"","CGST %":De.taxId?.cgst||"","SGST %":De.taxId?.sgst||"","IGST %":De.taxId?.igst||"","Terms & Conditions":De.tandc||"","Company ID":De.companyId||"","Financial Year":De.financialYear||"","Created Date":De.createdAt?new Date(De.createdAt).toLocaleDateString():"","Updated Date":De.updatedAt?new Date(De.updatedAt).toLocaleDateString():""})),Ve=on.book_new(),pt=on.json_to_sheet(Fe),Pe=[{wch:25},{wch:15},{wch:20},{wch:20},{wch:35},{wch:10},{wch:15},{wch:15},{wch:12},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];pt["!cols"]=Pe,on.book_append_sheet(Ve,pt,"Customer Price List");const Re=new Date,Ye=Re.toLocaleDateString("en-GB").replace(/\//g,"-"),At=Re.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Gt=`Customer-Price-List-${Ye}-${At}.xlsx`;sh(Ve,Gt),alert(`Excel file exported successfully as: ${Gt}`)};j.useEffect(()=>{Ie.get("/api/locations",{params:{companyId:l,financialYear:c}}).then(Fe=>r(Fe.data))},[]),j.useEffect(()=>{K(),de(),H(),se(),be()},[]);const K=async()=>{try{const Fe=await Ie.get("/api/customer-categories",{params:{companyId:l,financialYear:c}});f(Fe.data)}catch(Fe){console.error("Error fetching categories:",Fe),alert("Error loading categories")}},de=async()=>{try{const Fe=await Ie.get("/api/customers",{params:{companyId:l,financialYear:c}});v(Fe.data),console.log("customers",Fe.data)}catch(Fe){console.error("Error fetching customers:",Fe),alert("Error loading customers")}},H=async()=>{try{const Fe=await Ie.get("/api/material",{params:{companyId:l,financialYear:c}});b(Fe.data)}catch(Fe){console.error("Error fetching materials:",Fe),alert("Error loading materials")}},se=async()=>{try{const Fe=await Ie.get("/api/tax",{params:{companyId:l,financialYear:c}});S(Fe.data)}catch(Fe){console.error("Error fetching taxes:",Fe),alert("Error loading taxes")}},be=async()=>{try{const Fe=await Ie.get("/api/customer-price-lists",{params:{companyId:l,financialYear:c}});k(Fe.data)}catch(Fe){console.error("Error fetching price lists:",Fe),alert("Error loading price lists")}},ue=async Fe=>{const{name:Ve,value:pt}=Fe.target;let Pe={...i,[Ve]:pt};if(Ve==="materialId")try{const Ye=(await Ie.get(`/api/material/${pt}`)).data.conversionValue||1;u(Ye)}catch(Re){console.error("Error fetching material conversion:",Re),u(1)}o(Pe)},oe=async Fe=>{Fe.preventDefault();const Ve={...i,companyId:l,financialYear:c};try{i._id?(await Ie.put(`/api/customer-price-lists/${i._id}`,Ve),alert("Updated successfully")):(await Ie.post("/api/customer-price-lists",Ve),alert("Saved successfully")),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",contactperson:"",contactnumber:"",salesGroup:"",taxId:"",tandc:""}),u(1),Be(),be()}catch(pt){alert("Error saving data"),console.error("Submit error:",pt)}},ge=Fe=>{const Ve=De=>De?typeof De=="object"&&De._id?De._id:typeof De=="string"?De:"":"",pt=Ve(Fe.categoryId),Pe=Ve(Fe.customerId),Re=Ve(Fe.materialId),Ye=Ve(Fe.taxId),At=Ve(Fe.tandc),Gt={_id:Fe._id,categoryId:pt,customerId:Pe,materialId:Re,unit:Fe.unit||"",bum:Fe.bum||"",contactperson:Fe.contactperson||"",contactnumber:Fe.contactnumber||"",salesGroup:Fe.salesGroup||"",taxId:Ye,tandc:At,price:Fe.price||""};o(Gt),V(!0),Re&&Ie.get(`/api/material/${Re}`).then(De=>{const Ee=De.data.conversionValue||1;u(Ee),console.log("Conversion value set to:",Ee)}).catch(De=>{console.error("Error fetching material conversion:",De),u(1)})},Ne=w.filter(Fe=>{const Ve=Fe.customerId?.name1?.toLowerCase()||"",pt=Fe.categoryId?.categoryName?.toLowerCase()||"",Pe=Fe.materialId?.description?.toLowerCase()||"";return Ve.includes(R.toLowerCase())||pt.includes(R.toLowerCase())||Pe.includes(R.toLowerCase())}),Me=Ne.slice((Y-1)*Q,Y*Q),We=Math.ceil(Ne.length/Q),tt=Fe=>{Fe>=1&&Fe<=We&&B(Fe)},mt=()=>V(!0),Be=()=>{V(!1),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",contactperson:"",contactnumber:"",price:"",salesGroup:"",taxId:"",tandc:""})},dt=()=>{P(null),_(!0),T([])},Dt=()=>{_(!1),P(null),T([])},It=Fe=>{console.log("Selected material:",Fe),o(Ve=>({...Ve,materialId:Fe._id,bum:Fe.baseUnit})),Dt()},zt=()=>{const Fe=R.trim();if(!Fe){T([]);return}if(console.log("Searching with query:",Fe,"Type:",I),console.log("Available materials:",g),I==="materialId"){let Ve=Fe;/^\d+$/.test(Fe)&&(Ve=e+Fe);const pt=g.filter(Pe=>(Pe.materialId||"").toLowerCase().includes(Ve.toLowerCase()));console.log("Filtered results for materialId:",pt),T(pt)}else{const Ve=g.filter(pt=>(pt.description||"").toLowerCase().includes(Fe.toLowerCase()));console.log("Filtered results for description:",Ve),T(Ve)}};j.useEffect(()=>{const Fe=setTimeout(()=>{R.trim()?zt():T([])},300);return()=>clearTimeout(Fe)},[R,I]);const xe=()=>{T(g),Z("")},fe=()=>{T([]),Z("")},ve=()=>{ie(!0),re(""),z([])},pe=()=>{ie(!1),re(""),z([])},Te=Fe=>{const Ve=Fe.target.value;re(Ve)},Xe=()=>{if(!W.trim()){z([]);return}if(ee==="customerId"){const Fe=p.filter(Ve=>(Ve.customerId||"").toLowerCase().includes(W.toLowerCase()));z(Fe)}else{const Fe=p.filter(Ve=>(Ve.name1||"").toLowerCase().includes(W.toLowerCase()));z(Fe)}},kt=()=>{z(p),re("")},Je=()=>{z([]),re("")},ze=Fe=>{ue({target:{name:"customerId",value:Fe._id}}),pe()};return j.useEffect(()=>{const Fe=setTimeout(()=>{W.trim()?Xe():z([])},300);return()=>clearTimeout(Fe)},[W,ee]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Price List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Price List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:R,onChange:Fe=>Z(Fe.target.value)})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsx("div",{children:n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>s(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]})}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:te,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsx("div",{children:n.jsxs("a",{onClick:mt,className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Customer Price List"]})})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Material"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"BUM"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Contact Number"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Me.map(Fe=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("div",{className:"d-flex align-items-center",children:n.jsx("div",{children:n.jsx("h6",{className:"fs-14 fw-medium mb-0",children:n.jsx("a",{href:"#",children:Fe.customerId?.name1})})})})}),n.jsx("td",{children:Fe.categoryId?.categoryName}),n.jsx("td",{children:Fe.materialId?.description}),n.jsx("td",{className:"text-dark",children:Fe.unit}),n.jsx("td",{className:"text-dark",children:Fe.bum}),n.jsx("td",{className:"text-dark",children:Fe.contactperson}),n.jsx("td",{className:"text-dark",children:Fe.contactnumber}),n.jsxs("td",{className:"text-dark",children:["Rs",Fe.price]})," ",n.jsx("td",{className:"text-dark",children:Fe.salesGroup}),n.jsx("td",{className:"text-dark",children:Fe.taxId?.taxName}),n.jsx("td",{style:{cursor:"pointer"},children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{ge(Fe)},children:"Edit"})})]},Fe._id))})]})})]}),We>1&&n.jsx("nav",{"aria-label":"Page navigation",className:"",children:n.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[n.jsx("li",{className:`page-item ${Y===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Fe=>{Fe.preventDefault(),Y>1&&tt(Y-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Fe=[];if(We<=5)for(let pt=1;pt<=We;pt++)Fe.push(n.jsx("li",{className:`page-item ${Y===pt?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Pe=>{Pe.preventDefault(),tt(pt)},children:pt})},pt));else{Fe.push(n.jsx("li",{className:`page-item ${Y===1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Re=>{Re.preventDefault(),tt(1)},children:"1"})},1)),Y>3&&Fe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"ellipsis1"));const pt=Math.max(2,Y-1),Pe=Math.min(We-1,Y+1);for(let Re=pt;Re<=Pe;Re++)Re!==1&&Re!==We&&Fe.push(n.jsx("li",{className:`page-item ${Y===Re?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ye=>{Ye.preventDefault(),tt(Re)},children:Re})},Re));Y<We-2&&Fe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"ellipsis2")),We>1&&Fe.push(n.jsx("li",{className:`page-item ${Y===We?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Re=>{Re.preventDefault(),tt(We)},children:We})},We))}return Fe})(),n.jsx("li",{className:`page-item ${Y===We?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Fe=>{Fe.preventDefault(),Y<We&&tt(Y+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),q&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:"Customer Price List"}),n.jsx("button",{type:"button",className:"btn-close",onClick:Be,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:oe,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),h.map(Fe=>n.jsx("option",{value:Fe._id,children:Fe.categoryName},Fe._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsx("input",{name:"customerId",className:"form-control me-2",value:p.find(Fe=>Fe._id===i.customerId)?.name1,onChange:ue,required:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Customer",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:i.unit,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),t.map(Fe=>n.jsx("option",{value:Fe.name,children:Fe.name},Fe.name))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Material:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsx("input",{name:"materialId",className:"form-control me-2",value:g.find(Fe=>Fe._id===i.materialId)?.description||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:dt,title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Base Unit:"})}),n.jsx("div",{className:"col-4",children:n.jsx("input",{type:"text",name:"bum",className:"form-control",placeholder:"Enter BUM",value:i.bum,onChange:Fe=>{Fe.target.value=Fe.target.value.replace(/[^0-9.]/g,""),ue(Fe)},required:!0})}),n.jsx("h5",{className:"col-3 mt-1",children:g.find(Fe=>Fe._id===i.materialId)?.baseUnit})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Price:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"price",className:"form-control",placeholder:"Enter price",value:i.price,onChange:Fe=>{Fe.target.value=Fe.target.value.replace(/[^0-9.]/g,""),ue(Fe)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactperson",className:"form-control",placeholder:"Enter Order Unit",value:i.contactperson,onChange:Fe=>{ue(Fe)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Number:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactnumber",className:"form-control",placeholder:"Enter Order Unit",value:i.contactnumber,onChange:Fe=>{Fe.target.value=Fe.target.value.replace(/[^0-9.]/g,""),ue(Fe)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"salesGroup",className:"form-control",placeholder:"Enter Sales Group",value:i.salesGroup,onChange:ue,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"taxId",className:"form-select",value:i.taxId,onChange:ue,children:[n.jsx("option",{value:"",children:"Select"}),y.map(Fe=>n.jsxs("option",{value:Fe._id,children:[Fe.taxName," (CGST: ",Fe.cgst,"%, SGST: ",Fe.sgst,"%, IGST: ",Fe.igst,"%)"]},Fe._id))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Be,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:i._id?"Update":"Save"})]})]})})]})})})]}),C&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Dt})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:Fe=>F(Fe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:I==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:R,onChange:Fe=>Z(Fe.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:xe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),E.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:fe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:E.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:E.map((Fe,Ve)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Fe.materialId}),n.jsx("td",{className:"text-wrap",children:Fe.description}),n.jsx("td",{className:"text-wrap",children:Fe.baseUnit}),n.jsx("td",{className:"text-wrap",children:Fe.location}),n.jsx("td",{className:"text-wrap",children:Fe.materialgroup}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>It(Fe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ve))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:g.length===0?"No materials loaded from API":R?`No materials found matching "${R}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Dt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),J&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customers"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ee,onChange:Fe=>ne(Fe.target.value),children:[n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"name",children:"Customer Name"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:ee==="customerId"?"Enter Customer ID...":"Search by Customer Name...",value:W,onChange:Te})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:kt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),M.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:M.map((Fe,Ve)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Fe.cnNo}),n.jsx("td",{className:"text-wrap",children:Fe.name1}),n.jsx("td",{className:"text-wrap",children:Fe.city}),n.jsx("td",{className:"text-wrap",children:Fe.email}),n.jsx("td",{className:"text-wrap",children:Fe.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ze(Fe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ve))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:p.length===0?"No customers loaded from API":W?`No customers found matching "${W}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx(Nf,{show:a,onClose:()=>s(!1),onImportSuccess:le,masterDataType:"customerPriceList"})]})}const Lb={code:"",name:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactNumber:""},V4e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(Lb),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[v,g]=j.useState(""),b=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),I()},y=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase();return B.code?.toLowerCase().includes(Q)||B.name?.toLowerCase().includes(Q)||B.address?.toLowerCase().includes(Q)||B.city?.toLowerCase().includes(Q)||B.state?.toLowerCase().includes(Q)||B.country?.toLowerCase().includes(Q)||B.postalCode?.toLowerCase().includes(Q)||B.contactPerson?.toLowerCase().includes(Q)||B.contactNumber?.toLowerCase().includes(Q)}),S=Math.ceil(y.length/f),w=(u-1)*f,k=w+f,C=y.slice(w,k),_=B=>{g(B.target.value),h(1)},E=B=>{h(B)},T=()=>{const Q=(v?y:e).map((re,le)=>({"S.No":le+1,"Location Name":re.name||"",Address:re.address||"",City:re.city||"",State:re.state||"",Country:re.country||"","Postal Code":re.postalCode||"","Contact Person":re.contactPerson||"","Contact Number":re.contactNumber||"","Company ID":re.companyId||"","Financial Year":re.financialYear||"","Created Date":re.createdAt?new Date(re.createdAt).toLocaleDateString():"","Updated Date":re.updatedAt?new Date(re.updatedAt).toLocaleDateString():""})),R=on.book_new(),Z=on.json_to_sheet(Q),J=[{wch:8},{wch:25},{wch:40},{wch:20},{wch:20},{wch:15},{wch:12},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];Z["!cols"]=J,on.book_append_sheet(R,Z,"Location Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),z=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ne=`Location-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${z}.xlsx`;sh(R,ne);const W=v?y.length:e.length;alert(`Excel file exported successfully: ${W} records exported as ${ne}`)},I=async()=>{try{const B=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear"),R=await Ie.get("/api/locations",{params:{companyId:B,financialYear:Q}});t(R.data),h(1)}catch(B){console.error("Error fetching locations:",B),alert("Error loading locations")}};j.useEffect(()=>{I()},[]);const F=B=>{a({...r,[B.target.name]:B.target.value})},A=async B=>{B.preventDefault(),console.log(r);try{const Q=localStorage.getItem("selectedCompanyId"),R=localStorage.getItem("financialYear"),Z={...r,companyId:Q,financialYear:R};o?(await Ie.put(`/api/locations/${o}`,Z),alert("Location updated successfully!")):(await Ie.post("/api/locations",Z),alert("Location created successfully!")),a(Lb),l(null),i(!1),I()}catch(Q){console.error("Error saving location:",Q),alert("Error saving location. Please try again.")}},P=B=>{a({name:B.name||"",address:B.address||"",city:B.city||"",state:B.state||"",country:B.country||"",postalCode:B.postalCode||"",contactPerson:B.contactPerson||"",contactNumber:B.contactNumber||""}),l(B._id),i(!0)},q=()=>{a(Lb),l(null),i(!0)},V=()=>{i(!1),a(Lb),l(null)},Y=B=>({code:"Location Code",name:"Location Name",address:"Address",city:"City",state:"State",country:"Country",postalCode:"Postal Code",contactPerson:"Contact Person",contactNumber:"Contact Number"})[B]||B.charAt(0).toUpperCase()+B.slice(1);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Location Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Location Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search locations...",value:v,onChange:_})]})}),n.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>d(!0),className:"btn btn-outline-primary btn-sm",children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:T,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&n.jsx("span",{className:"badge bg-primary ms-1",children:y.length})]}),n.jsx("div",{children:n.jsxs("button",{onClick:q,className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Location"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Location Code"}),n.jsx("th",{children:"Location Name"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"State"}),n.jsx("th",{children:"Country"}),n.jsx("th",{children:"Postal Code"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Contact Number"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:C.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"10",className:"text-center",children:v?"No locations found matching your search criteria":"No locations found"})}):C.map((B,Q)=>n.jsxs("tr",{children:[n.jsx("td",{children:w+Q+1}),n.jsx("td",{children:B.code}),n.jsx("td",{children:n.jsx("strong",{children:B.name})}),n.jsx("td",{children:B.address}),n.jsx("td",{children:B.city}),n.jsx("td",{children:B.state}),n.jsx("td",{children:B.country}),n.jsx("td",{children:B.postalCode}),n.jsx("td",{children:B.contactPerson}),n.jsx("td",{children:B.contactNumber}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>P(B),children:"Edit"})})]},B._id))})]})})})]}),S>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&E(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:S},(B,Q)=>n.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:R=>{R.preventDefault(),E(Q+1)},children:Q+1})},Q)),n.jsx("li",{className:`page-item ${u===S?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<S&&E(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),n.jsx(Nf,{show:c,onClose:()=>d(!1),onImportSuccess:b,masterDataType:"location"}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:o?"Edit Location":"Add New Location"}),n.jsx("button",{type:"button",className:"btn-close",onClick:V})]}),n.jsxs("form",{onSubmit:A,children:[n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"row",children:Object.keys(Lb).map(B=>n.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-md-3":"col-md-4"} mb-3`,children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-5":"col-4"}`,children:n.jsx("label",{className:"form-label",children:Y(B)})}),n.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-7":"col-8"} `,children:n.jsx("input",{type:B==="contactNumber"?"tel":"text",name:B,className:"form-control",placeholder:`Enter ${Y(B)}`,value:r[B],onChange:F,required:B==="name"})})]})},B))})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:V,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Location":"Create Location"})]})]})]})})})]})]})},q4e=()=>{const[e,t]=j.useState({}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=j.useState(1),[f,p]=j.useState(10),[v,g]=j.useState("");j.useEffect(()=>{w()},[]);const[b,y]=j.useState({taxCode:"",taxName:"",cgst:"",sgst:"",igst:"",companyId:c,financialYear:d}),S=ie=>{alert(`Import completed: ${ie.results.imported} records imported`),l(!1),w()},w=async()=>{const ie=await Ie.get("/api/tax",{params:{companyId:c,financialYear:d}});a(ie.data),h(1)},k=r.filter(ie=>{if(!v)return!0;const M=v.toLowerCase();return ie.taxCode?.toLowerCase().includes(M)||ie.taxName?.toLowerCase().includes(M)||ie.cgst?.toString().includes(M)||ie.sgst?.toString().includes(M)||ie.igst?.toString().includes(M)||((parseFloat(ie.cgst)||0)+(parseFloat(ie.sgst)||0)+(parseFloat(ie.igst)||0)).toString().includes(M)}),C=Math.ceil(k.length/f),_=(u-1)*f,E=_+f,T=k.slice(_,E),I=ie=>{g(ie.target.value),h(1)},F=ie=>{h(ie)},A=()=>{const M=(v?k:r).map(H=>({"Tax Code":H.taxCode||"","Tax Name":H.taxName||"","CGST %":H.cgst||"","SGST %":H.sgst||"","IGST %":H.igst||"","Total Tax %":(parseFloat(H.cgst)||0)+(parseFloat(H.sgst)||0)+(parseFloat(H.igst)||0),"Tax Type":parseFloat(H.igst)>0?"IGST":"CGST + SGST","Created Date":H.createdAt?new Date(H.createdAt).toLocaleDateString():"","Updated Date":H.updatedAt?new Date(H.updatedAt).toLocaleDateString():""})),z=on.book_new(),ee=on.json_to_sheet(M),ne=[{wch:12},{wch:25},{wch:10},{wch:10},{wch:10},{wch:12},{wch:15},{wch:15},{wch:15}];ee["!cols"]=ne,on.book_append_sheet(z,ee,"Tax Master");const W=new Date,re=W.toLocaleDateString("en-GB").replace(/\//g,"-"),le=W.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),K=`Tax-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${re}-${le}.xlsx`;sh(z,K);const de=v?k.length:r.length;alert(`Excel file exported successfully: ${de} records exported as ${K}`)},P=(ie,M)=>{switch(ie){case"taxCode":if(!M)return"Required";if(M.length>4)return"Max 4 characters";break;case"taxName":if(!M)return"Required";if(M.length>25)return"Max 25 characters";break;case"cgst":case"sgst":if(!b.igst&&!M)return"Required";if(!b.igst&&M.length>4)return"Max 4 digits";break;case"igst":if(!b.sgst&&!b.cgst&&!M)return"Required";if(!b.sgst&&!b.cgst&&M.length>4)return"Max 4 digits";break;default:return""}return""},q=ie=>{const{name:M,value:z}=ie.target;let ee=z;switch(M){case"taxCode":ee=z.replace(/[^A-Za-z0-9.]/g,"").slice(0,4);break;case"taxName":ee=z.slice(0,25);break;case"cgst":case"sgst":case"igst":ee=z.replace(/[^0-9.]/g,"").slice(0,4),ee=ee<=100?ee:"100";break}const ne=P(M,ee);y({...b,[M]:ee}),t({...e,[M]:ne})},V=()=>{y({taxCode:"",taxName:"",cgst:"",sgst:"",igst:""}),t({}),i(null)},Y=async ie=>{ie.preventDefault();const M={};if(Object.entries(b).forEach(([ee,ne])=>{const W=P(ee,ne);W&&(M[ee]=W)}),Object.keys(M).length>0){t(M);return}const z={...b,companyId:c,financialYear:d};try{s?(await Ie.put(`/api/tax/${s}`,z),alert("Tax updated!")):(await Ie.post("/api/tax",z),alert("Tax added!")),V(),w(),J()}catch(ee){console.error(ee),alert("Failed to save")}},B=ie=>{y({taxCode:ie.taxCode,taxName:ie.taxName,cgst:ie.cgst,sgst:ie.sgst,igst:ie.igst}),i(ie._id)},[Q,R]=j.useState(!1),Z=()=>R(!0),J=()=>{R(!1),s||V()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Taxes Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Taxes Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code, name, or percentage...",value:v,onChange:I})]})}),n.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>l(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:A,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export",v&&n.jsx("span",{className:"badge bg-primary ms-1",children:k.length})]}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{V(),Z()},className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Tax"]})})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"header-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"CGST %"}),n.jsx("th",{children:"UGST / SGST %"}),n.jsx("th",{children:"IGST %"}),n.jsx("th",{children:"Total %"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:T.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:v?"No taxes found matching your search criteria":"No taxes found"})}):T.map(ie=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:ie.taxCode})}),n.jsx("td",{children:ie.taxName}),n.jsxs("td",{className:"text-center",children:[ie.cgst||0,"%"]}),n.jsxs("td",{className:"text-center",children:[ie.sgst||0,"%"]}),n.jsxs("td",{className:"text-center",children:[ie.igst||0,"%"]}),n.jsx("td",{className:"text-center",children:n.jsxs("strong",{children:[((parseFloat(ie.cgst)||0)+(parseFloat(ie.sgst)||0)+(parseFloat(ie.igst)||0)).toFixed(2),"%"]})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{B(ie),Z()},children:"Edit"})})]},ie._id))})]})}),C>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsxs("div",{className:"text-muted",children:["Page ",u," of ",C]}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ie=>{ie.preventDefault(),u>1&&F(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:C},(ie,M)=>n.jsx("li",{className:`page-item ${u===M+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:z=>{z.preventDefault(),F(M+1)},children:M+1})},M)),n.jsx("li",{className:`page-item ${u===C?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ie=>{ie.preventDefault(),u<C&&F(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})]})]}),Q&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," Tax Code"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:J,"aria-label":"Close"})]}),n.jsxs("form",{onSubmit:Y,children:[n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"row",children:["taxCode","taxName","cgst","sgst","igst"].map(ie=>n.jsx("div",{className:` ${ie==="taxName"?"col-md-4":"col-md-2"} mb-3`,children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:`${ie==="taxName"?"col-3":"col-6"}`,children:n.jsx("label",{className:"form-label ",children:ie==="taxCode"?"Tax Code":ie==="taxName"?"Tax Name":ie==="sgst"?"SGST/UGST%":`${ie.toUpperCase()}%`})}),n.jsxs("div",{className:`${ie==="taxName"?"col-9":"col-6"}`,children:[n.jsx("input",{type:"text",name:ie,value:b[ie],onChange:q,className:`form-control ${e[ie]?"is-invalid":""}`,placeholder:ie==="taxCode"?"Enter tax code (max 4 chars)":ie==="taxName"?"Enter tax name (max 25 chars)":"Enter percentage (max 2 digits)"}),e[ie]&&n.jsx("div",{className:"invalid-feedback",children:e[ie]})]})]})},ie))})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:J,children:"Cancel"}),n.jsx("button",{className:"btn btn-primary",type:"submit",children:s?"Update Tax":"Save Tax"})]})]})]})})})]}),n.jsx(Nf,{show:o,onClose:()=>l(!1),onImportSuccess:S,masterDataType:"tax"})]})};function z4e(){const[e,t]=j.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:"",gstin:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState([]),[v,g]=j.useState(!1),[b,y]=j.useState(!1),[S,w]=j.useState("internal"),[k,C]=j.useState(""),[_,E]=j.useState(""),T=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","Maharashtra","Gujarat","Rajasthan","Punjab","Haryana"],I=["India","USA","Germany","France","UK"],[F,A]=j.useState(!1),[P,q]=j.useState(1),[V,Y]=j.useState(""),B=10;j.useEffect(()=>{Q(),R()},[]),j.useEffect(()=>{q(1)},[V]);const Q=async()=>{const ue=await Ie.get("/api/vendor-categories",{params:{companyId:r,financialYear:a}});i(ue.data)},R=async()=>{const oe=(await Ie.get("/api/vendors",{params:{companyId:r,financialYear:a}})).data.sort((ge,Ne)=>new Date(Ne.createdAt)-new Date(ge.createdAt));l(oe)},Z=o.filter(ue=>{const oe=ue.vnNo?.toLowerCase()||"",ge=ue.name1?.toLowerCase()||"",Ne=ue.categoryId?.categoryName?.toLowerCase()||"",Me=V.toLowerCase();return oe.includes(Me)||ge.includes(Me)||Ne.includes(Me)}),J=Math.ceil(Z.length/B),ie=P*B,M=ie-B,z=Z.slice(M,ie),ee=ue=>{ue>=1&&ue<=J&&q(ue)},ne=ue=>{const{name:oe,value:ge}=ue.target;oe==="email"&&ge&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(ge)?ue.target.setCustomValidity(""):ue.target.setCustomValidity("Please enter a valid email address")),t(Ne=>({...Ne,[oe]:ge}))},W=()=>{const ue=Z.map(Be=>({"Vendor No":Be.vnNo||"","Name 1":Be.name1||"","Name 2":Be.name2||"",Category:Be.categoryId?.categoryName||"","Search Term":Be.search||"","Address 1":Be.address1||"","Address 2":Be.address2||"","Extra Addresses":Be.extraAddresses?Be.extraAddresses.join(", "):"",City:Be.city||"",Pincode:Be.pincode||"",Region:Be.region||"",Country:Be.country||"","Contact No":Be.contactNo||"","Contact Person":Be.contactname||"",Email:Be.email||"",GSTIN:Be.gstin||"","Vendor Type":Be.vendorIdType||"internal","External Vendor ID":Be.externalVendorId||"","Is Deleted":Be.isDeleted?"Yes":"No","Is Blocked":Be.isBlocked?"Yes":"No","Created Date":Be.createdAt?new Date(Be.createdAt).toLocaleDateString():"","Updated Date":Be.updatedAt?new Date(Be.updatedAt).toLocaleDateString():""})),oe=on.book_new(),ge=on.json_to_sheet(ue),Ne=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:25},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];ge["!cols"]=Ne,on.book_append_sheet(oe,ge,"Vendors");const Me=new Date,We=Me.toLocaleDateString("en-GB").replace(/\//g,"-"),tt=Me.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),mt=`Vendor-Master-${We}-${tt}.xlsx`;sh(oe,mt),alert(`Excel file exported successfully as: ${mt}`)},re=async()=>{try{const ue={...e,companyId:r,financialYear:a,vendorIdType:S,externalVendorId:S==="external"?k:null};if(u)await Ie.put(`/api/vendors/${u}`,ue),alert("Vendor updated!");else{const oe=await Ie.post("/api/vendors",ue);d(oe.data.vnNo),alert(`Vendor saved! VNNo: ${oe.data.vnNo}`)}R(),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:"",gstin:""}),h(null),y(!1),A(!1),C(""),w("internal")}catch(ue){console.error(ue),alert("Error saving vendor")}},le=async ue=>{if(ue.preventDefault(),!e.categoryId||!e.name1){alert("Please fill in required fields");return}u?re():y(!0)},te=ue=>{t({categoryId:ue.categoryId?._id,name1:ue.name1,name2:ue.name2,search:ue.search,address1:ue.address1,address2:ue.address2,city:ue.city,pincode:ue.pincode,region:ue.region,country:ue.country,contactNo:ue.contactNo,contactname:ue.contactname,email:ue.email,gstin:ue.gstin}),h(ue._id),d(ue.vnNo),A(!0)},K=()=>{t(ue=>({...ue,extraAddresses:[...ue.extraAddresses,""]}))},de=(ue,oe)=>{const ge=[...e.extraAddresses];ge[ue]=oe,t(Ne=>({...Ne,extraAddresses:ge}))},H=ue=>{const oe=[...e.extraAddresses];oe.splice(ue,1),t(ge=>({...ge,extraAddresses:oe}))},se=async(ue,oe,ge)=>{try{const Ne=await Ie.put(`/api/vendors/status/${ue}`,{[oe]:ge});l(Me=>Me.map(We=>We._id===ue?{...We,[oe]:ge}:We)),alert(`${oe} updated successfully!`)}catch(Ne){console.error(Ne),alert("Failed to update vendor status")}},be=ue=>{alert(`Import completed: ${ue.results.imported} records imported`),g(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb ",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search Vendors...",value:V,onChange:ue=>Y(ue.target.value)})]})})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>g(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:W,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{href:"#",className:"btn btn-primary btn-sm",onClick:()=>{A(!0),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:"",gstin:""}),h(null)},children:[n.jsx("i",{className:"ti ti-add-circle5 me-1"}),"New Vendor"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"VNNo"}),n.jsx("th",{children:"Name1"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Search"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"GSTIN"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:z.length>0?z.map(ue=>n.jsxs("tr",{children:[n.jsx("td",{children:ue.vnNo}),n.jsx("td",{className:"text-wrap",children:ue.name1}),n.jsx("td",{children:ue.categoryId?.categoryName}),n.jsx("td",{className:"text-wrap",children:ue.contactNo}),n.jsx("td",{className:"text-wrap",children:ue.email}),n.jsx("td",{className:"text-wrap",children:ue.search}),n.jsx("td",{className:"text-wrap",children:ue.address1}),n.jsx("td",{className:"text-wrap",children:ue.city}),n.jsx("td",{className:"text-wrap",children:ue.gstin||"_"}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:ue.isDeleted||!1,onChange:oe=>se(ue._id,"isDeleted",oe.target.checked)})}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:ue.isBlocked||!1,onChange:oe=>se(ue._id,"isBlocked",oe.target.checked)})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>te(ue),children:"Edit"})})]},ue._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"11",className:"text-center text-muted py-4",children:V?"No vendors found matching your search criteria":"No vendors available"})})})]})})})]}),Z.length>0&&J>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${P===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ue=>{ue.preventDefault(),ee(P-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const oe=[],ge=[];oe.push(1);for(let We=Math.max(2,P-2);We<=Math.min(J-1,P+2);We++)oe.push(We);J>1&&oe.push(J);const Ne=[...new Set(oe)].sort((We,tt)=>We-tt);let Me;for(let We of Ne)Me&&(We-Me===2?ge.push(Me+1):We-Me!==1&&ge.push("...")),ge.push(We),Me=We;return ge.map((We,tt)=>We==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${tt}`):n.jsx("li",{className:`page-item ${P===We?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:mt=>{mt.preventDefault(),ee(We)},children:We})},We))})(),n.jsx("li",{className:`page-item ${P===J?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ue=>{ue.preventDefault(),ee(P+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),F&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:u?"Edit Vendor":"Add New Vendor"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal",onClick:()=>A(!1),children:n.jsx("i",{className:"fa-solid fa-x"})})]}),n.jsxs("form",{onSubmit:le,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:ne,required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),s.map(ue=>n.jsx("option",{value:ue._id,children:ue.categoryName},ue._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name1:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name1",className:"form-control",placeholder:"Enter Name 1",value:e.name1,onChange:ne,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name2:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2",className:"form-control",value:e.name2,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Search Term:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",className:"form-control",value:e.search,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address1:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:ne,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address2:"})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:ne,className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:K,children:"+"})})]})}),e.extraAddresses?.map((ue,oe)=>n.jsx("div",{className:"col-md-4 mb-2 position-relative",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:[`Address${oe+3}`,":"]})}),n.jsxs("div",{className:"col-8 d-flex align-items-center",children:[n.jsx("input",{type:"text",placeholder:`Enter Address ${oe+3}`,value:ue,onChange:ge=>de(oe,ge.target.value),className:"form-control me-2"}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>H(oe),children:n.jsx("i",{className:"ti ti-x"})})]})]})},oe)),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"City:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"city",placeholder:"Enter City",className:"form-control",value:e.city,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Pincode:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"pincode",placeholder:"Enter Pincode",className:"form-control",value:e.pincode,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Region:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"region",className:"form-select",placeholder:"Select Region",value:e.region,onChange:ne,children:[n.jsx("option",{value:"",children:"Select Region"}),T.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Country:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"country",className:"form-select",value:e.country,onChange:ne,children:[n.jsx("option",{value:"",children:"Select Country"}),I.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"ContactNo:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter Contact No",className:"form-control",value:e.contactNo,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactname",placeholder:"Enter Contact Person Name",className:"form-control",value:e.contactname,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Email:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",className:"form-control",value:e.email,onChange:ne})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"GSTIN:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"gstin",placeholder:"Enter GSTIN",title:"Please enter a valid GSTIN",className:"form-control",value:e.gstin,onChange:ne})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>A(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Save"})]})]})]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Vendor ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(!1),E(""),C(""),w("internal")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Vendor ID:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-outline-primary btn-md",onClick:()=>{w("internal"),re()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-md",onClick:()=>w("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),S==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"External Vendor ID"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Vendor ID (max 50 characters)",value:k,onChange:ue=>{ue.target.value.length<=50&&(C(ue.target.value),E(""))},onKeyPress:ue=>{ue.key==="Enter"&&k&&re()},maxLength:50}),n.jsxs("div",{className:"form-text",children:[k.length,"/50 characters"]}),_&&n.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:_}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"btn btn-primary",onClick:re,disabled:!k,children:"Confirm & Save Vendor"})})]})]})]})})})]}),n.jsx(Nf,{show:v,onClose:()=>g(!1),onSuccess:be,masterDataType:"vendor"})]})}function H4e(){const[e,t]=j.useState({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",contactperson:"",contactnumber:"",buyer:"",taxId:""}),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState("vendorId"),[v,g]=j.useState("materialId"),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[_,E]=j.useState([]),[T,I]=j.useState([]),[F,A]=j.useState([]),[P,q]=j.useState([]),[V,Y]=j.useState(1),[B,Q]=j.useState(null),[R,Z]=j.useState(!1),J=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),[M,z]=j.useState(!1);j.useEffect(()=>{ne(),W(),re(),le(),te(),Ie.get("/api/locations",{params:{companyId:J,financialYear:ie}}).then(De=>a(De.data))},[]);const ee=()=>{const De=P.map(Nr=>({Category:ue(Nr.categoryId),"Vendor Name":oe(Nr.vendorId),"Vendor ID":ge(Nr.vendorId),"Material ID":Me(Nr.materialId),"Material Description":Ne(Nr.materialId),"Unit (Location)":Nr.unit||"","BUM (Base Unit Measure)":Nr.bum||"","Contact Person":Nr.contactperson||"","Contact Number":Nr.contactnumber||"",Price:Nr.price||"",Buyer:Nr.buyer||"","Tax Name":We(Nr.taxId),"Tax Details":tt(Nr.taxId),"Company ID":Nr.companyId||"","Financial Year":Nr.financialYear||"","Created Date":Nr.createdAt?new Date(Nr.createdAt).toLocaleDateString():"","Updated Date":Nr.updatedAt?new Date(Nr.updatedAt).toLocaleDateString():""})),Ee=on.book_new(),it=on.json_to_sheet(De),Tt=[{wch:20},{wch:25},{wch:15},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:12},{wch:20},{wch:15},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];it["!cols"]=Tt,on.book_append_sheet(Ee,it,"Vendor Price List");const lr=new Date,Rt=lr.toLocaleDateString("en-GB").replace(/\//g,"-"),sr=lr.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),pr=`Vendor-Price-List-${Rt}-${sr}.xlsx`;sh(Ee,pr)},ne=async()=>{try{const De=await Ie.get("/api/vendor-categories",{params:{companyId:J,financialYear:ie}});C(De.data)}catch(De){console.error("Error fetching categories:",De)}},W=async()=>{try{const De=await Ie.get("/api/vendors",{params:{companyId:J,financialYear:ie}});E(De.data)}catch(De){console.error("Error fetching vendors:",De)}},re=async()=>{try{const De=await Ie.get("/api/material",{params:{companyId:J,financialYear:ie}});I(De.data)}catch(De){console.error("Error fetching materials:",De)}},le=async()=>{try{const De=await Ie.get("/api/tax",{params:{companyId:J,financialYear:ie}});A(De.data)}catch(De){console.error("Error fetching taxes:",De),alert("Error loading taxes")}},te=async()=>{try{const De=localStorage.getItem("selectedCompanyId"),Ee=localStorage.getItem("financialYear");console.log("comanyvendorpl",De,Ee);const it=new URLSearchParams({companyId:De,financialYear:Ee}).toString(),lr=await(await fetch(`/api/vendor-price-lists?${it}`)).json();q(lr)}catch(De){console.error("Error fetching price list:",De)}},K=async De=>{const{name:Ee,value:it}=De.target;let Tt={...e,[Ee]:it};if(Ee==="materialId")try{const sr=(await(await fetch(`/api/material/${it}`)).json()).conversionValue||1;Y(sr)}catch(lr){console.error("Error fetching material:",lr),Y(1)}t(Tt)},de=async De=>{De.preventDefault();const Ee=[];e.unit.trim()||Ee.push("Unit (Location) is required."),e.categoryId||Ee.push("Category is required."),e.vendorId||Ee.push("Vendor is required."),e.materialId||Ee.push("Material is required."),e.bum||Ee.push("BUM (Base Unit Multiplier) is required."),e.buyer.trim()||Ee.push("Buyer is required.");const it={...e,companyId:J,financialYear:ie};if(Ee.length>0){alert(Ee.join(`
`));return}try{if(B){console.log("Updating with ID:",B),console.log("Form data:",e);const Tt=await fetch(`/api/vendor-price-lists/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(console.log("Update response status:",Tt.status),Tt.ok)alert("Vendor Price List Updated Successfully!"),Q(null);else{const lr=await Tt.text();throw console.error("Update failed:",lr),new Error(`Update failed: ${Tt.status} - ${lr}`)}}else{const Tt=await Ie.post("/api/vendor-price-lists",it);Tt.ok?alert("Vendor Price List Saved Successfully!"):console.error("Save failed:",Tt)}H(),Z(!1),Be(!1),te()}catch(Tt){console.error("Error saving data:",Tt),alert("Failed to save Vendor Price List: "+Tt.message)}},H=()=>{t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",contactperson:"",contactnumber:"",buyer:"",taxId:""}),Y(1),Q(null)},se=async De=>{try{console.log("Editing ID:",De);const Ee=await fetch(`/api/vendor-price-lists/${De}`);if(!Ee.ok)throw new Error(`Failed to fetch: ${Ee.status} - ${Ee.statusText}`);const it=await Ee.json(),Tt=lr=>lr?typeof lr=="string"?lr:typeof lr=="object"&&(lr.$oid||lr._id)||lr.toString():"";t({categoryId:Tt(it.categoryId),vendorId:Tt(it.vendorId),materialId:Tt(it.materialId),unit:it.unit,bum:it.bum,contactperson:it.contactperson,contactnumber:it.contactnumber,price:it.price,buyer:it.buyer,taxId:Tt(it.taxId)}),Q(De),Z(!0),Be(!0)}catch(Ee){console.error("Error fetching record for edit:",Ee),alert("Failed to load record for editing: "+Ee.message)}},be=De=>De?typeof De=="string"?De:typeof De=="object"&&(De.$oid||De._id)||De.toString():null,ue=De=>{const Ee=be(De),it=k.find(Tt=>Tt._id===Ee);return it?it.categoryName:"Unknown"},oe=De=>{const Ee=be(De),it=_.find(Tt=>Tt._id===Ee);return it?it.name1:"Unknown"},ge=De=>{const Ee=be(De),it=_.find(Tt=>Tt._id===Ee);return it?it.vnNo||it.vendorId:"Unknown"},Ne=De=>{const Ee=be(De),it=T.find(Tt=>Tt._id===Ee);return it?it.description:"Unknown"},Me=De=>{const Ee=be(De),it=T.find(Tt=>Tt._id===Ee);return it?it.materialId:"Unknown"},We=De=>{if(!De)return"No Tax";const Ee=be(De),it=F.find(Tt=>Tt._id===Ee);return it?it.taxName:"Unknown"},tt=De=>{if(!De)return"No Tax";const Ee=be(De),it=F.find(Tt=>Tt._id===Ee);return it?`CGST: ${it.cgst}%, SGST: ${it.sgst}%, IGST: ${it.igst}%`:"Unknown"},[mt,Be]=j.useState(!1),[dt,Dt]=j.useState(1),It=10,zt=P.slice((dt-1)*It,dt*It),xe=Math.ceil(P.length/It),fe=De=>{De>=1&&De<=xe&&Dt(De)},ve=()=>{i(!0),y(""),d([])},pe=()=>{i(!1),y(""),d([])},Te=De=>{y(De.target.value)},Xe=()=>{if(!b.trim()){d([]);return}if(f==="vendorId"){const De=_.filter(Ee=>(Ee.vendorId||"").toLowerCase().includes(b.toLowerCase()));d(De)}else{const De=_.filter(Ee=>(Ee.name1||"").toLowerCase().includes(b.toLowerCase()));d(De)}},kt=()=>{d(_),y("")},Je=()=>{d([]),y("")},ze=De=>{K({target:{name:"vendorId",value:De._id}}),pe()},Fe=()=>{l(!0),w(""),h([])},Ve=()=>{l(!1),w(""),h([])},pt=De=>{w(De.target.value)},Pe=()=>{if(!S.trim()){h([]);return}if(v==="materialId"){const De=T.filter(Ee=>(Ee.materialId||"").toLowerCase().includes(S.toLowerCase()));h(De)}else{const De=T.filter(Ee=>(Ee.description||"").toLowerCase().includes(S.toLowerCase()));h(De)}},Re=()=>{h(T),w("")},Ye=()=>{h([]),w("")},At=De=>{console.log("Selected material:",De),t(Ee=>({...Ee,materialId:De._id,bum:De.baseUnit})),Ve()};j.useEffect(()=>{const De=setTimeout(()=>{b.trim()?Xe():d([])},300);return()=>clearTimeout(De)},[b,f,_]),j.useEffect(()=>{const De=setTimeout(()=>{S.trim()?Pe():h([])},300);return()=>clearTimeout(De)},[S,v,T]);const Gt=De=>{z(!1),te()};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Price List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Price List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search"})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>z(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ee,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:()=>{Be(!0),t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",contactperson:"",contactnumber:"",buyer:"",taxId:""}),Q(null)},children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Vendor Price List"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered datatable",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Material"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"BUM"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Buyer"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Contact Number"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:zt.map(De=>n.jsxs("tr",{children:[n.jsx("td",{children:oe(De.vendorId)}),n.jsx("td",{children:ue(De.categoryId)}),n.jsx("td",{children:Ne(De.materialId)}),n.jsx("td",{className:"text-wrap",children:De.unit}),n.jsx("td",{className:"text-wrap",children:De.bum}),n.jsxs("td",{className:"text-wrap",children:["Rs",De.price||0]}),n.jsx("td",{className:"text-wrap",children:De.buyer}),n.jsx("td",{className:"text-wrap",children:We(De.taxId)}),n.jsx("td",{className:"text-wrap",children:De.contactperson}),n.jsx("td",{className:"text-wrap",children:De.contactnumber}),n.jsx("td",{style:{cursor:"pointer"},children:n.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>se(be(De._id)),children:"Edit"})})]},be(De._id)))})]})})})]}),xe>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[n.jsx("li",{className:`page-item ${dt===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:De=>{De.preventDefault(),fe(dt-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:xe},(De,Ee)=>n.jsx("li",{className:`page-item ${dt===Ee+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:it=>{it.preventDefault(),fe(Ee+1)},children:Ee+1})},Ee)),n.jsx("li",{className:`page-item ${dt===xe?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:De=>{De.preventDefault(),fe(dt+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),mt&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:B?"Edit Entry":"Add New Entry"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>Be(!1),children:n.jsx("i",{className:"fa-solid fa-x"})})]}),n.jsxs("form",{onSubmit:de,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:K,required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),k.map(De=>n.jsx("option",{value:De._id,children:De.categoryName},De._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Vendor:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsx("input",{name:"vendorId",className:"form-control me-2",value:_.find(De=>De._id===e.vendorId)?.name1,onChange:K,required:!0,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Vendor",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Unit (Location):"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:e.unit,onChange:K,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),r.map(De=>n.jsx("option",{value:De.name,children:De.name},De.name))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Material:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsx("input",{name:"materialId",className:"form-control me-2",value:T.find(De=>De._id===e.materialId)?.description||"",onChange:K,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Fe,title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label",children:"Base Unit (BUM):"})}),n.jsx("div",{className:"col-3",children:n.jsx("input",{type:"text",name:"bum",className:"form-control",placeholder:"Enter Base Unit (BUM)",value:e.bum,onChange:De=>{De.target.value=Math.max(0,De.target.value),K(De)},required:!0})}),n.jsx("div",{className:"col-4",children:n.jsx("span",{children:T.find(De=>De._id===e.materialId)?.baseUnit})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Price:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"price",className:"form-control",placeholder:"Enter Price",value:e.price,onChange:De=>{De.target.value=De.target.value.replace(/[^0-9.]/g,""),K(De)}})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Buyer:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"buyer",className:"form-control",placeholder:"Enter Buyer",value:e.buyer,onChange:K,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactperson",className:"form-control",placeholder:"Contact Person",value:e.contactperson,onChange:De=>{K(De)}})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact_Number:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactnumber",className:"form-control",placeholder:"Contact Number",value:e.contactnumber,onChange:De=>{K(De)}})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"taxId",className:"form-select",value:e.taxId,onChange:K,children:[n.jsx("option",{value:"",children:"Select Tax"}),F.map(De=>n.jsx("option",{value:De._id,children:De.taxName},De._id))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>Be(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:B?"Update":"Save"})]})]})]})})})]}),s&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:f,onChange:De=>p(De.target.value),children:[n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"name",children:"Vendor Name"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:f==="vendorId"?"Enter Vendor ID...":"Search by Vendor Name...",value:b,onChange:Te})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:kt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),c.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:c.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:c.map((De,Ee)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:De.vnNo}),n.jsx("td",{className:"text-wrap",children:De.name1}),n.jsx("td",{className:"text-wrap",children:De.contactNo}),n.jsx("td",{className:"text-wrap",children:De.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ze(De),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ee))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:_.length===0?"No vendors loaded from API":b?`No vendors found matching "${b}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Ve})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:v,onChange:De=>g(De.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:v==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:S,onChange:pt})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Re,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),u.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ye,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:u.map((De,Ee)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:De.materialId}),n.jsx("td",{className:"text-wrap",children:De.description}),n.jsx("td",{className:"text-wrap",children:De.baseUnit}),n.jsx("td",{className:"text-wrap",children:De.location}),n.jsx("td",{className:"text-wrap",children:De.materialgroup}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>At(De),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ee))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:T.length===0?"No materials loaded from API":S?`No materials found matching "${S}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Ve,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx(Nf,{show:M,onClose:()=>z(!1),onImportSuccess:Gt,masterDataType:"vendorPriceList"})]})})}function n9(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[h,f]=j.useState(!1),[p,v]=j.useState([]),[g,b]=j.useState(null),[y,S]=j.useState([]),[w,k]=j.useState(!1),[C,_]=j.useState("materialId"),[E,T]=j.useState(""),[I,F]=j.useState(!1),A=localStorage.getItem("selectedCompanyId"),P=localStorage.getItem("financialYear");j.useEffect(()=>{Ie.get("/api/material",{params:{companyId:A,financialYear:P}}).then(Ye=>{v(Ye.data),console.log("Materials loaded:",Ye.data)}).catch(Ye=>console.error("Error fetching materials:",Ye))},[]),j.useEffect(()=>{if(!I&&!E){S([]);return}const Ye=p.filter(At=>{if(I&&!E)return!0;const Gt=E.toLowerCase();return(At[C]?.toString().toLowerCase()||"").includes(Gt)});S(Ye)},[p,E,C,I]);const q=Ye=>{if(V!==null&&i?.items){const At=[...i.items];At[V]&&(At[V]={...At[V],materialId:Ye.materialId,description:Ye.description,baseUnit:Ye.baseUnit,price:Ye.price},o({...i,items:At}))}k(!1),Y(null)},[V,Y]=j.useState(null),[B,Q]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0,isdelete:!1}),[R,Z]=j.useState(""),[J,ie]=j.useState("soNumber"),[M,z]=j.useState(!1),[ee,ne]=j.useState([]),[W,re]=j.useState(null),[le,te]=j.useState("name1"),[K,de]=j.useState(""),[H,se]=j.useState(!1),[be,ue]=j.useState([]),[oe,ge]=j.useState(""),[Ne,Me]=j.useState(!1),[We,tt]=j.useState(!1);j.useEffect(()=>{Ie.get("/api/sales-orders",{params:{companyId:A,financialYear:P}}).then(Ye=>r(Ye.data)).catch(Ye=>console.error("Error fetching sales orders",Ye)),Ie.get("/api/goodsissuecategory",{params:{companyId:A,financialYear:P}}).then(Ye=>s(Ye.data)).catch(Ye=>console.error("Error fetching categories",Ye)),Ie.get("/api/customers",{params:{companyId:A,financialYear:P}}).then(Ye=>ne(Ye.data)).catch(Ye=>console.error("Error fetching customers",Ye))},[]);const mt=()=>{console.log("Fetching documents..."),Ie.get("/api/goodsissue",{params:{companyId:A,financialYear:P}}).then(Ye=>{console.log("Documents fetched:",Ye.data),ue(Ye.data)}).catch(Ye=>{console.error("Error fetching documents",Ye)})};j.useEffect(()=>{console.log("Categories loaded:",a),a.forEach(Ye=>{console.log(`Category: "${Ye.categoryName}" (length: ${Ye.categoryName.length})`)})},[a]);const Be=Ye=>{o(Ye),Q(At=>({...At,customer:Ye.sales||Ye.customer||Ye.customerName,location:Ye.deliveryLocation||""})),c(!1)},dt=Ye=>{Q(At=>({...At,customer:Ye.name1})),u(!1)},Dt=Ye=>{if(Q(At=>({...At,docnumber:Ye.docnumber,documentDate:Ye.documentDate||Ye.issueDate||e,postingDate:Ye.postingDate||e,reference:Ye.reference||"",customer:Ye.customer||"",location:Ye.location||""})),re(Ye),Ye.salesOrderId){const At=t.find(Gt=>Gt._id===Ye.salesOrderId);At&&o(At)}else Ye.items&&o({soNumber:Ye.docnumber,items:Ye.items,sales:Ye.customer,deliveryLocation:Ye.location});f(!1)},[It,zt]=j.useState(!1),xe=Ye=>{const At=Ye.target.value;console.log(`Selected category: "${At}" (length: ${At.length})`);let Gt="",De=!1;const Ee=At.trim().toLowerCase();Ee==="cancel"?(De=!0,zt(!0),console.log("Cancel category selected - enabling document search"),mt()):Ee==="demo"?Gt=`DMP-${Date.now()}`:Ee==="display"&&(De=!0,console.log("Display category selected - enabling document search"),mt());const it=a.find(Tt=>Tt.categoryName.trim().toLowerCase()===Ee);console.log("Selected category object:",it),console.log("Document number enabled:",De),Q(Tt=>({...Tt,category:At,catdesc:it?.description||"",docnumber:De?"":Gt})),tt(De)},fe=Ye=>{const At=Ye.target.value;if(Q(Gt=>({...Gt,docnumber:At})),At.length>2){const Gt=be.find(De=>De.docnumber&&De.docnumber.toLowerCase().includes(At.toLowerCase()));Gt&&Dt(Gt)}},ve=(Ye,At,Gt)=>{const De=[...i.items];De[Ye][At]=Gt,o({...i,items:De})},pe=async Ye=>{if(Ye.preventDefault(),!i)return alert("Please select a Sales Order.");const At={...B,salesOrderId:i._id,items:i.items,issueDate:e};try{if(It){await Ie.patch(`/api/goodsissue/${W._id}`,{isdelete:!0}),alert("Goods Issue cancelled successfully!");return}else await Ie.post("/api/goodsissue",At),alert("Goods Issue saved successfully!"),Q({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0}),o(null),tt(!1)}catch(Gt){console.error("Error saving goods issue",Gt),alert("Failed to save goods issue")}},Te=t.filter(Ye=>!M&&!R?!1:(Ye[J]?.toLowerCase()||"").includes(R.toLowerCase())),Xe=ee.filter(Ye=>!H&&!K?!1:(Ye[le]?.toLowerCase()||"").includes(K.toLowerCase())),kt=be.filter(Ye=>!Ne&&!oe?!1:(Ye.docnumber?.toLowerCase()||"").includes(oe.toLowerCase())),Je=()=>{Z(""),z(!0)},ze=()=>{Z(""),z(!1)},Fe=()=>{de(""),se(!0)},Ve=()=>{de(""),se(!1)},pt=()=>{ge(""),Me(!0),mt()},Pe=()=>{ge(""),Me(!1)},Re=B.category.trim().toLowerCase()==="display";return n.jsxs("div",{className:"content p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Issue"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Issue"})]})})]})}),n.jsxs("form",{onSubmit:pe,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header p-2",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"category",className:"form-select form-select-sm",value:B.category,onChange:xe,children:[n.jsx("option",{value:"",children:"Select"}),a.map(Ye=>n.jsx("option",{value:Ye.categoryName,children:Ye.categoryName},Ye._id))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"catdesc",className:"form-control form-control-sm",value:B.catdesc,readOnly:!0})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Sales Order"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"so",value:i?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"docnumber",className:"form-control form-control-sm",value:B.docnumber,onChange:fe,readOnly:!We,placeholder:We?"Enter document number...":""}),We&&n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>f(!0),children:"Search"})]})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:B.documentDate,onChange:Ye=>Q(At=>({...At,documentDate:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Post Date"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:B.postingDate,onChange:Ye=>Q(At=>({...At,postingDate:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"DC/LLR/REF"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.reference,onChange:Ye=>Q(At=>({...At,reference:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Customer"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.customer,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.location,readOnly:!0})})]})})]})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"S. No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Mat Desc"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Value"}),n.jsx("th",{children:"Available Qty"}),It&&n.jsx("th",{children:"Cancel"})]})}),n.jsx("tbody",{children:i?.items?.map((Ye,At)=>n.jsxs("tr",{children:[n.jsx("td",{children:At+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control",value:Ye.materialId||"",readOnly:!0}),!Re&&n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{Y(At),k(!0)},children:""})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ye.description,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:`form-control ${Re?"bg-light":""}`,value:Ye.quantity,onChange:Re?void 0:Gt=>ve(At,"quantity",Gt.target.value),readOnly:Re,disabled:Re})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ye.baseUnit,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:`form-control ${Re?"bg-light":""}`,value:Ye.deliveryDate,onChange:Re?void 0:Gt=>ve(At,"deliveryDate",Gt.target.value),readOnly:Re,disabled:Re})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:`form-control ${Re?"bg-light":""}`,value:Ye.lotNo||"",onChange:Re?void 0:Gt=>ve(At,"lotNo",Gt.target.value),readOnly:Re,disabled:Re})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ye.price,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:`form-control ${Re?"bg-light":""}`,value:Ye.availableQty||"",onChange:Re?void 0:Gt=>ve(At,"availableQty",Gt.target.value),readOnly:Re,disabled:Re})}),It&&n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:Ye.isCancelled,onChange:Gt=>ve(At,"isCancelled",Gt.target.checked)})})]},At))})]})})})]}),!Re&&n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),w&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:C,onChange:Ye=>_(Ye.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${C}`,value:E,onChange:Ye=>T(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>F(!0),children:"View All"}),(E||I)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),F(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:y.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((Ye,At)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ye.materialId})}),n.jsx("td",{children:Ye.description}),n.jsx("td",{children:Ye.baseUnit}),n.jsx("td",{children:Ye.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>q(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},At))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No materials found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),l&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>c(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:J,onChange:Ye=>ie(Ye.target.value),children:[n.jsx("option",{value:"soNumber",children:"SO Number"}),n.jsx("option",{value:"sales",children:"Customer"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${J}`,value:R,onChange:Ye=>Z(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Je,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(R||M)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ze,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Te.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Sales"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Te.map((Ye,At)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Ye.soNumber})}),n.jsx("td",{children:Ye.sales||Ye.customer||Ye.customerName}),n.jsx("td",{children:Ye.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Be(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},At))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:R?`No sales orders found for "${R}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),d&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:le,onChange:Ye=>te(Ye.target.value),children:[n.jsx("option",{value:"name1",children:"Customer Name"}),n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${le}`,value:K,onChange:Ye=>de(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Fe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(K||H)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ve,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Xe.map((Ye,At)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ye.customerId})}),n.jsx("td",{children:Ye.name1}),n.jsx("td",{children:Ye.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>dt(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},At))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:K?`No customers found for "${K}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),h&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>f(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:n.jsx("option",{value:"docnumber",children:"Document Number"})})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:oe,onChange:Ye=>ge(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:pt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(oe||Ne)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Pe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:kt.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Document Number"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:kt.map((Ye,At)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Ye.docnumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:Ye.category})}),n.jsx("td",{children:Ye.customer}),n.jsx("td",{children:Ye.documentDate||Ye.issueDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Dt(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},At))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:oe?`No documents found for "${oe}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const W4e=({show:e,onClose:t,issue:r})=>r?n.jsx("div",{className:`modal fade${e?" show d-block":""}`,tabIndex:"-1",style:e?{background:"rgba(0,0,0,0.5)"}:{display:"none"},children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Preview: Goods Issue - ",r.docnumber]}),n.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:t})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Category:"})," ",r.category,n.jsx("br",{}),n.jsx("strong",{children:"Category Desc:"})," ",r.catdesc,n.jsx("br",{}),n.jsx("strong",{children:"Document Date:"})," ",r.documentDate,n.jsx("br",{}),n.jsx("strong",{children:"Posting Date:"})," ",r.postingDate,n.jsx("br",{}),n.jsx("strong",{children:"Reference:"})," ",r.reference,n.jsx("br",{}),n.jsx("strong",{children:"Customer:"})," ",r.customer,n.jsx("br",{})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Location:"})," ",r.location,n.jsx("br",{}),n.jsx("strong",{children:"Issue Date:"})," ",r.issueDate,n.jsx("br",{}),n.jsx("strong",{children:"Sales Order ID:"})," ",r.salesOrderId,n.jsx("br",{}),n.jsx("strong",{children:"Company ID:"})," ",r.companyId,n.jsx("br",{}),n.jsx("strong",{children:"Financial Year:"})," ",r.financialYear,n.jsx("br",{}),n.jsx("strong",{children:"Deleted:"})," ",r.isdelete?"Yes":"No",n.jsx("br",{})]})]}),n.jsx("h6",{className:"mt-3",children:"Items"}),n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Available Qty"}),n.jsx("th",{children:"Total (Qty  Price)"})]})}),n.jsx("tbody",{children:r.items.map((a,s)=>{const i=a.quantity*a.price;return n.jsxs("tr",{children:[n.jsx("td",{children:s+1}),n.jsx("td",{children:a.materialId}),n.jsx("td",{children:a.description}),n.jsx("td",{children:a.quantity}),n.jsx("td",{children:a.baseUnit}),n.jsx("td",{children:a.deliveryDate}),n.jsx("td",{children:a.lotNo}),n.jsx("td",{children:a.price}),n.jsx("td",{children:a.availableQty}),n.jsx("td",{children:i})]},s)})})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null,Jv=10,s9=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(0),[o,l]=j.useState(1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=j.useState(!1);j.useEffect(()=>{f()},[o]);const f=async()=>{h(!0);try{const C=await Ie.get("/api/goodsissue",{params:{companyId:c,financialYear:d,skip:(o-1)*Jv,limit:Jv}});t(C.data.items||C.data),i(C.data.totalCount||C.data.total||C.data.length||0)}catch(C){console.error("Error fetching Goods Issues:",C)}h(!1)},p=C=>{const _=window.open("","","height=700,width=1000");_.document.write("<html><head><title>Print Goods Issue</title>"),_.document.write(`<style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
        body { font-family: sans-serif; }
        h5, h6 { margin-top: 10px; }
      </style>`),_.document.write("</head><body>"),_.document.write(`<h5>Preview: Goods Issue - ${C.docnumber}</h5>
      <div>
        <div style="display:flex;gap:40px;margin-bottom:16px;">
          <div>
            <strong>Category:</strong> ${C.category||""}<br/>
            <strong>Category Desc:</strong> ${C.catdesc||""}<br/>
            <strong>Document Date:</strong> ${C.documentDate||""}<br/>
            <strong>Posting Date:</strong> ${C.postingDate||""}<br/>
            <strong>Reference:</strong> ${C.reference||""}<br/>
            <strong>Customer:</strong> ${C.customer||""}<br/>
          </div>
          <div>
            <strong>Location:</strong> ${C.location||""}<br/>
            <strong>Issue Date:</strong> ${C.issueDate||""}<br/>
            <strong>Sales Order ID:</strong> ${C.salesOrderId||""}<br/>
            <strong>Company ID:</strong> ${C.companyId||""}<br/>
            <strong>Financial Year:</strong> ${C.financialYear||""}<br/>
            <strong>Deleted:</strong> ${C.isdelete?"Yes":"No"}<br/>
          </div>
        </div>
        <h6>Items</h6>
        <table style="width:100%;border:1px solid black;">
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Base Unit</th>
              <th>Delivery Date</th>
              <th>Lot No</th>
              <th>Price</th>
              <th>Available Qty</th>
              <th>Total (Qty  Price)</th>
            </tr>
          </thead>
          <tbody>
            ${C.items&&C.items.length>0?C.items.map((E,T)=>{const I=E.quantity*E.price;return`
                      <tr>
                        <td>${T+1}</td>
                        <td>${E.materialId||""}</td>
                        <td>${E.description||""}</td>
                        <td>${E.quantity}</td>
                        <td>${E.baseUnit||""}</td>
                        <td>${E.deliveryDate||""}</td>
                        <td>${E.lotNo||""}</td>
                        <td>${E.price}</td>
                        <td>${E.availableQty}</td>
                        <td>${I}</td>
                      </tr>
                    `}).join(""):'<tr><td colSpan="10">No items</td></tr>'}
          </tbody>
        </table>
      </div>`),_.document.write("</body></html>"),_.document.close(),_.focus(),_.print(),_.close()},[v,g]=j.useState(1),b=v*Jv,y=b-Jv,S=e.slice(y,b),w=Math.ceil(e.length/Jv),k=C=>{C<1||C>w||g(C)};return n.jsxs("div",{className:"container mt-4",children:[n.jsx("h2",{className:"mb-3",children:"Goods Issue Records"}),u?n.jsx("p",{children:"Loading..."}):e.length===0?n.jsx("p",{children:"No records found."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Issue Date"}),n.jsx("th",{children:"Preview Items"}),n.jsx("th",{children:"Print"})]})}),n.jsx("tbody",{children:S.map((C,_)=>{const E=C._id?.$oid||C._id||_;return n.jsxs("tr",{children:[n.jsx("td",{children:(v-1)*Jv+_+1}),n.jsx("td",{children:C.docnumber}),n.jsx("td",{children:C.category}),n.jsx("td",{children:C.documentDate}),n.jsx("td",{children:C.postingDate}),n.jsx("td",{children:C.reference}),n.jsx("td",{children:C.customer}),n.jsx("td",{children:C.location}),n.jsx("td",{children:C.issueDate}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>a(C),children:"Preview"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(C),children:"Print"})})]},E)})})]})})})}),w>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v-1),disabled:v===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const _=[],E=[];_.push(1);for(let F=Math.max(2,v-2);F<=Math.min(w-1,v+2);F++)_.push(F);w>1&&_.push(w);const T=[...new Set(_)].sort((F,A)=>F-A);let I;for(let F of T)I&&(F-I===2?E.push(I+1):F-I!==1&&E.push("...")),E.push(F),I=F;return E.map((F,A)=>F==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${A}`):n.jsx("li",{className:`page-item ${v===F?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>k(F),children:F})},F))})(),n.jsx("li",{className:`page-item ${v===w?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v+1),disabled:v===w,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]}),n.jsx(W4e,{show:!!r,onClose:()=>a(null),issue:r})]})};function i9(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),d=localStorage.getItem("selectedCompanyId"),u=localStorage.getItem("financialYear"),[h,f]=j.useState(null),[p,v]=j.useState(!1),[g,b]=j.useState(!1),[y,S]=j.useState(!1),[w,k]=j.useState(null),[C,_]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),[E,T]=j.useState(""),[I,F]=j.useState("poNumber"),[A,P]=j.useState(!1),[q,V]=j.useState(""),[Y,B]=j.useState("name1"),[Q,R]=j.useState(!1),[Z,J]=j.useState(!1),[ie,M]=j.useState("materialId"),[z,ee]=j.useState(""),[ne,W]=j.useState(!1);j.useEffect(()=>{Ie.get("/api/purchase-orders",{params:{companyId:d,financialYear:u}}).then(ve=>r(ve.data)).catch(ve=>console.error("Error fetching POs:",ve)),Ie.get("/api/vendors",{params:{companyId:d}}).then(ve=>s(ve.data)).catch(ve=>console.error("Error fetching vendors:",ve)),Ie.get("/api/material",{params:{companyId:d}}).then(ve=>o(ve.data)).catch(ve=>console.error("Error fetching materials:",ve)),Ie.get("/api/goodsreceiptcategory",{params:{companyId:d}}).then(ve=>c(ve.data)).catch(ve=>console.error("Error fetching categories:",ve))},[]);const re=ve=>{f(ve),_(pe=>({...pe,vendor:ve.vendor||"",location:ve.deliveryLocation||""})),v(!1)},le=ve=>{_(pe=>({...pe,vendor:ve.name1})),S(!1)},te=ve=>{if(w!==null&&h?.items){const pe=[...h.items];pe[w]&&(pe[w]={...pe[w],materialId:ve.materialId,description:ve.description,baseUnit:ve.baseUnit,price:ve.price},f(Te=>({...Te,items:pe})))}J(!1)},[K,de]=j.useState(!1),[H,se]=j.useState(!1),be=ve=>{const pe=ve.target.value,Te=l.find(kt=>kt.categoryName===pe);_(kt=>({...kt,category:pe,catdesc:Te?.categoryName||""}));const Xe=Te?.categoryName?.toLowerCase();se(Xe==="cancel"),de(Xe==="display")},ue=(ve,pe,Te)=>{const Xe=[...h.items];Xe[ve][pe]=Te,f({...h,items:Xe})},oe=async ve=>{if(ve.preventDefault(),!h)return alert("Please select a Purchase Order.");const pe={...C,purchaseOrderId:h._id,items:h.items,receiptDate:e,companyId:d,financialYear:u};try{l.find(Te=>Te.categoryName===C.category)?.categoryName.toLowerCase()==="cancel"?await Ie.patch(`/api/goodsreceipt/${h._id}`,{isdelete:!0}):await Ie.post("/api/goodsreceipt",pe),alert("Goods Receipt saved successfully!"),_({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),f(null)}catch(Te){console.error("Error saving goods receipt",Te),alert("Failed to save goods receipt")}},ge=t.filter(ve=>!A&&!E?!1:(ve[I]?.toLowerCase()||"").includes(E.toLowerCase())),Ne=a.filter(ve=>!Q&&!q?!1:(ve[Y]?.toLowerCase()||"").includes(q.toLowerCase())),Me=i.filter(ve=>!ne&&!z?!1:(ve[ie]?.toLowerCase()||"").includes(z.toLowerCase())),[We,tt]=j.useState([]),[mt,Be]=j.useState("grNumber"),[dt,Dt]=j.useState(""),[It,zt]=j.useState(!1);j.useEffect(()=>{Ie.get("/api/goodsreceipt",{params:{companyId:d,financialYear:u}}).then(ve=>tt(ve.data)).catch(ve=>console.error("Error fetching goods receipts:",ve))},[]);const xe=We.filter(ve=>!It&&!dt?!1:(ve[mt]?.toLowerCase()||"").includes(dt.toLowerCase())),fe=ve=>{const Te=ve.category?.toLowerCase()==="cancel";_(ze=>({...ze,docnumber:ve.docnumber,vendor:ve.vendor,location:ve.location,reference:ve.reference,documentDate:ve.documentDate,postingDate:ve.postingDate}));const{category:Xe,catdesc:kt,...Je}=ve;f(Je),console.log("select ",ve.items),se(!Te),b(!1)};return console.log("selectedPO",h),console.log("isReadOnlyMode",H),n.jsxs("div",{className:"content p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Receipt"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Receipt"})]})})]})}),n.jsxs("form",{onSubmit:oe,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:C.category,onChange:be,children:[n.jsx("option",{value:"",children:"Select"}),l.map(ve=>n.jsx("option",{value:ve.categoryName,children:ve.categoryName},ve._id))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.catdesc,readOnly:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"PO Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:h?.poNumber||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:H||K,onClick:()=>v(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.docnumber,onChange:ve=>_(pe=>({...pe,docnumber:ve.target.value})),readOnly:!H}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:"Search"})]})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-7",children:n.jsx("label",{className:"form-label mb-0",children:"Document_Date"})}),n.jsx("div",{className:"col-12 col-lg-5",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:C.documentDate,readOnly:H,onChange:ve=>_(pe=>({...pe,documentDate:ve.target.value}))})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-6",children:n.jsx("label",{className:"form-label mb-0",children:"Posting_Date"})}),n.jsx("div",{className:"col-12 col-lg-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:C.postingDate,readOnly:H,onChange:ve=>_(pe=>({...pe,postingDate:ve.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-4",children:n.jsx("label",{className:"form-label mb-0",children:"Reference"})}),n.jsx("div",{className:"col-12 col-lg-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.reference,onChange:ve=>_(pe=>({...pe,reference:ve.target.value})),readOnly:K})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-3",children:n.jsx("label",{className:"form-label mb-0",children:"Vendor"})}),n.jsx("div",{className:"col-12 col-lg-9",children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.vendor,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:H||K,onClick:()=>S(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-5",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-12 col-lg-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.location,readOnly:!0})})]})})]})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"S. No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),H&&!K&&n.jsx("th",{children:"Cancel"})]})}),n.jsx("tbody",{children:(h?.items?.length?h.items:[{}]).map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:pe+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:ve.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{k(pe),J(!0)},disabled:H||K,children:""})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:ve.quantity||"",onChange:Te=>ue(pe,"quantity",Te.target.value),readOnly:H||K})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:ve.deliveryDate||e,onChange:Te=>ue(pe,"deliveryDate",Te.target.value),readOnly:H||K})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.lotNo||"",onChange:Te=>ue(pe,"lotNo",Te.target.value),readOnly:H||K})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:ve.price||"",readOnly:!0})}),H&&!K&&n.jsx("td",{children:n.jsx("input",{type:"checkbox",onChange:Te=>ue(pe,"cancel",Te.target.checked)})})]},pe))})]})})})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),y&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Y,onChange:ve=>B(ve.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Y}`,value:q,onChange:ve=>V(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>R(!0),children:"View All"}),(q||Q)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{V(""),R(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ne.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.vendorId})}),n.jsx("td",{children:ve.name1}),n.jsx("td",{children:ve.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>le(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:q?`No vendors found for "${q}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:ve=>F(ve.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:E,onChange:ve=>T(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>P(!0),children:"View All"}),(E||A)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),P(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ge.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ge.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:ve.poNumber})}),n.jsx("td",{children:ve.vendor}),n.jsx("td",{children:ve.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>re(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No purchase orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Z&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>J(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ie,onChange:ve=>M(ve.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ie}`,value:z,onChange:ve=>ee(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>W(!0),children:"View All"}),(z||ne)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{ee(""),W(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Me.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Me.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.materialId})}),n.jsx("td",{children:ve.description}),n.jsx("td",{children:ve.baseUnit}),n.jsx("td",{children:ve.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>te(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:z?`No materials found for "${z}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>J(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),g&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Goods Receipt"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:mt,onChange:ve=>Be(ve.target.value),children:[n.jsx("option",{value:"docnumber",children:"GR Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${mt}`,value:dt,onChange:ve=>Dt(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>zt(!0),children:"View All"}),(dt||It)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Dt(""),zt(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"GR Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.docnumber})}),n.jsx("td",{children:ve.vendor}),n.jsx("td",{children:ve.location}),n.jsx("td",{children:ve.reference}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fe(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:dt?`No receipts found for "${dt}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const Bb=10,o9=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(1),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{v()},[]);const v=async()=>{try{const T=await Ie.get("/api/goodsreceipt",{params:{companyId:f,financialYear:p}});t(T.data)}catch(T){console.error("Error fetching Goods Receipts:",T)}},g=T=>{const I=window.open("","","height=600,width=900");I.document.write("<html><head><title>Print Goods Receipt</title>"),I.document.write("<style>table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; } h4 { margin-bottom: 10px; }</style>"),I.document.write("</head><body>"),I.document.write("<h4>Goods Receipt</h4>"),I.document.write('<table style="margin-bottom:10px;">'),I.document.write("<tbody>"),I.document.write(`<tr><td><strong>Document No:</strong></td><td>${T.docnumber}</td></tr>`),I.document.write(`<tr><td><strong>Document Date:</strong></td><td>${T.documentDate}</td></tr>`),I.document.write(`<tr><td><strong>Posting Date:</strong></td><td>${T.postingDate}</td></tr>`),I.document.write(`<tr><td><strong>Reference:</strong></td><td>${T.reference}</td></tr>`),I.document.write(`<tr><td><strong>Vendor:</strong></td><td>${T.vendor}</td></tr>`),I.document.write(`<tr><td><strong>Location:</strong></td><td>${T.location}</td></tr>`),I.document.write(`<tr><td><strong>Receipt Date:</strong></td><td>${T.receiptDate}</td></tr>`),I.document.write("</tbody></table>"),I.document.write("<h5>Items</h5>"),I.document.write('<table style="width:100%;">'),I.document.write("<thead><tr>"),I.document.write("<th>#</th>"),I.document.write("<th>Material ID</th>"),I.document.write("<th>Description</th>"),I.document.write("<th>Quantity</th>"),I.document.write("<th>Base Unit</th>"),I.document.write("<th>Delivery Date</th>"),I.document.write("<th>Lot No</th>"),I.document.write("<th>Price</th>"),I.document.write("<th>Total</th>"),I.document.write("</tr></thead><tbody>"),T.items&&T.items.length>0?T.items.forEach((F,A)=>{I.document.write("<tr>"),I.document.write(`<td>${A+1}</td>`),I.document.write(`<td>${F.materialId}</td>`),I.document.write(`<td>${F.description}</td>`),I.document.write(`<td>${F.quantity}</td>`),I.document.write(`<td>${F.baseUnit}</td>`),I.document.write(`<td>${F.deliveryDate}</td>`),I.document.write(`<td>${F.lotNo}</td>`),I.document.write(`<td>${F.price}</td>`),I.document.write(`<td>${(F.quantity*F.price).toFixed(2)}</td>`),I.document.write("</tr>")}):I.document.write('<tr><td colspan="9" style="text-align:center;">No items found</td></tr>'),I.document.write("</tbody></table>"),I.document.write("</body></html>"),I.document.close(),I.focus(),I.print(),I.close()},b=T=>{a(T)},y=()=>{a(null)},w=e.filter(T=>{if(o&&(T.postingDate?T.postingDate.slice(0,10):"")<o||c&&(T.postingDate?T.postingDate.slice(0,10):"")>c)return!1;if(s.trim()!==""){const I=s.trim().toLowerCase();if(![T.docnumber,T.reference,T.vendor,T.location].some(P=>P&&P.toLowerCase().includes(I)))return!1}return!0}),k=Math.ceil(w.length/Bb)||1,C=T=>{T<1||T>k||h(T)},_=()=>{i(""),l(""),d(""),h(1)},E=w.slice((u-1)*Bb,u*Bb);return j.useEffect(()=>{u>k&&h(k)},[w,k]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Goods Receipt List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory Report"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Goods Receipt List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-sm-12",children:[n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row ",children:[n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search (Doc No, Reference, Vendor, Location)...",value:s,onChange:T=>i(T.target.value)})]}),n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Posting Date From"}),n.jsx("input",{type:"date",className:"form-control",value:o,onChange:T=>l(T.target.value)})]}),n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Posting Date To"}),n.jsx("input",{type:"date",className:"form-control",value:c,onChange:T=>d(T.target.value)})]}),n.jsx("div",{className:"col-md-3 mb-2 d-flex align-items-end",children:n.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:_,children:"Reset"})})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive table-nowrap",children:n.jsxs("table",{className:"table table-sm mb-0 border",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Receipt Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No goods receipt records found."})}):E.map((T,I)=>n.jsxs("tr",{children:[n.jsx("td",{children:(u-1)*Bb+I+1}),n.jsx("td",{children:T.docnumber}),n.jsx("td",{children:T.documentDate}),n.jsx("td",{children:T.postingDate}),n.jsx("td",{children:T.reference}),n.jsx("td",{children:T.vendor}),n.jsx("td",{children:T.location}),n.jsx("td",{children:T.receiptDate}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>g(T),children:"Print"}),n.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>b(T),children:"Preview"})]})]},T._id?.$oid||(u-1)*Bb+I))})]})})})]}),k>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>C(u-1),disabled:u===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const I=[],F=[];I.push(1);for(let q=Math.max(2,u-2);q<=Math.min(k-1,u+2);q++)I.push(q);k>1&&I.push(k);const A=[...new Set(I)].sort((q,V)=>q-V);let P;for(let q of A)P&&(q-P===2?F.push(P+1):q-P!==1&&F.push("...")),F.push(q),P=q;return F.map((q,V)=>q==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${V}`):n.jsx("li",{className:`page-item ${u===q?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>C(q),children:q})},q))})(),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>C(u+1),disabled:u===k,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]})})]}),r&&n.jsx("div",{className:"modal show",tabIndex:"-1",style:{display:"block",background:"rgba(0,0,0,0.3)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:y,children:n.jsx("div",{className:"modal-dialog modal-xl",style:{pointerEvents:"auto",marginTop:"5vh"},onClick:T=>T.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Preview - Document No: ",r.docnumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:y})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("table",{className:"table table-borderless mb-3",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Document Date:"})}),n.jsx("td",{children:r.documentDate}),n.jsx("td",{children:n.jsx("strong",{children:"Posting Date:"})}),n.jsx("td",{children:r.postingDate})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Reference:"})}),n.jsx("td",{children:r.reference}),n.jsx("td",{children:n.jsx("strong",{children:"Vendor:"})}),n.jsx("td",{children:r.vendor})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Location:"})}),n.jsx("td",{children:r.location}),n.jsx("td",{children:n.jsx("strong",{children:"Receipt Date:"})}),n.jsx("td",{children:r.receiptDate})]})]})}),n.jsx("h6",{children:"Items"}),n.jsxs("table",{className:"table border",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:r.items&&r.items.length>0?r.items.map((T,I)=>n.jsxs("tr",{children:[n.jsx("td",{children:I+1}),n.jsx("td",{children:T.materialId}),n.jsx("td",{children:T.description}),n.jsx("td",{children:T.quantity}),n.jsx("td",{children:T.baseUnit}),n.jsx("td",{children:T.deliveryDate}),n.jsx("td",{children:T.lotNo}),n.jsx("td",{children:T.price}),n.jsx("td",{children:(T.quantity*T.price).toFixed(2)})]},T._id?.$oid||I)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No items found"})})})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Close"})})]})})})]})};function l9(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),[h,f]=j.useState([]),[p,v]=j.useState(!1),[g,b]=j.useState(""),[y,S]=j.useState(!1),[w,k]=j.useState(!1),[C,_]=j.useState(null),[E,T]=j.useState(!1),[I,F]=j.useState("materialId"),[A,P]=j.useState(""),[q,V]=j.useState([]),Y=t.category.trim().toLowerCase()==="display",B=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear");j.useEffect(()=>{Ie.get("/api/material",{params:{companyId:B,financialYear:Q}}).then(oe=>c(oe.data)).catch(oe=>console.error("Error fetching materials:",oe)),Ie.get("/api/locations",{params:{companyId:B,financialYear:Q}}).then(oe=>s(oe.data)),Ie.get("/api/goodsTransferCategory",{params:{companyId:B,financialYear:Q}}).then(oe=>o(oe.data)).catch(oe=>console.error("Error fetching categories:",oe))},[]),j.useEffect(()=>{console.log("Categories loaded:",i),i.forEach(oe=>{console.log(`Category: "${oe.categoryName}" (length: ${oe.categoryName.length})`)})},[i]);const R=()=>{console.log("Fetching documents..."),Ie.get("/api/goodsTransfer",{params:{companyId:B,financialYear:Q}}).then(oe=>{console.log("Documents fetched:",oe.data),f(oe.data)}).catch(oe=>{console.error("Error fetching documents",oe)})},Z=oe=>{const ge=oe.target.value;console.log(`Selected category: "${ge}" (length: ${ge.length})`);let Ne="",Me=!1;const We=ge.trim().toLowerCase();We==="cancel"?Ne=`CNL-${Date.now()}`:We==="demo"?Ne=`DMP-${Date.now()}`:We==="display"&&(Me=!0,console.log("Display category selected - enabling document search"),R());const tt=i.find(mt=>mt.categoryName.trim().toLowerCase()===We);console.log("Selected category object:",tt),console.log("Document number enabled:",Me),r(mt=>({...mt,category:ge,party:"",docnumber:Me?"":Ne})),k(Me)},J=(oe,ge)=>{r(Ne=>({...Ne,[oe]:ge}))},ie=oe=>{const ge=oe.target.value;if(r(Ne=>({...Ne,docnumber:ge})),ge.length>=2){const Ne=h.find(Me=>Me.docnumber&&Me.docnumber.toLowerCase().includes(ge.toLowerCase()));Ne&&z(Ne)}},M=()=>{w&&h.length===0&&(console.log("Input field clicked - fetching documents"),R())},z=oe=>{console.log("Selected document:",oe),r(ge=>({...ge,docnumber:oe.docnumber||"",docDate:oe.docDate||e,postDate:oe.postDate||e,reference:oe.reference||"",location:oe.location||""})),oe.items&&oe.items.length>0&&u(oe.items),v(!1)},ee=(oe,ge,Ne)=>{const Me=[...d];Me[oe][ge]=Ne,u(Me)},ne=()=>{u([...d,{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}])},W=async oe=>{oe.preventDefault();const ge={...t,companyId:B,financialYear:Q,items:d,date:e};try{await Ie.post("/api/goodsTransfer",ge),alert("Goods Transfer Saved Successfully!"),r({category:"",party:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),u([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),k(!1),f([])}catch(Ne){alert("Failed to save. See console for error."),console.error(Ne)}},re=oe=>{P(oe.target.value);const ge=l.filter(Ne=>Ne[I]?.toLowerCase().includes(oe.target.value.toLowerCase()));V(ge)},le=()=>{V(l)},te=()=>{P(""),V([])},K=()=>{T(!1),P(""),V([])},de=oe=>{const ge=[...d];ge[C]={...ge[C],materialId:oe.materialId,description:oe.description,baseUnit:oe.baseUnit,price:oe.price},u(ge),K()},H=h.filter(oe=>!y&&!g?!1:(oe.docnumber?.toLowerCase()||"").includes(g.toLowerCase())),se=()=>{b(""),S(!0),h.length===0&&R()},be=()=>{b(""),S(!1)},ue=oe=>{b(oe.target.value),S(!1)};return n.jsxs("div",{className:"container p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Delivery Challan"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Delivery Challan"})]})})]})}),n.jsxs("form",{onSubmit:W,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:t.category,onChange:Z,children:[n.jsx("option",{value:"",children:"Select"}),i.map((oe,ge)=>n.jsx("option",{value:oe.categoryName,children:oe.categoryName},ge))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Cust/Vendor"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{className:"form-control form-control-sm",value:t.party,onChange:oe=>J("party",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Document No"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:t.docnumber,onChange:ie,onClick:M,readOnly:!w,placeholder:w?"Enter document number...":""}),w&&n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{h.length===0&&R(),v(!0)},children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.docDate,onChange:oe=>J("docDate",oe.target.value)})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Posting Date"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.postDate,onChange:oe=>J("postDate",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"REF"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{className:"form-control form-control-sm",value:t.reference,onChange:oe=>J("reference",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:t.location,onChange:oe=>J("location",oe.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),a.map(oe=>n.jsx("option",{value:oe.name||oe.locationName||oe._id,children:oe.name||oe.locationName||oe._id},oe._id||oe.id||oe.name))]})})]})})]})]}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Text"})]})}),n.jsx("tbody",{children:d.map((oe,ge)=>n.jsxs("tr",{children:[n.jsx("td",{children:ge+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:oe.materialId,readOnly:!0}),!Y&&n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{_(ge),T(!0)},children:""})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control",value:oe.description,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${Y?"bg-light":""}`,value:oe.quantity,onChange:Y?void 0:Ne=>ee(ge,"quantity",Ne.target.value),readOnly:Y,disabled:Y})}),n.jsx("td",{children:n.jsx("input",{className:"form-control",value:oe.baseUnit,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${Y?"bg-light":""}`,type:"date",value:oe.deliveryDate,onChange:Y?void 0:Ne=>ee(ge,"deliveryDate",Ne.target.value),readOnly:Y,disabled:Y})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${Y?"bg-light":""}`,value:oe.lotNo,onChange:Y?void 0:Ne=>ee(ge,"lotNo",Ne.target.value),readOnly:Y,disabled:Y})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${Y?"bg-light":""}`,value:oe.price,onChange:Y?void 0:Ne=>ee(ge,"price",Ne.target.value),readOnly:Y,disabled:Y})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${Y?"bg-light":""}`,value:oe.text,onChange:Y?void 0:Ne=>ee(ge,"text",Ne.target.value),readOnly:Y,disabled:Y})})]},ge))})]})}),!Y&&n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary mb-2 mt-2",onClick:ne,children:"+ Add Row"})]})]}),!Y&&n.jsx("div",{className:"text-end",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),E&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:K})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:oe=>F(oe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:A,onChange:re})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:le,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),q.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:te,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:q.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:q.map((oe,ge)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:oe.materialId})}),n.jsx("td",{children:oe.description}),n.jsx("td",{children:oe.baseUnit}),n.jsx("td",{children:oe.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(oe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ge))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:A?`No materials found for "${A}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:K,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:n.jsx("option",{value:"docnumber",children:"Document Number"})})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:g,onChange:ue})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:se,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(g||y)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:be,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:H.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Document Number"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:H.map((oe,ge)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:oe.docnumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:oe.category})}),n.jsx("td",{children:oe.location}),n.jsx("td",{children:oe.docDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(oe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ge))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:g?`No documents found for "${g}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function c9(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState([]),u=e.filter(h=>{const f=h.description.toLowerCase().includes(r.toLowerCase())||h.materialId.toLowerCase().includes(r.toLowerCase());console.log("matchesSearch",s);const p=s?h.categoryId?._id===s:!0;return f&&p});return j.useEffect(()=>{(async()=>{try{const p=await Ie.get("/api/category",{params:{companyId:o}});d(p.data),console.log("Categories fetched:",p.data)}catch(p){console.error("Failed to fetch categories:",p)}})(),(async()=>{try{console.log("Fetching stock for companyId:",o,"and financialYear:",l);const p=await Ie.get("/api/stock/data",{params:{companyId:o,financialYear:l}});console.log("Stock data fetched:",p.data),t(p.data),console.log("Stock data fetched:",p.data)}catch(p){console.error("Failed to fetch stock:",p)}})()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Stock Inventory"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Stock Inventory"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:" Search by Description or Material No",value:r,onChange:h=>a(h.target.value)})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{className:"form-select",value:s,onChange:h=>i(h.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),c.map(h=>n.jsx("option",{value:h._id,children:h.categoryName},h._id))]})})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[n.jsx("thead",{className:"table-primary text-center",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Lot Number"}),n.jsx("th",{children:"Updated At"})]})}),n.jsx("tbody",{children:u.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"10",className:"text-center",children:"No stock found."})}):u.map((h,f)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:f+1}),n.jsx("td",{children:h.materialId||h.matno}),n.jsx("td",{children:h.description||h.matdesc}),n.jsx("td",{children:h.categoryId?.categoryName}),n.jsx("td",{className:"text-center",children:h.baseUnit||h.uom}),n.jsx("td",{className:"text-end",children:h.quantityAvailable??h.quantity}),n.jsx("td",{className:"text-center",children:n.jsx("span",{className:`badge ${(h.status||(h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="In Stock"?"bg-success":(h.status||(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="Low Stock"?"bg-warning text-dark":"bg-danger"}`,children:h.status||((h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")})}),n.jsx("td",{children:h.location||"-"}),n.jsx("td",{children:h.lotNumber||"-"}),n.jsx("td",{children:h.updatedAt?new Date(h.updatedAt).toLocaleString():"-"})]},f))})]})})})]})]})}const DD=10,G4e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),[o,l]=j.useState(!0),[c,d]=j.useState(null),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),j.useEffect(()=>{f()},[]);const f=async()=>{try{const k=(await Ie.get("/api/invoiceform",{params:{companyId:u,financialYear:h}})).data.sort((C,_)=>new Date(_.createdAt)-new Date(C.createdAt));t(k),d(null)}catch(w){d("Failed to fetch invoices"),console.error(w)}finally{l(!1)}},p=w=>{a(w.target.value),i(1)},v=j.useMemo(()=>r?e.filter(w=>[w.docnumber,w.vendor,w.location,w.invoiceRef,w.reference].join(" ").toLowerCase().includes(r.toLowerCase())):e,[r,e]),g=Math.ceil(v.length/DD),b=j.useMemo(()=>{const w=(s-1)*DD;return v.slice(w,w+DD)},[v,s]),y=w=>{w<1||w>g||i(w)},S=w=>{const k=`
    <html>
      <head>
        <title>Invoice - ${w.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Invoice Document</h2>
        <p><strong>Document No:</strong> ${w.docnumber}</p>
        <p><strong>Vendor:</strong> ${w.vendor}</p>
        <p><strong>Location:</strong> ${w.location}</p>
        <p><strong>Reference:</strong> ${w.reference||"-"}</p>
        <p><strong>Invoice Ref:</strong> ${w.invoiceRef||"-"}</p>
        <p><strong>Date:</strong> ${new Date(w.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map((_,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${_.materialId||"DEMO"}</td>
                <td>${_.description}</td>
                <td>${_.quantity}</td>
                <td>${_.baseUnit}</td>
                <td>${parseFloat(_.price).toFixed(2)}</td>
                <td>${(_.price*_.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${w.totalAmount?.toFixed(2)||"-"}</p>
          <p>Discount: ${w.discount?.toFixed(2)||"0.00"}</p>
          <p>Net Amount: ${w.netAmount?.toFixed(2)||"-"}</p>
          <p>CGST: ${w.cgst}</p>
          <p>SGST: ${w.sgst}</p>
          <p>IGST: ${w.igst}</p>
          <p><strong>Final Total: ${w.finalTotal?.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,C=window.open("","_blank");C.document.write(k),C.document.close(),C.focus(),C.print()};return o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):c?n.jsx("div",{className:"alert alert-danger",children:c}):n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Invoice List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex justify-content-between ",children:[n.jsx("h5",{}),n.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Search invoices...",className:"form-control w-25"})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Invoice Ref"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Final Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:b.map((w,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:k+1}),n.jsx("td",{children:w.docnumber}),n.jsx("td",{children:w.vendor}),n.jsx("td",{children:w.location}),n.jsx("td",{children:w.reference||"-"}),n.jsx("td",{children:w.invoiceRef||"-"}),n.jsx("td",{children:new Date(w.postingDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:["",w.finalTotal]}),n.jsx("td",{children:n.jsx("button",{onClick:()=>S(w),className:"btn btn-sm btn-primary",children:"Print"})})]},w._id))})]})})})]}),n.jsx("nav",{className:"d-flex justify-content-end",children:n.jsxs("ul",{className:"pagination pagination-sm",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(s-1),children:""})}),Array.from({length:g},(w,k)=>n.jsx("li",{className:`page-item ${s===k+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),n.jsx("li",{className:`page-item ${s===g?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(s+1),children:""})})]})})]})};function Y4e(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[h,f]=j.useState({}),[p,v]=j.useState(0),g=rh(),[b,y]=j.useState(null),[S,w]=j.useState(!1),[k,C]=j.useState(!1),[_,E]=j.useState(null),[T,I]=j.useState("po"),[F,A]=j.useState([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),P=localStorage.getItem("selectedCompanyId"),q=localStorage.getItem("financialYear"),V=localStorage.getItem("selectedCompanyId"),[Y,B]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:new Date(e).toISOString().split("T")[0],postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[Q,R]=j.useState(""),[Z,J]=j.useState("poNumber"),[ie,M]=j.useState(!1),[z,ee]=j.useState(""),[ne,W]=j.useState("name1"),[re,le]=j.useState(!1),[te,K]=j.useState(!1),[de,H]=j.useState("materialId"),[se,be]=j.useState(""),[ue,oe]=j.useState(!1);j.useEffect(()=>{Ie.get("/api/purchase-orders",{params:{companyId:P,financialYear:q}}).then(Pe=>r(Pe.data)).catch(Pe=>console.error("Error fetching POs:",Pe)),Ie.get("/api/vendors",{params:{companyId:P,financialYear:q}}).then(Pe=>s(Pe.data)).catch(Pe=>console.error("Error fetching vendors:",Pe)),Ie.get("/api/material",{params:{companyId:P,financialYear:q}}).then(Pe=>o(Pe.data)).catch(Pe=>console.error("Error fetching materials:",Pe)),Ie.get("/api/invoicecategory",{params:{companyId:P}}).then(Pe=>c(Pe.data)).catch(Pe=>console.error("Error fetching categories:",Pe)),Ie.get("/api/tax",{params:{companyId:P,financialYear:q}}).then(Pe=>u(Pe.data)).catch(Pe=>console.error("Error fetching tax:",Pe))},[]);const ge=Pe=>{console.log("Selected PO:",Pe),y(Pe),B(Re=>({...Re,vendor:Pe.vendor||"",location:Pe.deliveryLocation||"",priceUnit:Pe.priceUnit||""})),w(!1)},Ne=Pe=>{B(Re=>({...Re,vendor:Pe.name1})),C(!1)},Me=Pe=>{if(console.log("Selected material:",Pe),_!==null){let Re=[];b?Re=[...b?.items]:Re=[...F],Re[_]&&(console.log("Updating item at index",_,"with material",Pe),Re[_]={...Re[_],materialId:Pe.materialId,description:Pe.description,baseUnit:Pe.baseUnit,price:Pe.price,priceUnit:Pe.priceUnit||Y.priceUnit},y(Ye=>({...Ye,items:Re})))}K(!1)},We=Pe=>{const Re=Pe.target.value,Ye=l.find(At=>At.categoryName===Re);console.log(new Date(Ye.financialYearStart).toLocaleDateString("en-IN")+" - "+new Date(Ye.financialYearEnd).toLocaleDateString("en-IN")),B(At=>({...At,category:Re,catdesc:Ye?.description||"",financialYear:new String(new Date(Ye.financialYearStart).toLocaleDateString("en-IN")+" - "+new Date(Ye.financialYearEnd).toLocaleDateString("en-IN"))}))},tt=(Pe,Re,Ye)=>{const At=[...b.items];At[Pe][Re]=Ye,y({...b,items:At})},mt=(Pe,Re,Ye)=>{const At=[...F];if(At[Pe][Re]=Ye,Re==="quantity"||Re==="price"){const Gt=parseFloat(At[Pe].quantity||0),De=parseFloat(At[Pe].price||0);At[Pe].amount=Gt*De}A(At)},Be=()=>{A([...F,{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}])},dt=Pe=>{if(F.length>1){const Re=F.filter((Ye,At)=>At!==Pe);A(Re)}},Dt=Pe=>{I(Pe),Pe==="misc"&&(y(null),B(Re=>({...Re,vendor:"",location:""})))},It=async Pe=>{if(Pe.preventDefault(),T==="po"&&!b)return alert("Please select a Purchase Order.");if(T==="misc"&&!Y.vendor)return alert("Please select a vendor for miscellaneous invoice.");const Re={...Y,invoiceType:T,purchaseOrderId:T==="po"?b._id:null,items:T==="po"?b.items:F,receiptDate:e,taxCode:h.taxCode,taxName:h.taxName,cgst:ze,sgst:Fe,igst:Ve,companyId:V,totalAmount:ve,discount:p,netAmount:Te,finalTotal:pt,balance:pt};try{await Ie.post("/api/invoiceform",Re),alert("Invoice saved successfully!"),g("/InvoiceList"),B({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",priceUnit:"",balance:""}),y(null),f({}),v(0),A([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),I("po")}catch(Ye){console.error("Error saving invoice:",Ye),alert("Failed to save invoice")}},zt=t.filter(Pe=>!ie&&!Q?!1:(Pe[Z]?.toLowerCase()||"").includes(Q.toLowerCase())),xe=a.filter(Pe=>!re&&!z?!1:(Pe[ne]?.toLowerCase()||"").includes(z.toLowerCase())),fe=i.filter(Pe=>!ue&&!se?!1:(Pe[de]?.toLowerCase()||"").includes(se.toLowerCase())),ve=T==="po"?b?.items?.reduce((Pe,Re)=>Pe+parseFloat(Re.quantity||0)*parseFloat(Re.price||0),0)||0:F.reduce((Pe,Re)=>Pe+parseFloat(Re.amount||0),0)||0,pe=parseFloat(p||0),Te=ve-pe,Xe=parseFloat(h.cgst||0),kt=parseFloat(h.sgst||0),Je=parseFloat(h.igst||0),ze=parseFloat((Xe/100*Te).toFixed(2)),Fe=parseFloat((kt/100*Te).toFixed(2)),Ve=parseFloat((Je/100*Te).toFixed(2)),pt=parseFloat((Te+ze+Fe+Ve).toFixed(2));return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Invoice Creation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice Creation"})]})})]})}),n.jsxs("form",{onSubmit:It,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("div",{className:"row mb-3",children:n.jsxs("div",{className:"col-md-12",children:[n.jsx("label",{className:"form-label",children:"Invoice Type:"}),n.jsxs("div",{className:"d-flex gap-3",children:[n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"poInvoice",value:"po",checked:T==="po",onChange:Pe=>Dt(Pe.target.value)}),n.jsx("label",{className:"form-check-label",htmlFor:"poInvoice",children:"Purchase Order Invoice"})]}),n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"miscInvoice",value:"misc",checked:T==="misc",onChange:Pe=>Dt(Pe.target.value)}),n.jsx("label",{className:"form-check-label",htmlFor:"miscInvoice",children:"Miscellaneous Invoice"})]})]})]})}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("select",{className:"form-select",value:Y.category,onChange:We,children:[n.jsx("option",{value:"",children:"Select"}),l.map(Pe=>n.jsx("option",{value:Pe.categoryName,children:Pe.categoryName},Pe._id))]})})]})}),T==="po"&&n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",placeholder:"Enter PO Number",className:"form-control form-control-sm",value:b?.poNumber||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>w(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Vendor :"})}),n.jsx("div",{className:"col-md-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Vendor Name",value:Y.vendor,readOnly:T==="po"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>C(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Tax Code :"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("select",{className:"form-select",value:h.taxCode||"",onChange:Pe=>{const Re=d.find(Ye=>Ye.taxCode===Pe.target.value);f(Re||{})},children:[n.jsx("option",{value:"",children:"Select"}),d.map(Pe=>n.jsxs("option",{value:Pe.taxCode,children:[Pe.taxCode," - ",Pe.taxName]},Pe._id))]})})]})})," ",n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Tax Name :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Tax Name",value:h.taxName||"",onChange:Pe=>f(Re=>({...Re,taxName:Pe.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-5",children:n.jsx("label",{className:"form-label",children:"Document Date :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"date",className:"form-control",value:Y.documentDate,onChange:Pe=>B(Re=>({...Re,documentDate:Pe.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Posting_Date:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"date",className:"form-control",value:Y.postingDate,required:!0,onChange:Pe=>B(Re=>({...Re,postingDate:Pe.target.value}))})})]})}),n.jsxs("div",{className:"col-md-3",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Reference:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Reference",value:Y.reference,onChange:Pe=>B(Re=>({...Re,reference:Pe.target.value}))})})]}),"       "]}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",placeholder:"Enter Location",className:"form-control",value:Y.location,onChange:Pe=>B(Re=>({...Re,location:Pe.target.value})),readOnly:T==="po"})})]})})," ",n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Invoice Ref :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Invoice Reference",value:Y.invoiceRef,onChange:Pe=>B(Re=>({...Re,invoiceRef:Pe.target.value}))})})]})})]})]}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:T==="po"?n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"})]})}),n.jsx("tbody",{children:(b?.items?.length?b.items:[{}]).map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:Re+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Pe.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(Re),K(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.hsnNo||"",onChange:Ye=>tt(Re,"hsnNo",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Pe.quantity||"",onChange:Ye=>tt(Re,"quantity",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:Pe.deliveryDate,onChange:Ye=>tt(Re,"deliveryDate",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.lotNo||"",onChange:Ye=>tt(Re,"lotNo",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Pe.price||"",onChange:Ye=>tt(Re,"price",Ye.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.priceUnit||"",onChange:Ye=>tt(Re,"priceUnit",Ye.target.value),required:!0})})]},Re))})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h6",{children:"Miscellaneous Items"}),n.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Be,children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:F.map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:Re+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.description,onChange:Ye=>mt(Re,"description",Ye.target.value),placeholder:"Enter description"})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.hsnNo,onChange:Ye=>mt(Re,"hsnNo",Ye.target.value),placeholder:"HSN Code"})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Pe.quantity,onChange:Ye=>mt(Re,"quantity",Ye.target.value),min:"0",step:"0.01"})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.baseUnit,onChange:Ye=>mt(Re,"baseUnit",Ye.target.value),placeholder:"Unit"})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Pe.price,onChange:Ye=>{Ye.target.value=Ye.target.value.replace(/[^0-9.]/g,""),mt(Re,"price",Ye.target.value)},min:"0"})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Pe.amount.toFixed(2),readOnly:!0})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>dt(Re),disabled:F.length===1,children:n.jsx("i",{className:"fas fa-trash"})})})]},Re))})]})]})}),n.jsx("div",{className:"row justify-content-end mt-3",children:n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"card  p-3",children:[n.jsx("h6",{className:"mb-3",children:"Billing Summary"}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"Total Amount"}),n.jsx("input",{type:"number",className:"form-control",value:ve.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"Discount"}),n.jsx("input",{type:"number",className:"form-control",value:p,onChange:Pe=>v(parseFloat(Pe.target.value)||0)})]}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"Net Amount"}),n.jsx("input",{type:"number",className:"form-control",value:Te.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"CGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:h.cgst||"",onChange:Pe=>{let Re=Pe.target.value.replace(/[^0-9.]/g,"");if((Re.match(/\./g)||[]).length>1&&(Re=Re.substring(0,Re.length-1)),Re.includes(".")){const[Ye,At]=Re.split(".");Re=Ye+"."+At.slice(0,2)}Re!==""&&Number(Re)>100&&(Re="100"),f(Ye=>({...Ye,cgst:Re}))}})]}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"SGST /UGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:h.sgst||"",onChange:Pe=>{let Re=Pe.target.value.replace(/[^0-9.]/g,"");if((Re.match(/\./g)||[]).length>1&&(Re=Re.substring(0,Re.length-1)),Re.includes(".")){const[Ye,At]=Re.split(".");Re=Ye+"."+At.slice(0,2)}Re!==""&&Number(Re)>100&&(Re="100"),f(Ye=>({...Ye,sgst:Re}))}})]}),n.jsxs("div",{className:"col-12 mb-2",children:[n.jsx("label",{className:"form-label",children:"IGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:h.igst||"",onChange:Pe=>{let Re=Pe.target.value.replace(/[^0-9.]/g,"");if((Re.match(/\./g)||[]).length>1&&(Re=Re.substring(0,Re.length-1)),Re.includes(".")){const[Ye,At]=Re.split(".");Re=Ye+"."+At.slice(0,2)}Re!==""&&Number(Re)>100&&(Re="100"),f(Ye=>({...Ye,igst:Re}))}})]}),n.jsxs("div",{className:"mb-0 fw-bold",children:[n.jsx("label",{className:"form-label",children:"Final Total"}),n.jsx("input",{type:"number",className:"form-control",value:pt.toFixed(2),readOnly:!0})]})]})})})]})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save Invoice"})})]}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ne,onChange:Pe=>W(Pe.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ne}`,value:z,onChange:Pe=>ee(Pe.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>le(!0),children:"View All"}),(z||re)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{ee(""),le(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Pe.vendorId})}),n.jsx("td",{children:Pe.name1}),n.jsx("td",{children:Pe.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Pe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Re))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:z?`No vendors found for "${z}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&S&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>w(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Z,onChange:Pe=>J(Pe.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Z}`,value:Q,onChange:Pe=>R(Pe.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>M(!0),children:"View All"}),(Q||ie)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{R(""),M(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:zt.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:zt.map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Pe.poNumber})}),n.jsx("td",{children:Pe.vendor}),n.jsx("td",{children:Pe.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ge(Pe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Re))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Q?`No purchase orders found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>w(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&te&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:de,onChange:Pe=>H(Pe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${de}`,value:se,onChange:Pe=>be(Pe.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>oe(!0),children:"View All"}),(se||ue)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{be(""),oe(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:fe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:fe.map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Pe.materialId})}),n.jsx("td",{children:Pe.description}),n.jsx("td",{children:Pe.baseUnit}),n.jsx("td",{children:Pe.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Me(Pe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Re))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:se?`No materials found for "${se}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function K4e(){const e=new Date().toISOString().split("T")[0];rh();const[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState({}),[d,u]=j.useState(0),[h,f]=j.useState([]),[p,v]=j.useState(null),[g,b]=j.useState(!1),[y,S]=j.useState(!1),[w,k]=j.useState(null),[C,_]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[E,T]=j.useState(""),[I,F]=j.useState("soNumber"),[A,P]=j.useState(!1),[q,V]=j.useState([]),[Y,B]=j.useState("name1"),[Q,R]=j.useState(""),[Z,J]=j.useState(!1),[ie,M]=j.useState(!1),[z,ee]=j.useState("materialId"),[ne,W]=j.useState(""),[re,le]=j.useState(!1),te=localStorage.getItem("selectedCompanyId"),K=localStorage.getItem("financialYear"),de=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Ie.get("/api/sales-orders",{params:{companyId:te,financialYear:K}}).then(Je=>f(Je.data)).catch(Je=>console.error("Error fetching sales orders",Je)),Ie.get("/api/customers",{params:{companyId:te,financialYear:K}}).then(Je=>V(Je.data)).catch(Je=>console.error("Error fetching customers",Je)),Ie.get("/api/material",{params:{companyId:te,financialYear:K}}).then(Je=>r(Je.data)).catch(Je=>console.error("Error fetching materials:",Je)),Ie.get("/api/billingcategory",{params:{companyId:te}}).then(Je=>s(Je.data)).catch(Je=>console.error("Error fetching categories:",Je)),Ie.get("/api/tax",{params:{companyId:te,financialYear:K}}).then(Je=>o(Je.data)).catch(Je=>console.error("Error fetching tax:",Je))},[]);const H=Je=>{v(Je),_(ze=>({...ze,customer:Je.sales||Je.customer||Je.customerName,location:Je.deliveryLocation||""})),b(!1)},se=Je=>{_(ze=>({...ze,customer:Je.name1})),S(!1)},be=Je=>{if(w!==null&&p?.items){const ze=[...p.items];ze[w]&&(ze[w]={...ze[w],materialId:Je.materialId,description:Je.description,baseUnit:Je.baseUnit,price:Je.price,priceUnit:Je.priceUnit||C.priceUnit},v(Fe=>({...Fe,items:ze})))}M(!1)},ue=Je=>{const ze=Je.target.value,Fe=a.find(Ve=>Ve.categoryName===ze);_(Ve=>({...Ve,category:ze,catdesc:Fe?.description||""}))},oe=(Je,ze,Fe)=>{const Ve=[...p.items];Ve[Je][ze]=Fe,v({...p,items:Ve})},ge=p?.items?.reduce((Je,ze)=>Je+parseFloat(ze.quantity||0)*parseFloat(ze.price||0),0)||0,Ne=parseFloat(d||0),Me=ge-Ne,We=parseFloat(l.cgst||0),tt=parseFloat(l.sgst||0),mt=parseFloat(l.igst||0),Be=We/100*Me,dt=tt/100*Me,Dt=mt/100*Me,It=parseFloat((Me+Be+dt+Dt).toFixed(2)),zt=async Je=>{if(Je.preventDefault(),!p)return alert("Please select a Purchase Order.");const ze={...C,salesOrderId:p._id,items:p.items,receiptDate:e,taxCode:l.taxCode,taxName:l.taxName,companyId:de,financialYear:K,cgst:Be,sgst:dt,igst:Dt,totalAmount:ge,discount:d,netAmount:Me,finalTotal:It,balance:It};console.log(ze.finalTotal);try{await Ie.post("/api/billingform",ze),alert("billing saved successfully!"),_({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",priceUnit:"",balance:""}),v(null),c({}),u(0)}catch(Fe){console.error("Error saving biiling:",Fe),alert("Failed to save billing")}},xe=h.filter(Je=>!A&&!E?!1:(Je[I]?.toLowerCase()||"").includes(E.toLowerCase())),fe=q.filter(Je=>!Z&&!Q?!1:(Je[Y]?.toLowerCase()||"").includes(Q.toLowerCase())),ve=t.filter(Je=>!re&&!ne?!1:(Je[z]?.toLowerCase()||"").includes(ne.toLowerCase())),pe=()=>{T(""),P(!0)},Te=()=>{T(""),P(!1)},Xe=()=>{R(""),J(!0)},kt=()=>{R(""),J(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Invoice Creation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice Creation"})]})})]})}),n.jsxs("form",{onSubmit:zt,children:[n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("div",{className:"row ",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Category :"}),n.jsxs("select",{className:"form-select",value:C.category,onChange:ue,children:[n.jsx("option",{value:"",children:"Select"}),a.map(Je=>n.jsx("option",{value:Je.categoryName,children:Je.categoryName},Je._id))]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Sales Order :"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"so",placeholder:"Search Sales Order",value:p?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Customer :"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search Customer",value:C.customer,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>S(!0),children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Code :"}),n.jsxs("select",{className:"form-select",value:l.taxCode||"",onChange:Je=>{const ze=i.find(Fe=>Fe.taxCode===Je.target.value);c(ze||{})},children:[n.jsx("option",{value:"",children:"Select"}),i.map(Je=>n.jsxs("option",{value:Je.taxCode,children:[Je.taxCode," - ",Je.taxName]},Je._id))]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"180px"},children:"Document Date :"}),n.jsx("input",{type:"date",className:"form-control",value:C.documentDate,onChange:Je=>_(ze=>({...ze,documentDate:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"180px"},children:"Posting Date:"}),n.jsx("input",{type:"date",className:"form-control",value:C.postingDate,onChange:Je=>_(ze=>({...ze,postingDate:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Reference :"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Reference",value:C.reference,onChange:Je=>_(ze=>({...ze,reference:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Location :"}),n.jsx("input",{type:"text",placeholder:"Location",className:"form-control",value:C.location,readOnly:!0})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Billing Ref :"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Billing Reference",value:C.BillingRef,onChange:Je=>_(ze=>({...ze,BillingRef:Je.target.value}))})]})})]})})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"})]})}),n.jsx("tbody",{children:(p?.items?.length?p.items:[{}]).map((Je,ze)=>n.jsxs("tr",{children:[n.jsx("td",{children:ze+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Je.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{k(ze),M(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.hsnNo||"",onChange:Fe=>oe(ze,"hsnNo",Fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Je.quantity||"",onChange:Fe=>oe(ze,"quantity",Fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:Je.deliveryDate,onChange:Fe=>oe(ze,"deliveryDate",Fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.lotNo||"",onChange:Fe=>oe(ze,"lotNo",Fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Je.price||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.priceUnit||"",readOnly:!0})})]},ze))})]})}),n.jsx("div",{className:"row justify-content-end mt-3",children:n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"card p-3",children:[n.jsx("h6",{className:"mb-3",children:"Billing Summary"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-12 mb-2",children:[n.jsx("label",{children:"Total Amount"}),n.jsx("input",{type:"number",className:"form-control",value:ge.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:" col-xl-12 mb-2",children:[n.jsx("label",{children:"Discount"}),n.jsx("input",{type:"number",className:"form-control",value:d,onChange:Je=>u(parseFloat(Je.target.value)||0)})]}),n.jsxs("div",{className:" col-xl-12 mb-2",children:[n.jsx("label",{children:"Net Amount"}),n.jsx("input",{type:"number",className:"form-control",value:Me.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:"col-xl-12 mb-2",children:[n.jsx("label",{children:"CGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:l.cgst||"",onChange:Je=>{let ze=Je.target.value.replace(/[^0-9.]/g,"");if((ze.match(/\./g)||[]).length>1&&(ze=ze.substring(0,ze.length-1)),ze.includes(".")){const[Fe,Ve]=ze.split(".");ze=Fe+"."+Ve.slice(0,2)}ze!==""&&Number(ze)>100&&(ze="100"),c(Fe=>({...Fe,cgst:ze}))}})]}),n.jsxs("div",{className:"col-xl-12 mb-2",children:[n.jsx("label",{children:"SGST /UGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:l.sgst||"",onChange:Je=>{let ze=Je.target.value.replace(/[^0-9.]/g,"");if((ze.match(/\./g)||[]).length>1&&(ze=ze.substring(0,ze.length-1)),ze.includes(".")){const[Fe,Ve]=ze.split(".");ze=Fe+"."+Ve.slice(0,2)}ze!==""&&Number(ze)>100&&(ze="100"),c(Fe=>({...Fe,sgst:ze}))}})]}),n.jsxs("div",{className:"col-xl-12 mb-2",children:[n.jsx("label",{children:"IGST (%)"}),n.jsx("input",{type:"text",className:"form-control",value:l.igst||"",onChange:Je=>{let ze=Je.target.value.replace(/[^0-9.]/g,"");if((ze.match(/\./g)||[]).length>1&&(ze=ze.substring(0,ze.length-1)),ze.includes(".")){const[Fe,Ve]=ze.split(".");ze=Fe+"."+Ve.slice(0,2)}ze!==""&&Number(ze)>100&&(ze="100"),c(Fe=>({...Fe,igst:ze}))}})]})]}),n.jsxs("div",{className:"mb-0 fw-bold",children:[n.jsx("label",{children:"Final Total"}),n.jsx("input",{type:"number",className:"form-control",value:It,readOnly:!0})]})]})})})]})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),g&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:Je=>F(Je.target.value),children:[n.jsx("option",{value:"soNumber",children:"SO Number"}),n.jsx("option",{value:"sales",children:"Customer"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:E,onChange:Je=>T(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:pe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(E||A)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Te,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Sales"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((Je,ze)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Je.soNumber})}),n.jsx("td",{children:Je.sales||Je.customer||Je.customerName}),n.jsx("td",{children:Je.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>H(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ze))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No sales orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),y&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Y,onChange:Je=>B(Je.target.value),children:[n.jsx("option",{value:"name1",children:"Customer Name"}),n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Y}`,value:Q,onChange:Je=>R(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(Q||Z)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:kt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:fe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:fe.map((Je,ze)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Je.customerId})}),n.jsx("td",{children:Je.name1}),n.jsx("td",{children:Je.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>se(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ze))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Q?`No customers found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),ie&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:z,onChange:Je=>ee(Je.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${z}`,value:ne,onChange:Je=>W(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>le(!0),children:"View All"}),(ne||re)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),le(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ve.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ve.map((Je,ze)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Je.materialId})}),n.jsx("td",{children:Je.description}),n.jsx("td",{children:Je.baseUnit}),n.jsx("td",{children:Je.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>be(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ze))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:ne?`No materials found for "${ne}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const AD=10,X4e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(1),[u,h]=j.useState(!1),[f,p]=j.useState(null),[v,g]=j.useState({original:!1,duplicate:!1,carbonCopy:!1}),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),j.useEffect(()=>{S()},[]);const S=async()=>{try{const q=await Ie.get("/api/billingform",{params:{companyId:b,financialYear:y}});t(q.data),i(null)}catch(q){i("Failed to fetch billing data"),console.error(q)}finally{a(!1)}},w=q=>{l(q.target.value),d(1)},k=j.useMemo(()=>o?e.filter(q=>[q.docnumber,q.customer,q.reference,q.BillingRef,q.location].join(" ").toLowerCase().includes(o.toLowerCase())):e,[o,e]),C=Math.ceil(k.length/AD),_=j.useMemo(()=>{const q=(c-1)*AD;return k.slice(q,q+AD)},[k,c]),E=q=>{q<1||q>C||d(q)},T=q=>{p(q),h(!0),g({original:!1,duplicate:!1,carbonCopy:!1})},I=(q,V)=>{g(Y=>({...Y,[q]:V}))},F=(q,V)=>{const Y={original:"ORIGINAL",duplicate:"DUPLICATE",carbonCopy:"CARBON COPY"};return V.map(B=>`
      <div class="print-page" style="page-break-after: always;">
        <div style="font-family: Arial; padding: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0; text-align: left;">Billing Document</h2>
            <div style="font-weight: bold; font-size: 16px; color: #d9534f;">
              ${Y[B]}
            </div>
          </div>
          
          <p><strong>Document No:</strong> ${q.docnumber}</p>
          <p><strong>Customer:</strong> ${q.customer}</p>
          <p><strong>Location:</strong> ${q.location}</p>
          <p><strong>Reference:</strong> ${q.reference}</p>
          <p><strong>Invoice Ref:</strong> ${q.BillingRef}</p>
          <p><strong>Date:</strong> ${new Date(q.documentDate).toLocaleDateString()}</p>

          <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
              <tr>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">#</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Material ID</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Description</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Qty</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Unit</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Price</th>
                <th style="border: 1px solid #ccc; padding: 8px; background: #f0f0f0;">Total</th>
              </tr>
            </thead>
            <tbody>
              ${q.items.map((Q,R)=>`
                <tr>
                  <td style="border: 1px solid #ccc; padding: 8px;">${R+1}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${Q.materialId}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${Q.description}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${Q.quantity}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${Q.baseUnit}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${parseFloat(Q.price).toFixed(2)}</td>
                  <td style="border: 1px solid #ccc; padding: 8px;">${(Q.price*Q.quantity).toFixed(2)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div style="margin-top: 20px; font-weight: bold;">
            <p style="margin: 4px 0;">Total Amount: ${q.totalAmount.toFixed(2)}</p>
            <p style="margin: 4px 0;">Discount: ${q.discount.toFixed(2)}</p>
            <p style="margin: 4px 0;">Net Amount: ${q.netAmount.toFixed(2)}</p>
            <p style="margin: 4px 0;">CGST: ${q.cgst}</p>
            <p style="margin: 4px 0;">SGST: ${q.sgst}</p>
            <p style="margin: 4px 0;">IGST: ${q.igst}</p>
            <p style="margin: 4px 0;"><strong>Final Total: ${q.finalTotal.toFixed(2)}</strong></p>
          </div>

          <div style="margin-top: 40px; font-size: 12px; text-align: right;">
            Printed on: ${new Date().toLocaleString()}
          </div>
        </div>
      </div>
    `).join("")},A=()=>{const q=Object.entries(v).filter(([Q,R])=>R).map(([Q,R])=>Q);if(q.length===0){alert("Please select at least one print option");return}const V=F(f,q),Y=document.createElement("div");Y.innerHTML=`
      <html>
        <head>
          <title>Billing - ${f.docnumber}</title>
          <style>
            @media print {
              body { margin: 0; }
              .print-page { 
                page-break-after: always; 
              }
              .print-page:last-child {
                page-break-after: avoid;
              }
            }
            @media screen {
              .print-page {
                margin-bottom: 50px;
                border: 1px solid #ddd;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
              }
            }
          </style>
        </head>
        <body>
          ${V}
        </body>
      </html>
    `;const B=document.body.innerHTML;document.body.innerHTML=Y.innerHTML,window.print(),document.body.innerHTML=B,h(!1),p(null)},P=()=>{h(!1),p(null),g({original:!1,duplicate:!1,carbonCopy:!1})};return r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsx("div",{className:"alert alert-danger",children:s}):n.jsxs("div",{className:"content mt-4",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Invoice List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("h5",{}),n.jsx("input",{type:"text",value:o,onChange:w,placeholder:"Search billing...",className:"form-control w-25"})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Ref"}),n.jsx("th",{children:"BillingRef"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Final Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:_.map((q,V)=>n.jsxs("tr",{children:[n.jsx("td",{children:V+1}),n.jsx("td",{children:q.docnumber}),n.jsx("td",{children:q.customer}),n.jsx("td",{children:q.location}),n.jsx("td",{children:q.reference}),n.jsx("td",{children:q.BillingRef}),n.jsx("td",{children:new Date(q.postingDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:["",q.finalTotal]}),n.jsx("td",{children:n.jsx("button",{onClick:()=>T(q),className:"btn btn-sm btn-primary",children:"Print"})})]},q._id))})]})})})]}),n.jsx("nav",{className:"d-flex justify-content-end",children:n.jsxs("ul",{className:"pagination pagination-sm",children:[n.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(c-1),children:""})}),Array.from({length:C},(q,V)=>n.jsx("li",{className:`page-item ${c===V+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(V+1),children:V+1})},V+1)),n.jsx("li",{className:`page-item ${c===C?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(c+1),children:""})})]})}),u&&n.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Select Print Options"}),n.jsx("button",{type:"button",className:"btn-close",onClick:P})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{className:"mb-3",children:["Select the type of copies you want to print for document: ",n.jsx("strong",{children:f?.docnumber})]}),n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"original",checked:v.original,onChange:q=>I("original",q.target.checked)}),n.jsx("label",{className:"form-check-label",htmlFor:"original",children:"Original"})]}),n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"duplicate",checked:v.duplicate,onChange:q=>I("duplicate",q.target.checked)}),n.jsx("label",{className:"form-check-label",htmlFor:"duplicate",children:"Duplicate"})]}),n.jsxs("div",{className:"form-check mb-3",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"carbonCopy",checked:v.carbonCopy,onChange:q=>I("carbonCopy",q.target.checked)}),n.jsx("label",{className:"form-check-label",htmlFor:"carbonCopy",children:"Carbon Copy"})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:P,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:A,children:"Print Selected"})]})]})})})]})},d9={productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",taxRate:""};function Q4e(){const[e,t]=j.useState("Outward"),[r,a]=j.useState({type:"",number:"",date:""}),[s,i]=j.useState({name:"",gstin:"",address:"",state:""}),[o,l]=j.useState({name:"",gstin:"",address:"",state:""}),[c,d]=j.useState([{...d9}]),[u,h]=j.useState({mode:"",transporterId:"",vehicleNo:"",distance:""}),[f,p]=j.useState(!1),[v,g]=j.useState([]);j.useEffect(()=>{const C=JSON.parse(localStorage.getItem("invoices"))||[];g(C)},[]);const b=(C,_,E)=>{const T=[...c];T[C][_]=E,d(T)},y=()=>d([...c,{...d9}]),S=C=>d(c.filter((_,E)=>E!==C)),w=C=>{C.preventDefault(),console.log("e-Way Bill Data:",{transactionType:e,document:r,consignor:s,consignee:o,items:c,transport:u}),alert("e-Way Bill data logged to console.")},k=C=>{a({type:C.category,number:C.docnumber,date:C.docdate}),i({name:"Your Company",gstin:"",address:"",state:""}),l({name:C.customer,gstin:"",address:C.location,state:""});const _=C.items.map(E=>({productName:E.matdesc,hsnCode:"",quantity:E.matqty,unit:E.unit,taxableValue:E.price*E.matqty,taxRate:18}));d(_),p(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("h3",{className:"mb-4",children:"e-Way Bill Entry"}),n.jsx("button",{className:"btn btn-outline-primary mb-3",onClick:()=>p(!0),children:"Search Billing"}),n.jsxs("form",{onSubmit:w,children:[n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{className:"col-sm-3 col-form-label",children:"Transaction Type"}),n.jsxs("div",{className:"col-sm-9 d-flex align-items-center",children:[n.jsxs("div",{className:"form-check me-3",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"outward",checked:e==="Outward",onChange:()=>t("Outward")}),n.jsx("label",{className:"form-check-label",htmlFor:"outward",children:"Outward"})]}),n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"inward",checked:e==="Inward",onChange:()=>t("Inward")}),n.jsx("label",{className:"form-check-label",htmlFor:"inward",children:"Inward"})]})]})]}),n.jsx("h5",{children:"Document Details"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentType",className:"col-sm-3 col-form-label",children:"Document Type"}),n.jsx("input",{type:"text",className:"form-control",id:"documentType",placeholder:"Invoice, Bill of Supply, etc.",value:r.type,onChange:C=>a({...r,type:C.target.value}),required:!0})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentNumber",className:"col-sm-3 col-form-label",children:"Document Number"}),n.jsx("input",{type:"text",className:"form-control",id:"documentNumber",value:r.number,onChange:C=>a({...r,number:C.target.value}),required:!0})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentDate",className:"col-sm-3 col-form-label",children:"Document Date"}),n.jsx("input",{type:"date",className:"form-control",id:"documentDate",value:r.date,onChange:C=>a({...r,date:C.target.value}),required:!0})]})]}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-5",children:[n.jsx("h5",{children:"Consignor (From)"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorName",className:"col-sm-3 col-form-label",children:"Name"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorName",value:s.name,onChange:C=>i({...s,name:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:s.gstin,onChange:C=>i({...s,gstin:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorAddress",className:"col-sm-3 col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorAddress",value:s.address,onChange:C=>i({...s,address:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"consignorState",className:"col-sm-3 col-form-label",children:"State"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorState",placeholder:"State name or code",value:s.state,onChange:C=>i({...s,state:C.target.value}),required:!0})]})]}),n.jsxs("div",{className:"col-xl-5",children:[n.jsx("h5",{children:"Consignee (To)"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeName",className:"col-sm-3 col-form-label",children:"Name"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeName",value:o.name,onChange:C=>l({...o,name:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:o.gstin,onChange:C=>l({...o,gstin:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeAddress",className:"col-sm-3 col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeAddress",value:o.address,onChange:C=>l({...o,address:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"consigneeState",className:"col-sm-3 col-form-label",children:"State"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeState",placeholder:"State name or code",value:o.state,onChange:C=>l({...o,state:C.target.value}),required:!0})]})]})]}),n.jsx("h5",{children:"Item Details"}),n.jsxs("table",{className:"table table-bordered table-hover table-sm mb-3",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Product Name"}),n.jsx("th",{children:"HSN Code"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Taxable Value"}),n.jsx("th",{children:"Tax Rate (%)"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:c.map((C,_)=>n.jsxs("tr",{children:[n.jsx("td",{children:_+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.productName,onChange:E=>b(_,"productName",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.hsnCode,onChange:E=>b(_,"hsnCode",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",className:"form-control",value:C.quantity,onChange:E=>b(_,"quantity",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.unit,onChange:E=>b(_,"unit",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",className:"form-control",value:C.taxableValue,onChange:E=>b(_,"taxableValue",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",max:"100",className:"form-control",value:C.taxRate,onChange:E=>b(_,"taxRate",E.target.value),required:!0})}),n.jsx("td",{children:c.length>1&&n.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>S(_),children:"Remove"})})]},_))})]}),n.jsx("button",{type:"button",className:"btn btn-secondary mb-4",onClick:y,children:"Add Item"}),n.jsx("h5",{children:"Transport Details"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"transportMode",className:"col-sm-3 col-form-label",children:"Mode of Transport"}),n.jsx("div",{className:"col-sm-9",children:n.jsxs("select",{id:"transportMode",className:"form-select",value:u.mode,onChange:C=>h({...u,mode:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select mode"}),n.jsx("option",{value:"Road",children:"Road"}),n.jsx("option",{value:"Rail",children:"Rail"}),n.jsx("option",{value:"Air",children:"Air"}),n.jsx("option",{value:"Ship",children:"Ship"})]})})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"transporterId",className:"col-sm-3 col-form-label",children:"Transporter ID / Vehicle No."}),n.jsx("div",{className:"col-sm-9",children:n.jsx("input",{type:"text",id:"transporterId",className:"form-control",placeholder:"Transporter ID or Vehicle Number",value:u.transporterId,onChange:C=>h({...u,transporterId:C.target.value}),required:!0})})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"distance",className:"col-sm-3 col-form-label",children:"Distance (km)"}),n.jsx("div",{className:"col-sm-9",children:n.jsx("input",{type:"number",min:"0",id:"distance",className:"form-control",value:u.distance,onChange:C=>h({...u,distance:C.target.value}),required:!0})})]}),n.jsx("button",{type:"submit",className:"btn btn-primary mt-4",children:"Generate e-Way Bill"})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Select Billing Entry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:v.map((C,_)=>n.jsxs("tr",{children:[n.jsx("td",{children:C.docnumber}),n.jsx("td",{children:C.customer}),n.jsx("td",{children:C.location}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>k(C),children:"Select"})})]},_))})]})})]})})})]})]})}const J4e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState(!1),[f,p]=j.useState(""),[v,g]=j.useState({}),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(1),[_]=j.useState(5),[E,T]=j.useState(!1),[I,F]=j.useState(!1);j.useEffect(()=>{if(e.length>0){const ge=e.filter(Ne=>Ne.roleId.toLowerCase().includes(b.toLowerCase())||Ne.roleName.toLowerCase().includes(b.toLowerCase()));w(ge),C(1)}},[b,e]);const A={Dashboard:["Dashboard"],"Master Data":["Material Master","Customer Master","Vendor Master","Customer Price List","Vendor Price List","Tax List","Location Master","Process List Master","General Condition Master"],MRP:["MRP"],Category:["Material Category","Customer Category","Vendor Category","Purchase Indent Category","Sales Indent Category","PO Category","Sales RFQ Category","Sales Order Category","Goods Receipt Category","Goods Issue Category","Purchase Contract Category","Billing Category","Invoice Category","Purchase Quotation Category","Sale Contract Category","Transfer Category"],Purchase:["Purchase Indent","Purchase Quotation","Purchase Contract","Purchase Order","Purchase Indent List","Purchase Quotations List","Purchase Contract List","Purchase Order List"],Sales:["Sales Indent","Sales Quotation Form","Sales Contract","Sales Order","Sales Delivery","Sales Indent List","Sales Quotations List","Sales Contract List","Sales Order List","Sales Delivery List"],Inventory:["Material Receipt","Material Receipt List","Material Issue","Material Transfer","Material Issue List","Stock List"],Invoice:["Invoice Form","Invoice List","Diea Invoice","Diea Company"],Billing:["Billing Form","Billing List"],Accounts:["GST","Ledger","Payments"],CRM:["Contacts List","Leads","Proposals","Sources","Lost Reason","Contact Stage","Industry","Calls"],"Project Management":["Projects","Tasks","Milestones","Time Entries"],Campaigns:["Campaigns","Analytics"],HRMS:["Designation","Department","Employee","LeaveRequests","LeaveRequestManagement","Payroll","AttendanceRegister","AttendanceReports","AttendanceTaking"]},P=Object.keys(A);j.useEffect(()=>{q(),V()},[]);const q=async()=>{try{const ge=await Ie.get("/api/roles");t(ge.data)}catch(ge){console.error("Error fetching roles:",ge)}},V=async()=>{try{const ge=await Ie.get("/api/roles/next-id");p(ge.data.nextId),c||a(ge.data.nextId)}catch(ge){console.error("Error fetching next role ID:",ge),p("R-XX")}},Y=()=>{const ge={};return/^[A-Za-z\s]+$/.test(s)||(ge.roleName="Role name should contain only alphabets and spaces"),o.length===0&&(ge.permissions="At least one permission is required"),g(ge),Object.keys(ge).length===0},B=async ge=>{if(ge.preventDefault(),!Y())return;if(E){g({...v,roleName:"Role name already exists"}),alert("Role name already exists so choose another name");return}const Ne={roleId:r,roleName:s,permissions:o};try{c?(await Ie.put(`/api/roles/${c}`,Ne),alert("Role updated successfully!")):(await Ie.post("/api/roles",Ne),alert("Role created successfully!")),q(),W(),le()}catch(Me){console.error("Error saving role:",Me)}},Q=ge=>{d(ge._id),a(ge.roleId),i(ge.roleName),l(ge.permissions||[]),re()},R=ge=>["SuperAdmin","Telecaller","Faculty","Student"].includes(ge),Z=async(ge,Ne)=>{if(R(Ne)){alert(`The role "${Ne}" is a system role and cannot be deleted.`);return}if(window.confirm(`Are you sure you want to delete the role "${Ne}"?`))try{await Ie.delete(`/api/roles/${ge}`),q()}catch(Me){console.error("Error deleting role:",Me)}},J=k*_,ie=J-_,M=S.slice(ie,J),z=Math.ceil(S.length/_),ee=ge=>C(ge),ne=ge=>{y(ge.target.value)},W=()=>{g({}),c?a(""):V(),i(""),l([]),d(null),T(!1)},re=()=>{c||V(),F(!0)},le=()=>{h(!1),F(!1),W()},te=ge=>{const Ne=[...o],Me=A[ge]||[];if(Ne.includes(ge)){const We=Ne.filter(tt=>tt!==ge&&!Me.includes(tt));l(We)}else Ne.includes(ge)||Ne.push(ge),Me.forEach(We=>{Ne.includes(We)||Ne.push(We)}),l(Ne);Ne.length>0&&v.permissions&&g({...v,permissions:null})},K=(ge,Ne)=>{const Me=[...o];if(Me.includes(Ne)){const We=Me.indexOf(Ne);if(We>-1&&Me.splice(We,1),!(A[ge]||[]).some(Be=>Me.includes(Be))&&Me.includes(ge)){const Be=Me.indexOf(ge);Be>-1&&Me.splice(Be,1)}}else Me.includes(ge)||Me.push(ge),Me.push(Ne);l(Me),Me.length>0&&v.permissions&&g({...v,permissions:null})},de=ge=>{if(A[ge]){const Ne=A[ge]||[],Me=o.filter(We=>We!==ge&&!Ne.includes(We));l(Me)}else{const Ne=o.filter(Me=>Me!==ge);for(const[Me,We]of Object.entries(A))if(We.includes(ge)){if(!We.some(mt=>mt!==ge&&Ne.includes(mt))&&Ne.includes(Me)){const mt=Ne.indexOf(Me);mt>-1&&Ne.splice(mt,1)}break}l(Ne)}o.length===0&&g({...v,permissions:"At least one permission is required"})},H=ge=>o.includes(ge),se=ge=>(A[ge]||[]).every(Me=>o.includes(Me)),be=ge=>{if(!ge||ge.length===0)return"None";const Ne={};return ge.forEach(Me=>{A[Me]&&(Ne[Me]||(Ne[Me]=[]))}),ge.forEach(Me=>{if(!A[Me]){for(const[We,tt]of Object.entries(A))if(tt.includes(Me)){Ne[We]||(Ne[We]=[]),Ne[We].push(Me);break}}}),Object.entries(Ne).map(([Me,We])=>n.jsxs("div",{className:"permission-group mb-1",children:[n.jsx("span",{className:"fw-bold",children:Me}),We.length>0&&n.jsx("div",{className:"sub-permissions ms-2 small",children:We.join(", ")})]},Me))},ue=async ge=>{if(!ge){T(!1);return}try{if(c){const Me=e.find(We=>We._id===c);if(Me&&Me.roleName===ge){T(!1);return}}const Ne=await Ie.get(`/api/roles/check-name?name=${encodeURIComponent(ge)}`);if(T(Ne.data.exists),Ne.data.exists)g({...v,roleName:"Role name already exists"});else{const Me={...v};Me.roleName==="Role name already exists"&&(delete Me.roleName,g(Me))}}catch(Ne){console.error("Error checking role name:",Ne)}},oe=ge=>{const Ne=ge.target.value;if(i(Ne),!/^[A-Za-z\s]*$/.test(Ne))g({...v,roleName:"Role name should contain only alphabets and spaces"});else{const Me={...v};delete Me.roleName,g(Me),Ne.trim()&&ue(Ne)}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"",children:n.jsx("div",{className:"page-wrapper cardhead",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("h4",{children:"Access Control"})}),n.jsx("div",{className:"col-xl-5 float-end ms-auto",children:n.jsx("div",{className:"d-flex title-head",children:n.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:n.jsxs("div",{className:"head-icons",children:[n.jsx("a",{href:"/AccessControl","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Refresh",children:n.jsx("i",{className:"ti ti-refresh-dot"})}),n.jsx("a",{href:"javascript:void(0);","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Collapse",id:"collapse-header",children:n.jsx("i",{className:"ti ti-chevrons-up"})})]})})})})]})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsx("div",{className:"input-group",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Role ID or Role Name",value:b,onChange:ne})})}),n.jsx("div",{className:"col-md-3"}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"d-flex title-head",children:n.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:n.jsx("div",{className:"head-icons",children:n.jsx("button",{className:"btn btn-primary mt-2",type:"button",onClick:()=>{W(),re()},children:"Add Role"})})})})})]})}),n.jsx("div",{className:"table-responsive mt-3",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"15%"},children:"Role ID"}),n.jsx("th",{style:{width:"15%"},children:"Role Name"}),n.jsx("th",{style:{width:"40%"},children:"Permissions"}),n.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),n.jsx("tbody",{children:M.length>0?M.map(ge=>n.jsxs("tr",{children:[n.jsx("td",{children:ge.roleId}),n.jsx("td",{children:ge.roleName}),n.jsx("td",{style:{width:"100%"},children:n.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",fontSize:"0.85rem",textWrap:"wrap"},children:be(ge.permissions)})}),n.jsx("td",{children:n.jsxs("div",{className:"hstack gap-2 fs-15",children:[n.jsx("button",{onClick:()=>Q(ge),className:"btn btn-icon btn-sm btn-soft-info rounded-pill",children:n.jsx("i",{className:"feather-edit"})}),n.jsx("button",{onClick:()=>Z(ge._id,ge.roleName),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",disabled:R(ge.roleName),style:{opacity:R(ge.roleName)?"0.5":"1",cursor:R(ge.roleName)?"not-allowed":"pointer"},children:n.jsx("i",{className:"feather-trash"})})]})})]},ge._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",className:"text-center",children:"No roles found."})})})]})}),S.length>0&&n.jsx("div",{className:"d-flex justify-content-left mt-4",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",style:{gap:"0px"},children:[n.jsx("li",{className:`page-item ${k===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ee(k-1),disabled:k===1,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})}),n.jsx("li",{className:`page-item ${k===z?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ee(k+1),disabled:k===z,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})})]})})})]})})})}),I&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:c?"Edit Role":"Add New Role"}),n.jsx("button",{type:"button",className:"btn-close",onClick:le})]}),n.jsx("div",{className:"modal-body p-4",children:n.jsxs("form",{onSubmit:B,children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Role ID"}),n.jsx("input",{type:"text",className:"form-control",value:c?r:f,disabled:!0}),n.jsx("small",{className:"text-muted",children:"Role ID is automatically generated"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Role Name"}),n.jsx("input",{type:"text",className:`form-control ${v.roleName||E?"is-invalid":""}`,value:s,onChange:oe,disabled:!!c,placeholder:"Enter role name",required:!0}),v.roleName&&n.jsx("div",{className:"invalid-feedback",children:v.roleName}),!v.roleName&&E&&n.jsx("div",{className:"invalid-feedback",children:"Role name already exists"}),!v.roleName&&!E&&s.trim()&&n.jsx("div",{className:"text-success small mt-1",children:"Role name is available"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Permissions"}),n.jsx("div",{className:`permissions-container p-3 border rounded ${v.permissions?"border-danger":""}`,style:{maxHeight:"400px",overflowY:"auto"},children:P.map(ge=>n.jsxs("div",{className:"permission-item mb-3",children:[n.jsxs("div",{className:"form-check",children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`perm-${ge}`,checked:o.includes(ge),onChange:()=>te(ge)}),n.jsx("label",{className:"form-check-label fw-bold",htmlFor:`perm-${ge}`,children:ge}),o.includes(ge)&&n.jsx("span",{className:"ms-2 small",children:se(ge)?"(All selected)":"(Some selected)"})]}),A[ge]?.length>0&&n.jsx("div",{className:"sub-permissions ms-4 mt-2",children:A[ge].map(Ne=>n.jsxs("div",{className:"form-check",children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`subperm-${Ne}`,checked:H(Ne),onChange:()=>K(ge,Ne)}),n.jsx("label",{className:"form-check-label",htmlFor:`subperm-${Ne}`,children:Ne})]},Ne))})]},ge))}),v.permissions&&n.jsx("div",{className:"text-danger small mt-1",children:v.permissions}),n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{children:"Selected Permissions:"}),n.jsx("div",{className:"selected-permissions mt-2",children:o.length>0?o.map(ge=>n.jsxs("span",{className:"badge bg-soft-primary mb-1 m-1",children:[ge," ",n.jsx("button",{type:"button",className:"btn-close btn-close-primary rounded-pill",onClick:()=>de(ge)})]},ge)):n.jsx("span",{className:"text-muted",children:"No permissions selected"})})]})]}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Role"})]})})]})})})]})})})})};function Z4e(){const[e,t]=j.useState(null),[r,a]=j.useState(0),[s,i]=j.useState(0),[o,l]=j.useState("input"),[c,d]=j.useState(0),[u,h]=j.useState(0),[f,p]=j.useState([]),[v,g]=j.useState([]),[b,y]=j.useState([]),[S,w]=j.useState(!0),[k,C]=j.useState([]),[_,E]=j.useState([]),[T,I]=j.useState(""),[F,A]=j.useState(null),[P,q]=j.useState([]),[V,Y]=j.useState([]),[B,Q]=j.useState([]),[R,Z]=j.useState(""),[J,ie]=j.useState(""),[M,z]=j.useState(null),ee=localStorage.getItem("selectedCompanyId"),ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];j.useEffect(()=>{const te=new Date,K=te.getFullYear();te.getMonth()+1>=4?(Z(`${K}-04-01`),ie(`${K+1}-03-31`)):(Z(`${K-1}-04-01`),ie(`${K}-03-31`))},[]),j.useEffect(()=>{R&&J&&z({start:new Date(R),end:new Date(J)})},[R,J]),j.useEffect(()=>{M&&(Ie.get("/api/locations",{params:{companyId:ee,startDate:R,endDate:J}}).then(te=>g(te.data)).catch(te=>console.error("Error fetching locations",te)),Ie.get("/api/billingform",{params:{companyId:ee,startDate:R,endDate:J}}).then(te=>E(te.data)).catch(te=>console.error("Error fetching customer invoices",te)))},[M,ee]),j.useEffect(()=>{if(!M){Q([]);return}const te=new Date(M.start),K=new Date(M.end),de=[],H=new Date(te.getFullYear(),te.getMonth(),1),se=new Date(K.getFullYear(),K.getMonth(),1);for(;H<=se;){const be=ne[H.getMonth()],ue=H.getFullYear(),oe=`${be} ${ue}`;de.push({key:`${be}-${ue}`,month:be,year:ue,label:oe}),H.setMonth(H.getMonth()+1)}Q(de)},[M]);const W=te=>{if(!M)return!0;const K=new Date(te);return K>=M.start&&K<=M.end};j.useEffect(()=>{const te=()=>{const K={};B.forEach(H=>{K[H.label]={month:H.label,input:0,output:0,balance:0}}),k.forEach(H=>{if(!W(H.createdAt))return;const se=new Date(H.createdAt),be=ne[se.getMonth()],ue=se.getFullYear(),oe=`${be} ${ue}`,ge=(H.cgst||0)+(H.sgst||0)+(H.igst||0);K[oe]&&(K[oe].input+=ge)}),_.forEach(H=>{if(!W(H.createdAt))return;const se=new Date(H.createdAt),be=ne[se.getMonth()],ue=se.getFullYear(),oe=`${be} ${ue}`,ge=(H.cgst||0)+(H.sgst||0)+(H.igst||0);K[oe]&&(K[oe].output+=ge)});const de=Object.values(K).map(H=>({...H,balance:H.output-H.input}));p(de)};(k.length||_.length)&&te()},[k,_,M,B]),j.useEffect(()=>{(async()=>{if(M)try{const K=await Ie.get("/api/invoiceform",{params:{companyId:ee,startDate:R,endDate:J}}),de=K.data.filter(be=>{if(!W(be.createdAt))return!1;const ue=!F||be.location===F;if(!T)return ue;const oe=new Date(be.postingDate),ge=ne[oe.getMonth()],Ne=oe.getFullYear(),Me=`${ge} ${Ne}`===T;return ue&&Me}),H=de?.sort((be,ue)=>new Date(ue.createdAt)-new Date(be.createdAt)),se=de.reduce((be,ue)=>be+(ue.cgst||0)+(ue.sgst||0)+(ue.igst||0),0);a(se),d(se),C(K.data),q(H),t(null)}catch(K){t("Failed to fetch invoices"),console.error(K)}finally{w(!1)}})()},[T,F,M,R,J]),j.useEffect(()=>{(async()=>{if(M)try{const K=await Ie.get("/api/billingform",{params:{companyId:ee,startDate:R,endDate:J}}),de=K.data.filter(be=>{if(!W(be.createdAt))return!1;const ue=!F||be.location===F;if(!T)return ue;const oe=new Date(be.createdAt),ge=ne[oe.getMonth()],Ne=oe.getFullYear(),Me=`${ge} ${Ne}`===T;return ue&&Me}),H=de.reduce((be,ue)=>be+(ue.cgst||0)+(ue.sgst||0)+(ue.igst||0),0);i(H);const se=de?.sort((be,ue)=>new Date(ue.createdAt)-new Date(be.createdAt));E(K.data),Y(se),t(null)}catch(K){t("Failed to fetch invoices"),console.error(K)}finally{w(!1)}})()},[T,F,M,R,J]);const re=s-r,le=re>0?"You need to pay GST":re<0?"You will get a GST refund":"No GST to pay or refund";return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"GST List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"GST List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-xl-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-2 row",children:[n.jsx("div",{className:"col-xl-4",children:"From"}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"date",className:"form-control",value:R,onChange:te=>Z(te.target.value)})})]}),n.jsxs("div",{className:"col-xl-2 row",children:[n.jsx("div",{className:"col-xl-3",children:"To"}),n.jsx("div",{className:"col-xl-9",children:n.jsx("input",{type:"date",className:"form-control",value:J,onChange:te=>ie(te.target.value)})})]}),n.jsxs("div",{className:"col-xl-2 row",children:[n.jsx("div",{className:"col-xl-5",children:"Month"}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{name:"month",className:"form-select",id:"month-select",value:T,onChange:te=>I(te.target.value),children:[n.jsx("option",{value:"",children:"All Months"}),B.map((te,K)=>n.jsx("option",{value:te.label,children:te.label},K))]})})]}),n.jsxs("div",{className:"col-xl-2 row",children:[n.jsx("div",{className:"col-xl-4",children:"Location"}),n.jsx("div",{className:"col-xl-8",children:n.jsxs("select",{name:"location",className:"form-select",id:"location-select",value:F||"",onChange:te=>A(te.target.value||null),children:[n.jsx("option",{value:"",children:"All Locations"}),v.map((te,K)=>n.jsx("option",{value:te.name,children:te.name},K))]})})]}),n.jsxs("div",{className:"col-xl-3 ms-auto",children:[o==="input"&&n.jsxs("h5",{style:{color:"blue"},children:["Total Input GST: ",r.toFixed(2)]}),o==="output"&&n.jsxs("h5",{style:{color:"orange"},children:["Total Output GST: ",s.toFixed(2)]}),o==="gstr"&&n.jsxs("h5",{style:{color:re>0?"red":re<0?"green":"black"},children:[le,"  ",Math.abs(re).toFixed(2)]})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("ul",{className:"nav nav-tabs tab-style-6",id:"myTab-3",role:"tablist",children:[n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="input"?"active":""} btn-outline-primary`,id:"products-tab","data-bs-toggle":"tab","data-bs-target":"#products-tab-pane",type:"button",role:"tab","aria-controls":"products-tab-pane","aria-selected":o==="input",onClick:()=>l("input"),children:[n.jsx("i",{className:"feather-gift me-1 align-middle d-inline-block"}),"Input Tax"]})}),n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="output"?"active":""} btn-outline-primary`,id:"sales-tab","data-bs-toggle":"tab","data-bs-target":"#sales-tab-pane",type:"button",role:"tab","aria-controls":"sales-tab-pane","aria-selected":o==="output",onClick:()=>l("output"),children:[n.jsx("i",{className:"feather-file me-1 align-middle d-inline-block"}),"Output Tax"]})}),n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="gstr"?"active":""} btn-outline-primary`,id:"profit-tab","data-bs-toggle":"tab","data-bs-target":"#profit-tab-pane",type:"button",role:"tab","aria-controls":"profit-tab-pane","aria-selected":o==="gstr",onClick:()=>l("gstr"),children:[n.jsx("i",{className:"feather-file-text me-1 align-middle d-inline-block"}),"GSTR"]})})]}),n.jsxs("div",{className:"tab-content",id:"myTabContent2",children:[n.jsx("div",{className:`tab-pane fade ${o==="input"?"show active":""} p-0 border-bottom-0`,id:"products-tab-pane",role:"tabpanel","aria-labelledby":"products-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Invoice No"}),n.jsx("th",{scope:"col",children:"Date"}),n.jsx("th",{scope:"col",children:"Amount"}),n.jsx("th",{scope:"col",children:"CGST"}),n.jsx("th",{scope:"col",children:"SGST/UTGST"}),n.jsx("th",{scope:"col",children:"IGST"}),n.jsx("th",{scope:"col",children:"Total GST"})]})}),n.jsx("tbody",{children:P.map((te,K)=>n.jsxs("tr",{children:[n.jsx("td",{children:te.docnumber}),n.jsx("td",{children:new Date(te.postingDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:["",te.finalTotal]}),n.jsxs("td",{children:["",te.cgst||0]}),n.jsxs("td",{children:["",te.sgst||0]}),n.jsxs("td",{children:["",te.igst||0]}),n.jsxs("td",{children:["",(te.cgst||0)+(te.sgst||0)+(te.igst||0)]})]},K))})]})})}),n.jsx("div",{className:`tab-pane fade ${o==="output"?"show active":""}`,id:"sales-tab-pane",role:"tabpanel","aria-labelledby":"sales-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Invoice No"}),n.jsx("th",{scope:"col",children:"Date"}),n.jsx("th",{scope:"col",children:"Amount"}),n.jsx("th",{scope:"col",children:"CGST"}),n.jsx("th",{scope:"col",children:"SGST/UTGST"}),n.jsx("th",{scope:"col",children:"IGST"}),n.jsx("th",{scope:"col",children:"Total GST"})]})}),n.jsx("tbody",{children:V.map((te,K)=>n.jsxs("tr",{children:[n.jsx("td",{children:te.docnumber}),n.jsx("td",{children:new Date(te.createdAt).toLocaleDateString()}),n.jsxs("td",{children:["",te.finalTotal]}),n.jsxs("td",{children:["",te.cgst||0]}),n.jsxs("td",{children:["",te.sgst||0]}),n.jsxs("td",{children:["",te.igst||0]}),n.jsxs("td",{children:["",((te.cgst||0)+(te.sgst||0)+(te.igst||0)).toFixed(2)]})]},K))})]})})}),n.jsx("div",{className:`tab-pane fade ${o==="gstr"?"show active":""}`,id:"profit-tab-pane",role:"tabpanel","aria-labelledby":"profit-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Month"}),n.jsx("th",{scope:"col",children:"Input"}),n.jsx("th",{scope:"col",children:"Output"}),n.jsx("th",{scope:"col",children:"Balance"})]})}),n.jsx("tbody",{children:f.map((te,K)=>n.jsxs("tr",{children:[n.jsx("td",{children:te.month}),n.jsxs("td",{children:["",te.input.toFixed(2)]}),n.jsxs("td",{children:["",te.output.toFixed(2)]}),n.jsxs("td",{style:{color:te.balance>0?"red":te.balance<0?"green":"black"},children:["",te.balance.toFixed(2)]})]},K))})]})})})]})]})]})})})]})}const TD=10;function eIe(){const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState([]),[k,C]=j.useState(""),[_,E]=j.useState(1),[T,I]=j.useState(null),F=async()=>{try{const de=(await Ie.get("/api/purchase-contract-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(H=>({label:`${H.categoryName} (${H.prefix})`,value:H._id}));h(de)}catch(K){console.error("Failed to fetch categories:",K)}},A=localStorage.getItem("selectedCompanyId"),P=localStorage.getItem("financialYear"),q=async()=>{try{const H=(await Ie.get("/api/vendors",{params:{companyId:A,financialYear:P}})).data.filter(se=>!se.isDeleted&&!se.isBlocked).map(se=>({label:`${se.name1} ${se.name2||""}`,value:se.vendorName,vnNo:se.vnNo||""}));d(H),y(H)}catch(K){console.error("Failed to fetch vendors:",K)}},V=async()=>{try{const K=await Ie.get("/api/locations",{params:{companyId:A,financialYear:P}});Array.isArray(K.data)?w(K.data):K.data&&Array.isArray(K.data.locations)?w(K.data.locations):w([])}catch(K){console.error("Failed to fetch locations:",K),w([])}},Y=async()=>{try{a(!0);const K=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),se=(await Ie.get("/api/contracts/get",{params:{companyId:K,financialYear:de}})).data.sort((be,ue)=>new Date(ue.createdAt)-new Date(be.createdAt));t(se),i(null)}catch(K){console.error("Failed to fetch contracts:",K),i("Failed to load contracts. Please try again.")}finally{a(!1)}};j.useEffect(()=>{Y(),q(),F(),V()},[]);const B=async K=>{try{const H=(await Ie.get(`/api/contracts/${K}`)).data;l({...H,validityFDate:H.validityFDate?new Date(H.validityFDate).toISOString().split("T")[0]:"",validityTDate:H.validityTDate?new Date(H.validityTDate).toISOString().split("T")[0]:"",items:H.items.map(se=>({...se}))})}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},Q=async()=>{try{const K=o.items.reduce((H,se)=>H+(parseFloat(se.price)*parseFloat(se.qty)||0),0),de={...o,totalPrice:K};await Ie.put(`/api/contracts/${o._id}`,de),alert("Contract updated successfully!"),l(null),Y()}catch(K){console.error("Failed to update contract:",K),alert("Failed to update contract")}},R=()=>{l(null)},Z=(K,de)=>{l(H=>({...H,[K]:de}))},J=(K,de,H)=>{const se=[...o.items];se[K][de]=H,l(be=>({...be,items:se}))},ie=async K=>{try{const de=await Ie.get(`/api/contracts/${K}`);I(de.data)}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},M=K=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Contract - ${K.contractNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PURCHASE CONTRACT</h1>
          <h3>Contract Number: ${K.contractNumber}</h3>
        </div>
        
        <div class="info-grid">
          <div>
            <div class="info-item"><strong>Vendor:</strong> ${K.vendorName}</div>
            <div class="info-item"><strong>Location:</strong> ${K.location||"-"}</div>
            <div class="info-item"><strong>Purchase Group:</strong> ${K.buyerGroup||"-"}</div>
          </div>
          <div>
            <div class="info-item"><strong>Valid From:</strong> ${K.validityFDate?new Date(K.validityFDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Valid To:</strong> ${K.validityTDate?new Date(K.validityTDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Created:</strong> ${new Date(K.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${K.note?`<div class="info-item"><strong>Note:</strong> ${K.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${K.items.map((se,be)=>`
              <tr>
                <td>${be+1}</td>
                <td>${se.materialId}</td>
                <td>${se.description}</td>
                <td>${se.qty}</td>
                <td>${se.unit||se.baseUnit}</td>
                <td>${se.price?parseFloat(se.price).toFixed(2):"0.00"}</td>
                <td>${se.price&&se.qty?(parseFloat(se.price)*parseFloat(se.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${K.items.reduce((se,be)=>{const ue=be.price&&be.qty?parseFloat(be.price)*parseFloat(be.qty):0;return se+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div class="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,H=window.open("","_blank");H.document.write(de),H.document.close(),H.focus(),H.print()},z=j.useMemo(()=>{let K=e;return(f||v)&&(K=K.filter(de=>{const H=new Date(de.createdAt),se=f?new Date(f):null,be=v?new Date(v):null;return se&&be?H>=se&&H<=be:se?H>=se:be?H<=be:!0})),k&&(K=K.filter(de=>[de.contractNumber,de.vendorName,de.note,de.location,de.buyerGroup].join(" ").toLowerCase().includes(k.toLowerCase())),K=K.sort((de,H)=>{const se=contract.items?.reduce((ue,oe)=>{const ge=oe.price&&oe.qty?parseFloat(oe.price)*parseFloat(oe.qty):0;return ue+ge},0)||0,be=contract.items?.reduce((ue,oe)=>{const ge=oe.price&&oe.qty?parseFloat(oe.price)*parseFloat(oe.qty):0;return ue+ge},0)||0;return se-be})),K},[k,e,f,v]),ee=()=>{C(""),p(""),g(""),E(1)},ne=(K,de)=>{if(!de)return"transparent";switch(K){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},W=Math.ceil(z.length/TD),re=j.useMemo(()=>{const K=(_-1)*TD;return z.slice(K,K+TD)},[z,_]),le=K=>{C(K.target.value),E(1)},te=K=>{K<1||K>W||E(K)};return r?n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("h2",{children:"Purchase Contracts"}),n.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),n.jsx("button",{onClick:Y,style:{padding:"10px 20px"},children:"Retry"})]}):T?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Purchase Contract Preview - ",T.contractNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>I(null)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Contract Number"}),n.jsx("div",{className:"fw-bold",children:T.contractNumber})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor"}),n.jsx("div",{className:"fw-bold",children:T.vendorName})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Location"}),n.jsx("div",{className:"fw-bold",children:T.location||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Purchase Group"}),n.jsx("div",{className:"fw-bold",children:T.buyerGroup||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Valid From"}),n.jsx("div",{className:"fw-bold",children:T.validityFDate?new Date(T.validityFDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Valid To"}),n.jsx("div",{className:"fw-bold",children:T.validityTDate?new Date(T.validityTDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Financial Year"}),n.jsx("div",{className:"fw-bold",children:T.financialYear||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Created Date"}),n.jsx("div",{className:"fw-bold",children:new Date(T.createdAt).toLocaleDateString()})]})})})]}),T.note&&n.jsxs("div",{className:"alert alert-info mb-4",children:[n.jsx("strong",{children:"Note:"})," ",T.note]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:T.items.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:K.materialId}),n.jsx("td",{children:K.description}),n.jsx("td",{children:K.qty}),n.jsx("td",{children:K.unit||K.baseUnit}),n.jsxs("td",{children:["",K.price?parseFloat(K.price).toFixed(2):"0.00"]}),n.jsxs("td",{children:["",K.price&&K.qty?(parseFloat(K.price)*parseFloat(K.qty)).toFixed(2):"0.00"]})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"6",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",T.items.reduce((K,de)=>{const H=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return K+H},0).toFixed(2)]})]})})]})})]})]})})}):o?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Purchase Contract - ",o.contractNumber]}),n.jsxs("div",{children:[n.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:Q,children:"Save Changes"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:R,children:"Cancel"})]})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Contract Number"}),n.jsx("input",{type:"text",className:"form-control",value:o.contractNumber||"",onChange:K=>Z("contractNumber",K.target.value),readOnly:!0})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsx(_2,{options:u,value:u.find(K=>K.value===o.categoryId),onChange:K=>Z("categoryId",K?.value),placeholder:"Select Category"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Vendor"}),n.jsx(_2,{options:b,value:b.find(K=>K.value===o.vendorName),onChange:K=>{Z("vendorId",K?.value),Z("vendorName",K?.label)},placeholder:"Select Vendor"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Valid From Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityFDate||"",onChange:K=>Z("validityFDate",K.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Valid To Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityTDate||"",onChange:K=>Z("validityTDate",K.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsxs("select",{className:"form-select",value:o.location||"",onChange:K=>Z("location",K.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),S.map((K,de)=>n.jsx("option",{value:K.name||K,children:K.name||K},de))]})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Purchase Group"}),n.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:K=>Z("buyerGroup",K.target.value)})]}),n.jsxs("div",{className:"col-md-8",children:[n.jsx("label",{className:"form-label",children:"Note"}),n.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:K=>Z("note",K.target.value),placeholder:"Add any notes (optional)"})]})]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:o.items.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.materialId||"",onChange:H=>J(de,"materialId",H.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.description||"",onChange:H=>J(de,"description",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:K.qty||"",onChange:H=>J(de,"qty",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.baseUnit||"",onChange:H=>J(de,"baseUnit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.orderUnit||"",onChange:H=>J(de,"orderUnit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:K.unit||"",onChange:H=>J(de,"unit",H.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:K.price||"",onChange:H=>J(de,"price",H.target.value),step:"0.01"})}),n.jsx("td",{children:n.jsxs("span",{className:"fw-bold text-success",children:["",K.price&&K.qty?(parseFloat(K.price)*parseFloat(K.qty)).toFixed(2):"0.00"]})})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"8",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((K,de)=>{const H=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return K+H},0).toFixed(2)]})]})})]})})]})})})]})})}):n.jsxs("div",{className:"content",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h6",{children:"All Purchase Contracts"}),n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Search by Contract Number, Vendor, etc...",value:k,onChange:le,className:"form-control",style:{width:300,marginTop:"22px"}}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),n.jsx("input",{type:"date",value:f,onChange:K=>{p(K.target.value),E(1)},className:"form-control",style:{width:150}})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),n.jsx("input",{type:"date",value:v,onChange:K=>{g(K.target.value),E(1)},className:"form-control",style:{width:150}})]}),n.jsx("button",{onClick:ee,className:"btn btn-sm btn-soft-warning",children:"Reset"}),n.jsx("button",{onClick:Y,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Contract Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Valid From"}),n.jsx("th",{children:"Valid To"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Total Price"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:re.map((K,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{className:"text-wrap",children:K.contractNumber}),n.jsx("td",{className:"text-wrap",children:K.vendorName}),n.jsx("td",{className:"text-wrap",children:K.location||"-"}),n.jsx("td",{children:K.validityFDate?new Date(K.validityFDate).toLocaleDateString():"-"}),n.jsx("td",{children:K.validityTDate?new Date(K.validityTDate).toLocaleDateString():"-"}),n.jsx("td",{children:new Date(K.createdAt).toLocaleDateString()}),n.jsxs("td",{style:{backgroundColor:ne(de,!!k)},children:["",K.items?.reduce((H,se)=>{const be=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return H+be},0).toFixed(2)||"0.00"]}),n.jsx("td",{children:K.note||"-"}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>ie(K._id),className:"btn btn-sm",title:"Preview",children:n.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),n.jsx("button",{onClick:()=>B(K._id),className:"btn btn-sm",title:"Edit",children:n.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),n.jsx("button",{onClick:()=>M(K),className:"btn btn-sm",title:"Print",children:n.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},K._id||de))})]})})})}),n.jsx("div",{className:"d-flex justify-content-end ms-auto",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item${_===1?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(_-1),disabled:_===1,children:n.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const K=[];let de=[1,2],H=[W-1,W].filter(ue=>ue>2),se=[];_<=4?(de=[1,2,3,4,5].filter(ue=>ue<=W),H=[W-1,W].filter(ue=>ue>5)):_>=W-3?(de=[1,2].filter(ue=>ue<W-4),H=[W-4,W-3,W-2,W-1,W].filter(ue=>ue>2&&ue<=W)):(de=[1,2],se=[_-1,_,_+1],H=[W-1,W]);const be=ue=>ue.map(oe=>n.jsx("li",{className:`page-item${_===oe?" active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(oe),children:oe})},oe));return K.push(...be(de)),(se.length>0&&se[0]>de[de.length-1]+1||se.length===0&&H[0]>de[de.length-1]+1)&&K.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),K.push(...be(se)),H.length>0&&(se.length>0&&H[0]>se[se.length-1]+1||se.length===0&&H[0]>de[de.length-1]+1)&&K.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),K.push(...be(H)),K})(),n.jsx("li",{className:`page-item${_===W?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>te(_+1),disabled:_===W,children:n.jsx("i",{className:"bi bi-chevron-double-right"})})})]})})})]})}function tIe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]);rh();const[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState(null),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState([]),[T,I]=j.useState(""),[F,A]=j.useState(""),[P,q]=j.useState(""),[V,Y]=j.useState(""),[B,Q]=j.useState(!1),[R,Z]=j.useState(null),[J,ie]=j.useState(0),[M,z]=j.useState(!1),[ee,ne]=j.useState(!1),[W,re]=j.useState(""),[le,te]=j.useState(""),[K,de]=j.useState(""),[H,se]=j.useState(""),[be,ue]=j.useState(""),[oe,ge]=j.useState(""),[Ne,Me]=j.useState(null);j.useEffect(()=>{if(be){const Ve=e.filter(pt=>pt.indentId.toLowerCase().includes(be.toLowerCase()));setFilteredIndents(Ve)}},[be]);const[We,tt]=j.useState([]);j.useEffect(()=>{const Ve=localStorage.getItem("selectedCompanyId"),pt=localStorage.getItem("financialYear");Ie.get("/api/indent/get",{params:{companyId:Ve,financialYear:pt}}).then(Pe=>{const Re=Pe.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);t(Re.map(Ye=>({label:`${Ye.indentId} (${Ye.categoryName})`,value:Ye})))}),Ie.get("/api/purchase-contract-categories",{params:{companyId:Ve,financialYear:pt}}).then(Pe=>{a(Pe.data.map(Re=>({label:`${Re.categoryName}`,value:Re._id})))}),Ie.get("/api/vendors",{params:{companyId:Ve,financialYear:pt}}).then(Pe=>{const Re=Pe.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);i(Re.map(Ye=>({label:`${Ye.name1} ${Ye.name2||""}`,value:Ye._id,vnNo:Ye.vnNo||""})))}),Ie.get("/api/locations",{params:{companyId:Ve,financialYear:pt}}).then(Pe=>{console.log("Locations API response:",Pe.data),Array.isArray(Pe.data)?tt(Pe.data):Pe.data&&Array.isArray(Pe.data.locations)?tt(Pe.data.locations):tt([])}).catch(Pe=>{console.error("Failed to fetch locations:",Pe),tt([])}),console.log("location",T),Ie.get("/api/material",{params:{companyId:Ve,financialYear:pt}}).then(Pe=>{console.log("Fetched materials:",Pe.data);const Re=Pe.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);l(Re),console.log("Filtered materials:",Re)}).catch(Pe=>console.error("Failed to fetch materials:",Pe))},[]);const mt=Ve=>{h(Ve);const{buyerGroup:pt,materialGroup:Pe,deliveryDate:Re,location:Ye}=Ve.value;I(Ye||""),A(pt||"");const At=Ve.value.items.map(Gt=>({...Gt,unit:Gt.unit||"",price:Gt.price||"",materialGroup:Gt.materialGroup||Pe||"",deliveryDate:Gt.deliveryDate||Re||""}));E(At)},Be=(Ve,pt,Pe)=>{const Re=[..._];Re[Ve][pt]=Pe,E(Re)},dt=()=>{E([..._,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date(new Date().setDate(new Date().getDate()+5)).toISOString().slice(0,10),price:0}])},[Dt,It]=j.useState(!1),[zt,xe]=j.useState("internal"),[fe,ve]=j.useState(""),pe=async Ve=>{Ve.preventDefault(),It(!0)};j.useEffect(()=>{const Ve=_.reduce((pt,Pe)=>{const Re=parseFloat(Pe.price)||0,Ye=parseFloat(Pe.qty)||0;return pt+Re*Ye},0);ie(Ve)},[_]);const Te=async()=>{const Ve=localStorage.getItem("selectedCompanyId"),pt=localStorage.getItem("financialYear"),Pe={indentId:u?.value?.indentId,categoryId:f?.value,rfqCategoryId:f?.value,vendor:v,vendorName:b,contractReference:c,validityFDate:P,validityTDate:V,companyId:Ve,financialYear:pt,vnNo:k,note:S,buyerGroup:F,location:T,totalPrice:J,items:_,contractGenType:zt,externalContractNumber:zt==="external"?fe:null};console.log("Payload for submission:",Pe);try{const Re=await Ie.post("/api/contracts/create",Pe);alert("Contract Created Successfully"),console.log(Re.data),It(!1)}catch(Re){console.error(Re),alert("Failed to create contract")}},Xe=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-hashtag me-2"}),"Contract Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>It(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{xe("internal"),Te()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>xe("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),zt==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Contract Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:fe,onChange:Ve=>{Ve.target.value.length<=50&&ve(Ve.target.value)},onKeyPress:Ve=>{Ve.key==="Enter"&&fe.trim()&&Te()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[fe.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:Te,disabled:!fe.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Create Contract"]})})]}),zt==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"alert alert-info",role:"alert",children:"Contract number will be auto-generated based on category and range count."})})]})]})})})]}),kt=Ve=>{console.log("Opening modal for item at index:",Ve),Z(Ve),Q(!0)},Je=()=>{const[Ve,pt]=j.useState([]),[Pe,Re]=j.useState("materialId"),[Ye,At]=j.useState(""),Gt=Tt=>{const lr=Tt.target.value;At(lr);const Rt=o.filter(sr=>(Pe==="materialId"?sr.materialId:sr.description)?.toLowerCase().includes(lr.toLowerCase()));pt(Rt)},De=()=>{pt(o),At("")},Ee=()=>{pt([]),At("")},it=Tt=>{if(console.log("selectedItemIndex when selecting:",R),R==null){console.error("No item selected for update");return}E(lr=>{console.log("Previous items:",lr);const Rt=[...lr];return Rt[R]={...Rt[R],materialId:Tt.materialId,description:Tt.description,materialGroup:Tt.materialgroup||"",baseUnit:Tt.baseUnit,orderUnit:Tt.orderUnit},console.log("Updated items:",Rt),Rt}),Q(!1)};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Q(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Pe,onChange:Tt=>Re(Tt.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:Pe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ye,onChange:Gt})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:De,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ve.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ee,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ve.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ve.map((Tt,lr)=>n.jsxs("tr",{children:[n.jsx("td",{children:Tt.materialId}),n.jsx("td",{children:Tt.description}),n.jsx("td",{children:Tt.baseUnit}),n.jsx("td",{children:Tt.orderUnit}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>it(Tt),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ye?`No materials found matching "${Ye}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},ze=()=>{const[Ve,pt]=j.useState("indentId"),[Pe,Re]=j.useState([]),[Ye,At]=j.useState(""),Gt=it=>{const Tt=it.target.value;At(Tt);const lr=e.filter(Rt=>(Ve==="indentId"?Rt?.value?.indentId:Rt?.value?.categoryName)?.toLowerCase().includes(Tt.toLowerCase()));Re(lr)},De=()=>{Re(e),At("")},Ee=()=>{Re([]),At("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>z(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ve,onChange:it=>pt(it.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ye,onChange:Gt})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:De,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ee,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Pe.map((it,Tt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:it.value.indentId})}),n.jsx("td",{children:it.value.categoryName}),n.jsx("td",{children:it.value.buyerGroup}),n.jsx("td",{children:it.value.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{mt(it),z(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Tt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>z(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Fe=()=>{const[Ve,pt]=j.useState("name1"),[Pe,Re]=j.useState([]),[Ye,At]=j.useState(""),Gt=it=>{const Tt=it.target.value;At(Tt);const lr=s.filter(Rt=>(Ve==="vnNo"?Rt.vnNo:Rt.label)?.toLowerCase().includes(Tt.toLowerCase()));Re(lr)},De=()=>{Re(s),At("")},Ee=()=>{Re([]),At("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ne(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ve,onChange:it=>pt(it.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ye,onChange:Gt})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:De,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ee,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Vendor No"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Pe.map((it,Tt)=>n.jsxs("tr",{children:[n.jsx("td",{children:it.label}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:it.vnNo})}),n.jsx("td",{children:it.city||"-"}),n.jsx("td",{children:it.region||"-"}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(it.value),y(it.label),C(it.vnNo||""),ne(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Tt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ne(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Contract"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Contract"})]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Contract Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Indent"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:Ve=>{const pt=Ve.target.value;se(pt);const Pe=e.find(Re=>Re.indentId.toLowerCase()===pt.toLowerCase());h(Pe||null)},readOnly:!0}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ue(H),z(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Category"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select form-control-sm",value:f?.value||"",onChange:Ve=>p(r.find(pt=>pt.value===Ve.target.value)||null),children:[n.jsx("option",{value:"",children:"Select"}),r.map((Ve,pt)=>n.jsx("option",{value:Ve.value,children:Ve.label},pt))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:Ve=>{const pt=Ve.target.value;y(pt);const Pe=s.find(Re=>Re.name.toLowerCase()===pt.toLowerCase());Me(Pe||null)}}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ne(!0),ge(b)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Contract Reference",value:c,onChange:Ve=>d(Ve.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-lg-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:Ve=>I(Ve.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(We)&&We.map((Ve,pt)=>n.jsx("option",{value:Ve.name||Ve._id||Ve,children:Ve.name||Ve.locationName||Ve},pt))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:F,onChange:Ve=>A(Ve.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity From"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:P,onChange:Ve=>q(Ve.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Till"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:V,onChange:Ve=>Y(Ve.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Additional Notes"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:S,onChange:Ve=>w(Ve.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-body",children:[n.jsxs("form",{onSubmit:pe,children:[n.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[n.jsx("h6",{className:"mb-3",children:"Items & Details"}),n.jsxs("div",{className:"table-responsive",children:[n.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:_.map((Ve,pt)=>n.jsxs("tr",{children:[n.jsx("td",{children:pt+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Ve.materialId,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>kt(pt),children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ve.description,onChange:Pe=>Be(pt,"description",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:Ve.qty,onChange:Pe=>Be(pt,"qty",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ve.baseUnit,onChange:Pe=>Be(pt,"baseUnit",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ve.orderUnit,onChange:Pe=>Be(pt,"orderUnit",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Ve.materialGroup,onChange:Pe=>Be(pt,"materialGroup",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ve.deliveryDate,onChange:Pe=>Be(pt,"deliveryDate",Pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:Ve.price,onChange:Pe=>Be(pt,"price",Pe.target.value)})})]},pt))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",onClick:dt,className:"btn btn-link",children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]}),B&&n.jsx(Je,{})]}),n.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:n.jsxs("h6",{className:"mb-0",children:["Total Price: ",n.jsxs("span",{className:"text-primary",children:["",J.toFixed(2)]})]})})]})})})]})]}),M&&n.jsx(ze,{}),ee&&n.jsx(Fe,{}),Dt&&n.jsx(Xe,{})]})]})})}function rIe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState([]),[f,p]=j.useState(null),[v,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState(""),[T,I]=j.useState([]),[F,A]=j.useState(""),[P,q]=j.useState(""),[V,Y]=j.useState(""),[B,Q]=j.useState(!1),[R,Z]=j.useState(!1),[J,ie]=j.useState(!1),[M,z]=j.useState(null),[ee,ne]=j.useState(""),[W,re]=j.useState([]),le=localStorage.getItem("selectedCompanyId"),te=localStorage.getItem("financialYear"),K=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Ie.get("/api/salerequest/get",{params:{companyId:le,financialYear:te}}).then(pe=>{const Te=pe.data.filter(Xe=>!Xe.isBlocked&&!Xe.isDeleted);t(Te)}).catch(console.error),Ie.get("/api/sale-contract-categories",{params:{companyId:le,financialYear:te}}).then(pe=>a(pe.data)).catch(console.error),Ie.get("/api/locations",{params:{companyId:le,financialYear:te}}).then(pe=>{console.log("Locations API response:",pe.data),Array.isArray(pe.data)?re(pe.data):pe.data&&Array.isArray(pe.data.locations)?re(pe.data.locations):re([])}).catch(pe=>{console.error("Failed to fetch locations:",pe),re([])}),Ie.get("/api/customers").then(pe=>{const Te=pe.data.filter(Xe=>!Xe.isBlocked&&!Xe.isDeleted);i(Te)}).catch(console.error),Ie.get("/api/material").then(pe=>l(pe.data)).catch(console.error),de()},[]);const de=()=>{Ie.get("/api/salescontracts",{params:{companyId:le,financialYear:te}}).then(pe=>h(pe.data)).catch(console.error)},H=pe=>{p({label:pe.indentId,value:pe._id}),d(pe.salesGroup||""),ne(pe.location),I(pe.items.map(Te=>({...Te,customerName:b?.name1||"",price:"",unit:""}))),ie(!1)},se=pe=>{y({label:`${pe.name1} ${pe.name2}`,value:pe._id}),I(Te=>Te.map(Xe=>({...Xe,customerName:pe.name1}))),Z(!1)},be=pe=>{const Te=[...T];Te[M]={...Te[M],materialId:pe.materialId,description:pe.description,baseUnit:pe.baseUnit,unit:pe.unit,price:pe.price},I(Te),Q(!1)},ue=(pe,Te,Xe)=>{const kt=[...T];kt[pe][Te]=Xe,I(kt)},oe=()=>{I(pe=>[...pe,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ge,Ne]=j.useState(!1),[Me,We]=j.useState("internal"),[tt,mt]=j.useState(""),Be=pe=>{if(pe.preventDefault(),k&&_&&k>_){alert("Validity From date cannot be later than Validity To date");return}Ne(!0)},dt=()=>{const pe={indentId:f?.label,categoryId:v?.value,customerId:b?.value,note:S,companyId:K,financialYear:te,validityFromDate:k,validityToDate:_,salesGroup:c,location:ee,items:T,contractNumberType:Me,externalContractNumber:Me==="external"?tt:null};Ie.post("/api/salescontracts",pe).then(()=>{alert("Contract saved successfully!"),de(),It(),Ne(!1),We("internal"),mt("")}).catch(Te=>{console.error(Te),alert("Error saving contract")})},Dt=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Contract Number Generation"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>Ne(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{We("internal"),dt()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>We("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Me==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Contract Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:tt,onChange:pe=>{pe.target.value.length<=50&&mt(pe.target.value)},onKeyPress:pe=>{pe.key==="Enter"&&tt.trim()&&dt()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[tt.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:dt,disabled:!tt.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Contract"]})})]})]})]})})})]}),It=()=>{p(null),g(null),y(null),w(""),C(""),E(""),I([])},zt=({children:pe,onClose:Te})=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h5",{className:"modal-title",children:"Select"}),n.jsx("button",{type:"button",className:"btn-close",onClick:Te})]}),n.jsx("div",{className:"modal-body",children:pe})]})})}),xe=()=>{const[pe,Te]=j.useState([]),[Xe,kt]=j.useState("materialId"),Je=Ve=>{const pt=Ve.target.value;A(pt);const Pe=o.filter(Re=>(Xe==="materialId"?Re.materialId:Re.description)?.toLowerCase().includes(pt.toLowerCase()));Te(Pe)},ze=()=>{Te(o),A("")},Fe=()=>{Te([]),A("")};return n.jsxs(zt,{onClose:()=>Q(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Xe,onChange:Ve=>kt(Ve.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:Xe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:F,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:ze,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Fe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((Ve,pt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ve.materialId})}),n.jsx("td",{children:Ve.description}),n.jsx("td",{children:Ve.baseUnit}),n.jsx("td",{children:Ve.unit}),n.jsx("td",{children:Ve.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>be(Ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":F?`No materials found matching "${F}"`:'Enter search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},fe=()=>{const[pe,Te]=j.useState("name1"),[Xe,kt]=j.useState([]),Je=Ve=>{const pt=Ve.target.value;q(pt),kt(filtered)},ze=()=>{kt(s),q("")},Fe=()=>{kt([]),q("")};return n.jsxs(zt,{onClose:()=>Z(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:Ve=>Te(Ve.target.value),children:[n.jsx("option",{value:"name1",children:"Name"}),n.jsx("option",{value:"city",children:"City"}),n.jsx("option",{value:"region",children:"Region"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:P,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:ze,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Xe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Fe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Xe.map((Ve,pt)=>n.jsxs("tr",{children:[n.jsxs("td",{children:[Ve.name1," ",Ve.name2]}),n.jsx("td",{children:Ve.city}),n.jsx("td",{children:Ve.region}),n.jsx("td",{children:Ve.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>se(Ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":P?`No match found for "${P}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>Z(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},ve=()=>{const[pe,Te]=j.useState([]),[Xe,kt]=j.useState("indentId"),[Je,ze]=j.useState(""),Fe=Pe=>{const Re=Pe.target.value;ze(Re);const Ye=e.filter(At=>(Xe==="indentId"?At.indentId:Xe==="categoryName"?At.categoryName:At.location)?.toLowerCase().includes(Re.toLowerCase()));Te(Ye)},Ve=()=>{Te(e),ze("")},pt=()=>{Te([]),ze("")};return n.jsxs(zt,{onClose:()=>ie(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Xe,onChange:Pe=>kt(Pe.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Je,onChange:Fe})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ve,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:pt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((Pe,Re)=>n.jsxs("tr",{children:[n.jsx("td",{children:Pe.indentId}),n.jsx("td",{children:Pe.categoryName}),n.jsx("td",{children:Pe.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>H(Pe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Re))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Je?`No match for "${Je}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ie(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Contract"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Contract"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-file-contract me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Contract Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Request:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:f?.label||"",onChange:pe=>{const Te=pe.target.value;p({label:Te,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>ie(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:pe=>{const Te=pe.target.value;y({label:Te,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Z(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select",value:ee,onChange:pe=>ne(pe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(W)&&W.map((pe,Te)=>n.jsx("option",{value:pe.name,children:pe.name},Te))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Contract Category:"})}),n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select",value:v?.value||"",onChange:pe=>{const Te=pe.target.value,Xe=r.find(kt=>kt._id===Te);g(Xe?{label:Xe.categoryName,value:Xe._id}:null)},children:[n.jsx("option",{value:"",children:"Select"}),r.map(pe=>n.jsxs("option",{value:pe._id,children:[pe.categoryName," (",pe.prefix,")"]},pe._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity From Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:pe=>C(pe.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity To Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:_,onChange:pe=>E(pe.target.value),min:k})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:pe=>d(pe.target.value),placeholder:"Enter or edit Sales Group"})})]}),n.jsxs("div",{className:"col-xl-4 row",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{className:"form-label",children:"Notes"})}),n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:S,onChange:pe=>w(pe.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:Be,children:[n.jsx("div",{className:"table-responsive mb-3",children:n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:T.map((pe,Te)=>n.jsxs("tr",{children:[n.jsx("td",{children:Te+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:pe.materialId,onChange:Xe=>ue(Te,"materialId",Xe.target.value)}),n.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{z(Te),Q(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.description,onChange:Xe=>ue(Te,"description",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:pe.qty,onChange:Xe=>ue(Te,"qty",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.baseUnit,onChange:Xe=>ue(Te,"baseUnit",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.orderUnit,onChange:Xe=>ue(Te,"orderUnit",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.location,onChange:Xe=>ue(Te,"location",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.customerName,onChange:Xe=>ue(Te,"customerName",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.unit,onChange:Xe=>ue(Te,"unit",Xe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.price,onChange:Xe=>{Xe.target.value=Xe.target.value.replace(/[^0-9.]/g,""),ue(Te,"price",Xe.target.value)}})})]},Te))})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"button",className:"btn btn-link",onClick:oe,children:"+ Add Contract Item"})})}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Contract"})})]})})})})})]}),B&&n.jsx(xe,{}),R&&n.jsx(fe,{}),J&&n.jsx(ve,{}),ge&&n.jsx(Dt,{})]})]})})}function aIe(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),o=5,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");j.useEffect(()=>{Ie.get("/api/salescontracts",{params:{companyId:l,financialYear:c}}).then(k=>{const C=k.data.sort((_,E)=>new Date(E.createdAt)-new Date(_.createdAt));t(C)}).catch(k=>{console.error("Failed to fetch contracts",k),alert("Error loading contracts")})},[]);const d=k=>{const C=window.open("","_blank"),_=`
      <html>
        <head>
          <title>Print Contract</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
            .contract-header { margin-bottom: 20px; }
            .validity-dates { display: flex; gap: 20px; margin: 10px 0; }
          </style>
        </head>
        <body>
          <div class="contract-header">
            <h2>Sales Contract: ${k.contractNumber}</h2>
            <p><strong>Indent ID:</strong> ${k.indentId}</p>
            <p><strong>Customer Name:</strong> ${k.customerName}</p>
            <div class="validity-dates">
              <p><strong>Validity From:</strong> ${k.validityFromDate||"N/A"}</p>
              <p><strong>Validity To:</strong> ${k.validityToDate||"N/A"}</p>
            </div>
            <p><strong>Location:</strong> ${k.location||"N/A"}</p>
            <p><strong>Sales Group:</strong> ${k.salesGroup||"N/A"}</p>
            <p><strong>Note:</strong> ${k.note||"N/A"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const I=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId||"N/A"}</td>
                      <td>${E.description||"N/A"}</td>
                      <td>${E.qty||0}</td>
                      <td>${E.baseUnit||"N/A"}</td>
                      <td>${E.orderUnit||"N/A"}</td>
                      <td>${E.location||"N/A"}</td>
                      <td>${E.unit||"N/A"}</td>
                      <td>${E.price||0}</td>
                      <td>${I.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;C.document.write(_),C.document.close(),C.print()},[u,h]=j.useState(""),[f,p]=j.useState(""),v=e.filter(k=>{const C=k.contractNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),_=new Date(k.createdAt),E=u?new Date(u):null,T=f?new Date(f):null,I=(!E||_>=E)&&(!T||_<=T);return C&&I}),g=s*o,b=g-o,y=v.slice(b,g),S=Math.ceil(v.length/o),w=k=>i(k);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Contracts"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6"}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Contract No, Indent ID, Customer Name, or Location",value:r,onChange:k=>{a(k.target.value),i(1)}})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:f,min:u,onChange:k=>{p(k.target.value),i(1)}})]})]})}),n.jsx("div",{className:"card-body",children:y.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-contract fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No contracts found. Create your first contract!":"No contracts match your search criteria."})]}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Contract No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Validity From"}),n.jsx("th",{children:"Validity To"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:k.contractNumber}),n.jsx("td",{children:k.indentId}),n.jsx("td",{children:k.customerName}),n.jsx("td",{children:k.location||"N/A"}),n.jsx("td",{children:k.validityFromDate?new Date(k.validityFromDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:k.validityToDate?new Date(k.validityToDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d(k),title:"Print Contract",children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})})]},C))})]})})})})]}),S>=1&&n.jsx("nav",{className:"mt-1",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{onClick:()=>s>1&&w(s-1),className:"page-link",disabled:s===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const C=[],_=[];C.push(1);for(let I=Math.max(2,s-2);I<=Math.min(S-1,s+2);I++)C.push(I);S>1&&C.push(S);const E=[...new Set(C)].sort((I,F)=>I-F);let T;for(let I of E)T&&(I-T===2?_.push(T+1):I-T!==1&&_.push("...")),_.push(I),T=I;return _.map((I,F)=>I==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${F}`):n.jsx("li",{className:`page-item ${s===I?"active":""}`,children:n.jsx("button",{onClick:()=>w(I),className:"page-link",children:I})},I))})(),n.jsx("li",{className:`page-item ${s===S?"disabled":""}`,children:n.jsx("button",{onClick:()=>s<S&&w(s+1),className:"page-link",disabled:s===S,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})}function nIe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10}),[o,l]=j.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[c,d]=j.useState({byType:[],byMethod:[]}),[u,h]=j.useState(null),[f,p]=j.useState(!1),[v,g]=j.useState(!1),[b,y]=j.useState(null),[S,w]=j.useState({type:"",text:""}),k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),_=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{E(),T()},[s.page]),j.useEffect(()=>{const M=setTimeout(()=>{i(z=>({...z,page:1})),E()},500);return()=>clearTimeout(M)},[s.recordType,s.status,s.paymentMethod,s.entityName,s.startDate,s.endDate,s.limit]);const E=async()=>{a(!0);try{const M=new URLSearchParams;Object.entries(s).forEach(([ee,ne])=>{ne&&M.append(ee,ne)}),console.log("Fetching payments with filters:",k,C);const z=await Ie.get(`/api/payment?${M}`,{params:{companyId:k,financialYear:C}});t(z.data.payments||[]),l(z.data.pagination||{})}catch(M){console.error("Error fetching payments:",M)}finally{a(!1)}},T=async()=>{try{console.log("Fetching summary for:",{companyId:k,financialYear:C});const M=await Ie.get("/api/payment-summary",{params:{companyId:k,financialYear:C}});console.log("Summary response:",M.data),d({byType:M.data.byType||[],byMethod:M.data.byMethod||[],today:M.data.today||{totalAmount:0,count:0}})}catch(M){console.error("Error fetching summary:",M),w({type:"error",text:"Failed to fetch payment summary."})}},I=M=>{const{name:z,value:ee}=M.target;i(ne=>({...ne,[z]:ee}))},F=()=>{i({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10})},A=M=>{i(z=>({...z,page:M}))},P=M=>{h(M),p(!0)},q=M=>{y({...M,paymentDate:new Date(M.paymentDate).toISOString().split("T")[0]}),g(!0)},V=M=>{const{name:z,value:ee}=M.target;y(ne=>({...ne,[z]:ee}))},Y=async M=>{M.preventDefault();try{const z={paymentAmount:parseFloat(b.paymentAmount),paymentMethod:b.paymentMethod,status:b.status,description:b.description,companyId:_,financialYear:C,paymentDate:b.paymentDate,paymentDetails:b.paymentDetails||{}};await Ie.put(`/api/payment/${b._id}`,z),w({type:"success",text:"Payment updated successfully!"}),g(!1),E(),setTimeout(()=>{w({type:"",text:""})},3e3)}catch(z){console.error("Error updating payment:",z),w({type:"error",text:"Failed to update payment. Please try again."})}},B=M=>{const z=window.open("","_blank"),ee=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt - ${M.paymentDocNumber}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .company-name { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 5px;
          }
          .receipt-title { 
            font-size: 18px; 
            color: #666;
          }
          .details { 
            margin: 20px 0; 
          }
          .detail-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
          }
          .detail-label { 
            font-weight: bold; 
            width: 40%;
          }
          .detail-value { 
            width: 60%;
            text-align: right;
          }
          .amount { 
            font-size: 20px; 
            font-weight: bold; 
            color: #28a745;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
          }
          .footer { 
            margin-top: 40px; 
            text-align: center; 
            font-size: 12px; 
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 20px;
          }
          .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .status-cleared { background: #d4edda; color: #155724; }
          .status-pending { background: #fff3cd; color: #856404; }
          .status-bounced { background: #f8d7da; color: #721c24; }
          .status-cancelled { background: #e2e3e5; color: #383d41; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">Your Company Name</div>
          <div class="receipt-title">PAYMENT RECEIPT</div>
        </div>
        
        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Receipt Number:</span>
            <span class="detail-value">${M.paymentDocNumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date & Time:</span>
            <span class="detail-value">${Q(M.paymentDate)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Type:</span>
            <span class="detail-value">${M.recordType.toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">${M.recordType==="vendor"?"Vendor":"Customer"} Name:</span>
            <span class="detail-value">${M.entityName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Original Document:</span>
            <span class="detail-value">${M.docnumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value">${M.paymentMethod.replace("_"," ").toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="status-badge status-${M.status}">${M.status.toUpperCase()}</span>
            </span>
          </div>
        </div>

        <div class="amount">
          AMOUNT PAID: ${R(M.paymentAmount)}
        </div>

        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Previous Balance:</span>
            <span class="detail-value">${R(M.previousBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">New Balance:</span>
            <span class="detail-value">${R(M.newBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Balance Reduction:</span>
            <span class="detail-value">${R(M.previousBalance-M.newBalance)}</span>
          </div>
        </div>

        ${M.description?`
          <div class="details">
            <div class="detail-row">
              <span class="detail-label">Description:</span>
              <span class="detail-value">${M.description}</span>
            </div>
          </div>
        `:""}

        ${M.paymentDetails?`
          <div class="details">
            <h4>Payment Details:</h4>
            ${M.paymentMethod==="cheque"&&M.paymentDetails.chequeNumber?`
              <div class="detail-row">
                <span class="detail-label">Cheque Number:</span>
                <span class="detail-value">${M.paymentDetails.chequeNumber}</span>
              </div>
            `:""}
            ${M.paymentMethod==="bank_transfer"&&M.paymentDetails.transactionId?`
              <div class="detail-row">
                <span class="detail-label">Transaction ID:</span>
                <span class="detail-value">${M.paymentDetails.transactionId}</span>
              </div>
            `:""}
          </div>
        `:""}

        <div class="footer">
          <p>Thank you for your payment!</p>
          <p>This is a computer-generated receipt. No signature required.</p>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>

        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>
        </div>
      </body>
      </html>
    `;z.document.write(ee),z.document.close(),z.focus()},Q=M=>new Date(M).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),R=M=>`${parseFloat(M).toFixed(2)}`,Z=M=>`badge bg-${{pending:"warning",cleared:"success",bounced:"danger",cancelled:"secondary"}[M]||"secondary"}`,J=M=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[M]||"ti-payment",ie=()=>{if(e.length===0){alert("No data to export");return}const M=e.map(re=>({"Payment Doc":re.paymentDocNumber,Date:Q(re.paymentDate),Type:re.recordType,Entity:re.entityName,"Doc Number":re.docnumber,Amount:re.paymentAmount,Method:re.paymentMethod,Status:re.status,"Previous Balance":re.previousBalance,"New Balance":re.newBalance})),z=[Object.keys(M[0]).join(","),...M.map(re=>Object.values(re).join(","))].join(`
`),ee=new Blob([z],{type:"text/csv"}),ne=window.URL.createObjectURL(ee),W=document.createElement("a");W.href=ne,W.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,W.click(),window.URL.revokeObjectURL(ne)};return console.log("Payment summary state:",c),n.jsxs("div",{className:"content",children:[S.text&&n.jsxs("div",{className:`alert alert-${S.type==="success"?"success":"danger"} alert-dismissible fade show`,children:[S.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>w({type:"",text:""})})]}),n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Payment Records"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/ledger",children:"Ledger"})}),n.jsx("li",{className:"breadcrumb-item",children:"Payments"})]})})]}),n.jsxs("div",{className:"",children:[n.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),n.jsxs("button",{onClick:ie,className:"btn btn-outline-secondary",children:[n.jsx("i",{className:"ti ti-download"})," Export"]})]})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-primary-light rounded",children:n.jsx("i",{className:"ti ti-receipt text-primary"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Total Payments"}),n.jsx("h4",{className:"mb-0",children:o.totalCount})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-success-light rounded",children:n.jsx("i",{className:"ti ti-building-store text-success"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Vendor Payments"}),n.jsx("h4",{className:"mb-0",children:R(c.byType.find(M=>M._id==="vendor")?.totalAmount||0)})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-info-light rounded",children:n.jsx("i",{className:"ti ti-users text-info"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Customer Payments"}),n.jsx("h4",{className:"mb-0",children:R(c.byType.find(M=>M._id==="customer")?.totalAmount||0)})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-warning-light rounded",children:n.jsx("i",{className:"ti ti-cash text-warning"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Today's Total"}),n.jsx("h4",{className:"mb-0",children:R(e.filter(M=>new Date(M.paymentDate).toDateString()===new Date().toDateString()).reduce((M,z)=>M+z.paymentAmount,0))})]})]})})})})]}),n.jsxs("div",{className:"card mb-4",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Filters"})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Type"}),n.jsxs("select",{className:"form-select",name:"recordType",value:s.recordType,onChange:I,children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"customer",children:"Customer"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",name:"status",value:s.status,onChange:I,children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"cleared",children:"Cleared"}),n.jsx("option",{value:"bounced",children:"Bounced"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Method"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:s.paymentMethod,onChange:I,children:[n.jsx("option",{value:"",children:"All Methods"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Entity Name"}),n.jsx("input",{type:"text",className:"form-control",name:"entityName",placeholder:"Search entity...",value:s.entityName,onChange:I})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",name:"startDate",value:s.startDate,onChange:I})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",name:"endDate",value:s.endDate,onChange:I})]})]}),n.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[n.jsxs("button",{className:"btn btn-outline-secondary",onClick:F,children:[n.jsx("i",{className:"ti ti-refresh"})," Clear Filters"]}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label me-2 mb-0",children:"Show:"}),n.jsxs("select",{className:"form-select",name:"limit",value:s.limit,onChange:I,style:{width:"auto"},children:[n.jsx("option",{value:"10",children:"10"}),n.jsx("option",{value:"25",children:"25"}),n.jsx("option",{value:"50",children:"50"}),n.jsx("option",{value:"100",children:"100"})]})]})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Payment Records"})}),n.jsx("div",{className:"card-body",children:r?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"ti ti-receipt-off text-muted",style:{fontSize:"3rem"}}),n.jsx("h5",{className:"text-muted mt-2",children:"No payments found"}),n.jsx("p",{className:"text-muted",children:"Try adjusting your filters or record a new payment."}),n.jsxs("a",{href:"/payments",className:"btn btn-primary",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Payment Doc"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Entity"}),n.jsx("th",{children:"Original Doc"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Method"}),n.jsx("th",{children:"Balance Change"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map((M,z)=>n.jsxs("tr",{children:[n.jsx("td",{children:(o.currentPage-1)*s.limit+z+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:M.paymentDocNumber})}),n.jsx("td",{children:n.jsx("small",{children:Q(M.paymentDate)})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${M.recordType==="vendor"?"success":"info"}`,children:M.recordType})}),n.jsx("td",{children:n.jsx("div",{children:n.jsx("strong",{children:M.entityName})})}),n.jsx("td",{children:n.jsx("span",{className:"text-muted",children:M.docnumber})}),n.jsx("td",{children:n.jsx("strong",{className:"text-success",children:R(M.paymentAmount)})}),n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:`${J(M.paymentMethod)} me-2`}),n.jsx("span",{className:"text-capitalize",children:M.paymentMethod.replace("_"," ")})]})}),n.jsx("td",{children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted",children:"From:"})," ",R(M.previousBalance)]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted",children:"To:"})," ",R(M.newBalance)]})]})}),n.jsx("td",{children:n.jsx("span",{className:Z(M.status),children:M.status})}),n.jsx("td",{children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Actions"}),n.jsxs("ul",{className:"dropdown-menu",children:[n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item",onClick:()=>P(M),children:[n.jsx("i",{className:"ti ti-eye me-2"}),"View Details"]})}),n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item",onClick:()=>B(M),children:[n.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})}),n.jsx("li",{children:n.jsx("hr",{className:"dropdown-divider"})}),n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item text-primary",onClick:()=>q(M),disabled:M.status==="cancelled",children:[n.jsx("i",{className:"ti ti-edit me-2"}),"Edit"]})})]})]})})]},M._id))})]})}),o.totalPages>1&&n.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[n.jsxs("div",{className:"text-muted",children:["Showing ",(o.currentPage-1)*s.limit+1," to"," ",Math.min(o.currentPage*s.limit,o.totalCount)," of"," ",o.totalCount," entries"]}),n.jsx("nav",{children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${o.hasPrev?"":"disabled"}`,children:n.jsx("button",{className:"page-link",onClick:()=>A(o.currentPage-1),disabled:!o.hasPrev,children:n.jsx("i",{className:"ti ti-chevron-left"})})}),[...Array(Math.min(5,o.totalPages))].map((M,z)=>{const ee=Math.max(1,o.currentPage-2)+z;return ee<=o.totalPages?n.jsx("li",{className:`page-item ${ee===o.currentPage?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>A(ee),children:ee})},ee):null}),n.jsx("li",{className:`page-item ${o.hasNext?"":"disabled"}`,children:n.jsx("button",{className:"page-link",onClick:()=>A(o.currentPage+1),disabled:!o.hasNext,children:n.jsx("i",{className:"ti ti-chevron-right"})})})]})})]})]})})]}),f&&u&&n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Payment Details"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("h6",{className:"text-muted mb-3",children:"Payment Information"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Payment Document:"}),n.jsx("div",{children:u.paymentDocNumber})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Date & Time:"}),n.jsx("div",{children:Q(u.paymentDate)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Amount:"}),n.jsx("div",{className:"text-success",children:R(u.paymentAmount)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Payment Method:"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:`${J(u.paymentMethod)} me-2`}),n.jsx("span",{className:"text-capitalize",children:u.paymentMethod.replace("_"," ")})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Status:"}),n.jsx("div",{children:n.jsx("span",{className:Z(u.status),children:u.status})})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("h6",{className:"text-muted mb-3",children:"Entity & Transaction Details"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Entity Type:"}),n.jsx("div",{className:"text-capitalize",children:u.recordType})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Entity Name:"}),n.jsx("div",{children:u.entityName})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Original Document:"}),n.jsx("div",{children:u.docnumber})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Balance Changes:"}),n.jsxs("div",{children:[n.jsxs("div",{children:["Previous: ",R(u.previousBalance)]}),n.jsxs("div",{children:["New: ",R(u.newBalance)]}),n.jsxs("div",{className:"text-success",children:["Reduction: ",R(u.previousBalance-u.newBalance)]})]})]})]})]}),u.description&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{className:"text-muted",children:"Description"}),n.jsx("p",{className:"bg-light p-3 rounded",children:u.description})]}),u.paymentDetails&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{className:"text-muted",children:"Payment Method Details"}),n.jsxs("div",{className:"bg-light p-3 rounded",children:[u.paymentMethod==="cheque"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.chequeNumber&&n.jsxs("div",{children:[n.jsx("strong",{children:"Cheque Number:"})," ",u.paymentDetails.chequeNumber]}),u.paymentDetails.bankName&&n.jsxs("div",{children:[n.jsx("strong",{children:"Bank:"})," ",u.paymentDetails.bankName]})]}),u.paymentMethod==="bank_transfer"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.accountNumber&&n.jsxs("div",{children:[n.jsx("strong",{children:"Account Number:"})," ",u.paymentDetails.accountNumber]}),u.paymentDetails.transactionId&&n.jsxs("div",{children:[n.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]}),u.paymentMethod==="upi"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.upiId&&n.jsxs("div",{children:[n.jsx("strong",{children:"UPI ID:"})," ",u.paymentDetails.upiId]}),u.paymentDetails.transactionId&&n.jsxs("div",{children:[n.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Close"}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>B(u),children:[n.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})]})]})})}),v&&b&&n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Payment - ",b.paymentDocNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1)})]}),n.jsxs("form",{onSubmit:Y,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Amount *"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:""}),n.jsx("input",{type:"number",className:"form-control",name:"paymentAmount",value:b.paymentAmount,onChange:V,min:"0",step:"0.01",required:!0})]})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Method *"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:b.paymentMethod,onChange:V,required:!0,children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Date *"}),n.jsx("input",{type:"date",className:"form-control",name:"paymentDate",value:b.paymentDate,onChange:V,required:!0})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Status *"}),n.jsxs("select",{className:"form-select",name:"status",value:b.status,onChange:V,required:!0,children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"cleared",children:"Cleared"}),n.jsx("option",{value:"bounced",children:"Bounced"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-12 mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",name:"description",value:b.description||"",onChange:V,rows:"3",placeholder:"Payment description or notes..."})]})]}),n.jsxs("div",{className:"alert alert-warning",children:[n.jsx("i",{className:"ti ti-alert-triangle me-2"}),n.jsx("strong",{children:"Note:"})," Editing payment details will not automatically update the balance in the original invoice/billing record. You may need to manually adjust balances if necessary."]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),n.jsxs("button",{type:"submit",className:"btn btn-primary",children:[n.jsx("i",{className:"ti ti-check me-2"}),"Update Payment"]})]})]})]})})})]})}function sIe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(1),[o,l]=j.useState(1),[c,d]=j.useState(!1),[u,h]=j.useState([]),[f,p]=j.useState(Date.now()),[v,g]=j.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[b,y]=j.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[S,w]=j.useState(""),[k,C]=j.useState(""),[_,E]=j.useState(""),[T,I]=j.useState(""),[F,A]=j.useState(""),[P,q]=j.useState(""),[V,Y]=j.useState(!1),[B,Q]=j.useState(""),[R,Z]=j.useState(""),[J,ie]=j.useState(""),[M,z]=j.useState(""),[ee,ne]=j.useState(!1),[W,re]=j.useState(null),[le,te]=j.useState(null),[K,de]=j.useState(null),[H,se]=j.useState(new Date),[be,ue]=j.useState({type:"",text:""}),oe=localStorage.getItem("selectedCompanyId"),ge=localStorage.getItem("financialYear"),Ne=10;j.useEffect(()=>{We();const Ee=it=>{it.key==="paymentUpdated"&&(ue({type:"info",text:"Payment updated in another tab. Refreshing ledger..."}),We(),setTimeout(()=>ue({type:"",text:""}),3e3))};return window.addEventListener("storage",Ee),()=>{window.removeEventListener("storage",Ee),K&&clearInterval(K)}},[]);const Me=async()=>{try{return(await Ie.get("/api/payment",{params:{companyId:oe,financialYear:ge,limit:1e3}})).data.payments||[]}catch(Ee){return console.error("Error fetching payments:",Ee),[]}},We=async()=>{d(!0);try{const[Ee,it,Tt]=await Promise.all([Ie.get("/api/invoiceform",{params:{companyId:oe,financialYear:ge}}),Ie.get("/api/billingform",{params:{companyId:oe,financialYear:ge}}),Me()]);t(Ee.data||[]),a(it.data||[]),h(Tt||[]),p(Date.now()),tt(Ee.data||[],it.data||[]),se(new Date)}catch(Ee){console.error("Error fetching data",Ee),ue({type:"error",text:"Failed to fetch data. Please refresh the page."})}finally{d(!1)}},tt=(Ee,it)=>{const Tt=Ee.reduce((Rt,sr)=>{const pr=sr.category?.toLowerCase()==="debit"&&(sr.finalTotal||sr.netAmount)||0,Nr=sr.category?.toLowerCase()==="credit"&&(sr.finalTotal||sr.netAmount)||0,gt=sr.balance||0;let Bt=pr,he=Nr;return pr>0&&Nr===0?he=-gt:Nr>0&&pr===0&&(Bt=-gt),{totalDebit:Rt.totalDebit+Bt,totalCredit:Rt.totalCredit+he,totalBalance:Rt.totalBalance+(he-Bt),outstandingBalance:Rt.outstandingBalance+gt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),lr=it.reduce((Rt,sr)=>{const pr=sr.category?.toLowerCase()==="debit"&&sr.finalTotal||0,Nr=sr.category?.toLowerCase()==="credit"&&sr.finalTotal||0,gt=sr.balance||0;let Bt=pr,he=Nr;return pr>0&&Nr===0?he=-gt:Nr>0&&pr===0&&(Bt=-gt),{totalDebit:Rt.totalDebit+Bt,totalCredit:Rt.totalCredit+he,totalBalance:Rt.totalBalance+(Bt-he),outstandingBalance:Rt.outstandingBalance+gt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0});g(Tt),y(lr)},mt=(Ee,it,Tt)=>{let lr=Ee,Rt=it;return Ee>0&&it===0?Rt=Ee-Tt:it>0&&Ee===0&&(lr=it-Tt),{adjustedDebit:lr,adjustedCredit:Rt}},Be=(Ee,it,Tt)=>!u||u.length===0?[]:u.filter(lr=>{const Rt=lr.docnumber===Ee||lr.invoiceNumber===Ee||lr.originalDocNumber===Ee;return lr.recordType===Tt&&Rt}),dt=(Ee,it)=>{te(Ee),re(it),ne(!0)},Dt=e.map((Ee,it)=>{const Tt=Ee.category?.toLowerCase()==="debit"&&(Ee.finalTotal||Ee.netAmount)||0,lr=Ee.category?.toLowerCase()==="credit"&&(Ee.finalTotal||Ee.netAmount)||0,Rt=Ee?.vendor||"Unknown Vendor",sr=Ee?.docnumber||"_",pr=Be(sr,Rt,"vendor"),Nr=pr.filter(_e=>_e.status==="cleared"),gt=Nr.reduce((_e,Ue)=>_e+(Ue.paymentAmount||0),0),Bt=Nr.sort((_e,Ue)=>new Date(Ue.paymentDate)-new Date(_e.paymentDate))[0];let he=Ee.balance||0;he<0&&(he=0);const{adjustedDebit:Le,adjustedCredit:Ae}=mt(Tt,lr,he);return{id:Ee._id||it,name:Rt,docnumber:sr,debit:Le,credit:Ae,balance:he,originalAmount:Ee.finalTotal||Ee.netAmount||0,lastPaymentAmount:Bt?.paymentAmount||0,lastPaymentDate:Bt?.paymentDate||null,lastPaymentMethod:Bt?.paymentMethod||null,createdAt:Ee.createdAt||new Date,category:Ee.category||"debit",originalDebit:Tt,originalCredit:lr,totalPayments:gt,paymentCount:Nr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Ue)=>new Date(_e.paymentDate)-new Date(Ue.paymentDate))[0].paymentDate:null}}),It=r.map((Ee,it)=>{const Tt=Ee.category?.toLowerCase()==="debit"&&Ee.finalTotal||0,lr=Ee.category?.toLowerCase()==="credit"&&Ee.finalTotal||0,Rt=Ee?.customer||"Unknown Customer",sr=Ee.docnumber||"_",pr=Be(sr,Rt,"customer"),Nr=pr.filter(_e=>_e.status==="cleared"),gt=Nr.reduce((_e,Ue)=>_e+(Ue.paymentAmount||0),0),Bt=Nr.sort((_e,Ue)=>new Date(Ue.paymentDate)-new Date(_e.paymentDate))[0];let he=Ee.balance||0;he<0&&(he=0);const{adjustedDebit:Le,adjustedCredit:Ae}=mt(Tt,lr,he);return{id:Ee._id||it,docnumber:sr,name:Rt,debit:Le,credit:Ae,balance:he,originalAmount:Ee.finalTotal||0,lastPaymentAmount:Bt?.paymentAmount||0,lastPaymentDate:Bt?.paymentDate||null,lastPaymentMethod:Bt?.paymentMethod||null,createdAt:Ee.createdAt||new Date,category:Ee.category||"debit",originalDebit:Tt,originalCredit:lr,totalPayments:gt,paymentCount:Nr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Ue)=>new Date(_e.paymentDate)-new Date(Ue.paymentDate))[0].paymentDate:null}}),zt=[...new Set(Dt.map(Ee=>Ee.name))],xe=[...new Set(It.map(Ee=>Ee.name))],fe=(Ee,it,Tt)=>!it&&!Tt?Ee:Ee.filter(lr=>{const Rt=new Date(lr.createdAt),sr=it?new Date(it):null,pr=Tt?new Date(Tt):null;return!(sr&&Rt<sr||pr&&Rt>pr)});let ve=S?Dt.filter(Ee=>Ee.name===S):Dt;ve=fe(ve,_,T);let pe=k?It.filter(Ee=>Ee.name===k):It;pe=fe(pe,F,P),console.log("filteredCustomerData",pe);const Te=ve.reduce((Ee,it)=>({totalDebit:Ee.totalDebit+it.debit,totalCredit:Ee.totalCredit+it.credit,totalBalance:Ee.totalBalance+(it.credit-it.debit),outstandingBalance:Ee.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Xe=pe.reduce((Ee,it)=>({totalDebit:Ee.totalDebit+it.debit,totalCredit:Ee.totalCredit+it.credit,totalBalance:Ee.totalBalance+(it.debit-it.credit),outstandingBalance:Ee.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),kt=(Ee,it="")=>{Q(Ee),Z(it),ie(""),z(""),Y(!0)},Je=(Ee,it,Tt)=>{const lr=["S.No","Invoice/Doc Number",Tt==="vendor"?"Vendor Name":"Customer Name","Invoice Original Amount","Current Debit","Current Credit","Outstanding Balance","Payment Status","Total Payments Made (This Invoice)","Payment Count (This Invoice)","Cleared Payments Count","Pending Payments Count","Payment Methods Used","First Payment Date","Last Payment Date","Last Payment Amount","Last Payment Method","Invoice Created Date","Detailed Payment History","Payment Status Breakdown","Balance Calculation Details"],Rt=[];Rt.push(lr.join(",")),Ee.forEach((Bt,he)=>{const Le=Bt.specificInvoicePayments||[],Ae=Le.map(jt=>{const ct=Ye(jt.paymentDate),Nt=(jt.paymentAmount||0).toFixed(2),wt=jt.paymentMethod||"N/A",er=jt.status||"N/A",cr=jt.paymentDocNumber||"N/A",xr=jt.description||"N/A";return`[${ct}] Amount: ${Nt} | Method: ${wt} | Status: ${er.toUpperCase()} | Reference: ${cr} | Description: ${xr} `}).join(` 
 `),_e=Bt.allPaymentStatuses.reduce((jt,ct)=>(jt[ct]=(jt[ct]||0)+1,jt),{}),Ue=Object.entries(_e).map(([jt,ct])=>`${jt.toUpperCase()}: ${ct}`).join(", "),He=`Original: ${Bt.originalAmount.toFixed(2)} | Total Paid: ${Bt.totalPayments.toFixed(2)} | Outstanding: ${Bt.balance.toFixed(2)} | Calculation: ${Bt.originalAmount.toFixed(2)} - ${Bt.totalPayments.toFixed(2)} = ${Bt.balance.toFixed(2)}`,xt=[he+1,`"${Bt.docnumber}"`,`"${Bt.name}"`,Bt.originalAmount.toFixed(2),Bt.debit.toFixed(2),Bt.credit.toFixed(2),Bt.balance.toFixed(2),At(Bt.balance,Bt.originalAmount).status,Bt.totalPayments.toFixed(2),Bt.paymentCount,Le.filter(jt=>jt.status==="cleared").length,Le.filter(jt=>jt.status==="pending").length,`"${Bt.paymentMethods.join(", ")||"No payments"}"`,Bt.firstPaymentDate?Re(Bt.firstPaymentDate):"N/A",Bt.lastPaymentDate?Re(Bt.lastPaymentDate):"N/A",Bt.lastPaymentAmount.toFixed(2),`"${Bt.lastPaymentMethod||"N/A"}"`,Re(Bt.createdAt),`"${Ae||"No payment history for this invoice"}"`,`"${Ue||"No payment status available"}"`,`"${He}"`];Rt.push(xt.join(","))}),Rt.push(""),Rt.push("Invoice Number,Entity Name,Invoice Amount,Payments Received,Outstanding,Payment Efficiency %,First Payment,Last Payment,Payment Methods,Status"),Ee.forEach(Bt=>{const he=Bt.originalAmount>0?(Bt.totalPayments/Bt.originalAmount*100).toFixed(1):0;Rt.push([`"${Bt.docnumber}"`,`"${Bt.name}"`,Bt.originalAmount.toFixed(2),Bt.totalPayments.toFixed(2),Bt.balance.toFixed(2),`${he}%`,Bt.firstPaymentDate?Re(Bt.firstPaymentDate):"No payments",Bt.lastPaymentDate?Re(Bt.lastPaymentDate):"No payments",`"${Bt.paymentMethods.join(", ")||"None"}"`,At(Bt.balance,Bt.originalAmount).status].join(","))}),Rt.push(""),Rt.push(`"Financial Year","${ge}"`),Rt.push(`"Total Invoices","${Ee.length}"`),Rt.push(`"Total Payment Records","${Ee.reduce((Bt,he)=>Bt+he.paymentCount,0)}"`);const sr=Rt.join(`
`),pr=new Blob([sr],{type:"text/csv;charset=utf-8;"}),Nr=document.createElement("a"),gt=URL.createObjectURL(pr);Nr.setAttribute("href",gt),Nr.setAttribute("download",it),Nr.style.visibility="hidden",document.body.appendChild(Nr),Nr.click(),document.body.removeChild(Nr)},ze=()=>{let Ee=[],it="";B==="vendor"?(Ee=R?Dt.filter(lr=>lr.name===R):Dt,it=R?`${R}_vendor_detailed_invoice_payments`:"all_vendor_detailed_invoice_payments"):(Ee=R?It.filter(lr=>lr.name===R):It,it=R?`${R}_customer_detailed_invoice_payments`:"all_customer_detailed_invoice_payments"),Ee=fe(Ee,J,M),(J||M)&&(it+=`_${J||"start"}_to_${M||"end"}`);const Tt=new Date().toISOString().slice(0,19).replace(/:/g,"-");it+=`_${Tt}.csv`,Je(Ee,it,B),Y(!1)},Fe=(Ee,it)=>Ee.slice((it-1)*Ne,it*Ne),Ve=Math.ceil(ve.length/Ne)||1,pt=Math.ceil(pe.length/Ne)||1,Pe=Ee=>{const it=parseFloat(Ee||0),lr=`${Math.abs(it).toFixed(2)}`;return it<0?`(${lr})`:lr},Re=Ee=>Ee?new Date(Ee).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",Ye=Ee=>Ee?new Date(Ee).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",At=(Ee,it)=>Ee<=0?{status:"Paid",class:"success"}:Ee===it?{status:"Unpaid",class:"danger"}:{status:"Partial",class:"warning"},Gt=Ee=>Ee>0?"text-success":Ee<0?"text-danger":"text-muted",De=Ee=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[Ee]||"ti ti-payment";return n.jsxs("div",{className:"content",children:[be.text&&n.jsxs("div",{className:`alert alert-${be.type==="success"?"success":be.type==="info"?"info":"danger"} alert-dismissible fade show`,children:[be.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>ue({type:"",text:""})})]}),n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Ledger"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),n.jsx("li",{className:"breadcrumb-item active",children:"Ledger"})]})})]}),n.jsxs("div",{children:[n.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),n.jsxs("a",{href:"/paymentdisplay",className:"btn btn-outline-primary me-2",children:[n.jsx("i",{className:"ti ti-eye"})," View Payments"]}),n.jsxs("button",{onClick:We,className:"btn btn-outline-secondary",children:[n.jsx("i",{className:"ti ti-refresh"})," Refresh Now"]})]})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Vendor Summary"}),n.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>kt("vendor"),title:"Download Detailed Vendor Payment Data",children:n.jsx("i",{className:"ti ti-download"})})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-12 mb-2",children:[n.jsx("label",{children:"Select Vendor: "}),n.jsxs("select",{value:S,onChange:Ee=>{w(Ee.target.value),i(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[n.jsx("option",{value:"",children:"All Vendors"}),zt.map(Ee=>n.jsx("option",{value:Ee,children:Ee},Ee))]}),S&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>w(""),children:"Clear"}),n.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>kt("vendor",S),title:`Download detailed ${S} payment data`,children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:_,onChange:Ee=>{E(Ee.target.value),i(1)}})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:Ee=>{I(Ee.target.value),i(1)}})]})]}),n.jsxs("div",{className:"row text-center",children:[n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),n.jsx("h6",{className:"text-danger",children:Pe(Te.totalDebit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),n.jsx("h6",{className:"text-success",children:Pe(Te.totalCredit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),n.jsx("h6",{className:Te.totalBalance>=0?"text-success":"text-danger",children:Pe(Te.totalBalance)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),n.jsx("h6",{className:"text-warning",children:Pe(Te.outstandingBalance)})]})]})]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Customer Summary"}),n.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>kt("customer"),title:"Download Detailed Customer Payment Data",children:n.jsx("i",{className:"ti ti-download"})})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-12 mb-2",children:[n.jsx("label",{children:"Select Customer: "}),n.jsxs("select",{value:k,onChange:Ee=>{C(Ee.target.value),l(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[n.jsx("option",{value:"",children:"All Customers"}),xe.map(Ee=>n.jsx("option",{value:Ee,children:Ee},Ee))]}),k&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>C(""),children:"Clear"}),n.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>kt("customer",k),title:`Download detailed ${k} payment data`,children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:F,onChange:Ee=>{A(Ee.target.value),l(1)}})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:P,onChange:Ee=>{q(Ee.target.value),l(1)}})]})]}),n.jsxs("div",{className:"row text-center",children:[n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),n.jsx("h6",{className:"text-danger",children:Pe(Xe.totalDebit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),n.jsx("h6",{className:"text-success",children:Pe(Xe.totalCredit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),n.jsx("h6",{className:Xe.totalBalance>=0?"text-success":"text-danger",children:Pe(Xe.totalBalance)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),n.jsx("h6",{className:"text-warning",children:Pe(Xe.outstandingBalance)})]})]})]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-12 mb-4",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h5",{className:"mb-0",children:"Vendor Ledger"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsxs("small",{className:"me-3",children:["Total Records: ",ve.length]}),n.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>kt("vendor",S),children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsx("div",{className:"card-body",children:c?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"DocNumber"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Original Amount"}),n.jsx("th",{children:"Debit"}),n.jsx("th",{children:"Credit"}),n.jsx("th",{children:"Current Balance"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Payment Summary"}),n.jsx("th",{children:"Payment Timeline"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Fe(ve,s).map((Ee,it)=>{const Tt=At(Number(Ee.balance),Ee.originalAmount),lr=Ee.originalAmount>0?(Ee.totalPayments/Ee.originalAmount*100).toFixed(1):0;return n.jsxs("tr",{children:[n.jsx("td",{children:(s-1)*Ne+it+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:Ee.docnumber})}),n.jsx("td",{children:n.jsx("strong",{children:Ee.name})}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{children:Pe(Ee.originalAmount)})}),n.jsx("td",{className:`text-end fw-bold ${Gt(Ee.debit)}`,children:Pe(Ee.totalPayments)}),n.jsx("td",{className:`text-end fw-bold ${Gt(Ee.credit)}`,children:Pe(Ee.balance)}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{className:`${Ee.balance>0?"text-danger":"text-success"}`,children:Pe(Ee.balance)})}),n.jsxs("td",{children:[n.jsx("span",{className:`badge bg-${Tt.class}`,children:Tt.status}),n.jsx("div",{className:"mt-1",children:n.jsxs("small",{className:"text-muted",children:[lr,"% paid"]})})]}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[Ee.totalPayments>0?n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"badge bg-success mb-1",children:["",Ee.totalPayments.toFixed(0)]}),n.jsxs("small",{className:"text-muted",children:[Ee.paymentCount," payment(s)"]})]}):n.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),Ee.pendingPayments>0&&n.jsxs("span",{className:"badge bg-warning mt-1",children:[Ee.pendingPayments," Pending"]})]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsxs("small",{className:"text-muted",children:["Created: ",Re(Ee.createdAt)]}),Ee.firstPaymentDate&&n.jsxs("small",{className:"text-success",children:["First Payment: ",Re(Ee.firstPaymentDate)]}),Ee.lastPaymentDate&&n.jsxs("small",{className:"text-primary",children:["Last Payment: ",Re(Ee.lastPaymentDate)]})]})}),n.jsx("td",{className:"text-center",children:n.jsx("div",{className:"btn-group-vertical",role:"group",children:Ee.specificInvoicePayments.length>0?n.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(Ee,Ee.specificInvoicePayments),title:"View detailed payment history",children:[n.jsx("i",{className:"ti ti-eye"})," View Details"]}):n.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[n.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},Ee.id)})})]})}),Ve>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"d-flex justify-content-end align-items-end",children:n.jsx("nav",{"aria-label":"Vendor pagination",children:n.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>i(Ee=>Math.max(Ee-1,1)),disabled:s===1,title:"Previous page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],Tt=[];it.push(1);for(let sr=Math.max(2,s-2);sr<=Math.min(Ve-1,s+2);sr++)it.push(sr);Ve>1&&it.push(Ve);const lr=[...new Set(it)].sort((sr,pr)=>sr-pr);let Rt;for(let sr of lr)Rt&&(sr-Rt===2?Tt.push(Rt+1):sr-Rt!==1&&Tt.push("...")),Tt.push(sr),Rt=sr;return Tt.map((sr,pr)=>sr==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`vendor-ellipsis-${pr}`):n.jsx("li",{className:`page-item ${s===sr?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>i(sr),title:`Go to page ${sr}`,children:sr})},`vendor-page-${sr}`))})(),n.jsx("li",{className:`page-item ${s===Ve?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>i(Ee=>Math.min(Ee+1,Ve)),disabled:s===Ve,title:"Next page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})}),n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h5",{className:"mb-0",children:"Customer Ledger"}),n.jsx("div",{className:"d-flex align-items-center",children:n.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>kt("customer",k),children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})})]}),n.jsx("div",{className:"card-body",children:c?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"DocNumber"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Original Amount"}),n.jsx("th",{children:"Debit"}),n.jsx("th",{children:"Credit"}),n.jsx("th",{children:"Current Balance"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Payment Summary"}),n.jsx("th",{children:"Payment Timeline"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Fe(pe,o).map((Ee,it)=>{const Tt=At(Ee.balance,Ee.originalAmount),lr=Ee.originalAmount>0?(Ee.totalPayments/Ee.originalAmount*100).toFixed(1):0;return n.jsxs("tr",{children:[n.jsx("td",{children:(o-1)*Ne+it+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:Ee.docnumber})}),n.jsx("td",{children:n.jsx("strong",{children:Ee.name})}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{children:Pe(Ee.originalAmount)})}),n.jsx("td",{className:`text-end fw-bold ${Gt(Ee.debit)}`,children:Pe(Ee.balance)}),n.jsx("td",{className:`text-end fw-bold ${Gt(Ee.credit)}`,children:Pe(Ee.totalPayments.toFixed(0))}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{className:`${Ee.balance>0?"text-danger":"text-success"}`,children:Pe(Ee.balance)})}),n.jsxs("td",{children:[n.jsx("span",{className:`badge bg-${Tt.class}`,children:Tt.status}),n.jsx("div",{className:"mt-1",children:n.jsxs("small",{className:"text-muted",children:[lr,"% paid"]})})]}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[Ee.totalPayments>0?n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"badge bg-success mb-1",children:["",Ee.totalPayments.toFixed(0)]}),n.jsxs("small",{className:"text-muted",children:[Ee.paymentCount," payment(s)"]})]}):n.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),Ee.pendingPayments>0&&n.jsxs("span",{className:"badge bg-warning mt-1",children:[Ee.pendingPayments," Pending"]})]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsxs("small",{className:"text-muted",children:["Created: ",Re(Ee.createdAt)]}),Ee.firstPaymentDate&&n.jsxs("small",{className:"text-success",children:["First Payment: ",Re(Ee.firstPaymentDate)]}),Ee.lastPaymentDate&&n.jsxs("small",{className:"text-primary",children:["Last Payment: ",Re(Ee.lastPaymentDate)]})]})}),n.jsx("td",{className:"text-center",children:n.jsx("div",{className:"btn-group-vertical",role:"group",children:Ee.specificInvoicePayments.length>0?n.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(Ee,Ee.specificInvoicePayments),title:"View detailed payment history",children:[n.jsx("i",{className:"ti ti-eye"})," View Details"]}):n.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[n.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},Ee.id)})})]})}),pt>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"d-flex justify-content-end align-items-end",children:n.jsx("nav",{"aria-label":"Customer pagination",children:n.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[n.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>l(Ee=>Math.max(Ee-1,1)),disabled:o===1,title:"Previous page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],Tt=[];it.push(1);for(let sr=Math.max(2,o-2);sr<=Math.min(pt-1,o+2);sr++)it.push(sr);pt>1&&it.push(pt);const lr=[...new Set(it)].sort((sr,pr)=>sr-pr);let Rt;for(let sr of lr)Rt&&(sr-Rt===2?Tt.push(Rt+1):sr-Rt!==1&&Tt.push("...")),Tt.push(sr),Rt=sr;return Tt.map((sr,pr)=>sr==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`customer-ellipsis-${pr}`):n.jsx("li",{className:`page-item ${o===sr?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>l(sr),title:`Go to page ${sr}`,children:sr})},`customer-page-${sr}`))})(),n.jsx("li",{className:`page-item ${o===pt?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>l(Ee=>Math.min(Ee+1,pt)),disabled:o===pt,title:"Next page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})})]}),ee&&W&&le&&n.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header ",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"ti ti-file-invoice me-2"}),"Payment Analysis - Invoice ",le.docnumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close",onClick:()=>ne(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card ",children:[n.jsx("div",{className:"card-header ",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"ti ti-clipboard-data me-2"}),"Invoice Summary & Payment Overview"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-primary",children:"Invoice Number"}),n.jsx("br",{}),n.jsx("span",{className:"h5 text-dark",children:le.docnumber})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-info",children:"Entity"}),n.jsx("br",{}),n.jsx("span",{className:"h6 text-dark",children:le.name})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-success",children:"Original Amount"}),n.jsx("br",{}),n.jsx("span",{className:"h5 text-success",children:Pe(le.originalAmount)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:le.balance>0?"text-danger":"text-success",children:"Outstanding Balance"}),n.jsx("br",{}),n.jsx("span",{className:`h5 ${le.balance>0?"text-danger":"text-success"}`,children:Pe(le.balance)})]})})]}),n.jsxs("div",{className:"row mt-3",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-info text-white rounded",children:[n.jsx("strong",{children:"Total Payments"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:Pe(le.totalPayments)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-primary text-white rounded",children:[n.jsx("strong",{children:"Payment Count"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:le.paymentCount})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:`text-center p-2 text-white rounded bg-${At(le.balance,le.originalAmount).class}`,children:[n.jsx("strong",{children:"Status"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:At(le.balance,le.originalAmount).status})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-secondary text-white rounded",children:[n.jsx("strong",{children:"Invoice Age"}),n.jsx("br",{}),n.jsxs("span",{className:"h6",children:[Math.floor((new Date-new Date(le.createdAt))/(1e3*60*60*24))," days"]})]})})]})]})]})})}),W.length>0&&n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header text-dark",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"ti ti-chart-bar me-2"}),"Payment Analytics & Summary"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("h6",{className:"text-primary",children:"Payment Status Breakdown:"}),n.jsx("ul",{className:"list-unstyled",children:Object.entries(W.reduce((Ee,it)=>(Ee[it.status]=(Ee[it.status]||0)+1,Ee),{})).map(([Ee,it])=>n.jsxs("li",{className:"mb-1",children:[n.jsx("span",{className:`badge bg-${Ee==="cleared"?"success":Ee==="pending"?"warning":Ee==="bounced"?"danger":"secondary"}`,children:Ee.toUpperCase()}),n.jsxs("span",{className:"ms-2",children:[it," transaction(s)"]})]},Ee))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("h6",{className:"text-success",children:"Payment Method Summary:"}),n.jsx("ul",{className:"list-unstyled",children:Object.entries(W.reduce((Ee,it)=>{const Tt=it.paymentMethod||"Unknown";return Ee[Tt]=(Ee[Tt]||0)+(it.paymentAmount||0),Ee},{})).map(([Ee,it])=>n.jsxs("li",{className:"mb-1",children:[n.jsx("i",{className:`${De(Ee)} me-2 text-primary`}),n.jsx("span",{className:"text-capitalize",children:Ee.replace("_"," ")}),n.jsx("span",{className:"ms-2 text-success",children:Pe(it)})]},Ee))})]})]})})]})})})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>ne(!1),children:[n.jsx("i",{className:"ti ti-x me-1"})," Close"]}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{const Ee=W.map((pr,Nr)=>[Nr+1,le.docnumber,le.name,Re(pr.paymentDate),pr.paymentDocNumber||"N/A",pr.paymentAmount||0,pr.paymentMethod||"N/A",pr.status||"N/A",pr.previousBalance||0,pr.newBalance||0,pr.description||"N/A",Ye(pr.createdAt||pr.paymentDate)]),Tt=[["S.No","Invoice Number","Entity Name","Payment Date","Payment Doc Number","Payment Amount","Payment Method","Status","Balance Before","Balance After","Description","Created At"].join(","),...Ee.map(pr=>pr.map(Nr=>`"${Nr}"`).join(","))].join(`
`),lr=new Blob([Tt],{type:"text/csv;charset=utf-8;"}),Rt=document.createElement("a"),sr=URL.createObjectURL(lr);Rt.setAttribute("href",sr),Rt.setAttribute("download",`invoice_${le.docnumber}_payment_details_${new Date().toISOString().slice(0,10)}.csv`),Rt.style.visibility="hidden",document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt)},children:[n.jsx("i",{className:"ti ti-download me-1"})," Export to CSV"]})]})]})})}),V&&n.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Download ",B==="vendor"?"Vendor":"Customer"," Payment Details"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>Y(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"mb-3",children:n.jsx("strong",{children:R?`${B==="vendor"?"Vendor":"Customer"}: ${R}`:`All ${B==="vendor"?"Vendors":"Customers"}`})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date (Optional):"}),n.jsx("input",{type:"date",className:"form-control",value:J,onChange:Ee=>ie(Ee.target.value)})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date (Optional):"}),n.jsx("input",{type:"date",className:"form-control",value:M,onChange:Ee=>z(Ee.target.value)})]})]})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Y(!1),children:"Cancel"}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:ze,children:[n.jsx("i",{className:"ti ti-download"})," Download Report"]})]})]})})})]})}function iIe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState({}),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState(""),[f,p]=j.useState([]),[v,g]=j.useState([]),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[_,E]=j.useState([]),[T,I]=j.useState(!1),[F,A]=j.useState(""),[P,q]=j.useState([]),[V,Y]=j.useState(""),[B,Q]=j.useState(""),[R,Z]=j.useState("internal"),[J,ie]=j.useState(""),[M,z]=j.useState(""),[ee,ne]=j.useState(""),[W,re]=j.useState(""),[le,te]=j.useState([]),[K,de]=j.useState(null),[H,se]=j.useState(0),[be,ue]=j.useState(""),[oe,ge]=j.useState([]),[Ne,Me]=j.useState([]),[We,tt]=j.useState(""),[mt,Be]=j.useState(""),[dt,Dt]=j.useState(""),[It,zt]=j.useState([]),[xe,fe]=j.useState(1),[ve,pe]=j.useState(10),[Te,Xe]=j.useState(0),[kt,Je]=j.useState(""),[ze,Fe]=j.useState([]),[Ve,pt]=j.useState([]),[Pe,Re]=j.useState(""),[Ye,At]=j.useState(""),[Gt,De]=j.useState(""),[Ee,it]=j.useState(""),Tt=localStorage.getItem("selectedCompanyId"),lr=localStorage.getItem("financialYear"),Rt=async()=>{try{const mr=(await Ie.get("/api/material",{params:{companyId:Tt,financialYear:lr}})).data.sort((fr,Lr)=>new Date(Lr.createdAt)-new Date(fr.createdAt));t(mr),Xe(mr.length),fe(1)}catch(Ke){console.error("Failed to fetch materials:",Ke)}},sr=async()=>{try{const Ke=await Ie.get("/api/stock/data",{params:{companyId:Tt,financialYear:lr}});a(Ke.data),console.log("Stock data fetched:",Ke.data)}catch(Ke){console.error("Failed to fetch stock:",Ke)}},pr=(Ke,mr,fr)=>{mr.includes(Ke)?fr(mr.filter(Lr=>Lr!==Ke)):fr([...mr,Ke])},Nr=Ke=>{Je(Ke.target.value),fe(1)};j.useEffect(()=>{Rt(),sr(),Ie.get("/api/vendors",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>C(Ke.data)),Ie.get("/api/tax",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>te(Ke.data)),Ie.get("/api/locations",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>zt(Ke.data)),Ie.get("/api/general-conditions",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>{const mr=Ke.data.filter(fr=>!fr.isDeleted).map(fr=>({_id:fr._id,name:fr.name,description:fr.description}));Fe(mr)}),Ie.get("/api/processes",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>{const mr=Ke.data.filter(fr=>!fr.isDeleted).map(fr=>({_id:fr._id,processId:fr.processId,processDescription:fr.processDescription}));pt(mr)})},[]);const Bt=e.map(Ke=>{const fr=r.find(wn=>wn.materialId===Ke.materialId)?.quantityAvailable||0;Ke.safetyStock;const Lr=Ke.maxstock||0,fa=Math.abs(Lr-fr),Pa=Math.abs(Lr-fr);return{...Ke,inventoryStock:fr,reorderPoint:fa,reorderQuantity:Pa}}).filter(Ke=>{if(!kt)return!0;const mr=kt.toLowerCase();return Ke.materialId?.toLowerCase().includes(mr)||Ke.description?.toLowerCase().includes(mr)||Ke.minstock?.toString().includes(mr)||Ke.maxstock?.toString().includes(mr)||Ke.safetyStock?.toString().includes(mr)||Ke.inventoryStock?.toString().includes(mr)||Ke.reorderQuantity?.toString().includes(mr)}),he=Math.ceil(Bt.length/ve),Le=(xe-1)*ve,Ae=Le+ve,_e=Bt.slice(Le,Ae),Ue=Ke=>{Ke>=1&&Ke<=he&&fe(Ke)},He=()=>{const Ke=[];if(he<=5)for(let fr=1;fr<=he;fr++)Ke.push(fr);else if(xe<=3)for(let fr=1;fr<=5;fr++)Ke.push(fr);else if(xe>=he-2)for(let fr=he-5+1;fr<=he;fr++)Ke.push(fr);else for(let fr=xe-2;fr<=xe+2;fr++)Ke.push(fr);return Ke},xt=async()=>{if(u==="PO"){if(!_){alert("Please select a vendor for Purchase Order");return}if(!K){alert("Please select tax for Purchase Order");return}}console.log("modalMaterial",c);const Ke=parseFloat(c.unitPrice)||0,mr=parseFloat(c.reorderQuantity)||0;if(u==="PE"){const fr=f.find(Pa=>Pa._id===M),Lr={materialId:c.materialId,description:c.description,qty:mr,baseUnit:c.baseUnit,orderUnit:c.orderUnit},fa={indentIdType:R,categoryId:fr._id,categoryName:fr.name||fr.categoryName,location:ee,buyerGroup:W,companyId:Tt,financialYear:lr,deliveryDate:b,documentDate:new Date().toISOString().split("T")[0],items:[Lr]};if(R==="external"){if(!J.trim()){alert("Please enter External Indent ID");return}fa.indentId=J.trim()}try{const Pa=await Ie.post("/api/indent/create",fa);alert(`Indent created with ID: ${Pa.data.indentId}`),jt()}catch(Pa){console.error("Indent creation failed",Pa),alert("Failed to create indent")}}else if(u==="PO"){const fr=v.find(Xn=>Xn._id===M._id),Lr=mr*Ke;if(isNaN(Lr)){alert("Please enter valid quantity and unit price");return}const fa=parseFloat(K?.cgst)||0,Pa=parseFloat(K?.sgst)||0,wn=parseFloat(K?.igst)||0,Bn=Lr*fa/100,cn=Lr*Pa/100,Is=Lr*wn/100,tn=Bn+cn+Is,Ga=parseFloat(H)||0,In=Lr+tn-Ga,Ci={materialId:c.materialId,description:c.description,quantity:mr,price:Ke,baseUnit:c.baseUnit,orderUnit:c.orderUnit},ki={companyId:Tt,financialYear:lr,categoryId:fr._id,category:fr.name||fr.categoryName,date:new Date().toISOString().split("T")[0],vendor:_,deliveryLocation:V||"",deliveryAddress:B||"",items:[Ci],notes:S||"",remarks:We||"",preparedby:dt||"",approvedby:mt||"",taxName:K?.taxName||"",cgst:Bn,sgst:cn,igst:Is,taxDiscount:Ga,finalTotal:In,processes:Ne||[],generalConditions:oe||[],poGenerationType:R};if(R==="external"){if(!J.trim()){alert("Please enter External PO ID");return}ki.poNumber=J.trim()}console.log("PO Payload:",ki);try{const Xn=await Ie.post("/api/purchase-orders",ki);alert(`Purchase Order created with ID: ${Xn.data.poNumber}`),jt()}catch(Xn){console.error("Purchase Order creation failed",Xn),alert(`Failed to create Purchase Order: ${Xn.response?.data?.error||Xn.message}`)}}},jt=()=>{l(!1),d(null),z(""),ne(""),re(""),y(""),ie(""),E(""),de(null),w(""),ue(""),tt(""),Dt(""),Be(""),Y(""),Q(""),se(0)},ct=(Ke,mr)=>{i(fr=>{const Lr={...fr};return Lr[`${Ke}_PE`]=!1,Lr[`${Ke}_PO`]=!1,Lr[`${Ke}_${mr}`]=!0,Lr})};j.useEffect(()=>{Ie.get("/api/purchasecategory",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>p(Ke.data)),Ie.get("/api/po-categories",{params:{companyId:Tt,financialYear:lr}}).then(Ke=>g(Ke.data))},[]);const Nt=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:xr})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Vendor"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:F,onChange:Ke=>wt(Ke.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:er,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:P.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:P.map((Ke,mr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:Ke.vnNo})}),n.jsx("td",{children:Ke.name1}),n.jsx("td",{children:Ke.email}),n.jsx("td",{children:Ke.phone}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>cr(Ke),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:F?`No vendors found matching "${F}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:xr,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),wt=Ke=>{if(A(Ke),Ke.trim()){const mr=k.filter(fr=>fr.vendorName.toLowerCase().includes(Ke.toLowerCase())||fr.vendorCode.toLowerCase().includes(Ke.toLowerCase()));q(mr)}else q([])},er=()=>{q(k)},cr=Ke=>{E(Ke.name1||Ke.vendorName),I(!1),A(""),q([])},xr=()=>{I(!1),A(""),q([])};return n.jsxs("div",{className:"content",children:[n.jsx("style",{children:`
.checkbox-radio {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background-color: white;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
}

.checkbox-radio:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.checkbox-radio:checked::after {
    content: '';
    position: absolute;
    top: -2px;
    left: 2px;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.checkbox-radio:hover {
    border-color: #007bff;
}

.checkbox-radio:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.pagination-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    flex-wrap: wrap;
    gap: 10px;
}

.pagination-info {
    color: #6c757d;
    font-size: 14px;
}

.pagination-controls .form-select {
    width: auto;
    min-width: 80px;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-link {
    color: #007bff;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.75rem;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
`}),n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Requirements Planning"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Requirements Planning"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:kt,onChange:Nr})]})}),n.jsx("div",{})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered text-wrap",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Mat Desc"}),n.jsx("th",{children:"Min Stock"}),n.jsx("th",{children:"Max Stock"}),n.jsx("th",{children:"Safety Stock"}),n.jsx("th",{children:"INV Stock"}),n.jsx("th",{children:"ROP"}),n.jsx("th",{className:"wrap-header",children:"PE"}),n.jsx("th",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:"PO"}),n.jsx("th",{children:"Action"})]})}),n.jsxs("tbody",{children:[_e.map((Ke,mr)=>n.jsxs("tr",{children:[n.jsx("td",{children:Le+mr+1}),n.jsx("td",{children:Ke.materialId||"-"}),n.jsx("td",{children:Ke.description||"-"}),n.jsx("td",{children:Ke.minstock||0}),n.jsx("td",{children:Ke.maxstock||0}),n.jsx("td",{children:Ke.safetyStock||0}),n.jsx("td",{children:Ke.inventoryStock}),n.jsx("td",{style:{backgroundColor:Ke.inventoryStock<Ke.safetyStock?Ke.inventoryStock<Ke.minstock?"red":"orange":"green",fontWeight:"bold",color:"white"},children:Ke.reorderQuantity}),n.jsx("td",{children:n.jsx("input",{type:"radio",name:`action_${Ke.materialId}`,value:"PE",className:"checkbox-radio",checked:!!s[`${Ke.materialId}_PE`],onChange:()=>ct(Ke.materialId,"PE")})}),n.jsx("td",{children:n.jsx("input",{type:"radio",name:`action_${Ke.materialId}`,value:"PO",className:"checkbox-radio",checked:!!s[`${Ke.materialId}_PO`],onChange:()=>ct(Ke.materialId,"PO")})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{const fr=s[`${Ke.materialId}_PE`],Lr=s[`${Ke.materialId}_PO`];if(!fr&&!Lr){alert("Please select PE or PO before creating.");return}h(fr?"PE":"PO"),d(Ke),l(!0)},children:"Create"})})]},Ke._id||mr)),_e.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"11",style:{textAlign:"center"},children:kt?"No materials found matching your search criteria":"No materials found."})})]})]})})})]}),he>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ke=>{Ke.preventDefault(),xe>1&&Ue(xe-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),He().map(Ke=>n.jsx("li",{className:`page-item ${xe===Ke?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:mr=>{mr.preventDefault(),Ue(Ke)},children:Ke})},Ke)),n.jsx("li",{className:`page-item ${xe===he?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ke=>{Ke.preventDefault(),xe<he&&Ue(xe+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),o&&c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"," for ",c.description]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"ID Type"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:R,onChange:Ke=>Z(Ke.target.value),children:[n.jsx("option",{value:"internal",children:"Internal"}),n.jsx("option",{value:"external",children:"External"})]})})]}),R==="external"&&n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{children:["External ",u," ID"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control",value:J,onChange:Ke=>ie(Ke.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{children:"Buyer Group *"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:W,onChange:Ke=>re(Ke.target.value),placeholder:"Enter buyer group",required:!0})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"Delivery Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control",value:b,onChange:Ke=>y(Ke.target.value)})})]})]})]}),u==="PE"&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-success mb-3",children:"Purchase Enquiry Details"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"PE Category"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:M,onChange:Ke=>z(Ke.target.value),children:[n.jsx("option",{value:"",children:"Select"}),f.map(Ke=>n.jsx("option",{value:Ke._id,children:Ke.name||Ke.categoryName},Ke._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:ee,onChange:Ke=>ne(Ke.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),It.map(Ke=>n.jsx("option",{value:Ke.name||Ke.locationName||Ke._id,children:Ke.name||Ke.locationName||Ke._id},Ke._id||Ke.id||Ke.name))]})})]})]})]})}),u==="PO"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-info mb-3",children:"Purchase Order Details"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Category:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:M?._id||"",onChange:Ke=>{const mr=v.find(fr=>fr._id===Ke.target.value);z(mr)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),v.map(Ke=>n.jsx("option",{value:Ke._id,children:Ke.categoryName||Ke.name},Ke._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:Gt,readOnly:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"PO Creating Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ee,onChange:Ke=>it(Ke.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{children:"Unit Price *"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:c?.unitPrice||0,onChange:Ke=>{const mr=parseFloat(Ke.target.value)||0;d(fr=>({...fr,unitPrice:mr}))},placeholder:"Enter unit price",required:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor *"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:_,onChange:Ke=>E(Ke.target.value),placeholder:"Enter vendor name"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>I(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{children:"Tax *"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:K?._id||"",onChange:Ke=>{const mr=le.find(fr=>fr._id===Ke.target.value);de(mr)},children:[n.jsx("option",{value:"",children:"Select Tax"}),le.map(Ke=>n.jsx("option",{value:Ke._id,children:Ke.taxName},Ke._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{children:"Discount"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"number",className:"form-control",value:H,onChange:Ke=>se(parseFloat(Ke.target.value)||0),placeholder:"Enter discount amount"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Pe,onChange:Ke=>Re(Ke.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Conditions & Processes"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3",children:[n.jsx("label",{className:"form-label",children:"Select General Conditions"}),ze.map(Ke=>n.jsxs("div",{className:"d-flex align-items-center mb-1",children:[n.jsx("input",{type:"checkbox",className:"me-2",checked:oe.includes(Ke._id),onChange:()=>pr(Ke._id,oe,ge)}),n.jsx("label",{children:Ke.name})]},Ke._id))]}),n.jsxs("div",{className:"col-lg-3",children:[n.jsx("label",{className:"form-label",children:"Select Processes"}),Ve.map(Ke=>n.jsxs("div",{className:"d-flex align-items-center mb-1",children:[n.jsx("input",{type:"checkbox",className:"me-2",checked:Ne.includes(Ke._id),onChange:()=>pr(Ke._id,Ne,Me)}),n.jsx("label",{children:Ke.processDescription})]},Ke._id))]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Delivery Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:V,onChange:Ke=>Y(Ke.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),It.map(Ke=>n.jsx("option",{value:Ke.name||Ke.locationName||Ke._id,children:Ke.name||Ke.locationName||Ke._id},Ke._id||Ke.id||Ke.name))]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{children:"Delivery Address"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control",rows:"2",value:B,onChange:Ke=>Q(Ke.target.value),placeholder:"Enter delivery address"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:be,onChange:Ke=>ue(Ke.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:W,onChange:Ke=>re(Ke.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Authorization"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prepared By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:dt,onChange:Ke=>Dt(Ke.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Approved By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:mt,onChange:Ke=>Be(Ke.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Additional Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-4 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Payment:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control form-control-sm",value:Ye,onChange:Ke=>At(Ke.target.value),maxLength:"250"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Remarks:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{className:"form-control",value:We,onChange:Ke=>tt(Ke.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{children:"Notes"})}),n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control",rows:"2",value:S,onChange:Ke=>w(Ke.target.value),placeholder:"Enter notes"})})]})]})]})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:xt,children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"]})]})]})})})]}),T&&n.jsx(Nt,{})]})}function oIe(){const[e,t]=j.useState({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),s=localStorage.getItem("selectedCompanyId"),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,f]=j.useState({type:"",text:""}),[p,v]=j.useState("");j.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Ie.get("/api/invoiceform",{params:{companyId:r,financialYear:a}}),T=await Ie.get("/api/billingform",{params:{companyId:r,financialYear:a}});o(E.data||[]),c(T.data||[])}catch(E){console.error("Error fetching invoices",E)}},b=()=>(e.type==="vendor"?i:l).filter(T=>{const I=e.type==="vendor"?T.vendor||"":T.salesOrderId?.customer||"",F=T.docnumber||"",A=I.toLowerCase().includes(p.toLowerCase())||F.toLowerCase().includes(p.toLowerCase()),P=(T.balance||0)>0;return A&&P}),y=E=>{t(T=>({...T,recordId:E._id||E.id,selectedRecord:E,docnumber:E.docnumber||""}))},S=E=>{const{name:T,value:I}=E.target;T==="type"?(t(F=>({...F,[T]:I,recordId:"",selectedRecord:null,docnumber:""})),v("")):t(F=>({...F,[T]:I}))},w=()=>{if(!e.selectedRecord||!e.paymentAmount)return null;const E=e.selectedRecord.balance||0,T=parseFloat(e.paymentAmount);return E.toFixed(2)-T.toFixed(2)},k=async E=>{E.preventDefault(),u(!0),f({type:"",text:""});try{if(!e.selectedRecord)throw new Error("Please select a record to update");const T=parseFloat(e.paymentAmount),I=e.selectedRecord.balance||0,F=I-T,A={balance:F,lastPaymentAmount:T,companyId:s,financialYear:a,lastPaymentDocNumber:e.docnumber||"",lastPaymentMethod:e.paymentMethod,paymentDescription:e.description||`Payment via ${e.paymentMethod}`},P=e.type==="vendor"?`/api/invoiceform/${e.recordId}`:`/api/billingform/${e.recordId}`;await Ie.put(P,A);const q=e.type==="vendor"?e.selectedRecord.vendor||"Unknown Vendor":e.selectedRecord.salesOrderId?.customer||e.selectedRecord.customer||"Unknown Customer",V={recordType:e.type,recordId:e.recordId,docnumber:e.docnumber,entityName:q,paymentAmount:T,companyId:s,financialYear:a,previousBalance:I,newBalance:F,paymentMethod:e.paymentMethod,description:e.description,paymentDate:new Date().toISOString()};console.log("Payment History Payload:",V);try{const Y=await Ie.post("/api/payment",V);console.log("Payment history saved successfully:",Y.data)}catch(Y){console.error("Payment history save failed:",Y),console.error("Error details:",Y.response?.data),f({type:"warning",text:`Payment updated successfully, but payment history could not be saved. Error: ${Y.response?.data?.message||Y.message}`})}h.text||f({type:"success",text:`Payment of ${T} recorded successfully for ${q}. New balance: ${F.toFixed(2)}`}),await g(),t({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),v("")}catch(T){console.error("Error recording payment",T),f({type:"error",text:T.response?.data?.message||T.message||"Failed to record payment. Please try again."})}finally{u(!1)}},C=b(),_=w();return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Record Payment"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/ledger",children:"Ledger"})}),n.jsx("li",{className:"breadcrumb-item",children:"Payment"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header text-white",children:n.jsx("h5",{className:"mb-0",children:"Update Balance with Payment"})}),n.jsxs("div",{className:"card-body",children:[h.text&&n.jsxs("div",{className:`alert alert-${h.type==="success"?"success":"danger"} alert-dismissible`,children:[h.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>f({type:"",text:""})})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Type *"}),n.jsxs("select",{className:"form-select",name:"type",value:e.type,onChange:S,children:[n.jsx("option",{value:"vendor",children:"Vendor Payment"}),n.jsx("option",{value:"customer",children:"Customer Payment"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Search Records"}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${e.type} name or document number...`,value:p,onChange:E=>v(E.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Select Record to Update *"}),n.jsx("div",{className:"border rounded",style:{maxHeight:"300px",overflowY:"auto"},children:C.length===0?n.jsx("div",{className:"p-3 text-muted text-center",children:"No records found"}):C.map(E=>{const T=e.type==="vendor"?E.vendor:E?.customer,I=e.recordId===(E._id||E.id);return n.jsx("div",{className:`p-3 border-bottom cursor-pointer ${I?"bg-primary text-white":"bg-light"}`,onClick:()=>y(E),style:{cursor:"pointer"},children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("strong",{children:T||"Unknown"}),n.jsx("br",{}),n.jsxs("small",{children:["Doc: ",E.docnumber||"N/A"]})]}),n.jsxs("div",{className:"text-end",children:[n.jsxs("strong",{children:["",(E.balance||0).toFixed(2)]}),n.jsx("br",{}),n.jsx("small",{children:"Balance"})]})]})},E._id||E.id)})})]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("form",{onSubmit:k,children:[e.selectedRecord&&n.jsxs("div",{className:"alert alert-info mb-3",children:[n.jsx("h6",{children:"Selected Record:"}),n.jsx("p",{className:"mb-1",children:n.jsxs("strong",{children:[e.type==="vendor"?e.selectedRecord.vendor:e.selectedRecord.customer,console.log(e.selectedRecord.customer)]})}),n.jsxs("p",{className:"mb-1",children:["Document: ",e.selectedRecord.docnumber]}),n.jsxs("p",{className:"mb-0",children:["Current Balance: ",n.jsxs("strong",{children:["",(e.selectedRecord.balance||0).toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"paymentAmount",className:"form-label",children:"Payment Amount *"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-currency-rupee"})}),n.jsx("input",{type:"number",id:"paymentAmount",className:`form-control ${parseFloat(e?.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)?"is-invalid":""}`,name:"paymentAmount",value:e.paymentAmount,onChange:S,placeholder:"0.00",min:"0",step:"0.01",required:!0,max:e?.selectedRecord?.balance,disabled:!e.selectedRecord}),parseFloat(e.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)&&n.jsxs("div",{className:"invalid-feedback",children:["Amount cannot exceed current balance of ",(e?.selectedRecord?.balance||0).toFixed(2)]})]}),_!==null&&n.jsxs("small",{className:"text-muted mt-1 d-block",children:["New balance will be: ",n.jsxs("strong",{children:["",_.toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Method *"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:e.paymentMethod,onChange:S,required:!0,children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",name:"description",value:e.description,onChange:S,rows:"3",placeholder:"Payment description or notes..."})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!e.selectedRecord||!e.paymentAmount,children:d?"Updating...":"Update Balance"})]})]})})]})]})]})})})]})}function lIe(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),u=()=>{let _={};const E=/^\d{6}$/;return _.categoryName=e.categoryName?"":"Required",_.rangeFrom=e.rangeFrom?E.test(e.rangeFrom)?"":"Must be 6 digits":"Required",_.rangeTo=e.rangeTo?E.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(_),Object.values(_).every(T=>T==="")},h=_=>{t({...e,[_.target.name]:_.target.value})},f=async _=>{if(_.preventDefault(),!!u())try{s?(await Ie.put(`/api/purchase-contract-categories/${s}`,e),alert("Purchase contract category updated successfully!")):(await Ie.post("/api/purchase-contract-categories",e),alert("Purchase contract category added successfully!")),p(),g()}catch(E){console.error("Error saving purchase contract category:",E),alert("Error saving purchase contract category. Please try again.")}},p=async()=>{try{const _=await Ie.get("/api/purchase-contract-categories",{params:{companyId:c,financialYear:d}});a(_.data)}catch(_){console.error("Error fetching purchase contract categories:",_)}},v=_=>{t(_),i(_._id),l({})},g=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{p()},[]);const[b,y]=j.useState(!1),S=()=>y(!0),w=()=>y(!1),[k,C]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-1",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"",children:"Purchase Contract Categories"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract Categories"})]})})]})}),n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{S()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header ",children:[n.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[s?"Edit":"Create"," Purchase Contract Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),g()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:f,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Category Name ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:h,className:`form-control ${o.categoryName?"is-invalid":""}`,placeholder:"Enter category name (e.g., Procurement Contracts)"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range From ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:_=>{_.target.value=_.target.value.replace(/[^0-9]/g,""),h(_)},className:`form-control ${o.rangeFrom?"is-invalid":""}`,placeholder:"Enter start range (6 digits)",min:"100000",maxLength:6,max:"999999"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range To ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeTo",type:"text",className:`form-control ${o.rangeTo?"is-invalid":""}`,value:e.rangeTo,onChange:_=>{_.target.value=_.target.value.replace(/[^0-9]/g,""),h(_)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),n.jsx("div",{className:"d-flex gap-2 justify-content-end",children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((_,E)=>n.jsxs("tr",{children:[n.jsx("td",{children:E+1}),n.jsx("td",{children:_.categoryName}),n.jsx("td",{children:_.rangeFrom?.toLocaleString()}),n.jsx("td",{children:_.rangeTo?.toLocaleString()}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(_),S()},title:"Edit Category",children:"Edit"})})})]},_._id))})]})})})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var FK=function(e,t){return(FK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])})(e,t)};function Ud(e,t){function r(){this.constructor=e}FK(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Pr(e,t,r,a){return new(r||(r=Promise))(function(s,i){function o(d){try{c(a.next(d))}catch(u){i(u)}}function l(d){try{c(a.throw(d))}catch(u){i(u)}}function c(d){d.done?s(d.value):new r(function(u){u(d.value)}).then(o,l)}c((a=a.apply(e,[])).next())})}function Or(e,t){var r,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(s=2&u[0]?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,a=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(h){u=[6,h],a=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}var cIe=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,r){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+r+"."),this.platformName=t,this.platform=r},e.prototype.registerFlag=function(t,r,a){if(this.flagRegistry[t]={evaluationFn:r,setHook:a},this.urlFlags[t]!=null){var s=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+s+"."),this.set(t,s)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var r,a,s=(r=this.global.location.search,a={},r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return dIe(a,o[0],o[1]),o.join("=")}),a);"tfjsflags"in s&&s.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),l=o[0],c=o[1];t.urlFlags[l]=function(d,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+d+".")}(l,c)})}},e}();function dIe(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function Wt(){return LK}var LK=null,D2=new Map,GA=new Map;function BK(e,t){var r=$K(e,t);return D2.get(r)}function uIe(e){return GA.get(e)}function u9(e){for(var t=D2.entries(),r=[];;){var a=t.next(),s=a.done,i=a.value;if(s)break;var o=i[0],l=i[1];o.split("_")[0]===e&&r.push(l)}return r}function UK(e){var t=e.kernelName,r=e.backendName,a=$K(t,r);if(D2.has(a))throw new Error("The kernel '"+t+"' for backend '"+r+"' is already registered");D2.set(a,e)}function hIe(e){var t=e.kernelName;GA.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),GA.set(t,e)}function $K(e,t){return t+"_"+e}function YA(e,t,r){return Math.max(e,Math.min(t,r))}function VK(e){return e%2==0?e:e+1}function fIe(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function Ge(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function fn(e,t,r){r===void 0&&(r=""),Ge($i(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})}function Tg(e){Ge(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function rg(e,t,r){if(t===void 0&&(t=[]),r===void 0&&(r=!1),t==null&&(t=[]),Array.isArray(e)||Wu(e)&&!r)for(var a=0;a<e.length;++a)rg(e[a],t,r);else t.push(e);return t}function Fr(e){if(e.length===0)return 1;for(var t=e[0],r=1;r<e.length;r++)t*=e[r];return t}function $i(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Gs(e){return e%1==0}function mIe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function KA(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function _0(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function h9(e,t,r){return t===void 0&&(t=function(a){return 0}),new Promise(function(a,s){var i=0,o=function(){if(e())a();else{i++;var l=t(i);r!=null&&i>=r?s():setTimeout(o,l)}};o()})}function pIe(e,t){for(var r=1,a=-1,s=0;s<e.length;++s)if(e[s]>=0)r*=e[s];else if(e[s]===-1){if(a!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+a+" and dim "+s);a=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(a===-1){if(t>0&&t!==r)throw Error("Size("+t+") must match the product of shape "+e);return e}if(r===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+r);var i=e.slice();return i[a]=t/r,i}function Si(e,t){var r=t.length;return Ge((e=e==null?t.map(function(a,s){return s}):[].concat(e)).every(function(a){return a>=-r&&a<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e}),Ge(e.every(function(a){return Gs(a)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(a){return a<0?r+a:a})}function Jp(e,t){for(var r=[],a=[],s=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||s?null:Si(t,e).sort(),o=0,l=0;l<e.length;++l){if(i!=null){if(i[o]===l&&e[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+e[l]+"' is not 1");(i[o]==null||i[o]>l)&&e[l]===1&&(r.push(e[l]),a.push(l)),i[o]<=l&&o++}e[l]!==1&&(r.push(e[l]),a.push(l))}return{newShape:r,keptDims:a}}function Jy(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);r=new Uint8Array(t)}return r}function A2(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);r=new Array(t)}return r}function xIe(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type "+t+" being uploaded contains "+a+".")}}function vIe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function gIe(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Wu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function qK(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function bIe(e){if(e==null)return 0;var t=0;return e.forEach(function(r){return t+=r.length}),t}function WI(e){return typeof e=="string"||e instanceof String}function yIe(e){return typeof e=="boolean"}function jIe(e){return typeof e=="number"}function L1(e){return Array.isArray(e)?L1(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":jIe(e)?"float32":WI(e)?"string":yIe(e)?"bool":"float32"}function XA(e){return!!(e&&e.constructor&&e.call&&e.apply)}function QA(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}function Gu(e){var t=e.length;if(t<2)return[];var r=new Array(t-1);r[t-2]=e[t-1];for(var a=t-3;a>=0;--a)r[a]=r[a+1]*e[a+1];return r}function zK(e,t,r){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=rg(e)),r&&xIe(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var a=new Uint8Array(e.length),s=0;s<a.length;++s)Math.round(e[s])!==0&&(a[s]=1);return a}throw new Error("Unknown data type "+t)}function f9(e,t){if(e.length===0)return t[0];var r=e.reduce(function(a,s){return a*s});if(r===0)return[];if(r!==t.length)throw new Error("["+e+"] does not match the input size.");return function a(s,i,o){var l=new Array;if(i.length===1)for(var c=i[0],d=0;d<c;d++)l[d]=o[s+d];else{c=i[0];var u=i.slice(1),h=u.reduce(function(f,p){return f*p});for(d=0;d<c;d++)l[d]=a(s+d*h,u,o)}return l}(0,e,t)}function HK(e,t){for(var r=B1(e,t),a=0;a<r.length;a++)r[a]=1;return r}function B1(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Iu(){return Wt().platform.now()}function WK(e){e.forEach(function(t){Ge(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function NIe(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Wt().platform.encode(e,t)}function T2(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Wt().platform.decode(e,t)}function m9(e,t,r){if(t===0)return 0;if(t===1)return e[0];for(var a=e[e.length-1],s=0;s<e.length-1;++s)a+=r[s]*e[s];return a}function wIe(e,t,r){if(t===0)return[];if(t===1)return[e];for(var a=new Array(t),s=0;s<a.length-1;++s)a[s]=Math.floor(e/r[s]),e-=a[s]*r[s];return a[a.length-1]=e,a}var SIe=function(){function e(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new CIe)}return e.prototype.profileKernel=function(t,r,a){var s,i=this,o=this.backendTimer.time(function(){s=a()});return s.forEach(function(l){l.data().then(function(c){(function(d,u,h){if(u!=="float32")return!1;for(var f=0;f<d.length;f++){var p=d[f];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+h+"'"),!0}})(c,l.dtype,t),o.then(function(d){var u="";d.getExtraProfileInfo!=null&&(u=d.getExtraProfileInfo()),i.logger.logKernelProfile(t,l,c,d.kernelMs,r,u)})})}),s},e}(),CIe=function(){function e(){}return e.prototype.logKernelProfile=function(t,r,a,s,i,o){var l=typeof s=="number"?_0(s+"ms",9):s.error,c=_0(t,25),d=r.rank,u=r.size,h=_0(r.shape.toString(),14),f="";for(var p in i){var v=i[p].shape||r.shape,g=v.length;f+=p+": "+g+"D "+(g>0?v:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+h+"	%c"+u+"	%c"+f+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),p9=20,Ub=3,ID=7;function kIe(e,t,r,a){var s=Gu(t),i=function(d,u,h,f){var p=Fr(u),v=f[f.length-1],g=new Array(v).fill(0),b=u.length,y=h==="complex64"?Vb(d):d;if(b>1)for(var S=0;S<p/v;S++)for(var w=S*v,k=0;k<v;k++)g[k]=Math.max(g[k],$b(y[w+k],0,h).length);return g}(e,t,r,s),o=t.length,l=function d(u,h,f,p,v,g){g===void 0&&(g=!0);var b=f==="complex64"?2:1,y=h[0],S=h.length;if(S===0)return f==="complex64"?[$b(Vb(u)[0],0,f)]:f==="bool"?[GK(u[0])]:[u[0].toString()];if(S===1){if(y>p9){var w=Ub*b,k=Array.from(u.slice(0,w)),C=Array.from(u.slice((y-Ub)*b,y*b));return f==="complex64"&&(k=Vb(k),C=Vb(C)),["["+k.map(function(Y,B){return $b(Y,v[B],f)}).join(", ")+", ..., "+C.map(function(Y,B){return $b(Y,v[y-Ub+B],f)}).join(", ")+"]"]}return["["+(f==="complex64"?Vb(u):Array.from(u)).map(function(Y,B){return $b(Y,v[B],f)}).join(", ")+"]"]}var _=h.slice(1),E=p.slice(1),T=p[0]*b,I=[];if(y>p9){for(var F=0;F<Ub;F++){var A=(P=F*T)+T;I.push.apply(I,d(u.slice(P,A),_,f,E,v,!1))}for(I.push("..."),F=y-Ub;F<y;F++)A=(P=F*T)+T,I.push.apply(I,d(u.slice(P,A),_,f,E,v,F===y-1))}else for(F=0;F<y;F++){var P;A=(P=F*T)+T,I.push.apply(I,d(u.slice(P,A),_,f,E,v,F===y-1))}var q=S===2?",":"";for(I[0]="["+I[0]+q,F=1;F<I.length-1;F++)I[F]=" "+I[F]+q;var V=`,
`;for(F=2;F<S;F++)V+=`
`;return I[I.length-1]=" "+I[I.length-1]+"]"+(g?"":V),I}(e,t,r,s,i),c=["Tensor"];return a&&(c.push("  dtype: "+r),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(l.map(function(d){return"    "+d}).join(`
`)),c.join(`
`)}function $b(e,t,r){return _0(Array.isArray(e)?parseFloat(e[0].toFixed(ID))+" + "+parseFloat(e[1].toFixed(ID))+"j":WI(e)?"'"+e+"'":r==="bool"?GK(e):parseFloat(e.toFixed(ID)).toString(),t)}function GK(e){return e===0?"false":"true"}function Vb(e){for(var t=[],r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var Zy=function(){function e(t,r,a){var s=this;if(this.dtype=r,this.shape=t.slice(),this.size=Fr(t),a!=null){var i=a.length;Ge(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+s.size+"'."})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=a||A2(r,this.size),this.strides=Gu(t)}return e.prototype.set=function(t){for(var r=this,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];a.length===0&&(a=[0]),Ge(a.length===this.rank,function(){return"The number of provided coordinates ("+a.length+") must match the rank ("+r.rank+")"});var i=this.locToIndex(a);this.values[i]=t},e.prototype.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.length===0&&(t=[0]);for(var a=0,s=0,i=t;s<i.length;s++){var o=i[s];if(o<0||o>=this.shape[a]){var l="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(l)}a++}for(var c=t[t.length-1],d=0;d<t.length-1;++d)c+=this.strides[d]*t[d];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=this.strides[a]*t[a];return r},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var r=new Array(this.shape.length),a=0;a<r.length-1;++a)r[a]=Math.floor(t/this.strides[a]),t-=r[a]*this.strides[a];return r[r.length-1]=t,r},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Ou().makeTensor(this.values,this.shape,this.dtype)},e}(),Ou=null,$t=null,YK=null,hs=function(){function e(t,r,a,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=Fr(t),this.strides=Gu(t),this.dataId=a,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Ge(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,r){return this.throwIfDisposed(),this.reshape([t,r])},e.prototype.as3D=function(t,r,a){return this.throwIfDisposed(),this.reshape([t,r,a])},e.prototype.as4D=function(t,r,a,s){return this.throwIfDisposed(),this.reshape([t,r,a,s])},e.prototype.as5D=function(t,r,a,s,i){return this.throwIfDisposed(),this.reshape([t,r,a,s,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),$t.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,$t.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return $t.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,f9(this.shape,t)]}})})},e.prototype.arraySync=function(){return f9(this.shape,this.dataSync())},e.prototype.data=function(){return Pr(this,void 0,void 0,function(){var t,r;return Or(this,function(a){switch(a.label){case 0:return this.throwIfDisposed(),t=Ou().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:r=a.sent();try{return[2,r.map(function(s){return T2(s)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}a.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Ou().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(r){return T2(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Ou().read(this.dataId)];case 1:return t=r.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Ou().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),$t.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),$t.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),$t.expandDims(this,t)},e.prototype.cumsum=function(t,r,a){return t===void 0&&(t=0),r===void 0&&(r=!1),a===void 0&&(a=!1),$t.cumsum(this,t,r,a)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),$t.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),$t.clone(this)},e.prototype.oneHot=function(t,r,a){return this.throwIfDisposed(),$t.oneHot(this,t,r,a)},e.prototype.toString=function(t){return t===void 0&&(t=!1),kIe(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),$t.tile(this,t)},e.prototype.gather=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),$t.gather(this,t,r)},e.prototype.matMul=function(t,r,a){return r===void 0&&(r=!1),a===void 0&&(a=!1),this.throwIfDisposed(),$t.matMul(this,t,r,a)},e.prototype.dot=function(t){return this.throwIfDisposed(),$t.dot(this,t)},e.prototype.norm=function(t,r,a){return t===void 0&&(t="euclidean"),r===void 0&&(r=null),a===void 0&&(a=!1),this.throwIfDisposed(),$t.norm(this,t,r,a)},e.prototype.slice=function(t,r){return this.throwIfDisposed(),$t.slice(this,t,r)},e.prototype.reverse=function(t){return this.throwIfDisposed(),$t.reverse(this,t)},e.prototype.concat=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),$t.concat([this].concat(t),r)},e.prototype.split=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),$t.split(this,t,r)},e.prototype.stack=function(t,r){return r===void 0&&(r=0),$t.stack([this,t],r)},e.prototype.unstack=function(t){return t===void 0&&(t=0),$t.unstack(this,t)},e.prototype.pad=function(t,r){return r===void 0&&(r=0),$t.pad(this,t,r)},e.prototype.batchNormalization=function(t,r,a,s,i){return a===void 0&&(a=.001),YK("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,r,i,s,a)},e.prototype.batchNorm=function(t,r,a,s,i){return i===void 0&&(i=.001),this.throwIfDisposed(),$t.batchNorm(this,t,r,a,s,i)},e.prototype.all=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.all(this,t,r)},e.prototype.any=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.any(this,t,r)},e.prototype.logSumExp=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.logSumExp(this,t,r)},e.prototype.sum=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.sum(this,t,r)},e.prototype.prod=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.prod(this,t,r)},e.prototype.mean=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.mean(this,t,r)},e.prototype.min=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.min(this,t,r)},e.prototype.max=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),$t.max(this,t,r)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),$t.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),$t.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),$t.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),$t.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),$t.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),$t.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),$t.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),$t.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),$t.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),$t.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),$t.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),$t.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),$t.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),$t.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),$t.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),$t.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),$t.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),$t.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),$t.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),$t.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),$t.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),$t.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),$t.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),$t.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),$t.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),$t.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),$t.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),$t.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),$t.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),$t.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),$t.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),$t.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),$t.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),$t.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),$t.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),$t.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),$t.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),$t.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),$t.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),$t.logicalXor(this,t)},e.prototype.where=function(t,r){return this.throwIfDisposed(),$t.where(t,this,r)},e.prototype.neg=function(){return this.throwIfDisposed(),$t.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),$t.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),$t.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),$t.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),$t.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),$t.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),$t.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),$t.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),$t.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),$t.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),$t.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),$t.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),$t.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),$t.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),$t.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),$t.abs(this)},e.prototype.clipByValue=function(t,r){return this.throwIfDisposed(),$t.clipByValue(this,t,r)},e.prototype.relu=function(){return this.throwIfDisposed(),$t.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),$t.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),$t.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),$t.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),$t.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),$t.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),$t.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),$t.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),$t.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),$t.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),$t.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),$t.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),$t.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),$t.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),$t.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),$t.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),$t.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),$t.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),$t.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),$t.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),$t.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),$t.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),$t.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),$t.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),$t.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),$t.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),$t.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),$t.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),$t.image.resizeBilinear(this,t,r)},e.prototype.resizeNearestNeighbor=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),$t.image.resizeNearestNeighbor(this,t,r)},e.prototype.conv1d=function(t,r,a,s,i,o){return s===void 0&&(s="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),$t.conv1d(this,t,r,a,s,i,o)},e.prototype.conv2d=function(t,r,a,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),$t.conv2d(this,t,r,a,s,i,o)},e.prototype.conv2dTranspose=function(t,r,a,s,i){return this.throwIfDisposed(),$t.conv2dTranspose(this,t,r,a,s,i)},e.prototype.depthwiseConv2D=function(t,r,a,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),$t.depthwiseConv2d(this,t,r,a,s,i,o)},e.prototype.separableConv2d=function(t,r,a,s,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),$t.separableConv2d(this,t,r,a,s,i,o)},e.prototype.avgPool=function(t,r,a,s){return this.throwIfDisposed(),$t.avgPool(this,t,r,a,s)},e.prototype.maxPool=function(t,r,a,s){return this.throwIfDisposed(),$t.maxPool(this,t,r,a,s)},e.prototype.localResponseNormalization=function(t,r,a,s){return t===void 0&&(t=5),r===void 0&&(r=1),a===void 0&&(a=1),s===void 0&&(s=.5),$t.localResponseNormalization(this,t,r,a,s)},e.prototype.pool=function(t,r,a,s,i){return this.throwIfDisposed(),$t.pool(this,t,r,a,s,i)},e.prototype.variable=function(t,r,a){return t===void 0&&(t=!0),this.throwIfDisposed(),Ou().makeVariable(this,t,r,a)},e.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),$t.unsortedSegmentSum(this,t,r)},e.prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),$t.batchToSpaceND(this,t,r)},e.prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),$t.spaceToBatchND(this,t,r)},e.prototype.topk=function(t,r){return t===void 0&&(t=1),r===void 0&&(r=!0),this.throwIfDisposed(),$t.topk(this,t,r)},e.prototype.stridedSlice=function(t,r,a,s,i,o,l,c){return s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),$t.stridedSlice(this,t,r,a,s,i,o,l,c)},e.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),$t.depthToSpace(this,t,r)},e.prototype.fft=function(){return this.throwIfDisposed(),$t.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),$t.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),$t.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),$t.spectral.irfft(this)},e}();Object.defineProperty(hs,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var x9,JA,ZA,e3,t3,ag=function(e){function t(r,a,s,i){var o=e.call(this,r.shape,r.dtype,r.dataId,i)||this;return o.trainable=a,o.name=s,o}return Ud(t,e),t.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and previous value ("+this.dtype+") must match");if(!$i(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and previous value ("+this.shape+") must match");Ou().disposeTensor(this),this.dataId=r.dataId,Ou().incRef(this,null)},t.prototype.dispose=function(){Ou().disposeVariable(this),this.isDisposedInternal=!0},t}(hs);Object.defineProperty(ag,Symbol.hasInstance,{value:function(e){return e instanceof hs&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(x9||(x9={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(JA||(JA={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ZA||(ZA={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(e3||(e3={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(t3||(t3={}));var EIe={float32:e3,int32:JA,bool:ZA,complex64:t3};function ro(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return EIe[e][t]}function PD(e){return ro(e,"int32")}function vs(e,t){if(e.dtype===t.dtype)return[e,t];var r=ro(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function _Ie(e,t){Ge(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function KK(e){var t=[];return function r(a,s,i){if(a!=null){if(a instanceof hs)return void s.push(a);if(o=a,!(!Array.isArray(o)&&typeof o!="object")){var o,l=a;for(var c in l){var d=l[c];i.has(d)||(i.add(d),r(d,s,i))}}}}(e,t,new Set),t}var OD,v9=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),DIe=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new v9}return e.prototype.ready=function(){return Pr(this,void 0,void 0,function(){var t,r,a;return Or(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),r=0,s.label=1;case 1:return r<t.length?(a=t[r],[4,this.initializeBackend(a).success]):[3,5];case 2:return s.sent()?[4,this.setBackend(a)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),r=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,r,a){return a===void 0&&(a=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:r,priority:a},!0)},e.prototype.setBackend=function(t){return Pr(this,void 0,void 0,function(){var r,a,s;return Or(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(t),a=r.success,r.asyncInit?[4,a]:[3,2]);case 1:return s=i.sent(),[3,3];case 2:s=a,i.label=3;case 3:if(!s)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new SIe(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;u9(this.backendName).forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var r=this;u9(t).forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(r.registry[t])})},e.prototype.initializeBackend=function(t){var r=this,a=this.registryFactory[t];if(a==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var s=a.factory();if(Promise.resolve(s)===s){var i=++this.pendingBackendInitId,o=s.then(function(l){return!(i<r.pendingBackendInitId)&&(r.registry[t]=l,r.pendingBackendInit=null,!0)}).catch(function(l){return!(i<r.pendingBackendInitId)&&(r.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,a){return t.registryFactory[a].priority-t.registryFactory[r].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),r=0;r<t.length;r++){var a=t[r],s=this.initializeBackend(a),i=s.success,o=s.asyncInit;if(o||i)return{name:a,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,r){var a=this.state.tensorInfo.get(r),s=a.backend,i=this.readSync(r);s.disposeData(r),a.backend=t,t.move(r,i,a.shape,a.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,r){var a,s=this,i=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return s.startScope(i)},function(){return s.endScope(a)},function(){return(a=r())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a})},e.prototype.scopedRun=function(t,r,a){t();try{var s=a();return r(),s}catch(i){throw r(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),a={x:t};return this.addTapeNode(this.state.activeScope.name,a,[r],function(s){return{x:function(){return s.toFloat()}}},[]),r},e.prototype.runKernel=function(t,r,a,s,i){return this.runKernelFunc(null,r,null,t,a,s,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,r,a){var s=this.backend.numDataIds(),i=0;a.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-o;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,r,a,s,i,o,l){var c,d=this;o===void 0&&(o=[]),l===void 0&&(l=[]);var u=[],h=this.isTapeOn();s==null&&(s=this.state.activeScope!=null?this.state.activeScope.name:"");var f,p=function(S){h&&(u=S.map(function(w){return d.keep(d.clone(w))}))},v=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,y=BK(s,this.backendName);return f=y!=null?function(){var S=d.backend.numDataIds();b=y.kernelFunc({inputs:r,attrs:i,backend:d.backend});var w=Array.isArray(b)?b:[b];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,S,w);var k=w.map(function(_){var E=_.dataId,T=_.shape,I=_.dtype;return d.makeTensorFromDataId(E,T,I)}),C=k.filter(function(_,E){return l[E]});return p((o||[]).slice().concat(C)),k}:function(){var S=d.backend.numDataIds();b=d.tidy(function(){return t(d.backend,p)});var w=Array.isArray(b)?b:[b];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,S,w),w},this.scopedRun(function(){return d.state.kernelDepth++},function(){return d.state.kernelDepth--},function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(s,r,function(){return f()}):f()}),h&&this.addTapeNode(s,r,c,a,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(function(S){return r[S].shape}),outputShapes:c.map(function(S){return S.shape})}),Array.isArray(b)?c:c[0]},e.prototype.makeTensor=function(t,r,a,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");a=a||"float32",s=s||this.backend;var i=t;a==="string"&&WI(t[0])&&(i=t.map(function(u){return NIe(u)}));var o=s.write(i,r,a),l=new hs(r,a,o,this.nextTensorId());if(this.incRef(l,s),a==="string"){var c=this.state.tensorInfo.get(o),d=bIe(i);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},e.prototype.makeTensorFromDataId=function(t,r,a,s){var i=new hs(r,a=a||"float32",t,this.nextTensorId());return this.incRef(i,s),i},e.prototype.makeVariable=function(t,r,a,s){r===void 0&&(r=!0),a=a||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.asType(s));var i=new ag(t,r,a,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,r){var a=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,a===0){this.state.numDataBuffers++;var s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*qK(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ag||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var r=this.state.registeredVariables[t];this.disposeVariable(r)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){return this.state.profiling=!0,r=this.state.numBytes,a=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-a,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,r,a,s,i){var o=this,l={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:a,saved:i},c=uIe(t);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=function(d){return d=d.map(function(u,h){if(u==null){var f=a[h],p=B1(f.size,f.dtype);return o.makeTensor(p,f.shape,f.dtype)}return u}),s(d.length>1?d:d[0],i)}),this.state.activeTape.push(l)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r},e.prototype.endScope=function(t){for(var r=this,a=KK(t),s=new Set(a.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||s.has(o.id)||o.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],a.forEach(function(c){c.kept||c.scopeId!==l.id||r.track(c)})},e.prototype.gradients=function(t,r,a,s){var i=this;if(s===void 0&&(s=!1),Ge(r.length>0,function(){return"gradients() received an empty list of xs."}),a!=null&&a.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+a.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});Ge(o instanceof hs,function(){return"The result y returned by f() must be a tensor."});var l=function(c,d,u){for(var h={},f={},p=0;p<d.length;p++)h[d[p].id]=!0;for(p=0;p<c.length;p++){var v=(_=c[p]).inputs;for(var g in v){for(var b=v[g],y=!1,S=0;S<d.length;S++)if(h[b.id]){_.outputs.forEach(function(F){return h[F.id]=!0}),y=!0,f[_.id]=!0;break}if(y)break}}var w={};w[u.id]=!0;var k={};for(p=c.length-1;p>=0;p--)for(v=(_=c[p]).inputs,S=0;S<_.outputs.length;S++)if(w[_.outputs[S].id]){for(var g in v)w[v[g].id]=!0,k[_.id]=!0;break}var C=[];for(p=0;p<c.length;p++){var _;if(f[(_=c[p]).id]&&k[_.id]){var E={};for(var g in _.inputs){var T=_.inputs[g];h[T.id]&&(E[g]=T)}var I=Object.assign({},_);I.inputs=E,I.outputs=_.outputs,C.push(I)}}return C}(this.state.activeTape,r,o);if(!s&&l.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,d,u={};u[o.id]=a??(c=o.shape,d=HK(Fr(c),"float32"),ft.makeTensor(d,c,"float32")),function(f,p,v){for(var g=function(y){var S=p[y],w=[];if(S.outputs.forEach(function(E){var T=f[E.id];T!=null?w.push(T):w.push(null)}),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var k=S.gradient(w),C=function(E){if(!(E in k))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(k)+".");var T=v(function(){return k[E]()});if(T.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+T.dtype+"'");var I=S.inputs[E];if(!$i(T.shape,I.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+E+"' has shape '"+T.shape+"', which does not match the shape of the input '"+I.shape+"'");if(f[I.id]==null)f[I.id]=T;else{var F=f[I.id];f[I.id]=F.add(T),F.dispose()}};for(var _ in S.inputs)C(_)},b=p.length-1;b>=0;b--)g(b)}(u,l,function(f){return i.tidy(f)});var h=r.map(function(f){return u[f.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(f){for(var p=0,v=f.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:o,grads:h}})},e.prototype.customGrad=function(t){var r=this;return Ge(XA(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var a,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];Ge(s.every(function(l){return l instanceof hs}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return s.forEach(function(l,c){o[c]=l}),r.runKernelFunc(function(l,c){return Ge((a=t.apply(void 0,s.concat([c]))).value instanceof hs,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),Ge(XA(a.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),a.value},o,function(l,c){var d=a.gradFunc(l,c),u=Array.isArray(d)?d:[d];Ge(u.length===s.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),Ge(u.every(function(f){return f instanceof hs}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return u.forEach(function(f,p){h[p]=function(){return f}}),h})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){switch(s.label){case 0:return r=Iu(),[4,this.backend.time(t)];case 1:return(a=s.sent()).wallMs=Iu()-r,[2,a]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new v9,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ft=function(){var e=function(){if(OD==null){var r=void 0;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else{if(typeof self>"u")throw new Error("Could not find a global object");r=self}OD=r}return OD}();if(e._tfengine==null){var t=new cIe(e);e._tfengine=new DIe(t)}return function(r){LK=r}(e._tfengine.ENV),Ou=function(){return e._tfengine},e._tfengine}();function XK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Lh=Wt();Lh.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Lh.registerFlag("IS_BROWSER",function(){return XK()}),Lh.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Lh.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Lh.registerFlag("PROD",function(){return!1}),Lh.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Lh.getBool("DEBUG")}),Lh.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Lh.registerFlag("IS_TEST",function(){return!1});var e1,ec,Xl,Gp={},MD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function AIe(e,t){Gp[e]=t}function oh(e){e in Gp||(Gp[e]=function(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var a=function(s){if(typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(r);return a.addEventListener("webglcontextlost",function(s){s.preventDefault(),delete Gp[r]},!1),r===1?a.getContext("webgl",MD)||a.getContext("experimental-webgl",MD):a.getContext("webgl2",MD)}(e));var t=Gp[e];return t.isContextLost()?(delete Gp[e],oh(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Gp[e])}function xC(e,t){return[t,e]}function py(e){var t=Fr(e);return KA(Math.ceil(t/4))}function U1(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function GI(e,t){var r,a,s,i,o,l,c,d,u,h=e;return Wt().getNumber("WEBGL_VERSION")===2?(r=h.R32F,a=h.R16F,s=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,c=1,d=h.HALF_FLOAT,u=h.FLOAT):(r=e.RGBA,a=e.RGBA,s=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:u}}function Br(e,t,r){var a=r();return t&&function(s){var i=s.getError();if(i!==s.NO_ERROR)throw new Error("WebGL Error: "+OIe(s,i))}(e),a}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(e1||(e1={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(ec||(ec={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Xl||(Xl={}));var TIe=596e-10,IIe=65504;function PIe(e){return!!(Wt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||TIe<Math.abs(e)&&Math.abs(e)<IIe)}function OIe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function _N(e,t,r){return Sf(e,t,function(){return e.getExtension(r)},'Extension "'+r+'" not supported on this browser.')}function MIe(e,t,r){var a=Sf(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Br(e,t,function(){return e.shaderSource(a,r)}),Br(e,t,function(){return e.compileShader(a)}),e.getShaderParameter(a,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(a)),new Error("Failed to compile vertex shader.");return a}function RIe(e,t,r){var a=Sf(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Br(e,t,function(){return e.shaderSource(a,r)}),Br(e,t,function(){return e.compileShader(a)}),e.getShaderParameter(a,e.COMPILE_STATUS)===!1)throw function(s,i){var o=FIe.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(s);for(var l=+o[1],c=s.split(`
`),d=c.length.toString().length+2,u=c.map(function(b,y){return _0((y+1).toString(),d)+b}),h=0,f=0;f<u.length;f++)h=Math.max(u[f].length,h);var p=u.slice(0,l-1),v=u.slice(l-1,l),g=u.slice(l);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+_0(v[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(r,e.getShaderInfoLog(a)),new Error("Failed to compile fragment shader.");return a}var RD,FD,FIe=/ERROR: [0-9]+:([0-9]+):/g;function LIe(e,t){return Sf(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function BIe(e,t,r){if(Br(e,t,function(){return e.linkProgram(r)}),e.getProgramParameter(r,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function LD(e,t,r){if(Br(e,t,function(){return e.validateProgram(r)}),e.getProgramParameter(r,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function UIe(e,t,r){var a=Sf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),Br(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}),a}function $Ie(e,t,r){var a=Sf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Br(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a)}),Br(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)}),a}function VIe(e,t){return Sf(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function qIe(e,t){var r=Wt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var a="["+e+"x"+t+"]";throw new Error("Requested texture size "+a+" is invalid.")}if(e>r||t>r)throw a="["+e+"x"+t+"]",new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+("["+r+"x"+r+"]")+".")}function zIe(e,t){return Sf(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function g9(e,t,r,a,s,i,o,l){var c=e.getAttribLocation(r,a);return c!==-1&&(Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Br(e,t,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,l)}),Br(e,t,function(){return e.enableVertexAttribArray(c)}),!0)}function HIe(e,t,r,a){XIe(e,a),Br(e,t,function(){return e.activeTexture(e.TEXTURE0+a)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)})}function WIe(e,t,r,a){return Sf(e,t,function(){return e.getUniformLocation(r,a)},'uniform "'+a+'" not present in program.')}function GIe(e,t,r){return e.getUniformLocation(t,r)}function YIe(e,t,r,a,s,i){Br(e,t,function(){return HIe(e,t,a,i)}),Br(e,t,function(){return e.uniform1i(s,i)})}function BD(e,t,r,a){Br(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,a)}),Br(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)})}function b9(e,t,r){Br(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Br(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function DN(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+KIe(e,t))}function KIe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Sf(e,t,r,a){var s=Br(e,t,function(){return r()});if(s==null)throw new Error(a);return s}function XIe(e,t){var r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}function I2(e,t){return t===void 0&&(t=2),Fr(e.slice(0,e.length-t))}function P2(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function UD(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[I2(e)].concat(P2(e))),t}function QIe(e,t){var r;t===void 0&&(t=!1);var a=Wt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(a*=2,(e=e.map(function(d,u){return u>=e.length-2?VK(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var s=Jp(e);e=s.newShape}var i=Fr(e);if(e.length<=1&&i<=a)return[1,i];if(e.length===2&&e[0]<=a&&e[1]<=a)return e;if(e.length===3&&e[0]*e[1]<=a&&e[2]<=a)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=a&&e[1]*e[2]<=a)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=a&&e[3]<=a)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=a&&e[1]*e[2]*e[3]<=a)return[e[0],e[1]*e[2]*e[3]];if(t){var o=I2(e),l=2,c=2;return e.length&&(l=(r=P2(e))[0],c=r[1]),KA(i=o*(l/2)*(c/2)).map(function(d){return 2*d})}return KA(i)}function AN(e){return e%2==0}function TN(e,t){if($i(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var r=e.slice(-1)[0],a=t.slice(-1)[0];if(r===a||AN(r)&&AN(a)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&AN(e[0])&&AN(t[0])}function JIe(e){if(RD==null){var t=oh(e);RD=t.getParameter(t.MAX_TEXTURE_SIZE)}return RD}function ZIe(e){if(FD==null){var t=oh(e);FD=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,FD)}function ePe(e){if(e===0)return 0;var t=oh(e);return qc(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:qc(t,"EXT_disjoint_timer_query")?1:0}function qc(e,t){return e.getExtension(t)!=null}function y9(e){try{if(oh(e)!=null)return!0}catch{return!1}return!1}function tPe(e){if(e===0)return!1;var t=oh(e);if(e===1){if(!qc(t,"OES_texture_float"))return!1}else if(!qc(t,"EXT_color_buffer_float"))return!1;return r3(t)}function rPe(e){if(e===0)return!1;var t=oh(e);if(e!==1){if(qc(t,"EXT_color_buffer_float"))return r3(t);if(qc(t,"EXT_color_buffer_half_float")){var r=t.getExtension("EXT_color_buffer_half_float");return function(a,s){var i=GI(a,s),o=a.createTexture();a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,l),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,o,0);var c=a.checkFramebufferStatus(a.FRAMEBUFFER)===a.FRAMEBUFFER_COMPLETE;return a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteTexture(o),a.deleteFramebuffer(l),c}(t,r)}return!1}return!!qc(t,"OES_texture_float")&&!!qc(t,"WEBGL_color_buffer_float")&&r3(t)}function r3(e){var t=GI(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}function aPe(e){return e===2&&oh(e).fenceSync!=null}var oa=Wt();function QK(e){Wt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Dr(e,t){return ft.tidy(e,t)}function bl(e){KK(e).forEach(function(t){return t.dispose()})}function nPe(e){return ft.keep(e)}function O2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Wt().getBool("IS_TEST")||console.warn.apply(console,e)}function hp(e,t){var r=e;if(Wu(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(r)||Wu(r)&&t!=="string";)a.push(r.length),r=r[0];return Array.isArray(e)&&Wt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function s(i,o,l){if(l=l||[],!Array.isArray(i)&&!Wu(i))return void Ge(o.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});Ge(o.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),Ge(i.length===o[0],function(){return"Element arr["+l.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),d=0;d<i.length;++d)s(i[d],c,l.concat(d))}(e,a,[]),a}function j9(e,t,r,a){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+r+"' passed to '"+a+"' must be "+e+" tensor, but got "+t+" tensor")}function $e(e,t,r,a){if(a===void 0&&(a="numeric"),e instanceof hs)return j9(a,e.dtype,t,r),e;var s=L1(e);if(s!=="string"&&["bool","int32","float32"].indexOf(a)>=0&&(s=a),j9(a,s,t,r),e==null||!Wu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+r+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=hp(e,s);Wu(e)||Array.isArray(e)||(e=[e]);var l=s!=="string"?zK(e,s,Wt().getBool("DEBUG")):rg(e,[],!0);return ft.makeTensor(l,o,s)}function M2(e,t,r,a){if(a===void 0&&(a="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(s,i){return $e(s,t+"["+i+"]",r)},a)}function JK(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function sPe(e,t,r){for(var a=e.length+t.length,s=[],i=0,o=0,l=0;l<a;l++)r.indexOf(l)===-1?s.push(e[i++]):s.push(t[o++]);return s}function Co(e,t){for(var r=[],a=e.length,s=0;s<a;s++)t.indexOf(s)===-1&&r.push(e[s]);return[r,t.map(function(i){return e[i]})]}function wl(e,t){return sPe(e,t.map(function(r){return 1}),t)}function Wl(e,t,r){Ge(JK(t,r),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input."})}function lh(e,t){if(JK(e,t))return null;for(var r=[],a=0;a<t;++a)e.indexOf(a)===-1&&r.push(a);return e.forEach(function(s){return r.push(s)}),r}function YI(e){return e.map(function(t,r){return[r,t]}).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]})}function ch(e,t){for(var r=[],a=t-e;a<t;++a)r.push(a);return r}function iPe(e,t){var r=e[0].length;e.forEach(function(s,i){Ge(s.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+r+")"})}),Ge(t>=0&&t<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var a=e[0];e.forEach(function(s,i){for(var o=0;o<r;o++)Ge(o===t||s[o]===a[o],function(){return"Error in concat"+r+"D: Shape of tensors["+i+"] ("+s+") does not match the shape of the rest ("+a+") along the non-concatenated axis "+i+"."})})}function ng(e,t){for(var r=e[0].slice(),a=1;a<e.length;a++)r[t]+=e[a][t];return r}function at(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var r=t[0],a=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));var s=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ft.startScope(r);try{var l=a.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ft.endScope(l),l}catch(c){throw ft.endScope(null),c}};return Object.defineProperty(s,"name",{value:r,configurable:!0}),s}oa.registerFlag("HAS_WEBGL",function(){return oa.getNumber("WEBGL_VERSION")>0}),oa.registerFlag("WEBGL_VERSION",function(){return y9(2)?2:y9(1)?1:0}),oa.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return oa.get("WEBGL_VERSION")===2}),oa.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),oa.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),oa.registerFlag("WEBGL_PACK",function(){return oa.getBool("HAS_WEBGL")}),oa.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_CLIP",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),oa.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_PACK_REDUCE",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_LAZILY_UNPACK",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_CONV_IM2COL",function(){return oa.getBool("WEBGL_PACK")}),oa.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return JIe(oa.getNumber("WEBGL_VERSION"))}),oa.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return ZIe(oa.getNumber("WEBGL_VERSION"))}),oa.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=oa.getNumber("WEBGL_VERSION");return e===0?0:ePe(e)}),oa.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return oa.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),oa.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return tPe(oa.getNumber("WEBGL_VERSION"))}),oa.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!oa.getBool("WEBGL_FORCE_F16_TEXTURES")&&oa.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),oa.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return rPe(oa.getNumber("WEBGL_VERSION"))}),oa.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return aPe(oa.getNumber("WEBGL_VERSION"))}),oa.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return oa.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),YK=QK;var eo=at({complex_:function(e,t){var r=$e(e,"real","complex"),a=$e(t,"imag","complex");return fn(r.shape,a.shape,"real and imag shapes, "+r.shape+" and "+a.shape+", must match in call to tf.complex()."),ft.runKernelFunc(function(s){return s.complex(r,a)},{$real:r,$imag:a})}}),$c=at({real_:function(e){var t=$e(e,"input","real");return ft.runKernelFunc(function(r){return r.real(t)},{$input:t})}}),Mu=at({imag_:function(e){var t=$e(e,"input","imag");return ft.runKernelFunc(function(r){return r.imag(t)},{$input:t})}});function so(e,t,r){return fp(e,t,hp(e,r),r)}function fp(e,t,r,a){if(a==null&&(a=L1(e)),a==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Wu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){WK(t);var s=Fr(t),i=Fr(r);Ge(s===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+i});for(var o=0;o<r.length;++o){var l=r[o],c=o!==r.length-1||l!==Fr(t.slice(o));Ge(r[o]===t[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "})}}return Wu(e)||Array.isArray(e)||(e=[e]),t=t||r,e=a!=="string"?zK(e,a,Wt().getBool("DEBUG")):rg(e,[],!0),ft.makeTensor(e,t,a)}function wr(e,t){if((Wu(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Wu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return fp(e,[],[],t)}function li(e,t){Tg(e);var r=hp(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return fp(e,null,r,t)}function Bm(e,t,r){if(Tg(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var a=hp(e,r);if(a.length!==2&&a.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return fp(e,t,a,r)}function KI(e,t,r){if(Tg(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var a=hp(e,r);if(a.length!==3&&a.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return fp(e,t,a,r)}function fl(e,t,r){if(Tg(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var a=hp(e,r);if(a.length!==4&&a.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return fp(e,t,a,r)}function oPe(e,t,r){if(Tg(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var a=hp(e,r);if(a.length!==5&&a.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return fp(e,t,a,r)}function lPe(e,t,r){if(Tg(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var a=hp(e,r);if(a.length!==6&&a.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return fp(e,t=t||a,a,r)}function cPe(e,t,r,a){return t===void 0&&(t=!0),ft.makeVariable(e,t,r,a)}function Ig(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=Ig(e,"float32"),a=qn(e,"float32");return eo(r,a)}var s=HK(Fr(e),t);return ft.makeTensor(s,e,t)}function qn(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=qn(e,"float32"),a=qn(e,"float32");return eo(r,a)}var s=B1(Fr(e),t);return ft.makeTensor(s,e,t)}function Yu(e,t,r){return ft.runKernelFunc(function(a){return a.fill(e,t,r)},{})}function dPe(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");return ft.runKernelFunc(function(a){return a.linspace(e,t,r)},{})}function R2(e,t,r,a){if(r===void 0&&(r=1),a===void 0&&(a="float32"),r===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&r<0||t<e&&r>1)return qn([0],a);var s=B1(Math.abs(Math.ceil((t-e)/r)),a);t<e&&r===1&&(r=-1),s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+r;return li(s,a)}var ZK=at({onesLike_:function(e){var t=$e(e,"x","onesLike");if(t.dtype==="complex64"){var r=ZK($c(t)),a=Ua(Mu(t));return eo(r,a)}return ft.runKernelFunc(function(s){return s.onesLike(t)},{$x:t},function(s,i){return{$x:function(){return Ua(s)}}})}}),Ua=at({zerosLike_:function(e){var t=$e(e,"x","zerosLike");return ft.runKernelFunc(function(r){return r.zerosLike(t)},{$x:t},function(r,a){return{$x:function(){return Ua(r)}}})}}),vi=at({concat_:function(e,t){t===void 0&&(t=0),Ge(e.length>=1,function(){return"Pass at least one tensor to concat"});var r=M2(e,"tensors","concat");r[0].dtype==="complex64"&&r.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),t=Si(t,r[0].shape)[0];var a=ng(r.map(function(l){return l.shape}),t);if(Fr(a)===0)return so([],a);if((r=r.filter(function(l){return l.size>0})).length===1)return r[0];var s=r.map(function(l){return l.shape});iPe(s,t);var i=r,o={axis:t};return ft.runKernelFunc(function(l){return l.concat(r,t)},i,function(l){var c=s.map(function(d){return d[t]});return XI(l,c,t).map(function(d){return function(){return d}})},"Concat",o)}}),uPe=at({concat1d_:function(e){return vi(e,0)}}),hPe=at({concat2d_:function(e,t){return vi(e,t)}}),fPe=at({concat3d_:function(e,t){return vi(e,t)}}),mPe=at({concat4d_:function(e,t){return vi(e,t)}}),XI=at({split_:function(e,t,r){r===void 0&&(r=0);var a,s=$e(e,"x","split");return r=Si(r,s.shape)[0],typeof t=="number"?(Ge(s.shape[r]%t==0,function(){return"Number of splits must evenly divide the axis."}),a=new Array(t).fill(s.shape[r]/t)):(Ge(s.shape[r]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),a=t),ft.runKernelFunc(function(i){return i.split(s,a,r)},{$x:s},function(i){return{$x:function(){return vi(i,r)}}})}});function sv(e,t){return e(t={exports:{}},t.exports),t.exports}var pPe=sv(function(e){(function(t,r,a){function s(l){var c,d=this,u=(c=4022871197,function(h){h=h.toString();for(var f=0;f<h.length;f++){var p=.02519603282416938*(c+=h.charCodeAt(f));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var h=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=h-(d.c=0|h)},d.c=1,d.s0=u(" "),d.s1=u(" "),d.s2=u(" "),d.s0-=u(l),d.s0<0&&(d.s0+=1),d.s1-=u(l),d.s1<0&&(d.s1+=1),d.s2-=u(l),d.s2<0&&(d.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var d=new s(l),u=c&&c.state,h=d.next;return h.int32=function(){return 4294967296*d.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.alea=o})(0,e)}),xPe=sv(function(e){(function(t,r,a){function s(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor128=o})(0,e)}),vPe=sv(function(e){(function(t,r,a){function s(l){var c=this,d="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^h^h<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),u==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorwow=o})(0,e)}),gPe=sv(function(e){(function(t,r,a){function s(l){var c=this;c.next=function(){var d,u,h=c.x,f=c.i;return d=h[f],u=(d^=d>>>7)^d<<24,u^=(d=h[f+1&7])^d>>>10,u^=(d=h[f+3&7])^d>>>3,u^=(d=h[f+4&7])^d<<7,d=h[f+7&7],u^=(d^=d<<13)^d<<9,h[f]=u,c.i=f+1&7,u},function(d,u){var h,f=[];if(u===(0|u))f[0]=u;else for(u=""+u,h=0;h<u.length;++h)f[7&h]=f[7&h]<<15^u.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],d.x=f,d.i=0,h=256;h>0;--h)d.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(u.x&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorshift7=o})(0,e)}),bPe=sv(function(e){(function(t,r,a){function s(l){var c=this;c.next=function(){var d,u,h=c.w,f=c.X,p=c.i;return c.w=h=h+1640531527|0,u=f[p+34&127],d=f[p=p+1&127],u^=u<<13,d^=d<<17,u^=u>>>15,d^=d>>>12,u=f[p]=u^d,c.i=p,u+(h^h>>>16)|0},function(d,u){var h,f,p,v,g,b=[],y=128;for(u===(0|u)?(f=u,u=null):(u+="\0",f=0,y=Math.max(y,u.length)),p=0,v=-32;v<y;++v)u&&(f^=u.charCodeAt((v+32)%u.length)),v===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,v>=0&&(g=g+1640531527|0,p=(h=b[127&v]^=f+g)==0?p+1:0);for(p>=128&&(b[127&(u&&u.length||0)]=-1),p=127,v=512;v>0;--v)f=b[p+34&127],h=b[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,b[p]=f^h;d.w=g,d.X=b,d.i=p}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(u.X&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor4096=o})(0,e)}),yPe=sv(function(e){(function(t,r,a){function s(l){var c=this,d="";c.next=function(){var h=c.b,f=c.c,p=c.d,v=c.a;return h=h<<25^h>>>7^f,f=f-p|0,p=p<<24^p>>>8^v,v=v-h|0,c.b=h=h<<20^h>>>12^f,c.c=f=f-p|0,c.d=p<<16^f>>>16^v,c.a=v-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var u=0;u<d.length+20;u++)c.b^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.tychei=o})(0,e)}),Yp=sv(function(e){(function(t,r){var a,s=this,i=256,o=6,l="random",c=r.pow(i,o),d=r.pow(2,52),u=2*d,h=i-1;function f(y,S,w){var k=[],C=g(function T(I,F){var A,P=[],q=typeof I;if(F&&q=="object")for(A in I)try{P.push(T(I[A],F-1))}catch{}return P.length?P:q=="string"?I:I+"\0"}((S=S==1?{entropy:!0}:S||{}).entropy?[y,b(t)]:y??function(){try{var T;return a&&(T=a.randomBytes)?T=T(i):(T=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(T)),b(T)}catch{var I=s.navigator,F=I&&I.plugins;return[+new Date,s,F,s.screen,b(t)]}}(),3),k),_=new p(k),E=function(){for(var T=_.g(o),I=c,F=0;T<d;)T=(T+F)*i,I*=i,F=_.g(1);for(;T>=u;)T/=2,I/=2,F>>>=1;return(T+F)/I};return E.int32=function(){return 0|_.g(4)},E.quick=function(){return _.g(4)/4294967296},E.double=E,g(b(_.S),t),(S.pass||w||function(T,I,F,A){return A&&(A.S&&v(A,_),T.state=function(){return v(_,{})}),F?(r[l]=T,I):T})(E,C,"global"in S?S.global:this==r,S.state)}function p(y){var S,w=y.length,k=this,C=0,_=k.i=k.j=0,E=k.S=[];for(w||(y=[w++]);C<i;)E[C]=C++;for(C=0;C<i;C++)E[C]=E[_=h&_+y[C%w]+(S=E[C])],E[_]=S;(k.g=function(T){for(var I,F=0,A=k.i,P=k.j,q=k.S;T--;)I=q[A=h&A+1],F=F*i+q[h&(q[A]=q[P=h&P+I])+(q[P]=I)];return k.i=A,k.j=P,F})(i)}function v(y,S){return S.i=y.i,S.j=y.j,S.S=y.S.slice(),S}function g(y,S){for(var w,k=y+"",C=0;C<k.length;)S[h&C]=h&(w^=19*S[h&C])+k.charCodeAt(C++);return b(S)}function b(y){return String.fromCharCode.apply(0,y)}if(r["seed"+l]=f,g(r.random(),t),e.exports){e.exports=f;try{a=require("crypto")}catch{}}})([],Math)});Yp.alea=pPe,Yp.xor128=xPe,Yp.xorwow=vPe,Yp.xorshift7=gPe,Yp.xor4096=bPe,Yp.tychei=yPe;var vC=Yp.alea,QI=function(){function e(t,r,a,s,i){this.mean=t,this.stdDev=r,this.dtype=a,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=vC(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var r,a,s=!1;!s;){var i=void 0,o=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);r=this.mean+this.stdDev*i*c,a=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(r)||(s=!0)}return this.truncated&&!this.isValidTruncated(a)||(this.nextVal=this.convertValue(a)),this.convertValue(r)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),jPe=function(){function e(t,r,a,s){this.alpha=t,this.beta=1/r,this.dtype=a;var i=s||Math.random();this.randu=vC(i.toString()),this.randn=new QI(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,r,a,s,i,o;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,r=1-.331*(t=s*s)*t,a=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<r||Math.log(i)<a)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),NPe=function(){function e(t,r,a,s){var i=this;if(t===void 0&&(t=0),r===void 0&&(r=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=r-t,this.dtype=a,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+r+" <= 1 and dtype is not float");this.random=vC(s)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ua(e,t,r){return t===void 0&&(t="float32"),t=t||"float32",WK(e),new Zy(e,t,r)}function wPe(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var eX=at({batchToSpaceND_:function(e,t,r){var a=$e(e,"x","batchToSpaceND"),s=t.reduce(function(i,o){return i*o});return Ge(a.rank>=1+t.length,function(){return"input rank is "+a.rank+" but should be > than blockShape.length "+t.length}),Ge(r.length===t.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+t.length}),Ge(a.shape[0]%s==0,function(){return"input tensor batch is "+a.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),ft.runKernelFunc(function(i){return i.batchToSpaceND(a,t,r)},{$x:a},function(i){return{$x:function(){return i.spaceToBatchND(t,r)}}})}}),SPe=at({broadcastTo_:function(e,t){var r=$e(e,"broadcastTo","x"),a=r.shape;if(t.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<r.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+r.rank+".");if(t.length>r.rank){for(var s=r.shape.slice();s.length<t.length;)s.unshift(1);r=r.reshape(s)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(r.shape[o]===t[o])i[o]=1;else if(r.shape[o]!==1)throw new Error("broadcastTo(): ["+a+"] cannot be broadcast to ["+t+"].");var l=i.map(function(c,d){return c>1?d:-1}).filter(function(c){return c>=0});return l.length===0?r.clone():ft.runKernelFunc(function(c){return c.tile(r,i)},{input:r},function(c){return{input:function(){return c.sum(l,!0)}}})}}),CPe=at({cast_:function(e,t){var r=$e(e,"x","cast");if(!vIe(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var a={dtype:t};return ft.runKernelFunc(function(s){return s.cast(r,t)},{x:r},function(s){return{x:function(){return s.clone()}}},"Cast",a)}}),kPe=at({clone_:function(e){var t=$e(e,"x","clone",null);return ft.runKernelFunc(function(){return ft.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(r){return{$x:function(){return r.toFloat()}}})}}),EPe=at({cumsum_:function(e,t,r,a){t===void 0&&(t=0),r===void 0&&(r=!1),a===void 0&&(a=!1);var s=$e(e,"x","cumsum"),i=lh([t|=0],s.rank),o=s;i!=null&&(o=s.transpose(i));var l=ch(1,s.rank)[0],c=ft.runKernelFunc(function(d){return d.cumsum(o,l,r,a)},{permutedX:o},function(d){return{permutedX:function(){return d.cumsum(t,r,!a)}}});return i!=null&&(c=c.transpose(i)),c}}),_Pe=at({depthToSpace_:function(e,t,r){r===void 0&&(r="NHWC");var a=$e(e,"x","depthToSpace"),s=r==="NHWC"?a.shape[1]:a.shape[2],i=r==="NHWC"?a.shape[2]:a.shape[3],o=r==="NHWC"?a.shape[3]:a.shape[1];return Ge(s*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+t+`  for depthToSpace with input shape
      `+a.shape}),Ge(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+a.shape}),Ge(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+a.shape}),ft.runKernelFunc(function(l){return l.depthToSpace(a,t,r)},{$x:a})}}),Bc=at({expandDims_:function(e,t){t===void 0&&(t=0);var r=$e(e,"x","expandDims",null);Ge(t<=r.rank,function(){return"Axis must be <= rank of the tensor"});var a=r.shape.slice();return t<0&&(Ge(-(r.rank+1)<=t,function(){return"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"}),t=r.rank+t+1),a.splice(t,0,1),Ad(r,a)}}),tX=at({eye_:function(e,t,r,a){a===void 0&&(a="float32"),t==null&&(t=e);for(var s=ua([e,t],a),i=e<=t?e:t,o=0;o<i;++o)s.set(1,o,o);var l=s.toTensor().as2D(e,t);if(r==null)return l;if(r.length===1)return D0(Bc(l,0),[r[0],1,1]);if(r.length===2)return D0(Bc(Bc(l,0),0),[r[0],r[1],1,1]);if(r.length===3)return D0(Bc(Bc(Bc(l,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")}}),DPe=at({multinomial_:function(e,t,r,a){a===void 0&&(a=!1);var s=$e(e,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var l=o===1?s.as2D(1,-1):s,c=ft.runKernelFunc(function(d){return d.multinomial(l,a,t,r)},{logits2D:l});return o===1?c.as1D():c}}),a3=at({oneHot_:function(e,t,r,a){if(r===void 0&&(r=1),a===void 0&&(a=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=$e(e,"indices","oneHot","int32"),i=s.shape.concat([t]);return s=s.flatten(),ft.runKernelFunc(function(o){return o.oneHot(s,t,r,a)},{$indices:s},function(o){return{$indices:function(){return qn(s.shape,"float32")}}}).reshape(i)}}),iv=at({pad_:function(e,t,r){r===void 0&&(r=0);var a=$e(e,"x","pad");if(a.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:r};return ft.runKernelFunc(function(i){return i.pad(a,t,r)},{x:a},function(i){var o=t.map(function(l){return l[0]});return{x:function(){return i.slice(o,a.shape)}}},"PadV2",s)}}),APe=at({pad1d_:function(e,t,r){return r===void 0&&(r=0),Ge(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),iv(e,[t],r)}}),TPe=at({pad2d_:function(e,t,r){return r===void 0&&(r=0),Ge(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iv(e,t,r)}}),IPe=at({pad3d_:function(e,t,r){return r===void 0&&(r=0),Ge(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iv(e,t,r)}}),PPe=at({pad4d_:function(e,t,r){return r===void 0&&(r=0),Ge(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iv(e,t,r)}}),OPe=at({rand_:function(e,t,r){var a=Fr(e),s=null;if(r==null||r==="float32")s=new Float32Array(a);else if(r==="int32")s=new Int32Array(a);else{if(r!=="bool")throw new Error("Unknown data type "+r);s=new Uint8Array(a)}for(var i=0;i<a;i++)s[i]=t();return ft.makeTensor(s,e,r)}}),MPe=at({randomNormal_:function(e,t,r,a,s){if(t===void 0&&(t=0),r===void 0&&(r=1),a!=null&&a==="bool")throw new Error("Unsupported data type "+a);for(var i=new QI(t,r,a,!1,s),o=ua(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),RPe=at({randomGamma_:function(e,t,r,a,s){if(r===void 0&&(r=1),a===void 0&&(a="float32"),r==null&&(r=1),a==null&&(a="float32"),a!=="float32"&&a!=="int32")throw new Error("Unsupported data type "+a);for(var i=new jPe(t,r,a,s),o=ua(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),rX=at({randomUniform_:function(e,t,r,a,s){t===void 0&&(t=0),r===void 0&&(r=1),a===void 0&&(a="float32");for(var i=ua(e,a),o=new NPe(t,r,null,s),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}}),Ad=at({reshape_:function(e,t){var r=$e(e,"x","reshape",null);t=pIe(t,r.size),Ge(r.size===Fr(t),function(){return"new shape and old shape must have the same number of elements."});var a={shape:t};return ft.runKernelFunc(function(s){return s.reshape(r,t)},{x:r},function(s){return{x:function(){return s.reshape(r.shape)}}},"Reshape",a)}}),aX=at({spaceToBatchND_:function(e,t,r){var a=$e(e,"x","spaceToBatchND");return Ge(a.rank>=1+t.length,function(){return"input rank "+a.rank+" should be > than [blockShape] "+t.length}),Ge(r.length===t.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+t.length}),Ge(a.shape.reduce(function(s,i,o){return o>0&&o<=t.length?s&&(i+r[o-1][0]+r[o-1][1])%t[o-1]==0:s},!0),function(){return"input spatial dimensions "+a.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+t.toString()}),ft.runKernelFunc(function(s){return s.spaceToBatchND(a,t,r)},{$x:a},function(s){return{$x:function(){return s.batchToSpaceND(t,r)}}})}}),nX=at({squeeze_:function(e,t){var r=$e(e,"x","squeeze");return Ad(r,Jp(r.shape,t).newShape)}}),oc=at({stack_:function(e,t){t===void 0&&(t=0);var r=M2(e,"tensors","stack");if(Ge(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length===1)return r[0].expandDims(t);var a=r[0].rank,s=r[0].shape,i=r[0].dtype;Ge(t<=a,function(){return"Axis must be <= rank of the tensor"}),r.forEach(function(l){fn(s,l.shape,"All tensors passed to stack must have matching shapes")}),r.forEach(function(l){Ge(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=r.map(function(l){return l.expandDims(t)});return vi(o,t)}}),D0=at({tile_:function(e,t){var r=$e(e,"x","tile",null);Ge(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of reps "+t+"."});var a=[r],s={reps:t};return ft.runKernelFunc(function(i,o){var l=i.tile(r,t);return o([r]),l},{x:r},function(i,o){var l=o[0];return{x:function(){var c=Ua(l);if(l.rank===1)for(var d=0;d<t[0];++d)c=c.add(i.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<t[0];++d)for(var u=0;u<t[1];++u)c=c.add(i.slice([d*l.shape[0],u*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(var h=0;h<t[2];++h)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(h=0;h<t[2];++h)for(var f=0;f<t[3];++f)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2],f*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",s,a)}}),FPe=at({truncatedNormal_:function(e,t,r,a,s){if(t===void 0&&(t=0),r===void 0&&(r=1),a!=null&&a==="bool")throw new Error("Unsupported data type "+a);for(var i=new QI(t,r,a,!0,s),o=ua(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),gi=at({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var r=$e(e,"x","unstack");Ge(t>=-r.shape.length&&t<r.shape.length,function(){return"Axis = "+t+" is not in [-"+r.shape.length+", "+r.shape.length+")"}),t<0&&(t+=r.shape.length);var a={axis:t};return ft.runKernelFunc(function(s){return s.unstack(r,t)},{x:r},function(s){return{x:function(){return oc(s,t)}}},"Unpack",a)}}),LPe=function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return r=$e(e,"x","setdiff1d"),a=$e(t,"y","setdiff1d"),Ge(r.dtype===a.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+a.dtype+")."}),Ge(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),Ge(a.rank===1,function(){return"y should be 1D tensor, but got y ("+a.shape+")."}),[4,r.data()];case 1:return s=f.sent(),[4,a.data()];case 2:for(i=f.sent(),o=new Set(i),l=0,u=0;u<s.length;u++)o.has(s[u])||l++;for(c=new Zy([l],r.dtype),d=new Zy([l],"int32"),u=0,h=0;u<s.length;u++)o.has(s[u])||(c.values[h]=s[u],d.values[h]=u,h++);return[2,[c.toTensor(),d.toTensor()]]}})})};function F2(e,t,r,a){a===void 0&&(a=!0);var s=[];if(a)(s=s.concat(t.slice(0))).push(e[0]/r),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var i=t.length,o=0;o<i;++o)s=s.concat([e[o+1]/t[o],t[o]]);s=s.concat(e.slice(i+1))}return s}function L2(e,t,r){r===void 0&&(r=!0);var a=[];if(r){a.push(t);for(var s=t+1;s<e;++s)s<=2*t?(a.push(s),a.push(s-(t+1))):a.push(s)}else{var i=[],o=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);a.push.apply(a,i),a.push(0),a.push.apply(a,o)}return a}function B2(e,t,r,a){a===void 0&&(a=!0);var s=[];a?s.push(e[0]/r):s.push(e[0]*r);for(var i=1;i<e.length;++i)i<=t.length?a?s.push(t[i-1]*e[i]):s.push(e[i]/t[i-1]):s.push(e[i]);return s}function sX(e,t){for(var r=[0],a=0;a<t;++a)r.push(e[a][0]);return r}function iX(e,t,r){for(var a=e.slice(0,1),s=0;s<r;++s)a.push(e[s+1]-t[s][0]-t[s][1]);return a}function oX(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var r=t.shape,a=r[r.length-1],s=1,i=0;i<r.length-1;++i)s*=r[i];var o=e.shape,l=r.slice();l.pop();var c=1;for(i=a;i<e.rank;++i)c*=o[i],l.push(o[i]);var d=Gu(e.shape).map(function(u){return u/c}).concat([1]).slice(0,a);return[l,s,c,d]}var lX=30;function $D(e){return e<=lX?e:QA(e,Math.floor(Math.sqrt(e)))}function BPe(e,t,r){var a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+r.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+a+", and batchDim: "+s+".";if(r.rank<s)throw new Error(i+" update.rank < "+s+". ");if(e.length<a+(r.rank-s))throw new Error(i+" Output shape length < "+(a+(r.rank-s)));if(r.rank!==s+e.length-a)throw new Error(i+" update.rank != "+(s+e.length-a));for(var o=0;o<s;++o)if(r.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<r.rank-s;++o)if(r.shape[o+s]!==e[o+a])throw new Error(i+" updates.shape["+(o+s)+"] ("+r.shape[o+s]+") != shape["+(o+s)+"] ("+e[o+s]+")")}function UPe(e,t,r){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}BPe(r,t,e)}function U2(e,t,r){for(var a=t.shape.length,s=a>1?t.shape[a-1]:1,i=r.length,o=1,l=s;l<i;++l)o*=r[l];var c=s<1?1:s;return{sliceRank:s,numUpdates:Fr(t.shape)/c,sliceSize:o,strides:Gu(r.slice(0,s)).concat([1]),outputSize:Fr(r)}}function $Pe(e,t,r){Ge(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),Ge(e.rank===r.length,function(){return"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+")."});for(var a=function(i){Ge(t[i]+r[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+r[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},s=0;s<e.rank;++s)a(s)}function N9(e){for(var t=[],r=0;e>0;)1&e&&t.push(r),e/=2,r++;return t}function JI(e,t,r){for(var a=[],s=0;s<e.length;s++)a[s]=Math.ceil((t[s]-e[s])/r[s]);return a}function VPe(e,t,r,a,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=a[s];return i<0&&(i+=l),i=YA(0,i,l-1)}function qPe(e,t,r,a,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=a[s];return i<0&&(i+=l),i=o>0?YA(0,i,l):YA(-1,i,l-1)}function cX(e,t,r){for(var a=r.length,s=0;s<r.length;s++)if(r[s]>1){a=s;break}for(s=a+1;s<r.length;s++)if(t[s]>0||r[s]!==e[s])return!1;return!0}function dX(e,t){for(var r=e.length>0?e[e.length-1]:1,a=0;a<e.length-1;a++)r+=e[a]*t[a];return r}function zPe(e,t){Ge(XA(e),function(){return"The f passed in variableGrads(f) must be a function"}),Ge(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof ag}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=t!=null;if(!r)for(var a in t=[],ft.registeredVariables)t.push(ft.registeredVariables[a]);var s=r?t.filter(function(u){return!u.trainable}):null,i=t.length;Ge((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=ft.gradients(e,t,null,!0),l=o.value,c=o.grads;Ge(c.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),Ge(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var d={};return t.forEach(function(u,h){c[h]!=null&&(d[u.name]=c[h])}),s?.forEach(function(u){return d[u.name]=null}),{value:l,grads:d}}function gC(e){return ft.customGrad(e)}var Cf=at({softmax_:function(e,t){t===void 0&&(t=-1);var r=$e(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and dim was "+t);return ft.runKernelFunc(function(a,s){var i=a.softmax(r,t);return s([i]),i},{logits:r},function(a,s){var i=s[0],o=a.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),HPe=at({logSoftmax_:function(e,t){t===void 0&&(t=-1);var r=$e(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and axis was "+t);return gC(function(a,s){var i=a.max(t,!0),o=a.sub(i),l=o.toFloat().sub(o.exp().sum(t,!0).log());return s([l]),{value:l,gradFunc:function(c,d){var u=d[0].exp();return c.sub(c.sum(t,!0).mul(u))}}})(r)}}),uX=function(){function e(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,r){this.dataIdsCount++,this.data.set(t,r)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),hX=function(){function e(){}return e.prototype.time=function(t){return Ft("time")},e.prototype.read=function(t){return Ft("read")},e.prototype.readSync=function(t){return Ft("readSync")},e.prototype.numDataIds=function(){return Ft("numDataIds")},e.prototype.disposeData=function(t){return Ft("disposeData")},e.prototype.write=function(t,r,a){return Ft("write")},e.prototype.move=function(t,r,a,s){return Ft("move")},e.prototype.memory=function(){return Ft("memory")},e.prototype.floatPrecision=function(){return Ft("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,r,a,s){return Ft("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Ft("fusedBatchMatMul")},e.prototype.slice=function(t,r,a){return Ft("slice")},e.prototype.stridedSlice=function(t,r,a,s){return Ft("stridedSlice")},e.prototype.unstack=function(t,r){return Ft("unstack")},e.prototype.reverse=function(t,r){return Ft("reverse")},e.prototype.concat=function(t,r){return Ft("concat")},e.prototype.neg=function(t){return Ft("neg")},e.prototype.add=function(t,r){return Ft("add")},e.prototype.addN=function(t){return Ft("addN")},e.prototype.subtract=function(t,r){return Ft("subtract")},e.prototype.multiply=function(t,r){return Ft("multiply")},e.prototype.realDivide=function(t,r){return Ft("realDivide")},e.prototype.floorDiv=function(t,r){return Ft("floorDiv")},e.prototype.sum=function(t,r){return Ft("sum")},e.prototype.prod=function(t,r){return Ft("prod")},e.prototype.unsortedSegmentSum=function(t,r,a){return Ft("unsortedSegmentSum")},e.prototype.argMin=function(t,r){return Ft("argMin")},e.prototype.argMax=function(t,r){return Ft("argMax")},e.prototype.equal=function(t,r){return Ft("equal")},e.prototype.notEqual=function(t,r){return Ft("notEqual")},e.prototype.less=function(t,r){return Ft("less")},e.prototype.lessEqual=function(t,r){return Ft("lessEqual")},e.prototype.greater=function(t,r){return Ft("greater")},e.prototype.greaterEqual=function(t,r){return Ft("greaterEqual")},e.prototype.logicalNot=function(t){return Ft("logicalNot")},e.prototype.logicalAnd=function(t,r){return Ft("logicalAnd")},e.prototype.logicalOr=function(t,r){return Ft("logicalOr")},e.prototype.where=function(t){return Ft("where")},e.prototype.select=function(t,r,a){return Ft("select")},e.prototype.topk=function(t,r,a){return Ft("topk")},e.prototype.min=function(t,r){return Ft("min")},e.prototype.minimum=function(t,r){return Ft("minimum")},e.prototype.mod=function(t,r){return Ft("mod")},e.prototype.max=function(t,r){return Ft("max")},e.prototype.maximum=function(t,r){return Ft("maximum")},e.prototype.all=function(t,r){return Ft("all")},e.prototype.any=function(t,r){return Ft("any")},e.prototype.squaredDifference=function(t,r){return Ft("squaredDifference")},e.prototype.ceil=function(t){return Ft("ceil")},e.prototype.floor=function(t){return Ft("floor")},e.prototype.round=function(t){return Ft("round")},e.prototype.sign=function(t){return Ft("sign")},e.prototype.isNaN=function(t){return Ft("isNaN")},e.prototype.isInf=function(t){return Ft("isInf")},e.prototype.isFinite=function(t){return Ft("isFinite")},e.prototype.pow=function(t,r){return Ft("pow")},e.prototype.exp=function(t){return Ft("exp")},e.prototype.expm1=function(t){return Ft("expm1")},e.prototype.softmax=function(t,r){return Ft("softmax")},e.prototype.log=function(t){return Ft("log")},e.prototype.log1p=function(t){return Ft("log1p")},e.prototype.sqrt=function(t){return Ft("sqrt")},e.prototype.rsqrt=function(t){return Ft("rsqrt")},e.prototype.square=function(t){return Ft("square")},e.prototype.reciprocal=function(t){return Ft("reciprocal")},e.prototype.relu=function(t){return Ft("relu")},e.prototype.relu6=function(t){return Ft("relu6")},e.prototype.prelu=function(t,r){return Ft("prelu")},e.prototype.elu=function(t){return Ft("elu")},e.prototype.eluDer=function(t,r){return Ft("eluDer")},e.prototype.selu=function(t){return Ft("selu")},e.prototype.int=function(t){return Ft("int")},e.prototype.clip=function(t,r,a){return Ft("clip")},e.prototype.abs=function(t){return Ft("abs")},e.prototype.complexAbs=function(t){return Ft("complexAbs")},e.prototype.sigmoid=function(t){return Ft("sigmoid")},e.prototype.softplus=function(t){return Ft("softplus")},e.prototype.sin=function(t){return Ft("sin")},e.prototype.cos=function(t){return Ft("cos")},e.prototype.tan=function(t){return Ft("tan")},e.prototype.asin=function(t){return Ft("asin")},e.prototype.acos=function(t){return Ft("acos")},e.prototype.atan=function(t){return Ft("atan")},e.prototype.atan2=function(t,r){return Ft("atan2")},e.prototype.sinh=function(t){return Ft("sinh")},e.prototype.cosh=function(t){return Ft("cosh")},e.prototype.tanh=function(t){return Ft("tanh")},e.prototype.asinh=function(t){return Ft("asinh")},e.prototype.acosh=function(t){return Ft("acosh")},e.prototype.atanh=function(t){return Ft("atanh")},e.prototype.erf=function(t){return Ft("erf")},e.prototype.step=function(t,r){return Ft("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ft("fusedConv2d")},e.prototype.conv2d=function(t,r,a){return Ft("conv2d")},e.prototype.conv2dDerInput=function(t,r,a){return Ft("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,r,a){return Ft("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ft("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,r,a){return Ft("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,r,a){return Ft("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){return Ft("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,r,a){return Ft("conv3d")},e.prototype.conv3dDerInput=function(t,r,a){return Ft("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,r,a){return Ft("conv3dDerFilter")},e.prototype.maxPool=function(t,r){return Ft("maxPool")},e.prototype.maxPoolBackprop=function(t,r,a,s){return Ft("maxPoolBackprop")},e.prototype.avgPool=function(t,r){return Ft("avgPool")},e.prototype.avgPoolBackprop=function(t,r,a){return Ft("avgPoolBackprop")},e.prototype.avgPool3d=function(t,r){return Ft("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,r,a){return Ft("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,r){return Ft("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,r,a,s){return Ft("maxPool3dBackprop")},e.prototype.reshape=function(t,r){return Ft("reshape")},e.prototype.cast=function(t,r){return Ft("cast")},e.prototype.tile=function(t,r){return Ft("tile")},e.prototype.pad=function(t,r,a){return Ft("pad")},e.prototype.transpose=function(t,r){return Ft("transpose")},e.prototype.gather=function(t,r,a){return Ft("gather")},e.prototype.gatherND=function(t,r){return Ft("gatherND")},e.prototype.scatterND=function(t,r,a){return Ft("scatterND")},e.prototype.batchToSpaceND=function(t,r,a){return Ft("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,r,a){return Ft("spaceToBatchND")},e.prototype.resizeBilinear=function(t,r,a,s){return Ft("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,r,a){return Ft("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,r,a,s){return Ft("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){return Ft("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,r,a,s,i,o){return Ft("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,r,a,s,i){return Ft("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,r,a,s,i,o,l){return Ft("LRNGrad")},e.prototype.multinomial=function(t,r,a,s){return Ft("multinomial")},e.prototype.oneHot=function(t,r,a,s){return Ft("oneHot")},e.prototype.cumsum=function(t,r,a,s){return Ft("cumsum")},e.prototype.nonMaxSuppression=function(t,r,a,s,i){return Ft("nonMaxSuppression")},e.prototype.fft=function(t){return Ft("fft")},e.prototype.ifft=function(t){return Ft("ifft")},e.prototype.complex=function(t,r){return Ft("complex")},e.prototype.real=function(t){return Ft("real")},e.prototype.imag=function(t){return Ft("imag")},e.prototype.cropAndResize=function(t,r,a,s,i,o){return Ft("cropAndResize")},e.prototype.depthToSpace=function(t,r,a){return Ft("depthToSpace")},e.prototype.split=function(t,r,a){return Ft("split")},e.prototype.sparseToDense=function(t,r,a,s){return Ft("sparseToDense")},e.prototype.diag=function(t){return Ft("diag")},e.prototype.fill=function(t,r,a){return Ft("fill")},e.prototype.onesLike=function(t){return Ft("onesLike")},e.prototype.zerosLike=function(t){return Ft("zerosLike")},e.prototype.linspace=function(t,r,a){return Ft("linspace")},e.prototype.dispose=function(){return Ft("dispose")},e}();function Ft(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Im(e,t){for(var r=e.length,a=[],s=0;s<r;s++){var i=r-1-s,o=e[i]||1;(t[t.length-1-s]||1)>1&&o===1&&a.unshift(i)}return a}function yi(e,t){for(var r=[],a=0;a<t.length;a++){var s=e[e.length-a-1],i=t.length-a-1,o=t[i];(s==null||s===1&&o>1)&&r.unshift(i)}return r}function Ia(e,t){for(var r=[],a=Math.max(e.length,t.length),s=0;s<a;s++){var i=e[e.length-s-1];i==null&&(i=1);var o=t[t.length-s-1];if(o==null&&(o=1),i===1)r.unshift(o);else if(o===1)r.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");r.unshift(i)}}return r}function t1(e,t,r,a,s,i,o){o===void 0&&(o="channelsLast");var l,c=q2(t),d=c[0],u=c[1];if(o==="channelsLast")l=[d,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=[d,u,e[1],e[1]]}return ov(e,l,r,a,s,i,!1,o)}function $2(e,t,r,a,s,i,o){o===void 0&&(o="NDHWC");var l,c,d=n3(t),u=d[0],h=d[1],f=d[2];if(o==="NDHWC")c="channelsLast",l=[u,h,f,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",l=[u,h,f,e[1],e[1]]}return V2(e,l,r,a,s,!1,c,i)}function ov(e,t,r,a,s,i,o,l){o===void 0&&(o=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],f=c[3];if(l==="channelsLast")d=e[0],u=e[1],h=e[2],f=e[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=e[0],f=e[1],u=e[2],h=e[3]}var p,v=t[0],g=t[1],b=t[3],y=q2(r),S=y[0],w=y[1],k=q2(a),C=k[0],_=k[1],E=A0(v,C),T=A0(g,_),I=function(V,Y,B,Q,R,Z,J,ie){var M,z,ee;if(typeof V=="number"){M={top:V,bottom:V,left:V,right:V,type:V===0?"VALID":"NUMBER"};var ne=function(de,H,se,be,ue){be==null&&(be=fX(de,H,se));var oe=de[0],ge=de[1],Ne=xy((oe-H+2*be)/se+1,ue);Ge(Gs(Ne),function(){return"The output # of rows ("+Ne+") must be an integer. Change the stride and/or zero pad parameters"});var Me=xy((ge-H+2*be)/se+1,ue);return Ge(Gs(Me),function(){return"The output # of columns ("+Me+") must be an integer. Change the stride and/or zero pad parameters"}),[Ne,Me]}([Y,B],Z,Q,V,ie);z=ne[0],ee=ne[1]}else if(V==="same"){z=Math.ceil(Y/Q),ee=Math.ceil(B/R);var W=Math.max(0,(z-1)*Q+Z-Y),re=Math.max(0,(ee-1)*R+J-B),le=Math.floor(W/2),te=W-le,K=Math.floor(re/2);M={top:le,bottom:te,left:K,right:re-K,type:"SAME"}}else{if(V!=="valid")throw Error("Unknown padding parameter: "+V);M={top:0,bottom:0,left:0,right:0,type:"VALID"},z=Math.ceil((Y-Z+1)/Q),ee=Math.ceil((B-J+1)/R)}return{padInfo:M,outHeight:z,outWidth:ee}}(s,u,h,S,w,E,T,i),F=I.padInfo,A=I.outHeight,P=I.outWidth,q=o?b*f:b;return l==="channelsFirst"?p=[d,q,A,P]:l==="channelsLast"&&(p=[d,A,P,q]),{batchSize:d,dataFormat:l,inHeight:u,inWidth:h,inChannels:f,outHeight:A,outWidth:P,outChannels:q,padInfo:F,strideHeight:S,strideWidth:w,filterHeight:v,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:C,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function V2(e,t,r,a,s,i,o,l){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],f=c[3],p=c[4];if(o==="channelsLast")d=e[0],u=e[1],h=e[2],f=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);d=e[0],p=e[1],u=e[2],h=e[3],f=e[4]}var v,g=t[0],b=t[1],y=t[2],S=t[4],w=n3(r),k=w[0],C=w[1],_=w[2],E=n3(a),T=E[0],I=E[1],F=E[2],A=A0(g,T),P=A0(b,I),q=A0(y,F),V=function(J,ie,M,z,ee,ne,W,re,le,te,K){var de,H,se,be;if(typeof J=="number"){de={top:J,bottom:J,left:J,right:J,front:J,back:J,type:J===0?"VALID":"NUMBER"};var ue=function(dt,Dt,It,zt,xe,fe){xe==null&&(xe=fX(dt,Dt,zt));var ve=dt[0],pe=dt[1],Te=dt[2],Xe=xy((ve-Dt+2*xe)/zt+1,fe);Ge(Gs(Xe),function(){return"The output # of depths ("+Xe+") must be an integer. Change the stride and/or zero pad parameters"});var kt=xy((pe-Dt+2*xe)/zt+1,fe);Ge(Gs(kt),function(){return"The output # of rows ("+kt+") must be an integer. Change the stride and/or zero pad parameters"});var Je=xy((Te-Dt+2*xe)/zt+1,fe);return Ge(Gs(Je),function(){return"The output # of columns ("+Je+") must be an integer. Change the stride and/or zero pad parameters"}),[Xe,kt,Je,It]}([ie,M,z,1],re,1,ee,J,K);H=ue[0],se=ue[1],be=ue[2]}else if(J==="same"){H=Math.ceil(ie/ee),se=Math.ceil(M/ne),be=Math.ceil(z/W);var oe=(H-1)*ee+re-ie,ge=(se-1)*ne+le-M,Ne=(be-1)*W+te-z,Me=Math.floor(oe/2),We=oe-Me,tt=Math.floor(ge/2),mt=ge-tt,Be=Math.floor(Ne/2);de={top:tt,bottom:mt,left:Be,right:Ne-Be,front:Me,back:We,type:"SAME"}}else{if(J!=="valid")throw Error("Unknown padding parameter: "+J);de={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},H=Math.ceil((ie-re+1)/ee),se=Math.ceil((M-le+1)/ne),be=Math.ceil((z-te+1)/W)}return{padInfo:de,outDepth:H,outHeight:se,outWidth:be}}(s,u,h,f,k,C,_,A,P,q,l),Y=V.padInfo,B=V.outDepth,Q=V.outHeight,R=V.outWidth,Z=i?S*p:S;return o==="channelsFirst"?v=[d,Z,B,Q,R]:o==="channelsLast"&&(v=[d,B,Q,R,Z]),{batchSize:d,dataFormat:o,inDepth:u,inHeight:h,inWidth:f,inChannels:p,outDepth:B,outHeight:Q,outWidth:R,outChannels:Z,padInfo:Y,strideDepth:k,strideHeight:C,strideWidth:_,filterDepth:g,filterHeight:b,filterWidth:y,effectiveFilterDepth:A,effectiveFilterHeight:P,effectiveFilterWidth:q,dilationDepth:T,dilationHeight:I,dilationWidth:F,inShape:e,outShape:v,filterShape:t}}function fX(e,t,r,a){a===void 0&&(a=1);var s=A0(t,a);return Math.floor((e[0]*(r-1)-r+s)/2)}function q2(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function n3(e){return typeof e=="number"?[e,e,e]:e}function A0(e,t){return t<=1?e:e+(e-1)*(t-1)}function xy(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function sg(e){var t=q2(e),r=t[0],a=t[1],s=t[2];return r===1&&a===1&&s===1}function Sl(e,t){return sg(e)||sg(t)}function ZI(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function mX(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var a=qn(e.shape),s=e.toFloat(),i=r.complex(s,a);return a.dispose(),s.dispose(),i}if(!gIe(e.dtype,t))return ft.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=r.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return r.int(e);if(t==="bool"){var l=wr(0,e.dtype);return i=r.notEqual(e,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function s3(e,t){return ft.makeTensorFromDataId(e.dataId,t,e.dtype)}function pX(e,t,r){var a=(t-e)/(r-1),s=B1(r,"float32");s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+a;return li(s,"float32")}function i3(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var r=new Float32Array(2*e.length),a=0;a<r.length;a+=2)r[a]=e[a/2],r[a+1]=t[a/2];return r}function w9(e,t){return{real:e[2*t],imag:e[2*t+1]}}function WPe(e,t,r,a){e[2*a]=t,e[2*a+1]=r}function GPe(e,t,r){var a=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}function YPe(e,t,r){var a=function(i,o,l){return function(c,d,u){for(var h=0,f=c.length,p=0,v=!1;h<f;){var g=u(d,c[p=h+(f-h>>>1)]);g>0?h=p+1:(f=p,v=!g)}return v?h:-h-1}(i,o,l||KPe)}(e,t,r),s=a<0?-(a+1):a;e.splice(s,0,t)}function KPe(e,t){return e>t?1:e<t?-1:0}function eP(e,t,r,a,s){return xX(e,t,r,a,s,0).selectedIndices}function tP(e,t,r,a,s,i){var o=xX(e,t,r,a,s,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function xX(e,t,r,a,s,i,o,l){l===void 0&&(l=!1);for(var c=Array.from(t).map(function(k,C){return{score:k,boxIndex:C,suppressBeginIndex:0}}).filter(function(k){return k.score>s}).sort(S9),d=i>0?-.5/i:0,u=[],h=[];u.length<r&&c.length>0;){var f=c.pop(),p=f.score,v=f.boxIndex,g=f.suppressBeginIndex;if(p<s)break;for(var b=!1,y=u.length-1;y>=g;--y){var S=XPe(e,v,u[y]);if(S>=a){b=!0;break}if(f.score=f.score*QPe(a,d,S),f.score<=s)break}f.suppressBeginIndex=u.length,b||(f.score===p?(u.push(v),h.push(f.score)):f.score>s&&YPe(c,f,S9))}var w=u.length;return l&&(u.fill(0,w),h.fill(0,w)),{selectedIndices:li(u,"int32"),selectedScores:li(h,"float32"),numValidOutputs:wr(w,"int32")}}function XPe(e,t,r){var a=e.subarray(4*t,4*t+4),s=e.subarray(4*r,4*r+4),i=Math.min(a[0],a[2]),o=Math.min(a[1],a[3]),l=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),d=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),p=(l-i)*(c-o),v=(h-d)*(f-u);if(p<=0||v<=0)return 0;var g=Math.max(i,d),b=Math.max(o,u),y=Math.min(l,h),S=Math.min(c,f),w=Math.max(y-g,0)*Math.max(S-b,0);return w/(p+v-w)}function QPe(e,t,r){var a=Math.exp(t*r*r);return r<=e?a:0}function S9(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function vX(e,t,r){var a=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(i){s[r]=i;var o=e.slice(a,s);return a[r]+=i,o})}function gX(e,t){for(var r=new Array(e.rank),a=0;a<r.length;a++)r[a]=e.shape[a]*t[a];var s=ua(r,e.dtype);for(a=0;a<s.values.length;++a){for(var i=s.indexToLoc(a),o=new Array(e.rank),l=0;l<o.length;l++)o[l]=i[l]%e.shape[l];var c=e.locToIndex(o);s.values[a]=e.values[c]}return s.toTensor()}function bX(e,t,r,a,s){for(var i=t[t.length-1],o=[e.length/i,i],l=o[0],c=o[1],d=Jy(r,l*a),u=Jy("int32",l*a),h=0;h<l;h++){for(var f=h*c,p=e.subarray(f,f+c),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});v.sort(function(k,C){return C.value-k.value});var b=h*a,y=d.subarray(b,b+a),S=u.subarray(b,b+a);for(g=0;g<a;g++)y[g]=v[g].value,S[g]=v[g].index}var w=t.slice();return w[w.length-1]=a,[so(d,w,r),so(u,w,"int32")]}function rP(e,t){for(var r=[],a=0;a<t.length;a++)t[a]&&r.push(a);var s=ua(e,"int32"),i=ua([r.length,e.length],"int32");for(a=0;a<r.length;a++){var o=s.indexToLoc(r[a]),l=a*e.length;i.values.set(o,l)}return i.toTensor()}var JPe=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("float v"+s+" = get"+s+"AtOutCoords();")});var a=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        float result = `+a+`;
        setOutput(result);
      }
    `},ZPe=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("vec4 v"+s+" = get"+s+"AtOutCoords();")});var a=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        vec4 result = `+a+`;
        setOutput(result);
      }
    `},eOe=function(e,t,r){this.variableNames=["A"];var a=e.windowSize,s=e.batchSize,i=e.inSize,o=Math.ceil(i/a);r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];var l=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+a+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+a+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function yX(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(r){return e+"."+r})}function ml(e,t){return t===1?[e]:yX(e,t)}function Po(){var e,t,r,a,s,i,o,l,c,d;return Wt().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",a="in",s="texture",i="outputColor",o="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",a="varying",s="texture2D",i="gl_FragColor",o="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:a,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function ux(e,t,r){r===void 0&&(r="index");var a=Gu(t);return a.map(function(s,i){return"int "+e[i]+" = "+r+" / "+s+"; "+(i===a.length-1?"int "+e[i+1]+" = "+r+" - "+e[i]+" * "+s:"index -= "+e[i]+" * "+s)+";"}).join("")}function aP(e){var t=Gu(e).map(function(r){return r.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var jX=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function tOe(e,t,r,a){var s=[];e.forEach(function(p){var v=Fr(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?s.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(s.push("uniform sampler2D "+p.name+";"),s.push("uniform int offset"+p.name+";"))});var i,o,l=s.join(`
`),c=e.map(function(p){return function(v,g,b){b===void 0&&(b=!1);var y="";y+=b?NX(v):o0(v);var S=v.shapeInfo.logicalShape,w=g.logicalShape;return S.length<=w.length&&(y+=b?function(k,C){var _,E=k.name,T=E.charAt(0).toUpperCase()+E.slice(1),I="get"+T+"AtOutCoords",F=k.shapeInfo.logicalShape.length,A=C.logicalShape.length,P=Im(k.shapeInfo.logicalShape,C.logicalShape),q=Ln(A),V=A-F,Y=["x","y","z","w","u","v"];_=F===0?"":A<2&&P.length>=1?"coords = 0;":P.map(function(M){return"coords."+Y[M+V]+" = 0;"}).join(`
`);var B="";B=A<2&&F>0?"coords":k.shapeInfo.logicalShape.map(function(M,z){return"coords."+Y[z+V]}).join(", ");var Q="return outputValue;",R=Fr(k.shapeInfo.logicalShape)===1,Z=Fr(C.logicalShape)===1;if(F!==1||R||Z){if(R&&!Z)Q=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(P.length){var J=F-2,ie=F-1;P.indexOf(J)>-1&&P.indexOf(ie)>-1?Q="return vec4(outputValue.x);":P.indexOf(J)>-1?Q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":P.indexOf(ie)>-1&&(Q="return vec4(outputValue.xx, outputValue.zz);")}}else Q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+I+`() {
      `+q+` coords = getOutputCoords();
      `+_+`
      vec4 outputValue = get`+T+"("+B+`);
      `+Q+`
    }
  `}(v,g):function(k,C){var _=k.name,E=_.charAt(0).toUpperCase()+_.slice(1),T="get"+E+"AtOutCoords",I=C.texShape,F=k.shapeInfo.texShape,A=k.shapeInfo.logicalShape.length,P=C.logicalShape.length;if(!k.shapeInfo.isUniform&&A===P&&k.shapeInfo.flatOffset==null&&$i(F,I))return`
      float `+T+`() {
        return sampleTexture(`+_+`, resultUV);
      }
    `;var q,V=Ln(P),Y=Im(k.shapeInfo.logicalShape,C.logicalShape),B=P-A,Q=["x","y","z","w","u","v"];q=A===0?"":P<2&&Y.length>=1?"coords = 0;":Y.map(function(Z){return"coords."+Q[Z+B]+" = 0;"}).join(`
`);var R="";return R=P<2&&A>0?"coords":k.shapeInfo.logicalShape.map(function(Z,J){return"coords."+Q[J+B]}).join(", "),`
    float `+T+`() {
      `+V+` coords = getOutputCoords();
      `+q+`
      return get`+E+"("+R+`);
    }
  `}(v,g)),y}(p,t,a)}).join(`
`),d=t.texShape,u=Po(),h=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),f=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+rOe+`
    `+aOe+`
    `+nOe+`
  `}(u);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,C){var _=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];return _[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return 2 * (resTexRC.x * `+_[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(k,C){var _=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if($i(k,C))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `;var E=Math.ceil(k[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=p,b=v,y=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],S=Math.ceil(g[2]/2),w=S*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+w+`;
      index -= b * `+w+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(k,C){for(var _=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],E=Math.ceil(k[k.length-1]/2),T=E*Math.ceil(k[k.length-2]/2),I=T,F="",A="b, r, c",P=2;P<k.length-1;P++)I*=k[k.length-P-1],F=`
      int b`+P+" = index / "+I+`;
      index -= b`+P+" * "+I+`;
    `+F,A="b"+P+", "+A;return`
    ivec`+k.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+F+`

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+k.length+"("+A+`);
    }
  `}(p,v)}var g,b,y,S,w}(t.logicalShape,d),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,S){return $i(y,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=v,b=ux(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,S){var w=ux(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+w+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,S){var w=ux(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+w+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,S){var w=ux(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+w+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var g,b}(t.logicalShape,d),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),a&&(f+=sOe),[f,h,o,l,i,c,r].join(`
`)}function o0(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(r){var a=r.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1);if(r.shapeInfo.isUniform)return"float "+s+"() {return "+a+";}";var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(o===1&&l===1)return`
      float `+s+`() {
        return sampleTexture(`+a+`, halfCR);
      }
    `;var c=r.shapeInfo.texShape,d=c[0],u=c[1],h=qp(a);return`
    float `+s+`() {
      vec2 uv = uvFromFlat(`+d+", "+u+", "+h+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 1:return function(r){var a=r.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1);if(r.shapeInfo.isUniform)return`
      float `+s+`(int index) {
        `+Zv(r)+`
      }
    `;var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(l===1&&o===1)return`
      float `+s+`(int index) {
        return sampleTexture(`+a+`, halfCR);
      }
    `;var c=qp(a);return l===1?`
      float `+s+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `:o===1?`
      float `+s+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+a+`, uv);
      }
    `:`
    float `+s+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+l+", index + "+c+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 2:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=r.shapeInfo.texShape;if(o!=null&&$i(a,o)){var l=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `}var d=Jp(a),u=d.newShape,h=d.keptDims,f=u;if(f.length<a.length){var p=l0(r,f);return`
      `+o0(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+c0(["row","col"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+a[1]+`, 1)));
        `+Zv(r)+`
      }
    `;var v=o[0],g=o[1],b=qp(s);return g===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+a[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+a[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+s+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+a[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+v+", "+g+`, index);
    return sampleTexture(`+s+`, uv);
  }
`}(e);case 3:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[1]*a[2],l=a[2],c=Jp(a),d=c.newShape,u=c.keptDims,h=d;if(h.length<a.length){var f=l0(r,h);return`
        `+o0(f)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+c0(["row","col","depth"],u)+`);
        }
      `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+l+`, 1)));
        `+Zv(r)+`
      }
    `;var p=r.shapeInfo.texShape,v=p[0],g=p[1],b=r.shapeInfo.flatOffset;if(g===o&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+v+`.0);
          return sampleTexture(`+s+`, uv);
        }
      `;if(g===l&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+a[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `;var y=qp(s);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+l+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+g+`, index);
        return sampleTexture(`+s+`, uv);
      }
  `}(e);case 4:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[3],l=a[2]*o,c=a[1]*l,d=Jp(a),u=d.newShape,h=d.keptDims;if(u.length<a.length){var f=l0(r,u);return`
      `+o0(f)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+c0(["row","col","depth","depth2"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+o+`, 1)));
        `+Zv(r)+`
      }
    `;var p=r.shapeInfo.flatOffset,v=r.shapeInfo.texShape,g=v[0],b=v[1];if(b===c&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(b===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+a[1]*a[2]+", "+a[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var y=qp(s);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+b+", index + "+y+`);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 5:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[4],l=a[3]*o,c=a[2]*l,d=a[1]*c,u=Jp(a),h=u.newShape,f=u.keptDims;if(h.length<a.length){var p=l0(r,h);return`
      `+o0(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+c0(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+o+`)) +
          depth3;
        `+Zv(r)+`
      }
    `;var v=r.shapeInfo.flatOffset,g=r.shapeInfo.texShape,b=g[0],y=g[1];if(y===d&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(y===o&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+a[1]*a[2]*a[3]+`,
               `+a[2]*a[3]+", "+a[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var S=qp(s);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+o+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+b+", "+y+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 6:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=Jp(a),l=o.newShape,c=o.keptDims;if(l.length<a.length){var d=l0(r,l);return`
      `+o0(d)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+c0(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var u=a[5],h=a[4]*u,f=a[3]*h,p=a[2]*f,v=a[1]*p;if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+f+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+Zv(r)+`
      }
    `;var g=r.shapeInfo.flatOffset,b=r.shapeInfo.texShape,y=b[0],S=b[1];if(S===v&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+f+", "+h+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(S===u&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+a[1]*a[2]*a[3]*a[4]+`,
               `+a[2]*a[3]*a[4]+`,
               `+a[3]*a[4]+`,
               `+a[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var w=qp(s);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+f+` +
          depth2 * `+h+" + depth3 * "+u+" + depth4 + "+w+`;
      vec2 uv = uvFromFlat(`+y+", "+S+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function NX(e){var t,r,a;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),a=Po(),`
    vec4 `+r+`() {
      return `+a.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(s){var i=s.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),l=s.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=Po();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=c[0],u=c[1],h=Po();if(c!=null&&$i(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+d+`.0);

        return `+h.texture2D+"("+o+`, uv);
      }
    `;var f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+f[0]+", "+f[1]+`, row, col);
      return `+h.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var u=i.slice(1),h=l0(s,u);return`
        `+NX(h)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+c0(["b","row","col"],[1,2])+`);
        }
      `}var f=d[0],p=d[1],v=Math.ceil(i[2]/2),g=v*Math.ceil(i[1]/2),b=Po();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+p+", "+g+", "+v+`, b, row, col);
      return `+b.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(s){for(var i=s.shapeInfo.logicalShape,o=i.length,l=s.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=s.shapeInfo.texShape,u=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],h=u[0],f=u[1],p=Math.ceil(i[o-1]/2),v=p*Math.ceil(i[o-2]/2),g="int b, int row, int col",b="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)g="int b"+y+", "+g,v*=i[o-y-1],b="b"+y+" * "+v+" + "+b;var S=Po();return`
    vec4 `+c+"("+g+`) {
      int index = `+b+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+h+`);
      return `+S.texture2D+"("+l+`, uv);
    }
  `}(e)}}var rOe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aOe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nOe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,sOe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function qp(e){return"offset"+e}function Zv(e){var t=e.name,r=Fr(e.shapeInfo.logicalShape);return r<2?"return "+t+";":`
    for (int i = 0; i < `+r+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Ln(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function l0(e,t){var r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function c0(e,t){return t.map(function(r){return e[r]}).join(", ")}var iOe=function(e,t,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Ge(e.length>2,function(){return"Packed arg"+(r.charAt(0).toUpperCase()+r.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],i=Math.ceil(s/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var o,l,c=this.outputShape,d=c.length,u=Ln(d),h=ml("coords",d);if(i===1){var f=Ln(l=d+1);o=`
        `+f+" sourceLocR = "+f+"("+h.join()+`, 0);
        ++`+h[d-1]+`;
        `+f+" sourceLocG = "+f+"("+h.join()+`, 0);
        ++`+h[d-2]+`;
        `+f+" sourceLocA = "+f+"("+h.join()+`, 0);
        --`+h[d-1]+`;
        `+f+" sourceLocB = "+f+"("+h.join()+`, 0);
        --`+h[d-2]+";"}else l=d,o=`
        `+u+` sourceLocR = coords;
        ++`+h[d-1]+`;
        `+u+` sourceLocG = coords;
        ++`+h[d-2]+`;
        `+u+` sourceLocA = coords;
        --`+h[d-1]+`;
        `+u+` sourceLocB = coords;
        --`+h[d-2]+";";var p=["x","y","z","w","u","v"].slice(0,l),v="."+p[l-1],g=p.map(function(T){return"int "+T}),b=ml("sourceLocR",l-1).concat("inIdx.r"),y=ml("sourceLocG",l-1).concat("inIdx.g"),S=ml("sourceLocB",l-1).concat("inIdx.b"),w=ml("sourceLocA",l-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",_=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",E=a?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+h[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+h[d-2]+" < "+(c[d-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+_+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+C+`
          vec4 candidate = `+_+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+k+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},oOe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},lOe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=u-1-e.padInfo.front,v=h-1-e.padInfo.top,g=f-1-e.padInfo.left,b=1/(t*r*a);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+s+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},cOe=function(e,t,r,a,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ia(e,t),Ia(e,r);var o="0.0";a!=null&&(Ia(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="1.0";s!=null&&(Ia(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},dOe=function(e,t,r,a,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ia(e,t),Ia(e,r);var o="vec4(0.0)";a!=null&&(Ia(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="vec4(1.0)";s!=null&&(Ia(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},uOe="return areal * breal - aimag * bimag;",hOe="return areal * bimag + aimag * breal;",C9=function(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ia(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},VD="return a + b;",qD="return a - b;",k9="return a * b;",wX="return (a < 0.) ? b * a : a;",Ss=function(e,t,r){this.variableNames=["A","B"],this.outputShape=Ia(t,r),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},SX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Uh=function(e,t,r,a){a===void 0&&(a=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ia(t,r);var s=this.outputShape.length,i="";if(a)if(s===0||Fr(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Ln(s)+` coords = getOutputCoords();
        `,s===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=ml("coords",s);i+=`
            bool nextRowOutOfBounds =
              (`+o[s-2]+" + 1) >= "+this.outputShape[s-2]+`;
            bool nextColOutOfBounds =
              (`+o[s-1]+" + 1) >= "+this.outputShape[s-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},fOe=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var a=this;return function(s,i){a.minLoc==null&&(a.minLoc=s.getUniformLocationNoThrow(i,"minVal"),a.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(a.minLoc,t),s.gl.uniform1f(a.maxLoc,r)}},e}(),mOe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var a=this;return function(s,i){a.minLoc==null&&(a.minLoc=s.getUniformLocationNoThrow(i,"minVal"),a.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(a.minLoc,t),s.gl.uniform1f(a.maxLoc,r)}},e}(),pOe=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},xOe=function(e){this.outputShape=[],this.outputShape=ng(e,1),this.variableNames=e.map(function(l,c){return"T"+c});var t=new Array(e.length-1);t[0]=e[0][1];for(var r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];var a=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(r=1;r<t.length;r++){var s=t[r-1];a.push("else if (yC < "+t[r]+") setOutput(getT"+r+"(yR, yC-"+s+"));")}var i=t.length,o=t[t.length-1];a.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+a.join(`
        `)+`
      }
    `},vOe=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ng(e,t);var r=this.outputShape,a=r.length,s=Ln(a),i=ml("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(function(b,y){return"T"+y});var l=new Array(e.length-1);l[0]=e[0][t];for(var c=1;c<l.length;c++)l[c]=l[c-1]+e[c][t];var d=o[t],u=o.slice(-2),h=o.join(),f="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+u.join()+`));
        }`;for(c=1;c<l.length;c++){var p=l[c-1];f+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+IN(o,d,p)+`),
            vec2(`+IN(u,d,p)+`));
        }`}var v=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT`+v+"("+IN(o,d,g)+`),
          vec2(`+IN(u,d,g)+"));",this.userCode=`
      float getValue(`+o.map(function(b){return"int "+b})+`) {
        `+f+`
      }

      void main() {
        `+s+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[a-1]+" = "+i[a-1]+` + 1;
        if (`+i[a-1]+" < "+r[a-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[a-2]+" = "+i[a-2]+` + 1;
        if (`+i[a-2]+" < "+r[a-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[a-1]+" = "+i[a-1]+` - 1;
        if (`+i[a-2]+" < "+r[a-2]+` &&
            `+i[a-1]+" < "+r[a-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function IN(e,t,r){var a=e.indexOf(t);return e.map(function(s,i){return i===a?s+" - "+r:s}).join()}var gOe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+a+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},bOe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},yOe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+s+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+r+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+a+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},jOe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+s+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+r+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+r+` - 1 - wR;

            for (int wC = 0; wC < `+a+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+a+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},NOe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+a+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},wOe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},E9=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,y=v?3:1,S="",w="";r&&(S=a?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+o+", "+l+`);
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+k+`
        `+w+`
        setOutput(result);
      }
    `},SOe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+r+", "+a+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},_9=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,g="",b="";r&&(g=a?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,b="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+s+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+b+`
        setOutput(result);
      }
    `},D9=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,v=p,g="int xR; int xC; int xCOffset;",b=0;b<f;b++)for(var y=0;y<p;y++)g+=`
          vec4 xTexelR`+b+"C"+2*y+` = vec4(0.);
          vec4 wR`+b+"C"+y+` = vec4(0.);
          vec4 xR`+b+"C"+y+" = vec4(0.);";for(b=0;b<f;b++)for(var S=0;S<v;S++){if(g+=`
          xR = xRCorner + `+b*u+`;
          xC = xCCorner + `+(y=2*S)*h+`;
        `,d===1){if(y<p&&(g+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+y+" = vec4(previous.zw, xTexelR"+b+"C"+y+`.xy);
                } else {
                  xR`+b+"C"+y+" = vec4(0, 0, xTexelR"+b+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+s+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xR`+b+"C"+y+" = xTexelR"+b+"C"+y+`;
              `,y+1<p)){var w=l%2==0?VK(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(g+=`
                  xCOffset = xC + `+l%2+" + "+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+s+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+y+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(y+1)+" = xTexelR"+b+"C"+(y+2)+`;
                `}}else y<p&&(g+=`
              if(xR >= 0 && xR < `+s+`) {
            `,l%2==1?(g+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
              `,y+1<p&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(y+1)+" = vec4(xTexelR"+b+"C"+(y+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".xy, xTexelR"+b+"C"+(y+2)+`.xy);
              `,y+1<p&&(g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
                `)),g+="}");y<p&&(g+=`
            vec4 wTexelR`+b+"C"+y+" = getW("+b+", "+y+`, d1, q);
            wR`+b+"C"+y+" = vec4(wTexelR"+b+"C"+y+".xz, wTexelR"+b+"C"+y+`.xz);
          `,y+1<p&&(g+=`
              vec4 wTexelR`+b+"C"+(y+1)+" = getW("+b+", "+(y+1)+`, d1, q);
              wR`+b+"C"+(y+1)+` =
                vec4(wTexelR`+b+"C"+(y+1)+".xz, wTexelR"+b+"C"+(y+1)+".xz);"))}for(b=0;b<f;b++)for(y=0;y<p;y++)g+="dotProd += xR"+b+"C"+y+" * wR"+b+"C"+y+";";var k="",C="";r&&(k=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`vec4 activation(vec4 x) {
          `+r+`
        }`,C="result = activation(result);");var _=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+k+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+_+`
        `+C+`
        setOutput(result);
      }
    `},COe=function(e,t,r,a,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],l=e[2],c=e[3],d=t[0],u=r[0],h=r[1];this.outputShape=[d,u,h,c];var f=a==="bilinear"?1:0,p=[o-1+".0",l-1+".0"],v=p[0],g=p[1],b=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=b[0],S=b[1],w=b[2],k=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],C=k[0],_=k[1],E=k[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+C+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+_+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+s+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+s+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},kOe=function(e,t,r){this.variableNames=["x"],this.outputShape=e;var a=e.length,s=e[e.length-1],i=r?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(r?"return "+s+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ln(a)+` coords = getOutputCoords();
        int end = `+A9(a,"coords")+`;
        float val = 0.0;
        for (int i = `+s+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+A9(a,"coords")+` = idx;
          val += getX(`+function(o,l){if(o===1)return""+l;if(o===2)return l+".x, "+l+".y";if(o===3)return l+".x, "+l+".y, "+l+".z";if(o===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(a,"coords")+`);
        }
        setOutput(val);
      }
    `};function A9(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var EOe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=e1.DENSE;var t=py(e),r=Po();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ux(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+r.output+` = result;
      }
    `},_Oe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=e1.DENSE;var t=py(e),r=Po();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ux(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+r.output+` = result;
      }
    `},DOe=function(){function e(t,r,a){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=a,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+r+`;
      int offset_h = imod(h, `+r+`);
      int in_w = w / `+r+`;
      int offset_w = imod(w, `+r+`);
      int offset_d = (offset_h * `+r+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),AOe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},TOe=function(e){this.variableNames=["A"],this.outTexUsage=ec.DOWNLOAD;var t=Po();this.outputShape=e,this.userCode=`
      `+jX+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},IOe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ec.DOWNLOAD;var t=Po();this.outputShape=e,this.userCode=`
      `+jX+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},POe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"];var a=Po(),s=t[0],i=t[1];this.outputShape=e;var o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+aP(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
        vec4 values = `+a.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+a.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},OOe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=Po(),s=t[0],i=t[1];this.outputShape=e;var o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var u=2*c+d;o+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+e[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
              values = `+a.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+aP(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+a.output+" = "+l+`;
      }
    `},MOe="return real * expR - imag * expI;",ROe="return real * expI + imag * expR;",T9=function(e,t,r){this.variableNames=["real","imag"];var a=t[1];this.outputShape=t;var s=r?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=r?a+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+s+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+a+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+a+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},FOe=function(){function e(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(a,s){r.valueLoc==null&&(r.valueLoc=a.getUniformLocationNoThrow(s,"value")),a.gl.uniform1f(r.valueLoc,t)}},e}(),LOe=function(e,t,r){this.variableNames=["A","indices"];var a=e.slice();a[r]=t,this.outputShape=a,this.rank=a.length;var s=Ln(this.rank),i=function(o,l){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],h=0;h<o.length;h++)h===l?u.push("int(getIndices("+d[h]+"))"):u.push(""+d[h]);return u.join()}(e,r);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},BOe=function(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;var a=Ln(t.length),s=Ln(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+this.strides+`);
         void main() {
          `+s+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function UOe(e,t){var r=Po();return MIe(e,t,r.version+`
    precision highp float;
    `+r.attribute+` vec3 clipSpacePos;
    `+r.attribute+` vec2 uv;
    `+r.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function $Oe(e,t){return UIe(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function VOe(e,t){return $Ie(e,t,new Uint16Array([0,1,2,2,1,3]))}function $1(e,t,r,a,s,i,o){qIe(r,a);var l=VIe(e,t),c=e.TEXTURE_2D;return Br(e,t,function(){return e.bindTexture(c,l)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Br(e,t,function(){return e.texImage2D(c,0,s,r,a,0,i,o,null)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),l}function qOe(e,t,r,a,s){var i=xC(r,a);return $1(e,t,i[0],i[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function zOe(e,t,r,a,s){var i=xC(r,a);return $1(e,t,i[0],i[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function HOe(e,t,r,a,s){var i=xC(r,a);return $1(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function WOe(e,t,r,a,s){var i=U1(r,a);return $1(e,t,i[0],i[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function GOe(e,t,r,a,s){var i=U1(r,a);return $1(e,t,i[0],i[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function YOe(e,t,r,a){return Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),g9(e,t,r,"clipSpacePos",a,3,20,0)&&g9(e,t,r,"uv",a,2,20,12)}function KOe(e,t,r,a,s,i,o){var l,c,d;Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),i instanceof Uint8Array?(l=new Uint8Array(a*s*4),c=e.UNSIGNED_BYTE,d=e.RGBA):(l=new Float32Array(a*s*4),c=e.FLOAT,d=o.internalFormatPackedFloat),l.set(i),Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,d,a,s,0,e.RGBA,c,l)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function XOe(e,t,r,a){Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),a.data instanceof Uint8Array?Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.width,a.height,0,e.RGBA,e.UNSIGNED_BYTE,a.data)}):Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function QOe(e,t,r,a,s){var i=e.createBuffer();Br(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*r*a;return Br(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Br(e,t,function(){return e.readPixels(0,0,a,r,e.RGBA,e.FLOAT,0)}),Br(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function JOe(e,t,r){var a=e,s=new Float32Array(r);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,s),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),s}function ZOe(e,t,r,a,s){var i=xC(r,a),o=i[0],l=i[1],c=new Uint8Array(r*a*4);return Br(e,t,function(){return e.readPixels(0,0,o,l,s.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function eMe(e,t,r,a,s,i,o,l){var c=e,d=new Float32Array(function(u,h){var f=U1(u,h);return f[0]*f[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function tMe(e,t,r,a){var s=new Float32Array(r*a*4);return Br(e,t,function(){return e.readPixels(0,0,a,r,e.RGBA,e.FLOAT,s)}),s}var rMe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var r=Wt().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,AIe(r,t)):this.gl=oh(r);var a="WEBGL_color_buffer_float";if(Wt().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=_N(this.gl,this.debug,"OES_texture_float"),qc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=_N(this.gl,this.debug,"OES_texture_half_float");else if(Wt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(a),qc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=_N(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Wt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(a="EXT_color_buffer_float",qc(this.gl,a))this.colorBufferFloatExtension=this.gl.getExtension(a);else{if(!qc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=$Oe(this.gl,this.debug),this.indexBuffer=VOe(this.gl,this.debug),this.framebuffer=zIe(this.gl,this.debug),this.textureConfig=GI(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Wt().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var r=this.gl;Br(r,this.debug,function(){return r.finish()}),Br(r,this.debug,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),Br(r,this.debug,function(){return r.deleteFramebuffer(t.framebuffer)}),Br(r,this.debug,function(){return r.bindBuffer(r.ARRAY_BUFFER,null)}),Br(r,this.debug,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}),Br(r,this.debug,function(){return r.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,r){return this.throwIfDisposed(),qOe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,r){return this.throwIfDisposed(),zOe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,r){return this.throwIfDisposed(),HOe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,r){this.throwIfDisposed(),XOe(this.gl,this.debug,t,r)},e.prototype.uploadDenseMatrixToTexture=function(t,r,a,s){this.throwIfDisposed(),KOe(this.gl,this.debug,t,r,a,s,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,r){return this.throwIfDisposed(),GOe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,r){return this.throwIfDisposed(),WOe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var r=this;this.throwIfDisposed(),this.outputTexture===t&&(b9(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Br(this.gl,this.debug,function(){return r.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,r,a){var s=this;return this.downloadMatrixDriver(t,function(){return ZOe(s.gl,s.debug,r,a,s.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,r,a,s,i,o){return eMe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,r){return JOe(this.gl,t,r)},e.prototype.createBufferFromTexture=function(t,r,a){this.bindTextureToFrameBuffer(t);var s=QOe(this.gl,this.debug,r,a,this.textureConfig);return this.unbindTextureToFrameBuffer(),s},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var r,a,s=this;if(Wt().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),a=function(){var l=i.clientWaitSync(o,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},r=o}else Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),a=function(){return s.isQueryAvailable(r,Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):a=function(){return!0};return{query:r,isFencePassed:a}},e.prototype.downloadMatrixFromPackedTexture=function(t,r,a){var s=this;return this.downloadMatrixDriver(t,function(){return tMe(s.gl,s.debug,r,a)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var r=this.gl,a=RIe(r,this.debug,t),s=UOe(r,this.debug),i=LIe(r,this.debug);return Br(r,this.debug,function(){return r.attachShader(i,s)}),Br(r,this.debug,function(){return r.attachShader(i,a)}),BIe(r,this.debug,i),this.debug&&LD(r,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=YOe(r,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var r=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Br(this.gl,this.debug,function(){return r.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var r=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&LD(this.gl,this.debug,this.program),Br(this.gl,this.debug,function(){return r.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,r,a){return a===void 0&&(a=!0),this.throwIfDisposed(),a?WIe(this.gl,this.debug,t,r):GIe(this.gl,t,r)},e.prototype.getAttributeLocation=function(t,r){var a=this;return this.throwIfDisposed(),Br(this.gl,this.debug,function(){return a.gl.getAttribLocation(t,r)})},e.prototype.getUniformLocationNoThrow=function(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)},e.prototype.setInputMatrixTexture=function(t,r,a){this.throwIfDisposed(),this.throwIfNoProgram(),YIe(this.gl,this.debug,this.program,t,r,a)},e.prototype.setOutputMatrixTexture=function(t,r,a){this.setOutputMatrixTextureDriver(t,a,r)},e.prototype.setOutputPackedMatrixTexture=function(t,r,a){this.throwIfDisposed();var s=U1(r,a),i=s[0],o=s[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,r,a,s){this.setOutputMatrixWriteRegionDriver(a,t,s,r)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,r,a,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&LD(this.gl,this.debug,this.program),DN(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Br(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Br(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=_N(this.gl,this.debug,Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,a),a}var s=this.getQueryTimerExtensionWebGL1(),i=s.createQueryEXT();return s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var r=this.gl,a=this.getQueryTimerExtensionWebGL2();r.endQuery(a.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(a){switch(a.label){case 0:return[4,h9(function(){return r.disposed||r.isQueryAvailable(t,Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return a.sent(),[2,this.getQueryTime(t,Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,r){if(r===0)return null;if(r===2){var a=this.gl;return a.getQueryParameter(t,a.QUERY_RESULT)/1e6}var s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,r){if(r===0)return!0;if(r===2){var a=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=a.getQueryParameter(t,a.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(s=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var r=this;return new Promise(function(a){r.addItemToPoll(function(){return t.isFencePassed()},function(){return a()})})},e.prototype.pollItems=function(){for(var t=function(a){for(var s=0;s<a.length&&a[s]();++s);return s-1}(this.itemsToPoll.map(function(a){return a.isDoneFn})),r=0;r<=t;++r)(0,this.itemsToPoll[r].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,r){var a=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||h9(function(){return a.pollItems(),a.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),BD(this.gl,this.debug,t,this.framebuffer),this.debug&&DN(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(BD(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&DN(this.gl)):b9(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,r){this.bindTextureToFrameBuffer(t);var a=r();return this.unbindTextureToFrameBuffer(),a},e.prototype.setOutputMatrixTextureDriver=function(t,r,a){this.throwIfDisposed();var s=this.gl;BD(s,this.debug,t,this.framebuffer),this.debug&&DN(s),this.outputTexture=t,Br(s,this.debug,function(){return s.viewport(0,0,r,a)}),Br(s,this.debug,function(){return s.scissor(0,0,r,a)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,r,a,s){var i=this;this.throwIfDisposed(),Br(this.gl,this.debug,function(){return i.gl.scissor(t,r,a,s)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function I9(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(r,a){var s=r.logicalShape,i=t[a],o=i.shape;if(!$i(s,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+s+" and "+o+" must match");if(!r.isUniform||!i.isUniform){var l=r.texShape,c=i.isUniform?null:i.texData.texShape;if(!$i(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var aMe=function(e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var a=r.filterWidth,s=r.inChannels,i=r.strideWidth,o=r.strideHeight,l=r.padInfo,c=r.outWidth,d=r.dilationWidth,u=r.dilationHeight,h=r.dataFormat,f=l.left,p=l.top,v=s*a,g=Po(),b=h==="channelsLast",y=b?0:1,S=b?1:2,w="",k=0;k<=1;k++)for(var C=0;C<=1;C++)w+=`
          blockIndex = rc.y + `+C+`;
          pos = rc.x + `+k+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+f+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+v+".) / "+s+`.));

              if(d1 < `+t[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+s+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*k+C)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*k+C)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+w+`

        `+g.output+` = result;
      }
    `},nMe=function(e,t,r,a,s){this.variableNames=["x"],this.outputShape=[];var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+a+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},sMe=function(e,t,r,a,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=a,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+a+") * norm + float("+r+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+a+`)
                * float(`+s+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+s+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},iMe=function(e,t,r,a,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+a+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},oMe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
          wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},lMe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=d-1-e.padInfo.left,p=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+h+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+r+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},zD=function(e,t,r,a,s,i,o){r===void 0&&(r=!1),a===void 0&&(a=!1),s===void 0&&(s=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",u=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+f[0]+`);
          result += (`+h[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+v+`

        setOutput(result);
      }
    `},cMe=function(){function e(t,r,a){this.variableNames=["probs"],this.outputShape=[t,a],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(r-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(r-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(a,s){r.seedLoc==null&&(r.seedLoc=a.getUniformLocation(s,"seed")),a.gl.uniform1f(r.seedLoc,t)}},e}(),dMe=function(e,t,r,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+a+"), float("+r+`),
                      float(index == coords.y)));
      }
    `},uMe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var r=ml("rc",t),a=Ln(t),s=function(l,c,d){if(l===1)return"rc > "+c[0];for(var u="",h=l-2;h<l;h++)u+=d[h]+" >= "+c[h],h<l-1&&(u+="||");return u}(t,e,r),i=function(l,c,d,u){if(l===1)return"";var h=u.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `}(t,e[e.length-1],e[e.length-2],r),o=function(l,c){var d=l.length,u=function(h,f){for(var p=[],v=0;v<=1;v++)for(var g=0;g<=1;g++){for(var b=(v===0?"r":"rp1")+", "+(g===0?"c":"cp1"),y=2;y<h;y++)b=f[f.length-1-y]+","+b;p.push(b)}return p}(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,r);this.userCode=`
        void main() {
          `+a+` rc = getOutputCoords();

          if(`+s+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},hMe=function(e,t,r){this.variableNames=["x"],this.outputShape=t.map(function(c,d){return c[0]+e[d]+c[1]});var a=e.length,s=Ln(a),i=t.map(function(c){return c[0]}).join(","),o=t.map(function(c,d){return c[0]+e[d]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=a!==1?`
      `+s+" start = "+s+"("+i+`);
      `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+r+`));
        } else {
          `+s+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+r+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},fMe=function(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(b,y){return b[0]+e[y]+b[1]});for(var a=e.length,s=Ln(a),i=t.map(function(b){return b[0]}).join(","),o=t.map(function(b,y){return b[0]+e[y]}).join(","),l=ml("rc",a),c=ml("source",a),d=l[a-1]+" < "+this.outputShape[a-1],u=a===1?"source":"vec2("+c.slice(-2).join()+")",h=[s+" rc = outputLoc;",l[a-1]+` += 1;
       if(`+d+`) {
      `,a===1?"":`}
       rc = outputLoc;
       `+l[a-2]+` += 1;
       if(`+l[a-2]+" < "+this.outputShape[a-2]+") {",a===1?"":"  "+l[a-1]+` += 1;
         if(`+d+") {"],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=a===1?2:4;v<g;v++)p+=`
        `+h[v]+`
        if (`+f+`) {
          result[`+v+"] = float("+r+`);
        } else {
          `+s+` source = rc - start;
          result[`+v+"] = getChannel(getX("+c.join()+"), "+u+`);
        }
      `;p+=a===1?"} ":"}}",this.userCode=`
      const `+s+" start = "+s+"("+i+`);
      const `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},HD=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",p="0.0";if(f||(p="-1.0 / 1e-20"),r)this.userCode=`
        const ivec2 strides = ivec2(`+s+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var g=4*Math.floor(a/4),b=a%4,y=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+s+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+h+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},WD=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r)this.userCode=`
        const ivec3 strides =
            ivec3(`+s+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(S="avgValue / count");var w=4*Math.floor(a/4),k=a%4,C=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+w+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+C+`
            }

            int xC = xCCorner + `+w+`;
            if (`+(k===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(k===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(k===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+C+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},mMe=function(e,t){this.variableNames=["x"];var r=e.windowSize,a=e.batchSize,s=e.inSize,i=Math.ceil(s/r);this.outputShape=[a,i];var o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var d=4*Math.floor(r/4),u=r%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(u===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+c+`);
      }
    `},pMe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",a=0;a<4;a++){var s="thisRC = rc;";a%2==1&&(s+="thisRC.z += 1;"),a>1&&(s+="thisRC.y += 1;"),r+=`
        `+s+`
        `+(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+a+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(a>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ux(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+aP(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+r+`

        setOutput(result);
      }
    `},xMe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var a=t.shape,s=a[1],i=a[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],f=d[1]/u[1],p=1/h,v=1/f,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(s-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},vMe=function(e,t,r,a){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},gMe=function(e,t,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(r-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},bMe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var a=t.shape,s=a[1],i=a[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],f=d[1]/u[1],p=1/h,v=1/f,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+s+`) - 1),
                `+r+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+r+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},yMe=function(e,t,r,a){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r],u=a?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},jMe=function(e,t){this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");if(this.outputShape=e,r!==1){var a=e.map(function(i,o){return function(l){return t.indexOf(l)!==-1&&e[l]!==1?e[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(o)}).join(","),s=Ln(r);this.userCode=`
      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},NMe=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=e;var a=ml("rc",r),s=a[r-1]+" + 1 < "+this.outputShape[r-1],i=a[r-2]+" + 1 < "+this.outputShape[r-2],o=Ln(r);function l(c){var d=e.map(function(u,h){return function(f,p){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+p[f]+" - 1":""+p[f]}(h,c)});return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=r===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+s+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(a.slice())+`;
          if(`+s+`){
            result.g = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",l(c)}(a.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[r-2]="("+c[r-2]+" + 1)",l(c)}(a.slice())+`;
            if(`+s+`) {
              result.a = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",c[r-2]="("+c[r-2]+" + 1)",l(c)}(a.slice())+`;
            }
          }
          setOutput(result);
        }
    `},P9=function(e,t,r,a,s,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Ln(s.length),c=Ln(i.length),d="";r===1?d="i":r===2&&(d="i, j");var u="getIndices("+d+")",h="";a===1?h="i":a===2&&(h="i, coords[1]");var f="getUpdates("+h+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+s+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},wMe=function(e,t){this.variableNames=["x","segmentIds"];var r=e.windowSize,a=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[a,o];var l=4*Math.floor(r/4),c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `);var h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+r+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},SMe=function(e,t,r){var a,s;if(this.variableNames=["c","a","b"],this.outputShape=t,r>4)throw Error("Where for rank "+r+" is not yet supported");if(r===1)s="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[],c=0;c<t.length;c++)l.push(""+i[c]),c<e&&o.push(""+i[c]);a=o.join(),s=l.join()}var d=Ln(r);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+a+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+s+`));
        } else {
          setOutput(getB(`+s+`));
        }
      }
    `},CMe=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var r,a=Ln(this.rank),s="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return GD.slice(0,o).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);r=`
        `+a+` sourceLoc;
        `+a+` coords = getOutputCoords();
        `+t.map(function(o,l){return"sourceLoc."+GD[l]+" = start["+l+"] + coords."+GD[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+s+`
      void main() {
        `+r+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(a,s){r.startLoc==null&&(r.startLoc=a.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||a.gl.uniform1iv(r.startLoc,t)}},e}(),GD=["x","y","z","w","u","v"],kMe=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var r=Ln(this.rank),a=ml("coords",this.rank),s=ml("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+s.slice(-2).join()+")",o="getChannel(getSource("+s.join()+"), "+i+")",l=`
      result.x = `+o+`;
      if (++`+a[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+s[this.rank-1]+`;
        result.y = `+o+`;
        --`+s[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+a[this.rank-1]+`;
      if (++`+a[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+s[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+a[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+s[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+r+"("+t.map(function(u,h){return"start["+h+"]"}).join()+");":t.map(function(u,h){return s[h]+" = "+a[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+r+` coords = getOutputCoords();
        `+r+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(a,s){r.startLoc==null&&(r.startLoc=a.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||a.gl.uniform1iv(r.startLoc,t)}},e}(),EMe=function(e,t,r){this.variableNames=["x"],this.outputShape=r;var a=r.length,s=Ln(r.length),i=Ln(r.length),o="";if(a===1)o="coords * strides + begin";else{var l=0;o=r.map(function(c,d){return l++,r.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"}).join(",")}this.userCode=`
      `+s+" begin = "+s+"("+e+`);
      `+s+" strides = "+s+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},_Me=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,r,a){var s,i=O9(r,a),o=M9(t,i,a);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[o].shift();return this.usedTextures[o].push(l),l}return this.numUsedTextures++,this.log(),i===Xl.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Xl.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Xl.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Xl.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Xl.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(s),s},e.prototype.releaseTexture=function(t,r,a,s){if(this.freeTextures!=null){var i=M9(r,O9(a,s),s);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],l=o.indexOf(t);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var r in this.freeTextures)this.freeTextures[r].forEach(function(a){t.gpgpu.deleteMatrixTexture(a)});for(var r in this.usedTextures)this.usedTextures[r].forEach(function(s){t.gpgpu.deleteMatrixTexture(s)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function O9(e,t){if(e===ec.UPLOAD)return Xl.PACKED_2X2_FLOAT32;if(e===ec.RENDER||e==null)return function(r){return Wt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?Xl.PACKED_2X2_FLOAT32:Xl.UNPACKED_FLOAT32:r?Xl.PACKED_2X2_FLOAT16:Xl.UNPACKED_FLOAT16}(t);if(e===ec.DOWNLOAD||e===ec.PIXELS)return Xl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function M9(e,t,r){return e[0]+"_"+e[1]+"_"+t+"_"+r}var DMe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[a]*t[a];this.outputShape=r,this.rank=r.length;var s=Ln(this.rank),i=function(o){var l=o.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],u=0;u<o.length;u++)d.push("imod("+c[u]+", "+o[u]+")");return d.join()}(e);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},AMe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[t[a]];this.outputShape=r,this.rank=r.length;var s=Ln(this.rank),i=function(o){var l=o.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),u=0;u<o.length;u++)d[o[u]]=c[u];return d.join()}(t);this.userCode=`
    void main() {
      `+s+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},TMe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[t[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=Ln(this.rank),i=yX("rc",this.rank),o=new Array(this.rank);for(a=0;a<t.length;a++)o[t[a]]=i[a];var l="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+r[this.rank-1],d="getChannel(getA("+o.join()+"), "+l+")";this.userCode=`
    void main() {
      `+s+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+r[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},nP=1.7580993408473768,sP=1.0507009873554805,ga=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},$d="if (isnan(x)) return x;",IMe="return x;",R9="return abs(x);",CX=$d+`
  return (x < 0.0) ? 0.0 : x;
`,kX=$d+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,EX="return (x >= 0.0) ? x : (exp(x) - 1.0);",PMe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+nP+`;
  float scale = `+sP+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,F9="return -x;",L9="return ceil(x);",B9="return floor(x);",U9="return exp(x);",$9="return exp(x) - 1.0;",OMe=$d+`
  return sin(x);
`,MMe=$d+`
  return cos(x);
`,RMe=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,FMe=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,LMe=$d+`
  return atan(x);
`,BMe=$d+"return log(x + sqrt(x * x + 1.0));",UMe=$d+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,$Me=$d+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,PN="return x;",VMe="return x;",_X=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DX=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AX=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,qb=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},qMe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,r=ml("rc",t),a=Ln(t),s=function(l,c){if(l===1)return"rc";for(var d="",u=0;u<l;u++)d+=c[u],u<l-1&&(d+=",");return d}(t,r),i=r.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+a+` rc = getOutputCoords();
        vec4 packedInput = getA(`+s+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},ON={};function MN(e,t){if(t===void 0&&(t=!1),e==="linear")return t?VMe:IMe;if(e==="relu")return t?_X:CX;if(e==="elu")return t?AX:EX;if(e==="relu6")return t?DX:kX;if(e==="prelu")return t?SX:wX;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var zMe=600,HMe=function(e){function t(r){var a,s=e.call(this)||this;if(s.pendingRead=new WeakMap,s.pendingDisposal=new WeakSet,s.dataRefCount=new WeakMap,s.numBytesInGPU=0,s.uploadWaitMs=0,s.downloadWaitMs=0,s.warnedAboutMemory=!1,s.pendingDeletes=0,s.disposed=!1,!Wt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(r==null){var i=oh(Wt().getNumber("WEBGL_VERSION"));s.binaryCache=((a=Wt().getNumber("WEBGL_VERSION"))in ON||(ON[a]={}),ON[a]),s.gpgpu=new rMe(i),s.canvas=i.canvas,s.gpgpuCreatedLocally=!0}else s.gpgpu=r,s.binaryCache={},s.gpgpuCreatedLocally=!1,s.canvas=r.gl.canvas;return s.textureManager=new _Me(s.gpgpu),s.numMBBeforeWarning=Wt().global.screen==null?1024:Wt().global.screen.height*Wt().global.screen.width*window.devicePixelRatio*zMe/1024/1024,s.texData=new uX(s,ft),s}return Ud(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(r,a,s){if(Wt().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64"&&r!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:a,dtype:s,values:r,usage:ec.UPLOAD}),i},t.prototype.move=function(r,a,s,i){if(Wt().getBool("DEBUG")&&this.checkNumericalProblems(a),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(r,{shape:s,dtype:i,values:a,usage:ec.UPLOAD})},t.prototype.readSync=function(r){var a=this.texData.get(r),s=a.values,i=a.dtype,o=a.complexTensors,l=a.slice,c=a.shape,d=a.isPacked;if(l!=null){var u=void 0;u=d?new qb(c,PN):new ga(c,PN);var h=this.runWebGLProgram(u,[{dataId:r,shape:c,dtype:i}],i),f=this.readSync(h.dataId);return this.disposeData(h.dataId),f}if(s!=null)return this.convertAndCacheOnCPU(r);if(i==="string")return s;var p,v,g=this.activeTimers!=null;return g&&(p=Iu()),i==="complex64"?v=i3(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(r),g&&(this.downloadWaitMs+=Iu()-p),this.convertAndCacheOnCPU(r,v)},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T;return Or(this,function(I){switch(I.label){case 0:if(this.pendingRead.has(r))return a=this.pendingRead.get(r),[2,new Promise(function(F){return a.push(F)})];if(s=this.texData.get(r),i=s.values,o=s.shape,l=s.slice,c=s.dtype,d=s.complexTensors,u=s.isPacked,l!=null)return h=void 0,h=u?new qb(o,PN):new ga(o,PN),f=this.runWebGLProgram(h,[{dataId:r,shape:o,dtype:c}],c),p=this.read(f.dataId),this.disposeData(f.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(r)];if(!Wt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Wt().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,c!=="complex64"&&Wt().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(r),b=this.texData.get(g.dataId),v=(T=this.gpgpu).createBufferFromTexture.apply(T,[b.texture].concat(py(o)))),this.pendingRead.set(r,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:I.sent(),I.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return S=I.sent(),w=S[0],k=S[1],y=i3(w,k),[3,5];case 4:v==null?y=this.getValuesFromTexture(r):(C=Fr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,C)),I.label=5;case 5:return g!=null&&this.disposeData(g.dataId),_=this.convertAndCacheOnCPU(r,y),E=this.pendingRead.get(r),this.pendingRead.delete(r),E.forEach(function(F){return F(_)}),this.pendingDisposal.has(r)&&(this.pendingDisposal.delete(r),this.disposeData(r),this.pendingDeletes--),[2,_]}})})},t.prototype.checkNumericalProblems=function(r){if(r!=null)for(var a=0;a<r.length;a++){var s=r[a];if(!PIe(s))throw Wt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+s+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+s+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(r){var a,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.isPacked,c=Fr(i);if(Wt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(r),u=this.texData.get(d.dataId),h=(a=this.gpgpu).downloadMatrixFromPackedTexture.apply(a,[u.texture].concat(py(i))).subarray(0,c);return this.disposeData(d.dataId),h}var f=Wt().getBool("WEBGL_PACK")&&l===!0,p=f?UD(i):i,v=f?new IOe(p):new TOe(p),g=this.runWebGLProgram(v,[{shape:p,dtype:o,dataId:r}],"float32"),b=this.texData.get(g.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,c);return this.disposeData(g.dataId),y},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d;return Or(this,function(u){switch(u.label){case 0:return a=this.activeTimers,s=[],i=!1,this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,r(),o=rg(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),l=rg(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=a,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return d=u.sent(),c.kernelMs=fIe(d),c.getExtraProfileInfo=function(){return d.map(function(h,f){return{name:l[f],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Iu(),endMs:null}},t.prototype.endTimer=function(r){return Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),r):(r.endMs=Iu(),r)},t.prototype.getQueryTime=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){return Wt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(r)]:[2,(a=r).endMs-a.startMs]})})},t.prototype.disposeData=function(r){if(!this.pendingDisposal.has(r)){if(this.pendingRead.has(r))return this.pendingDisposal.add(r),void this.pendingDeletes++;if(this.texData.has(r)){this.releaseGPUData(r);var a=this.texData.get(r).complexTensors;a!=null&&(a.real.dispose(),a.imag.dispose()),this.texData.delete(r)}}},t.prototype.releaseGPUData=function(r){var a=this.texData.get(r),s=a.texture,i=a.dtype,o=a.texShape,l=a.usage,c=a.isPacked,d=a.slice,u=d&&d.origDataId||r,h=this.dataRefCount.get(u);h>1?this.dataRefCount.set(u,h-1):(this.dataRefCount.delete(u),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,l,c)));var f=this.texData.get(r);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(r){return this.uploadToGPU(r),this.texData.get(r).texture},t.prototype.getDataInfo=function(r){return this.texData.get(r)},t.prototype.getCPUBackend=function(){return Wt().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ft.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(r,a){var s=this;return a===void 0&&(a=128),this.getCPUBackend()!=null&&r.every(function(i){return s.texData.get(i.dataId).texture==null&&i.size<a})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(r,a){var s=this.makeOutput(r.shape,"complex64");return this.texData.get(s.dataId).complexTensors={real:ft.keep(r.clone()),imag:ft.keep(a.clone())},s},t.prototype.real=function(r){return this.texData.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.texData.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,a,s){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.slice(r,a,s);if(Fr(s)===0)return so([],s,r.dtype);var i=this.texData.get(r.dataId).isPacked,o=cX(r.shape,a,s);if(i||!o){var l=Wt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kMe(s):new CMe(s),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[r],null,c)}return this.uploadToGPU(r.dataId),this.shallowSlice(r,a,s)},t.prototype.shallowSlice=function(r,a,s){var i=this.texData.get(r.dataId),o=this.makeOutput(s,r.dtype),l=this.texData.get(o.dataId);Object.assign(l,i),l.shape=s,l.dtype=r.dtype;var c=dX(a,r.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||r.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),o},t.prototype.stridedSlice=function(r,a,s,i){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.stridedSlice(r,a,s,i);var o=JI(a,s,i);if(o.some(function(c){return c===0}))return so([],o);var l=new EMe(a,i,o);return this.compileAndRun(l,[r])},t.prototype.reverse=function(r,a){var s=Wt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new NMe(r.shape,a):new jMe(r.shape,a);return this.compileAndRun(s,[r])},t.prototype.concat=function(r,a){if(r[0].dtype==="complex64"){var s=r.map(function(p){return $c(p)}),i=r.map(function(p){return Mu(p)});return eo(this.concat(s,a),this.concat(i,a))}if(this.shouldExecuteOnCPU(r))return this.cpuBackend.concat(r,a);if(r.length===1)return r[0];if(r.length>Wt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(r.length/2),l=this.concat(r.slice(0,o),a),c=this.concat(r.slice(o),a);return this.concat([l,c],a)}if(Wt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].rank>1){var d=new vOe(r.map(function(p){return p.shape}),a);return this.compileAndRun(d,r)}var u=ng(r.map(function(p){return p.shape}),a),h=r.map(function(p){return p.as2D(-1,Fr(p.shape.slice(a)))}),f=new xOe(h.map(function(p){return p.shape}));return this.compileAndRun(f,h).reshape(u)},t.prototype.neg=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.neg(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,F9,r.dtype);var a=new ga(r.shape,F9);return this.compileAndRun(a,[r])},t.prototype.batchMatMul=function(r,a,s,i){var o=s?r.shape[2]:r.shape[1],l=i?a.shape[1]:a.shape[2],c=s?r.shape[1]:r.shape[2],d=r.shape[0];if((o===1||l===1)&&c>1e3){s&&(r=r.transpose([0,2,1])),i&&(a=a.transpose([0,2,1]));var u=l===1?r:r.as3D(d,c,1),h=l===1?2:1,f=l===1?a.as3D(d,1,c):a;return this.multiply(u,f).sum(h,!0)}var p=ro(r.dtype,a.dtype),v=new zD(r.shape,[d,o,l],s,i);return this.compileAndRun(v,[r,a],p)},t.prototype.fusedBatchMatMul=function(r){var a=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=i?a.shape[2]:a.shape[1],h=o?s.shape[1]:s.shape[2],f=a.shape[0],p=ro(a.dtype,s.dtype),v=l!=null,g=d!=null,b=c?MN(c,!0):null,y=new zD(a.shape,[f,u,h],i,o,v,b,g),S=[a,s];return l&&S.push(l),d&&S.push(d),this.compileAndRun(y,S,p)},t.prototype.multiply=function(r,a){if(r.dtype==="complex64"){var s=this.texData.get(r.dataId),i=this.texData.get(a.dataId),o=new C9(uOe,r.shape,a.shape),l=new C9(hOe,r.shape,a.shape),c=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag),this.makeComplexComponentTensorInfo(a,i.complexTensors.real),this.makeComplexComponentTensorInfo(a,i.complexTensors.imag)],d=this.compileAndRun(o,c),u=this.compileAndRun(l,c),h=this.complex(d,u);return d.dispose(),u.dispose(),h}if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.multiply(r,a);if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,k9,r.dtype);var f=new Ss(k9,r.shape,a.shape);return this.compileAndRun(f,[r,a],r.dtype)},t.prototype.batchNormalization=function(r,a,s,i,o,l){var c=[r,a,s],d=null;l!=null&&(d=l.shape,c.push(l));var u=null;if(o!=null&&(u=o.shape,c.push(o)),Wt().getBool("WEBGL_PACK_NORMALIZATION")){var h=new dOe(r.shape,a.shape,s.shape,d,u,i);return this.compileAndRun(h,c)}var f=new cOe(r.shape,a.shape,s.shape,d,u,i);return this.compileAndRun(f,c)},t.prototype.localResponseNormalization4D=function(r,a,s,i,o){var l=Wt().getBool("WEBGL_PACK_NORMALIZATION")?new iMe(r.shape,a,s,i,o):new nMe(r.shape,a,s,i,o);return this.compileAndRun(l,[r])},t.prototype.LRNGrad=function(r,a,s,i,o,l,c){var d=new sMe(a.shape,i,o,l,c);return this.compileAndRun(d,[a,s,r])},t.prototype.tile=function(r,a){if(r.dtype==="string"){var s=this.readSync(r.dataId).map(function(o){return T2(o)});return gX(ua(r.shape,r.dtype,s),a)}var i=new DMe(r.shape,a);return this.compileAndRun(i,[r])},t.prototype.pad=function(r,a,s){var i=Wt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fMe(r.shape,a,s):new hMe(r.shape,a,s);return this.compileAndRun(i,[r])},t.prototype.transpose=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.transpose(r,a);var s=Wt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TMe(r.shape,a):new AMe(r.shape,a);return this.compileAndRun(s,[r])},t.prototype.gather=function(r,a,s){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.gather(r,a,s);var i=new LOe(r.shape,a.size,s);return this.compileAndRun(i,[r,a])},t.prototype.batchToSpaceND=function(r,a,s){Ge(r.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=a.reduce(function(h,f){return h*f}),o=F2(r.shape,a,i),l=L2(o.length,a.length),c=B2(r.shape,a,i),d=sX(s,a.length),u=iX(c,s,a.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,a,s){Ge(r.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=a.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+a.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=F2(c.shape,a,i,!1),u=L2(d.length,a.length,!1),h=B2(c.shape,a,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.reduce=function(r,a,s){var i=r.shape[0],o=r.shape[1],l=$D(o),c=new mMe({windowSize:l,inSize:o,batchSize:i},a),d=this.compileAndRun(c,[r],s);return d.shape[1]===1?d:this.reduce(d,a,s)},t.prototype.argReduce=function(r,a,s){s===void 0&&(s=null);var i=r.shape[0],o=r.shape[1];s!=null&&(i=s.shape[0],o=s.shape[1]);var l=$D(o),c=new eOe({windowSize:l,inSize:o,batchSize:i},a,s==null),d=[r];s!=null&&d.push(s);var u=this.compileAndRun(c,d,"int32");return u.shape[1]===1?u:this.argReduce(r,a,u)},t.prototype.argReducePacked=function(r,a,s){s===void 0&&(s=null);var i=s!=null?s.shape:r.shape,o=$D(i[i.length-1]),l=new iOe(i,o,a,s==null),c=s==null?[r]:[r,s],d=this.compileAndRun(l,c,"int32");return d.rank===r.rank?this.argReducePacked(r,a,d):d},t.prototype.sum=function(r,a){Wl("sum",a,r.rank);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o),c=PD(r.dtype);return this.reduce(l,"sum",c).reshape(i)},t.prototype.prod=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.prod(r,a);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o),c=PD(r.dtype);return this.reduce(l,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(r,a,s){var i=0,o=lh([i],r.rank),l=r;o!=null&&(l=r.transpose(o),i=ch(1,r.rank)[0]);var c=function(p,v,g){for(var b=[],y=p.length,S=0;S<y;S++)S!==v?b.push(p[S]):b.push(g);return b}(l.shape,i,s),d=Fr([l.shape[i]]),u=l.as2D(-1,d),h=PD(r.dtype),f=this.segOpCompute(u,"unsortedSegmentSum",a,h,s).reshape(c);return o!=null&&(f=f.transpose(YI(o))),f},t.prototype.segOpCompute=function(r,a,s,i,o){var l=r.shape[0],c=r.shape[1],d=function(f,p){var v,g=!1;for(f<=lX?(v=f,g=!0):v=QA(f,Math.floor(Math.sqrt(f)));!g;)v>p||v===f?g=!0:v=QA(f,v+1);return v}(c,o),u=new wMe({windowSize:d,inSize:c,batchSize:l,numSegments:o}),h=this.compileAndRun(u,[r,s],i);return h.shape[1]===o?h:(s=R2(0,o).tile([c/d]),this.segOpCompute(h,a,s,i,o))},t.prototype.argMinMaxReduce=function(r,a,s){var i=[a];if(Wl("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,r.rank),!Wt().getBool("WEBGL_PACK_REDUCE")||r.rank<=2){var o=Co(r.shape,i),l=o[0],c=Fr(o[1]),d=r.as2D(-1,c);return this.argReduce(d,s).reshape(l)}return this.argReducePacked(r,s)},t.prototype.argMin=function(r,a){return this.argMinMaxReduce(r,a,"min")},t.prototype.argMax=function(r,a){return this.argMinMaxReduce(r,a,"max")},t.prototype.cumsum=function(r,a,s,i){if(a!==r.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(r.rank-1)+" but got axis="+a);var o=new kOe(r.shape,s,i);return this.compileAndRun(o,[r])},t.prototype.equal=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(equal(a, b));
`,"bool");var s=new Ss("return float(a == b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.notEqual=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(notEqual(a, b));
`,"bool");var s=new Ss("return float(a != b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.less=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.less(r,a);if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(lessThan(a, b));
`,"bool");var s=new Ss("return float(a < b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.lessEqual=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(lessThanEqual(a, b));
`,"bool");var s=new Ss("return float(a <= b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.greater=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.greater(r,a);if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(greaterThan(a, b));
`,"bool");var s=new Ss("return float(a > b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.greaterEqual=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var s=new Ss("return float(a >= b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.logicalNot=function(r){var a=new ga(r.shape,"return float(!(x >= 1.0));");return this.compileAndRun(a,[r])},t.prototype.logicalAnd=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var s=new Ss("return float(a >= 1.0 && b >= 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.logicalOr=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var s=new Ss("return float(a >= 1.0 || b >= 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.select=function(r,a,s){var i=new SMe(r.rank,a.shape,a.rank);return this.compileAndRun(i,[r,a,s],ro(a.dtype,s.dtype))},t.prototype.where=function(r){O2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var a=r.dataSync();return rP(r.shape,a)},t.prototype.topk=function(r,a,s){return bX(r.dataSync(),r.shape,r.dtype,a)},t.prototype.min=function(r,a){Wl("min",a,r.rank);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"min",l.dtype).reshape(i)},t.prototype.minimum=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.minimum(r,a);var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ss(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.mod=function(r,a){var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ss(`if (b == 0.0) return NAN;
  return mod(a, b);`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.max=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.max(r,a);Wl("max",a,r.rank);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"max",l.dtype).reshape(i)},t.prototype.maximum=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.maximum(r,a);var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ss(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.all=function(r,a){Wl("all",a,r.rank);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"all",l.dtype).reshape(i)},t.prototype.any=function(r,a){Wl("any",a,r.rank);var s=Co(r.shape,a),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"any",l.dtype).reshape(i)},t.prototype.realDivide=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var s=new Ss(`
if (a == b) {
  return 1.0;
};
return a / b;`,r.shape,a.shape);return this.compileAndRun(s,[r,a],"float32")},t.prototype.floorDiv=function(r,a){if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var s=new Ss(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,r.shape,a.shape);return this.compileAndRun(s,[r,a],"int32")},t.prototype.add=function(r,a){if(r.dtype==="complex64"&&a.dtype==="complex64")return this.complexSeparableBinaryOp(r,a,VD);if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.add(r,a);var s=ro(r.dtype,a.dtype);if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,VD,s);var i=new Ss(VD,r.shape,a.shape);return this.compileAndRun(i,[r,a],s)},t.prototype.packedUnaryOp=function(r,a,s){var i=new qb(r.shape,a);return this.compileAndRun(i,[r],s)},t.prototype.packedBinaryOp=function(r,a,s,i,o){o===void 0&&(o=!1);var l=new Uh(s,r.shape,a.shape,o);return this.compileAndRun(l,[r,a],i)},t.prototype.complexSeparableBinaryOp=function(r,a,s){var i=this,o=this.texData.get(r.dataId),l=this.texData.get(a.dataId),c=[[o.complexTensors.real,l.complexTensors.real],[o.complexTensors.imag,l.complexTensors.imag]].map(function(f){var p=f[0],v=f[1],g=i.makeComplexComponentTensorInfo(r,p),b=i.makeComplexComponentTensorInfo(a,v),y=new Ss(s,r.shape,a.shape);return i.compileAndRun(y,[g,b],ro(p.dtype,v.dtype))}),d=c[0],u=c[1],h=this.complex(d,u);return d.dispose(),u.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(r,a){return{dataId:a.dataId,dtype:a.dtype,shape:r.shape}},t.prototype.addN=function(r){if(r.length===1)return r[0];if(r.length>Wt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(r.length/2),s=this.addN(r.slice(0,a)),i=this.addN(r.slice(a));return this.addN([s,i])}var o=r.map(function(d){return d.dtype}).reduce(function(d,u){return ro(d,u)}),l=r.map(function(d){return d.shape}),c=Wt().getBool("WEBGL_PACK")?new ZPe(r[0].shape,l):new JPe(r[0].shape,l);return this.compileAndRun(c,r,o)},t.prototype.subtract=function(r,a){if(r.dtype==="complex64"&&a.dtype==="complex64")return this.complexSeparableBinaryOp(r,a,qD);if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.subtract(r,a);var s=ro(r.dtype,a.dtype);if(Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,qD,r.dtype);var i=new Ss(qD,r.shape,a.shape);return this.compileAndRun(i,[r,a],s)},t.prototype.pow=function(r,a){var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ss(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,r.shape,a.shape),i=ro(r.dtype,a.dtype);return this.compileAndRun(s,[r,a],i)},t.prototype.ceil=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.ceil(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,L9,r.dtype);var a=new ga(r.shape,L9);return this.compileAndRun(a,[r])},t.prototype.floor=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.floor(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,B9,r.dtype);var a=new ga(r.shape,B9);return this.compileAndRun(a,[r])},t.prototype.sign=function(r){var a=new ga(r.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(a,[r])},t.prototype.isNaN=function(r){var a=new ga(r.shape,"return float(isnan(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.isInf=function(r){var a=new ga(r.shape,"return float(isinf(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.isFinite=function(r){var a=new ga(r.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.round=function(r){var a=new ga(r.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(a,[r])},t.prototype.exp=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.exp(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,U9,r.dtype);var a=new ga(r.shape,U9);return this.compileAndRun(a,[r])},t.prototype.expm1=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.expm1(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,$9,r.dtype);var a=new ga(r.shape,$9);return this.compileAndRun(a,[r])},t.prototype.softmax=function(r,a){var s=Si([a],r.shape),i=this.max(r,s),o=wl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.log=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.log(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,r.dtype);var a=new ga(r.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(a,[r])},t.prototype.log1p=function(r){var a=new ga(r.shape,"return log(1.0 + x);");return this.compileAndRun(a,[r])},t.prototype.sqrt=function(r){var a=new ga(r.shape,"return sqrt(x);");return this.compileAndRun(a,[r])},t.prototype.rsqrt=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.rsqrt(r);var a=new ga(r.shape,"return inversesqrt(x);");return this.compileAndRun(a,[r])},t.prototype.reciprocal=function(r){var a=new ga(r.shape,"return 1.0 / x;");return this.compileAndRun(a,[r])},t.prototype.relu=function(r){var a;return a=Wt().getBool("WEBGL_PACK")?new qb(r.shape,_X):new ga(r.shape,CX),this.compileAndRun(a,[r])},t.prototype.relu6=function(r){var a;return a=Wt().getBool("WEBGL_PACK")?new qb(r.shape,DX):new ga(r.shape,kX),this.compileAndRun(a,[r])},t.prototype.prelu=function(r,a){var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(SX,r.shape,a.shape):new Ss(wX,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.elu=function(r){if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,AX,r.dtype);var a=new ga(r.shape,EX);return this.compileAndRun(a,[r])},t.prototype.eluDer=function(r,a){var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,a.shape):new Ss("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.selu=function(r){var a=new ga(r.shape,PMe);return this.compileAndRun(a,[r])},t.prototype.int=function(r){var a=new ga(r.shape,"return float(int(x));");return this.compileAndRun(a,[r],"int32")},t.prototype.clip=function(r,a,s){var i,o=(i=Wt().getBool("WEBGL_PACK_CLIP")?new mOe(r.shape):new fOe(r.shape)).getCustomSetupFunc(a,s);return this.compileAndRun(i,[r],null,o)},t.prototype.abs=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.abs(r);if(Wt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,R9,r.dtype);var a=new ga(r.shape,R9);return this.compileAndRun(a,[r])},t.prototype.complexAbs=function(r){var a=this.texData.get(r.dataId),s=new pOe(r.shape),i=[this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)];return this.compileAndRun(s,i)},t.prototype.sigmoid=function(r){var a=new ga(r.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(a,[r])},t.prototype.softplus=function(r){var a=new ga(r.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(a,[r])},t.prototype.sin=function(r){var a=new ga(r.shape,OMe);return this.compileAndRun(a,[r])},t.prototype.cos=function(r){var a=new ga(r.shape,MMe);return this.compileAndRun(a,[r])},t.prototype.tan=function(r){var a=new ga(r.shape,"return tan(x);");return this.compileAndRun(a,[r])},t.prototype.asin=function(r){var a=new ga(r.shape,RMe);return this.compileAndRun(a,[r])},t.prototype.acos=function(r){var a=new ga(r.shape,FMe);return this.compileAndRun(a,[r])},t.prototype.atan=function(r){var a=new ga(r.shape,LMe);return this.compileAndRun(a,[r])},t.prototype.atan2=function(r,a){var s=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ss(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.sinh=function(r){var a=new ga(r.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(a,[r])},t.prototype.cosh=function(r){var a=new ga(r.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(a,[r])},t.prototype.tanh=function(r){var a=new ga(r.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(a,[r])},t.prototype.asinh=function(r){var a=new ga(r.shape,BMe);return this.compileAndRun(a,[r])},t.prototype.acosh=function(r){var a=new ga(r.shape,UMe);return this.compileAndRun(a,[r])},t.prototype.atanh=function(r){var a=new ga(r.shape,$Me);return this.compileAndRun(a,[r])},t.prototype.erf=function(r){var a=new ga(r.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(a,[r])},t.prototype.step=function(r,a){var s=new ga(r.shape,function(i){return i===void 0&&(i=0),$d+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(a));return this.compileAndRun(s,[r])},t.prototype.conv2dByMatMul=function(r,a,s,i,o,l){var c=r.shape,d=this.texData.get(r.dataId),u=s.inChannels,h=c[0]*c[1]*c[2],f=s.outChannels,p=s.dataFormat==="channelsLast",v=(h===1||f===1)&&u>1e3,g=c[2]%2!=0&&!!d.isPacked;if(v||!Wt().getBool("WEBGL_LAZILY_UNPACK")||!Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var b=p?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],y=this.reshape(r,[1,b,s.inChannels]),S=this.reshape(a,[1,s.inChannels,s.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:S,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),s.outShape)}var w=p?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),k={dataId:r.dataId,shape:[1,w,s.inChannels],dtype:r.dtype},C=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,Ge(TN(d.shape,k.shape),function(){return"packed reshape "+d.shape+" to "+k.shape+" isn't free"});var _=this.reshape(a,[1,s.inChannels,s.outChannels]),E=this.fusedBatchMatMul({a:k,b:_,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),T=this.texData.get(E.dataId);return Ge(T.isPacked,function(){return"batchMatMul result is expected to be packed"}),d.shape=C,T.shape=s.outShape,ft.makeTensorFromDataId(E.dataId,s.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(r,a,s,i,o,l){var c=s.filterWidth,d=s.filterHeight,u=s.inChannels,h=s.outWidth,f=s.outHeight,p=s.dataFormat==="channelsLast",v=c*d*u,g=f*h,b=[v,g],y=r.squeeze([0]),S=a.reshape([1,v,-1]),w=new aMe(b,y.shape,s),k=this.compileAndRun(w,[y]).reshape([1,b[0],b[1]]),C=i!=null,_=l!=null,E=o?MN(o,!0):null,T=new zD(k.shape,[1,g,s.outChannels],!0,!1,C,E,_),I=[k,S];i&&I.push(i),_&&I.push(l);var F=this.compileAndRun(T,I);return p?F.reshape([1,f,h,s.outChannels]):F.reshape([1,s.outChannels,f,h])},t.prototype.fusedConv2d=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(a,s,i,o,l,c);if(Wt().getBool("WEBGL_CONV_IM2COL")&&a.shape[0]===1)return this.conv2dWithIm2Row(a,s,i,o,l,c);var d=o!=null,u=c!=null,h=l?MN(l,!1):null,f=new E9(i,d,h,u),p=[a,s];return o&&p.push(o),c&&p.push(c),this.compileAndRun(f,p)},t.prototype.conv2d=function(r,a,s){if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,s);if(Wt().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,s);var i=new E9(s);return this.compileAndRun(i,[r,a])},t.prototype.conv2dDerInput=function(r,a,s){var i=new bOe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv2dDerFilter=function(r,a,s){var i=new gOe(s);return this.compileAndRun(i,[r,a])},t.prototype.fusedDepthwiseConv2D=function(r){var a,s=r.input,i=r.filter,o=r.convInfo,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=Wt().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,h=c?MN(c,u):null,f=[s,i],p=l!=null,v=d!=null;return p&&f.push(l),v&&f.push(d),u?(a=new D9(o,p,h,v),this.compileAndRun(a,f)):(a=new _9(o,p,h,v),this.compileAndRun(a,f))},t.prototype.depthwiseConv2D=function(r,a,s){var i;return Wt().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1?(i=new D9(s),this.compileAndRun(i,[r,a])):(i=new _9(s),this.compileAndRun(i,[r,a]))},t.prototype.depthwiseConv2DDerInput=function(r,a,s){var i=new wOe(s);return this.compileAndRun(i,[r,a])},t.prototype.depthwiseConv2DDerFilter=function(r,a,s){var i=new NOe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3d=function(r,a,s){var i=new SOe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3dDerInput=function(r,a,s){var i=new jOe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3dDerFilter=function(r,a,s){var i=new yOe(s);return this.compileAndRun(i,[r,a])},t.prototype.maxPool=function(r,a){var s=new HD(a,"max",!1);return this.compileAndRun(s,[r])},t.prototype.avgPool=function(r,a){var s=new HD(a,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPoolBackprop=function(r,a,s,i){var o=new HD(i,"max",!0),l=this.compileAndRun(o,[a]),c=new oMe(i),d=this.compileAndRun(c,[r,l],a.dtype);return l.dispose(),d},t.prototype.avgPoolBackprop=function(r,a,s){var i=new oOe(s);return this.compileAndRun(i,[r],a.dtype)},t.prototype.cast=function(r,a){return mX(r,a,this)},t.prototype.unstack=function(r,a){for(var s=r.shape[a],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==a&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[a]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[a]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.avgPool3d=function(r,a){var s=new WD(a,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.avgPool3dBackprop=function(r,a,s){var i=new lOe(s);return this.compileAndRun(i,[r],a.dtype)},t.prototype.maxPool3d=function(r,a){var s=new WD(a,"max",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPool3dBackprop=function(r,a,s,i){var o=new WD(i,"max",!0),l=this.compileAndRun(o,[a]),c=new lMe(i),d=this.compileAndRun(c,[r,l],a.dtype);return l.dispose(),d},t.prototype.reshape=function(r,a){var s=this.texData.get(r.dataId);if(s.isPacked&&!TN(r.shape,a)&&(s.texture===null||!TN(s.shape,a))){var i=this.packedReshape(r,a);return ft.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return s3(r,a)},t.prototype.resizeBilinear=function(r,a,s,i){var o=Wt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gMe(r.shape,a,s,i):new vMe(r.shape,a,s,i);return this.compileAndRun(o,[r],"float32")},t.prototype.resizeBilinearBackprop=function(r,a,s){var i=new xMe(r,a,s);return this.compileAndRun(i,[r])},t.prototype.resizeNearestNeighbor=function(r,a,s,i){var o=new yMe(r.shape,a,s,i);return this.compileAndRun(o,[r])},t.prototype.resizeNearestNeighborBackprop=function(r,a,s){var i=new bMe(r,a,s);return this.compileAndRun(i,[r])},t.prototype.multinomial=function(r,a,s,i){var o=a?r:Cf(r),l=o.shape[0],c=o.shape[1],d=new cMe(l,c,s),u=d.getCustomSetupFunc(i);return this.compileAndRun(d,[o],"int32",u)},t.prototype.oneHot=function(r,a,s,i){var o=new dMe(r.size,a,s,i);return this.compileAndRun(o,[r])},t.prototype.diag=function(r){var a=new AOe(r.size);return this.compileAndRun(a,[r])},t.prototype.nonMaxSuppression=function(r,a,s,i,o){return O2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),eP(r.dataSync(),a.dataSync(),s,i,o)},t.prototype.cropAndResize=function(r,a,s,i,o,l){var c=new COe(r.shape,a.shape,i,o,l);return this.compileAndRun(c,[r,a,s],"float32")},t.prototype.depthToSpace=function(r,a,s){Ge(a>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+a});var i=r.shape[0],o=s==="NHWC"?r.shape[1]:r.shape[2],l=s==="NHWC"?r.shape[2]:r.shape[3],c=s==="NHWC"?r.shape[3]:r.shape[1],d=o*a,u=l*a,h=c/(a*a),f=new DOe(s==="NHWC"?[i,d,u,h]:[i,h,d,u],a,s);return this.compileAndRun(f,[r])},t.prototype.split=function(r,a,s){return vX(r,a,s)},t.prototype.scatterND=function(r,a,s){var i=U2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=[u/c,c],f=r.reshape([l,o]),p=a.reshape([l,c]);if(u===0)return s3(so([]),s);var v=wr(0),g=new P9(l,o,f.rank,p.rank,d,h);return this.compileAndRun(g,[p,f,v]).reshape(s)},t.prototype.sparseToDense=function(r,a,s,i){var o=U2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.strides,u=o.outputSize,h=new P9(c,l,r.rank,a.rank,d,[u,1]);return this.compileAndRun(h,[a,r,i]).reshape(s)},t.prototype.fft=function(r){return this.fftImpl(r,!1)},t.prototype.ifft=function(r){return this.fftImpl(r,!0)},t.prototype.fftImpl=function(r,a){var s=this.texData.get(r.dataId),i=new T9(MOe,r.shape,a),o=new T9(ROe,r.shape,a),l=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],c=this.compileAndRun(i,l),d=this.compileAndRun(o,l),u=this.complex(c,d).as2D(r.shape[0],r.shape[1]);return c.dispose(),d.dispose(),u},t.prototype.gatherND=function(r,a){var s=a.shape,i=s[s.length-1],o=oX(r,a),l=o[0],c=o[1],d=o[2],u=o[3],h=a.reshape([c,i]),f=r.reshape([r.size/d,d]),p=new BOe(i,u,[c,d]);return this.compileAndRun(p,[f,h]).reshape(l)},t.prototype.fill=function(r,a,s){if((s=s||L1(a))==="string"){var i=A2(s,Fr(r));return i.fill(a),ft.makeTensor(i,r,s,this)}var o=new FOe(r,a),l=o.getCustomSetupFunc(a);return this.compileAndRun(o,[],s,l)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){return this.fill(r.shape,r.dtype==="string"?"":0,r.dtype)},t.prototype.linspace=function(r,a,s){return pX(r,a,s)},t.prototype.makeTensorInfo=function(r,a){var s=this.write(null,r,a);return this.texData.get(s).usage=null,{dataId:s,shape:r,dtype:a}},t.prototype.makeOutput=function(r,a){var s=this.makeTensorInfo(r,a).dataId;return ft.makeTensorFromDataId(s,r,a,this)},t.prototype.unpackTensor=function(r){var a=new qMe(r.shape);return this.runWebGLProgram(a,[r],r.dtype)},t.prototype.packTensor=function(r){var a=new uMe(r.shape);return this.runWebGLProgram(a,[r],r.dtype,null,!0)},t.prototype.packedReshape=function(r,a){var s=[I2(r.shape)].concat(P2(r.shape)),i={dtype:r.dtype,shape:s,dataId:r.dataId},o=[I2(a)].concat(P2(a)),l=new pMe(o,s),c=this.runWebGLProgram(l,[i],r.dtype,null,!0);return{dataId:c.dataId,shape:a,dtype:c.dtype}},t.prototype.decode=function(r){var a,s=this.texData.get(r),i=s.isPacked,o=s.shape,l=s.dtype,c=UD(o);return a=i?new _Oe(c):new EOe(c),{dtype:l,shape:o,dataId:this.runWebGLProgram(a,[{shape:c,dtype:l,dataId:r}],l,null,!0).dataId}},t.prototype.runWebGLProgram=function(r,a,s,i,o){var l=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(r.outputShape,s),d=this.texData.get(c.dataId);if(r.packedOutput&&(d.isPacked=!0),r.outPackingScheme===e1.DENSE){var u=py(r.outputShape);d.texShape=u.map(function(w){return 2*w})}if(r.outTexUsage!=null&&(d.usage=r.outTexUsage),Fr(c.shape)===0)return d.values=Jy(c.dtype,0),c;var h=[],f=a.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var k=l.texData.get(w.dataId);if(k.texture==null){if(!r.packedInputs&&Fr(w.shape)<=Wt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:k.values};r.packedInputs&&(k.isPacked=!0,k.shape=w.shape)}else if(!!k.isPacked!=!!r.packedInputs)w=k.isPacked?l.unpackTensor(w):l.packTensor(w),h.push(w),k=l.texData.get(w.dataId);else if(k.isPacked&&!TN(k.shape,w.shape)){var C=w,_=w.shape;w.shape=k.shape,w=l.packedReshape(w,_),h.push(w),k=l.texData.get(w.dataId),C.shape=_}return l.uploadToGPU(w.dataId),{shape:w.shape,texData:k,isUniform:!1}});this.uploadToGPU(c.dataId);var p,v={shape:c.shape,texData:d,isUniform:!1},g=function(w,k,C){var _="";k.concat(C).forEach(function(I){var F=I.texData!=null&&I.texData.slice!=null&&I.texData.slice.flatOffset>0,A=I.isUniform?"uniform":I.texData.texShape;_+=I.shape+"_"+A+"_"+F});var E=w.userCode,T=w.constructor.name;return T+="_"+_+"_"+E}(r,f,v),b=this.getAndSaveBinary(g,function(){return function(w,k,C,_){var E=k.userCode,T=C.map(function(R,Z){var J={logicalShape:R.shape,texShape:R.isUniform?null:R.texData.texShape,isUniform:R.isUniform,isPacked:!R.isUniform&&R.texData.isPacked,flatOffset:null};return R.texData!=null&&R.texData.slice!=null&&R.texData.slice.flatOffset>0&&(J.flatOffset=R.texData.slice.flatOffset),{name:k.variableNames[Z],shapeInfo:J}}),I=T.map(function(R){return R.shapeInfo}),F={logicalShape:_.shape,texShape:_.texData.texShape,isUniform:!1,isPacked:_.texData.isPacked,flatOffset:null},A=tOe(T,F,E,k.packedInputs),P=w.createProgram(A),q=null,V=w.getUniformLocation(P,"NAN",!1);Wt().getNumber("WEBGL_VERSION")===1&&(q=w.getUniformLocation(P,"INFINITY",!1));for(var Y={},B=0;B<k.variableNames.length;B++){var Q=k.variableNames[B];Y[Q]=w.getUniformLocation(P,Q,!1),Y["offset"+Q]=w.getUniformLocation(P,"offset"+Q,!1)}return{program:k,source:A,webGLProgram:P,uniformLocations:Y,inShapeInfos:I,outShapeInfo:F,infLoc:q,nanLoc:V}}(l.gpgpu,r,f,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(w,k,C,_,E){I9(k.inShapeInfos,C),I9([k.outShapeInfo],[_]);var T=_.texData.texture,I=_.texData.texShape;_.texData.isPacked?w.setOutputPackedMatrixTexture(T,I[0],I[1]):w.setOutputMatrixTexture(T,I[0],I[1]),w.setProgram(k.webGLProgram),Wt().getNumber("WEBGL_VERSION")===1&&k.infLoc!==null&&w.gl.uniform1f(k.infLoc,1/0),k.nanLoc!==null&&w.gl.uniform1f(k.nanLoc,NaN),C.forEach(function(F,A){var P=k.program.variableNames[A],q=k.uniformLocations[P],V=k.uniformLocations["offset"+P];if(q!=null)if(F.isUniform)if(Fr(F.shape)<2)w.gl.uniform1f(q,F.uniformValues[0]);else{var Y=F.uniformValues;Y instanceof Float32Array||(Y=new Float32Array(Y)),w.gl.uniform1fv(q,Y)}else F.texData.slice!=null&&V!=null&&w.gl.uniform1i(V,F.texData.slice.flatOffset),w.setInputMatrixTexture(F.texData.texture,q,A)}),E?.(w,k.webGLProgram),w.executeProgram()}(this.gpgpu,b,f,v,i),h.forEach(function(w){return l.disposeData(w.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:r.constructor.name,query:this.getQueryTime(p)})),!Wt().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&o===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},t.prototype.compileAndRun=function(r,a,s,i,o){o===void 0&&(o=!1),s=s||a[0].dtype;var l=this.runWebGLProgram(r,a,s,i,o);return ft.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},t.prototype.getAndSaveBinary=function(r,a){return r in this.binaryCache||(this.binaryCache[r]=a()),this.binaryCache[r]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var r=this;this.disposed||(Wt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(a){r.gpgpu.deleteProgram(r.binaryCache[a].webGLProgram),delete r.binaryCache[a]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var r=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Dr(function(){if(!Wt().get("WEBGL_RENDER_FLOAT32_ENABLED")){var a=Wt().getBool("DEBUG");Wt().set("DEBUG",!1);var s=r.abs(wr(1e-8)).dataSync()[0];if(Wt().set("DEBUG",a),s>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(r){var a,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.values,c=s.texture,d=s.usage,u=s.isPacked;if(c==null){var h,f=this.activeTimers!=null;f&&(h=Iu());var p=s.texShape;if(p==null&&(p=QIe(i,u),s.texShape=p),l!=null){var v=UD(i),g=void 0,b=p[1],y=p[0],S=l instanceof Uint8Array;u?(b=(a=U1(p[0],p[1]))[0],y=a[1],g=new OOe(v,[y,b],S)):g=new POe(v,[y,b],S);var w=this.makeTensorInfo([y,b],o);this.texData.get(w.dataId).usage=S?ec.PIXELS:ec.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),b,y,l);var k=this.runWebGLProgram(g,[w],o,null,!0),C=this.texData.get(k.dataId);s.texture=C.texture,s.texShape=C.texShape,s.isPacked=C.isPacked,s.usage=C.usage,this.disposeData(w.dataId),this.texData.delete(k.dataId),s.values=null,f&&(this.uploadWaitMs+=Iu()-h)}else{var _=this.acquireTexture(p,d,o,u);s.texture=_}}},t.prototype.convertAndCacheOnCPU=function(r,a){var s=this.texData.get(r),i=s.dtype;return this.releaseGPUData(r),a!=null&&(s.values=function(o,l){if(l==="float32"||l==="complex64")return o;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(o.length):new Uint8Array(o.length),d=0;d<c.length;++d)c[d]=Math.round(o[d]);return c}throw new Error("Unknown dtype "+l)}(a,i)),s.values},t.prototype.acquireTexture=function(r,a,s,i){if(this.numBytesInGPU+=this.computeBytes(r,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(r,a,i)},t.prototype.computeBytes=function(r,a){return r[0]*r[1]*qK(a)},t}(hX);XK()&&ft.registerBackend("webgl",function(){return new HMe},2);var WMe=at({square_:function(e){var t=$e(e,"x","square"),r=[t];return ft.runKernelFunc(function(a,s){return s([t]),a.square(t)},{x:t},null,"Square",{},r,[])}}),r1="SquaredDifference",TX=at({squaredDifference_:function(e,t){var r,a=$e(e,"a","squaredDifference"),s=$e(t,"b","squaredDifference");r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape);var i={a,b:s},o=[a,s];return ft.runKernelFunc(function(l,c){var d=l.squaredDifference(a,s);return c([a,s]),d},i,function(l,c){var d=c[0],u=c[1],h=wr(2);return{a:function(){return l.mul(d.sub(u).mul(h))},b:function(){return l.mul(u.sub(d).mul(h))}}},r1,{},o,[])}}),GMe=at({abs_:function(e){var t=$e(e,"x","abs");return t.dtype==="complex64"?ft.runKernelFunc(function(r){return r.complexAbs(t)},{$x:t}):ft.runKernelFunc(function(r,a){var s=r.abs(t);return a([t]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mul(s.toFloat().step(-1))}}},"Abs")}}),YMe=at({acos_:function(e){var t=$e(e,"x","acos");return ft.runKernelFunc(function(r,a){var s=r.acos(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(wr(1).sub(s.toFloat().square()).sqrt()).neg()}}})}}),KMe=at({acosh_:function(e){var t=$e(e,"x","acosh");return ft.runKernelFunc(function(r,a){var s=r.acosh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(s.toFloat().square().sub(1).sqrt())}}})}}),XMe=at({asin_:function(e){var t=$e(e,"x","asin");return ft.runKernelFunc(function(r,a){var s=r.asin(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(wr(1).sub(s.toFloat().square()).sqrt())}}})}}),QMe=at({asinh_:function(e){var t=$e(e,"x","asinh");return ft.runKernelFunc(function(r,a){var s=r.asinh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(wr(1).add(s.toFloat().square()).sqrt())}}})}}),JMe=at({atan_:function(e){var t=$e(e,"x","atan");return ft.runKernelFunc(function(r,a){var s=r.atan(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.toFloat().square().add(1))}}})}}),ZMe=at({atanh_:function(e){var t=$e(e,"x","atanh");return ft.runKernelFunc(function(r,a){var s=r.atanh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(wr(1).sub(s.toFloat().square()))}}})}}),eRe=at({ceil_:function(e){var t=$e(e,"x","ceil");return ft.runKernelFunc(function(r){return r.ceil(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),iP=at({clipByValue_:function(e,t,r){var a=$e(e,"x","clipByValue");Ge(t<=r,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."});var s=[a],i={min:t,max:r};return ft.runKernelFunc(function(o,l){var c=o.clip(a,t,r);return l([a]),c},{x:a},function(o,l){var c=l[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(r)),Ua(o))}}},"ClipByValue",i,s)}}),tRe=at({cos_:function(e){var t=$e(e,"x","cos"),r=[t];return ft.runKernelFunc(function(a,s){var i=a.cos(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return i.toFloat().sin().neg().mul(a)}}},"Cos",{},r)}}),rRe=at({cosh_:function(e){var t=$e(e,"x","cosh");return ft.runKernelFunc(function(r,a){var s=r.cosh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return s.toFloat().sinh().mulStrict(r)}}})}}),aRe=at({erf_:function(e){var t=$e(e,"x","erf");return Ge(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),ft.runKernelFunc(function(r,a){var s=r.erf(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),o3=at({exp_:function(e){var t=$e(e,"x","exp");return ft.runKernelFunc(function(r,a){var s=r.exp(t);return a([s]),s},{x:t},function(r,a){return{x:function(){return r.mulStrict(a[0])}}},"Exp",{},[],[!0])}}),nRe=at({expm1_:function(e){var t=$e(e,"x","expm1");return ft.runKernelFunc(function(r,a){var s=r.expm1(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.exp())}}})}}),sRe=at({floor_:function(e){var t=$e(e,"x","floor");return ft.runKernelFunc(function(r){return r.floor(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),iRe=at({log_:function(e){var t=$e(e,"x","log"),r=[t];return ft.runKernelFunc(function(a,s){var i=a.log(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return a.div(i.toFloat())}}},"Log",{},r)}}),oRe=at({log1p_:function(e){var t=$e(e,"x","log1p");return ft.runKernelFunc(function(r,a){var s=r.log1p(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.add(1))}}})}}),lRe=at({logSigmoid_:function(e){var t=$e(e,"x","logSigmoid");return ft.runKernelFunc(function(r,a){var s=r.softplus(t.neg()).neg();return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.neg().sigmoid())}}})}}),z2=at({neg_:function(e){var t=$e(e,"x","neg"),r=[t];return ft.runKernelFunc(function(a){return a.neg(t)},{x:t},function(a){return{x:function(){return a.neg()}}},"Neg",{},r)}}),cRe=at({reciprocal_:function(e){var t=$e(e,"x","reciprocal");return ft.runKernelFunc(function(r,a){var s=r.reciprocal(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.square().neg())}}})}}),dRe=at({round_:function(e){var t=$e(e,"x","round");return ft.runKernelFunc(function(r){return r.round(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),IX=at({rsqrt_:function(e){var t=$e(e,"x","rsqrt"),r=[t];return ft.runKernelFunc(function(a,s){var i=a.rsqrt(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return a.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},r)}}),PX=at({sigmoid_:function(e){var t=$e(e,"x","sigmoid");return ft.runKernelFunc(function(r,a){var s=r.sigmoid(t);return a([s]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mul(s.mul(wr(1).sub(s)))}}},"Sigmoid")}}),uRe=at({sign_:function(e){var t=$e(e,"x","sign");return ft.runKernelFunc(function(r){return r.sign(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),hRe=at({isNaN_:function(e){var t=$e(e,"x","isNaN");return ft.runKernelFunc(function(r){return r.isNaN(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),fRe=at({isInf_:function(e){var t=$e(e,"x","isInf");return ft.runKernelFunc(function(r){return r.isInf(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),mRe=at({isFinite_:function(e){var t=$e(e,"x","isFinite");return ft.runKernelFunc(function(r){return r.isFinite(t)},{$x:t},function(r){return{$x:function(){return Ua(r)}}})}}),pRe=at({sin_:function(e){var t=$e(e,"x","sin"),r=[t];return ft.runKernelFunc(function(a,s){var i=a.sin(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return i.toFloat().cos().mul(a)}}},"Sin",{},r)}}),xRe=at({sinh_:function(e){var t=$e(e,"x","sinh");return ft.runKernelFunc(function(r,a){var s=r.sinh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return s.toFloat().cosh().mulStrict(r)}}})}}),vRe=at({softplus_:function(e){var t=$e(e,"x","softplus");return ft.runKernelFunc(function(r,a){var s=r.softplus(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.sigmoid())}}})}}),gRe=at({sqrt_:function(e){var t=$e(e,"x","sqrt");return ft.runKernelFunc(function(r,a){var s=r.sqrt(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.toFloat().sqrt().mul(2))}}})}}),bRe=at({step_:function(e,t){t===void 0&&(t=0);var r=$e(e,"x","step");return ft.runKernelFunc(function(a){return a.step(r,t)},{$x:r},function(a){return{$x:function(){return Ua(a)}}})}}),yRe=at({tan_:function(e){var t=$e(e,"x","tan");return ft.runKernelFunc(function(r,a){var s=r.tan(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.cos().square())}}})}}),jRe=at({tanh_:function(e){var t=$e(e,"x","tanh");return ft.runKernelFunc(function(r,a){var s=r.tanh(t);return a([s]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return wr(1).sub(s.square()).mulStrict(r)}}},"Tanh",{},null,[!0])}});function OX(e,t,r,a,s,i){var o,l,c=$e(e,"x","batchNorm"),d=$e(t,"mean","batchNorm"),u=$e(r,"variance","batchNorm");return s!=null&&(o=$e(s,"scale","batchNorm")),a!=null&&(l=$e(a,"offset","batchNorm")),Ge(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),Ge(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."}),Ge(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&Ge(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),l!=null&&Ge(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),V1(c,d,u,l,o,i)}function MX(e,t,r,a,s,i){var o,l,c=$e(e,"x","batchNorm"),d=$e(t,"mean","batchNorm"),u=$e(r,"variance","batchNorm");return s!=null&&(o=$e(s,"scale","batchNorm")),a!=null&&(l=$e(a,"offset","batchNorm")),Ge(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),Ge(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."}),Ge(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&Ge(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),l!=null&&Ge(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),V1(c,d,u,l,o,i)}function RX(e,t,r,a,s,i){var o,l,c=$e(e,"x","batchNorm"),d=$e(t,"mean","batchNorm"),u=$e(r,"variance","batchNorm");return s!=null&&(o=$e(s,"scale","batchNorm")),a!=null&&(l=$e(a,"offset","batchNorm")),Ge(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),Ge(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."}),Ge(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&Ge(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),l!=null&&Ge(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),V1(c,d,u,l,o,i)}function V1(e,t,r,a,s,i){i==null&&(i=.001);var o,l,c,d=$e(e,"x","batchNorm"),u=$e(t,"mean","batchNorm"),h=$e(r,"variance","batchNorm");s!=null&&(o=$e(s,"scale","batchNorm")),a!=null&&(l=$e(a,"offset","batchNorm")),Ge(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),Ge(l==null||u.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),Ge(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var f=[d,u,h,o];return ft.runKernelFunc(function(p,v){var g=p.batchNormalization(c,RN(u),RN(h),i,RN(o),RN(l));return v([d,u,h,o]),g},{x:d,mean:u,variance:h,scale:o,offset:l},function(p,v){var g=v,b=g[0],y=g[1],S=g[2],w=g[3],k=w??wr(1),C=yi(y.shape,c.shape),_=[];if(y.rank===1){for(var E=0;E<c.shape.length-1;++E)_.push(c.shape[E]);_.push(1)}var T=b.sub(y),I=p.mul(k),F=IX(S.add(wr(i))),A=F.mul(F).mul(F).mul(wr(-.5));return{x:function(){return y.rank===1?p.mul(D0(F.as4D(1,1,1,y.shape[0]),_)).mul(k).reshape(b.shape):p.mul(F).mul(k).reshape(b.shape)},mean:function(){var P=F.mul(wr(-1)).mul(I);return y.rank===1&&(P=P.sum(C)),P.reshape(y.shape)},variance:function(){var P=A.mul(T).mul(I);return y.rank===1&&(P=P.sum(C)),P.reshape(y.shape)},scale:function(){var P=T.mul(F),q=p.mul(P);return y.rank===1&&(q=q.sum(C)),q.reshape(y.shape)},offset:function(){var P=p;return y.rank===1&&(P=P.sum(C)),P.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},f).reshape(d.shape)}function RN(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function bC(){QK("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var NRe=at({batchNormalization2d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),bC(),OX(e,t,r,i,s,a)}}),wRe=at({batchNormalization3d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),bC(),MX(e,t,r,i,s,a)}}),SRe=at({batchNormalization4d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),bC(),RX(e,t,r,i,s,a)}}),CRe=at({batchNormalization_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),bC(),V1(e,t,r,i,s,a)}}),FX=at({batchNorm_:V1}),kRe=at({batchNorm2d_:OX}),ERe=at({batchNorm3d_:MX}),_Re=at({batchNorm4d_:RX}),yC=at({logicalAnd_:function(e,t){var r=$e(e,"a","logicalAnd","bool"),a=$e(t,"b","logicalAnd","bool");return Ia(r.shape,a.shape),ft.runKernelFunc(function(s){return s.logicalAnd(r,a)},{a:r,b:a},null,"LogicalAnd")}}),DRe=at({logicalNot_:function(e){var t=$e(e,"x","logicalNot","bool");return ft.runKernelFunc(function(r){return r.logicalNot(t)},{$x:t})}}),LX=at({logicalOr_:function(e,t){var r=$e(e,"a","logicalOr","bool"),a=$e(t,"b","logicalOr","bool");return Ia(r.shape,a.shape),ft.runKernelFunc(function(s){return s.logicalOr(r,a)},{$a:r,$b:a})}}),ARe=at({logicalXor_:function(e,t){var r=$e(e,"a","logicalXor","bool"),a=$e(t,"b","logicalXor","bool");return Ia(r.shape,a.shape),LX(e,t).logicalAnd(yC(e,t).logicalNot())}}),$x=at({where_:function(e,t,r){var a=$e(t,"a","where"),s=$e(r,"b","where"),i=$e(e,"condition","where","bool");return fn(a.shape,s.shape,"Error in where: "),i.rank===1?Ge(i.shape[0]===a.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):fn(i.shape,s.shape,"Error in where: "),ft.runKernelFunc(function(o,l){var c=o.select(i,a,s);return l([i]),c},{$condition:i,$a:a,$b:s},function(o,l){var c=l[0];return{$condition:function(){return Ua(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),BX=function(e){return Pr(this,void 0,void 0,function(){var t,r,a;return Or(this,function(s){switch(s.label){case 0:return[4,(t=$e(e,"condition","whereAsync","bool")).data()];case 1:return r=s.sent(),a=rP(t.shape,r),e!==t&&t.dispose(),[2,a]}})})},Ea=at({add_:function(e,t){var r,a=$e(e,"a","add"),s=$e(t,"b","add");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o){return o.add(a,s)},{a,b:s},function(o){return{a:function(){var l=o,c=yi(a.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)},b:function(){var l=o,c=yi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Add")}}),TRe=at({addN_:function(e){Ge(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),Ge(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(s,i){return $e(s,"tensors"+i,"addN")}),r=t[0];t.forEach(function(s){if(s.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(s){if(!$i(s.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var a=t;return ft.runKernelFunc(function(s){return s.addN(t)},a,function(s){var i={};return t.forEach(function(o,l){i[l]=function(){return s.clone()}}),i},"AddN")}}),IRe=at({addStrict_:function(e,t){var r=$e(e,"a","addStrict"),a=$e(t,"b","addStrict");return fn(r.shape,a.shape,"Error in addStrict: "),r.add(a)}}),PRe=at({atan2_:function(e,t){var r,a=$e(e,"a","atan2"),s=$e(t,"b","atan2");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o,l){var c=o.atan2(a,s);return l([a,s]),c},{$a:a,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=Ea(c.square(),d.square()),h=o.mul(d.div(u)),f=yi(c.shape,i);return f.length>0&&(h=h.sum(f)),h.reshape(c.shape)},$b:function(){var u=Ea(c.square(),d.square()),h=z2(o.mul(c.div(u))),f=yi(d.shape,i);return f.length>0&&(h=h.sum(f)),h.reshape(d.shape)}}})}}),Cd=at({div_:function(e,t){var r,a=$e(e,"a","div"),s=$e(t,"b","div");if(r=vs(a,s),a=r[0],s=r[1],a.dtype==="int32"&&s.dtype==="int32")return UX(a,s);var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o,l){var c=o.realDivide(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var f=d.square();return u.div(f.toFloat()).neg()}}},"Div")}}),ORe=at({divNoNan_:function(e,t){var r,a=$e(e,"a","div"),s=$e(t,"b","div");a=(r=vs(a,s))[0],s=r[1];var i=Cd(a,s),o=Ua(i),l=s.equal(o);return $x(l,o,i)}}),MRe=at({divStrict_:function(e,t){var r=$e(e,"a","div"),a=$e(t,"b","div");return fn(r.shape,a.shape,"Error in divideStrict: "),r.div(a)}}),UX=at({floorDiv_:function(e,t){var r,a=$e(e,"a","floorDiv"),s=$e(t,"b","floorDiv");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o,l){var c=o.floorDiv(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var f=d.square();return u.div(f.toFloat()).neg()}}},"FloorDiv")}}),oP=at({maximum_:function(e,t){var r,a=$e(e,"a","maximum"),s=$e(t,"b","maximum");return r=vs(a,s),a=r[0],s=r[1],a.dtype==="bool"&&(a=a.toInt(),s=s.toInt()),Ia(a.shape,s.shape),ft.runKernelFunc(function(i,o){var l=i.maximum(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),RRe=at({maximumStrict_:function(e,t){var r=$e(e,"a","maximumStrict"),a=$e(t,"b","maximumStrict");return fn(r.shape,a.shape,"Error in maximumStrict: "),r.maximum(a)}}),$X=at({minimum_:function(e,t){var r,a=$e(e,"a","minimum"),s=$e(t,"b","minimum");return r=vs(a,s),a=r[0],s=r[1],a.dtype==="bool"&&(a=a.toInt(),s=s.toInt()),Ia(a.shape,s.shape),ft.runKernelFunc(function(i,o){var l=i.minimum(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),FRe=at({minimumStrict_:function(e,t){var r=$e(e,"a","minimumStrict"),a=$e(t,"b","minimumStrict");return fn(r.shape,a.shape,"Error in minimumStrict: "),r.minimum(a)}}),LRe=at({mod_:function(e,t){var r,a=$e(e,"a","mod"),s=$e(t,"b","mod");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o,l){var c=o.mod(a,s);return l([a,s]),c},{$a:a,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=yi(c.shape,i);return u.length>0?o.sum(u).reshape(c.shape):o},$b:function(){var u=o.mul(c.div(d).floor().neg()),h=yi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}})}}),BRe=at({modStrict_:function(e,t){var r=$e(e,"a","modStrict"),a=$e(t,"b","modStrict");return fn(r.shape,a.shape,"Error in modStrict: "),r.mod(a)}}),Fo=at({mul_:function(e,t){var r,a=$e(e,"a","mul"),s=$e(t,"b","mul");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o,l){var c=o.multiply(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.mul(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}},"Mul")}}),URe=at({mulStrict_:function(e,t){var r=$e(e,"a","mul"),a=$e(t,"b","mul");return fn(r.shape,a.shape,"Error in multiplyStrict: "),r.mul(a)}}),H2=at({pow_:function(e,t){var r,a=$e(e,"base","pow"),s=$e(t,"exp","pow");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape),o=[a,s];return ft.runKernelFunc(function(l,c){var d=l.pow(a,s);return c([a,s,d]),d},{a,b:s},function(l,c){var d=c[0],u=c[1],h=c[2];return{a:function(){var f=u.toFloat(),p=l.mul(f.mul(d.pow(f.sub(wr(1))))),v=yi(d.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(d.shape)},b:function(){var f=d.greater(0),p=d.log().where(f,Ua(d)),v=l.mul(h.mul(p)),g=yi(u.shape,i);return g.length>0&&(v=v.sum(g)),v.reshape(u.shape)}}},"Pow",{},o,[!0])}}),$Re=at({powStrict_:function(e,t){return fn(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),VRe=at({squaredDifferenceStrict_:function(e,t){var r=$e(e,"a","squaredDifferenceStrict"),a=$e(t,"b","squaredDifferenceStrict");return fn(r.shape,a.shape,"Error in squaredDifferenceStrict: "),r.squaredDifference(a)}}),ji=at({sub_:function(e,t){var r,a=$e(e,"a","sub"),s=$e(t,"b","sub");r=vs(a,s),a=r[0],s=r[1];var i=Ia(a.shape,s.shape);return ft.runKernelFunc(function(o){return o.subtract(a,s)},{a,b:s},function(o){return{a:function(){var l=o,c=yi(a.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)},b:function(){var l=o,c=yi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(s.shape)}}},"Sub")}}),qRe=at({subStrict_:function(e,t){var r=$e(e,"a","subStrict"),a=$e(t,"b","subStrict");return fn(r.shape,a.shape,"Error in subStrict: "),r.sub(a)}}),VX=at({equal_:function(e,t){var r,a=$e(e,"a","equal"),s=$e(t,"b","equal");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i){return i.equal(a,s)},{$a:a,$b:s})}}),zRe=at({equalStrict_:function(e,t){var r=$e(e,"a","equalStrict"),a=$e(t,"b","equalStrict");return fn(r.shape,a.shape,"Error in equalStrict: "),r.equal(a)}}),HRe=at({greater_:function(e,t){var r,a=$e(e,"a","greater"),s=$e(t,"b","greater");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i){return i.greater(a,s)},{a,b:s},null,"Greater")}}),qX=at({greaterEqual_:function(e,t){var r,a=$e(e,"a","greaterEqual"),s=$e(t,"b","greaterEqual");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i,o){var l=i.greaterEqual(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return Ua(l)},b:function(){return Ua(c)}}},"GreaterEqual")}}),WRe=at({greaterEqualStrict_:function(e,t){var r=$e(e,"a","greaterEqualStrict"),a=$e(t,"b","greaterEqualStrict");return fn(r.shape,a.shape,"Error in greaterEqualStrict: "),r.greaterEqual(a)}}),GRe=at({greaterStrict_:function(e,t){var r=$e(e,"a","greaterStrict"),a=$e(t,"b","greaterStrict");return fn(r.shape,a.shape,"Error in greaterStrict: "),r.greater(a)}}),YRe=at({less_:function(e,t){var r,a=$e(e,"a","less"),s=$e(t,"b","less");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i){return i.less(a,s)},{a,b:s},null,"Less")}}),KRe=at({lessEqual_:function(e,t){var r,a=$e(e,"a","lessEqual"),s=$e(t,"b","lessEqual");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i,o){var l=i.lessEqual(a,s);return o([a,s]),l},{a,b:s},null,"LessEqual")}}),XRe=at({lessEqualStrict_:function(e,t){var r=$e(e,"a","lessEqualStrict"),a=$e(t,"b","lessEqualStrict");return fn(r.shape,a.shape,"Error in lessEqualStrict: "),r.lessEqual(a)}}),QRe=at({lessStrict_:function(e,t){var r=$e(e,"a","lessStrict"),a=$e(t,"b","lessStrict");return fn(r.shape,a.shape,"Error in lessStrict: "),r.less(a)}}),JRe=at({notEqual_:function(e,t){var r,a=$e(e,"a","notEqual"),s=$e(t,"b","notEqual");return r=vs(a,s),a=r[0],s=r[1],Ia(a.shape,s.shape),ft.runKernelFunc(function(i){return i.notEqual(a,s)},{a,b:s},null,"NotEqual")}}),ZRe=at({notEqualStrict_:function(e,t){var r=$e(e,"a","notEqualStrict"),a=$e(t,"b","notEqualStrict");return fn(r.shape,a.shape,"Error in notEqualStrict: "),r.notEqual(a)}});function V9(e,t){for(var r=[],a=e;a<t;++a)r.push(a);return r}function q9(e){for(var t=[],r=0;r<e.length;++r)for(var a=0;a<e[r].length;++a)t.push(e[r][a]);return t}var lP=at({gather_:function(e,t,r){r===void 0&&(r=0);var a=$e(e,"x","gather"),s=$e(t,"indices","gather","int32");r=Si(r,a.shape)[0];var i=function(o,l,c){for(var d=o.shape[c],u=[],h=1,f=1,p=0;p<c;p++)u.push(o.shape[p]),h*=o.shape[p];for(p=0;p<l.rank;p++)u.push(l.shape[p]);for(p=c+1;p<o.rank;p++)u.push(o.shape[p]),f*=o.shape[p];return{batchSize:h,sliceSize:f,dimSize:d,outputShape:u}}(a,s,r);return ft.runKernelFunc(function(o,l){var c=o.gather(a,s.flatten(),r);return l([s]),c},{x:a,indices:s},function(o,l){var c=l[0];return{x:function(){var d=a.shape,u=c.size,h=d.slice(0,r),f=h.length,p=d.slice(r,d.length).slice(1),v=p.length,g=V9(0,f),b=V9(f+1,f+1+v),y=q9([h,[u],p]),S=o.reshape(y),w=c.reshape([u]),k=q9([[f],g,b]),C=S.transpose(k),_=zX(C,w,a.shape[r]),E=YI(k);return _=_.transpose(E)},indices:function(){return c}}},"Gather",{axis:r}).reshape(i.outputShape)}}),zX=at({unsortedSegmentSum_:function(e,t,r){var a=$e(e,"x","unsortedSegmentSum"),s=$e(t,"segmentIds","unsortedSegmentSum","int32");return Ge(Gs(r),function(){return"numSegments must be of dtype int"}),ft.runKernelFunc(function(i,o){var l=i.unsortedSegmentSum(a,s,r);return o([s]),l},{$x:a},function(i,o){var l=o[0];return{$x:function(){return function(c,d){for(var u=oP(d,Ua(d)),h=lP(c,u),f=qX(d,wr(0,"int32")),p=h.rank-f.rank,v=0;v<p;++v)f=Bc(f,v+1);f=yC(f,Ig(h.shape,"bool"));var g=Ua(h);return $x(f,h,g)}(i,l)}}})}}),eFe=function(e,t,r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,v,g;return Or(this,function(b){switch(b.label){case 0:for(a=$e(e,"tensor","boolMask"),s=$e(t,"mask","boolMask","bool"),i=r??0,o=s.rank,l=a.shape,Ge(o>0,function(){return"mask cannot be scalar"}),fn(l.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=i;d<i+o;d++)c*=l[d];return u=l.slice(0,i).concat([c],l.slice(i+o)),h=a.reshape(u),f=s.reshape([-1]),[4,BX(f)];case 1:return p=b.sent(),v=p.squeeze([1]),g=lP(h,v,i),e!==a&&a.dispose(),t!==s&&s.dispose(),v.dispose(),h.dispose(),f.dispose(),p.dispose(),[2,g]}})})};function HX(e,t,r,a,s,i,o){i===void 0&&(i="NHWC"),Ge(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var l=e,c=t,d=!1;t.rank===3&&(d=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=[1,e[0],e[1],e[2]]),Ge(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),Ge(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),Ge(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank});var u=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];Ge(u===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+r.shape[2]+"."}),Ge(h===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+r.shape[3]+"."}),o!=null&&Ge(Gs(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var f=ZI(i),p=ov(l,r.shape,a,1,s,o,!1,f),v=ft.runKernelFunc(function(g,b){var y=g.conv2dDerInput(c,r,p);return b([r,c]),y},{dy4D:c,filter:r},function(g,b){var y=b[0],S=b[1];return{dy4D:function(){return ed(g,y,a,s,i,1,o)},filter:function(){return cP(g,S,y.shape,a,s,i,o)}}});return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function YD(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),r=t[0],a=t[1],s=t[2];return r===1&&a===1&&s===1}function WX(e,t,r,a,s){Ge(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,l=!1;t.rank===4&&(l=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],d=o.shape[4];Ge(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),Ge(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),Ge(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+r.rank}),Ge(c===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+r.shape[3]+"."}),Ge(d===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+r.shape[4]+"."});var u=V2(i,r.shape,a,1,s),h=ft.runKernelFunc(function(f){return f.conv3dDerInput(o,r,u)},{dy5D:o});return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var tFe=at({conv1d_:function(e,t,r,a,s,i,o){s===void 0&&(s="NWC"),i===void 0&&(i=1);var l=$e(e,"x","conv1d"),c=$e(t,"filter","conv1d"),d=l,u=!1;l.rank===2&&(u=!0,d=l.as3D(1,l.shape[0],l.shape[1])),Ge(d.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."}),Ge(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&Ge(Gs(a),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}),Ge(d.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),Ge(Sl(r,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+i+"'"}),Ge(s==="NWC",function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),f=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),p=ed(f,h,[1,r],a,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),ed=at({conv2d_:function(e,t,r,a,s,i,o){s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]);var l=$e(e,"x","conv2d"),c=$e(t,"filter","conv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),Ge(d.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."}),Ge(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&Ge(Gs(a),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var h=s==="NHWC"?d.shape[3]:d.shape[1];Ge(h===c.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."}),Ge(Sl(r,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var f=ZI(s),p=ov(d.shape,c.shape,r,i,a,o,!1,f),v=[c,d],g=ft.runKernelFunc(function(b,y){var S=b.conv2d(d,c,p);return y([c,d]),S},{x:d,filter:c},function(b,y){var S=y,w=S[0],k=S[1];return Ge(sg(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return GX(k.shape,b,w,r,a,s)},filter:function(){return cP(k,b,w.shape,r,a,s)}}},"Conv2D",p,v);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),rFe=at({conv3d_:function(e,t,r,a,s,i){s===void 0&&(s="NDHWC"),i===void 0&&(i=[1,1,1]);var o=$e(e,"x","conv3d"),l=$e(t,"filter","conv3d"),c=o,d=!1;o.rank===4&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),Ge(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),Ge(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),Ge(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),Ge(function(f,p){return YD(f)||YD(p)}(r,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),Ge(s==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var u=V2(c.shape,l.shape,r,i,a),h=ft.runKernelFunc(function(f,p){var v=f.conv3d(c,l,u);return p([c,l]),v},{x:c,$filter:l},function(f,p){Ge(YD(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],g=p[1];return{x:function(){return WX(v.shape,f,g,r,a)},$filter:function(){return function(b,y,S,w,k){var C=b;b.rank===4&&(C=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var _=y;_.rank===4&&(_=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),Ge(C.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+C.shape+"."}),Ge(_.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+_.shape+"."}),Ge(S.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."}),Ge(C.shape[4]===S[3],function(){return"Error in conv3dDerFilter: depth of input "+C.shape[4]+") must match input depth in filter ("+S[3]+"."}),Ge(_.shape[4]===S[4],function(){return"Error in conv3dDerFilter: depth of dy ("+_.shape[4]+") must match output depth for filter ("+S[4]+")."});var E=V2(C.shape,S,w,1,k);return ft.runKernelFunc(function(T){return T.conv3dDerFilter(C,_,E)},{x5D:C,dy5D:_})}(v,f,g.shape,r,a)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),cP=at({conv2dDerFilter_:function(e,t,r,a,s,i,o){i===void 0&&(i="NHWC");var l=e;e.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Ge(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),Ge(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),Ge(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1],u=i==="NHWC"?c.shape[3]:c.shape[1];Ge(d===r[2],function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+r[2]+"."}),Ge(u===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+r[3]+")."}),o!=null&&Ge(Gs(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var h=ZI(i),f=ov(l.shape,r,a,1,s,o,!1,h);return ft.runKernelFunc(function(p){return p.conv2dDerFilter(l,c,f)},{x4D:l,dy4D:c})}}),GX=at({conv2dDerInput_:HX}),jC=at({depthwiseConv2d_:function(e,t,r,a,s,i,o){i===void 0&&(i=[1,1]);var l=$e(e,"x","depthwiseConv2d"),c=$e(t,"filter","depthwiseConv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),Ge(d.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."}),Ge(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),Ge(d.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),Ge(Sl(r,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),o!=null&&Ge(Gs(a),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var h=ov(d.shape,c.shape,r,i,a,o,!0),f=[d,c],p=ft.runKernelFunc(function(v,g){var b=v.depthwiseConv2D(d,c,h);return g([d,c]),b},{x:d,filter:c},function(v,g){Ge(sg(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=g[0],y=g[1];return{x:function(){return YX(b.shape,v,y,h)},filter:function(){return KX(b,v,y.shape,h)}}},"DepthwiseConv2dNative",h,f);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),YX=at({depthwiseConv2dDerInput_:function(e,t,r,a){var s=t,i=!1;t.rank===3&&(i=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=ft.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(s,r,a)},{dy4D:s});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),KX=at({depthwiseConv2dDerFilter_:function(e,t,r,a){var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ft.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(s,i,a)},{x4D:s,dy4D:i})}}),dP=at({separableConv2d_:function(e,t,r,a,s,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var l=$e(e,"x","separableConv2d"),c=$e(t,"depthwiseFilter","separableConv2d"),d=$e(r,"pointwiseFilter","separableConv2d"),u=l,h=!1;if(l.rank===3&&(h=!0,u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Ge(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),Ge(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),Ge(d.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),Ge(d.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."}),Ge(d.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."});var f=c.shape[2],p=c.shape[3];Ge(d.shape[2]===f*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*p+", but got "+d.shape[2]+"."});var v=jC(u,c,a,s,o,i),g=ed(v,d,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),aFe=at({conv2dTranspose_:function(e,t,r,a,s,i){return HX(r,$e(e,"x","conv2dTranspose"),$e(t,"filter","conv2dTranspose"),a,s,"NHWC",i)}}),nFe=at({conv3dTranspose_:function(e,t,r,a,s){return WX(r,$e(e,"x","conv3dTranspose"),$e(t,"filter","conv3dTranspose"),a,s)}}),NC=at({matMul_:function(e,t,r,a){var s;r===void 0&&(r=!1),a===void 0&&(a=!1);var i=$e(e,"a","matMul"),o=$e(t,"b","matMul");s=vs(i,o),i=s[0],o=s[1];var l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=a?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=a?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),f=o.shape.slice(0,-2),p=Fr(h),v=Fr(f);Ge(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),Ge($i(h,f),function(){return"Error in matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),Ge(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+r+" and transposeB="+a+" must match."});var g=i.shape.slice(0,-2).concat([d,u]),b=r?i.as3D(p,l,d):i.as3D(p,d,l),y=a?o.as3D(v,u,c):o.as3D(v,c,u),S={transposeA:r,transposeB:a};return ft.runKernelFunc(function(w,k){var C=w.batchMatMul(b,y,r,a);return k([b,y]),C},{a:b,b:y},function(w,k){var C=k,_=C[0],E=C[1];return r||a?!r&&a?{a:function(){return w.matMul(E,!1,!1)},b:function(){return w.matMul(_,!0,!1)}}:r&&!a?{a:function(){return E.matMul(w,!1,!0)},b:function(){return _.matMul(w,!1,!1)}}:{a:function(){return E.matMul(w,!0,!0)},b:function(){return w.matMul(_,!0,!0)}}:{a:function(){return w.matMul(E,!1,!0)},b:function(){return _.matMul(w,!0,!1)}}},"BatchMatMul",S).reshape(g)}}),sFe=at({dot_:function(e,t){var r=$e(e,"t1","dot"),a=$e(t,"t2","dot");Ge(!(r.rank!==1&&r.rank!==2||a.rank!==1&&a.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+r.rank+" and "+a.rank+"."});var s=r.rank===1?r.size:r.shape[1],i=a.rank===1?a.size:a.shape[0];return Ge(s===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+i+"."}),r.rank===1&&a.rank===1?r.as2D(1,-1).matMul(a.as2D(-1,1)).asScalar():r.rank===1&&a.rank===2?r.as2D(1,-1).matMul(a.as2D(a.shape[0],a.shape[1])).as1D():r.rank===2&&a.rank===1?r.matMul(a.as2D(-1,1)).as1D():r.matMul(a.as2D(a.shape[0],a.shape[1]))}}),iFe=at({outerProduct_:function(e,t){var r=$e(e,"v1","outerProduct"),a=$e(t,"v2","outerProduct");return Ge(r.rank===1&&a.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+r.rank+" and "+a.rank+"."}),r.as2D(-1,1).matMul(a.as2D(1,-1))}}),q1=at({reverse_:function(e,t){var r=$e(e,"x","reverse");if(r.rank===0)return r.clone();var a=Si(t,r.shape);return ft.runKernelFunc(function(s){return s.reverse(r,a)},{$x:r},function(s){return{$x:function(){return s.reverse(a)}}}).reshapeAs(r)}}),oFe=at({reverse1d_:function(e){var t=$e(e,"x","reverse");return Ge(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),q1(t,0)}}),lFe=at({reverse2d_:function(e,t){var r=$e(e,"x","reverse");return Ge(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),q1(r,t)}}),cFe=at({reverse3d_:function(e,t){var r=$e(e,"x","reverse");return Ge(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),q1(r,t)}}),dFe=at({reverse4d_:function(e,t){var r=$e(e,"x","reverse");return Ge(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),q1(r,t)}});function XX(e,t,r,a,s,i){var o=$e(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Ge(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),Ge(Sl(r,a),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}),i!=null&&Ge(Gs(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=t1(l.shape,t,r,a,s,i);if(d.filterWidth===1&&d.filterHeight===1&&$i(d.inShape,d.outShape))return o.clone();var u=[l],h=ft.runKernelFunc(function(f,p){var v=f.maxPool(l,d);return p([l,v]),v},{x:l},function(f,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,S,w,k,C,_,E){var T=$e(b,"dy","maxPoolBackprop"),I=$e(y,"input","maxPoolBackprop"),F=$e(S,"output","maxPoolBackprop");Ge(I.rank===T.rank,function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+T.rank+")"}),Ge(Sl(k,C),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+C+"'"}),Ge(T.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),Ge(I.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+I.rank+"."});var A=t1(I.shape,w,k,C,_,E);return ft.runKernelFunc(function(P){return P.maxPoolBackprop(T,I,F,A)},{$dy:T,$input:I})}(f,v,g,t,r,a,s)}}},"MaxPool",d,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function QX(e,t,r,a,s,i){var o=$e(e,"x","avgPool","float32");Ge(Sl(r,a),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"});var l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Ge(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&Ge(Gs(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=t1(l.shape,t,r,a,s,i);if(d.filterWidth===1&&d.filterHeight===1&&$i(d.inShape,d.outShape))return o.clone();var u=ft.runKernelFunc(function(h){return h.avgPool(l,d)},{x:l},function(h){return{x:function(){return function(f,p,v,g,b,y){var S=$e(f,"dy","avgPoolBackprop"),w=$e(p,"input","avgPoolBackprop");Ge(w.rank===S.rank,function(){return"Rank of input ("+w.rank+") does not match rank of dy ("+S.rank+")"}),Ge(Sl(g,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+b+"'"});var k=w,C=S,_=!1;w.rank===3&&(_=!0,k=w.as4D(1,w.shape[0],w.shape[1],w.shape[2]),C=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),Ge(C.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),Ge(k.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var E=t1(k.shape,v,g,b,y),T=ft.runKernelFunc(function(I){return I.avgPoolBackprop(C,k,E)},{dy4D:C,input4D:k});return _?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}(h,l,t,r,a,s)}}},"AvgPool",d);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Oi=at({maxPool_:function(e,t,r,a,s){return XX(e,t,r,1,a,s)}}),z1=at({avgPool_:function(e,t,r,a,s){return QX(e,t,r,1,a,s)}}),uFe=at({pool_:function(e,t,r,a,s,i){s==null&&(s=[1,1]),i==null&&(i=1),a===0&&(a="valid");var o=$e(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Ge(Sl(i,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"});var d,u=t1(l.shape,t,i,s,a),h=[u.dilationHeight,u.dilationWidth];d=a==="same"?function(k,C){var _=k.map(function(I,F){return I+(I-1)*(C[F]-1)}).map(function(I){return I-1}),E=_.map(function(I){return Math.floor(I/2)}),T=_.map(function(I,F){return I-E[F]});return _.map(function(I,F){return[E[F],T[F]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var f=h[0]===1&&h[1]===1,p=function(k,C,_){var E=_.map(function(V){return V[0]}),T=_.map(function(V){return V[1]}),I=k.concat(E,T),F=C.map(function(V,Y){return(V-I[Y]%V)%V}),A=T.map(function(V,Y){return V+F[Y]}),P=C.map(function(V,Y){return[E[Y],A[Y]]}),q=C.map(function(V,Y){return[0,F[Y]]});return[P,q]}([u.inHeight,u.inWidth],h,d),v=p[0],g=p[1],b=f?a:"valid",y=f?l:aX(l,h,v),S=(r==="avg"?function(){return QX(y,t,i,1,b)}:function(){return XX(y,t,i,1,b)})(),w=f?S:eX(S,h,g);return c?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),hFe=at({maxPool3d_:function(e,t,r,a,s,i,o){i===void 0&&(i="NDHWC");var l=$e(e,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),Ge(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),Ge(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),Ge(Sl(r,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&Ge(Gs(a),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var u=$2(c.shape,t,r,o,a,s,i),h=ft.runKernelFunc(function(f,p){var v=f.maxPool3d(c,u);return p([c,v]),v},{x:c},function(f,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,S,w,k,C,_,E){var T=$e(b,"dy","maxPool3dBackprop"),I=$e(y,"input","maxPool3dBackprop"),F=$e(S,"output","maxPool3dBackprop"),A=T,P=I,q=F,V=!1;I.rank===4&&(V=!0,A=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),P=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),q=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3])),Ge(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),Ge(P.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+P.rank+"."}),Ge(q.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+q.rank+"."}),C==null&&(C=[1,1,1]),Ge(Sl(k,C),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+C+"'"}),E!=null&&Ge(Gs(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+_+"."});var Y=$2(P.shape,w,k,C,_,E),B=ft.runKernelFunc(function(Q){return Q.maxPool3dBackprop(A,P,q,Y)},{dy5D:A,input5D:P});return V?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B}(f,v,g,t,r,o,a,s)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),fFe=at({avgPool3d_:function(e,t,r,a,s,i,o){i===void 0&&(i="NDHWC");var l=$e(e,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),Ge(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),Ge(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),Ge(Sl(r,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&Ge(Gs(a),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var u=$2(c.shape,t,r,o,a,s,i),h=ft.runKernelFunc(function(f){return f.avgPool3d(c,u)},{x:c},function(f){return{x:function(){return function(p,v,g,b,y,S,w){var k=$e(p,"dy","avgPool3dBackprop"),C=$e(v,"input","avgPool3dBackprop"),_=k,E=C,T=!1;C.rank===4&&(T=!0,_=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),E=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),Ge(_.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+_.rank+"."}),Ge(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),Ge(Sl(b,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+y+"'"}),w!=null&&Ge(Gs(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+S+"."});var I=$2(E.shape,g,b,y,S,w),F=ft.runKernelFunc(function(A){return A.avgPool3dBackprop(_,E,I)},{dy5D:_,input5D:E});return T?F.as4D(F.shape[1],F.shape[2],F.shape[3],F.shape[4]):F}(f,c,t,r,o,a,s)}}});return h=h.cast(c.dtype),d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),eh=at({slice_:function(e,t,r){var a,s,i=$e(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(a=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(c){Ge(c!==-1,function(){return"slice() does not support negative begin indexing."})}),s=(s=r==null?new Array(i.rank).fill(-1):typeof r=="number"?[r].concat(new Array(i.rank-1).fill(-1)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(-1)):r).map(function(c,d){return c>=0?c:(Ge(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."}),i.shape[d]-a[d])}),$Pe(i,a,s);var o=i.shape,l={begin:a,size:s};return ft.runKernelFunc(function(c){return c.slice(i,a,s)},{x:i},function(c){for(var d=[],u=0;u<c.rank;u++)d.push([a[u],o[u]-a[u]-s[u]]);return{x:function(){return c.pad(d)}}},"Slice",l)}}),mFe=at({slice1d_:function(e,t,r){var a=$e(e,"x","slice1d");return Ge(a.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,[t],[r])}}),pFe=at({slice2d_:function(e,t,r){var a=$e(e,"x","slice2d");return Ge(a.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}}),JX=at({slice3d_:function(e,t,r){var a=$e(e,"x","slice3d");return Ge(a.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}}),xFe=at({slice4d_:function(e,t,r){var a=$e(e,"x","slice4d");return Ge(a.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}});function ZX(e,t,r,a,s){return t.rank<r.rank&&(t=t.reshape(wl(t.shape,a))),e.rank<r.rank&&(e=e.reshape(wl(e.shape,a))),{x:function(){var i=e.mul(r.equal(t).cast(e.dtype));return s==null?i:i.transpose(s)}}}var vFe=at({all_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","all","bool"),s=Si(t,a.shape),i=s,o=lh(i,a.rank);o!=null&&(a=a.transpose(o),i=ch(i.length,a.rank));var l=ft.runKernelFunc(function(d){return d.all(a,i)},{$x:a});if(r){var c=wl(l.shape,s);return l.reshape(c)}return l}}),gFe=at({any_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","any","bool"),s=Si(t,a.shape),i=s,o=lh(i,a.rank);o!=null&&(a=a.transpose(o),i=ch(i.length,a.rank));var l=ft.runKernelFunc(function(d){return d.any(a,i)},{$x:a});if(r){var c=wl(l.shape,s);return l.reshape(c)}return l}}),bFe=at({argMax_:function(e,t){t===void 0&&(t=0);var r=$e(e,"x","argMax");t==null&&(t=0);var a=Si(t,r.shape),s=lh(a,r.rank);s!=null&&(r=r.transpose(s),a=ch(a.length,r.rank));var i={axis:a[0]},o=[r];return ft.runKernelFunc(function(l,c){var d=l.argMax(r,a[0]);return c([r]),d},{x:r},function(l,c){var d=c[0];return{x:function(){return Ua(d)}}},"ArgMax",i,o)}}),yFe=at({argMin_:function(e,t){t===void 0&&(t=0);var r=$e(e,"x","argMin");t==null&&(t=0);var a=Si(t,r.shape),s=lh(a,r.rank);return s!=null&&(r=r.transpose(s),a=ch(a.length,r.rank)),ft.runKernelFunc(function(i,o){var l=i.argMin(r,a[0]);return o([r]),l},{$x:r},function(i,o){var l=o[0];return{$x:function(){return Ua(l)}}})}}),jFe=at({logSumExp_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","logSumExp"),s=Si(t,a.shape),i=a.max(s,!0),o=a.sub(i).exp().sum(s).log(),l=i.reshape(o.shape).add(o);if(r){var c=wl(l.shape,s);return l.reshape(c)}return l}}),wC=at({max_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","max"),s=a,i=Si(t,a.shape),o=i,l=lh(o,a.rank);l!=null&&(a=a.transpose(l),o=ch(o.length,a.rank));var c=[a],d=ft.runKernelFunc(function(h,f){var p=h.max(a,o);return f([s,p]),p},{x:a},function(h,f){return ZX(h,f[1],f[0],i,l)},"Max",{axes:o},c,[!0]);if(r){var u=wl(d.shape,i);d=d.reshape(u)}return d}}),NFe=at({mean_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","mean"),s=Si(t,a.shape),i=Fr(Co(a.shape,s)[1]);return gC(function(o){var l=wr(i);return{value:(l.dtype===o.dtype?o:o.cast(l.dtype)).div(l).sum(t,r),gradFunc:function(c){var d=o.shape.slice();return s.forEach(function(u){d[u]=1}),c.reshape(d).mul(Ig(o.shape,"float32")).div(i)}}})(a)}}),wFe=at({min_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","min"),s=a,i=Si(t,a.shape),o=i,l=lh(o,a.rank);l!=null&&(a=a.transpose(l),o=ch(o.length,a.rank));var c=[a],d=ft.runKernelFunc(function(h,f){var p=h.min(a,o);return f([s,p]),p},{x:a},function(h,f){return ZX(h,f[1],f[0],i,l)},"Min",{axes:o},c,[!0]);if(r){var u=wl(d.shape,i);d=d.reshape(u)}return d}}),SFe=at({moments_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Si(t,(e=$e(e,"x","moments")).shape),s=e.mean(a,r),i=s.shape;r||(i=wl(s.shape,a));var o=e.toFloat().sub(s.reshape(i)).square();return{mean:s,variance:o.mean(a,r)}}}),eQ=at({sum_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","sum");a.dtype==="bool"&&(a=a.toInt());var s=Si(t,a.shape);return gC(function(i){var o=lh(s,i.rank),l=s,c=i;o!=null&&(c=i.transpose(o),l=ch(l.length,i.rank));var d=function(p){var v=i.shape.slice();return s.forEach(function(g){v[g]=1}),p.reshape(v).mul(Ig(i.shape,"float32"))},u={axes:l},h=ft.runKernelFunc(function(p){return p.sum(c,l)},{x:c},function(p){return{x:function(){return d(p)}}},"Sum",u);if(r){var f=wl(h.shape,s);h=h.reshape(f)}return{value:h,gradFunc:d}})(a)}}),CFe=at({prod_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=$e(e,"x","prod");a.dtype==="bool"&&(a=a.toInt());var s=Si(t,a.shape),i=lh(s,a.rank),o=s,l=a;i!=null&&(l=a.transpose(i),o=ch(o.length,a.rank));var c=ft.runKernelFunc(function(u){return u.prod(l,o)},{permutedX:l});if(r){var d=wl(c.shape,s);c=c.reshape(d)}return c}}),tQ=at({elu_:function(e){var t=$e(e,"x","elu");return ft.runKernelFunc(function(r,a){var s=r.elu(t);return a([s]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return ft.runKernelFunc(function(i){return i.eluDer(r,s)},{dy:r,y:s})}}})}}),kFe=at({leakyRelu_:function(e,t){t===void 0&&(t=.2);var r=$e(e,"x","leakyRelu");return oP(wr(t).mul(r),r)}}),rQ=at({prelu_:function(e,t){var r=$e(e,"x","prelu"),a=$e(t,"alpha","prelu");return ft.runKernelFunc(function(s,i){var o=s.prelu(r,a);return i([r,a]),o},{x:r,alpha:a},function(s,i){var o=i[0],l=i[1],c=o.greater(0);return{x:function(){return $x(c,s,s.mul(l))},alpha:function(){var d=$x(c,Ua(s),s.mul(o)),u=yi(l.shape,s.shape);return u.length>0&&(d=d.sum(u)),d.reshape(l.shape)}}},"Prelu")}}),xs=at({relu_:function(e){var t=$e(e,"x","relu");return t.dtype==="bool"?t.toInt():ft.runKernelFunc(function(r,a){var s=r.relu(t);return a([t]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mulStrict(s.step().toFloat())}}},"Relu")}}),aQ=at({relu6_:function(e){var t=$e(e,"x","relu6");return t.dtype==="bool"?t.toInt():ft.runKernelFunc(function(r,a){var s=r.relu6(t);return a([t]),s},{x:t},function(r,a){var s=a[0],i=s.lessEqual(6).mul(s.step());return{x:function(){return r.mulStrict(i.toFloat())}}},"Relu6")}}),EFe=at({selu_:function(e){var t=$e(e,"x","selu");return ft.runKernelFunc(function(r,a){var s=r.selu(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){var i=s.greater(wr(0)),o=wr(nP),l=wr(sP),c=r.mul(l),d=r.mul(o).mul(s.toFloat().exp());return $x(i,c,d)}}})}}),Zm=at({transpose_:function(e,t){var r=$e(e,"x","transpose");if(t==null&&(t=r.shape.map(function(s,i){return i}).reverse()),Ge(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of perm "+t+"."}),t.forEach(function(s){Ge(s>=0&&s<r.rank,function(){return"All entries in 'perm' must be between 0 and "+(r.rank-1)+" but got "+t})}),r.rank<=1)return r.clone();var a={perm:t};return ft.runKernelFunc(function(s){return s.transpose(r,t)},{x:r},function(s){var i=YI(t);return{x:function(){return s.transpose(i)}}},"Transpose",a)}}),_Fe=at({localResponseNormalization_:function(e,t,r,a,s){t===void 0&&(t=5),r===void 0&&(r=1),a===void 0&&(a=1),s===void 0&&(s=.5);var i=$e(e,"x","localResponseNormalization");Ge(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),Ge(Gs(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,l=!1;i.rank===3&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=ft.runKernelFunc(function(d,u){var h=d.localResponseNormalization4D(o,t,r,a,s);return u([o,h]),h},{x4D:o},function(d,u){var h=u[0],f=u[1];return{x4D:function(){return ft.runKernelFunc(function(p){return p.LRNGrad(d,h,f,t,r,a,s)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),nQ=at({norm_:function(e,t,r,a){t===void 0&&(t="euclidean"),r===void 0&&(r=null),a===void 0&&(a=!1);var s=function l(c,d,u){if(u===void 0&&(u=null),c.rank===0)return c.abs();if(c.rank!==1&&u===null)return l(c.reshape([-1]),d,u);if(c.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(d===1)return c.abs().sum(u);if(d===1/0)return c.abs().max(u);if(d===-1/0)return c.abs().min(u);if(d==="euclidean"||d===2)return c.abs().pow(wr(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(u)&&u.length===2){if(d===1)return c.abs().sum(u[0]).max(u[1]-1);if(d===1/0)return c.abs().sum(u[1]).max(u[0]);if(d===-1/0)return c.abs().sum(u[1]).min(u[0]);if(d==="fro"||d==="euclidean")return c.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+u)}(e=$e(e,"x","norm"),t,r),i=s.shape;if(a){var o=Si(r,e.shape);i=wl(s.shape,o)}return s.reshape(i)}}),DFe=at({basicLSTMCell_:function(e,t,r,a,s,i){var o=$e(e,"forgetBias","basicLSTMCell"),l=$e(t,"lstmKernel","basicLSTMCell"),c=$e(r,"lstmBias","basicLSTMCell"),d=$e(a,"data","basicLSTMCell"),u=$e(s,"c","basicLSTMCell"),h=$e(i,"h","basicLSTMCell"),f=d.concat(h,1).matMul(l).add(c),p=f.shape[0],v=f.shape[1]/4,g=[p,v],b=f.slice([0,0],g),y=f.slice([0,v],g),S=f.slice([0,2*v],g),w=f.slice([0,3*v],g),k=b.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(S).sigmoid())),C=k.tanh().mulStrict(w.sigmoid());return[k,C]}}),AFe=at({multiRNNCell_:function(e,t,r,a){for(var s=$e(t,"data","multiRNNCell"),i=M2(r,"c","multiRNNCell"),o=M2(a,"h","multiRNNCell"),l=s,c=[],d=0;d<e.length;d++){var u=e[d](l,i[d],o[d]);c.push(u[0]),c.push(u[1]),l=u[1]}var h=[],f=[];for(d=0;d<c.length;d+=2)h.push(c[d]),f.push(c[d+1]);return[h,f]}}),TFe=at({movingAverage_:function(e,t,r,a,s){s===void 0&&(s=!0);var i=$e(e,"v","movingAverage"),o=$e(t,"x","movingAverage"),l=$e(r,"decay","movingAverage");_Ie(i,o),Ge($i(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=wr(1),d=c.sub(l),u=o.sub(i).mul(d);if(s){Ge(a!=null,function(){return"When using zeroDebias: true, step is required."});var h=$e(a,"step","movingAverage");u=u.div(c.sub(H2(l,h)))}return i.add(u)}}),IFe=at({stridedSlice_:function(e,t,r,a,s,i,o,l,c){if(s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),a==null&&(a=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var d=$e(e,"x","stridedSlice"),u=N9(l),h=d.shape.slice();u.forEach(function(b){t[b]=0,r[b]=1,h.splice(b,0,1)}),d=d.reshape(h);for(var f=0;f<d.rank;f++)t[f]=VPe(s,t,a,d.shape,f),r[f]=qPe(i,r,a,d.shape,f),a[f]=a[f]||1;var p=N9(c);p.forEach(function(b){r[b]=t[b]+1,a[b]=1});var v=JI(t,r,a),g=v.filter(function(b,y){return p.indexOf(y)===-1});return a.every(function(b){return b===1})?eh(d,t,v).reshape(g):ft.runKernelFunc(function(b){return b.stridedSlice(d,t,r,a)},{$x:d}).reshape(g)}}),PFe=at({topk_:function(e,t,r){t===void 0&&(t=1),r===void 0&&(r=!0);var a=$e(e,"x","topk");if(a.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var s=a.shape[a.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var i=ft.runKernelFunc(function(o){return o.topk(a,t,r)},{$x:a});return{values:i[0],indices:i[1]}}}),OFe=at({scatterND_:function(e,t,r){var a=$e(e,"indices","scatterND","int32"),s=$e(t,"updates","scatterND");return UPe(s,a,r),ft.runKernelFunc(function(i){return i.scatterND(a,s,r)},{indices:a,updates:s},null,"ScatterNd",{shape:r})}}),uP=at({fft_:function(e){Ge(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,a=e.as2D(r,t);return ft.runKernelFunc(function(s){return s.fft(a)},{input:e}).reshape(e.shape)}}),W2=at({ifft_:function(e){Ge(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,a=e.as2D(r,t);return ft.runKernelFunc(function(s){return s.ifft(a)},{input:e}).reshape(e.shape)}}),hP=at({rfft_:function(e,t){Ge(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var r,a=e.shape[e.shape.length-1],s=e.size/a;if(t!=null&&t<a){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,r=e.slice(i,o),a=t}else if(t!=null&&t>a){var l=e.shape.map(function(y){return y});l[e.shape.length-1]=t-a,r=e.concat(qn(l),e.shape.length-1),a=t}else r=e;var c=r.zerosLike(),d=eo(r,c).as2D(s,a),u=uP(d),h=Math.floor(a/2)+1,f=$c(u),p=Mu(u),v=f.split([h,a-h],f.shape.length-1),g=p.split([h,a-h],p.shape.length-1),b=r.shape.slice();return b[r.shape.length-1]=h,eo(v[0],g[0]).reshape(b)}}),sQ=at({irfft_:function(e){var t=e.shape[e.shape.length-1],r=e.size/t;if(t<=2){var a=e.as2D(r,t),s=W2(a);return $c(s)}var i=[r,2*(t-1)],o=$c(e).as2D(r,t),l=Mu(e).as2D(r,t),c=o.slice([0,1],[r,t-2]).reverse(1),d=l.slice([0,1],[r,t-2]).reverse(1).mul(wr(-1)),u=o.concat(c,1),h=l.concat(d,1);return a=eo(u,h).as2D(i[0],i[1]),s=W2(a),$c(s)}}),MFe=Object.freeze({fft:uP,ifft:W2,rfft:hP,irfft:sQ}),RFe=at({sparseToDense_:function(e,t,r,a){a===void 0&&(a=0);var s=$e(e,"sparseIndices","sparseToDense","int32"),i=$e(t,"sparseValues","sparseToDense"),o=$e(a,"defaultValue","sparseToDense",i.dtype);return function(l,c,d,u){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var h=l.rank>0?l.shape[0]:1,f=l.rank>1?l.shape[1]:1;if(d.length!==f)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+f+".");var p=c.size;if(c.rank!==0&&(c.rank!==1||p!==h))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+h+"]");if(c.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,r,o),ft.runKernelFunc(function(l){return l.sparseToDense(s,i,r,o)},{$sparseIndices:s,$sparseValues:i,$defaultValue:o})}}),FFe=at({gatherND_:function(e,t){var r=$e(t,"indices","gatherND","int32"),a=$e(e,"x","gatherND");return ft.runKernelFunc(function(s){return s.gatherND(a,r)},{x:a,indices:r},null,"GatherNd")}}),LFe=at({diag_:function(e){var t=$e(e,"x","diag").flatten(),r=e.shape.concat(e.shape);return ft.runKernelFunc(function(a){return a.diag(t)},{$x:t}).reshape(r)}}),BFe=at({dropout_:function(e,t,r,a){var s=$e(e,"x","dropout");if(Ge(s.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),Ge(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof hs?s.clone():s;var i=function(c,d){if(d==null)return c.shape.slice();if($i(c.shape,d))return d;if(c.shape.length===d.length){for(var u=[],h=0;h<c.shape.length;h++)d[h]==null&&c.shape[h]!=null?u.push(c.shape[h]):u.push(d[h]);return u}return d}(s,r),o=1-t,l=rX(i,0,1,"float32",a).add(o).floor().div(o);return s.mul(l)}});function iQ(e,t,r){for(var a=1-e%2,s=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+a-1);s[i]=t-r*Math.cos(o)}return li(s,"float32")}var fP=at({hannWindow_:function(e){return iQ(e,.5,.5)}}),oQ=at({hammingWindow_:function(e){return iQ(e,.54,.46)}}),mP=at({frame_:function(e,t,r,a,s){a===void 0&&(a=!1),s===void 0&&(s=0);for(var i=0,o=[];i+t<=e.size;)o.push(eh(e,i,t)),i+=r;if(a)for(;i<e.size;){var l=i+t-e.size,c=vi([eh(e,i,t-l),Yu([l],s)]);o.push(c),i+=r}return o.length===0?Bm([],[0,t]):vi(o).as2D(o.length,t)}}),lQ=at({stft_:function(e,t,r,a,s){var i;s===void 0&&(s=fP),a==null&&(i=t,a=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=mP(e,t,r),l=Fo(o,s(t)),c=[],d=0;d<o.shape[0];d++)c.push(hP(l.slice([d,0],[1,t]),a));return vi(c)}}),UFe=Object.freeze({hannWindow:fP,hammingWindow:oQ,frame:mP,stft:lQ}),Oo,$Fe=function(e,t,r){return r===void 0&&(r=1),Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,v,g,b;return Or(this,function(y){switch(y.label){case 0:return a=$e(e,"predictions","inTopK"),s=$e(t,"targets","inTopK"),Ge(a.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+a.rank}),Ge(a.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+a.rank+" and targets rank "+s.rank}),fn(a.shape.slice(0,a.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],Ge(r>0&&r<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+r}),[4,a.data()];case 1:return o=y.sent(),[4,s.data()];case 2:for(l=y.sent(),c=[o.length/i,i],u=c[1],h=Jy("bool",d=c[0]),f=0;f<d;f++){for(p=f*u,v=o.subarray(p,p+u),g=[],b=0;b<v.length;b++)g.push({value:v[b],index:b});for(g.sort(function(S,w){return w.value-S.value}),h[f]=0,b=0;b<r;b++)if(g[b].index===l[f]){h[f]=1;break}}return e!==a&&a.dispose(),t!==s&&s.dispose(),[2,so(h,s.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Oo||(Oo={}));var VFe=at({absoluteDifference_:function(e,t,r,a){a===void 0&&(a=Oo.SUM_BY_NONZERO_WEIGHTS);var s=$e(e,"labels","absoluteDifference"),i=$e(t,"predictions","absoluteDifference"),o=null;r!=null&&(o=$e(r,"weights","absoluteDifference")),fn(s.shape,i.shape,"Error in absoluteDifference: ");var l=s.sub(i).abs();return kf(l,o,a)}}),kf=at({computeWeightedLoss_:function(e,t,r){r===void 0&&(r=Oo.SUM_BY_NONZERO_WEIGHTS);var a=$e(e,"losses","computeWeightedLoss"),s=null;t!=null&&(s=$e(t,"weights","computeWeightedLoss"));var i=s==null?a:a.mul(s);if(r===Oo.NONE)return i;if(r===Oo.SUM)return i.sum();if(r===Oo.MEAN){if(s==null)return i.mean();var o=a.size/s.size,l=i.sum().div(s.sum());return o>1?l.div(wr(o)):l}if(r===Oo.SUM_BY_NONZERO_WEIGHTS){if(s==null)return i.sum().div(wr(a.size));var c=s.mul(Ig(a.shape)).notEqual(wr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+r)}}),qFe=at({cosineDistance_:function(e,t,r,a,s){s===void 0&&(s=Oo.SUM_BY_NONZERO_WEIGHTS);var i=$e(e,"labels","cosineDistance"),o=$e(t,"predictions","cosineDistance"),l=null;a!=null&&(l=$e(a,"weights","cosineDistance")),fn(i.shape,o.shape,"Error in cosineDistance: ");var c=wr(1).sub(i.mul(o).sum(r,!0));return kf(c,l,s)}}),zFe=at({hingeLoss_:function(e,t,r,a){a===void 0&&(a=Oo.SUM_BY_NONZERO_WEIGHTS);var s=$e(e,"labels","hingeLoss"),i=$e(t,"predictions","hingeLoss"),o=null;r!=null&&(o=$e(r,"weights","hingeLoss")),fn(s.shape,i.shape,"Error in hingeLoss: ");var l=wr(1);s=wr(2).mul(s).sub(l);var c=l.sub(s.mul(i)).relu();return kf(c,o,a)}}),HFe=at({huberLoss_:function(e,t,r,a,s){a===void 0&&(a=1),s===void 0&&(s=Oo.SUM_BY_NONZERO_WEIGHTS);var i=$e(e,"labels","huberLoss"),o=$e(t,"predictions","huberLoss"),l=null;r!=null&&(l=$e(r,"weights","huberLoss")),fn(i.shape,o.shape,"Error in huberLoss: ");var c=wr(a),d=o.sub(i).abs(),u=$X(d,c),h=d.sub(u),f=wr(.5).mul(u.square()).add(c.mul(h));return kf(f,l,s)}}),WFe=at({logLoss_:function(e,t,r,a,s){a===void 0&&(a=1e-7),s===void 0&&(s=Oo.SUM_BY_NONZERO_WEIGHTS);var i=$e(e,"labels","logLoss"),o=$e(t,"predictions","logLoss"),l=null;r!=null&&(l=$e(r,"weights","logLoss")),fn(i.shape,o.shape,"Error in logLoss: ");var c=wr(1),d=wr(a),u=i.mul(o.add(d).log()).neg().sub(c.sub(i).mul(c.sub(o).add(d).log()));return kf(u,l,s)}}),GFe=at({meanSquaredError_:function(e,t,r,a){a===void 0&&(a=Oo.SUM_BY_NONZERO_WEIGHTS);var s=$e(e,"labels","meanSquaredError"),i=$e(t,"predictions","meanSquaredError"),o=null;r!=null&&(o=$e(r,"weights","meanSquaredError")),fn(s.shape,i.shape,"Error in meanSquaredError: ");var l=s.squaredDifference(i);return kf(l,o,a)}}),YFe=at({sigmoidCrossEntropy_:function(e,t,r,a,s){a===void 0&&(a=0),s===void 0&&(s=Oo.SUM_BY_NONZERO_WEIGHTS);var i=$e(e,"multiClassLabels","sigmoidCrossEntropy"),o=$e(t,"logits","sigmoidCrossEntropy"),l=null;if(r!=null&&(l=$e(r,"weights","sigmoidCrossEntropy")),fn(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),a>0){var c=wr(a),d=wr(1),u=wr(.5);i=i.mul(d.sub(c)).add(u.mul(c))}var h=function(f,p){var v=$e(f,"labels","sigmoidCrossEntropyWithLogits"),g=$e(p,"logits","sigmoidCrossEntropyWithLogits");fn(v.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=g.relu(),y=g.mul(v),S=g.abs().neg().exp().log1p();return b.sub(y).add(S)}(i,o);return kf(h,l,s)}}),KFe=at({softmaxCrossEntropy_:function(e,t,r,a,s){a===void 0&&(a=0),s===void 0&&(s=Oo.SUM_BY_NONZERO_WEIGHTS);var i=$e(e,"onehotLabels","softmaxCrossEntropy"),o=$e(t,"logits","softmaxCrossEntropy"),l=null;if(r!=null&&(l=$e(r,"weights","softmaxCrossEntropy")),fn(i.shape,o.shape,"Error in softmaxCrossEntropy: "),a>0){var c=wr(a),d=wr(1),u=wr(i.shape[1]);i=i.mul(d.sub(c)).add(c.div(u))}var h=function(f,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return gC(function(g,b,y){var S=b.logSumExp([v],!0),w=b.toFloat().sub(S);return y([g,w]),{value:w.mul(g).neg().sum([v]),gradFunc:function(k,C){var _=C[0],E=C[1],T=wl(k.shape,[v]);return[k.reshape(T).mul(_.toFloat().sub(E.exp())),k.reshape(T).mul(E.exp().sub(_.toFloat()))]}}})(f,p)}(i,o);return kf(h,l,s)}}),XFe=Object.freeze({get Reduction(){return Oo},absoluteDifference:VFe,computeWeightedLoss:kf,cosineDistance:qFe,hingeLoss:zFe,huberLoss:HFe,logLoss:WFe,meanSquaredError:GFe,sigmoidCrossEntropy:YFe,softmaxCrossEntropy:KFe});function z9(e,t){return t===void 0&&(t=!1),ft.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var r=e.shape[0],a=e.shape[1],s=tX(r),i=e.clone(),o=Bm([[1]],[1,1]),l=o.clone(),c=r>=a?a:r,d=function(h){var f,p=i,v=l,g=s;f=ft.tidy(function(){var b=i.slice([h,h],[r-h,1]),y=b.norm(),S=i.slice([h,h],[1,1]),w=Bm([[-1]]).where(S.greater(0),Bm([[1]])),k=S.sub(w.mul(y)),C=b.div(k);l=C.shape[0]===1?o.clone():o.concat(C.slice([1,0],[C.shape[0]-1,C.shape[1]]),0);var _=w.matMul(k).div(y).neg(),E=i.slice([h,0],[r-h,a]),T=_.mul(l);if(h===0)i=E.sub(T.matMul(l.transpose().matMul(E)));else{var I=E.sub(T.matMul(l.transpose().matMul(E)));i=i.slice([0,0],[h,a]).concat(I,0)}var F=s.slice([0,h],[r,s.shape[1]-h]);if(h===0)s=F.sub(F.matMul(l).matMul(T.transpose()));else{var A=F.sub(F.matMul(l).matMul(T.transpose()));s=s.slice([0,0],[r,h]).concat(A,1)}return[l,i,s]}),l=f[0],i=f[1],s=f[2],bl([p,v,g])},u=0;u<c;++u)d(u);return!t&&r>a&&(s=s.slice([0,0],[r,a]),i=i.slice([0,0],[a,a])),[s,i]})}var QFe=at({bandPart_:function(e,t,r){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(r%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+r+".");var a=$e(e,"a","bandPart");if(a.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+a.rank+".");var s=a.shape,i=a.shape.slice(-2),o=i[0],l=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(r<=l))throw new Error("bandPart(): numUpper ("+r+") must not be greater than the number of columns ("+l+").");t<0&&(t=o),r<0&&(r=l);var c=R2(0,o,1,"int32").reshape([-1,1]),d=R2(0,l,1,"int32"),u=ji(c,d),h=yC(u.lessEqual(wr(+t,"int32")),u.greaterEqual(wr(-r,"int32"))),f=qn([o,l],a.dtype);return oc(gi(a.reshape([-1,o,l])).map(function(p){return $x(h,p,f)})).reshape(s)}}),JFe=at({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Ge(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=e[0].shape[0],a=function(c){Ge(e[c].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+r+")"})},s=1;s<e.length;++s)a(s)}else t=!0,e=XI(e,e.shape[0],0).map(function(c){return nX(c,[0])});Ge(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,l=function(c){i.push(ft.tidy(function(){var d=o[c];if(c>0)for(var u=0;u<c;++u){var h=eQ(i[u].mulStrict(d)).mul(i[u]);d=d.sub(h)}return d.div(nQ(d,"euclidean"))}))};for(s=0;s<e.length;++s)l(s);return t?oc(i,0):i}}),ZFe=at({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return z9(e,t);var r=e.shape.slice(0,e.shape.length-2).reduce(function(o,l){return o*l}),a=gi(e.reshape([r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],i=[];return a.forEach(function(o){var l=z9(o,t),c=l[0],d=l[1];s.push(c),i.push(d)}),[oc(s,0).reshape(e.shape),oc(i,0).reshape(e.shape)]}}),eLe=Object.freeze({bandPart:QFe,gramSchmidt:JFe,qr:ZFe});function SC(e,t,r,a,s,i){a==null&&(a=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return r=Math.min(r,o),Ge(0<=a&&a<=1,function(){return"iouThreshold must be in [0, 1], but was '"+a+"'"}),Ge(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),Ge(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),Ge(t.rank===1,function(){return"scores must be a 1D tensor"}),Ge(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),Ge(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:r,iouThreshold:a,scoreThreshold:s,softNmsSigma:i}}var tLe=at({resizeBilinear_:function(e,t,r){r===void 0&&(r=!1);var a=$e(e,"images","resizeBilinear");Ge(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+a.rank+"."}),Ge(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=a,i=!1;a.rank===3&&(i=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var o=t[0],l=t[1],c=ft.runKernelFunc(function(d,u){return u([s]),d.resizeBilinear(s,o,l,r)},{x:s},function(d,u){return{x:function(){return ft.runKernelFunc(function(h){return h.resizeBilinearBackprop(d,u[0],r)},{})}}},"ResizeBilinear",{alignCorners:r,newHeight:o,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),rLe=at({resizeNearestNeighbor_:function(e,t,r){r===void 0&&(r=!1);var a=$e(e,"images","resizeNearestNeighbor");Ge(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+a.rank+"."}),Ge(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),Ge(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var s=a,i=!1;a.rank===3&&(i=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var o=t[0],l=t[1],c=ft.runKernelFunc(function(d,u){return u([s]),d.resizeNearestNeighbor(s,o,l,r)},{batchImages:s},function(d,u){return{batchImages:function(){return ft.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(d,u[0],r)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),aLe=at({nonMaxSuppression_:function(e,t,r,a,s){a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY);var i=$e(e,"boxes","nonMaxSuppression"),o=$e(t,"scores","nonMaxSuppression"),l=SC(i,o,r,a,s);r=l.maxOutputSize,a=l.iouThreshold,s=l.scoreThreshold;var c={maxOutputSize:r,iouThreshold:a,scoreThreshold:s};return ft.runKernelFunc(function(d){return d.nonMaxSuppression(i,o,r,a,s)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),nLe=function(e,t,r,a,s){return a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),Pr(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return i=$e(e,"boxes","nonMaxSuppressionAsync"),o=$e(t,"scores","nonMaxSuppressionAsync"),l=SC(i,o,r,a,s),r=l.maxOutputSize,a=l.iouThreshold,s=l.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=f.sent(),d=c[0],u=c[1],h=eP(d,u,r,a,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},sLe=at({nonMaxSuppressionWithScore_:function(e,t,r,a,s,i){a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=$e(e,"boxes","nonMaxSuppression"),l=$e(t,"scores","nonMaxSuppression"),c=SC(o,l,r,a,s,i),d={maxOutputSize:r=c.maxOutputSize,iouThreshold:a=c.iouThreshold,scoreThreshold:s=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=ft.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},d);return{selectedIndices:u[0],selectedScores:u[1]}}}),iLe=function(e,t,r,a,s,i){return a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Pr(this,void 0,void 0,function(){var o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:return o=$e(e,"boxes","nonMaxSuppressionAsync"),l=$e(t,"scores","nonMaxSuppressionAsync"),c=SC(o,l,r,a,s,i),r=c.maxOutputSize,a=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return d=p.sent(),u=d[0],h=d[1],f=tP(u,h,r,a,s,i),o!==e&&o.dispose(),l!==t&&l.dispose(),[2,f]}})})},oLe=at({cropAndResize_:function(e,t,r,a,s,i){var o=$e(e,"image","cropAndResize"),l=$e(t,"boxes","cropAndResize","float32"),c=$e(r,"boxInd","cropAndResize","int32");s=s||"bilinear",i=i||0;var d=l.shape[0];return Ge(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),Ge(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."}),Ge(c.rank===1&&c.shape[0]===d,function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."}),Ge(a.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+a.length+"."}),Ge(a[0]>=1&&a[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+a}),Ge(s==="bilinear"||s==="nearest",function(){return"method must be bilinear or nearest, but was "+s}),ft.runKernelFunc(function(u,h){return u.cropAndResize(o,l,c,a,s,i)},{images:o,boxes:l,boxInd:c},null,"CropAndResize",{method:s,extrapolationValue:i,cropSize:a})}}),pP=Object.freeze({resizeBilinear:tLe,resizeNearestNeighbor:rLe,nonMaxSuppression:aLe,nonMaxSuppressionAsync:nLe,nonMaxSuppressionWithScore:sLe,nonMaxSuppressionWithScoreAsync:iLe,cropAndResize:oLe}),xP=function(e,t){return!(e>0)||t==="linear"},vP=function(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+r+" has not been implemented yet.")},gP=function(e,t){var r=t,a=yi(e.shape,t.shape);return a.length>0&&(r=r.sum(a)),r.reshape(e.shape)},bP=function(e,t,r){if(t==="linear")return e;if(t==="relu")return xs(e);if(t==="elu")return tQ(e);if(t==="relu6")return aQ(e);if(t==="prelu")return rQ(e,r);throw new Error("Unknown fused activation "+t+".")},lLe=at({fusedMatMul_:function(e){var t,r=e.a,a=e.b,s=e.transposeA,i=s!==void 0&&s,o=e.transposeB,l=o!==void 0&&o,c=e.bias,d=e.activation,u=d===void 0?"linear":d,h=e.preluActivationWeights;if(xP(ft.state.gradientDepth,u)===!1){var f=NC(r,a,i,l);return c!=null&&(f=Ea(f,c)),bP(f,u,h)}var p=$e(r,"a","fused matMul"),v=$e(a,"b","fused matMul");t=vs(p,v),p=t[0],v=t[1];var g=i?p.shape[p.rank-2]:p.shape[p.rank-1],b=l?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],S=l?v.shape[v.rank-2]:v.shape[v.rank-1],w=p.shape.slice(0,-2),k=v.shape.slice(0,-2),C=Fr(w),_=Fr(k);Ge(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),Ge($i(w,k),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+k+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),Ge(g===b,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+b+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var E,T,I=p.shape.slice(0,-2).concat([y,S]),F=i?p.as3D(C,g,y):p.as3D(C,y,g),A=l?v.as3D(_,S,b):v.as3D(_,b,S);c!=null&&Ia(I,(E=vs(E=$e(c,"bias","fused matMul"),p)[0]).shape),h!=null&&(T=$e(h,"prelu weights","fused matMul"));var P={a:F,b:A};c!=null&&(P.bias=E),h!=null&&(P.preluActivationWeights=T);var q=[F,A];return ft.runKernelFunc(function(V,Y){var B=V.fusedBatchMatMul({a:F,b:A,transposeA:i,transposeB:l,bias:E,activation:u,preluActivationWeights:T});return Y([F,A,B]),B},P,function(V,Y){var B=Y[0],Q=Y[1],R=Y[2],Z=vP(V,R,u),J={};return c!=null&&(J={bias:function(){return gP(E,Z)}}),Object.assign(i||l?!i&&l?{a:function(){return Z.matMul(Q,!1,!1)},b:function(){return Z.matMul(B,!0,!1)}}:i&&!l?{a:function(){return Q.matMul(Z,!1,!0)},b:function(){return B.matMul(Z,!1,!1)}}:{a:function(){return Q.matMul(Z,!0,!0)},b:function(){return Z.matMul(B,!0,!0)}}:{a:function(){return Z.matMul(Q,!1,!0)},b:function(){return B.matMul(Z,!0,!1)}},J)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:u},q,[!0]).reshape(I)}}),cLe=at({fusedConv2d_:function(e){var t=e.x,r=e.filter,a=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,f=h===void 0?"linear":h,p=e.preluActivationWeights;if(f=f||"linear",xP(ft.state.gradientDepth,f)===!1){var v=ed(t,r,a,s,o,c,d);return u!=null&&(v=Ea(v,u)),bP(v,f,p)}var g=$e(t,"x","conv2d"),b=$e(r,"filter","conv2d"),y=g,S=!1;g.rank===3&&(S=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),Ge(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),Ge(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),d!=null&&Ge(Gs(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+s+"."}),Ge(y.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),Ge(Sl(a,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+c+"'"}),Ge(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var w,k,C=ov(y.shape,b.shape,a,c,s,d);u!=null&&(w=vs(w=$e(u,"bias","fused conv2d"),g)[0],Ia(C.outShape,w.shape)),p!=null&&(k=$e(p,"prelu weights","fused conv2d"));var _={x:y,filter:b};u!=null&&(_.bias=w),p!=null&&(_.preluActivationWeights=k);var E=[b,y],T=ft.runKernelFunc(function(I,F){var A=I.fusedConv2d({input:y,filter:b,convInfo:C,bias:w,activation:f,preluActivationWeights:k});return F([b,y,A]),A},_,function(I,F){var A=F,P=A[0],q=A[1],V=A[2],Y=vP(I,V,f);Ge(sg(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var B={};return u!=null&&(B={bias:function(){return gP(w,Y)}}),Object.assign({x:function(){return GX(q.shape,Y,P,a,s)},filter:function(){return cP(q,Y,P.shape,a,s)}},B)},"FusedConv2D",{convInfo:C,activation:f},E,[!0]);return S?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),dLe=at({fusedDepthwiseConv2d_:function(e){var t=e.x,r=e.filter,a=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,f=h===void 0?"linear":h,p=e.preluActivationWeights;if(xP(ft.state.gradientDepth,f)===!1){var v=jC(t,r,a,s,o,c,d);return u!=null&&(v=Ea(v,u)),bP(v,f,p)}var g=$e(t,"x","depthwiseConv2d"),b=$e(r,"filter","depthwiseConv2d"),y=g,S=!1;g.rank===3&&(S=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),Ge(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),Ge(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),Ge(y.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),c==null&&(c=[1,1]),Ge(Sl(a,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+c+"'"}),d!=null&&Ge(Gs(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+s+"."});var w,k,C=ov(y.shape,b.shape,a,c,s,d,!0);u!=null&&(w=vs(w=$e(u,"bias","fused conv2d"),g)[0],Ia(C.outShape,w.shape)),p!=null&&(k=$e(p,"prelu weights","fused depthwiseConv2d"));var _={x:y,filter:b};u!=null&&(_.bias=w),p!=null&&(_.preluActivationWeights=k);var E=[b,y],T=ft.runKernelFunc(function(I,F){var A=I.fusedDepthwiseConv2D({input:y,filter:b,convInfo:C,bias:w,activation:f,preluActivationWeights:k});return F([b,y,A]),A},_,function(I,F){Ge(sg(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var A=F[0],P=F[1],q=F[2],V=vP(I,q,f),Y={};return u!=null&&(Y={bias:function(){return gP(w,V)}}),Object.assign({x:function(){return YX(P.shape,V,A,C)},filter:function(){return KX(P,V,A.shape,C)}},Y)},"FusedDepthwiseConv2D",{convInfo:C,activation:f},E,[!0]);return S?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),uLe=Object.freeze({matMul:lLe,conv2d:cLe,depthwiseConv2d:dLe}),hLe=Object.freeze({image:pP,linalg:eLe,losses:XFe,spectral:MFe,fused:uLe,signal:UFe,square:WMe,squaredDifference:TX,conv1d:tFe,conv2d:ed,conv3d:rFe,depthwiseConv2d:jC,separableConv2d:dP,conv2dTranspose:aFe,conv3dTranspose:nFe,op:at,batchNormalization2d:NRe,batchNormalization3d:wRe,batchNormalization4d:SRe,batchNormalization:CRe,batchNorm:FX,batchNorm2d:kRe,batchNorm3d:ERe,batchNorm4d:_Re,booleanMaskAsync:eFe,complex:eo,real:$c,imag:Mu,concat:vi,concat1d:uPe,concat2d:hPe,concat3d:fPe,concat4d:mPe,split:XI,matMul:NC,dot:sFe,outerProduct:iFe,reverse:q1,reverse1d:oFe,reverse2d:lFe,reverse3d:cFe,reverse4d:dFe,maxPool:Oi,avgPool:z1,pool:uFe,maxPool3d:hFe,avgPool3d:fFe,slice:eh,slice1d:mFe,slice2d:pFe,slice3d:JX,slice4d:xFe,abs:GMe,acos:YMe,acosh:KMe,asin:XMe,asinh:QMe,atan:JMe,atanh:ZMe,ceil:eRe,clipByValue:iP,cos:tRe,cosh:rRe,erf:aRe,exp:o3,expm1:nRe,floor:sRe,log:iRe,log1p:oRe,logSigmoid:lRe,neg:z2,reciprocal:cRe,round:dRe,rsqrt:IX,sigmoid:PX,sign:uRe,isNaN:hRe,isInf:fRe,isFinite:mRe,sin:pRe,sinh:xRe,softplus:vRe,sqrt:gRe,step:bRe,tan:yRe,tanh:jRe,all:vFe,any:gFe,argMax:bFe,argMin:yFe,logSumExp:jFe,max:wC,mean:NFe,min:wFe,moments:SFe,sum:eQ,prod:CFe,equal:VX,equalStrict:zRe,greater:HRe,greaterEqual:qX,greaterEqualStrict:WRe,greaterStrict:GRe,less:YRe,lessEqual:KRe,lessEqualStrict:XRe,lessStrict:QRe,notEqual:JRe,notEqualStrict:ZRe,add:Ea,addN:TRe,addStrict:IRe,atan2:PRe,div:Cd,divNoNan:ORe,divStrict:MRe,floorDiv:UX,maximum:oP,maximumStrict:RRe,minimum:$X,minimumStrict:FRe,mod:LRe,modStrict:BRe,mul:Fo,mulStrict:URe,pow:H2,powStrict:$Re,squaredDifferenceStrict:VRe,sub:ji,subStrict:qRe,elu:tQ,leakyRelu:kFe,prelu:rQ,relu:xs,relu6:aQ,selu:EFe,logicalAnd:yC,logicalNot:DRe,logicalOr:LX,logicalXor:ARe,where:$x,whereAsync:BX,buffer:ua,print:wPe,batchToSpaceND:eX,broadcastTo:SPe,cast:CPe,clone:kPe,cumsum:EPe,depthToSpace:_Pe,expandDims:Bc,eye:tX,multinomial:DPe,oneHot:a3,pad:iv,pad1d:APe,pad2d:TPe,pad3d:IPe,pad4d:PPe,rand:OPe,randomNormal:MPe,randomGamma:RPe,randomUniform:rX,reshape:Ad,spaceToBatchND:aX,squeeze:nX,stack:oc,tile:D0,truncatedNormal:FPe,unstack:gi,setdiff1dAsync:LPe,fill:Yu,linspace:dPe,ones:Ig,range:R2,scalar:wr,tensor:so,tensor1d:li,tensor2d:Bm,tensor3d:KI,tensor4d:fl,tensor5d:oPe,tensor6d:lPe,variable:cPe,zeros:qn,onesLike:ZK,zerosLike:Ua,transpose:Zm,softmax:Cf,logSoftmax:HPe,localResponseNormalization:_Fe,norm:nQ,gather:lP,unsortedSegmentSum:zX,basicLSTMCell:DFe,multiRNNCell:AFe,movingAverage:TFe,stridedSlice:IFe,topk:PFe,scatterND:OFe,fft:uP,ifft:W2,rfft:hP,irfft:sQ,sparseToDense:RFe,gatherND:FFe,diag:LFe,dropout:BFe,hannWindow:fP,hammingWindow:oQ,frame:mP,stft:lQ,inTopKAsync:$Fe});function ir(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&Ge(r.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function KD(e,t,r,a){if(r==="linear")return e.linear(t);if(r==="relu")return e.relu(t);if(r==="elu")return e.elu(t);if(r==="relu6")return e.relu6(t);if(r==="prelu")return e.prelu(t,a);throw new Error("Activation "+r+" has not been implemented for the CPU backend.")}var fLe=function(e){function t(){var r=e.call(this)||this;return r.blockSize=48,r.firstUse=!0,r.data=new uX(r,ft),r}return Ud(t,e),t.prototype.write=function(r,a,s){this.firstUse&&(this.firstUse=!1,Wt().get("IS_NODE")&&O2(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:r,dtype:s}),i},t.prototype.move=function(r,a,s,i){this.data.set(r,{values:a,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){return[2,this.readSync(r)]})})},t.prototype.readSync=function(r){var a=this.data.get(r),s=a.dtype,i=a.complexTensors;return s==="complex64"?i3(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(r).values},t.prototype.bufferSync=function(r){var a=this.readSync(r.dataId),s=a;if(r.dtype==="string")try{s=a.map(function(i){return T2(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ua(r.shape,r.dtype,s)},t.prototype.makeOutput=function(r,a,s){var i=this.write(r,a,s);return ft.makeTensorFromDataId(i,a,s,this)},t.prototype.disposeData=function(r){if(this.data.has(r)){var a=this.data.get(r).complexTensors;a!=null&&(a.real.dispose(),a.imag.dispose()),this.data.delete(r)}},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){return a=Iu(),r(),[2,{kernelMs:Iu()-a}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(r,a){var s=this.makeOutput(null,r.shape,"complex64");return this.data.get(s.dataId).complexTensors={real:ft.keep(r.clone()),imag:ft.keep(a.clone())},s},t.prototype.real=function(r){return this.data.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.data.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,a,s){if(ir(r,"slice"),cX(r.shape,a,s)){var i=dX(a,r.strides),o=Fr(s);return so(this.readSync(r.dataId).subarray(i,i+o),s,r.dtype)}for(var l=ua(s,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d).map(function(h,f){return h+a[f]});l.values[d]=c.get.apply(c,u)}return l.toTensor()},t.prototype.stridedSlice=function(r,a,s,i){ir(r,"stridedSlice");var o=JI(a,s,i);if(o.some(function(p){return p===0}))return so([],o);for(var l=ua(o,r.dtype),c=this.bufferSync(r),d=0;d<l.size;d++){for(var u=l.indexToLoc(d),h=new Array(u.length),f=0;f<h.length;f++)h[f]=u[f]*i[f]+a[f];l.set.apply(l,[c.get.apply(c,h)].concat(u))}return l.toTensor()},t.prototype.diag=function(r){for(var a=this.readSync(r.dataId),s=ua([r.size,r.size],r.dtype),i=s.values,o=0;o<a.length;o++)i[o*r.size+o]=a[o];return s.toTensor()},t.prototype.unstack=function(r,a){for(var s=r.shape[a],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==a&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[a]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[a]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.reverse=function(r,a){ir(r,"reverse");for(var s=ua(r.shape,r.dtype),i=this.bufferSync(r),o=function(c){var d=s.indexToLoc(c),u=d.slice();a.forEach(function(h){return u[h]=r.shape[h]-1-u[h]}),s.set.apply(s,[i.get.apply(i,u)].concat(d))},l=0;l<s.size;l++)o(l);return s.toTensor()},t.prototype.concat=function(r,a){var s=this;if(r[0].dtype==="complex64"){var i=r.map(function(p){return $c(p)}),o=r.map(function(p){return Mu(p)});return eo(this.concat(i,a),this.concat(o,a))}var l=r.map(function(p){var v=Fr(p.shape.slice(a));return p.as2D(-1,v)}),c=ng(l.map(function(p){return p.shape}),1),d=ua(c,r[0].dtype).values;if(l[0].shape[0]===1){var u=0;l.forEach(function(p){d.set(s.readSync(p.dataId),u),u+=p.size})}else{var h=0;l.forEach(function(p){for(var v=s.readSync(p.dataId),g=0,b=0;b<p.shape[0];++b)for(var y=b*c[1]+h,S=0;S<p.shape[1];++S)d[y+S]=v[g++];h+=p.shape[1]})}var f=ng(r.map(function(p){return p.shape}),a);return so(d,f,r[0].dtype)},t.prototype.neg=function(r){return ir(r,"neg"),this.multiply(wr(-1),r)},t.prototype.add=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s+o,imag:i+l}}):this.broadcastedBinaryOp(r,a,ro(r.dtype,a.dtype),function(s,i){return s+i})},t.prototype.addN=function(r){var a=this;ir(r,"addN");for(var s=r.map(function(u){return a.readSync(u.dataId)}),i=ua(r[0].shape,r[0].dtype),o=i.values,l=0;l<r.length;l++)for(var c=s[l],d=0;d<o.length;d++)o[d]+=c[d];return i.toTensor()},t.prototype.softmax=function(r,a){var s=Si([a],r.shape),i=this.max(r,s),o=wl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.subtract=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s-o,imag:i-l}}):this.broadcastedBinaryOp(r,a,ro(r.dtype,a.dtype),function(s,i){return s-i})},t.prototype.pow=function(r,a){return ir([r,a],"pow"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.pow(s,i)})},t.prototype.batchMatMul=function(r,a,s,i){ir([r,a],"matMul");for(var o=s?r.shape[1]:r.shape[2],l=s?r.shape[2]:r.shape[1],c=i?a.shape[1]:a.shape[2],d=r.shape[0],u=this.readSync(r.dataId),h=this.readSync(a.dataId),f=s?[r.strides[0],1,r.strides[1]]:[r.strides[0],r.strides[1],1],p=f[0],v=f[1],g=f[2],b=i?[1,a.strides[1],a.strides[0]]:[a.strides[1],1,a.strides[0]],y=b[0],S=b[1],w=b[2],k=l*c,C=ua([d,l,c],r.dtype),_=C.values,E=this.blockSize,T=0;T<d;T++)for(var I=0;I<l;I+=E)for(var F=0;F<c;F+=E)for(var A=0;A<o;A+=E)for(var P=Math.min(I+E,l),q=Math.min(F+E,c),V=Math.min(A+E,o),Y=I;Y<P;Y++)for(var B=F;B<q;B++){for(var Q=0,R=A;R<V;R++)Q+=u[T*p+Y*v+R*g]*h[R*y+B*S+T*w];_[T*k+(Y*c+B)]+=Q}return C.toTensor()},t.prototype.fusedBatchMatMul=function(r){var a=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=this.batchMatMul(a,s,i,o);return l&&(u=this.add(u,l)),c&&(u=KD(this,u,c,d)),u},t.prototype.multiply=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s*o-i*l,imag:s*l+i*o}}):this.broadcastedBinaryOp(r,a,ro(r.dtype,a.dtype),function(s,i){return s*i})},t.prototype.realDivide=function(r,a){return ir([r,a],"realDivide"),this.broadcastedBinaryOp(r,a,"float32",function(s,i){return s/i})},t.prototype.floorDiv=function(r,a){return ir([r,a],"floorDiv"),this.broadcastedBinaryOp(r,a,"int32",function(s,i){return Math.floor(s/i)})},t.prototype.sum=function(r,a){ir(r,"sum"),Wl("sum",a,r.rank);for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,ro(r.dtype,"int32")),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=0,v=0;v<c;++v)p+=u[f+v];d[h]=p}return l},t.prototype.prod=function(r,a){ir(r,"sum");for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,ro(r.dtype,"int32")),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=1,v=0;v<c;++v)p*=u[f+v];d[h]=p}return l},t.prototype.unsortedSegmentSum=function(r,a,s){ir(r,"unsortedSegmentSum");for(var i=[],o=r.rank-a.rank,l=0;l<o;++l)a=a.expandDims(l+1);for(l=0;l<s;++l){var c=wr(l,"int32"),d=VX(c,a).asType("float32").mul(r).sum(0);i.push(d)}return oc(i)},t.prototype.argMin=function(r,a){ir(r,"argMin");var s=[a];Wl("argMin",s,r.rank);for(var i=Co(r.shape,s),o=i[0],l=i[1],c=qn(o,"int32"),d=Fr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),f=0;f<u.length;++f){for(var p=f*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y<v&&(v=y,g=b)}u[f]=g}return c},t.prototype.argMax=function(r,a){ir(r,"argMax");var s=[a];Wl("argMax",s,r.rank);for(var i=Co(r.shape,s),o=i[0],l=i[1],c=qn(o,"int32"),d=Fr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),f=0;f<u.length;++f){for(var p=f*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y>v&&(v=y,g=b)}u[f]=g}return c},t.prototype.cumsum=function(r,a,s,i){if(ir(r,"cumsum"),a!==r.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(r.rank-1)+" but got axis="+a);for(var o=ro(r.dtype,"int32"),l=qn(r.shape,o),c=this.readSync(l.dataId),d=this.readSync(r.dataId),u=r.shape[r.rank-1],h=i?function(b,y){return b+u-y-1}:function(b,y){return b+y},f=0;f<d.length;f+=u)for(var p=0;p<u;p++){var v=h(f,p);if(p===0)c[v]=s?0:d[v];else{var g=h(f,p-1);c[v]=s?d[g]+c[g]:d[v]+c[g]}}return l},t.prototype.equal=function(r,a){return ir([r,a],"equal"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s===i?1:0})},t.prototype.notEqual=function(r,a){return ir([r,a],"notEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s!==i?1:0})},t.prototype.less=function(r,a){return ir([r,a],"less"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s<i?1:0})},t.prototype.lessEqual=function(r,a){return ir([r,a],"lessEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s<=i?1:0})},t.prototype.greater=function(r,a){return ir([r,a],"greater"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s>i?1:0})},t.prototype.greaterEqual=function(r,a){return ir([r,a],"greaterEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s>=i?1:0})},t.prototype.logicalNot=function(r){ir(r,"logicalNot");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)s[i]=a[i]?0:1;return this.makeOutput(s,r.shape,"bool")},t.prototype.logicalAnd=function(r,a){return ir([r,a],"logicalAnd"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s&&i})},t.prototype.logicalOr=function(r,a){return ir([r,a],"logicalOr"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s||i})},t.prototype.select=function(r,a,s){ir([r,a,s],"select");for(var i=this.readSync(r.dataId),o=this.readSync(a.dataId),l=this.readSync(s.dataId),c=qn(a.shape,ro(a.dtype,s.dtype)),d=this.readSync(c.dataId),u=0,h=r.rank===0||r.rank>1||a.rank===1?1:Fr(a.shape.slice(1)),f=0;f<i.length;f++)for(var p=0;p<h;p++)i[f]===1?d[u++]=o[f]:d[u++]=l[f];return c},t.prototype.where=function(r){ir([r],"where");var a=this.readSync(r.dataId);return rP(r.shape,a)},t.prototype.topk=function(r,a,s){return ir(r,"topk"),bX(this.readSync(r.dataId),r.shape,r.dtype,a)},t.prototype.min=function(r,a){ir(r,"min"),Wl("min",a,r.rank);for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],v=0;v<c;++v){var g=u[f+v];g<p&&(p=g)}d[h]=p}return l},t.prototype.minimum=function(r,a){return ir([r,a],"minimum"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.min(s,i)})},t.prototype.mod=function(r,a){return ir([r,a],"mod"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){var o=s%i;return s<0&&i<0||s>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(r,a){ir(r,"max"),Wl("max",a,r.rank);for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],v=0;v<c;++v){var g=u[f+v];g>p&&(p=g)}d[h]=p}return l},t.prototype.maximum=function(r,a){return ir([r,a],"maximum"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.max(s,i)})},t.prototype.all=function(r,a){ir(r,"all"),Wl("all",a,r.rank);for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],v=0;v<c;++v){var g=u[f+v];p=p&&g}d[h]=p}return l},t.prototype.any=function(r,a){ir(r,"any"),Wl("any",a,r.rank);for(var s=Co(r.shape,a),i=s[0],o=s[1],l=qn(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],v=0;v<c;++v){var g=u[f+v];p=p||g}d[h]=p}return l},t.prototype.squaredDifference=function(r,a){return ir([r,a],"squaredDifference"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){var o=s-i;return o*o})},t.prototype.ceil=function(r){ir(r,"ceil");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.ceil(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.floor=function(r){ir(r,"floor");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.floor(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.sign=function(r){ir(r,"x");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)a[i]<0?s[i]=-1:a[i]>0?s[i]=1:s[i]=0;return this.makeOutput(s,r.shape,"float32")},t.prototype.isNaN=function(r){ir(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Number.isNaN(a[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isInf=function(r){ir(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Math.abs(a[i])===1/0&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isFinite=function(r){ir(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Number.isFinite(a[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.round=function(r){ir(r,"round");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=Math.floor(a[i]);a[i]-o<.5?s[i]=Math.floor(a[i]):a[i]-o>.5?s[i]=Math.ceil(a[i]):s[i]=o%2==0?o:o+1}return this.makeOutput(s,r.shape,"float32")},t.prototype.exp=function(r){ir(r,"exp");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.exp(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.expm1=function(r){ir(r,"expm1");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.expm1(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.log=function(r){ir(r,"log");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.log(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.log1p=function(r){ir(r,"log1p");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.log1p(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.sqrt=function(r){ir(r,"sqrt");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.rsqrt=function(r){ir(r,"rsqrt");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=1/Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.reciprocal=function(r){ir(r,"reciprocal");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=1/a[i];return this.makeOutput(s,r.shape,"float32")},t.prototype.linear=function(r){return r},t.prototype.relu=function(r){ir(r,"relu");for(var a=qn(r.shape,r.dtype),s=this.readSync(a.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.max(0,i[o]);return a},t.prototype.relu6=function(r){ir(r,"relu");for(var a=qn(r.shape,r.dtype),s=this.readSync(a.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.min(Math.max(0,i[o]),6);return a},t.prototype.prelu=function(r,a){return ir([r,a],"prelu"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return s<0?i*s:s})},t.prototype.elu=function(r){ir(r,"elu");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=s[i];a[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(a,r.shape,"float32")},t.prototype.eluDer=function(r,a){ir([r,a],"eluDer");for(var s=new Float32Array(a.size),i=this.readSync(a.dataId),o=this.readSync(r.dataId),l=0;l<i.length;++l){var c=i[l];s[l]=c>=1?o[l]:o[l]*(c+1)}return this.makeOutput(s,a.shape,"float32")},t.prototype.selu=function(r){ir(r,"selu");for(var a=nP,s=sP,i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>=0?s*c:a*(Math.exp(c)-1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.clip=function(r,a,s){ir(r,"clip");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>s?s:c<a?a:c}return this.makeOutput(i,r.shape,"float32")},t.prototype.abs=function(r){for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.abs(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.complexAbs=function(r){for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<r.size;++i){var o=s[2*i],l=s[2*i+1];a[i]=Math.hypot(o,l)}return this.makeOutput(a,r.shape,"float32")},t.prototype.int=function(r){ir(r,"int");for(var a=new Int32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=s[i];return this.makeOutput(a,r.shape,"int32")},t.prototype.sigmoid=function(r){ir(r,"sigmoid");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=1/(1+Math.exp(-s[i]));return this.makeOutput(a,r.shape,"float32")},t.prototype.softplus=function(r){ir(r,"softplus");for(var a=Math.log(11920928955078125e-23)+2,s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o]>-a,c=i[o]<a,d=Math.exp(i[o]),u=void 0;u=c?d:l?i[o]:Math.log(1+d),s[o]=u}return this.makeOutput(s,r.shape,"float32")},t.prototype.sin=function(r){ir(r,"sin");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.sin(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.cos=function(r){ir(r,"cos");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.cos(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.tan=function(r){ir(r,"tan");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.tan(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.asin=function(r){ir(r,"asin");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.asin(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.acos=function(r){ir(r,"acos");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.acos(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atan=function(r){ir(r,"atan");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.atan(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atan2=function(r,a){return ir([r,a],"atan2"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.atan2(s,i)})},t.prototype.sinh=function(r){ir(r,"sinh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.sinh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.cosh=function(r){ir(r,"cosh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.cosh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.tanh=function(r){ir(r,"tanh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=mIe(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.asinh=function(r){ir(r,"asinh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.asinh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.acosh=function(r){ir(r,"acosh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.acosh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atanh=function(r){ir(r,"atanh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.atanh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.erf=function(r){ir(r,"erf");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=Math.sign(s[i]),l=Math.abs(s[i]),c=1/(1+.3275911*l);a[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(a,r.shape,"float32")},t.prototype.step=function(r,a){a===void 0&&(a=0),ir(r,"step");for(var s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o];isNaN(l)?s[o]=NaN:s[o]=l>0?1:a}return this.makeOutput(s,r.shape,"float32")},t.prototype.fusedConv2d=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.conv2d(a,s,i);return o&&(d=this.add(d,o)),l&&(d=KD(this,d,l,c)),d},t.prototype.conv2d=function(r,a,s){ir([r,a],"conv2d");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.dataFormat==="channelsLast",f=ua(s.outShape,r.dtype),p=r.strides[0],v=h?r.strides[1]:r.strides[2],g=h?r.strides[2]:1,b=h?1:r.strides[1],y=f.strides[0],S=h?f.strides[1]:f.strides[2],w=h?f.strides[2]:1,k=h?1:f.strides[1],C=this.readSync(r.dataId),_=this.readSync(a.dataId),E=f.values,T=0;T<s.batchSize;++T)for(var I=T*p,F=T*y,A=0;A<s.outHeight;++A)for(var P=F+A*S,q=A*s.strideHeight-u,V=0;V<i;V++){var Y=q+V*l;if(!(Y<0||Y>=s.inHeight))for(var B=V*a.strides[0],Q=I+Y*v,R=0;R<s.outWidth;++R)for(var Z=P+R*w,J=R*s.strideWidth-d,ie=0;ie<o;ie++){var M=J+ie*c;if(!(M<0||M>=s.inWidth))for(var z=Q+M*g,ee=B+ie*a.strides[1],ne=0;ne<s.inChannels;++ne){for(var W=C[z+ne*b],re=0;re<s.outChannels;++re)E[Z+re*k]+=W*_[ee+re];ee+=s.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(r,a,s){for(var i=s.filterDepth,o=s.filterHeight,l=s.filterWidth,c=s.dilationDepth,d=s.dilationHeight,u=s.dilationWidth,h=s.padInfo.front,f=s.padInfo.left,p=s.padInfo.top,v=ua(s.outShape,r.dtype),g=this.readSync(r.dataId),b=this.readSync(a.dataId),y=v.values,S=0;S<s.batchSize;++S)for(var w=S*r.strides[0],k=S*v.strides[0],C=0;C<s.outDepth;++C)for(var _=k+C*v.strides[1],E=C*s.strideDepth-h,T=0;T<i;T++){var I=E+T*c;if(!(I<0||I>=s.inDepth))for(var F=T*a.strides[0],A=w+I*r.strides[1],P=0;P<s.outHeight;++P)for(var q=_+P*v.strides[2],V=P*s.strideHeight-p,Y=0;Y<o;Y++){var B=V+Y*d;if(!(B<0||B>=s.inHeight))for(var Q=F+Y*a.strides[1],R=A+B*r.strides[2],Z=0;Z<s.outWidth;++Z)for(var J=q+Z*s.outChannels,ie=Z*s.strideWidth-f,M=0;M<l;M++){var z=ie+M*u;if(!(z<0||z>=s.inWidth))for(var ee=Q+M*a.strides[2],ne=R+z*s.inChannels,W=ee,re=0;re<s.inChannels;++re){for(var le=g[ne+re],te=0;te<s.outChannels;++te)y[J+te]+=le*b[W+te];W+=s.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(r,a,s){ir([r,a],"conv2dDerInput");for(var i=ua(s.inShape,"float32"),o=i.values,l=this.readSync(r.dataId),c=this.readSync(a.dataId),d=a.strides,u=d[0],h=d[1],f=d[2],p=s.batchSize,v=s.filterHeight,g=s.filterWidth,b=s.inChannels,y=s.inHeight,S=s.inWidth,w=s.outChannels,k=s.outHeight,C=s.outWidth,_=s.strideHeight,E=s.strideWidth,T=s.dataFormat,I=v-1-s.padInfo.top,F=g-1-s.padInfo.left,A=T==="channelsLast",P=i.strides[0],q=A?i.strides[1]:i.strides[2],V=A?i.strides[2]:1,Y=A?1:i.strides[1],B=r.strides[0],Q=A?r.strides[1]:r.strides[2],R=A?r.strides[2]:1,Z=A?1:r.strides[1],J=0;J<p;++J)for(var ie=0;ie<b;++ie)for(var M=0;M<y;++M)for(var z=M-I,ee=Math.max(0,Math.ceil(z/_)),ne=Math.min(k,(v+z)/_),W=0;W<S;++W){for(var re=W-F,le=Math.max(0,Math.ceil(re/E)),te=Math.min(C,(g+re)/E),K=0,de=ee;de<ne;++de)for(var H=de*_-z,se=le;se<te;++se)for(var be=B*J+Q*de+R*se,ue=u*(v-1-H)+h*(g-1-(se*E-re))+f*ie,oe=0;oe<w;++oe)K+=l[be+Z*oe]*c[ue+oe];o[P*J+q*M+V*W+Y*ie]=K}return i.toTensor()},t.prototype.conv3dDerInput=function(r,a,s){for(var i=ua(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=l[3],f=this.readSync(r.dataId),p=r.strides,v=p[0],g=p[1],b=p[2],y=p[3],S=this.readSync(a.dataId),w=a.strides,k=w[0],C=w[1],_=w[2],E=w[3],T=s.batchSize,I=s.filterDepth,F=s.filterHeight,A=s.filterWidth,P=s.inChannels,q=s.inDepth,V=s.inHeight,Y=s.inWidth,B=s.outChannels,Q=s.outDepth,R=s.outHeight,Z=s.outWidth,J=s.strideDepth,ie=s.strideHeight,M=s.strideWidth,z=I-1-s.padInfo.front,ee=F-1-s.padInfo.top,ne=A-1-s.padInfo.left,W=0;W<T;++W)for(var re=0;re<P;++re)for(var le=0;le<q;++le)for(var te=le-z,K=Math.max(0,Math.ceil(te/J)),de=Math.min(Q,(I+te)/J),H=0;H<V;++H)for(var se=H-ee,be=Math.max(0,Math.ceil(se/ie)),ue=Math.min(R,(F+se)/ie),oe=0;oe<Y;++oe){for(var ge=oe-ne,Ne=Math.max(0,Math.ceil(ge/M)),Me=Math.min(Z,(A+ge)/M),We=0,tt=K;tt<de;++tt)for(var mt=tt*J-te,Be=be;Be<ue;++Be)for(var dt=Be*ie-se,Dt=Ne;Dt<Me;++Dt)for(var It=v*W+g*tt+b*Be+y*Dt,zt=k*(I-1-mt)+C*(F-1-dt)+_*(A-1-(Dt*M-ge))+E*re,xe=0;xe<B;++xe)We+=f[It+xe]*S[zt+xe];o[c*W+d*le+u*H+h*oe+re]=We}return i.toTensor()},t.prototype.conv2dDerFilter=function(r,a,s){ir([r,a],"conv2dDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dataFormat==="channelsLast",u=ua(s.filterShape,"float32"),h=s.padInfo.left,f=s.padInfo.top,p=this.bufferSync(r),v=this.bufferSync(a),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((f-g)/i)),y=Math.min(s.outHeight,(s.inHeight+f-g)/i),S=0;S<c;++S)for(var w=Math.max(0,Math.ceil((h-S)/o)),k=Math.min(s.outWidth,(s.inWidth+h-S)/o),C=0;C<s.inChannels;++C)for(var _=0;_<s.outChannels;++_){for(var E=0,T=0;T<s.batchSize;++T)for(var I=b;I<y;++I)for(var F=g+I*i-f,A=w;A<k;++A){var P=S+A*o-h;E+=d?p.get(T,F,P,C)*v.get(T,I,A,_):p.get(T,C,F,P)*v.get(T,_,I,A)}u.set(E,g,S,C,_)}return u.toTensor()},t.prototype.conv3dDerFilter=function(r,a,s){for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=ua(s.filterShape,"float32"),f=h.values,p=h.strides,v=p[0],g=p[1],b=p[2],y=p[3],S=this.readSync(a.dataId),w=a.strides,k=w[0],C=w[1],_=w[2],E=w[3],T=this.readSync(r.dataId),I=r.strides,F=I[0],A=I[1],P=I[2],q=I[3],V=s.padInfo.front,Y=s.padInfo.left,B=s.padInfo.top,Q=0;Q<c;++Q)for(var R=Math.max(0,Math.ceil((V-Q)/i)),Z=Math.min(s.outDepth,(s.inDepth+V-Q)/i),J=Q*v,ie=0;ie<d;++ie)for(var M=Math.max(0,Math.ceil((B-ie)/o)),z=Math.min(s.outHeight,(s.inHeight+B-ie)/o),ee=ie*g+J,ne=0;ne<u;++ne)for(var W=Math.max(0,Math.ceil((Y-ne)/l)),re=Math.min(s.outWidth,(s.inWidth+Y-ne)/l),le=ne*b+ee,te=0;te<s.inChannels;++te)for(var K=te*y+le,de=0;de<s.outChannels;++de){for(var H=0,se=0;se<s.batchSize;++se)for(var be=se*F,ue=se*k,oe=R;oe<Z;++oe)for(var ge=(Q+oe*i-V)*A+be,Ne=oe*C+ue,Me=M;Me<z;++Me)for(var We=(ie+Me*o-B)*P+ge,tt=Me*_+Ne,mt=W;mt<re;++mt){var Be=mt*E+tt;H+=T[(ne+mt*l-Y)*q+We+te]*S[Be+de]}f[K+de]=H}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.depthwiseConv2D(a,s,i);return o&&(d=this.add(d,o)),l&&(d=KD(this,d,l,c)),d},t.prototype.depthwiseConv2D=function(r,a,s){ir([r,a],"depthwiseConv2D");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.outChannels/s.inChannels,f=ua(s.outShape,r.dtype),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=f.values,b=0;b<s.batchSize;++b)for(var y=b*r.strides[0],S=b*f.strides[0],w=0;w<s.outHeight;++w)for(var k=S+w*f.strides[1],C=w*s.strideHeight-d,_=0;_<i;++_){var E=C+_*l;if(!(E<0||E>=s.inHeight))for(var T=_*a.strides[0],I=y+E*r.strides[1],F=0;F<s.outWidth;++F)for(var A=k+F*f.strides[2],P=F*s.strideWidth-u,q=0;q<o;++q){var V=P+q*c;if(!(V<0||V>=s.inWidth))for(var Y=T+q*a.strides[1],B=I+V*s.inChannels,Q=A,R=Y,Z=0;Z<s.inChannels;++Z){for(var J=p[B+Z],ie=0;ie<h;++ie)g[Q+ie]+=J*v[R+ie];Q+=h,R+=h}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(r,a,s){ir([r,a],"depthwiseConv2DDerInput");for(var i=ua(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=this.readSync(r.dataId),f=r.strides,p=f[0],v=f[1],g=f[2],b=this.readSync(a.dataId),y=a.strides,S=y[0],w=y[1],k=y[2],C=s.batchSize,_=s.filterHeight,E=s.filterWidth,T=s.inChannels,I=s.inHeight,F=s.inWidth,A=s.outChannels,P=s.outHeight,q=s.outWidth,V=s.strideHeight,Y=s.strideWidth,B=_-1-s.padInfo.top,Q=E-1-s.padInfo.left,R=A/T,Z=0;Z<C;++Z)for(var J=0;J<T;++J)for(var ie=0;ie<I;++ie)for(var M=ie-B,z=Math.max(0,Math.ceil(M/V)),ee=Math.min(P,(_+M)/V),ne=0;ne<F;++ne){for(var W=ne-Q,re=Math.max(0,Math.ceil(W/Y)),le=Math.min(q,(E+W)/Y),te=0,K=z;K<ee;++K)for(var de=K*V-M,H=re;H<le;++H)for(var se=p*Z+v*K+g*H,be=S*(_-1-de)+w*(E-1-(H*Y-W))+k*J,ue=0;ue<R;++ue)te+=h[se+(J*R+ue)]*b[be+ue];o[c*Z+d*ie+u*ne+J]=te}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(r,a,s){ir([r,a],"depthwiseConv2DDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=ua(s.filterShape,"float32"),u=s.padInfo.left,h=s.padInfo.top,f=s.outChannels/s.inChannels,p=this.bufferSync(r),v=this.bufferSync(a),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((h-g)/i)),y=Math.min(s.outHeight,(s.inHeight+h-g)/i),S=0;S<c;++S)for(var w=Math.max(0,Math.ceil((u-S)/o)),k=Math.min(s.outWidth,(s.inWidth+u-S)/o),C=0;C<s.outChannels;++C){for(var _=Math.trunc(C/f),E=C%f,T=0,I=0;I<s.batchSize;++I)for(var F=b;F<y;++F)for(var A=g+F*i-h,P=w;P<k;++P){var q=S+P*o-u;T+=p.get(I,A,q,_)*v.get(I,F,P,C)}d.set(T,g,S,_,E)}return d.toTensor()},t.prototype.tile=function(r,a){return ir(r,"tile"),gX(this.bufferSync(r),a)},t.prototype.pad=function(r,a,s){ir(r,"pad");var i=a.map(function(f,p){return f[0]+r.shape[p]+f[1]}),o=a.map(function(f){return f[0]}),l=this.bufferSync(r),c=ua(i,r.dtype);s!==0&&c.values.fill(s);for(var d=0;d<r.size;d++){var u=l.indexToLoc(d),h=u.map(function(f,p){return f+o[p]});c.set.apply(c,[l.get.apply(l,u)].concat(h))}return c.toTensor()},t.prototype.transpose=function(r,a){ir(r,"transpose");for(var s=new Array(r.rank),i=0;i<s.length;i++)s[i]=r.shape[a[i]];var o=this.readSync(r.dataId),l=ua(s,r.dtype),c=this.bufferSync(r);for(i=0;i<r.size;++i){for(var d=c.indexToLoc(i),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[a[h]];var f=l.locToIndex(u);l.values[f]=o[i]}return l.toTensor()},t.prototype.gather=function(r,a,s){ir([r,a],"gather");var i=r.shape.slice(),o=this.readSync(a.dataId);i[s]=o.length;for(var l=ua(i,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d),h=u.slice();h[s]=o[u[s]];var f=c.locToIndex(h);l.values[d]=c.values[f]}return l.toTensor()},t.prototype.batchToSpaceND=function(r,a,s){ir([r],"batchToSpaceND");var i=a.reduce(function(h,f){return h*f}),o=F2(r.shape,a,i),l=L2(o.length,a.length),c=B2(r.shape,a,i),d=sX(s,a.length),u=iX(c,s,a.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,a,s){ir([r],"spaceToBatchND");var i=a.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+a.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=F2(c.shape,a,i,!1),u=L2(d.length,a.length,!1),h=B2(c.shape,a,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.pool=function(r,a,s){ir(r,"pool");for(var i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,u=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(r.dataId),g=ua(a.outShape,r.dtype),b=g.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],S=a.outShape[2]*a.outShape[3],w=a.outShape[3],k=0;k<a.batchSize;++k)for(var C=k*y,_=k*r.strides[0],E=0;E<a.inChannels;++E)for(var T=0;T<a.outHeight;++T)for(var I=T*i-h,F=Math.max(0,I),A=Math.min(a.inHeight,d+I),P=C+T*S,q=0;q<a.outWidth;++q){for(var V=q*o-f,Y=Math.max(0,V),B=Math.min(a.inWidth,u+V),Q=p,R=0,Z=0,J=F;J<A;J+=l){for(var ie=_+J*r.strides[1],M=Y;M<B;M+=c){var z=v[ie+M*r.strides[2]+E];s==="max"&&z>Q?Q=z:s==="avg"&&(R+=z,Z++)}if(isNaN(Q))break}b[P+q*w+E]=s==="avg"?R/Z:Q}return g.toTensor()},t.prototype.maxPool=function(r,a){return this.pool(r,a,"max")},t.prototype.maxPoolPositions=function(r,a){for(var s=ua(a.outShape,"int32"),i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,u=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,p=this.bufferSync(r),v=0;v<a.batchSize;++v)for(var g=0;g<a.inChannels;++g)for(var b=0;b<a.outHeight;++b){for(var y=b*i-h,S=y;S<0;)S+=l;for(var w=Math.min(a.inHeight,d+y),k=0;k<a.outWidth;++k){for(var C=k*o-f,_=C;_<0;)_+=c;for(var E=Math.min(a.inWidth,u+C),T=Number.NEGATIVE_INFINITY,I=-1,F=S;F<w;F+=l)for(var A=F-y,P=_;P<E;P+=c){var q=P-C,V=p.get(v,F,P,g);V>T&&(T=V,I=A*u+q)}s.set(I,v,b,k,g)}}return s.toTensor()},t.prototype.maxPoolBackprop=function(r,a,s,i){ir([a,s],"maxPoolBackprop");for(var o=this.maxPoolPositions(a,i),l=i.strideHeight,c=i.strideWidth,d=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,p=f-1-i.padInfo.left,v=h-1-i.padInfo.top,g=ua(a.shape,"float32"),b=this.bufferSync(o),y=this.bufferSync(r),S=0;S<i.batchSize;++S)for(var w=0;w<i.inChannels;++w)for(var k=0;k<i.inHeight;++k)for(var C=0;C<i.inWidth;++C){for(var _=k-v,E=C-p,T=0,I=0;I<h;I+=d){var F=(_+I)/l;if(!(F<0||F>=i.outHeight||Math.floor(F)!==F))for(var A=0;A<f;A+=u){var P=(E+A)/c;if(!(P<0||P>=i.outWidth||Math.floor(P)!==P)){var q=h*f-1-b.get(S,F,P,w)===I*f+A?1:0;q!==0&&(T+=y.get(S,F,P,w)*q)}}}g.set(T,S,k,C,w)}return g.toTensor()},t.prototype.avgPoolBackprop=function(r,a,s){ir([r,a],"avgPoolBackprop");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dilationHeight,u=s.dilationWidth,h=s.effectiveFilterHeight,f=s.effectiveFilterWidth,p=f-1-s.padInfo.left,v=h-1-s.padInfo.top,g=ua(a.shape,"float32"),b=1/(l*c),y=this.bufferSync(r),S=0;S<s.batchSize;++S)for(var w=0;w<s.inChannels;++w)for(var k=0;k<s.inHeight;++k)for(var C=0;C<s.inWidth;++C){for(var _=k-v,E=C-p,T=0,I=0;I<h;I+=d){var F=(_+I)/i;if(!(F<0||F>=s.outHeight||Math.floor(F)!==F))for(var A=0;A<f;A+=u){var P=(E+A)/o;P<0||P>=s.outWidth||Math.floor(P)!==P||(T+=y.get(S,F,P,w))}}g.set(T*b,S,k,C,w)}return g.toTensor()},t.prototype.pool3d=function(r,a,s){ir(r,"pool3d");for(var i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,d=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(r.dataId),w=ua(a.outShape,r.dtype),k=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[3]*a.outShape[4],T=a.outShape[4],I=0;I<a.batchSize;++I)for(var F=I*C,A=I*r.strides[0],P=0;P<a.inChannels;++P)for(var q=0;q<a.outDepth;++q){for(var V=q*i-v,Y=V;Y<0;)Y+=c;for(var B=Math.min(a.inDepth,h+V),Q=F+q*_,R=0;R<a.outHeight;++R){for(var Z=R*o-g,J=Z;J<0;)J+=d;for(var ie=Math.min(a.inHeight,f+Z),M=Q+R*E,z=0;z<a.outWidth;++z){for(var ee=z*l-b,ne=ee;ne<0;)ne+=u;for(var W=Math.min(a.inWidth,p+ee),re=M+z*T,le=y,te=0,K=0,de=Y;de<B;de+=c){for(var H=A+de*r.strides[1],se=J;se<ie;se+=d){for(var be=H+se*r.strides[2],ue=ne;ue<W;ue+=u){var oe=S[be+ue*r.strides[3]+P];if(s==="max"&&oe>le?le=oe:s==="avg"&&(te+=oe,K++),isNaN(le))break}if(isNaN(le))break}if(isNaN(le))break}k[re+P]=s==="avg"?te/K:le}}}return w.toTensor()},t.prototype.avgPool3d=function(r,a){return ir(r,"avgPool3d"),this.pool3d(r,a,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(r,a,s){ir([r,a],"avgPool3dBackprop");for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=s.dilationDepth,f=s.dilationHeight,p=s.dilationWidth,v=s.effectiveFilterDepth,g=s.effectiveFilterHeight,b=s.effectiveFilterWidth,y=v-1-s.padInfo.front,S=b-1-s.padInfo.left,w=g-1-s.padInfo.top,k=ua(a.shape,"float32"),C=1/(c*d*u),_=this.bufferSync(r),E=0;E<s.batchSize;++E)for(var T=0;T<s.inChannels;++T)for(var I=0;I<s.inDepth;++I)for(var F=0;F<s.inHeight;++F)for(var A=0;A<s.inWidth;++A){for(var P=I-y,q=F-w,V=A-S,Y=0,B=0;B<v;B+=h){var Q=(P+B)/i;if(!(Q<0||Q>=s.outDepth||Math.floor(Q)!==Q))for(var R=0;R<g;R+=f){var Z=(q+R)/o;if(!(Z<0||Z>=s.outHeight||Math.floor(Z)!==Z))for(var J=0;J<b;J+=p){var ie=(V+J)/l;ie<0||ie>=s.outWidth||Math.floor(ie)!==ie||(Y+=_.get(E,Q,Z,ie,T))}}}k.set(Y*C,E,I,F,A,T)}return k.toTensor()},t.prototype.maxPool3d=function(r,a){return ir(r,"maxPool3d"),this.pool3d(r,a,"max").toFloat()},t.prototype.maxPool3dPositions=function(r,a){for(var s=ua(a.outShape,"int32"),i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,d=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=this.bufferSync(r),S=0;S<a.batchSize;++S)for(var w=0;w<a.inChannels;++w)for(var k=0;k<a.outDepth;++k){for(var C=k*i-v,_=C;_<0;)_+=c;for(var E=Math.min(a.inDepth,h+C),T=0;T<a.outHeight;++T){for(var I=T*o-g,F=I;F<0;)F+=d;for(var A=Math.min(a.inHeight,f+I),P=0;P<a.outWidth;++P){for(var q=P*l-b,V=q;V<0;)V+=u;for(var Y=Math.min(a.inWidth,p+q),B=Number.NEGATIVE_INFINITY,Q=-1,R=_;R<E;R+=c)for(var Z=R-C,J=F;J<A;J+=d)for(var ie=J-I,M=V;M<Y;M+=u){var z=M-q,ee=y.get(S,R,J,M,w);ee>=B&&(B=ee,Q=Z*f*p+ie*f+z)}s.set(Q,S,k,T,P,w)}}}return s.toTensor()},t.prototype.maxPool3dBackprop=function(r,a,s,i){ir([a,s],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(a,i),l=i.strideDepth,c=i.strideHeight,d=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,g=i.effectiveFilterWidth,b=p-1-i.padInfo.front,y=g-1-i.padInfo.left,S=v-1-i.padInfo.top,w=ua(a.shape,"float32"),k=this.bufferSync(o),C=this.bufferSync(r),_=0;_<i.batchSize;++_)for(var E=0;E<i.inChannels;++E)for(var T=0;T<i.inDepth;++T)for(var I=0;I<i.inHeight;++I)for(var F=0;F<i.inWidth;++F){for(var A=T-b,P=I-S,q=F-y,V=0,Y=0;Y<p;Y+=u){var B=(A+Y)/l;if(!(B<0||B>=i.outDepth||Math.floor(B)!==B))for(var Q=0;Q<v;Q+=h){var R=(P+Q)/c;if(!(R<0||R>=i.outHeight||Math.floor(R)!==R))for(var Z=0;Z<g;Z+=f){var J=(q+Z)/d;if(!(J<0||J>=i.outWidth||Math.floor(J)!==J)){var ie=p*v*g-1-k.get(_,B,R,J,E)===Y*v*g+Q*g+Z?1:0;ie!==0&&(V+=C.get(_,B,R,J,E)*ie)}}}}w.set(V,_,T,I,F,E)}return w.toTensor()},t.prototype.cast=function(r,a){return mX(r,a,this)},t.prototype.reshape=function(r,a){return s3(r,a)},t.prototype.avgPool=function(r,a){return ir(r,"avgPool"),this.pool(r,a,"avg").toFloat()},t.prototype.resizeBilinear=function(r,a,s,i){ir(r,"resizeBilinear");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),f=new Float32Array(Fr([l,a,s,u])),p=[i&&a>1?c-1:c,i&&s>1?d-1:d],v=[i&&a>1?a-1:a,i&&s>1?s-1:s],g=0,b=p[0]/v[0],y=p[1]/v[1],S=0;S<l;S++)for(var w=0;w<a;w++)for(var k=b*w,C=Math.floor(k),_=k-C,E=Math.min(c-1,Math.ceil(k)),T=S*r.strides[0]+C*r.strides[1],I=S*r.strides[0]+E*r.strides[1],F=0;F<s;F++)for(var A=y*F,P=Math.floor(A),q=A-P,V=Math.min(d-1,Math.ceil(A)),Y=T+P*r.strides[2],B=I+P*r.strides[2],Q=T+V*r.strides[2],R=I+V*r.strides[2],Z=0;Z<u;Z++){var J=h[Y+Z],ie=h[B+Z],M=J+(h[Q+Z]-J)*q,z=M+(ie+(h[R+Z]-ie)*q-M)*_;f[g++]=z}return so(f,[l,a,s,u])},t.prototype.resizeBilinearBackprop=function(r,a,s){ir([r,a],"resizeBilinearBackprop");for(var i=a.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],f=u[2],p=new Float32Array(o*l*c*d),v=[s&&h>1?l-1:l,s&&f>1?c-1:c],g=[s&&h>1?h-1:h,s&&f>1?f-1:f],b=v[0]/g[0],y=v[1]/g[1],S=this.readSync(r.dataId),w=0,k=0;k<o;k++)for(var C=k*a.strides[0],_=0;_<h;_++)for(var E=_*b,T=Math.floor(E),I=Math.min(Math.ceil(E),l-1),F=C+T*a.strides[1],A=C+I*a.strides[1],P=E-T,q=1-P,V=0;V<f;V++)for(var Y=V*y,B=Math.floor(Y),Q=Math.min(Math.ceil(Y),c-1),R=Y-B,Z=1-R,J=F+B*a.strides[2],ie=F+Q*a.strides[2],M=A+B*a.strides[2],z=A+Q*a.strides[2],ee=q*Z,ne=q*R,W=P*Z,re=P*R,le=0;le<d;le++){var te=S[w++];p[J+le]+=te*ee,p[ie+le]+=te*ne,p[M+le]+=te*W,p[z+le]+=te*re}return fl(p,[o,c,l,d],a.dtype)},t.prototype.resizeNearestNeighbor=function(r,a,s,i){ir(r,"resizeNearestNeighbor");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),f=new Float32Array(l*a*s*u),p=[i&&a>1?c-1:c,i&&s>1?d-1:d],v=[i&&a>1?a-1:a,i&&s>1?s-1:s],g=p[0]/v[0],b=p[1]/v[1],y=0,S=0;S<l;S++)for(var w=S*r.strides[0],k=0;k<a;k++)for(var C=g*k,_=w+Math.min(c-1,i?Math.round(C):Math.floor(C))*r.strides[1],E=0;E<s;E++)for(var T=b*E,I=_+Math.min(d-1,i?Math.round(T):Math.floor(T))*r.strides[2],F=0;F<u;F++){var A=h[I+F];f[y++]=A}return so(f,[l,a,s,u],r.dtype)},t.prototype.resizeNearestNeighborBackprop=function(r,a,s){ir([r,a],"resizeNearestNeighborBackprop");for(var i=a.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],f=u[2],p=new Float32Array(o*l*c*d),v=this.readSync(r.dataId),g=[s&&h>1?l-1:l,s&&f>1?c-1:c],b=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=g[0]/b[0],S=g[1]/b[1],w=1/y,k=1/S,C=2*Math.ceil(w)+2,_=2*Math.ceil(k)+2,E=0;E<o;E++)for(var T=E*a.strides[0],I=0;I<l;I++)for(var F=T+I*a.strides[1],A=Math.floor(I*w),P=Math.floor(A-C/2),q=0;q<c;q++)for(var V=F+q*a.strides[2],Y=Math.floor(q*k),B=Math.floor(Y-_/2),Q=0;Q<d;Q++){for(var R=0,Z=0;Z<C;Z++){var J=Z+P;if(!(J<0||J>=h)){var ie=T+J*r.strides[1],M=J*y;if(I===Math.min(l-1,s?Math.round(M):Math.floor(M)))for(var z=0;z<_;z++){var ee=z+B;if(!(ee<0||ee>=f)){var ne=ie+ee*r.strides[2],W=ee*S;q===Math.min(c-1,s?Math.round(W):Math.floor(W))&&(R+=v[ne+Q])}}}}p[V+Q]=R}return fl(p,a.shape,a.dtype)},t.prototype.batchNormalization=function(r,a,s,i,o,l){ir([r,a,s,o,l],"batchNorm");for(var c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=this.readSync(s.dataId),h=o?this.readSync(o.dataId):new Float32Array([1]),f=l?this.readSync(l.dataId):new Float32Array([0]),p=new Float32Array(c.length),v=f.length,g=h.length,b=u.length,y=d.length,S=0,w=0,k=0,C=0,_=0;_<c.length;++_)p[_]=f[S++]+(c[_]-d[w++])*h[k++]/Math.sqrt(u[C++]+i),S>=v&&(S=0),w>=y&&(w=0),k>=g&&(k=0),C>=b&&(C=0);return fl(p,r.shape)},t.prototype.localResponseNormalization4D=function(r,a,s,i,o){ir(r,"localResponseNormalization4D");var l=r.shape[3],c=l-1,d=this.readSync(r.dataId),u=r.size,h=new Float32Array(u);function f(b){for(var y=b%l,S=b-y+Math.max(0,y-a),w=b-y+Math.min(y+a,c),k=0;S<=w;S++){var C=d[S];k+=C*C}return k}for(var p=0;p<u;p++){var v=f(p),g=d[p]*Math.pow(s+i*v,-o);h[p]=g}return fl(h,r.shape)},t.prototype.LRNGrad=function(r,a,s,i,o,l,c){ir(r,"LRNGrad");for(var d=r.shape[3],u=this.readSync(r.dataId),h=this.readSync(a.dataId),f=this.readSync(s.dataId),p=new Float32Array(r.size),v=r.size,g=0;g<v;g++){for(var b=g%d,y=g-b+Math.max(0,b-i),S=g-b+Math.min(d,b+i+1),w=0,k=y;k<S;k++)w+=Math.pow(h[k],2);for(w=l*w+o,k=y;k<S;k++){var C=-2*l*c*h[k]*f[g]/w;g===k&&(C+=Math.pow(w,-c)),C*=u[g],p[k]+=C}}return fl(p,r.shape)},t.prototype.multinomial=function(r,a,s,i){ir(r,"multinomial");for(var o=a?r:Cf(r),l=o.shape[0],c=o.shape[1],d=qn([l,s],"int32"),u=this.readSync(d.dataId),h=this.readSync(o.dataId),f=0;f<l;++f){var p=f*c,v=new Float32Array(c-1);v[0]=h[p];for(var g=1;g<v.length;++g)v[g]=v[g-1]+h[p+g];for(var b=vC(i.toString()),y=f*s,S=0;S<s;++S){var w=b();u[y+S]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){u[y+S]=k;break}}}return d},t.prototype.oneHot=function(r,a,s,i){ir(r,"oneHot");var o=new Float32Array(r.size*a);o.fill(i);for(var l=this.readSync(r.dataId),c=0;c<r.size;++c)l[c]>=0&&l[c]<a&&(o[c*a+l[c]]=s);return Bm(o,[r.size,a],"int32")},t.prototype.nonMaxSuppression=function(r,a,s,i,o){return ir(r,"nonMaxSuppression"),eP(this.readSync(r.dataId),this.readSync(a.dataId),s,i,o)},t.prototype.fft=function(r){return this.fftBatch(r,!1)},t.prototype.ifft=function(r){return this.fftBatch(r,!0)},t.prototype.fftBatch=function(r,a){for(var s=r.shape[0],i=r.shape[1],o=ua(r.shape,"float32"),l=ua(r.shape,"float32"),c=$c(r).as2D(s,i),d=Mu(r).as2D(s,i),u=0;u<s;u++)for(var h=c.slice([u,0],[1,i]),f=d.slice([u,0],[1,i]),p=eo(h,f),v=this.readSync(this.fftImpl(p,a).dataId),g=0;g<i;g++){var b=w9(v,g);o.values[u*i+g]=b.real,l.values[u*i+g]=b.imag}return eo(o.toTensor(),l.toTensor()).as2D(s,i)},t.prototype.fftImpl=function(r,a){var s=r.as1D(),i=s.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(s,i,a).as2D(r.shape[0],r.shape[1]);return a&&(o=eo($c(o).div(wr(i)),Mu(o).div(wr(i)))),o}var l=this.readSync(r.dataId),c=function(d){for(var u=new Float32Array(d.length/2),h=new Float32Array(d.length/2),f=0;f<d.length;f+=2)u[f/2]=d[f],h[f/2]=d[f+1];return{real:u,imag:h}}(this.fourierTransformByMatmul(l,i,a));return eo(c.real,c.imag).as2D(r.shape[0],r.shape[1])},t.prototype.isExponentOf2=function(r){return(r&r-1)==0},t.prototype.fftRadix2=function(r,a,s){if(a===1)return r;var i=this.readSync(r.dataId),o=a/2,l=function(y){for(var S=Math.ceil(y.length/4),w=new Float32Array(S),k=new Float32Array(S),C=0;C<y.length;C+=4)w[Math.floor(C/4)]=y[C],k[Math.floor(C/4)]=y[C+1];return{real:w,imag:k}}(i),c=eo(l.real,l.imag).as1D(),d=function(y){for(var S=Math.floor(y.length/4),w=new Float32Array(S),k=new Float32Array(S),C=2;C<y.length;C+=4)w[Math.floor(C/4)]=y[C],k[Math.floor(C/4)]=y[C+1];return{real:w,imag:k}}(i),u=eo(d.real,d.imag).as1D();c=this.fftRadix2(c,o,s),u=this.fftRadix2(u,o,s);var h=function(y,S){for(var w=new Float32Array(y/2),k=new Float32Array(y/2),C=0;C<Math.ceil(y/2);C++){var _=(S?2:-2)*Math.PI*(C/y);w[C]=Math.cos(_),k[C]=Math.sin(_)}return{real:w,imag:k}}(a,s),f=eo(h.real,h.imag).mul(u),p=c.add(f),v=c.sub(f),g=$c(p).concat($c(v)),b=Mu(p).concat(Mu(v));return eo(g,b).as1D()},t.prototype.fourierTransformByMatmul=function(r,a,s){for(var i=new Float32Array(2*a),o=0;o<a;o++){for(var l=0,c=0,d=0;d<a;d++){var u=GPe(o*d,a,s),h=w9(r,d);l+=h.real*u.real-h.imag*u.imag,c+=h.real*u.imag+h.imag*u.real}s&&(l/=a,c/=a),WPe(i,l,c,o)}return i},t.prototype.depthToSpace=function(r,a,s){Ge(s==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s}),Ge(a>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+a});for(var i=r.shape[0],o=r.shape[1],l=r.shape[2],c=r.shape[3],d=o*a,u=l*a,h=c/(a*a),f=this.readSync(r.dataId),p=new Float32Array(i*d*u*h),v=0,g=0;g<i;++g)for(var b=0;b<d;++b)for(var y=Math.floor(b/a),S=b%a,w=0;w<u;++w)for(var k=Math.floor(w/a),C=(S*a+w%a)*h,_=0;_<h;++_){var E=_+C+c*(k+l*(y+o*g));p[v++]=f[E]}return fl(p,[i,d,u,h])},t.prototype.broadcastedBinaryOp=function(r,a,s,i){var o=Ia(r.shape,a.shape),l=ua(o,s),c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=Im(r.shape,o),h=Im(a.shape,o),f=l.values;if(u.length+h.length===0)for(var p=0;p<f.length;++p)f[p]=i(c[p%c.length],d[p%d.length]);else{var v=this.bufferSync(r),g=this.bufferSync(a),b=function(y){var S=l.indexToLoc(y),w=S.slice(-r.rank);u.forEach(function(E){return w[E]=0});var k=v.locToIndex(w),C=S.slice(-a.rank);h.forEach(function(E){return C[E]=0});var _=g.locToIndex(C);f[y]=i(c[k],d[_])};for(p=0;p<f.length;++p)b(p)}return l.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(r,a,s){var i=Ia(r.shape,a.shape),o=ua(i,"float32"),l=ua(i,"float32"),c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=Im(r.shape,i),h=Im(a.shape,i),f=o.values,p=l.values;if(u.length+h.length===0)for(var v=0;v<f.length;v++){var g=v%c.length,b=v%d.length,y=s(c[2*g],c[2*g+1],d[2*b],d[2*b+1]);f[v]=y.real,p[v]=y.imag}else{var S=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=this.bufferSync(this.data.get(a.dataId).complexTensors.real),k=function(C){var _=o.indexToLoc(C),E=_.slice(-r.rank);u.forEach(function(P){return E[P]=0});var T=S.locToIndex(E),I=_.slice(-a.rank);h.forEach(function(P){return I[P]=0});var F=w.locToIndex(I),A=s(c[2*T],c[2*T+1],d[2*F],d[2*F+1]);f[C]=A.real,p[C]=A.imag};for(v=0;v<f.length;v++)k(v)}return this.complex(o.toTensor(),l.toTensor())},t.prototype.split=function(r,a,s){return vX(r,a,s)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(r,a,s,i,o,l){for(var c=r.shape,d=c[0],u=c[1],h=c[2],f=c[3],p=a.shape[0],v=i[0],g=i[1],b=ua([p,v,g,f],"float32"),y=this.readSync(a.dataId),S=this.readSync(s.dataId),w=this.readSync(r.dataId),k=r.strides,C=b.strides,_=0;_<p;_++){var E=4*_,T=y[E],I=y[E+1],F=y[E+2],A=y[E+3],P=S[_];if(!(P>=d))for(var q=v>1?(F-T)*(u-1)/(v-1):0,V=g>1?(A-I)*(h-1)/(g-1):0,Y=0;Y<v;Y++){var B=v>1?T*(u-1)+Y*q:.5*(T+F)*(u-1);if(B<0||B>u-1)for(var Q=0;Q<g;Q++)for(var R=0;R<f;R++){var Z=R+Q*C[2]+Y*C[1]+_*C[0];b.values[Z]=l}else if(o==="bilinear"){var J=Math.floor(B),ie=Math.ceil(B),M=B-J;for(Q=0;Q<g;Q++)if((de=g>1?I*(h-1)+Q*V:.5*(I+A)*(h-1))<0||de>h-1)for(R=0;R<f;R++)Z=R+Q*C[2]+Y*C[1]+_*C[0],b.values[Z]=l;else{var z=Math.floor(de),ee=Math.ceil(de),ne=de-z;for(R=0;R<f;R++){var W=w[Z=R+z*k[2]+J*k[1]+P*k[0]],re=w[Z=R+ee*k[2]+J*k[1]+P*k[0]],le=w[Z=R+z*k[2]+ie*k[1]+P*k[0]],te=W+(re-W)*ne,K=le+(w[Z=R+ee*k[2]+ie*k[1]+P*k[0]]-le)*ne;Z=R+Q*C[2]+Y*C[1]+_*C[0],b.values[Z]=te+(K-te)*M}}}else for(Q=0;Q<g;++Q){var de;if((de=g>1?I*(h-1)+Q*V:.5*(I+A)*(h-1))<0||de>h-1)for(R=0;R<f;R++)Z=R+Q*C[2]+Y*C[1]+_*C[0],b.values[Z]=l;else{var H=Math.round(de),se=Math.round(B);for(R=0;R<f;R++){var be=R+H*k[2]+se*k[1]+P*k[0],ue=R+Q*C[2]+Y*C[1]+_*C[0];b.values[ue]=w[be]}}}}}return b.toTensor()},t.prototype.sparseToDense=function(r,a,s,i){var o=U2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.sliceSize,u=o.strides,h=o.outputSize;return this.scatter(r,a,s,h,d,c,l,u,i,!1)},t.prototype.gatherND=function(r,a){var s=a.shape,i=s[s.length-1],o=oX(r,a),l=o[0],c=o[1],d=o[2],u=o[3];if(c===0)return so([],l,r.dtype);for(var h=new Zy([c,d],r.dtype),f=this.readSync(a.dataId),p=this.readSync(r.dataId),v=0;v<c;v++){for(var g=[],b=0,y=0;y<i;y++){var S=f[v*i+y];b+=S*u[y],g.push(S)}if(b<0||b>=r.size/d)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var w=0;w<d;w++)h.values[v*d+w]=p[b*d+w]}return h.toTensor().reshape(l)},t.prototype.scatterND=function(r,a,s){var i=U2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=wr(0);return this.scatter(r,a,s,u,c,l,o,d,h,!0)},t.prototype.fill=function(r,a,s){var i=A2(s=s||L1(a),Fr(r));return i.fill(a),ft.makeTensor(i,r,s,this)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){var a=A2(r.dtype,Fr(r.shape));return this.makeOutput(a,r.shape,r.dtype)},t.prototype.linspace=function(r,a,s){return pX(r,a,s)},t.prototype.scatter=function(r,a,s,i,o,l,c,d,u,h){var f=[i/o,o],p=this.readSync(r.dataId),v=this.readSync(a.dataId);if(i===0)return so([],s,a.dtype);var g=new Zy(f,a.dtype);g.values.fill(this.readSync(u.dataId)[0]);for(var b=0;b<l;b++){for(var y=[],S=0,w=0;w<c;w++){var k=p[b*c+w];y.push(k),S+=k*d[w]}if(S<0||S>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+s);for(var C=0;C<o;C++)h?g.values[S*o+C]+=v[b*o+C]:g.values[S*o+C]=a.rank===0?v[0]:v[b*o+C]}return g.toTensor().reshape(s)},t}(hX);ft.registerBackend("cpu",function(){return new fLe},1);for(var XD=0,H9=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs,s=t,i=s.boxes,o=s.scores,l=a,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,f=r;ir(i,"NonMaxSuppressionWithScore");var p=tP(f.data.get(i.dataId).values,f.data.get(o.dataId).values,c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t.x,s=r;ir(a,"square");for(var i=s.data.get(a.dataId).values,o=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];o[l]=c*c}return{dataId:s.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:r1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t,s=a.a,i=a.b,o=r;ir([s,i],r1);var l=o.data.get(s.dataId).values,c=o.data.get(i.dataId).values,d=function(f,p,v,g,b,y){var S=Ia(f,p),w=S.length,k=Gu(S),C=Jy(b,Fr(S)),_=f.length,E=p.length,T=Gu(f),I=Gu(p),F=Im(f,S),A=Im(p,S);if(F.length+A.length===0)for(var P=0;P<C.length;++P)C[P]=y(v[P%v.length],g[P%g.length]);else{var q=function(V){var Y=wIe(V,w,k),B=Y.slice(-_);F.forEach(function(J){return B[J]=0});var Q=m9(B,_,T),R=Y.slice(-E);A.forEach(function(J){return R[J]=0});var Z=m9(R,E,I);C[V]=y(v[Q],g[Z])};for(P=0;P<C.length;++P)q(P)}return[C,S]}(s.shape,i.shape,l,c,s.dtype,function(f,p){var v=f-p;return v*v}),u=d[0],h=d[1];return{dataId:o.write(u,h,s.dtype),shape:h,dtype:s.dtype}}}];XD<H9.length;XD++)UK(H9[XD]);var e0,mLe=function(e){this.variableNames=["A"];var t=Po(),r=e[0],a=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+a+".0, "+r+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},pLe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Po(),r=e[0],a=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+a+".0, "+r+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var QD=0,W9=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs,s=t.pixels,i=a.numChannels,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,c=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=c[0],u=c[1],h=[u,d],f=[u,d,i];(l||o)&&(e0==null&&(e0=document.createElement("canvas").getContext("2d")),e0.canvas.width=d,e0.canvas.height=u,e0.drawImage(s,0,0,d,u),s=e0.canvas);var p=r.makeTensorInfo(h,"int32");r.texData.get(p.dataId).usage=ec.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),s);var v=Wt().getBool("WEBGL_PACK")?new pLe(f):new mLe(f),g=r.runWebGLProgram(v,[p],"int32");return r.disposeData(p.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs;O2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,i=s.boxes,o=s.scores,l=a,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,f=r,p=tP(f.readSync(i.dataId),f.readSync(o.dataId),c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t.x,s=r,i=new ga(a.shape,"return x * x;");return s.runWebGLProgram(i,[a],a.dtype)}},{kernelName:r1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t,s=a.a,i=a.b,o=r,l=Wt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Uh("return (a - b) * (a - b);",s.shape,i.shape):new Ss("return (a - b) * (a - b);",s.shape,i.shape);return o.compileAndRun(l,[s,i])}}];QD<W9.length;QD++)UK(W9[QD]);for(var JD=0,G9=[{kernelName:"Square",gradFunc:function(e,t){var r=t[0];return{x:function(){return e.mul(r.toFloat().mul(2))}}}},{kernelName:r1,gradFunc:function(e,t){var r=t[0],a=t[1],s=wr(2);return{a:function(){return Fo(e,Fo(s,ji(r,a)))},b:function(){return Fo(e,Fo(s,ji(a,r)))}}}}];JD<G9.length;JD++)hIe(G9[JD]);var xLe=function(){function e(){}return e.prototype.fetch=function(t,r){return fetch(t,r)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return new TextDecoder(r).decode(t)},e}();Wt().get("IS_BROWSER")&&Wt().setPlatform("browser",new xLe);var ZD,vLe=function(){return require("node-fetch")},gLe=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,r){return Wt().global.fetch!=null?Wt().global.fetch(t,r):(ZD==null&&(ZD=vLe()),ZD(t,r))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)},e}();Wt().get("IS_NODE")&&Wt().setPlatform("node",new gLe);var l3={float32:4,int32:4,uint16:2,uint8:1,bool:1},G2=4;function cQ(e,t){for(var r={},a=0,s=function(l){var c=l.name,d=l.dtype,u=l.shape,h=Fr(u),f=void 0;if("quantization"in l){var p=l.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=l3[p.dtype],g=e.slice(a,a+h*v),b=p.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(d==="float32")f=Float32Array.from(b,function(_){return _*p.scale+p.min});else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);f=Int32Array.from(b,function(_){return Math.round(_*p.scale+p.min)})}a+=h*v}else if(d==="string"){var y=Fr(l.shape);f=[];for(var S=0;S<y;S++){var w=new Uint32Array(e.slice(a,a+G2))[0];a+=G2;var k=new Uint8Array(e.slice(a,a+w));f.push(k),a+=w}}else{var C=l3[d];if(g=e.slice(a,a+h*C),d==="float32")f=new Float32Array(g);else if(d==="int32")f=new Int32Array(g);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);f=new Uint8Array(g)}a+=h*C}r[c]=so(f,u,d)},i=0,o=t;i<o.length;i++)s(o[i]);return r}function bLe(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,r=[];e.forEach(function(i){if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var a=new Uint8Array(t),s=0;return r.forEach(function(i){a.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),a.buffer}var c3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Y9(e){return c3?Buffer.byteLength(e):new Blob([e]).size}function yP(e){var t=0;e.forEach(function(s){t+=s.byteLength});var r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(new Uint8Array(s),a),a+=s.byteLength}),r.buffer}function K9(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function H1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Y9(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Y9(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var tc=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,r){return e.getHandlers(t,"load",r)},e.getHandlers=function(t,r,a){var s=[];return(r==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,a);o!==null&&s.push(o)}),s},e}(),T0="://",Um=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,r){Ge(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(T0)&&(t=t.slice(0,t.indexOf(T0))),Ge(t.length>0,function(){return"scheme must not be an empty string."});var a=e.getInstance();Ge(a.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),a.managers[t]=r},e.getManager=function(t){var r=this.getInstance().managers[t];if(r==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return r},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function ow(e){if(e.indexOf(T0)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Um.getSchemes().join(","));return{scheme:e.split(T0)[0],path:e.split(T0)[1]}}function X9(e,t,r){return r===void 0&&(r=!1),Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return Ge(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),Ge((a=tc.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),Ge(a.length<2,function(){return"Copying failed because more than one ("+a.length+") load handlers for source URL "+e+"."}),s=a[0],Ge((i=tc.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),Ge(i.length<2,function(){return"Copying failed because more than one ("+a.length+") save handlers for destination URL "+t+"."}),o=i[0],l=ow(e).scheme,c=ow(e).path,d=l===ow(e).scheme,[4,s.load()];case 1:return u=f.sent(),r&&d?[4,Um.getManager(l).removeModel(c)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,o.save(u)];case 4:return h=f.sent(),!r||d?[3,6]:[4,Um.getManager(l).removeModel(c)];case 5:f.sent(),f.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var hx="models_store",Pm="model_info_store";function dQ(){if(!Wt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function d3(e){var t=e.result;t.createObjectStore(hx,{keyPath:"modelPath"}),t.createObjectStore(Pm,{keyPath:"modelPath"})}var I0=function(){function e(t){if(this.indexedDB=dQ(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,r){var a=this;return new Promise(function(s,i){var o=a.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return d3(o)},o.onsuccess=function(){var l=o.result;if(r==null){var c=l.transaction(hx,"readonly"),d=c.objectStore(hx).get(a.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),i(new Error("Cannot find model with path '"+a.modelPath+"' in IndexedDB."));s(d.result.modelArtifacts)},d.onerror=function(g){return l.close(),i(d.error)},c.oncomplete=function(){return l.close()}}else{var u,h=H1(r),f=l.transaction(Pm,"readwrite"),p=f.objectStore(Pm),v=p.put({modelPath:a.modelPath,modelArtifactsInfo:h});v.onsuccess=function(){var g=(u=l.transaction(hx,"readwrite")).objectStore(hx).put({modelPath:a.modelPath,modelArtifacts:r,modelArtifactsInfo:h});g.onsuccess=function(){return s({modelArtifactsInfo:h})},g.onerror=function(b){var y=(p=f.objectStore(Pm)).delete(a.modelPath);y.onsuccess=function(){return l.close(),i(g.error)},y.onerror=function(S){return l.close(),i(g.error)}}},v.onerror=function(g){return l.close(),i(v.error)},f.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}}},o.onerror=function(l){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),Q9=function(e){return Wt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(I0.URL_SCHEME)?(t=e.slice(I0.URL_SCHEME.length),new I0(t)):null;var t};tc.registerSaveRouter(Q9),tc.registerLoadRouter(Q9);var yLe=function(){function e(){this.indexedDB=dQ()}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t=this;return Or(this,function(r){return[2,new Promise(function(a,s){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return d3(i)},i.onsuccess=function(){var o=i.result,l=o.transaction(Pm,"readonly"),c=l.objectStore(Pm).getAll();c.onsuccess=function(){for(var d={},u=0,h=c.result;u<h.length;u++){var f=h[u];d[f.modelPath]=f.modelArtifactsInfo}a(d)},c.onerror=function(d){return o.close(),s(c.error)},l.oncomplete=function(){return o.close()}},i.onerror=function(o){return s(i.error)}})]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(a){var s;return t=(s=t).startsWith(I0.URL_SCHEME)?s.slice(I0.URL_SCHEME.length):s,[2,new Promise(function(i,o){var l=r.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return d3(l)},l.onsuccess=function(){var c,d=l.result,u=d.transaction(Pm,"readwrite"),h=u.objectStore(Pm),f=h.get(t);f.onsuccess=function(){if(f.result==null)return d.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=h.delete(t),v=function(){var g=(c=d.transaction(hx,"readwrite")).objectStore(hx).delete(t);g.onsuccess=function(){return i(f.result.modelArtifactsInfo)},g.onerror=function(b){return o(f.error)}};p.onsuccess=v,p.onerror=function(g){return v(),d.close(),o(f.error)}},f.onerror=function(p){return d.close(),o(f.error)},u.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return o(l.error)}})]})})},e}();if(Wt().getBool("IS_BROWSER"))try{Um.registerManager(I0.URL_SCHEME,new yLe)}catch{}var qh="/",d0="tensorflowjs_models",uQ="info",jLe="model_topology",NLe="weight_specs",wLe="weight_data",SLe="model_metadata";function hQ(e){return{info:[d0,e,uQ].join(qh),topology:[d0,e,jLe].join(qh),weightSpecs:[d0,e,NLe].join(qh),weightData:[d0,e,wLe].join(qh),modelMetadata:[d0,e,SLe].join(qh)}}function CLe(e){var t=e.split(qh);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(qh)}var P0=function(){function e(t){if(!Wt().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=hQ(this.modelPath)}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s;return Or(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(t.modelTopology),a=JSON.stringify(t.weightSpecs),s=H1(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(o){if(c3)return Buffer.from(o).toString("base64");for(var l=new Uint8Array(o),c="",d=0,u=l.length;d<u;d++)c+=String.fromCharCode(l[d]);return btoa(c)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:s}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+s.modelTopologyBytes+", weightSpecsBytes="+s.weightSpecsBytes+", weightDataBytes="+s.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o,l;return Or(this,function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},(a=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=a,(s=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=s,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,r.userDefinedMetadata=o.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return r.weightData=function(d){if(c3){var u=Buffer.from(d,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var h=atob(d),f=new Uint8Array(h.length),p=0;p<h.length;++p)f.set([h.charCodeAt(p)],p);return f.buffer}(l),[2,r]})})},e.URL_SCHEME="localstorage://",e}(),J9=function(e){return Wt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(P0.URL_SCHEME)?(t=e.slice(P0.URL_SCHEME.length),new P0(t)):null;var t};tc.registerSaveRouter(J9),tc.registerLoadRouter(J9);var kLe=function(){function e(){Ge(Wt().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),Ge(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o;return Or(this,function(l){for(t={},r=d0+qh,a=qh+uQ,s=0;s<this.LS.length;++s)(i=this.LS.key(s)).startsWith(r)&&i.endsWith(a)&&(o=CLe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){var i;if(t=(i=t).startsWith(P0.URL_SCHEME)?i.slice(P0.URL_SCHEME.length):i,r=hQ(t),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+t+"'");return a=JSON.parse(this.LS.getItem(r.info)),this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),[2,a]})})},e}();if(Wt().getBool("IS_BROWSER"))try{Um.registerManager(P0.URL_SCHEME,new kLe)}catch{}var ELe="model",_Le=".json",DLe=".weights.bin";function Z9(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var e5=function(){function e(t){if(!Wt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=ELe),this.modelTopologyFileName=t+_Le,this.weightDataFileName=t+DLe}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l;return Or(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:a},i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,Z9(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),t.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=r,[4,Z9(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:H1(t)}]}})})},e.URL_SCHEME="downloads://",e}(),ALe=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a=this;return Or(this,function(s){return t=this.files[0],r=this.files.slice(1),[2,new Promise(function(i,o){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),u=d.modelTopology;if(u!=null){r.length===0&&i({modelTopology:u});var h=d.weightsManifest;if(h!=null){var f;try{f=a.checkManifestAndWeightFiles(h,r)}catch(b){return void o(b)}var p=[],v=[],g=[];h.forEach(function(b){b.paths.forEach(function(y){v.push(y),g.push(null)}),p.push.apply(p,b.weights)}),h.forEach(function(b){b.paths.forEach(function(y){var S=new FileReader;S.onload=function(w){var k=w.target.result,C=v.indexOf(y);g[C]=k,g.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:yP(g),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},S.onerror=function(w){return o("Failed to weights data from file of path '"+y+"'.")},S.readAsArrayBuffer(f[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},l.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,r){for(var a=[],s=r.map(function(c){return K9(c.name)}),i={},o=0,l=t;o<l.length;o++)l[o].paths.forEach(function(c){var d=K9(c);if(a.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(a.push(d),s.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");i[c]=r[s.indexOf(d)]});if(a.length!==r.length)throw new Error("Mismatch in the number of files in weights manifest ("+a.length+") and the number of weight files provided ("+r.length+").");return i},e}();function eU(e,t,r,a){(function(i){Ge(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){Ge(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),Ge(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),Ge(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(r=r??0,a=a??1);var s=0;return Promise.all(e.map(function(i){return i.then(function(o){var l=r+ ++s/e.length*(a-r);return t(l),o}),i}))}function fQ(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u;return Or(this,function(h){switch(h.label){case 0:return t==null&&(t={}),r=t.fetchFunc==null?Wt().platform.fetch:t.fetchFunc,a=e.map(function(f){return r(f,t.requestInit,{isBinary:!0})}),s=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(a)];case 1:return o=h.sent(),[3,4];case 2:return[4,eU(a,t.onProgress,s,i)];case 3:o=h.sent(),h.label=4;case 4:return l=o.map(function(f){return f.arrayBuffer()}),c=.5,d=1,t.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return u=h.sent(),[3,8];case 6:return[4,eU(l,t.onProgress,c,d)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function tU(e){var t=this;return function(r,a,s){return a===void 0&&(a=""),Pr(t,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,v;return Or(this,function(g){switch(g.label){case 0:if(i=r.map(function(){return!1}),o={},l=s!=null?s.map(function(){return!1}):[],c=[],r.forEach(function(b,y){var S=0;b.weights.forEach(function(w){var k="quantization"in w?w.quantization.dtype:w.dtype,C=l3[k]*Fr(w.shape),_=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:w,groupOffset:S,sizeBytes:C})};s!=null?s.forEach(function(E,T){E===w.name&&(_(),l[T]=!0)}):_(),c.push(w.name),S+=C})}),!l.every(function(b){return b}))throw d=s.filter(function(b,y){return!l[y]}),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return u=i.reduce(function(b,y,S){return y&&b.push(S),b},[]),h=[],u.forEach(function(b){r[b].paths.forEach(function(y){var S=a+(a.endsWith("/")?"":"/")+y;h.push(S)})}),[4,e(h)];case 1:return f=g.sent(),p={},v=0,u.forEach(function(b){for(var y=r[b].paths.length,S=0,w=0;w<y;w++)S+=f[v+w].byteLength;for(var k=new ArrayBuffer(S),C=new Uint8Array(k),_=0,E=0;E<y;E++){var T=new Uint8Array(f[v+E]);C.set(T,_),_+=T.byteLength}o[b].forEach(function(I){var F=cQ(k.slice(I.groupOffset,I.groupOffset+I.sizeBytes),[I.manifestEntry]);for(var A in F)p[A]=F[A]}),v+=y}),[2,p]}})})}}tc.registerSaveRouter(function(e){return Wt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(e5.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new e5(t)}(e.slice(e5.URL_SCHEME.length)):null});var mQ=function(){function e(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,r.fetchFunc!=null?(Ge(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=Wt().platform.fetch,Ge(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&Ge(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i;return Or(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,a=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:a},r.body.append("model.json",new Blob([JSON.stringify(s)],{type:"application/json"}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:H1(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return r=p.sent(),[3,5];case 4:throw p.sent(),a="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a);case 5:if(s=r.modelTopology,i=r.weightsManifest,o=r.generatedBy,l=r.convertedBy,c=r.format,d=r.userDefinedMetadata,s==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:f=p.sent(),u=f[0],h=f[1],p.label=7;case 7:return[2,{modelTopology:s,weightSpecs:u,weightData:h,userDefinedMetadata:d,generatedBy:o,convertedBy:l,format:c}]}})})},e.prototype.loadWeights=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:for(r=Array.isArray(this.path)?this.path[1]:this.path,a=function(v){var g=v.lastIndexOf("/"),b=v.lastIndexOf("?"),y=v.substring(0,g),S=b>g?v.substring(b):"";return[y+"/",S]}(r),s=a[0],i=a[1],o=this.weightPathPrefix||s,l=[],c=0,d=t;c<d.length;c++)u=d[c],l.push.apply(l,u.weights);return h=[],t.forEach(function(v){v.paths.forEach(function(g){h.push(o+g+i)})}),[4,fQ(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=p.sent(),[2,[l,yP(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function u3(e){return e.match(mQ.URL_SCHEME_REGEX)!=null}var rU=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(r){return u3(r)}):u3(e))?h3(e,{onProgress:t}):null};function h3(e,t){return new mQ(e,t)}tc.registerSaveRouter(rU),tc.registerLoadRouter(rU);var t5=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.modelArtifacts]})})},e}(),TLe=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,this.saveHandler(t)]})})},e}(),pQ=Object.freeze({browserFiles:function(e){return new ALe(e)},browserHTTPRequest:function(e,t){return h3(e,t)},concatenateArrayBuffers:yP,decodeWeights:cQ,encodeWeights:function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l=this;return Or(this,function(c){switch(c.label){case 0:for(r=[],a=[],s=Array.isArray(e)?e.map(function(d){return d.name}):Object.keys(e),i=function(d){var u=s[d],h=Array.isArray(e)?e[d].tensor:e[u];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+h.dtype);var f={name:u,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var p=new Promise(function(v){return Pr(l,void 0,void 0,function(){var g,b,y,S,w,k,C;return Or(this,function(_){switch(_.label){case 0:return[4,h.bytes()];case 1:for(g=_.sent(),b=g.reduce(function(E,T){return E+T.length},0)+G2*g.length,y=new Uint8Array(b),S=0,w=0;w<g.length;w++)k=g[w],C=new Uint8Array(new Uint32Array([k.length]).buffer),y.set(C,S),S+=G2,y.set(k,S),S+=k.length;return v(y),[2]}})})});a.push(p)}else a.push(h.data());t!=null&&(f.group=t),r.push(f)},o=0;o<s.length;++o)i(o);return[4,Promise.all(a)];case 1:return[2,{data:bLe(c.sent()),specs:r}]}})})},fromMemory:function(e,t,r,a){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new t5(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t5({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t5({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:a}))},getLoadHandlers:function(e,t){return tc.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:H1,getSaveHandlers:function(e){return tc.getSaveHandlers(e)},http:h3,isHTTPScheme:u3,loadWeights:function(e,t,r,a){return t===void 0&&(t=""),Pr(this,void 0,void 0,function(){return Or(this,function(s){return[2,tU(function(i){return fQ(i,{requestInit:a})})(e,t,r)]})})},registerLoadRouter:function(e){return tc.registerLoadRouter(e)},registerSaveRouter:function(e){return tc.registerSaveRouter(e)},weightsLoaderFactory:tU,withSaveHandler:function(e){return new TLe(e)},copyModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,X9(e,t,!1)]})})},listModels:function(){return Pr(this,void 0,void 0,function(){var e,t,r,a,s,i,o;return Or(this,function(l){switch(l.label){case 0:e=Um.getSchemes(),t={},r=0,a=e,l.label=1;case 1:return r<a.length?(s=a[r],[4,Um.getManager(s).listModels()]):[3,4];case 2:for(o in i=l.sent())t[s+T0+o]=i[o];l.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,X9(e,t,!0)]})})},removeModel:function(e){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){return t=ow(e),[2,Um.getManager(t.scheme).removeModel(t.path)]})})}}),t0;at({confusionMatrix_:function(e,t,r){var a=$e(e,"labels","confusionMatrix"),s=$e(t,"predictions","confusionMatrix");Ge(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, but got "+r}),Ge(a.rank===1,function(){return"Expected the rank of labels to be 1, but got "+a.rank}),Ge(s.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),Ge(a.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+a.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),Ge(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+r});var i=a3(a.asType("int32"),r),o=a3(s.asType("int32"),r);return i.transpose().matMul(o).asType("int32")}});var ILe=at({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)a=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(BK("FromPixels",ft.backendName)!=null)return ft.runKernel("FromPixels",{pixels:e},{numChannels:t});var l,c,d=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=d[0],h=d[1];if(o?l=e.getContext("2d").getImageData(0,0,u,h).data:a||r?l=e.data:(i||s)&&(t0==null&&(t0=document.createElement("canvas").getContext("2d")),t0.canvas.width=u,t0.canvas.height=h,t0.drawImage(e,0,0,u,h),l=t0.getImageData(0,0,u,h).data),t===4)c=new Int32Array(l);else{var f=u*h;c=new Int32Array(f*t);for(var p=0;p<f;p++)for(var v=0;v<t;++v)c[p*t+v]=l[4*p+v]}return KI(c,[h,u,t],"int32")}}),jP=Object.freeze({toPixels:function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T;return Or(this,function(I){switch(I.label){case 0:if(r=$e(e,"img","toPixels"),e instanceof hs||(r=r.toInt()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(a=r.shape.slice(0,2),s=a[0],i=a[1],(o=r.rank===2?1:r.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,r.data()];case 1:return l=I.sent(),c=r.min(),d=r.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(u=I.sent(),h=u[0],f=u[1],p=h[0],v=f[0],c.dispose(),d.dispose(),r.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(g=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*s*4),y=0;y<s*i;++y)S=void 0,w=void 0,k=void 0,C=void 0,o===1?(S=l[y]*g,w=l[y]*g,k=l[y]*g,C=255):o===3?(S=l[3*y]*g,w=l[3*y+1]*g,k=l[3*y+2]*g,C=255):o===4&&(S=l[4*y]*g,w=l[4*y+1]*g,k=l[4*y+2]*g,C=l[4*y+3]*g),b[(_=4*y)+0]=Math.round(S),b[_+1]=Math.round(w),b[_+2]=Math.round(k),b[_+3]=Math.round(C);return t!=null&&(t.width=i,t.height=s,E=t.getContext("2d"),T=new ImageData(b,i,s),E.putImageData(T,0,0)),r!==e&&r.dispose(),[2,b]}})})},fromPixels:ILe}),PLe=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,r){return new t(r)},e}(),OLe=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function lv(e){Ge(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),Ge(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),Ge(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),OLe.register(e)}var cv=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ud(t,e),t.prototype.minimize=function(r,a,s){a===void 0&&(a=!1);var i=this.computeGradients(r,s),o=i.value,l=i.grads;if(s!=null){var c=s.map(function(d){return{name:d.name,tensor:l[d.name]}});this.applyGradients(c)}else this.applyGradients(l);return bl(l),a?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(r,a){return zPe(r,a)},t.prototype.dispose=function(){this.iterations_!=null&&bl(this.iterations_)},t.prototype.saveIterations=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:wr(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return a=this,[4,r[0].tensor.data()];case 1:return a.iterations_=s.sent()[0],[2,r.slice(1)]}})})},t}(PLe);Object.defineProperty(cv,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var MLe=function(e){function t(r,a,s){s===void 0&&(s=null);var i=e.call(this)||this;return i.learningRate=r,i.rho=a,i.epsilon=s,i.accumulatedGrads=[],i.accumulatedUpdates=[],s==null&&(i.epsilon=ft.backend.epsilon()),i}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ft.registeredVariables[s];a.accumulatedGrads[i]==null&&(a.accumulatedGrads[i]={originalName:s+"/accum_grad",variable:Dr(function(){return Ua(o).variable(!1)})}),a.accumulatedUpdates[i]==null&&(a.accumulatedUpdates[i]={originalName:s+"/accum_var",variable:Dr(function(){return Ua(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedGrads[i].variable,d=a.accumulatedUpdates[i].variable;Dr(function(){var u=c.mul(a.rho).add(l.square().mul(1-a.rho)),h=d.add(a.epsilon).sqrt().div(c.add(a.epsilon).sqrt()).mul(l),f=d.mul(a.rho).add(h.square().mul(1-a.rho));c.assign(u),d.assign(f);var p=h.mul(-a.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(bl(this.accumulatedGrads.map(function(r){return r.variable})),bl(this.accumulatedUpdates.map(function(r){return r.variable})))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),a=r.length/2,this.accumulatedGrads=r.slice(0,a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=r.slice(a,2*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(r,a){return new r(a.learningRate,a.rho,a.epsilon)},t.className="Adadelta",t}(cv);lv(MLe);var RLe=function(e){function t(r,a){a===void 0&&(a=.1);var s=e.call(this)||this;return s.learningRate=r,s.initialAccumulatorValue=a,s.accumulatedGrads=[],s}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ft.registeredVariables[s];a.accumulatedGrads[i]==null&&(a.accumulatedGrads[i]={originalName:s+"/accumulator",variable:Dr(function(){return Yu(o.shape,a.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedGrads[i].variable;Dr(function(){var d=c.add(l.square());c.assign(d);var u=l.div(d.add(ft.backend.epsilon()).sqrt()).mul(-a.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&bl(this.accumulatedGrads.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(r,a){return new r(a.learningRate,a.initialAccumulatorValue)},t.className="Adagrad",t}(cv);lv(RLe);var FLe=function(e){function t(r,a,s,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=r,o.beta1=a,o.beta2=s,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Dr(function(){o.accBeta1=wr(a).variable(),o.accBeta2=wr(s).variable()}),i==null&&(o.epsilon=ft.backend.epsilon()),o}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);Dr(function(){var i=ji(1,a.accBeta1),o=ji(1,a.accBeta2);s.forEach(function(l,c){var d=ft.registeredVariables[l];a.accumulatedFirstMoment[c]==null&&(a.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Dr(function(){return Ua(d).variable(!1)})}),a.accumulatedSecondMoment[c]==null&&(a.accumulatedSecondMoment[c]={originalName:l+"/v",variable:Dr(function(){return Ua(d).variable(!1)})});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=a.accumulatedFirstMoment[c].variable,f=a.accumulatedSecondMoment[c].variable,p=h.mul(a.beta1).add(u.mul(1-a.beta1)),v=f.mul(a.beta2).add(u.square().mul(1-a.beta2)),g=p.div(i),b=v.div(o);h.assign(p),f.assign(v);var y=g.div(b.sqrt().add(a.epsilon)).mul(-a.learningRate).add(d);d.assign(y)}}),a.accBeta1.assign(a.accBeta1.mul(a.beta1)),a.accBeta2.assign(a.accBeta2.mul(a.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&bl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&bl(this.accumulatedSecondMoment.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a,s=this;return Or(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(r)];case 1:return r=i.sent(),Dr(function(){s.accBeta1.assign(H2(s.beta1,s.iterations_+1)),s.accBeta2.assign(H2(s.beta2,s.iterations_+1))}),a=r.length/2,this.accumulatedFirstMoment=r.slice(0,a).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=r.slice(a,2*a).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(r,a){return new r(a.learningRate,a.beta1,a.beta2,a.epsilon)},t.className="Adam",t}(cv);lv(FLe);var LLe=function(e){function t(r,a,s,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var l=e.call(this)||this;return l.learningRate=r,l.beta1=a,l.beta2=s,l.epsilon=i,l.decay=o,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],Dr(function(){l.iteration=wr(0).variable(),l.accBeta1=wr(a).variable()}),i==null&&(l.epsilon=ft.backend.epsilon()),l}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);Dr(function(){var i=ji(1,a.accBeta1),o=Cd(-a.learningRate,a.iteration.mul(a.decay).add(1));s.forEach(function(l,c){var d=ft.registeredVariables[l];a.accumulatedFirstMoment[c]==null&&(a.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Ua(d).variable(!1)}),a.accumulatedWeightedInfNorm[c]==null&&(a.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:Ua(d).variable(!1)});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=a.accumulatedFirstMoment[c].variable,f=a.accumulatedWeightedInfNorm[c].variable,p=h.mul(a.beta1).add(u.mul(1-a.beta1)),v=f.mul(a.beta2),g=u.abs(),b=v.maximum(g);h.assign(p),f.assign(b);var y=o.div(i).mul(p.div(b.add(a.epsilon))).add(d);d.assign(y)}}),a.iteration.assign(a.iteration.add(1)),a.accBeta1.assign(a.accBeta1.mul(a.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&bl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&bl(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(r,a){return new r(a.learningRate,a.beta1,a.beta2,a.epsilon,a.decay)},t.className="Adamax",t}(cv);lv(LLe);var xQ=function(e){function t(r){var a=e.call(this)||this;return a.learningRate=r,a.setLearningRate(r),a}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=Array.isArray(r)?r[i].tensor:r[s];if(o!=null){var l=ft.registeredVariables[s];Dr(function(){var c=a.c.mul(o).add(l);l.assign(c)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=nPe(wr(-r))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:if((r=a.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(r,a){return new r(a.learningRate)},t.className="SGD",t}(cv);lv(xQ);var BLe=function(e){function t(r,a,s){s===void 0&&(s=!1);var i=e.call(this,r)||this;return i.learningRate=r,i.momentum=a,i.useNesterov=s,i.accumulations=[],i.m=wr(i.momentum),i}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ft.registeredVariables[s];a.accumulations[i]==null&&(a.accumulations[i]={originalName:s+"/momentum",variable:Dr(function(){return Ua(o).variable(!1)})});var l=a.accumulations[i].variable,c=Array.isArray(r)?r[i].tensor:r[s];c!=null&&Dr(function(){var d,u=a.m.mul(l).add(c);d=a.useNesterov?a.c.mul(c.add(u.mul(a.m))).add(o):a.c.mul(u).add(o),l.assign(u),o.assign(d)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&bl(this.accumulations.map(function(r){return r.variable}))},t.prototype.setMomentum=function(r){this.momentum=r},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(r,a){return new r(a.learningRate,a.momentum,a.useNesterov)},t.className="Momentum",t}(xQ);lv(BLe);var ULe=function(e){function t(r,a,s,i,o){a===void 0&&(a=.9),s===void 0&&(s=0),i===void 0&&(i=null),o===void 0&&(o=!1);var l=e.call(this)||this;if(l.learningRate=r,l.decay=a,l.momentum=s,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=o,i==null&&(l.epsilon=ft.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Ud(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ft.registeredVariables[s];a.accumulatedMeanSquares[i]==null&&(a.accumulatedMeanSquares[i]={originalName:s+"/rms",variable:Dr(function(){return Ua(o).variable(!1)})}),a.accumulatedMoments[i]==null&&(a.accumulatedMoments[i]={originalName:s+"/momentum",variable:Dr(function(){return Ua(o).variable(!1)})}),a.accumulatedMeanGrads[i]==null&&a.centered&&(a.accumulatedMeanGrads[i]={originalName:s+"/mg",variable:Dr(function(){return Ua(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedMeanSquares[i].variable,d=a.accumulatedMoments[i].variable;Dr(function(){var u=c.mul(a.decay).add(l.square().mul(1-a.decay));if(a.centered){var h=a.accumulatedMeanGrads[i].variable,f=h.mul(a.decay).add(l.mul(1-a.decay)),p=d.mul(a.momentum).add(l.mul(a.learningRate).div(u.sub(f.square().add(a.epsilon)).sqrt()));c.assign(u),h.assign(f),d.assign(p);var v=o.sub(p);o.assign(v)}else{var g=c.mul(a.decay).add(l.square().mul(1-a.decay));p=d.mul(a.momentum).add(l.mul(a.learningRate).div(g.add(a.epsilon).sqrt())),c.assign(g),d.assign(p),v=o.sub(p),o.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&bl(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&bl(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&bl(this.accumulatedMoments.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&r.push.apply(r,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),a=this.centered?r.length/3:r.length/2,this.accumulatedMeanSquares=r.slice(0,a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=r.slice(a,2*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(2*a,3*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(r,a){return new r(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)},t.className="RMSProp",t}(cv);lv(ULe);hs.prototype.squaredDifference=function(e){return TX(this,e)},$t=hLe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f3=function(e,t){return f3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},f3(e,t)};function da(e,t){f3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ao=function(){return Ao=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ao.apply(this,arguments)};function Ur(e,t,r,a){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((a=a.apply(e,[])).next())})}function $r(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],s=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function vy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)a[s]=i[o];return a}var O0=function(){function e(t,r){if(!Sx(t)||!Sx(r))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:r}));this._width=t,this._height=r}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function CC(e,t){return e instanceof hs&&e.shape.length===t}function $Le(e){return CC(e,2)}function kC(e){return CC(e,3)}function $m(e){return CC(e,4)}function VLe(e){return e%1!==0}function aU(e){return e%2===0}function qLe(e,t){t===void 0&&(t=2);var r=Math.pow(10,t);return Math.floor(e*r)/r}function nU(e){return e&&e.width&&e.height}function zLe(e,t){var r=e.width,a=e.height,s=t/Math.max(a,r);return new O0(Math.round(r*s),Math.round(a*s))}function NP(e){return e.reduce(function(t,r){return t.add(r)},new sn(0,0)).div(new sn(e.length,e.length))}function a1(e,t,r){return Array(e).fill(0).map(function(a,s){return t+s*r})}function Sx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function sU(e){return Sx(e)&&0<=e&&e<=1}var sn=function(){function e(t,r){this._x=t,this._y=r}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),ep=function(){function e(t,r){r===void 0&&(r=!0);var a=t||{},s=[a.left,a.top,a.right,a.bottom].every(Sx),i=[a.x,a.y,a.width,a.height].every(Sx);if(!i&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(a));var o=i?[a.x,a.y,a.width,a.height]:[a.left,a.top,a.right-a.left,a.bottom-a.top],l=o[0],c=o[1],d=o[2],u=o[3];e.assertIsValidBox({x:l,y:c,width:d,height:u},"Box.constructor",r),this._x=l,this._y=c,this._width=d,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Sx)},e.assertIsValidBox=function(t,r,a){if(a===void 0&&(a=!1),!e.isRect(t))throw new Error(r+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!a&&(t.width<0||t.height<0))throw new Error(r+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new sn(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new sn(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new sn(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new sn(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),r=t[0],a=t[1],s=t[2],i=t[3];return new e({x:r,y:a,width:s,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),r=t[0],a=t[1],s=t[2],i=t[3];return new e({x:r,y:a,width:s,height:i})},e.prototype.toSquare=function(){var t=this,r=t.x,a=t.y,s=t.width,i=t.height,o=Math.abs(s-i);return s<i&&(r-=o/2,s+=o),i<s&&(a-=o/2,i+=o),new e({x:r,y:a,width:s,height:i})},e.prototype.rescale=function(t){var r=nU(t)?t.width:t,a=nU(t)?t.height:t;return new e({x:this.x*r,y:this.y*a,width:this.width*r,height:this.height*a})},e.prototype.pad=function(t,r){var a=[this.x-t/2,this.y-r/2,this.width+t,this.height+r],s=a[0],i=a[1],o=a[2],l=a[3];return new e({x:s,y:i,width:o,height:l})},e.prototype.clipAtImageBorders=function(t,r){var a=this,s=a.x,i=a.y,o=a.right,l=a.bottom,c=Math.max(s,0),d=Math.max(i,0),u=o-c,h=l-d,f=Math.min(u,t-c),p=Math.min(h,r-d);return new e({x:c,y:d,width:f,height:p}).floor()},e.prototype.shift=function(t,r){var a=this,s=a.width,i=a.height,o=this.x+t,l=this.y+r;return new e({x:o,y:l,width:s,height:i})},e.prototype.padAtBorders=function(t,r){var a=this.width+1,s=this.height+1,i=1,o=1,l=a,c=s,d=this.left,u=this.top,h=this.right,f=this.bottom;return h>r&&(l=-h+r+a,h=r),f>t&&(c=-f+t+s,f=t),d<1&&(c=2-d,d=1),u<1&&(c=2-u,u=1),{dy:o,edy:c,dx:i,edx:l,y:u,ey:f,x:d,ex:h,w:a,h:s}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),EC=function(e){da(t,e);function t(r,a,s,i,o){return o===void 0&&(o=!1),e.call(this,{left:r,top:a,right:s,bottom:i},o)||this}return t}(ep),vQ=function(){function e(t,r,a,s,i){this._imageDims=new O0(i.width,i.height),this._score=t,this._classScore=r,this._className=a,this._box=new ep(s).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new ep(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:r})},e}(),dh=function(e){da(t,e);function t(r,a,s){return e.call(this,r,r,"",a,s)||this}return t.prototype.forSize=function(r,a){var s=e.prototype.forSize.call(this,r,a),i=s.score,o=s.relativeBox,l=s.imageDims;return new t(i,o,l)},t}(vQ);function HLe(e,t,r){r===void 0&&(r=!0);var a=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),s=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=a*s;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function WLe(e){var t=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),a=t.reduce(function(l,c){return c<l?c:l},1/0),s=r.reduce(function(l,c){return c<l?c:l},1/0),i=t.reduce(function(l,c){return l<c?c:l},0),o=r.reduce(function(l,c){return l<c?c:l},0);return new EC(a,s,i,o)}function n1(e,t,r,a){a===void 0&&(a=!0);for(var s=t.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],o=function(){var l=s.pop();i.push(l);for(var c=s,d=[],u=0;u<c.length;u++){var h=c[u],f=e[l],p=e[h];d.push(HLe(f,p,a))}s=s.filter(function(v,g){return d[g]<=r})};s.length>0;)o();return i}function W1(e,t){return Dr(function(){var r=t[0],a=t[1],s=t[2],i=Yu(vy(e.shape.slice(0,3),[1]),r),o=Yu(vy(e.shape.slice(0,3),[1]),a),l=Yu(vy(e.shape.slice(0,3),[1]),s),c=vi([i,o,l],3);return ji(e,c)})}function GLe(e,t){return t===void 0&&(t=!1),Dr(function(){var r=e.shape.slice(1),a=r[0],s=r[1];if(a===s)return e;var i=Math.abs(a-s),o=Math.round(i*(t?.5:1)),l=a>s?2:1,c=function(p){var v=e.shape.slice();return v[l]=p,Yu(v,0)},d=c(o),u=i-d.shape[l],h=t&&u?c(u):null,f=[h,e,d].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return vi(f,l)})}function r5(e){return 1/(1+Math.exp(-e))}var wP=function(e){da(t,e);function t(r,a,s,i,o){return o===void 0&&(o=!1),e.call(this,{x:r,y:a,width:s,height:i},o)||this}return t}(ep),YLe=.5,KLe=.43,XLe=.45,Y2=function(){function e(t,r,a){a===void 0&&(a=new sn(0,0));var s=r.width,i=r.height;this._imgDims=new O0(s,i),this._shift=a,this._positions=t.map(function(o){return o.mul(new sn(s,i)).add(a)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new sn(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(r){return r.sub(t._shift).div(new sn(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new this.constructor(this.relativePositions,{width:t,height:r})},e.prototype.shiftBy=function(t,r){return new this.constructor(this.relativePositions,this._imgDims,new sn(t,r))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,r){if(r===void 0&&(r={}),t){var a=t instanceof dh?t.box.floor():new ep(t);return this.shiftBy(a.x,a.y).align(null,r)}var s=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},r),i=s.useDlibAlignment,o=s.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[0],a=t[1],s=t[2],i=function(h){return s.sub(h).magnitude()},o=(i(r)+i(a))/2,l=Math.floor(o/XLe),c=NP(t),d=Math.floor(Math.max(0,c.x-YLe*l)),u=Math.floor(Math.max(0,c.y-KLe*l));return new wP(d,u,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var r=WLe(this.positions);return r.pad(r.width*t,r.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),QLe=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var r=this.positions;return[r[0],r[1],NP([r[3],r[4]])]},t}(Y2),JLe=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(NP)},t}(Y2),iU=function(){function e(t,r){this._label=t,this._distance=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+qLe(this.distance)+")":"")},e}(),oU=function(e){da(t,e);function t(r,a){var s=e.call(this,r)||this;return s._label=a,s}return t.assertIsValidLabeledBox=function(r,a){if(ep.assertIsValidBox(r,a),!Sx(r.label))throw new Error(a+" - expected property label ("+r.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(ep),g0=function(){function e(t,r){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(r)||r.some(function(a){return!(a instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var r=t.descriptors.map(function(a){return new Float32Array(a)});return new e(t.label,r)},e}();(function(e){da(t,e);function t(r,a,s,i){var o=e.call(this,r,a)||this;return o._score=s,o._classScore=i,o}return t.assertIsValidPredictedBox=function(r,a){if(oU.assertIsValidLabeledBox(r,a),!sU(r.score)||!sU(r.classScore))throw new Error(a+" - expected properties score ("+r.score+") and ("+r.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(oU);function ZLe(e){return e.detection instanceof dh}function SP(e,t){var r={detection:t};return Object.assign({},e,r)}function gQ(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function bQ(e){var t="";if(!e)try{e=require("fs")}catch(a){t=a.toString()}var r=e?function(a){return new Promise(function(s,i){e.readFile(a,function(o,l){return o?i(o):s(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function yQ(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},a=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},s=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=bQ();return Ao({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:r,createImageElement:a,fetch:s},i)}function jQ(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function NQ(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var pi;function e6e(){if(!pi)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return pi}function m3(e){pi=e}function CP(){jQ()&&m3(gQ()),NQ()&&m3(yQ())}function t6e(e){if(pi||CP(),!pi)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,r=t===void 0?pi.Canvas:t,a=e.Image,s=a===void 0?pi.Image:a;pi.Canvas=r,pi.Image=s,pi.createCanvasElement=e.createCanvasElement||function(){return new r},pi.createImageElement=e.createImageElement||function(){return new s},pi.ImageData=e.ImageData||pi.ImageData,pi.Video=e.Video||pi.Video,pi.fetch=e.fetch||pi.fetch,pi.readFile=e.readFile||pi.readFile}var Uo={getEnv:e6e,setEnv:m3,initialize:CP,createBrowserEnv:gQ,createFileSystem:bQ,createNodejsEnv:yQ,monkeyPatch:t6e,isBrowser:jQ,isNodejs:NQ};CP();function wQ(e){return!Uo.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Vx(e){var t=Uo.getEnv(),r=t.Canvas,a=t.CanvasRenderingContext2D;if(e instanceof a)return e;var s=wQ(e);if(!(s instanceof r))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=s.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var lU;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(lU||(lU={}));function SQ(e){var t=Uo.getEnv(),r=t.Image,a=t.Video;return e instanceof r&&e.complete||e instanceof a&&e.readyState>=3}function r6e(e){return new Promise(function(t,r){if(e instanceof Uo.getEnv().Canvas||SQ(e))return t();function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",s),t(i))}function s(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",s),r(i))}e.addEventListener("load",a),e.addEventListener("error",s)})}function CQ(e){var t=Uo.getEnv(),r=t.Image,a=t.Video;return e instanceof r?new O0(e.naturalWidth,e.naturalHeight):e instanceof a?new O0(e.videoWidth,e.videoHeight):new O0(e.width,e.height)}function _C(e){var t=e.width,r=e.height,a=Uo.getEnv().createCanvasElement,s=a();return s.width=t,s.height=r,s}function kP(e,t){var r=Uo.getEnv().ImageData;if(!(e instanceof r)&&!SQ(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var a=CQ(e),s=a.width,i=a.height,o=_C({width:s,height:i});return e instanceof r?Vx(o).putImageData(e,0,0):Vx(o).drawImage(e,0,0,s,i),o}function a6e(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l;return $r(this,function(c){switch(c.label){case 0:return r=Uo.getEnv().createCanvasElement(),a=e.shape.slice($m(e)?1:0),s=a[0],i=a[1],o=a[2],l=Dr(function(){return e.as3D(s,i,o).toInt()}),[4,jP.toPixels(l,r)];case 1:return c.sent(),l.dispose(),[2,r]}})})}function cU(e){var t=Uo.getEnv(),r=t.Image,a=t.Canvas,s=t.Video;return e instanceof r||e instanceof a||e instanceof s}function n6e(e,t,r){r===void 0&&(r=!1);var a=Uo.getEnv(),s=a.Image,i=a.Canvas;if(!(e instanceof s||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=CQ(e),l=t/Math.max(o.height,o.width),c=l*o.width,d=l*o.height,u=_C({width:t,height:t}),h=e instanceof i?e:kP(e),f=Math.abs(c-d)/2,p=r&&c<d?f:0,v=r&&d<c?f:0;return Vx(u).drawImage(h,p,v,c,d),u}var K2=function(){function e(t,r){var a=this;if(r===void 0&&(r=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach(function(s,i){if(kC(s)){a._imageTensors[i]=s,a._inputDimensions[i]=s.shape;return}if($m(s)){var o=s.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");a._imageTensors[i]=s,a._inputDimensions[i]=s.shape.slice(1);return}var l=s instanceof Uo.getEnv().Canvas?s:kP(s);a._canvases[i]=l,a._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return a1(this.batchSize,0,1).map(function(r,a){return t.getReshapedInputDimensions(a)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var r=this.getInputWidth(t),a=this.getInputHeight(t);return zLe({width:r,height:a},this.inputSize)},e.prototype.toBatchTensor=function(t,r){var a=this;return r===void 0&&(r=!0),this._inputSize=t,Dr(function(){var s=a1(a.batchSize,0,1).map(function(o){var l=a.getInput(o);if(l instanceof hs){var c=$m(l)?l:l.expandDims();return c=GLe(c,r),(c.shape[1]!==t||c.shape[2]!==t)&&(c=pP.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(l instanceof Uo.getEnv().Canvas)return jP.fromPixels(n6e(l,t,r));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=oc(s.map(function(o){return o.toFloat()})).as4D(a.batchSize,t,t,3);return i})},e}();function Vi(e){return Ur(this,void 0,void 0,function(){var t,r,a;return $r(this,function(s){switch(s.label){case 0:if(e instanceof K2)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return r=function(i){return Array.isArray(e)?" at input index "+i+":":""},a=t.map(wQ),a.forEach(function(i,o){if(!cU(i)&&!kC(i)&&!$m(i))throw typeof t[o]=="string"?new Error("toNetInput -"+r(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+r(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if($m(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+r(o)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(a.map(function(i){return cU(i)&&r6e(i)}))];case 1:return s.sent(),[2,new K2(a,Array.isArray(e))]}})})}function EP(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l,c;return $r(this,function(d){switch(d.label){case 0:return r=Uo.getEnv().Canvas,a=e,e instanceof r?[3,5]:[4,Vi(e)];case 1:if(s=d.sent(),s.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=s.getInput(0),i instanceof r?(o=i,[3,4]):[3,2];case 2:return[4,a6e(i)];case 3:o=d.sent(),d.label=4;case 4:a=o,d.label=5;case 5:return l=Vx(a),c=t.map(function(u){return u instanceof dh?u.forSize(a.width,a.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(a.width,a.height)}),[2,c.map(function(u){var h=u.x,f=u.y,p=u.width,v=u.height,g=_C({width:p,height:v});return Vx(g).putImageData(l.getImageData(h,f,p,v),0,0),g})]}})})}function _P(e,t){return Ur(this,void 0,void 0,function(){return $r(this,function(r){if(!kC(e)&&!$m(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if($m(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Dr(function(){var a=e.shape.slice($m(e)?1:0),s=a[0],i=a[1],o=a[2],l=t.map(function(d){return d instanceof dh?d.forSize(i,s).box:d}).map(function(d){return d.clipAtImageBorders(i,s)}),c=l.map(function(d){var u=d.x,h=d.y,f=d.width,p=d.height;return JX(e.as3D(s,i,o),[h,u,0],[p,f,o])});return c})]})})}function s6e(e,t){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return r=Uo.getEnv().fetch,[4,r(e,t)];case 1:if(a=s.sent(),!(a.status<400))throw new Error("failed to fetch: ("+a.status+") "+a.statusText+", from url: "+a.url);return[2,a]}})})}function i6e(e){return Ur(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,s6e(e)];case 1:return[2,t.sent().json()]}})})}function kQ(e,t){var r=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+r};var a=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(a,"");var s=e.split("/").filter(function(l){return l}),i=e.endsWith(".json")?s[s.length-1]:r,o=a+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function o6e(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i;return $r(this,function(o){switch(o.label){case 0:return r=kQ(e,t),a=r.manifestUri,s=r.modelBaseUri,[4,i6e(a)];case 1:return i=o.sent(),[2,pQ.loadWeights(i,s)]}})})}var Ef=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var r=this.traversePropertyPath(t),a=r.obj,s=r.objProp;return a[s]},e.prototype.reassignParamFromPath=function(t,r){var a=this.traversePropertyPath(t),s=a.obj,i=a.objProp;s[i].dispose(),s[i]=r},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(r){var a=r.paramPath;return{path:a,tensor:t.getParamFromPath(a)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof ag})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof ag)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(r){var a=r.path,s=r.tensor;t.reassignParamFromPath(a,s.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(r){var a=r.path,s=r.tensor,i=so(s.dataSync());s.dispose(),t.reassignParamFromPath(a,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(r){if(t&&r.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+r.path);r.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var r=t.tensor;return Array.from(r.dataSync())}).reduce(function(t,r){return t.concat(r)}))},e.prototype.load=function(t){return Ur(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Ur(this,void 0,void 0,function(){var r;return $r(this,function(a){switch(a.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,o6e(t,this.getDefaultModelName())];case 1:return r=a.sent(),this.loadFromWeightMap(r),[2]}})})},e.prototype.loadFromDisk=function(t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h;return $r(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return r=Uo.getEnv().readFile,a=kQ(t,this.getDefaultModelName()),s=a.manifestUri,i=a.modelBaseUri,o=function(p){return Promise.all(p.map(function(v){return r(v).then(function(g){return g.buffer})}))},l=pQ.weightsLoaderFactory(o),u=(d=JSON).parse,[4,r(s)];case 1:return c=u.apply(d,[f.sent().toString()]),[4,l(c,i)];case 2:return h=f.sent(),this.loadFromWeightMap(h),[2]}})})},e.prototype.loadFromWeightMap=function(t){var r=this.extractParamsFromWeigthMap(t),a=r.paramMappings,s=r.params;this._paramMappings=a,this._params=s},e.prototype.extractWeights=function(t){var r=this.extractParams(t),a=r.paramMappings,s=r.params;this._paramMappings=a,this._params=s},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var r=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),a=r.obj,s=r.objProp;if(!a||!s||!(a[s]instanceof hs))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:a,objProp:s}},e}();function rc(e,t,r){return Dr(function(){var a=dP(e,t.depthwise_filter,t.pointwise_filter,r,"same");return a=Ea(a,t.bias),a})}function a5(e,t,r){return r===void 0&&(r=!1),Dr(function(){var a=xs(r?Ea(ed(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):rc(e,t.conv0,[2,2])),s=rc(a,t.conv1,[1,1]),i=xs(Ea(a,s)),o=rc(i,t.conv2,[1,1]);return xs(Ea(a,Ea(s,o)))})}function FN(e,t,r,a){return r===void 0&&(r=!1),a===void 0&&(a=!0),Dr(function(){var s=xs(r?Ea(ed(e,t.conv0.filters,a?[2,2]:[1,1],"same"),t.conv0.bias):rc(e,t.conv0,a?[2,2]:[1,1])),i=rc(s,t.conv1,[1,1]),o=xs(Ea(s,i)),l=rc(o,t.conv2,[1,1]),c=xs(Ea(s,Ea(i,l))),d=rc(c,t.conv3,[1,1]);return xs(Ea(s,Ea(i,Ea(l,d))))})}function Pd(e,t,r,a){return r===void 0&&(r="same"),a===void 0&&(a=!1),Dr(function(){var s=Ea(ed(e,t.filters,[1,1],r),t.bias);return a?xs(s):s})}function _f(e,t){Object.keys(e).forEach(function(r){t.some(function(a){return a.originalPath===r})||e[r].dispose()})}function DC(e,t){return function(r,a,s,i){var o=fl(e(r*a*s*s),[s,s,r,a]),l=li(e(a));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:l}}}function DP(e,t){return function(r,a,s){var i=Bm(e(r*a),[r,a]),o=li(e(a));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:i,bias:o}}}var EQ=function(){function e(t,r,a){this.depthwise_filter=t,this.pointwise_filter=r,this.bias=a}return e}();function AP(e,t){return function(r,a,s){var i=fl(e(9*r),[3,3,r,1]),o=fl(e(r*a),[1,1,r,a]),l=li(e(a));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new EQ(i,o,l)}}function TP(e){return function(t){var r=e(t+"/depthwise_filter",4),a=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new EQ(r,a,s)}}function mp(e,t){return function(r,a,s){var i=e[r];if(!CC(i,a))throw new Error("expected weightMap["+r+"] to be a Tensor"+a+"D, instead have "+i);return t.push({originalPath:r,paramPath:s||r}),i}}function Df(e){var t=e;function r(s){var i=t.slice(0,s);return t=t.slice(s),i}function a(){return t}return{extractWeights:r,getRemainingWeights:a}}function _Q(e,t){var r=DC(e,t),a=AP(e,t);function s(o,l,c,d){d===void 0&&(d=!1);var u=d?r(o,l,3,c+"/conv0"):a(o,l,c+"/conv0"),h=a(l,l,c+"/conv1"),f=a(l,l,c+"/conv2");return{conv0:u,conv1:h,conv2:f}}function i(o,l,c,d){d===void 0&&(d=!1);var u=s(o,l,c,d),h=u.conv0,f=u.conv1,p=u.conv2,v=a(l,l,c+"/conv3");return{conv0:h,conv1:f,conv2:p,conv3:v}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function l6e(e){var t=[],r=Df(e),a=r.extractWeights,s=r.getRemainingWeights,i=_Q(a,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),d=i(128,256,"dense3");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c,dense3:d}}}function DQ(e){return function(t){var r=e(t+"/filters",4),a=e(t+"/bias",1);return{filters:r,bias:a}}}function AQ(e,t){var r=mp(e,t),a=DQ(r),s=TP(r);function i(l,c){c===void 0&&(c=!1);var d=c?a(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(l,c){c===void 0&&(c=!1);var d=c?a(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2"),f=s(l+"/conv3");return{conv0:d,conv1:u,conv2:h,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function c6e(e){var t=[],r=AQ(e,t).extractDenseBlock4Params,a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return _f(e,t),{params:a,paramMappings:t}}var TQ=function(e){da(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("FaceFeatureExtractor - load model before inference");return Dr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=W1(s,i).div(wr(255)),l=FN(o,a.dense0,!0);return l=FN(l,a.dense1),l=FN(l,a.dense2),l=FN(l,a.dense3),l=z1(l,[7,7],[2,2],"valid"),l})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(r){return c6e(r)},t.prototype.extractParams=function(r){return l6e(r)},t}(Ef);function Uu(e,t){return Dr(function(){return Ea(NC(e,t.weights),t.bias)})}function d6e(e,t,r){var a=[],s=Df(e),i=s.extractWeights,o=s.getRemainingWeights,l=DP(i,a),c=l(t,r,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:a,params:{fc:c}}}function u6e(e){var t=[],r=mp(e,t);function a(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:a("fc")};return _f(e,t),{params:s,paramMappings:t}}function IQ(e){var t={},r={};return Object.keys(e).forEach(function(a){var s=a.startsWith("fc")?r:t;s[a]=e[a]}),{featureExtractorMap:t,classifierMap:r}}var PQ=function(e){da(t,e);function t(r,a){var s=e.call(this,r)||this;return s._faceFeatureExtractor=a,s}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var a=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return Dr(function(){var i=r instanceof K2?a.faceFeatureExtractor.forwardInput(r):r;return Uu(i.as2D(i.shape[0],-1),s.fc)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var a=this.extractClassifierParams(r),s=a.params,i=a.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return d6e(r,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(r){var a=IQ(r),s=a.featureExtractorMap,i=a.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),u6e(i)},t.prototype.extractParams=function(r){var a=this.getClassifierChannelsIn(),s=this.getClassifierChannelsOut(),i=s*a+s,o=r.slice(0,r.length-i),l=r.slice(r.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(l)},t}(Ef),dU=["neutral","happy","sad","angry","fearful","disgusted","surprised"],h6e=function(){function e(t){var r=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);dU.forEach(function(a,s){r[a]=t[s]})}return e.prototype.asSortedArray=function(){var t=this;return dU.map(function(r){return{expression:r,probability:t[r]}}).sort(function(r,a){return a.probability-r.probability})},e}(),f6e=function(e){da(t,e);function t(r){return r===void 0&&(r=new TQ),e.call(this,"FaceExpressionNet",r)||this}return t.prototype.forwardInput=function(r){var a=this;return Dr(function(){return Cf(a.runNet(r))})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.predictExpressions=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o,l=this;return $r(this,function(c){switch(c.label){case 0:return[4,Vi(r)];case 1:return a=c.sent(),[4,this.forwardInput(a)];case 2:return s=c.sent(),[4,Promise.all(gi(s).map(function(d){return Ur(l,void 0,void 0,function(){var u;return $r(this,function(h){switch(h.label){case 0:return[4,d.data()];case 1:return u=h.sent(),d.dispose(),[2,u]}})})}))];case 3:return i=c.sent(),s.dispose(),o=i.map(function(d){return new h6e(d)}),[2,a.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(PQ);function OQ(e,t){var r={expressions:t};return Object.assign({},e,r)}function m6e(e){return ZLe(e)&&e.landmarks instanceof Y2&&e.unshiftedLandmarks instanceof Y2&&e.alignedRect instanceof dh}function IP(e,t){var r=e.detection.box,a=t.shiftBy(r.x,r.y),s=a.align(),i=e.detection.imageDims,o=new dh(e.detection.score,s.rescale(i.reverse()),i),l={landmarks:a,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,l)}function p6e(e,t){var r=DC(e,t),a=AP(e,t);function s(o,l,c){var d=a(o,l,c+"/separable_conv0"),u=a(l,l,c+"/separable_conv1"),h=r(o,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:u,expansion_conv:h}}function i(o,l){var c=a(o,o,l+"/separable_conv0"),d=a(o,o,l+"/separable_conv1"),u=a(o,o,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:s,extractMainBlockParams:i}}function x6e(e,t){var r=[],a=Df(e),s=a.extractWeights,i=a.getRemainingWeights,o=p6e(s,r),l=o.extractConvParams,c=o.extractSeparableConvParams,d=o.extractReductionBlockParams,u=o.extractMainBlockParams,h=l(3,32,3,"entry_flow/conv_in"),f=d(32,64,"entry_flow/reduction_block_0"),p=d(64,128,"entry_flow/reduction_block_1"),v={conv_in:h,reduction_block_0:f,reduction_block_1:p},g={};a1(t,0,1).forEach(function(w){g["main_block_"+w]=u(128,"middle_flow/main_block_"+w)});var b=d(128,256,"exit_flow/reduction_block"),y=c(256,512,"exit_flow/separable_conv"),S={reduction_block:b,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{entry_flow:v,middle_flow:g,exit_flow:S}}}function v6e(e,t){var r=mp(e,t),a=DQ(r),s=TP(r);function i(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=a(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:u}}function o(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=s(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:a,extractSeparableConvParams:s,extractReductionBlockParams:i,extractMainBlockParams:o}}function g6e(e,t){var r=[],a=v6e(e,r),s=a.extractConvParams,i=a.extractSeparableConvParams,o=a.extractReductionBlockParams,l=a.extractMainBlockParams,c=s("entry_flow/conv_in"),d=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:d,reduction_block_1:u},f={};a1(t,0,1).forEach(function(b){f["main_block_"+b]=l("middle_flow/main_block_"+b)});var p=o("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),g={reduction_block:p,separable_conv:v};return _f(e,r),{params:{entry_flow:h,middle_flow:f,exit_flow:g},paramMappings:r}}function MQ(e,t,r){return Ea(ed(e,t.filters,r,"same"),t.bias)}function n5(e,t,r){r===void 0&&(r=!0);var a=r?xs(e):e;return a=rc(a,t.separable_conv0,[1,1]),a=rc(xs(a),t.separable_conv1,[1,1]),a=Oi(a,[3,3],[2,2],"same"),a=Ea(a,MQ(e,t.expansion_conv,[2,2])),a}function b6e(e,t){var r=rc(xs(e),t.separable_conv0,[1,1]);return r=rc(xs(r),t.separable_conv1,[1,1]),r=rc(xs(r),t.separable_conv2,[1,1]),r=Ea(r,e),r}var y6e=function(e){da(t,e);function t(r){var a=e.call(this,"TinyXception")||this;return a._numMainBlocks=r,a}return t.prototype.forwardInput=function(r){var a=this,s=this.params;if(!s)throw new Error("TinyXception - load model before inference");return Dr(function(){var i=r.toBatchTensor(112,!0),o=[122.782,117.001,104.298],l=W1(i,o).div(wr(256)),c=xs(MQ(l,s.entry_flow.conv_in,[2,2]));return c=n5(c,s.entry_flow.reduction_block_0,!1),c=n5(c,s.entry_flow.reduction_block_1),a1(a._numMainBlocks,0,1).forEach(function(d){c=b6e(c,s.middle_flow["main_block_"+d])}),c=n5(c,s.exit_flow.reduction_block),c=xs(rc(c,s.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(r){return g6e(r,this._numMainBlocks)},t.prototype.extractParams=function(r){return x6e(r,this._numMainBlocks)},t}(Ef);function j6e(e){var t=[],r=Df(e),a=r.extractWeights,s=r.getRemainingWeights,i=DP(a,t),o=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:o,gender:l}}}}function N6e(e){var t=[],r=mp(e,t);function a(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:{age:a("fc/age"),gender:a("fc/gender")}};return _f(e,t),{params:s,paramMappings:t}}var X2;(function(e){e.FEMALE="female",e.MALE="male"})(X2||(X2={}));var w6e=function(e){da(t,e);function t(r){r===void 0&&(r=new y6e(2));var a=e.call(this,"AgeGenderNet")||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var a=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return Dr(function(){var i=r instanceof K2?a.faceFeatureExtractor.forwardInput(r):r,o=z1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=Uu(o,s.fc.age).as1D(),c=Uu(o,s.fc.gender);return{age:l,gender:c}})},t.prototype.forwardInput=function(r){var a=this;return Dr(function(){var s=a.runNet(r),i=s.age,o=s.gender;return{age:i,gender:Cf(o)}})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.predictAgeAndGender=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o,l,c,d=this;return $r(this,function(u){switch(u.label){case 0:return[4,Vi(r)];case 1:return a=u.sent(),[4,this.forwardInput(a)];case 2:return s=u.sent(),i=gi(s.age),o=gi(s.gender),l=i.map(function(h,f){return{ageTensor:h,genderTensor:o[f]}}),[4,Promise.all(l.map(function(h){var f=h.ageTensor,p=h.genderTensor;return Ur(d,void 0,void 0,function(){var v,g,b,y,S;return $r(this,function(w){switch(w.label){case 0:return[4,f.data()];case 1:return v=w.sent()[0],[4,p.data()];case 2:return g=w.sent()[0],b=g>.5,y=b?X2.MALE:X2.FEMALE,S=b?g:1-g,f.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:S}]}})})}))];case 3:return c=u.sent(),s.age.dispose(),s.gender.dispose(),[2,a.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var a=this.extractClassifierParams(r),s=a.params,i=a.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return j6e(r)},t.prototype.extractParamsFromWeigthMap=function(r){var a=IQ(r),s=a.featureExtractorMap,i=a.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),N6e(i)},t.prototype.extractParams=function(r){var a=1539,s=r.slice(0,r.length-a),i=r.slice(r.length-a);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(i)},t}(Ef),RQ=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(r,a,s){var i=s.map(function(l){var c=l.width,d=l.height,u=a/Math.max(d,c);return{width:c*u,height:d*u}}),o=i.length;return Dr(function(){var l=function(f,p){return oc([Yu([68],f),Yu([68],p)],1).as2D(1,136).as1D()},c=function(f,p){var v=i[f],g=v.width,b=v.height;return p(g,b)?Math.abs(g-b)/2:0},d=function(f){return c(f,function(p,v){return p<v})},u=function(f){return c(f,function(p,v){return v<p})},h=r.mul(Yu([o,136],a)).sub(oc(Array.from(Array(o),function(f,p){return l(d(p),u(p))}))).div(oc(Array.from(Array(o),function(f,p){return l(i[p].width,i[p].height)})));return h})},t.prototype.forwardInput=function(r){var a=this;return Dr(function(){var s=a.runNet(r);return a.postProcess(s,r.inputSize,r.inputDimensions.map(function(i){var o=i[0],l=i[1];return{height:o,width:l}}))})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.detectLandmarks=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o=this;return $r(this,function(l){switch(l.label){case 0:return[4,Vi(r)];case 1:return a=l.sent(),s=Dr(function(){return gi(o.forwardInput(a))}),[4,Promise.all(s.map(function(c,d){return Ur(o,void 0,void 0,function(){var u,h,f,p,v;return $r(this,function(g){switch(g.label){case 0:return f=(h=Array).from,[4,c.data()];case 1:return u=f.apply(h,[g.sent()]),p=u.filter(function(b,y){return aU(y)}),v=u.filter(function(b,y){return!aU(y)}),[2,new JLe(Array(68).fill(0).map(function(b,y){return new sn(p[y],v[y])}),{height:a.getInputHeight(d),width:a.getInputWidth(d)})]}})})}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,a.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(PQ),FQ=function(e){da(t,e);function t(r){return r===void 0&&(r=new TQ),e.call(this,"FaceLandmark68Net",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(RQ);function S6e(e){var t=[],r=AQ(e,t).extractDenseBlock3Params,a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return _f(e,t),{params:a,paramMappings:t}}function C6e(e){var t=[],r=Df(e),a=r.extractWeights,s=r.getRemainingWeights,i=_Q(a,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c}}}var k6e=function(e){da(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Dr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=W1(s,i).div(wr(255)),l=a5(o,a.dense0,!0);return l=a5(l,a.dense1),l=a5(l,a.dense2),l=z1(l,[14,14],[2,2],"valid"),l})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(r){return S6e(r)},t.prototype.extractParams=function(r){return C6e(r)},t}(Ef),E6e=function(e){da(t,e);function t(r){return r===void 0&&(r=new k6e),e.call(this,"FaceLandmark68TinyNet",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(RQ);(function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(FQ);function _6e(e,t){return Ea(Fo(e,t.weights),t.biases)}function PP(e,t,r,a,s){s===void 0&&(s="same");var i=t.conv,o=i.filters,l=i.bias,c=ed(e,o,r,s);return c=Ea(c,l),c=_6e(c,t.scale),a?xs(c):c}function D6e(e,t){return PP(e,t,[1,1],!0)}function LQ(e,t){return PP(e,t,[1,1],!1)}function BQ(e,t){return PP(e,t,[2,2],!0,"valid")}function A6e(e,t){function r(l,c,d){var u=e(l),h=u.length/(c*d*d);if(VLe(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+u.length+", numFilters: "+c+", filterSize: "+d);return Dr(function(){return Zm(fl(u,[c,h,d,d]),[2,3,1,0])})}function a(l,c,d,u){var h=r(l,c,d),f=li(e(c));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:h,bias:f}}function s(l,c){var d=li(e(l)),u=li(e(l));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:u}}function i(l,c,d,u){var h=a(l,c,d,u+"/conv"),f=s(c,u+"/scale");return{conv:h,scale:f}}function o(l,c,d,u,h){h===void 0&&(h=!1);var f=i((h?.5:1)*l,c,d,u+"/conv1"),p=i(l,c,d,u+"/conv2");return{conv1:f,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function T6e(e){var t=Df(e),r=t.extractWeights,a=t.getRemainingWeights,s=[],i=A6e(r,s),o=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),u=l(9216,32,3,"conv32_2"),h=l(9216,32,3,"conv32_3"),f=l(36864,64,3,"conv64_down",!0),p=l(36864,64,3,"conv64_1"),v=l(36864,64,3,"conv64_2"),g=l(36864,64,3,"conv64_3"),b=l(147456,128,3,"conv128_down",!0),y=l(147456,128,3,"conv128_1"),S=l(147456,128,3,"conv128_2"),w=l(589824,256,3,"conv256_down",!0),k=l(589824,256,3,"conv256_1"),C=l(589824,256,3,"conv256_2"),_=l(589824,256,3,"conv256_down_out"),E=Dr(function(){return Zm(Bm(r(256*128),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);var T={conv32_down:c,conv32_1:d,conv32_2:u,conv32_3:h,conv64_down:f,conv64_1:p,conv64_2:v,conv64_3:g,conv128_down:b,conv128_1:y,conv128_2:S,conv256_down:w,conv256_1:k,conv256_2:C,conv256_down_out:_,fc:E};return{params:T,paramMappings:s}}function I6e(e,t){var r=mp(e,t);function a(o){var l=r(o+"/scale/weights",1),c=r(o+"/scale/biases",1);return{weights:l,biases:c}}function s(o){var l=r(o+"/conv/filters",4),c=r(o+"/conv/bias",1),d=a(o);return{conv:{filters:l,bias:c},scale:d}}function i(o){return{conv1:s(o+"/conv1"),conv2:s(o+"/conv2")}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function P6e(e){var t=[],r=I6e(e,t),a=r.extractConvLayerParams,s=r.extractResidualLayerParams,i=a("conv32_down"),o=s("conv32_1"),l=s("conv32_2"),c=s("conv32_3"),d=s("conv64_down"),u=s("conv64_1"),h=s("conv64_2"),f=s("conv64_3"),p=s("conv128_down"),v=s("conv128_1"),g=s("conv128_2"),b=s("conv256_down"),y=s("conv256_1"),S=s("conv256_2"),w=s("conv256_down_out"),k=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!$Le(k))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+k);var C={conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:u,conv64_2:h,conv64_3:f,conv128_down:p,conv128_1:v,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:S,conv256_down_out:w,fc:k};return _f(e,t),{params:C,paramMappings:t}}function Su(e,t){var r=D6e(e,t.conv1);return r=LQ(r,t.conv2),r=Ea(r,e),r=xs(r),r}function LN(e,t){var r=BQ(e,t.conv1);r=LQ(r,t.conv2);var a=z1(e,2,2,"valid"),s=qn(a.shape),i=a.shape[3]!==r.shape[3],o=a.shape[1]!==r.shape[1]||a.shape[2]!==r.shape[2];if(o){var l=vy(r.shape);l[1]=1;var c=qn(l);r=vi([r,c],1);var d=vy(r.shape);d[2]=1;var u=qn(d);r=vi([r,u],2)}return a=i?vi([a,s],3):a,r=Ea(a,r),r=xs(r),r}var O6e=function(e){da(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("FaceRecognitionNet - load model before inference");return Dr(function(){var s=r.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=W1(s,i).div(wr(256)),l=BQ(o,a.conv32_down);l=Oi(l,3,2,"valid"),l=Su(l,a.conv32_1),l=Su(l,a.conv32_2),l=Su(l,a.conv32_3),l=LN(l,a.conv64_down),l=Su(l,a.conv64_1),l=Su(l,a.conv64_2),l=Su(l,a.conv64_3),l=LN(l,a.conv128_down),l=Su(l,a.conv128_1),l=Su(l,a.conv128_2),l=LN(l,a.conv256_down),l=Su(l,a.conv256_1),l=Su(l,a.conv256_2),l=LN(l,a.conv256_down_out);var c=l.mean([1,2]),d=NC(c,a.fc);return d})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.computeFaceDescriptor=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o=this;return $r(this,function(l){switch(l.label){case 0:return[4,Vi(r)];case 1:return a=l.sent(),s=Dr(function(){return gi(o.forwardInput(a))}),[4,Promise.all(s.map(function(c){return c.data()}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,a.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(r){return P6e(r)},t.prototype.extractParams=function(r){return T6e(r)},t}(Ef);function UQ(e,t){var r={descriptor:t};return Object.assign({},e,r)}function $Q(e,t){var r={age:t};return Object.assign({},e,r)}function VQ(e,t,r){var a={gender:t,genderProbability:r};return Object.assign({},e,a)}var qQ=function(){function e(t){var r=t===void 0?{}:t,a=r.minFaceSize,s=r.scaleFactor,i=r.maxNumScales,o=r.scoreThresholds,l=r.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=a||20,this._scaleFactor=s||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function M6e(e,t){function r(c,d){var u=fl(e(9*c),[3,3,c,1]),h=li(e(c)),f=li(e(c)),p=li(e(c)),v=li(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:u,batch_norm_scale:h,batch_norm_offset:f,batch_norm_mean:p,batch_norm_variance:v}}function a(c,d,u,h,f){var p=fl(e(c*d*u*u),[u,u,c,d]),v=li(e(d));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(f?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function s(c,d,u,h){var f=a(c,d,u,h,!0),p=f.filters,v=f.bias;return{filters:p,batch_norm_offset:v}}function i(c,d,u){var h=r(c,u+"/depthwise_conv"),f=s(c,d,1,u+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:f}}function o(){var c=s(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),f=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),g=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),S=i(512,512,"mobilenetv1/conv_10"),w=i(512,512,"mobilenetv1/conv_11"),k=i(512,1024,"mobilenetv1/conv_12"),C=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:f,conv_5:p,conv_6:v,conv_7:g,conv_8:b,conv_9:y,conv_10:S,conv_11:w,conv_12:k,conv_13:C}}function l(){var c=s(1024,256,1,"prediction_layer/conv_0"),d=s(256,512,3,"prediction_layer/conv_1"),u=s(512,128,1,"prediction_layer/conv_2"),h=s(128,256,3,"prediction_layer/conv_3"),f=s(256,128,1,"prediction_layer/conv_4"),p=s(128,256,3,"prediction_layer/conv_5"),v=s(256,64,1,"prediction_layer/conv_6"),g=s(64,128,3,"prediction_layer/conv_7"),b=a(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=a(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=a(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),w=a(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=a(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),C=a(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),_=a(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=a(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=a(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),I=a(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),F=a(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=a(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),P={box_encoding_predictor:b,class_predictor:y},q={box_encoding_predictor:S,class_predictor:w},V={box_encoding_predictor:k,class_predictor:C},Y={box_encoding_predictor:_,class_predictor:E},B={box_encoding_predictor:T,class_predictor:I},Q={box_encoding_predictor:F,class_predictor:A};return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:f,conv_5:p,conv_6:v,conv_7:g,box_predictor_0:P,box_predictor_1:q,box_predictor_2:V,box_predictor_3:Y,box_predictor_4:B,box_predictor_5:Q}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function R6e(e){var t=[],r=Df(e),a=r.extractWeights,s=r.getRemainingWeights,i=M6e(a,t),o=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=o(),d=l(),u=KI(a(5118*4),[1,5118,4]),h={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:h},paramMappings:t}}function F6e(e,t){var r=mp(e,t);function a(d,u,h){var f=r(d+"/Conv2d_"+u+"_pointwise/weights",4,h+"/filters"),p=r(d+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:f,batch_norm_offset:p}}function s(d){var u="mobilenetv1/conv_"+d,h="MobilenetV1/Conv2d_"+d+"_depthwise",f=u+"/depthwise_conv",p=u+"/pointwise_conv",v=r(h+"/depthwise_weights",4,f+"/filters"),g=r(h+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),b=r(h+"/BatchNorm/beta",1,f+"/batch_norm_offset"),y=r(h+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),S=r(h+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:g,batch_norm_offset:b,batch_norm_mean:y,batch_norm_variance:S},pointwise_conv:a("MobilenetV1",d,p)}}function i(){return{conv_0:a("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}}function o(d,u){var h=r(d+"/weights",4,u+"/filters"),f=r(d+"/biases",1,u+"/bias");return{filters:h,bias:f}}function l(d){var u=o("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),h=o("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:u,class_predictor:h}}function c(){return{conv_0:a("Prediction",0,"prediction_layer/conv_0"),conv_1:a("Prediction",1,"prediction_layer/conv_1"),conv_2:a("Prediction",2,"prediction_layer/conv_2"),conv_3:a("Prediction",3,"prediction_layer/conv_3"),conv_4:a("Prediction",4,"prediction_layer/conv_4"),conv_5:a("Prediction",5,"prediction_layer/conv_5"),conv_6:a("Prediction",6,"prediction_layer/conv_6"),conv_7:a("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function L6e(e){var t=[],r=F6e(e,t),a=r.extractMobilenetV1Params,s=r.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!kC(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:a(),prediction_layer:s(),output_layer:{extra_dim:i}};return _f(e,t),{params:o,paramMappings:t}}function _u(e,t,r){return Dr(function(){var a=ed(e,t.filters,r,"same");return a=Ea(a,t.batch_norm_offset),iP(a,0,6)})}var B6e=.0010000000474974513;function U6e(e,t,r){return Dr(function(){var a=jC(e,t.filters,r,"same");return a=FX(a,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,B6e),iP(a,0,6)})}function $6e(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function V6e(e,t){return Dr(function(){var r=null,a=_u(e,t.conv_0,[2,2]),s=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(s.forEach(function(i,o){var l=o+1,c=$6e(l);a=U6e(a,i.depthwise_conv,c),a=_u(a,i.pointwise_conv,[1,1]),l===11&&(r=a)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:a,conv11:r}})}function q6e(e,t,r,a,s){var i=e.shape[0],o=Math.min(r,i),l=t.map(function(u,h){return{score:u,boxIndex:h}}).filter(function(u){return u.score>s}).sort(function(u,h){return h.score-u.score}),c=function(u){return u<=a?1:0},d=[];return l.forEach(function(u){if(!(d.length>=o)){for(var h=u.score,f=d.length-1;f>=0;--f){var p=z6e(e,u.boxIndex,d[f]);if(p!==0&&(u.score*=c(p),u.score<=s))break}h===u.score&&d.push(u.boxIndex)}}),d}function z6e(e,t,r){var a=e.arraySync(),s=Math.min(a[t][0],a[t][2]),i=Math.min(a[t][1],a[t][3]),o=Math.max(a[t][0],a[t][2]),l=Math.max(a[t][1],a[t][3]),c=Math.min(a[r][0],a[r][2]),d=Math.min(a[r][1],a[r][3]),u=Math.max(a[r][0],a[r][2]),h=Math.max(a[r][1],a[r][3]),f=(o-s)*(l-i),p=(u-c)*(h-d);if(f<=0||p<=0)return 0;var v=Math.max(s,c),g=Math.max(i,d),b=Math.min(o,u),y=Math.min(l,h),S=Math.max(b-v,0)*Math.max(y-g,0);return S/(f+p-S)}function H6e(e){var t=gi(Zm(e,[1,0])),r=[ji(t[2],t[0]),ji(t[3],t[1])],a=[Ea(t[0],Cd(r[0],wr(2))),Ea(t[1],Cd(r[1],wr(2)))];return{sizes:r,centers:a}}function W6e(e,t){var r=H6e(e),a=r.sizes,s=r.centers,i=gi(Zm(t,[1,0])),o=Cd(Fo(o3(Cd(i[2],wr(5))),a[0]),wr(2)),l=Ea(Fo(Cd(i[0],wr(10)),a[0]),s[0]),c=Cd(Fo(o3(Cd(i[3],wr(5))),a[1]),wr(2)),d=Ea(Fo(Cd(i[1],wr(10)),a[1]),s[1]);return Zm(oc([ji(l,o),ji(d,c),Ea(l,o),Ea(d,c)]),[1,0])}function G6e(e,t,r){return Dr(function(){var a=e.shape[0],s=W6e(Ad(D0(r.extra_dim,[a,1,1]),[-1,4]),Ad(e,[-1,4]));s=Ad(s,[a,s.shape[0]/a,4]);var i=PX(eh(t,[0,0,1],[-1,-1,-1])),o=eh(i,[0,0,0],[-1,-1,1]);o=Ad(o,[a,o.shape[1]]);var l=gi(s),c=gi(o);return{boxes:l,scores:c}})}function r0(e,t){return Dr(function(){var r=e.shape[0],a=Ad(Pd(e,t.box_encoding_predictor),[r,-1,1,4]),s=Ad(Pd(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:a,classPrediction:s}})}function Y6e(e,t,r){return Dr(function(){var a=_u(e,r.conv_0,[1,1]),s=_u(a,r.conv_1,[2,2]),i=_u(s,r.conv_2,[1,1]),o=_u(i,r.conv_3,[2,2]),l=_u(o,r.conv_4,[1,1]),c=_u(l,r.conv_5,[2,2]),d=_u(c,r.conv_6,[1,1]),u=_u(d,r.conv_7,[2,2]),h=r0(t,r.box_predictor_0),f=r0(e,r.box_predictor_1),p=r0(s,r.box_predictor_2),v=r0(o,r.box_predictor_3),g=r0(c,r.box_predictor_4),b=r0(u,r.box_predictor_5),y=vi([h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding],1),S=vi([h.classPrediction,f.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction,b.classPrediction],1);return{boxPredictions:y,classPredictions:S}})}var G1=function(){function e(t){var r=t===void 0?{}:t,a=r.minConfidence,s=r.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=a||.5,this._maxResults=s||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),zQ=function(e){da(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("SsdMobilenetv1 - load model before inference");return Dr(function(){var s=r.toBatchTensor(512,!1).toFloat(),i=ji(Fo(s,wr(.007843137718737125)),wr(1)),o=V6e(i,a.mobilenetv1),l=Y6e(o.out,o.conv11,a.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return G6e(c,d,a.output_layer)})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Vi(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.locateFaces=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T;return $r(this,function(I){switch(I.label){case 0:return s=new G1(a),i=s.maxResults,o=s.minConfidence,[4,Vi(r)];case 1:for(l=I.sent(),c=this.forwardInput(l),d=c.boxes,u=c.scores,h=d[0],f=u[0],p=1;p<d.length;p++)d[p].dispose(),u[p].dispose();return b=(g=Array).from,[4,f.data()];case 2:return v=b.apply(g,[I.sent()]),y=.5,S=q6e(h,v,i,y,o),w=l.getReshapedInputDimensions(0),k=l.inputSize,C=k/w.width,_=k/w.height,E=h.arraySync(),T=S.map(function(F){var A=[Math.max(0,E[F][0]),Math.min(1,E[F][2])].map(function(Q){return Q*_}),P=A[0],q=A[1],V=[Math.max(0,E[F][1]),Math.min(1,E[F][3])].map(function(Q){return Q*C}),Y=V[0],B=V[1];return new dh(v[F],new wP(Y,P,B-Y,q-P),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),h.dispose(),f.dispose(),[2,T]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(r){return L6e(r)},t.prototype.extractParams=function(r){return R6e(r)},t}(Ef);(function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(zQ);var K6e=.4,X6e=[new sn(.738768,.874946),new sn(2.42204,2.65704),new sn(4.30971,7.04493),new sn(10.246,4.59428),new sn(12.6868,11.8741)],Q6e=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],J6e=[117.001,114.697,97.404],Z6e="tiny_yolov2_model",e8e="tiny_yolov2_separable_conv_model",BN=function(e){return typeof e=="number"};function t8e(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!BN(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return BN(t.x)&&BN(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(BN)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function OP(e){return Dr(function(){var t=Fo(e,wr(.10000000149011612));return Ea(xs(ji(e,t)),t)})}function ym(e,t){return Dr(function(){var r=iv(e,[[0,0],[1,1],[1,1],[0,0]]);return r=ed(r,t.conv.filters,[1,1],"valid"),r=ji(r,t.bn.sub),r=Fo(r,t.bn.truediv),r=Ea(r,t.conv.bias),OP(r)})}function jm(e,t){return Dr(function(){var r=iv(e,[[0,0],[1,1],[1,1],[0,0]]);return r=dP(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=Ea(r,t.bias),OP(r)})}function r8e(e,t){var r=DC(e,t);function a(o,l){var c=li(e(o)),d=li(e(o));return t.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function s(o,l,c){var d=r(o,l,3,c+"/conv"),u=a(l,c+"/bn");return{conv:d,bn:u}}var i=AP(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function a8e(e,t,r,a){var s=Df(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=r8e(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams,f;if(t.withSeparableConvs){var p=a[0],v=a[1],g=a[2],b=a[3],y=a[4],S=a[5],w=a[6],k=a[7],C=a[8],_=t.isFirstLayerConv2d?d(p,v,3,"conv0"):h(p,v,"conv0"),E=h(v,g,"conv1"),T=h(g,b,"conv2"),I=h(b,y,"conv3"),F=h(y,S,"conv4"),A=h(S,w,"conv5"),P=k?h(w,k,"conv6"):void 0,q=C?h(k,C,"conv7"):void 0,V=d(C||k||w,5*r,1,"conv8");f={conv0:_,conv1:E,conv2:T,conv3:I,conv4:F,conv5:A,conv6:P,conv7:q,conv8:V}}else{var p=a[0],v=a[1],g=a[2],b=a[3],y=a[4],S=a[5],w=a[6],k=a[7],C=a[8],_=u(p,v,"conv0"),E=u(v,g,"conv1"),T=u(g,b,"conv2"),I=u(b,y,"conv3"),F=u(y,S,"conv4"),A=u(S,w,"conv5"),P=u(w,k,"conv6"),q=u(k,C,"conv7"),V=d(C,5*r,1,"conv8");f={conv0:_,conv1:E,conv2:T,conv3:I,conv4:F,conv5:A,conv6:P,conv7:q,conv8:V}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:f,paramMappings:l}}function n8e(e,t){var r=mp(e,t);function a(l){var c=r(l+"/sub",1),d=r(l+"/truediv",1);return{sub:c,truediv:d}}function s(l){var c=r(l+"/filters",4),d=r(l+"/bias",1);return{filters:c,bias:d}}function i(l){var c=s(l+"/conv"),d=a(l+"/bn");return{conv:c,bn:d}}var o=TP(r);return{extractConvParams:s,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function s8e(e,t){var r=[],a=n8e(e,r),s=a.extractConvParams,i=a.extractConvWithBatchNormParams,o=a.extractSeparableConvParams,l;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;l={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:s("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return _f(e,r),{params:l,paramMappings:r}}var uU;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(uU||(uU={}));var MP=function(){function e(t){var r=t===void 0?{}:t,a=r.inputSize,s=r.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=a||416,this._scoreThreshold=s||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),HQ=function(e){da(t,e);function t(r){var a=e.call(this,"TinyYolov2")||this;return t8e(r),a._config=r,a}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(r,a){var s=ym(r,a.conv0);return s=Oi(s,[2,2],[2,2],"same"),s=ym(s,a.conv1),s=Oi(s,[2,2],[2,2],"same"),s=ym(s,a.conv2),s=Oi(s,[2,2],[2,2],"same"),s=ym(s,a.conv3),s=Oi(s,[2,2],[2,2],"same"),s=ym(s,a.conv4),s=Oi(s,[2,2],[2,2],"same"),s=ym(s,a.conv5),s=Oi(s,[2,2],[1,1],"same"),s=ym(s,a.conv6),s=ym(s,a.conv7),Pd(s,a.conv8,"valid",!1)},t.prototype.runMobilenet=function(r,a){var s=this.config.isFirstLayerConv2d?OP(Pd(r,a.conv0,"valid",!1)):jm(r,a.conv0);return s=Oi(s,[2,2],[2,2],"same"),s=jm(s,a.conv1),s=Oi(s,[2,2],[2,2],"same"),s=jm(s,a.conv2),s=Oi(s,[2,2],[2,2],"same"),s=jm(s,a.conv3),s=Oi(s,[2,2],[2,2],"same"),s=jm(s,a.conv4),s=Oi(s,[2,2],[2,2],"same"),s=jm(s,a.conv5),s=Oi(s,[2,2],[1,1],"same"),s=a.conv6?jm(s,a.conv6):s,s=a.conv7?jm(s,a.conv7):s,Pd(s,a.conv8,"valid",!1)},t.prototype.forwardInput=function(r,a){var s=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Dr(function(){var o=r.toBatchTensor(a,!1).toFloat();return o=s.config.meanRgb?W1(o,s.config.meanRgb):o,o=o.div(wr(256)),s.config.withSeparableConvs?s.runMobilenet(o,i):s.runTinyYolov2(o,i)})},t.prototype.forward=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Vi(r)];case 1:return[4,s.apply(this,[i.sent(),a])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,v,g,b,y,S=this;return $r(this,function(w){switch(w.label){case 0:return s=new MP(a),i=s.inputSize,o=s.scoreThreshold,[4,Vi(r)];case 1:return l=w.sent(),[4,this.forwardInput(l,i)];case 2:return c=w.sent(),d=Dr(function(){return gi(c)[0].expandDims()}),u={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),o)];case 3:return h=w.sent(),c.dispose(),d.dispose(),f=h.map(function(k){return k.box}),p=h.map(function(k){return k.score}),v=h.map(function(k){return k.classScore}),g=h.map(function(k){return S.config.classes[k.label]}),b=n1(f.map(function(k){return k.rescale(i)}),p,this.config.iouThreshold,!0),y=b.map(function(k){return new vQ(p[k],v[k],g[k],f[k],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(r){return s8e(r,this.config)},t.prototype.extractParams=function(r){var a=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,s=a?a.length:void 0;if(s!==7&&s!==8&&s!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+s+" filterSizes in config");return a8e(r,this.config,this.boxEncodingSize,a)},t.prototype.extractBoxes=function(r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T,I,F,A,P,q,V,Y,B,Q,R=this;return $r(this,function(Z){switch(Z.label){case 0:return i=a.width,o=a.height,l=Math.max(i,o),c=l/i,d=l/o,u=r.shape[1],h=this.config.anchors.length,f=Dr(function(){var J=r.reshape([u,u,h,R.boxEncodingSize]),ie=J.slice([0,0,0,0],[u,u,h,4]),M=J.slice([0,0,0,4],[u,u,h,1]),z=R.withClassScores?Cf(J.slice([0,0,0,5],[u,u,h,R.config.classes.length]),3):wr(0);return[ie,M,z]}),p=f[0],v=f[1],g=f[2],b=[],[4,v.array()];case 1:return y=Z.sent(),[4,p.array()];case 2:S=Z.sent(),w=0,Z.label=3;case 3:if(!(w<u))return[3,12];k=0,Z.label=4;case 4:if(!(k<u))return[3,11];C=0,Z.label=5;case 5:return C<h?(_=r5(y[w][k][C][0]),!s||_>s?(E=(k+r5(S[w][k][C][0]))/u*c,T=(w+r5(S[w][k][C][1]))/u*d,I=Math.exp(S[w][k][C][2])*this.config.anchors[C].x/u*c,F=Math.exp(S[w][k][C][3])*this.config.anchors[C].y/u*d,A=E-I/2,P=T-F/2,q={row:w,col:k,anchor:C},this.withClassScores?[4,this.extractPredictedClass(g,q)]:[3,7]):[3,9]):[3,10];case 6:return Q=Z.sent(),[3,8];case 7:Q={classScore:1,label:0},Z.label=8;case 8:V=Q,Y=V.classScore,B=V.label,b.push(Ao({box:new EC(A,P,A+I,P+F),score:_,classScore:_*Y,label:B},q)),Z.label=9;case 9:return C++,[3,5];case 10:return k++,[3,4];case 11:return w++,[3,3];case 12:return p.dispose(),v.dispose(),g.dispose(),[2,b]}})})},t.prototype.extractPredictedClass=function(r,a){return Ur(this,void 0,void 0,function(){var s,i,o,l;return $r(this,function(c){switch(c.label){case 0:return s=a.row,i=a.col,o=a.anchor,[4,r.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,u){return l[s][i][o][u]}).map(function(d,u){return{classScore:d,label:u}}).reduce(function(d,u){return d.classScore>u.classScore?d:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Ef),i8e=function(e){da(t,e);function t(r){r===void 0&&(r=!0);var a=this,s=Object.assign({},{withSeparableConvs:r,iouThreshold:K6e,classes:["face"]},r?{anchors:Q6e,meanRgb:J6e}:{anchors:X6e,withClassScores:!0});return a=e.call(this,s)||this,a}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.detect(r,a)];case 1:return s=i.sent(),[2,s.map(function(o){return new dh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?e8e:Z6e},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(HQ),RP=function(e){da(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._name="TinyFaceDetectorOptions",r}return t}(MP),Y1=function(){function e(){}return e.prototype.then=function(t){return Ur(this,void 0,void 0,function(){var r;return $r(this,function(a){switch(a.label){case 0:return r=t,[4,this.run()];case 1:return[2,r.apply(void 0,[a.sent()])]}})})},e.prototype.run=function(){return Ur(this,void 0,void 0,function(){return $r(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function AC(e,t,r,a,s){return s===void 0&&(s=function(i){var o=i.alignedRect;return o}),Ur(this,void 0,void 0,function(){var i,o,l,c,d;return $r(this,function(u){switch(u.label){case 0:return i=e.map(function(h){return m6e(h)?s(h):h.detection}),l=a,l?[3,5]:t instanceof hs?[4,_P(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,EP(t,i)];case 3:c=u.sent(),u.label=4;case 4:l=c,u.label=5;case 5:return o=l,[4,r(o)];case 6:return d=u.sent(),o.forEach(function(h){return h instanceof hs&&h.dispose()}),[2,d]}})})}function FP(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i=this;return $r(this,function(o){return[2,AC([e],t,function(l){return Ur(i,void 0,void 0,function(){return $r(this,function(c){return[2,r(l[0])]})})},a,s)]})})}function o8e(e){return Dr(function(){return oc(gi(e,3).reverse(),3)})}var UN=2,Q2=12;function l8e(e,t){var r=DC(e,t),a=DP(e,t);function s(d,u){var h=li(e(d));return t.push({paramPath:u}),h}function i(d,u,h){h===void 0&&(h=!1);var f=r(d[0],d[1],3,u+"/conv1"),p=s(d[1],u+"/prelu1_alpha"),v=r(d[1],d[2],3,u+"/conv2"),g=s(d[2],u+"/prelu2_alpha"),b=r(d[2],d[3],h?2:3,u+"/conv3"),y=s(d[3],u+"/prelu3_alpha");return{conv1:f,prelu1_alpha:p,conv2:v,prelu2_alpha:g,conv3:b,prelu3_alpha:y}}function o(){var d=i([3,10,16,32],"pnet"),u=r(32,2,1,"pnet/conv4_1"),h=r(32,4,1,"pnet/conv4_2");return Ao(Ao({},d),{conv4_1:u,conv4_2:h})}function l(){var d=i([3,28,48,64],"rnet",!0),u=a(576,128,"rnet/fc1"),h=s(128,"rnet/prelu4_alpha"),f=a(128,2,"rnet/fc2_1"),p=a(128,4,"rnet/fc2_2");return Ao(Ao({},d),{fc1:u,prelu4_alpha:h,fc2_1:f,fc2_2:p})}function c(){var d=i([3,32,64,64],"onet"),u=r(64,128,2,"onet/conv4"),h=s(128,"onet/prelu4_alpha"),f=a(1152,256,"onet/fc1"),p=s(256,"onet/prelu5_alpha"),v=a(256,2,"onet/fc2_1"),g=a(256,4,"onet/fc2_2"),b=a(256,10,"onet/fc2_3");return Ao(Ao({},d),{conv4:u,prelu4_alpha:h,fc1:f,prelu5_alpha:p,fc2_1:v,fc2_2:g,fc2_3:b})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function c8e(e){var t=Df(e),r=t.extractWeights,a=t.getRemainingWeights,s=[],i=l8e(r,s),o=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,d=o(),u=l(),h=c();if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{pnet:d,rnet:u,onet:h},paramMappings:s}}function d8e(e,t){var r=mp(e,t);function a(u){var h=r(u+"/weights",4,u+"/filters"),f=r(u+"/bias",1);return{filters:h,bias:f}}function s(u){var h=r(u+"/weights",2),f=r(u+"/bias",1);return{weights:h,bias:f}}function i(u){return r(u,1)}function o(u){var h=a(u+"/conv1"),f=i(u+"/prelu1_alpha"),p=a(u+"/conv2"),v=i(u+"/prelu2_alpha"),g=a(u+"/conv3"),b=i(u+"/prelu3_alpha");return{conv1:h,prelu1_alpha:f,conv2:p,prelu2_alpha:v,conv3:g,prelu3_alpha:b}}function l(){var u=o("pnet"),h=a("pnet/conv4_1"),f=a("pnet/conv4_2");return Ao(Ao({},u),{conv4_1:h,conv4_2:f})}function c(){var u=o("rnet"),h=s("rnet/fc1"),f=i("rnet/prelu4_alpha"),p=s("rnet/fc2_1"),v=s("rnet/fc2_2");return Ao(Ao({},u),{fc1:h,prelu4_alpha:f,fc2_1:p,fc2_2:v})}function d(){var u=o("onet"),h=a("onet/conv4"),f=i("onet/prelu4_alpha"),p=s("onet/fc1"),v=i("onet/prelu5_alpha"),g=s("onet/fc2_1"),b=s("onet/fc2_2"),y=s("onet/fc2_3");return Ao(Ao({},u),{conv4:h,prelu4_alpha:f,fc1:p,prelu5_alpha:v,fc2_1:g,fc2_2:b,fc2_3:y})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function u8e(e){var t=[],r=d8e(e,t),a=r.extractPNetParams,s=r.extractRNetParams,i=r.extractONetParams,o=a(),l=s(),c=i();return _f(e,t),{params:{pnet:o,rnet:l,onet:c},paramMappings:t}}function p3(e,t){var r=t[0],a=t[1];return{height:Math.floor(r*e),width:Math.floor(a*e)}}function h8e(e,t,r){for(var a=r[0],s=r[1],i=Q2/e,o=[],l=Math.min(a,s)*i,c=0;l>=12;)o.push(i*Math.pow(t,c)),l=l*t,c+=1;return o}var LP=function(e){da(t,e);function t(r,a,s,i){return e.call(this,{left:r,top:a,right:s,bottom:i},!0)||this}return t}(ep);function WQ(e){return Dr(function(){return Fo(ji(e,wr(127.5)),wr(.0078125))})}function M0(e,t){return Dr(function(){return Ea(xs(e),Fo(t,z2(xs(z2(e)))))})}function BP(e,t,r){return r===void 0&&(r=!1),Dr(function(){var a=Pd(e,t.conv1,"valid");return a=M0(a,t.prelu1_alpha),a=Oi(a,r?[2,2]:[3,3],[2,2],"same"),a=Pd(a,t.conv2,"valid"),a=M0(a,t.prelu2_alpha),a=r?a:Oi(a,[3,3],[2,2],"valid"),a=Pd(a,t.conv3,"valid"),a=M0(a,t.prelu3_alpha),a})}function f8e(e,t){return Dr(function(){var r=BP(e,t,!0),a=Pd(r,t.conv4_1,"valid"),s=Bc(wC(a,3),3),i=Cf(ji(a,s),3),o=Pd(r,t.conv4_2,"valid");return{prob:i,regions:o}})}function m8e(e,t){return Dr(function(){var r=p3(t,e.shape.slice(1)),a=r.height,s=r.width,i=pP.resizeBilinear(e,[a,s]),o=WQ(i);return Zm(o,[0,2,1,3])})}function p8e(e,t,r,a){for(var s=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var l=0;l<e.shape[1];l++)i[o][l]>=a&&s.push(new sn(l,o));var c=s.map(function(d){var u=new EC(Math.round((d.y*UN+1)/r),Math.round((d.x*UN+1)/r),Math.round((d.y*UN+Q2)/r),Math.round((d.x*UN+Q2)/r)),h=i[d.y][d.x],f=t.arraySync(),p=new LP(f[d.y][d.x][0],f[d.y][d.x][1],f[d.y][d.x][2],f[d.y][d.x][3]);return{cell:u,score:h,region:p}});return c}function x8e(e,t,r,a,s){s.stage1=[];var i=t.map(function(f){return Dr(function(){var p={scale:f},v=m8e(e,f),g=Date.now(),b=f8e(v,a),y=b.prob,S=b.regions;p.pnet=Date.now()-g;var w=gi(gi(y,3)[1])[0],k=gi(S)[0];return{scoresTensor:w,regionsTensor:k,scale:f,statsForScale:p}})}),o=i.map(function(f){var p=f.scoresTensor,v=f.regionsTensor,g=f.scale,b=f.statsForScale,y=p8e(p,v,g,r);if(p.dispose(),v.dispose(),!y.length)return s.stage1.push(b),[];var S=Date.now(),w=n1(y.map(function(k){return k.cell}),y.map(function(k){return k.score}),.5);return b.nms=Date.now()-S,b.numBoxes=w.length,s.stage1.push(b),w.map(function(k){return y[k]})}),l=o.reduce(function(f,p){return f.concat(p)},[]),c=[],d=[];if(l.length>0){var u=Date.now(),h=n1(l.map(function(f){return f.cell}),l.map(function(f){return f.score}),.7);s.stage1_nms=Date.now()-u,d=h.map(function(f){return l[f].score}),c=h.map(function(f){return l[f]}).map(function(f){var p=f.cell,v=f.region;return new EC(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:c,scores:d}}function GQ(e,t,r){var a=r.width,s=r.height;return Ur(this,void 0,void 0,function(){var i,o,l,c=this;return $r(this,function(d){switch(d.label){case 0:return i=Vx(e),[4,Promise.all(t.map(function(u){return Ur(c,void 0,void 0,function(){var h,f,p,v,g,b,y,S;return $r(this,function(w){return h=u.padAtBorders(e.height,e.width),f=h.y,p=h.ey,v=h.x,g=h.ex,b=v-1,y=f-1,S=i.getImageData(b,y,g-b,p-y),[2,Uo.isNodejs()?kP(S):createImageBitmap(S)]})})}))];case 1:return o=d.sent(),l=[],o.forEach(function(u){var h=_C({width:a,height:s}),f=Vx(h);f.drawImage(u,0,0,a,s);for(var p=f.getImageData(0,0,a,s).data,v=[],g=0;g<p.length;g+=4)v.push(p[g+2]),v.push(p[g+1]),v.push(p[g]);l.push(v)}),[2,l.map(function(u){var h=Dr(function(){var f=Zm(fl(u,[1,a,s,3]),[0,2,1,3]).toFloat();return WQ(f)});return h})]}})})}function v8e(e,t){return Dr(function(){var r=BP(e,t),a=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Uu(a,t.fc1),i=M0(s,t.prelu4_alpha),o=Uu(i,t.fc2_1),l=Bc(wC(o,1),1),c=Cf(ji(o,l),1),d=Uu(i,t.fc2_2),u=gi(c,1)[1];return{scores:u,regions:d}})}function g8e(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,v,g,b,y,S;return $r(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,GQ(e,t,{width:24,height:24})];case 1:return o=w.sent(),s.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(k){var C=v8e(k,a);return k.dispose(),C}),s.stage2_rnet=Date.now()-i,c=l.length>1?vi(l.map(function(k){return k.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[w.sent()]),c.dispose(),f=d.map(function(k,C){return{score:k,idx:C}}).filter(function(k){return k.score>r}).map(function(k){var C=k.idx;return C}),p=f.map(function(k){return t[k]}),v=f.map(function(k){return d[k]}),g=[],b=[],p.length>0&&(i=Date.now(),y=n1(p,v,.7),s.stage2_nms=Date.now()-i,S=y.map(function(k){var C=l[f[k]].regions.arraySync();return new LP(C[0][0],C[0][1],C[0][2],C[0][3])}),b=y.map(function(k){return v[k]}),g=y.map(function(k,C){return p[k].calibrate(S[C])})),l.forEach(function(k){k.regions.dispose(),k.scores.dispose()}),[2,{boxes:g,scores:b}]}})})}function b8e(e,t){return Dr(function(){var r=BP(e,t);r=Oi(r,[2,2],[2,2],"same"),r=Pd(r,t.conv4,"valid"),r=M0(r,t.prelu4_alpha);var a=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Uu(a,t.fc1),i=M0(s,t.prelu5_alpha),o=Uu(i,t.fc2_1),l=Bc(wC(o,1),1),c=Cf(ji(o,l),1),d=Uu(i,t.fc2_2),u=Uu(i,t.fc2_3),h=gi(c,1)[1];return{scores:h,regions:d,points:u}})}function y8e(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,v,g,b,y,S,w;return $r(this,function(k){switch(k.label){case 0:return i=Date.now(),[4,GQ(e,t,{width:48,height:48})];case 1:return o=k.sent(),s.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(C){var _=b8e(C,a);return C.dispose(),_}),s.stage3_onet=Date.now()-i,c=l.length>1?vi(l.map(function(C){return C.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[k.sent()]),c.dispose(),f=d.map(function(C,_){return{score:C,idx:_}}).filter(function(C){return C.score>r}).map(function(C){var _=C.idx;return _}),p=f.map(function(C){var _=l[C].regions.arraySync();return new LP(_[0][0],_[0][1],_[0][2],_[0][3])}),v=f.map(function(C,_){return t[C].calibrate(p[_])}),g=f.map(function(C){return d[C]}),b=[],y=[],S=[],v.length>0&&(i=Date.now(),w=n1(v,g,.7,!1),s.stage3_nms=Date.now()-i,b=w.map(function(C){return v[C]}),y=w.map(function(C){return g[C]}),S=w.map(function(C,_){return Array(5).fill(0).map(function(E,T){var I=l[C].points.arraySync();return new sn(I[0][T]*(b[_].width+1)+b[_].left,I[0][T+5]*(b[_].height+1)+b[_].top)})})),l.forEach(function(C){C.regions.dispose(),C.scores.dispose(),C.points.dispose()}),[2,{boxes:b,scores:y,points:S}]}})})}var j8e=function(e){da(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(r){return Ur(this,void 0,void 0,function(){return $r(this,function(a){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,r)]})})},t.prototype.loadFromDisk=function(r){return Ur(this,void 0,void 0,function(){return $r(this,function(a){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,r)]})})},t.prototype.forwardInput=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T;return $r(this,function(I){switch(I.label){case 0:if(s=this.params,!s)throw new Error("Mtcnn - load model before inference");if(i=r.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},l=Date.now(),c=Dr(function(){return o8e(Bc(jP.fromPixels(i)).toFloat())}),d=function(F){return c.dispose(),o.total=Date.now()-l,F},u=c.shape.slice(1),h=u[0],f=u[1],p=new qQ(a),v=p.minFaceSize,g=p.scaleFactor,b=p.maxNumScales,y=p.scoreThresholds,S=p.scaleSteps,w=(S||h8e(v,g,[h,f])).filter(function(F){var A=p3(F,[h,f]);return Math.min(A.width,A.height)>Q2}).slice(0,b),o.scales=w,o.pyramid=w.map(function(F){return p3(F,[h,f])}),k=Date.now(),[4,x8e(c,w,y[0],s.pnet,o)];case 1:return C=I.sent(),o.total_stage1=Date.now()-k,C.boxes.length?(o.stage2_numInputBoxes=C.boxes.length,k=Date.now(),[4,g8e(i,C.boxes,y[1],s.rnet,o)]):[2,d({results:[],stats:o})];case 2:return _=I.sent(),o.total_stage2=Date.now()-k,_.boxes.length?(o.stage3_numInputBoxes=_.boxes.length,k=Date.now(),[4,y8e(i,_.boxes,y[2],s.onet,o)]):[2,d({results:[],stats:o})];case 3:return E=I.sent(),o.total_stage3=Date.now()-k,T=E.boxes.map(function(F,A){return IP(SP({},new dh(E.scores[A],new wP(F.left/f,F.top/h,F.width/f,F.height/h),{height:h,width:f})),new QLe(E.points[A].map(function(P){return P.sub(new sn(F.left,F.top)).div(new sn(F.width,F.height))}),{width:F.width,height:F.height}))}),[2,d({results:T,stats:o})]}})})},t.prototype.forward=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Vi(r)];case 1:return[4,s.apply(this,[i.sent(),a])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Vi(r)];case 1:return[2,s.apply(this,[i.sent(),a])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(r){return u8e(r)},t.prototype.extractParams=function(r){return c8e(r)},t}(Ef),N8e=.4,w8e=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],S8e=[117.001,114.697,97.404],C8e=function(e){da(t,e);function t(){var r=this,a={withSeparableConvs:!0,iouThreshold:N8e,classes:["face"],anchors:w8e,meanRgb:S8e,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.detect(r,a)];case 1:return s=i.sent(),[2,s.map(function(o){return new dh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(HQ),ts={ssdMobilenetv1:new zQ,tinyFaceDetector:new C8e,tinyYolov2:new i8e,mtcnn:new j8e,faceLandmark68Net:new FQ,faceLandmark68TinyNet:new E6e,faceRecognitionNet:new O6e,faceExpressionNet:new f6e,ageGenderNet:new w6e},YQ=function(e){da(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.extractedFaces=s,i}return t}(Y1),UP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s=this;return $r(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,AC(r,this.input,function(o){return Ur(s,void 0,void 0,function(){return $r(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return ts.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return a=i.sent(),[2,r.map(function(o,l){return OQ(o,a[l])})]}})})},t.prototype.withAgeAndGender=function(){return new zP(this,this.input)},t}(YQ),$P=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,FP(r,this.input,function(i){return ts.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return a=s.sent(),[2,OQ(r,a)]}})})},t.prototype.withAgeAndGender=function(){return new HP(this,this.input)},t}(YQ),VP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new WP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new YP(this,this.input)},t}(UP),qP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new GP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new KP(this,this.input)},t}($P),KQ=function(e){da(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.extractedFaces=s,i}return t}(Y1),zP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s=this;return $r(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,AC(r,this.input,function(o){return Ur(s,void 0,void 0,function(){return $r(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return ts.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return a=i.sent(),[2,r.map(function(o,l){var c=a[l],d=c.age,u=c.gender,h=c.genderProbability;return $Q(VQ(o,u,h),d)})]}})})},t.prototype.withFaceExpressions=function(){return new UP(this,this.input)},t}(KQ),HP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o;return $r(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?[4,FP(r,this.input,function(c){return ts.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return a=l.sent(),s=a.age,i=a.gender,o=a.genderProbability,[2,$Q(VQ(r,i,o),s)]}})})},t.prototype.withFaceExpressions=function(){return new $P(this,this.input)},t}(KQ),WP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new YP(this,this.input)},t}(zP),GP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new qP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new KP(this,this.input)},t}(HP),XQ=function(e){da(t,e);function t(r,a){var s=e.call(this)||this;return s.parentTask=r,s.input=a,s}return t}(Y1),YP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),[4,AC(r,this.input,function(i){return Promise.all(i.map(function(o){return ts.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return a=s.sent(),[2,a.map(function(i,o){return UQ(r[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withAgeAndGender=function(){return new WP(this,this.input)},t}(XQ),KP=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,FP(r,this.input,function(i){return ts.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return a=s.sent(),[2,UQ(r,a)]}})})},t.prototype.withFaceExpressions=function(){return new qP(this,this.input)},t.prototype.withAgeAndGender=function(){return new GP(this,this.input)},t}(XQ),QQ=function(e){da(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.useTinyLandmarkNet=s,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ts.faceLandmark68TinyNet:ts.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Y1),k8e=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l=this;return $r(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return r=c.sent(),a=r.map(function(d){return d.detection}),this.input instanceof hs?[4,_P(this.input,a)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,EP(this.input,a)];case 4:i=c.sent(),c.label=5;case 5:return s=i,[4,Promise.all(s.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return o=c.sent(),s.forEach(function(d){return d instanceof hs&&d.dispose()}),[2,r.map(function(d,u){return IP(d,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withAgeAndGender=function(){return new WP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new YP(this,this.input)},t}(QQ),E8e=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o;return $r(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?(a=r.detection,this.input instanceof hs?[4,_P(this.input,[a])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,EP(this.input,[a])];case 4:i=l.sent(),l.label=5;case 5:return s=i,[4,this.landmarkNet.detectLandmarks(s[0])];case 6:return o=l.sent(),s.forEach(function(c){return c instanceof hs&&c.dispose()}),[2,IP(r,o)]}})})},t.prototype.withFaceExpressions=function(){return new qP(this,this.input)},t.prototype.withAgeAndGender=function(){return new GP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new KP(this,this.input)},t}(QQ),JQ=function(e){da(t,e);function t(r,a){a===void 0&&(a=new G1);var s=e.call(this)||this;return s.input=r,s.options=a,s}return t}(Y1),ZQ=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i;return $r(this,function(o){switch(o.label){case 0:return r=this,a=r.input,s=r.options,s instanceof qQ?[4,ts.mtcnn.forward(a,s)]:[3,2];case 1:return[2,o.sent().map(function(l){return l.detection})];case 2:if(i=s instanceof RP?function(l){return ts.tinyFaceDetector.locateFaces(l,s)}:s instanceof G1?function(l){return ts.ssdMobilenetv1.locateFaces(l,s)}:s instanceof MP?function(l){return ts.tinyYolov2.locateFaces(l,s)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(a)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var r=this;return new Promise(function(a){return Ur(r,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,a(s.map(function(o){return SP({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new k8e(this.runAndExtendWithFaceDetections(),this.input,r)},t.prototype.withFaceExpressions=function(){return new UP(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new zP(this.runAndExtendWithFaceDetections(),this.input)},t}(JQ),_8e=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,new ZQ(this.input,this.options)];case 1:return r=s.sent(),a=r[0],r.forEach(function(i){i.score>a.score&&(a=i)}),[2,a]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var r=this;return new Promise(function(a){return Ur(r,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,a(s?SP({},s):void 0)]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new E8e(this.runAndExtendWithFaceDetection(),this.input,r)},t.prototype.withFaceExpressions=function(){return new $P(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new HP(this.runAndExtendWithFaceDetection(),this.input)},t}(JQ);function D8e(e,t){return t===void 0&&(t=new G1),new _8e(e,t)}function A8e(e,t){return t===void 0&&(t=new G1),new ZQ(e,t)}function T8e(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var r=Array.from(e),a=Array.from(t);return Math.sqrt(r.map(function(s,i){return s-a[i]}).reduce(function(s,i){return s+Math.pow(i,2)},0))}var eJ=function(){function e(t,r){r===void 0&&(r=.6),this._distanceThreshold=r;var a=Array.isArray(t)?t:[t];if(!a.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var s=1,i=function(){return"person "+s++};this._labeledDescriptors=a.map(function(o){if(o instanceof g0)return o;if(o instanceof Float32Array)return new g0(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new g0(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,r){return r.map(function(a){return T8e(a,t)}).reduce(function(a,s){return a+s},0)/(r.length||1)},e.prototype.matchDescriptor=function(t){var r=this;return this.labeledDescriptors.map(function(a){var s=a.descriptors,i=a.label;return new iU(i,r.computeMeanDistance(t,s))}).reduce(function(a,s){return a.distance<s.distance?a:s})},e.prototype.findBestMatch=function(t){var r=this.matchDescriptor(t);return r.distance<this.distanceThreshold?r:new iU("unknown",r.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var r=t.labeledDescriptors.map(function(a){return g0.fromJSON(a)});return new e(r,t.distanceThreshold)},e}();const I8e=()=>{const e=j.useRef(),[t,r]=j.useState(""),[a,s]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(null),[d,u]=j.useState(!1),[h,f]=j.useState(!1),[p,v]=j.useState(!1),[g,b]=j.useState(null),[y,S]=j.useState(!1),[w,k]=j.useState(0);j.useEffect(()=>{P()},[]);const C=async()=>{try{console.log("Starting camera...");const R={video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}},Z=await navigator.mediaDevices.getUserMedia(R);e.current&&(e.current.srcObject=Z,e.current.onloadedmetadata=()=>{S(!0),console.log("Camera ready")})}catch(R){console.error("Camera access error:",R),alert("Camera access denied or not available")}},_={local:"/weights",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},E=async(R,Z,J)=>{const ie=[{name:"Local Weights",url:_.local},{name:"Primary CDN",url:_.cdn.primary},{name:"Backup CDN",url:_.cdn.backup}];for(const M of ie)try{return console.log(` Loading ${Z} from ${M.name}...`),await R.loadFromUri(M.url),console.log(` ${Z} loaded successfully from ${M.name}`),J&&J(),{success:!0,source:M.name}}catch(z){console.warn(` Failed to load ${Z} from ${M.name}:`,z.message),M.name==="Local Weights"&&console.log(` Falling back to CDN for ${Z}...`)}throw new Error(`Failed to load ${Z} from all sources (local weights + CDN)`)},T=async()=>{try{console.log(" Loading face-api models (Local Weights + CDN fallback)..."),k(5);const R=[{net:ts.tinyFaceDetector,name:"Tiny Face Detector",progress:30},{net:ts.faceLandmark68Net,name:"Face Landmark 68",progress:65},{net:ts.faceRecognitionNet,name:"Face Recognition",progress:95}];for(const Z of R)await E(Z.net,Z.name,()=>k(Z.progress)),await new Promise(J=>setTimeout(J,100));k(100),console.log(" All models loaded successfully!"),u(!0),C()}catch(R){console.error(" Critical: All model loading attempts failed:",R),k(0),I(R)}},I=R=>{const Z=`
Face recognition models failed to load:
${R.message}

This might be due to:
- Corrupted local weight files
- Network connectivity issues
- Missing model files

Would you like to:
1. Try again (Recommended)
2. Continue without face recognition
3. Use CDN only
  `;confirm(Z+`

Click OK to try again, Cancel to continue without face recognition`)?setTimeout(()=>T(),1e3):(console.log(" Continuing without face recognition..."),u(!1),startBasicCamera())},F=async()=>{try{console.log(" Loading models from CDN only..."),k(10);const R=_.cdn.primary;await ts.tinyFaceDetector.loadFromUri(R),k(40),await ts.faceLandmark68Net.loadFromUri(R),k(70),await ts.faceRecognitionNet.loadFromUri(R),k(100),console.log(" All models loaded from CDN"),u(!0),C()}catch(R){console.error("CDN loading also failed:",R),alert("Unable to load face recognition models. Please check your internet connection.")}},A=async()=>{const R=["/weights/tiny_face_detector_model-weights_manifest.json","/weights/tiny_face_detector_model-shard1","/weights/face_landmark_68_model-weights_manifest.json","/weights/face_landmark_68_model-shard1","/weights/face_recognition_model-weights_manifest.json","/weights/face_recognition_model-shard1","/weights/face_recognition_model-shard2"];console.log(" Checking weight file integrity...");for(const Z of R)try{const J=await fetch(Z,{method:"HEAD"}),ie=J.headers.get("content-length");if(console.log(`${J.ok?"":""} ${Z}: ${ie?ie+" bytes":"Size unknown"}`),!J.ok)return console.warn(` Missing or inaccessible: ${Z}`),!1}catch(J){return console.error(` Error checking ${Z}:`,J),!1}return console.log(" All weight files validated successfully"),!0},P=async()=>{console.log(" Starting comprehensive model loading..."),await A()?(console.log(" Local weights validated, using hybrid approach"),await T()):(console.log(" Local weights invalid, using CDN only"),await F())},q=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}try{v(!0),console.log("Fetching employee by ID...");const R=await fetch(`/api/attendance/employee/${t.trim()}`);if(!R.ok){if(R.status===404){alert("Employee not found with this ID"),o(""),s("");return}throw new Error(`HTTP error! status: ${R.status}`)}const Z=await R.json();o(Z.name),s(Z.name),alert(`Employee found: ${Z.name}`)}catch(R){console.error("Error fetching employee:",R),alert("Error fetching employee details. Please try again."),o(""),s("")}finally{v(!1)}},V=async R=>{try{f(!0),console.log("Checking for duplicate faces...");const J=await(await fetch("/api/attendance/employees")).json();if(J.length===0)return b({isDuplicate:!1,message:"No existing employees to compare with."}),!1;const ie=J.map(ee=>{const ne=ee.descriptor.map(re=>parseFloat(re)),W=new Float32Array(ne);return new g0(ee._id,[W])}),z=new eJ(ie,.5).findBestMatch(new Float32Array(R));if(console.log("Duplicate check result:",z.label,"Distance:",z.distance),z.label!=="unknown"){const ee=J.find(W=>W._id===z.label),ne=(100-z.distance*100).toFixed(1);return b({isDuplicate:!0,employeeName:ee.name,similarity:ne,message:` Face matches existing employee: ${ee.name} (${ne}% similarity)`}),!0}else return b({isDuplicate:!1,message:` No duplicate found. Face is unique (closest match: ${(100-z.distance*100).toFixed(1)}% similarity)`}),!1}catch(Z){return console.error("Error checking duplicates:",Z),b({isDuplicate:!1,message:" Could not check for duplicates. Proceeding anyway."}),!1}finally{f(!1)}},Y=async()=>{if(!d){alert("Models are still loading, please wait...");return}if(!y||!e.current){alert("Camera not ready");return}try{console.log("Capturing face...");const R=await D8e(e.current,new RP).withFaceLandmarks().withFaceDescriptor();if(R){const Z=Array.from(R.descriptor);c(Z),console.log("Face captured successfully. Checking for duplicates...");const J=await V(Z);alert(J?" Warning: This face appears to match an existing employee. Please check the details below.":"Face captured successfully! No duplicate found. You can now register.")}else alert("No face detected. Please make sure your face is clearly visible and try again."),b(null)}catch(R){console.error("Face detection error:",R),alert("Error detecting face. Please try again."),b(null)}},B=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}if(!a.trim()){alert("Please fetch employee name using Employee ID");return}if(!l){alert("Please capture face first");return}if(!(g&&g.isDuplicate&&!window.confirm(` WARNING: This face matches existing employee "${g.employeeName}" with ${g.similarity}% similarity.

Are you sure you want to register this person as a new employee?

Click OK to proceed anyway, or Cancel to stop.`)))try{console.log("Registering employee...");const R=document.createElement("canvas");R.width=e.current.videoWidth,R.height=e.current.videoHeight,R.getContext("2d").drawImage(e.current,0,0);const J=R.toDataURL("image/png"),ie=await fetch("/api/attendance/employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:t.trim(),name:a.trim(),descriptor:l})});if(!ie.ok){const ee=await ie.json();throw new Error(ee.error||"Registration failed")}const M=await ie.json();alert(` Employee "${a.trim()}" registered successfully!`);const z=e.current.srcObject;z&&(z.getTracks().forEach(ne=>ne.stop()),e.current.srcObject=null),r(""),s(""),o(""),c(null),b(null),S(!1)}catch(R){console.error("Registration error:",R),alert(`Registration failed: ${R.message}`)}},Q=async()=>{try{e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(J=>J.stop()),c(null),b(null),S(!1),await C()}catch(R){console.error("Error restarting camera:",R),alert("Error restarting camera")}};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Employee Face Registration"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Employee Face Registration"})]})})]})}),n.jsx("div",{children:n.jsx("div",{className:"card ",children:n.jsxs("div",{className:"card-body ",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-lg-6",children:[n.jsx("div",{className:"text-center mb-4",children:n.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Camera Feed"})}),!d&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"progress",children:n.jsx("div",{className:"progress-bar bg-primary progress-bar-animated progress-bar-striped",style:{width:`${w}%`}})}),n.jsxs("p",{className:"text-center text-muted small mt-2",children:["Loading models... ",w,"%"]})]}),n.jsx("div",{className:"position-relative mb-4",children:n.jsxs("div",{className:"card border-3 border-secondary rounded-3 overflow-hidden shadow",children:[n.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100"}),!y&&d&&n.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary mb-2",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"text-muted mb-0",children:"Starting camera..."})]})})]})}),n.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[n.jsx("button",{onClick:Y,disabled:!d||!y||h,className:`btn btn-lg fw-semibold px-4 ${d&&y&&!h?"btn-primary shadow":"btn-secondary"}`,children:d?y?h?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-camera-fill me-2"}),"Capture & Check"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Camera Starting..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading Models..."]})}),n.jsxs("button",{onClick:Q,className:"btn btn-outline-info btn-lg fw-semibold px-4",children:[n.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Restart Camera"]})]})]}),n.jsxs("div",{className:"col-lg-6",children:[n.jsx("div",{className:"text-center mb-4",children:n.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Employee Details"})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee ID"}),n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Employee ID",value:t,onChange:R=>r(R.target.value)}),n.jsx("button",{onClick:q,disabled:p||!t.trim(),className:`btn ${!p&&t.trim()?"btn-success":"btn-secondary"} fw-semibold`,type:"button",children:p?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Fetching..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-search me-2"}),"Fetch"]})})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee Name"}),n.jsx("input",{type:"text",className:"form-control form-control-lg bg-light",value:a,readOnly:!0,placeholder:"Name will be fetched automatically"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:B,disabled:!t.trim()||!a.trim()||!l||h,className:`btn btn-lg w-100 fw-bold py-3 ${t.trim()&&a.trim()&&l&&!h?g&&g.isDuplicate?"btn-danger":"btn-success":"btn-secondary"} shadow`,children:g&&g.isDuplicate?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Register Anyway "]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-person-plus me-2"}),"Register Employee"]})})}),n.jsxs("div",{className:"mb-4",children:[!d&&n.jsxs("div",{className:"alert alert-info d-flex align-items-center mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),n.jsx("span",{children:"Loading face recognition models..."})]}),d&&!y&&n.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),n.jsx("span",{children:"Starting camera..."})]}),l&&!g&&n.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking for duplicates..."]}),l&&g&&!g.isDuplicate&&n.jsxs("div",{className:"alert alert-success mb-2",role:"alert",children:[n.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Face verified unique, ready to register"]}),l&&g&&g.isDuplicate&&n.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[n.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Potential duplicate detected"]})]})]})]}),g&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:`alert ${g.isDuplicate?"alert-warning border-warning":"alert-success border-success"} border-3`,children:[n.jsxs("h5",{className:`alert-heading fw-bold ${g.isDuplicate?"text-warning":"text-success"}`,children:[n.jsx("i",{className:`bi ${g.isDuplicate?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),"Duplicate Check Result"]}),n.jsx("p",{className:"mb-2 fw-semibold",children:g.message}),g.isDuplicate&&n.jsxs("p",{className:"mb-0 small",children:[n.jsx("i",{className:"bi bi-info-circle me-1"}),"Proceeding will register this person as a separate employee, which may cause recognition issues."]})]})})]})})})]})},P8e=()=>{const e=j.useRef(),t=j.useRef(),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[f,p]=j.useState(null),[v,g]=j.useState(null),[b,y]=j.useState(!1),[S,w]=j.useState(!1),k=j.useRef(),C=j.useRef(),_=j.useRef(!1),[E,T]=j.useState(0);j.useEffect(()=>(P().then(()=>{V(),B()}),()=>{I()}),[]),j.useEffect(()=>(u&&o&&s&&f!=="completed"&&!S&&J(),()=>{k.current&&clearInterval(k.current)}),[u,o,s,f,S]);const I=()=>{k.current&&(clearInterval(k.current),k.current=null),C.current&&(C.current.getTracks().forEach(ie=>ie.stop()),C.current=null)},F={local:"/facemodels",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},A=async(ie,M,z)=>{const ee=[{name:"Local FaceModels",url:`${F.local}/${z}`},{name:"Primary CDN",url:F.cdn.primary},{name:"Backup CDN",url:F.cdn.backup}];for(const ne of ee)try{return await ie.loadFromUri(ne.url),{success:!0,source:ne.name}}catch(W){console.warn(` Failed to load ${M} from ${ne.name}:`,W.message)}throw new Error(`Failed to load ${M} from all sources`)},P=async()=>{try{T&&T(10);const ie=[{net:ts.tinyFaceDetector,name:"Tiny Face Detector",path:"tiny_face_detector"},{net:ts.faceLandmark68Net,name:"Face Landmark 68",path:"face_landmark_68"},{net:ts.faceRecognitionNet,name:"Face Recognition",path:"face_recognition"}];for(let M=0;M<ie.length;M++){const z=ie[M];await A(z.net,z.name,z.path),T&&T(30+M*20)}T&&T(100),l(!0)}catch(ie){console.error(" Error loading models:",ie);const M=`
Failed to load face recognition models: ${ie.message}

This could be due to:
- Corrupted local model files
- Network connectivity issues
- Missing model files

Would you like to try CDN-only mode?
    `;confirm(M)?await q():(alert("Face recognition will be disabled. You can still use basic camera features."),l&&l(!1))}},q=async()=>{try{T&&T(10);const ie=F.cdn.primary;await ts.tinyFaceDetector.loadFromUri(ie),T&&T(40),await ts.faceLandmark68Net.loadFromUri(ie),T&&T(70),await ts.faceRecognitionNet.loadFromUri(ie),T&&T(100),l(!0)}catch(ie){console.error(" CDN loading also failed:",ie),alert("Unable to load face recognition models. Please check your internet connection and try again."),T&&T(0)}},V=async()=>{try{const ie=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}}});C.current=ie,e.current&&(e.current.srcObject=ie,e.current.addEventListener("loadedmetadata",()=>{t.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight,h(!0),w(!1))}))}catch(ie){console.error("Camera access error:",ie),alert("Camera access denied or not available")}},Y=()=>{k.current&&(clearInterval(k.current),k.current=null),C.current&&(C.current.getTracks().forEach(ie=>{ie.stop()}),C.current=null),e.current&&(e.current.srcObject=null),t.current&&t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),h(!1),w(!0),y(!1),_.current=!1},B=async()=>{try{d(!0);const ie=localStorage.getItem("selectedCompanyId");if(!ie){alert(" Company not selected. Please select a company first."),d(!1);return}const M=await Ie.get(`/api/attendance/employees?companyId=${ie}`);if(M.data.length===0){d(!1);return}const z=M.data.map(ee=>{const ne=ee.descriptor.map(re=>parseFloat(re)),W=new Float32Array(ne);return new g0(ee._id,[W])});i(new eJ(z,.6)),a(M.data),d(!1)}catch(ie){console.error("Error loading employees:",ie),alert("Error loading registered employees for this company"),d(!1)}},Q=async(ie,M,z)=>{if(!(_.current||b))try{y(!0),_.current=!0;const ee=localStorage.getItem("selectedCompanyId");if(!ee){alert(" Company not selected. Please select a company first."),setTimeout(()=>{_.current=!1,y(!1)},3e3);return}const ne=await Ie.post("/api/attendance/auto",{employeeId:ie,companyId:ee});g({...ne.data.attendance,confidence:z,type:ne.data.type,workingSummary:ne.data.workingSummary,employeeName:M}),ne.data.type==="IN"?(alert(` Welcome ${M}!
IN time recorded`),p("in"),setTimeout(()=>{_.current=!1,y(!1)},1e4)):ne.data.type==="OUT"?(alert(` SEE YOU TOMM ${M}!
OUT time recorded`),p("completed"),setTimeout(()=>{Y()},3e3)):ne.data.type==="COMPLETED"&&(alert(` Hello ${M}!
Your attendance is already complete for today.
${ne.data.workingSummary}`),p("completed"),setTimeout(()=>{Y()},3e3))}catch(ee){console.error("Auto attendance error:",ee),ee.response&&ee.response.data?alert(` Error: ${ee.response.data.error}`):alert(` Failed to mark attendance for ${M}. Please try again.`),setTimeout(()=>{_.current=!1,y(!1)},8080)}},R=(ie,M)=>{const z=M.getContext("2d");z.clearRect(0,0,M.width,M.height),ie&&ie.length>0&&ie.forEach(ee=>{const{box:ne,label:W,distance:re,employeeId:le}=ee;if(W!=="unknown"&&!_.current&&!b&&f!=="completed"){const Ne=(100-re*100).toFixed(1);Ne>60&&Q(le,W,Ne)}const te=.4,K=ne.width*(1-te),de=ne.height*(1-te),H=ne.x+(ne.width-K)/2,se=ne.y+(ne.height-de)/2;z.strokeStyle=W==="unknown"?"#ff0000":"#00ff00",z.lineWidth=2,z.strokeRect(H,se,K,de);const be=W==="unknown"?"Unknown":W;`${(100-re*100).toFixed(1)}`;const oe=`${be} ${b?" (Capturing...)":""}`;z.font="14px Arial",z.fillStyle=W==="unknown"?"#ff0000":b?"#ff8c00":"#00ff00";const ge=z.measureText(oe).width+10;z.fillRect(H,se-25,ge,25),z.fillStyle="#ffffff",z.fillText(oe,H+5,se-8)})},Z=async()=>{if(!(!e.current||!t.current||!o||!s||S))try{const M=(await A8e(e.current,new RP).withFaceLandmarks().withFaceDescriptors()).map(z=>{const ee=s.findBestMatch(z.descriptor),ne=ee.label!=="unknown"?r.find(W=>W._id===ee.label):null;return{box:z.detection.box,label:ne?ne.name:"unknown",employeeId:ee.label!=="unknown"?ee.label:null,distance:ee.distance}});R(M,t.current)}catch(ie){console.error("Real-time detection error:",ie)}},J=()=>{k.current&&clearInterval(k.current),k.current=setInterval(Z,1e3)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Attendance Taking"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Attendance Taking"})]})})]})}),n.jsx("div",{style:{margin:"20px 0",position:"relative",display:"inline-block"},children:S?n.jsx("div",{style:{width:"400px",height:"300px",border:"2px solid #6c757d",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:f==="completed"?"#d4edda":"#f8f9fa",color:f==="completed"?"#155724":"#495057",fontSize:"16px",fontWeight:"bold",textAlign:"center",padding:"20px",boxSizing:"border-box"},children:f==="completed"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{children:" Attendance Completed!"}),n.jsx("div",{style:{fontSize:"14px",marginTop:"10px"},children:" Camera Stopped"}),v&&v.workingSummary&&n.jsxs("div",{style:{fontSize:"14px",fontWeight:"normal",marginTop:"10px",lineHeight:"1.4"},children:[" ",v.employeeName,n.jsx("br",{})," ",v.workingSummary]})]})}):n.jsxs(n.Fragment,{children:[n.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100",style:{border:"2px solid #ccc",borderRadius:"8px"}}),n.jsx("canvas",{ref:t,width:"400",height:"300",style:{position:"absolute",top:0,left:0,pointerEvents:"none",borderRadius:"8px"}})]})}),v&&n.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:[n.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Last Attendance Record"}),n.jsxs("div",{style:{textAlign:"left",fontSize:"14px",color:"#6c757d"},children:[n.jsx("strong",{children:"Employee:"})," ",v.employeeName,n.jsx("br",{}),n.jsx("strong",{children:"Type:"})," ",v.type==="IN"?" Check IN":v.type==="OUT"?" Check OUT":" Already Complete",n.jsx("br",{}),v.inTime&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"IN Time:"})," ",new Date(v.inTime).toLocaleString(),n.jsx("br",{})]}),v.outTime&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"OUT Time:"})," ",new Date(v.outTime).toLocaleString(),n.jsx("br",{})]}),v.workingSummary&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Working Hours:"})," ",v.workingSummary,n.jsx("br",{})]})]})]}),n.jsx("div",{style:{margin:"20px 0"},children:S?n.jsx("div",{children:n.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"New Session"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:B,disabled:c,className:"btn btn-primary me-2",children:c?"Loading...":" Refresh Employee List"}),n.jsx("button",{onClick:Y,className:"btn btn-danger",children:"Stop Camera"})]})}),n.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:S?n.jsx("div",{children:f==="completed"&&n.jsx("p",{style:{color:"#28a745",fontSize:"16px",fontWeight:"bold"},children:" Daily attendance completed successfully! Camera stopped for privacy."})}):n.jsxs(n.Fragment,{children:[!o&&n.jsx("p",{children:" Loading face recognition models..."}),o&&c&&n.jsx("p",{children:" Loading registered employees..."}),o&&!u&&n.jsx("p",{children:" Starting camera..."}),o&&!c&&r.length===0&&n.jsx("p",{style:{color:"orange"},children:" No employees registered. Please register employees first."})]})})]})},O8e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(new Date().toISOString().split("T")[0]),[s,i]=j.useState(!1),[o,l]=j.useState("date"),[c,d]=j.useState(null),[u,h]=j.useState({}),[f,p]=j.useState(!1),v=JSON.parse(localStorage.getItem("user"));j.useEffect(()=>{b()},[]);const g=async(A=null)=>{i(!0);try{let P="/api/attendance/records";A&&(P+=`?date=${A}`);const q=await Ie.get(P);let V=[];Array.isArray(q.data)&&(V=q.data),t(V),console.log("URL:",P),console.log("Fetched attendance data:",V)}catch(P){console.error("Error fetching attendance:",P),alert("Error fetching attendance records"),t([])}i(!1)},b=async()=>{i(!0);try{const A=await Ie.get("/api/attendance/today");let P=[];A.data&&A.data.employees&&Array.isArray(A.data.employees)&&(P=A.data.employees.map(q=>({...q,date:A.data.date,dateObject:A.data.dateObject}))),t(P),console.log("Today's attendance data:",P),l("today")}catch(A){console.error("Error fetching today's attendance:",A),alert("Error fetching today's attendance"),t([])}i(!1)},y=async A=>{i(!0);try{const P=await Ie.get(`/api/attendance/date/${A}`);let q=[];P.data&&P.data.employees&&Array.isArray(P.data.employees)&&(q=P.data.employees.map(V=>({...V,date:P.data.date,dateObject:P.data.dateObject}))),t(q),console.log(`Attendance data for ${A}:`,q)}catch(P){console.error("Error fetching attendance by date:",P),P.response&&P.response.status===404?alert(`No attendance records found for ${A}`):alert("Error fetching attendance records"),t([])}i(!1)},S=A=>{d(A);const P=q=>{if(!q)return"";const V=new Date(q);if(isNaN(V.getTime()))return"";const Y=V.getFullYear(),B=String(V.getMonth()+1).padStart(2,"0"),Q=String(V.getDate()).padStart(2,"0"),R=String(V.getHours()).padStart(2,"0"),Z=String(V.getMinutes()).padStart(2,"0");return`${Y}-${B}-${Q}T${R}:${Z}`};h({inTime:P(A.inTime),outTime:P(A.outTime),status:A.status,firstName:A.firstName,lastName:A.lastName}),p(!0)},w=async()=>{try{i(!0);const A={employeeObjectId:c.employeeObjectId,inTime:u.inTime?new Date(u.inTime).toISOString():null,outTime:u.outTime?new Date(u.outTime).toISOString():null,status:u.status,firstName:u.firstName,lastName:u.lastName};(await Ie.put(`/api/attendance/update/${c.date}`,A)).status===200&&(alert("Attendance record updated successfully"),p(!1),d(null),o==="today"?b():o==="date"?y(r):g())}catch(A){console.error("Error updating attendance record:",A),alert("Error updating attendance record: "+(A.response?.data?.message||A.message))}i(!1)},k=async A=>{if(window.confirm(`Are you sure you want to delete attendance record for ${A.firstName} ${A.lastName} on ${T(A.date)}?`)){try{i(!0),(await Ie.delete(`/api/attendance/delete/${A.date}/${A.employeeObjectId}`)).status===200&&(alert("Attendance record deleted successfully"),o==="today"?b():o==="date"?y(r):g())}catch(P){console.error("Error deleting attendance record:",P),alert("Error deleting attendance record: "+(P.response?.data?.message||P.message))}i(!1)}},C=A=>{A.preventDefault(),y(A.target.value),l("date")},_=()=>{g(),l("all")},E=A=>A?new Date(A).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",T=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),I=A=>{if(!A||A===0)return"-";const P=Math.floor(A),q=Math.round(A%1*60);return P===0?`${q}m`:q===0?`${P}h`:`${P}h ${q}m`},F=()=>{const A=e.reduce((P,q)=>P+(q.workingHours||0),0);return I(A)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:" Employee Attendance Dashboard"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" Employee Attendance Dashboard"})]})})]})}),n.jsxs("div",{className:"d-flex align-items-center mb-3 gap-3",children:[n.jsxs("div",{className:"form-group form-group-sm",children:[n.jsx("label",{className:"form-label me-1",children:" Select Date:"}),n.jsx("input",{type:"date",className:"form-control-sm",value:r,onChange:A=>{a(A.target.value),C(A)}})]}),n.jsxs("div",{children:[n.jsx("button",{onClick:b,disabled:s,className:"btn btn-sm btn-outline-primary me-2",children:"Today"}),n.jsx("button",{onClick:_,disabled:s,className:"btn btn-sm btn-outline-secondary",children:"All Records"})]})]}),s?n.jsx("div",{children:n.jsx("p",{children:" Loading attendance records..."})}):n.jsx("div",{children:e.length===0?n.jsx("div",{children:n.jsx("p",{children:"No attendance records found for the selected criteria."})}):n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee Name"}),n.jsx("th",{children:"Employee ID"}),o==="all"&&n.jsx("th",{children:"Date"}),n.jsx("th",{children:"IN Time"}),n.jsx("th",{children:"OUT Time"}),n.jsx("th",{children:"Working Hours"}),n.jsx("th",{children:"Status"}),v&&v.email==="ruchithas236@gmail.com"&&n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map((A,P)=>n.jsxs("tr",{children:[n.jsx("td",{children:`${A.firstName||""} ${A.lastName||""}`.trim()||"Unknown Employee"}),n.jsx("td",{children:A.employeeId||"N/A"}),o==="all"&&n.jsx("td",{children:T(A.date)}),n.jsx("td",{children:A.inTime?n.jsx("span",{children:E(A.inTime)}):n.jsx("span",{children:"-"})}),n.jsx("td",{children:A.outTime?n.jsx("span",{children:E(A.outTime)}):n.jsx("span",{children:"Still Working"})}),n.jsx("td",{children:n.jsx("span",{children:I(A.workingHours)})}),n.jsx("td",{children:A.status}),v&&v.email==="ruchithas236@gmail.com"&&n.jsx("td",{children:n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>S(A),title:"Edit Record",children:n.jsx("i",{className:"ti ti-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>k(A),title:"Delete Record",children:n.jsx("i",{className:"ti ti-trash"})})]})})]},`${A.employeeObjectId}-${A.date}-${P}`))})]})})})})}),f&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Edit Attendance Record"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"First Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.firstName||"",onChange:A=>h({...u,firstName:A.target.value})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Last Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.lastName||"",onChange:A=>h({...u,lastName:A.target.value})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"IN Time"}),n.jsx("input",{type:"datetime-local",className:"form-control",value:u.inTime||"",onChange:A=>h({...u,inTime:A.target.value})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"OUT Time"}),n.jsx("input",{type:"datetime-local",className:"form-control",value:u.outTime||"",onChange:A=>h({...u,outTime:A.target.value})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-control",value:u.status||"",onChange:A=>h({...u,status:A.target.value}),children:[n.jsx("option",{value:"IN",children:"IN"}),n.jsx("option",{value:"OUT",children:"OUT"}),n.jsx("option",{value:"COMPLETED",children:"COMPLETED"})]})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:w,disabled:s,children:s?"Saving...":"Save Changes"})]})]})})}),e.length>0&&n.jsxs("div",{className:"card",children:[n.jsx("h4",{className:"card-header",children:" Summary Statistics"}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[e.length,n.jsx("div",{className:"statistic-label",children:"Total Records"})]})})}),n.jsx("div",{className:"col-xl-3",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[e.filter(A=>A.status==="IN"&&!A.outTime).length,n.jsx("div",{className:"statistic-label",children:"Currently Working"})]})})}),n.jsx("div",{className:"col-xl-3",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[e.filter(A=>A.outTime).length,n.jsx("div",{className:"statistic-label",children:"Completed Shifts"})]})})}),n.jsx("div",{className:"col-xl-3",children:o!=="all"&&n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[F(),n.jsx("div",{className:"statistic-label",children:"Total Hours"})]})})})]})})]})]})},M8e=()=>{const[e,t]=j.useState({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(""),[f,p]=j.useState(""),v=/^\d{0,6}$/,g=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{b()},[]);const b=async()=>{try{if(!g)return;const A={companyId:g,financialYearStart:u,financialYearEnd:f},P=await Ie.get("/api/billingcategory",{params:A});i(P.data)}catch(A){console.error("Failed to fetch categories",A)}},y=(A,P)=>{switch(A){case"categoryName":if(!P)return"Category name is required";break;case"financialYearStart":case"financialYearEnd":if(!P)return"Both start and end dates are required";break;case"rangeStart":case"rangeEnd":if(!P)return`${A==="rangeStart"?"Range start":"Range end"} is required`;if(!v.test(P))return"Max 6 digits allowed";break;case"prefix":if(P&&P.length>10)return"Max 10 characters";break}return""},S=A=>{const{name:P,value:q}=A.target;let V=q;switch(P){case"categoryName":V=q.slice(0,100);break;case"prefix":V=q.toUpperCase().slice(0,10);break;case"rangeStart":case"rangeEnd":V=q.replace(/[^0-9]/g,"").slice(0,6);break;default:V=q}const B=y(P,V);t(Q=>({...Q,[P]:V})),a(Q=>({...Q,[P]:B}))},w=()=>!y("categoryName",e.categoryName)&&!y("financialYearStart",e.financialYearStart)&&!y("financialYearEnd",e.financialYearEnd)&&!y("rangeStart",e.rangeStart)&&!y("rangeEnd",e.rangeEnd),k=async A=>{A.preventDefault();const P={};if(["categoryName","financialYearStart","financialYearEnd","rangeStart","rangeEnd"].forEach(V=>{P[V]=y(V,e[V])}),a(P),Object.values(P).some(V=>V))return;const q=s.find(V=>{if(o&&V._id===o||V.financialYearStart!==e.financialYearStart||V.financialYearEnd!==e.financialYearEnd)return!1;const Y=parseInt(e.rangeStart),B=parseInt(e.rangeEnd),Q=parseInt(V.rangeStart),R=parseInt(V.rangeEnd);return Y<=R&&B>=Q});if(q){alert(`Range overlaps with existing category "${q.categoryName}"`);return}try{o?(await Ie.put(`/api/billingcategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/billingcategory",e),alert("Category saved successfully!")),b(),C(),I()}catch(V){console.error(V),alert("Failed to save category.")}},C=()=>{t({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:g}),l(null),a({})},_=A=>{if(!A)return"";const P=new Date(A),q=String(P.getMonth()+1).padStart(2,"0"),V=String(P.getDate()).padStart(2,"0");return`${P.getFullYear()}-${q}-${V}`},E=A=>{t({categoryName:A.categoryName,financialYearStart:_(A.financialYearStart),financialYearEnd:_(A.financialYearEnd),rangeStart:A.rangeStart,rangeEnd:A.rangeEnd,prefix:A.prefix||"",companyId:A.companyId}),l(A._id),T()},T=()=>d(!0),I=()=>{d(!1),C()},F=(A,P)=>{const q=A.prefix||"",V=A.financialYearStart?A.financialYearStart.slice(0,4):"----",Y=A.financialYearEnd?A.financialYearEnd.slice(0,4):"----",B=`${V}-${Y}`;return`${q}${B}/${P.toString().padStart(4,"0")}`};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("h6",{children:"Billing Category Management"}),n.jsx("button",{className:"btn btn-primary",onClick:T,children:"Add Billing Category"})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Financial Year"}),n.jsx("th",{children:"Prefix"}),n.jsx("th",{children:"Range Start"}),n.jsx("th",{children:"Range End"}),n.jsx("th",{children:"Sample Billing No."}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map(A=>n.jsxs("tr",{children:[n.jsx("td",{children:A.categoryName}),n.jsx("td",{children:A.financialYearStart&&A.financialYearEnd?`${new Date(A.financialYearStart).toLocaleDateString()} to ${new Date(A.financialYearEnd).toLocaleDateString()}`:"-"}),n.jsx("td",{children:A.prefix||"-"}),n.jsx("td",{children:A.rangeStart}),n.jsx("td",{children:A.rangeEnd}),n.jsx("td",{children:F(A,parseInt(A.rangeStart))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>E(A),children:"Edit"})})]},A._id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center text-muted",children:"No categories found"})})]})]})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Billing Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:I})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Category Name:"}),n.jsx("input",{type:"text",name:"categoryName",value:e.categoryName,onChange:S,className:`form-control ${r.categoryName?"is-invalid":""}`}),r.categoryName&&n.jsx("div",{className:"invalid-feedback",children:r.categoryName})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Financial Year Start:"}),n.jsx("input",{type:"date",name:"financialYearStart",value:e.financialYearStart,onChange:S,className:`form-control ${r.financialYearStart?"is-invalid":""}`}),r.financialYearStart&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearStart})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Financial Year End:"}),n.jsx("input",{type:"date",name:"financialYearEnd",value:e.financialYearEnd,onChange:S,className:`form-control ${r.financialYearEnd?"is-invalid":""}`}),r.financialYearEnd&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearEnd})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Prefix (Optional):"}),n.jsx("input",{type:"text",name:"prefix",value:e.prefix,onChange:S,className:"form-control"})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Range Start:"}),n.jsx("input",{type:"text",name:"rangeStart",value:e.rangeStart,onChange:S,className:`form-control ${r.rangeStart?"is-invalid":""}`}),r.rangeStart&&n.jsx("div",{className:"invalid-feedback",children:r.rangeStart})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Range End:"}),n.jsx("input",{type:"text",name:"rangeEnd",value:e.rangeEnd,onChange:S,className:`form-control ${r.rangeEnd?"is-invalid":""}`}),r.rangeEnd&&n.jsx("div",{className:"invalid-feedback",children:r.rangeEnd})]})]}),e.financialYearStart&&e.rangeStart&&n.jsxs("div",{className:"alert alert-info",children:[n.jsx("strong",{children:"Sample Billing Number:"})," ",F(e,parseInt(e.rangeStart))]}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!w(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})};function R8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=y=>{const{name:S,value:w}=y.target;if(S==="rangeFrom"||S==="rangeTo"){const k=w.replace(/\D/g,"");if(k.length<=6){const C=parseInt(k);k.length===6&&C>=1e5&&C<=999999?t(_=>({..._,[S]:k})):k.length<6&&t(_=>({..._,[S]:k}))}}else t(k=>({...k,[S]:w}))},l=async y=>{y.preventDefault();try{if(s){const S=await Ie.put(`/api/customer-categories/${s}`,e);alert("Customer Category Updated!"),a(w=>w.map(k=>k._id===s?S.data:k)),i(null)}else{const S=await Ie.post("/api/customer-categories",e);alert("Customer Category Added!"),a([...r,S.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),b(),window.location.reload()}catch(S){console.error(S),alert("Error adding/updating category")}},c=async()=>{try{const y=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),w=await Ie.get("/api/customer-categories",{params:{companyId:y,financialYear:S}});a(w.data)}catch(y){console.error(y)}};j.useEffect(()=>{c()},[]);const d=y=>{t({categoryName:y.categoryName,rangeFrom:y.rangeFrom,rangeTo:y.rangeTo}),i(y._id)},[u,h]=j.useState(!1),f=()=>h(!0),p=()=>h(!1),[v,g]=j.useState(!1),b=()=>g(!1);return n.jsx("div",{className:"",children:n.jsx("div",{children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Customer Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{f()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Category"]})})})]}),n.jsxs("div",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit Customer Category":"Add Customer Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:l,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Category Name"}),n.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Premium",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range From"}),n.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",min:"100000",max:"999999",value:e.rangeFrom,onChange:o,required:!0,pattern:"\\d{6}",className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2 ",children:[n.jsx("label",{children:"Range To"}),n.jsx("input",{type:"text",name:"rangeTo",max:e.rangeFrom?e.rangeFrom+9999:1999,placeholder:"e.g., 199999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[" ",n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[r.map(y=>n.jsxs("tr",{children:[n.jsx("td",{children:y.categoryName}),n.jsx("td",{children:y.rangeFrom}),n.jsx("td",{children:y.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{d(y),f()},children:"Edit"})})]},y._id)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"5",className:"text-center",children:"No categories found."})})]})]})})]})})]})]})})})}const F8e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const f=/^\d{0,6}$/;j.useEffect(()=>{p()},[]);const p=async()=>{try{const C=localStorage.getItem("selectedCompanyId"),_=localStorage.getItem("financialYear"),E=await Ie.get("/api/goodsissuecategory",{params:{companyId:C,financialYear:_}});i(E.data)}catch(C){console.error("Failed to fetch categories",C)}},v=(C,_)=>{switch(C){case"categoryName":if(!_)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!_)return`${C} is required`;if(!f.test(_))return"Max 6 digits allowed";break}return""},g=C=>{const{name:_,value:E}=C.target;let T=E,I="";switch(_){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),I="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),I="Maximum 6 digits allowed");break}const F=v(_,T),A=I||F;t(P=>({...P,[_]:T})),a(P=>({...P,[_]:A}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async C=>{C.preventDefault();const _={};if(Object.keys(e).forEach(E=>{_[E]=v(E,e[E])}),a(_),!Object.values(_).some(E=>E))try{o?(await Ie.put(`/api/goodsissuecategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/goodsissuecategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},S=C=>{t({categoryName:C.categoryName,prefix:C.prefix,rangeStart:C.rangeStart,rangeEnd:C.rangeEnd}),l(C._id),w()},w=()=>d(!0),k=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Issue Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Issue Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(C=>n.jsxs("tr",{children:[n.jsx("td",{children:C.categoryName}),n.jsx("td",{children:C.rangeStart}),n.jsx("td",{children:C.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S(C),children:"Edit"})})]},C._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Issue Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:y,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(C=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:C==="categoryName"?"Category Name":C==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:C,value:e[C],onChange:g,className:"form-control"})]},C))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},L8e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const f=/^\d{0,6}$/;j.useEffect(()=>{p()},[]);const p=async()=>{try{const C=localStorage.getItem("selectedCompanyId"),_=localStorage.getItem("financialYear"),E=await Ie.get("/api/goodsreceiptcategory",{params:{companyId:C,financialYear:_}});i(E.data)}catch(C){console.error("Failed to fetch categories",C)}},v=(C,_)=>{switch(C){case"categoryName":if(!_)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!_)return`${C} is required`;if(!f.test(_))return"Max 6 digits allowed";break}return""},g=C=>{const{name:_,value:E}=C.target;let T=E,I="";switch(_){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),I="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),I="Maximum 6 digits allowed");break}const F=v(_,T),A=I||F;t(P=>({...P,[_]:T})),a(P=>({...P,[_]:A}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async C=>{C.preventDefault();const _={};if(Object.keys(e).forEach(E=>{_[E]=v(E,e[E])}),a(_),!Object.values(_).some(E=>E))try{o?(await Ie.put(`/api/goodsreceiptcategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/goodsreceiptcategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},S=C=>{t({categoryName:C.categoryName,prefix:C.prefix,rangeStart:C.rangeStart,rangeEnd:C.rangeEnd}),l(C._id),w()},w=()=>d(!0),k=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Receipt Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Receipt Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(C=>n.jsxs("tr",{children:[n.jsx("td",{children:C.categoryName}),n.jsx("td",{children:C.rangeStart}),n.jsx("td",{children:C.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S(C),children:"Edit"})})]},C._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Receipt Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:y,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(C=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:C==="categoryName"?"Category Name":C==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:C,value:e[C],onChange:g,className:"form-control "})]},C))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},B8e=()=>{const[e,t]=j.useState({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(""),[f,p]=j.useState(""),v=/^\d{0,6}$/,g=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{b()},[]);const b=async()=>{try{if(!g){console.error("Company ID is missing!");return}const F={companyId:g,financialYearStart:u,financialYearEnd:f};console.log("Sending API request with params:",F);const A=await Ie.get("/api/invoicecategory",{params:F});console.log("Categories fetched:",A.data),i(A.data)}catch(F){console.error("Failed to fetch categories",F)}},y=(F,A)=>{switch(F){case"categoryName":if(!A)return"Category name is required";break;case"financialYearStart":case"financialYearEnd":if(!A)return"Both start and end dates are required";break;case"rangeStart":case"rangeEnd":if(!A)return`${F==="rangeStart"?"Range start":"Range end"} is required`;if(!v.test(A))return"Max 6 digits allowed";break}return""},S=F=>{const{name:A,value:P}=F.target;let q=P,V="";switch(A){case"categoryName":q=P,q.length>100&&(q=q.slice(0,100),V="Maximum 100 characters allowed");break;case"prefix":q=P.toUpperCase(),q.length>10&&(q=q.slice(0,10),V="Maximum 10 characters allowed");break;case"rangeStart":case"rangeEnd":q=P.replace(/[^0-9]/g,""),q.length>6&&(q=q.slice(0,6),V="Maximum 6 digits allowed");break;default:q=P;break}const Y=y(A,q),B=V||Y;t(Q=>({...Q,[A]:q})),a(Q=>({...Q,[A]:B}))},w=()=>!y("categoryName",e.categoryName)&&!y("financialYearStart",e.financialYearStart)&&!y("financialYearEnd",e.financialYearEnd)&&!y("rangeStart",e.rangeStart)&&!y("rangeEnd",e.rangeEnd),k=async F=>{F.preventDefault();const A={};if(["categoryName","financialYearStart","financialYearEnd","rangeStart","rangeEnd"].forEach(q=>{A[q]=y(q,e[q])}),a(A),Object.values(A).some(q=>q))return;const P=s.find(q=>{if(o&&q._id===o||q.financialYearStart!==e.financialYearStart||q.financialYearEnd!==e.financialYearEnd)return!1;const V=parseInt(e.rangeStart),Y=parseInt(e.rangeEnd),B=parseInt(q.rangeStart),Q=parseInt(q.rangeEnd);return V<=Q&&Y>=B});if(P){alert(`Range overlaps with existing category "${P.categoryName}"`);return}try{o?(await Ie.put(`/api/invoicecategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/invoicecategory",e),alert("Category saved successfully!")),b(),C(),T()}catch(q){console.error(q),alert("Failed to save category.")}},C=()=>{t({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),l(null),a({})},_=F=>{t({categoryName:F.categoryName,financialYearStart:F.financialYearStart,financialYearEnd:F.financialYearEnd,rangeStart:F.rangeStart,rangeEnd:F.rangeEnd,prefix:F.prefix||"",companyId:F.companyId}),l(F._id),E()},E=()=>d(!0),T=()=>{d(!1),C()},I=(F,A)=>{const P=F.prefix||"",q=F.financialYearStart?F.financialYearStart.slice(0,4):"----",V=F.financialYearEnd?F.financialYearEnd.slice(0,4):"----",Y=`${q}-${V}`;return`${P}${Y}/${A.toString().padStart(4,"0")}`};return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Invoice Category Management"})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("div",{className:"me-3 d-flex gap-2 align-items-center",children:[n.jsx("input",{type:"date",className:"form-control",value:u,onChange:F=>h(F.target.value)}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:F=>p(F.target.value)}),n.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Filter"})]}),n.jsx("div",{children:n.jsxs("a",{onClick:E,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Invoice Category"]})})]})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Financial Year"}),n.jsx("th",{children:"Prefix"}),n.jsx("th",{children:"Range Start"}),n.jsx("th",{children:"Range End"}),n.jsx("th",{children:"Sample Invoice No."}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map(F=>n.jsxs("tr",{children:[n.jsx("td",{children:F.categoryName}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[F.financialYearStart&&F.financialYearEnd?new Date(F.financialYearStart).toLocaleDateString():"_"," to ",F.financialYearEnd?new Date(F.financialYearEnd).toLocaleDateString():"_"]})}),n.jsx("td",{children:F.prefix||"-"}),n.jsx("td",{children:F.rangeStart}),n.jsx("td",{children:F.rangeEnd}),n.jsx("td",{className:"text-muted",children:I(F,parseInt(F.rangeStart))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-1",onClick:()=>_(F),children:"Edit"})})]},F._id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center text-muted",children:"No categories found"})})]})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Invoice Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:T})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Category_Name:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"categoryName",value:e.categoryName,onChange:S,className:`form-control ${r.categoryName?"is-invalid":""}`,placeholder:"e.g., Sales Invoice, Purchase Invoice"}),r.categoryName&&n.jsx("div",{className:"invalid-feedback",children:r.categoryName})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"FY_Start:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"date",name:"financialYearStart",value:e.financialYearStart,onChange:S,className:`form-control ${r.financialYearStart?"is-invalid":""}`}),r.financialYearStart&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearStart})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"FY_End:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"date",name:"financialYearEnd",value:e.financialYearEnd,onChange:S,className:`form-control ${r.financialYearEnd?"is-invalid":""}`}),r.financialYearEnd&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearEnd})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prefix(Optional):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"prefix",value:e.prefix,onChange:S,className:"form-control",placeholder:"e.g., INV, BILL"})})]}),n.jsxs("div",{className:"mb-3 row col-xl-4",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Range Start:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"rangeStart",value:e.rangeStart,onChange:S,className:`form-control ${r.rangeStart?"is-invalid":""}`,placeholder:"e.g., 1"}),r.rangeStart&&n.jsx("div",{className:"invalid-feedback",children:r.rangeStart})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-4",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Range End:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"rangeEnd",value:e.rangeEnd,onChange:S,className:`form-control ${r.rangeEnd?"is-invalid":""}`,placeholder:"e.g., 9999"}),r.rangeEnd&&n.jsx("div",{className:"invalid-feedback",children:r.rangeEnd})]})]})]}),e.financialYearStart&&e.rangeStart&&n.jsxs("div",{className:"alert alert-info",children:[n.jsx("strong",{children:"Sample Invoice Number:"})," ",I(e,parseInt(e.rangeStart))]}),n.jsx("div",{className:"d-flex gap-2",children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!w(),children:o?"Update Category":"Add Category"})})]})})]})})})]})]})})},hU=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;j.useEffect(()=>{d()},[]);const d=async()=>{try{const E=localStorage.getItem("selectedCompanyId"),T=localStorage.getItem("financialYear"),I=await Ie.get("/api/category",{params:{companyId:E,financialYear:T}});i(I.data)}catch(E){console.error("Failed to fetch categories",E)}},u=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!c.test(T))return"Max 6 digits allowed";break}return""},h=E=>{const{name:T,value:I}=E.target;let F=I,A="";switch(T){case"categoryName":F=I,F.length>100&&(F=F.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":F=I.replace(/[^0-9]/g,""),F.length>6&&(F=F.slice(0,6),A="Maximum 6 digits allowed");break}const P=u(T,F),q=A||P;t(V=>({...V,[T]:F})),a(V=>({...V,[T]:q}))},f=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),[p,v]=j.useState({});j.useEffect(()=>{const E=async()=>{const T={};for(const I of s)try{const F=await Ie.post("/api/material/generate-id",{categoryId:I._id});T[I._id]=F.data.nextNumber}catch(F){console.error("Error generating ID for category:",I._id,F)}v(T)};s.length&&E()},[s]);const g=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(I=>{T[I]=u(I,e[I])}),a(T),!Object.values(T).some(I=>I))try{o?(await Ie.put(`/api/category/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/category",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(I){console.error(I),alert("Failed to save category.")}},b=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id)},[y,S]=j.useState(!1),w=()=>S(!0),k=()=>S(!1),[C,_]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsx("div",{children:n.jsx("div",{className:"content",children:n.jsxs("div",{children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Material Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{w()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Material Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.length>0&&s?.map(E=>n.jsxs("tr",{children:[n.jsx("td",{children:E.categoryName}),n.jsx("td",{children:E.rangeStart}),n.jsx("td",{children:E.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{b(E),w()},children:"Edit"})})]},E._id))})]})})})}),y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Material Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:g,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:E,value:e[E],onChange:h,className:"form-control"})]},E))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!f(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})})})};function U8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({});localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(_=>_==="")},d=k=>{(k.target.name==="rangeFrom"||k.target.name==="rangeTo")&&(k.target.value=k.target.value.replace(/[^0-9]/g,"")),t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Ie.put(`/api/po-categories/${s}`,e),alert("PO Category updated!")):(await Ie.post("/api/po-categories",e),alert("PO Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving PO Category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),_=await Ie.get("/api/po-categories",{params:{companyId:k,financialYear:C}});a(_.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[v,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"PO Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("button",{type:"button",onClick:b,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add PO Category"]})})})]}),n.jsx("h2",{}),v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," PO Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{d(k),k.target.value=k.target.value.replace(/[^0-9]/g,"")},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeTo",type:"text",value:e.rangeTo,onChange:d,maxLength:6,placeholder:"Range To (6 digits)",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const $8e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;j.useEffect(()=>{d()},[]);const d=async()=>{try{const w=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear"),C=await Ie.get("/api/purchasecategory",{params:{companyId:w,financialYear:k}});i(C.data)}catch(w){console.error("Failed to fetch categories",w)}},u=(w,k)=>{switch(w){case"categoryName":if(!k)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!k)return`${w} is required`;if(!c.test(k))return"Max 6 digits allowed";break}return""},h=w=>{const{name:k,value:C}=w.target;let _=C,E="";switch(k){case"categoryName":_=C,_.length>100&&(_=_.slice(0,100),E="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":_=C.replace(/[^0-9]/g,""),_.length>6&&(_=_.slice(0,6),E="Maximum 6 digits allowed");break}const T=u(k,_),I=E||T;t(F=>({...F,[k]:_})),a(F=>({...F,[k]:I}))},f=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),p=async w=>{w.preventDefault();const k={};if(Object.keys(e).forEach(C=>{k[C]=u(C,e[C])}),a(k),!Object.values(k).some(C=>C))try{o?(await Ie.put(`/api/purchasecategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/purchasecategory",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(C){console.error(C),alert("Failed to save category.")}},v=w=>{t({categoryName:w.categoryName,prefix:w.prefix,rangeStart:w.rangeStart,rangeEnd:w.rangeEnd}),l(w._id)},[g,b]=j.useState(!1),y=()=>b(!0),S=()=>b(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Purchase Indent Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Purchase Request Category"]})})})]}),g&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Purchase Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{S(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:p,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(w=>n.jsxs("div",{className:" col-xl-3 mb-3",children:[n.jsx("label",{className:"form-label",children:w==="categoryName"?"Category Name":w==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:w,value:e[w],onChange:h,className:"form-control "})]},w))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!f(),children:o?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(w=>n.jsxs("tr",{children:[n.jsx("td",{children:w.categoryName}),n.jsx("td",{children:w.rangeStart}),n.jsx("td",{children:w.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(w),y()},children:"Edit"})})]},w._id))})]})})})]})})};function V8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),c=w=>{const{name:k,value:C}=w.target;t(_=>({..._,[k]:C}))},d=async w=>{w.preventDefault();try{s?await Ie.put(`/api/rfq-categories/${s}`,e):await Ie.post("/api/rfq-categories",e),t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),u(),S(),window.location.reload()}catch(k){console.error("Error submitting category:",k)}},u=async()=>{try{const w=await Ie.get("/api/rfq-categories",{params:{companyId:o,financialYear:l}});a(w.data)}catch(w){console.error("Error fetching categories:",w)}},h=w=>{t({categoryName:w.categoryName,rangeFrom:w.rangeFrom,rangeTo:w.rangeTo}),i(w._id)};j.useEffect(()=>{u()},[]);const[f,p]=j.useState(!1),v=()=>p(!0),g=()=>p(!1),[b,y]=j.useState(!1),S=()=>y(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"RFQ Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{v()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"isax isax-add-circle5 me-1"}),"RFQ Category"]})})})]}),n.jsx("h2",{}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit RFQ Category":"Add RFQ Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),g(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:d,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"categoryName",children:"Category Name"}),n.jsx("input",{name:"categoryName",placeholder:"Category Name",value:e.categoryName,onChange:c,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"rangeFrom",children:"Range From"}),n.jsx("input",{name:"rangeFrom",placeholder:"Range From",value:e.rangeFrom,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"rangeTo",children:"Range To"}),n.jsx("input",{name:"rangeTo",placeholder:"Range To",value:e.rangeTo,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((w,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:k+1}),n.jsx("td",{children:w.categoryName}),n.jsx("td",{children:w.rangeFrom}),n.jsx("td",{children:w.rangeTo}),n.jsx("td",{children:n.jsx("button",{onClick:()=>{h(w),v()},className:"btn btn-sm btn-primary",children:"Edit"})})]},w._id))})]})})})})]})}function fU(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const d=()=>{let C={};const _=/^\d{6}$/;return C.categoryName=e.categoryName?"":"Required",C.rangeFrom=e.rangeFrom?_.test(e.rangeFrom)?"":"Must be 6 digits":"Required",C.rangeTo=e.rangeTo?_.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(C),Object.values(C).every(E=>E==="")},u=C=>{t({...e,[C.target.name]:C.target.value})},h=async C=>{if(C.preventDefault(),!!d())try{s?(await Ie.put(`/api/sale-contract-categories/${s}`,e),alert("Contract category updated successfully!")):(await Ie.post("/api/sale-contract-categories",e),alert("Contract category added successfully!")),f(),v(),S(),window.location.reload()}catch{alert("Error saving contract category. Please try again.")}},f=async()=>{try{const C=await Ie.get("/api/sale-contract-categories",{params:{companyId:c}});a(C.data)}catch(C){console.error("Error fetching contract categories:",C)}},p=C=>{t(C),i(C._id),l({})},v=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{f()},[]);const[g,b]=j.useState(!1),y=()=>b(!0),S=()=>b(!1),[w,k]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-2",children:[n.jsx("div",{className:"my-auto mb-2",children:n.jsx("h2",{className:"mb-1",children:"Sales Contract Categories"})}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})]}),g&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[n.jsx("i",{className:"fas fa-file-contract me-2"}),s?"Edit":"Create"," Contract Category"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{S(),v()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Category Name ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:u,className:"form-control",placeholder:"Enter category name (e.g., Standard Contracts)"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range From ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:C=>{C.target.value=C.target.value.replace(/\D/g,""),u(C)},className:"form-control",maxLength:6,placeholder:"Enter start range (6 digits)",min:"100000",max:"999999"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range To ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeTo",type:"text",className:"form-control ",value:e.rangeTo,onChange:C=>{C.target.value=C.target.value.replace(/\D/g,""),u(C)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),n.jsx("div",{className:"d-flex gap-2 justify-content-start",children:n.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((C,_)=>n.jsxs("tr",{children:[n.jsx("td",{children:_+1}),n.jsx("td",{children:n.jsx("div",{className:"d-flex align-items-center",children:n.jsx("span",{className:"fw-medium",children:C.categoryName})})}),n.jsx("td",{children:C.rangeFrom?.toLocaleString()}),n.jsx("td",{children:C.rangeTo?.toLocaleString()}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(C),y()},title:"Edit Category",children:"Edit"})})})]},C._id))})]})})})})]})}function q8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(_=>_==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Ie.put(`/api/sale-quotation-categories/${s}`,e),alert("Category updated!")):(await Ie.post("/api/sale-quotation-categories",e),alert("Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),_=await Ie.get("/api/sale-quotation-categories",{params:{companyId:k,financialYear:C}});a(_.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[v,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Quotation Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"New Quotation Category"]})})})]}),v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Quotation Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,className:"form-control",placeholder:"Category Name"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,className:"form-control",placeholder:"Range From (6 digits)"}),n.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"}),n.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const z8e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),c=/^[A-Za-z ]{0,100}$/,d=/^\d{0,6}$/;j.useEffect(()=>{u()},[]);const u=async()=>{try{const _=localStorage.getItem("selectedCompanyId"),E=localStorage.getItem("financialYear"),T=await Ie.get("/api/salecategory",{params:{companyId:_,financialYear:E}});i(T.data)}catch(_){console.error("Failed to fetch categories",_)}},h=(_,E)=>{switch(_){case"categoryName":if(!E)return"Category name is required";if(!c.test(E))return"Only alphabets (max 100 characters)";break;case"rangeStart":case"rangeEnd":if(!E)return`${_} is required`;if(!d.test(E))return"Max 6 digits allowed";break}return""},f=_=>{const{name:E,value:T}=_.target;let I=T,F="";switch(E){case"categoryName":I=T,I.length>100&&(I=I.slice(0,100),F="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":I=T.replace(/[^0-9]/g,""),I.length>6&&(I=I.slice(0,6),F="Maximum 6 digits allowed");break}const A=h(E,I),P=F||A;t(q=>({...q,[E]:I})),a(q=>({...q,[E]:P}))},p=()=>!h("categoryName",e.categoryName)&&!h("rangeStart",e.rangeStart)&&!h("rangeEnd",e.rangeEnd),v=async _=>{_.preventDefault();const E={};if(Object.keys(e).forEach(T=>{E[T]=h(T,e[T])}),a(E),!Object.values(E).some(T=>T))try{o?(await Ie.put(`/api/salecategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/salecategory",e),alert("Category saved successfully!")),u(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(T){console.error(T),alert("Failed to save category.")}},g=_=>{t({categoryName:_.categoryName,rangeStart:_.rangeStart,rangeEnd:_.rangeEnd}),l(_._id)},[b,y]=j.useState(!1),S=()=>y(!0),w=()=>y(!1),[k,C]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Indent Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{S()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Enquiry Category"]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Sales Indent Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:v,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(_=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:_==="categoryName"?"Category Name":_==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:_,value:e[_],onChange:f,className:"form-control "})]},_))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!p(),children:o?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(_=>n.jsxs("tr",{children:[n.jsx("td",{children:_.categoryName}),n.jsx("td",{children:_.rangeStart}),n.jsx("td",{children:_.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{g(_),S()},children:"Edit"})})]},_._id))})]})})})]})})};function H8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(_=>_==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Ie.put(`/api/sales-order-categories/${s}`,e),alert("Sales Order Category updated!")):(await Ie.post("/api/sales-order-categories",e),alert("Sales Order Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),_=await Ie.get("/api/sales-order-categories",{params:{companyId:k,financialYear:C}});a(_.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[v,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Order Category  "})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Order Category"]})})})]}),v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Sales Order Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("h2",{}),n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsx("div",{className:"col-xl-3",children:n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"})}),n.jsx("div",{className:"col-xl-3",children:n.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"})})]}),n.jsx("button",{className:"btn btn-sm btn-primary mt-2 mb-2",type:"submit",children:s?"Update Category":"Add Category"})]})]})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const W8e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;j.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Ie.get("/api/goodsTransferCategory",{params:{companyId:f,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:I}=E.target;let F=I,A="";switch(T){case"categoryName":F=I,F.length>100&&(F=F.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":F=I.replace(/[^0-9]/g,""),F.length>6&&(F=F.slice(0,6),A="Maximum 6 digits allowed");break}const P=b(T,F),q=A||P;t(V=>({...V,[T]:F})),a(V=>({...V,[T]:q}))},S=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),w=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(I=>{T[I]=b(I,e[I])}),a(T),!Object.values(T).some(I=>I))try{o?(await Ie.put(`/api/goodsTransferCategory/${o}`,e),alert("Category updated successfully!")):(await Ie.post("/api/goodsTransferCategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),_(),window.location.reload()}catch(I){console.error(I),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),C()},C=()=>d(!0),_=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Transfer Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:C,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Transfer Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(E=>n.jsxs("tr",{children:[n.jsx("td",{children:E.categoryName}),n.jsx("td",{children:E.rangeStart}),n.jsx("td",{children:E.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Transfer Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{_(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:w,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"}),r[E]&&n.jsx("div",{className:"invalid-feedback",children:r[E]})]},E))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!S(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})};function G8e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=b=>{const{name:y,value:S}=b.target;if(y==="rangeFrom"||y==="rangeTo"){const w=S.replace(/\D/g,"");if(w.length<=6){const k=parseInt(w);w.length===6&&k>=1e5&&k<=999999?t(C=>({...C,[y]:w})):w.length<6&&t(C=>({...C,[y]:w}))}}else t(w=>({...w,[y]:S}))},l=async b=>{b.preventDefault();try{if(s){const y=await Ie.put(`/api/vendor-categories/${s}`,e);alert("Vendor Category Updated!"),a(S=>S.map(w=>w._id===s?y.data:w)),i(null)}else{const y=await Ie.post("/api/vendor-categories",e);alert("Vendor Category Added!"),a([...r,y.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),window.location.reload()}catch(y){console.error(y),alert("Error adding/updating category")}},c=async()=>{try{const b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),S=await Ie.get("/api/vendor-categories",{params:{companyId:b,financialYear:y}});a(S.data)}catch(b){console.error(b)}};j.useEffect(()=>{c()},[]);const d=b=>{t({categoryName:b.categoryName,rangeFrom:b.rangeFrom,rangeTo:b.rangeTo}),i(b._id)},[u,h]=j.useState(!1),f=()=>h(!0),p=()=>h(!1),[v,g]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Vendor Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{f()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Vendor Category"]})})})]}),n.jsxs("div",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit Vendor Category":"Add Vendor Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:l,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Category Name"}),n.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Hardware",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range From"}),n.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",value:e.rangeFrom,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range To"}),n.jsx("input",{type:"text",name:"rangeTo",placeholder:"e.g., 999999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map(b=>n.jsxs("tr",{children:[n.jsx("td",{children:b.categoryName}),n.jsx("td",{children:b.rangeFrom}),n.jsx("td",{children:b.rangeTo}),n.jsx("td",{children:n.jsx("button",{onClick:()=>{d(b),f()},className:"btn btn-sm btn-primary",children:"Edit"})})]},b._id))})]})})})})]})]})})}function Y8e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""}),[u,h]=j.useState(!1),[f,p]=j.useState(null),[v,g]=j.useState([]),[b,y]=j.useState([]),S=localStorage.getItem("selectedCompanyId"),w=localStorage.getItem("financialYear");j.useEffect(()=>{k(),C()},[]),j.useEffect(()=>{_()},[e,c]);const k=async()=>{try{i(!0);const V=await Ie.get("/api/goodsTransfer",{params:{companyId:S,financialYear:w}});t(V.data),l("")}catch(V){l("Failed to fetch goods transfers"),console.error("Error fetching transfers:",V)}finally{i(!1)}},C=async()=>{try{const V=await Ie.get("/api/goodsTransferCategory",{params:{companyId:S}});g(V.data);const Y=await Ie.get("/api/locations",{params:{companyId:S,financialYear:w}});y(Y.data)}catch(V){console.error("Error fetching dropdown data:",V)}},_=()=>{let V=[...e];c.category&&(V=V.filter(Y=>Y.category.toLowerCase().includes(c.category.toLowerCase()))),c.location&&(V=V.filter(Y=>Y.location.toLowerCase().includes(c.location.toLowerCase()))),c.docnumber&&(V=V.filter(Y=>Y.docnumber.toLowerCase().includes(c.docnumber.toLowerCase()))),c.dateFrom&&(V=V.filter(Y=>new Date(Y.docDate)>=new Date(c.dateFrom))),c.dateTo&&(V=V.filter(Y=>new Date(Y.docDate)<=new Date(c.dateTo))),a(V)},E=(V,Y)=>{d(B=>({...B,[V]:Y}))},T=()=>{d({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""})},I=V=>{p(V),h(!0)},F=V=>{const Y=window.open("","_blank","width=800,height=600"),B=A(V);Y.document.write(B),Y.document.close(),Y.onload=()=>{Y.print()}},A=V=>{const Y=new Date().toLocaleString(),B=q(V.items);return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Goods Transfer - ${V.docnumber}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 20px;
            }
            .company-name {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .document-title {
              font-size: 20px;
              font-weight: bold;
              color: #666;
            }
            .info-section {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .info-box {
              width: 48%;
            }
            .info-box h4 {
              background-color: #f8f9fa;
              padding: 8px;
              margin: 0 0 10px 0;
              border-left: 4px solid #007bff;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table td {
              padding: 5px;
              border-bottom: 1px solid #eee;
            }
            .info-table td:first-child {
              font-weight: bold;
              width: 40%;
            }
            .items-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            .items-table th,
            .items-table td {
              border: 1px solid #333;
              padding: 8px;
              text-align: left;
            }
            .items-table th {
              background-color: #f8f9fa;
              font-weight: bold;
            }
            .items-table tr:nth-child(even) {
              background-color: #f9f9f9;
            }
            .total-row {
              background-color: #e9ecef !important;
              font-weight: bold;
            }
            .footer {
              margin-top: 30px;
              border-top: 1px solid #333;
              padding-top: 20px;
            }
            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 40px;
            }
            .signature-box {
              width: 200px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              margin-top: 50px;
              padding-top: 5px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Your Company Name</div>
            <div class="document-title">GOODS TRANSFER DOCUMENT</div>
          </div>

          <div class="info-section">
            <div class="info-box">
              <h4>Document Information</h4>
              <table class="info-table">
                <tr>
                  <td>Document No:</td>
                  <td><strong>${V.docnumber}</strong></td>
                </tr>
                <tr>
                  <td>Category:</td>
                  <td>${V.category}</td>
                </tr>
                <tr>
                  <td>Description:</td>
                  <td>${V.catdesc||"N/A"}</td>
                </tr>
                <tr>
                  <td>Location:</td>
                  <td>${V.location}</td>
                </tr>
              </table>
            </div>
            
            <div class="info-box">
              <h4>Dates & Reference</h4>
              <table class="info-table">
                <tr>
                  <td>Document Date:</td>
                  <td>${P(V.docDate)}</td>
                </tr>
                <tr>
                  <td>Posting Date:</td>
                  <td>${P(V.postDate)}</td>
                </tr>
                <tr>
                  <td>Reference:</td>
                  <td>${V.reference||"N/A"}</td>
                </tr>
                <tr>
                  <td>Print Date:</td>
                  <td>${Y}</td>
                </tr>
              </table>
            </div>
          </div>

          <h4>Items Details</h4>
          <table class="items-table">
            <thead>
              <tr>
                <th style="width: 5%">#</th>
                <th style="width: 15%">Material ID</th>
                <th style="width: 25%">Description</th>
                <th style="width: 8%">Qty</th>
                <th style="width: 8%">UOM</th>
                <th style="width: 10%">Price</th>
                <th style="width: 10%">Total</th>
                <th style="width: 10%">Del Date</th>
                <th style="width: 9%">Lot No</th>
              </tr>
            </thead>
            <tbody>
              ${V.items?V.items.map((Q,R)=>`
                <tr>
                  <td>${R+1}</td>
                  <td>${Q.materialId||"N/A"}</td>
                  <td>${Q.description||"N/A"}</td>
                  <td>${Q.quantity||"0"}</td>
                  <td>${Q.baseUnit||"N/A"}</td>
                  <td>${Q.price||"0.00"}</td>
                  <td>${(parseFloat(Q.quantity||0)*parseFloat(Q.price||0)).toFixed(2)}</td>
                  <td>${P(Q.deliveryDate)}</td>
                  <td>${Q.lotNo||"N/A"}</td>
                </tr>
              `).join(""):'<tr><td colspan="9" style="text-align: center;">No items found</td></tr>'}
              <tr class="total-row">
                <td colspan="6" style="text-align: right;"><strong>GRAND TOTAL:</strong></td>
                <td><strong>${B}</strong></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>

          <div class="footer">
            <div class="signature-section">
              <div class="signature-box">
                <div class="signature-line">Prepared By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Checked By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Approved By</div>
              </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666;">
              <p>This is a computer generated document. No signature required.</p>
              <p>Generated on: ${Y} | User: ${localStorage.getItem("userLogin")||"System"}</p>
            </div>
          </div>
        </body>
      </html>
    `},P=V=>V?new Date(V).toLocaleDateString("en-IN"):"N/A",q=V=>!V||V.length===0?0:V.reduce((Y,B)=>Y+parseFloat(B.quantity||0)*parseFloat(B.price||0),0).toFixed(2);return s?n.jsx("div",{className:"container p-3",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading goods transfers..."})]})}):n.jsxs("div",{className:"container-fluid p-3",children:[n.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:n.jsxs("h4",{children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Goods Transfer List"]})}),o&&n.jsxs("div",{className:"alert alert-danger",role:"alert",children:[n.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o]}),n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-7",children:n.jsxs("select",{className:"form-select form-select-sm",value:c.category,onChange:V=>E("category",V.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),v.map((V,Y)=>n.jsx("option",{value:V.categoryName,children:V.categoryName},Y))]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-7",children:n.jsxs("select",{className:"form-select form-select-sm",value:c.location,onChange:V=>E("location",V.target.value),children:[n.jsx("option",{value:"",children:"All Locations"}),b.map((V,Y)=>n.jsx("option",{value:V.name||V.locationName,children:V.name||V.locationName},Y))]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Doc No"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search...",value:c.docnumber,onChange:V=>E("docnumber",V.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"From"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateFrom,onChange:V=>E("dateFrom",V.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"To"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateTo,onChange:V=>E("dateTo",V.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:""})}),n.jsx("div",{className:"col-7",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:T,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})})]})})]})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:r.length===0?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("h5",{children:"No goods transfers found"}),n.jsx("p",{className:"text-muted",children:"Try adjusting your filters or create a new goods transfer."})]}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Items Count"}),n.jsx("th",{children:"Total Value"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((V,Y)=>n.jsxs("tr",{children:[n.jsx("td",{children:Y+1}),n.jsx("td",{children:V.docnumber}),n.jsx("td",{children:V.category}),n.jsx("td",{children:V.location}),n.jsx("td",{children:P(V.docDate)}),n.jsx("td",{children:P(V.postDate)}),n.jsx("td",{children:V.reference}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:V.items?V.items.length:0})}),n.jsx("td",{children:n.jsxs("strong",{children:["",q(V.items)]})}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>I(V),title:"View Details",children:n.jsx("i",{className:"fas fa-eye"})}),n.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>F(V),title:"Print Document",children:n.jsx("i",{className:"fas fa-print"})})]})})]},V._id||Y))})]})})})}),u&&f&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Goods Transfer Details - ",f.docnumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>h(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h6",{className:"mb-0",children:"Document Information"})}),n.jsx("div",{className:"card-body",children:n.jsx("table",{className:"table table-sm",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{width:"40%",children:"Document No:"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:f.docnumber})})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Category:"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:f.category})})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Description:"}),n.jsx("td",{children:f.catdesc})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Location:"}),n.jsx("td",{children:f.location})]})]})})})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h6",{className:"mb-0",children:"Dates & Reference"})}),n.jsx("div",{className:"card-body",children:n.jsx("table",{className:"table table-sm",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{width:"40%",children:"Document Date:"}),n.jsx("td",{children:P(f.docDate)})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Posting Date:"}),n.jsx("td",{children:P(f.postDate)})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Reference:"}),n.jsx("td",{children:f.reference})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Created Date:"}),n.jsx("td",{children:P(f.date)})]})]})})})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Items Details"}),n.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>F(f),children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print"]})]}),n.jsx("div",{className:"card-body",children:f.items&&f.items.length>0?n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-striped",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Text"})]})}),n.jsx("tbody",{children:f.items.map((V,Y)=>n.jsxs("tr",{children:[n.jsx("td",{children:Y+1}),n.jsx("td",{children:n.jsx("code",{children:V.materialId})}),n.jsx("td",{children:V.description}),n.jsx("td",{children:V.quantity}),n.jsx("td",{children:V.baseUnit}),n.jsxs("td",{children:["",V.price]}),n.jsx("td",{children:n.jsxs("strong",{children:["",(parseFloat(V.quantity||0)*parseFloat(V.price||0)).toFixed(2)]})}),n.jsx("td",{children:P(V.deliveryDate)}),n.jsx("td",{children:V.lotNo}),n.jsx("td",{children:V.text})]},Y))}),n.jsx("tfoot",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{colSpan:"6",className:"text-end",children:"Grand Total:"}),n.jsxs("th",{children:["",q(f.items)]}),n.jsx("th",{colSpan:"3"})]})})]})}):n.jsxs("div",{className:"text-center py-3",children:[n.jsx("i",{className:"fas fa-box-open fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted",children:"No items found for this transfer"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>F(f),children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print Document"]}),n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})]})]})})})]})}const K8e=()=>{const[e,t]=j.useState({contacts:[],loading:!1,totalCount:0,currentPage:1,pageSize:10,searchTerm:"",sortBy:"name",sortOrder:"asc"}),[r,a]=j.useState(!1),[s,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState(null),[f,p]=j.useState(null),[v,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(!1),k="/api",C=512*1024,_=async(W,re={})=>{try{const le=await fetch(`${k}${W}`,{headers:{"Content-Type":"application/json",...re.headers},...re});if(!le.ok)throw new Error(`API call failed: ${le.statusText}`);return await le.json()}catch(le){throw console.error("API Error:",le),le}},E=async W=>{const re=new FormData;re.append("avatar",W);try{const le=await fetch(`${k}/contacts/upload/avatar`,{method:"POST",body:re});if(!le.ok)throw new Error("Upload failed");return await le.json()}catch(le){throw console.error("Upload Error:",le),le}};j.useEffect(()=>{T()},[e.currentPage,e.pageSize,e.searchTerm,e.sortBy,e.sortOrder]);const T=async()=>{t(W=>({...W,loading:!0}));try{const W={page:e.currentPage,limit:e.pageSize,search:e.searchTerm,sortBy:e.sortBy,sortOrder:e.sortOrder},re=new URLSearchParams(W).toString(),le=await _(`/contacts?${re}`);t(te=>({...te,contacts:le.data.contacts,totalCount:le.data.totalCount,loading:!1}))}catch(W){console.error("Error fetching contacts:",W),t(re=>({...re,loading:!1}))}},I=W=>{const re=W.target.files[0];if(!re)return;if(re.size>C){alert("Image size must be less than 512KB"),W.target.value="";return}if(!re.type.startsWith("image/")){alert("Please select a valid image file"),W.target.value="";return}g(re);const le=new FileReader;le.onload=te=>{y(te.target.result)},le.readAsDataURL(re)},F=()=>{g(null),y(null);const W=document.querySelector('input[type="file"]');W&&(W.value="")},A=W=>{t(re=>({...re,searchTerm:W,currentPage:1}))},P=W=>{t(re=>({...re,sortBy:W,sortOrder:re.sortBy===W&&re.sortOrder==="asc"?"desc":"asc"}))},q=W=>{h(W),y(W.avatar),i(!0)},V=W=>{p(W),l(!0)},Y=async()=>{try{await _("/contacts",{method:"DELETE",body:JSON.stringify({ids:[f]})}),T(),l(!1),p(null)}catch(W){console.error("Error deleting contact:",W)}},B=async W=>{try{w(!0);let re=null;v&&(re=(await E(v)).data.url);const le={...W,avatar:re};await _("/contacts",{method:"POST",body:JSON.stringify(le)}),T(),a(!1),F()}catch(re){console.error("Error creating contact:",re)}finally{w(!1)}},Q=async W=>{try{w(!0);let re=u.avatar;v&&(re=(await E(v)).data.url);const le={...W,avatar:re};await _(`/contacts/${u._id}`,{method:"PUT",body:JSON.stringify(le)}),T(),i(!1),h(null),F()}catch(re){console.error("Error updating contact:",re)}finally{w(!1)}},R=W=>n.jsxs("span",{className:"rating",children:[[1,2,3,4,5].map(re=>n.jsx("i",{className:`ti ti-star-filled ${re<=W?"text-warning":""}`},re)),n.jsxs("span",{className:"ms-1",children:[W,".0"]})]}),Z=W=>n.jsx("div",{className:"d-flex gap-1 flex-wrap",children:W.map((re,le)=>n.jsx("span",{className:"badge badge-soft-primary",children:re},le))}),J=W=>e.sortBy!==W?n.jsx("i",{className:"ti ti-selector"}):e.sortOrder==="asc"?n.jsx("i",{className:"ti ti-chevron-up"}):n.jsx("i",{className:"ti ti-chevron-down"}),ie=()=>n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Profile Image (Max 512KB)"}),n.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n.jsx("div",{className:"avatar avatar-lg",children:b?n.jsx("img",{src:b,alt:"Preview",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}):n.jsx("div",{className:"avatar-initial rounded-circle bg-secondary d-flex align-items-center justify-content-center",children:n.jsx("i",{className:"ti ti-user fs-3"})})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:I}),n.jsx("small",{className:"text-muted",children:"JPG, PNG, GIF (Max 512KB)"}),b&&n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger mt-1",onClick:F,children:"Remove Image"})]})]})]}),M=()=>e.loading?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"",children:n.jsxs("table",{className:"table table-sm",id:"contactslist",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{className:"no-sort"}),n.jsxs("th",{onClick:()=>P("name"),style:{cursor:"pointer"},children:["Name ",J("name")]}),n.jsxs("th",{onClick:()=>P("phone"),style:{cursor:"pointer"},children:["Phone ",J("phone")]}),n.jsx("th",{children:"Tags"}),n.jsxs("th",{onClick:()=>P("location"),style:{cursor:"pointer"},children:["Location ",J("location")]}),n.jsxs("th",{className:"pe-3",onClick:()=>P("rating"),style:{cursor:"pointer"},children:["Rating ",J("rating")]}),n.jsx("th",{children:"Contact"}),n.jsxs("th",{onClick:()=>P("status"),style:{cursor:"pointer"},children:["Status ",J("status")]}),n.jsx("th",{className:"text-end no-sort",children:"Action"})]})}),n.jsx("tbody",{children:e.contacts.map(W=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"avatar avatar-sm rounded-circle",children:W.avatar?n.jsx("img",{src:`${W.avatar}`,className:"flex-shrink-0 rounded-circle",alt:W.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):n.jsx("div",{className:"avatar-initial rounded-circle bg-primary",children:W.name.charAt(0).toUpperCase()})})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("h6",{className:"mb-0",children:W.name}),n.jsx("small",{className:"text-muted",children:W.email})]})}),n.jsx("td",{children:W.phone}),n.jsx("td",{children:Z(W.tags)}),n.jsx("td",{children:W.location}),n.jsx("td",{children:R(W.rating)}),n.jsx("td",{children:W.email}),n.jsx("td",{children:n.jsx("span",{className:`badge ${W.status==="active"?"badge-soft-success":"badge-soft-danger"}`,children:W.status})}),n.jsx("td",{className:"text-end",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-light btn-sm","data-bs-toggle":"dropdown",children:n.jsx("i",{className:"ti ti-dots-vertical"})}),n.jsxs("div",{className:"dropdown-menu",children:[n.jsxs("a",{className:"dropdown-item",href:"javascript:void(0);",onClick:()=>q(W),children:[n.jsx("i",{className:"ti ti-edit me-1"}),"Edit"]}),n.jsxs("a",{className:"dropdown-item text-danger",href:"javascript:void(0);",onClick:()=>V(W._id),children:[n.jsx("i",{className:"ti ti-trash me-1"}),"Delete"]})]})]})})]},W._id))})]})}),z=()=>r?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",onClick:W=>W.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Add Contact"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{a(!1),F()}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:W=>{W.preventDefault();const re=new FormData(W.target),le={name:re.get("name"),phone:re.get("phone"),email:re.get("email"),location:re.get("location"),rating:parseInt(re.get("rating"))||3,status:re.get("status")||"active",tags:re.get("tags")?re.get("tags").split(",").map(te=>te.trim()):[]};B(le)},children:[ie(),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Name"}),n.jsx("input",{type:"text",name:"name",className:"form-control",required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",className:"form-control",required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsx("input",{type:"text",name:"location",className:"form-control",required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Rating"}),n.jsx("select",{name:"rating",className:"form-control",children:[1,2,3,4,5].map(W=>n.jsxs("option",{value:W,selected:W===3,children:[W," Star"]},W))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",className:"form-control",children:[n.jsx("option",{value:"active",selected:!0,children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsx("input",{type:"text",name:"tags",className:"form-control",placeholder:"VIP, Client"})]})})]}),n.jsxs("div",{className:"text-end",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{a(!1),F()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):"Add Contact"})]})]})})]})})}):null,ee=()=>!s||!u?null:n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",onClick:W=>W.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Edit Contact"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),F()}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:W=>{W.preventDefault();const re=new FormData(W.target),le={name:re.get("name"),phone:re.get("phone"),email:re.get("email"),location:re.get("location"),rating:parseInt(re.get("rating"))||3,status:re.get("status")||"active",tags:re.get("tags")?re.get("tags").split(",").map(te=>te.trim()):[]};Q(le)},children:[ie(),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Name"}),n.jsx("input",{type:"text",name:"name",className:"form-control",defaultValue:u.name,required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",className:"form-control",defaultValue:u.phone,required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",defaultValue:u.email,required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsx("input",{type:"text",name:"location",className:"form-control",defaultValue:u.location,required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Rating"}),n.jsx("select",{name:"rating",className:"form-control",defaultValue:u.rating,children:[1,2,3,4,5].map(W=>n.jsxs("option",{value:W,children:[W," Star"]},W))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",className:"form-control",defaultValue:u.status,children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsx("input",{type:"text",name:"tags",className:"form-control",defaultValue:u.tags.join(", "),placeholder:"VIP, Client"})]})})]}),n.jsxs("div",{className:"text-end",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),h(null),F()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Contact"})]})]})})]})})}),ne=()=>{if(!o)return null;const W=e.contacts.find(re=>re._id===f);return n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",onClick:re=>re.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{l(!1),p(null)}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mb-3",children:n.jsx("i",{className:"ti ti-alert-triangle text-warning",style:{fontSize:"48px"}})}),n.jsx("h6",{children:"Are you sure you want to delete this contact?"}),W&&n.jsxs("p",{className:"text-muted",children:[n.jsx("strong",{children:W.name}),n.jsx("br",{}),W.email]}),n.jsx("p",{className:"text-danger small",children:"This action cannot be undone."})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),p(null)},children:"Cancel"}),n.jsx("button",{type:"button",className:"btn btn-danger",onClick:Y,children:"Delete Contact"})]})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content pb-0",children:[n.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:n.jsxs("div",{children:[n.jsx("h4",{className:"mb-1",children:"Contacts"}),n.jsx("nav",{"aria-label":"breadcrumb",children:n.jsxs("ol",{className:"breadcrumb mb-0 p-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:"Home"})}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contacts"})]})})]})}),n.jsxs("div",{className:"card border-0 rounded-0",children:[n.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[n.jsxs("div",{className:"input-icon input-icon-start position-relative",children:[n.jsx("span",{className:"input-icon-addon text-dark",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:e.searchTerm,onChange:W=>A(W.target.value)})]}),n.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),children:[n.jsx("i",{className:"ti ti-square-rounded-plus-filled me-1"}),"Add Contacts"]})]}),n.jsxs("div",{className:"card-body",children:[M(),n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"datatable-length",children:["Showing ",(e.currentPage-1)*e.pageSize+1," to ",Math.min(e.currentPage*e.pageSize,e.totalCount)," of ",e.totalCount," entries"]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"datatable-paginate text-end",children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:e.currentPage===1,onClick:()=>t(W=>({...W,currentPage:W.currentPage-1})),children:"Previous"}),n.jsxs("span",{className:"me-2",children:["Page ",e.currentPage]}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",disabled:e.currentPage*e.pageSize>=e.totalCount,onClick:()=>t(W=>({...W,currentPage:W.currentPage+1})),children:"Next"})]})})]})]})]}),z(),ee(),ne()]})})},X8e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState(!1),[v,g]=j.useState(""),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),[S,w]=j.useState({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""}),k=async()=>{try{p(!0);const R=await fetch(`/api/leads?companyId=${b}&financialYear=${y}`);if(!R.ok)throw new Error("Failed to fetch leads");const Z=await R.json();console.log("Fetched leads:",Z),t(Z||[])}catch(R){g(R.message)}finally{p(!1)}},C=async()=>{try{const R=await fetch(`/api/campaigns?companyId=${b}&financialYear=${y}`);if(!R.ok)throw new Error("Failed to fetch campaigns");const Z=await R.json();a(Z||[])}catch(R){console.error("Failed to fetch campaigns:",R)}},_=async R=>{try{const Z=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...R,companyId:b,financialYear:y})});if(!Z.ok){const ie=await Z.json();throw new Error(ie.message||"Failed to create lead")}const J=await Z.json();t([...e,J]),I(),i(!1)}catch(Z){g(Z.message)}},E=async(R,Z)=>{try{const J=await fetch(`/api/leads/${R}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Z,companyId:b,financialYear:y})});if(!J.ok){const M=await J.json();throw new Error(M.message||"Failed to update lead")}const ie=await J.json();t(e.map(M=>M._id===R?ie:M)),I(),i(!1),l(null)}catch(J){g(J.message)}},T=async R=>{if(window.confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${R}`,{method:"DELETE"})).ok)throw new Error("Failed to delete lead");t(e.filter(J=>J._id!==R))}catch(Z){g(Z.message)}},I=()=>{w({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""})},F=async R=>{R.preventDefault(),o?await E(o._id,S):await _(S)},A=R=>{w({companyName:R.companyName,contactPersonName:R.contactPersonName,email:R.email,phoneNumber:R.phoneNumber,leadSource:R.leadSource,leadStatus:R.leadStatus,industry:R.industry,companySize:R.companySize,annualRevenue:R.annualRevenue||"",leadScore:R.leadScore,assignedSalesRep:R.assignedSalesRep||"",notes:R.notes||"",expectedDealValue:R.expectedDealValue||"",expectedCloseDate:R.expectedCloseDate?R.expectedCloseDate.split("T")[0]:"",campaignId:R.campaignId?._id||R.campaignId||""}),l(R),i(!0)},P=R=>{const{name:Z,value:J}=R.target;w(ie=>({...ie,[Z]:J}))},q=Array.isArray(e)?e.filter(R=>{const Z=R.companyName?.toLowerCase().includes(c.toLowerCase())||R.contactPersonName?.toLowerCase().includes(c.toLowerCase())||R.email?.toLowerCase().includes(c.toLowerCase()),J=u===""||R.leadStatus===u;return Z&&J}):[];j.useEffect(()=>{k(),C()},[]);const V=["Website","Social Media","Referral","Cold Call","Advertisement","Email Campaign","Google Ads","Event","Other"],Y=["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],B=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Other"],Q=["1-10","11-50","51-200","201-1000","1000+"];return n.jsxs("div",{className:"container-fluid py-4",children:[v&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:v}),s&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:o?"Edit Lead":"Add New Lead"}),n.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{i(!1),l(null),I()},children:""})]}),n.jsxs("form",{onSubmit:F,className:"modal-body",children:[n.jsxs("div",{className:"row g-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Company Name*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"companyName",className:"form-control form-control-sm",value:S.companyName,onChange:P,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"contactPersonName",className:"form-control form-control-sm",value:S.contactPersonName,onChange:P,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Email*"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("input",{type:"email",name:"email",className:"form-control form-control-sm",value:S.email,onChange:P,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Phone Number*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control form-control-sm",value:S.phoneNumber,onChange:P,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Campaign"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{name:"campaignId",className:"form-control form-control-sm",value:S.campaignId,onChange:P,children:[n.jsx("option",{value:"",children:"Select Campaign"}),r.map(R=>n.jsx("option",{value:R._id,children:R.campaignName},R._id))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Source"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"leadSource",className:"form-control form-control-sm",value:S.leadSource,onChange:P,children:V.map(R=>n.jsx("option",{value:R,children:R},R))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Status"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"leadStatus",className:"form-control form-control-sm",value:S.leadStatus,onChange:P,children:Y.map(R=>n.jsx("option",{value:R,children:R},R))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Industry"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"industry",className:"form-control form-control-sm",value:S.industry,onChange:P,children:B.map(R=>n.jsx("option",{value:R,children:R},R))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Company Size"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"companySize",className:"form-control form-control-sm",value:S.companySize,onChange:P,children:Q.map(R=>n.jsx("option",{value:R,children:R},R))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Annual Revenue"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"annualRevenue",className:"form-control form-control-sm",value:S.annualRevenue,onChange:P,min:"0"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Score (1-100)"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"leadScore",className:"form-control form-control-sm",value:S.leadScore,onChange:P,min:"1",max:"100"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Assigned Sales Rep"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"assignedSalesRep",className:"form-control form-control-sm",value:S.assignedSalesRep,onChange:P})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Expected Deal Value"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"expectedDealValue",className:"form-control form-control-sm",value:S.expectedDealValue,onChange:P,min:"0"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Expected Close Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",name:"expectedCloseDate",className:"form-control form-control-sm",value:S.expectedCloseDate,onChange:P})})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Notes"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{name:"notes",className:"form-control form-control-sm",value:S.notes,onChange:P,rows:"3"})})]})})]}),n.jsx("div",{className:"row mt-3",children:n.jsxs("div",{className:"col-auto",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),l(null),I()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Lead":"Create Lead"})]})})]})]})})}),n.jsxs("div",{className:"card mt-3",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Leads Management"]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:R=>d(R.target.value),className:"form-control form-control-sm",style:{width:"200px"}}),n.jsxs("select",{value:u,onChange:R=>h(R.target.value),className:"form-select form-select-sm",style:{width:"150px"},children:[n.jsx("option",{value:"",children:"All Statuses"}),Y.map(R=>n.jsx("option",{value:R,children:R},R))]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{I(),l(null),i(!0)},children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add New Lead"]})]})]}),n.jsx("div",{className:"card-body",children:f?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Company"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Campaign"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Source"}),n.jsx("th",{children:"Industry"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"Expected Value"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:q.length>0?q.map(R=>n.jsxs("tr",{children:[n.jsx("td",{children:R.companyName}),n.jsx("td",{children:R.contactPersonName}),n.jsx("td",{children:n.jsx("a",{href:`mailto:${R.email}`,className:"text-decoration-none",children:R.email})}),n.jsx("td",{children:R.phoneNumber&&n.jsx("a",{href:`tel:${R.phoneNumber}`,className:"text-decoration-none",children:R.phoneNumber})}),n.jsx("td",{children:R.campaignId?.campaignName&&n.jsx("span",{className:"badge bg-info",children:R.campaignId.campaignName})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${Q8e(R.leadStatus)}`,children:R.leadStatus})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:R.leadSource})}),n.jsx("td",{children:R.industry}),n.jsx("td",{children:n.jsxs("span",{className:`badge bg-${J8e(R.leadScore)}`,children:[R.leadScore,"/100"]})}),n.jsx("td",{children:R.expectedDealValue?`$${Number(R.expectedDealValue).toLocaleString()}`:"N/A"}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:()=>A(R),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(R._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},R._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"11",className:"text-center",children:e.length===0?"No leads available":"No leads match your search criteria"})})})]})})})]})]})},Q8e=e=>{switch(e){case"New":return"primary";case"Contacted":return"info";case"Qualified":return"success";case"Proposal":return"warning";case"Negotiation":return"secondary";case"Closed Won":return"success";case"Closed Lost":return"danger";default:return"secondary"}},J8e=e=>e>=80?"success":e>=60?"warning":e>=40?"info":"secondary",Nm="/api";function Z8e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(!1),[k,C]=j.useState(""),[_,E]=j.useState("basic"),[T,I]=j.useState({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),F=se=>{const be=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposal - ${se.proposalNumber}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .header h2 {
                        margin: 5px 0;
                        color: #34495e;
                        font-size: 20px;
                    }
                    .section {
                        margin-bottom: 25px;
                    }
                    .section h3 {
                        color: #2c3e50;
                        border-bottom: 2px solid #bdc3c7;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                        font-size: 18px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 20px;
                    }
                    .info-item {
                        margin-bottom: 10px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-left: 4px solid #3498db;
                        margin: 15px 0;
                    }
                    .value-highlight {
                        background-color: #e8f6f3;
                        padding: 15px;
                        border-radius: 5px;
                        text-align: center;
                        margin: 20px 0;
                    }
                    .value-highlight .amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        border-top: 2px solid #bdc3c7;
                        padding-top: 20px;
                        color: #7f8c8d;
                    }
                    .terms-section {
                        background-color: #f8f9fa;
                        padding: 20px;
                        border-radius: 5px;
                        margin: 20px 0;
                    }
                    @media print {
                        body { margin: 0; }
                        .section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>BUSINESS PROPOSAL</h1>
                    <h2>${se.proposalNumber}</h2>
                    <p>Date: ${be}</p>
                </div>

                <div class="section">
                    <h3>Client Information</h3>
                    <div class="info-grid">
                        <div>
                            <div class="info-item"><strong>Company:</strong> ${se.leadId?.companyName||"N/A"}</div>
                            <div class="info-item"><strong>Contact Person:</strong> ${se.leadId?.contactPersonName||"N/A"}</div>
                        </div>
                        <div>
                            <div class="info-item"><strong>Email:</strong> ${se.leadId?.email||"N/A"}</div>
                            <div class="info-item"><strong>Phone:</strong> ${se.leadId?.phoneNumber||"N/A"}</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Proposal Overview</h3>
                    <div class="info-item"><strong>Title:</strong> ${se.title}</div>
                    <div class="description">
                        <strong>Description:</strong><br>
                        ${se.description}
                    </div>
                    
                    <div class="value-highlight">
                        <div class="amount">${se.currency} ${se.proposalValue?.toLocaleString()}</div>
                        <div>Total Proposal Value</div>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item"><strong>Priority:</strong> ${se.priority}</div>
                        <div class="info-item"><strong>Validity:</strong> ${se.validityPeriod} days</div>
                    </div>
                </div>

                ${se.businessObjective?`
                    <div class="section">
                        <h3>Business Objective</h3>
                        <p>${se.businessObjective}</p>
                    </div>
                `:""}

                ${se.proposedSolution?`
                    <div class="section">
                        <h3>Proposed Solution</h3>
                        <p>${se.proposedSolution}</p>
                    </div>
                `:""}

                ${se.timeline||se.projectDuration?`
                    <div class="section">
                        <h3>Project Timeline</h3>
                        ${se.timeline?`<p>${se.timeline}</p>`:""}
                        ${se.projectDuration?`<div class="info-item"><strong>Duration:</strong> ${se.projectDuration} days</div>`:""}
                    </div>
                `:""}

                ${se.teamComposition?`
                    <div class="section">
                        <h3>Team Composition</h3>
                        <p>${se.teamComposition}</p>
                    </div>
                `:""}

                ${se.technicalRequirements?`
                    <div class="section">
                        <h3>Technical Requirements</h3>
                        <p>${se.technicalRequirements}</p>
                    </div>
                `:""}

                ${se.proposedTechnology?`
                    <div class="section">
                        <h3>Proposed Technology</h3>
                        <p>${se.proposedTechnology}</p>
                    </div>
                `:""}

                ${se.paymentTerms||se.deliveryTerms||se.warrantyTerms?`
                    <div class="terms-section">
                        <h3>Commercial Terms</h3>
                        ${se.paymentTerms?`
                            <div class="info-item">
                                <strong>Payment Terms:</strong><br>
                                ${se.paymentTerms}
                            </div>
                        `:""}
                        ${se.deliveryTerms?`
                            <div class="info-item">
                                <strong>Delivery Terms:</strong><br>
                                ${se.deliveryTerms}
                            </div>
                        `:""}
                        ${se.warrantyTerms?`
                            <div class="info-item">
                                <strong>Warranty Terms:</strong><br>
                                ${se.warrantyTerms}
                            </div>
                        `:""}
                    </div>
                `:""}

                ${se.riskAssessment?`
                    <div class="section">
                        <h3>Risk Assessment</h3>
                        <p>${se.riskAssessment}</p>
                    </div>
                `:""}

                ${se.companyCredentials?`
                    <div class="section">
                        <h3>Company Credentials</h3>
                        <p>${se.companyCredentials}</p>
                    </div>
                `:""}

                <div class="footer">
                    <p><strong>Valid until:</strong> ${se.expiryDate?new Date(se.expiryDate).toLocaleDateString():`${se.validityPeriod} days from submission`}</p>
                    <br>
                    <p>Thank you for considering our proposal.</p>
                    <p><strong>Prepared by:</strong> ${se.createdBy||""}</p>
                </div>
            </body>
            </html>
        `},A=se=>{const be=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ue=se.map(oe=>`
            <div class="proposal-item">
                <h3>${oe.proposalNumber} - ${oe.title}</h3>
                <div class="info-grid">
                    <div>
                        <div class="info-item"><strong>Company:</strong> ${oe.leadId?.companyName||"N/A"}</div>
                        <div class="info-item"><strong>Contact:</strong> ${oe.leadId?.contactPersonName||"N/A"}</div>
                        <div class="info-item"><strong>Value:</strong> ${oe.currency} ${oe.proposalValue?.toLocaleString()}</div>
                    </div>
                    <div>
                        <div class="info-item"><strong>Status:</strong> ${oe.status}</div>
                        <div class="info-item"><strong>Priority:</strong> ${oe.priority}</div>
                        <div class="info-item"><strong>Created:</strong> ${new Date(oe.createdAt).toLocaleDateString()}</div>
                    </div>
                </div>
                <div class="description">
                    <strong>Description:</strong> ${oe.description}
                </div>
            </div>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposals Summary Report</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .proposal-item {
                        margin-bottom: 30px;
                        padding: 20px;
                        border: 1px solid #bdc3c7;
                        border-radius: 5px;
                        page-break-inside: avoid;
                    }
                    .proposal-item h3 {
                        color: #2c3e50;
                        margin-top: 0;
                        border-bottom: 1px solid #bdc3c7;
                        padding-bottom: 10px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 15px;
                    }
                    .info-item {
                        margin-bottom: 8px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 10px;
                        border-left: 4px solid #3498db;
                        margin-top: 10px;
                    }
                    @media print {
                        body { margin: 0; }
                        .proposal-item { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>PROPOSALS SUMMARY REPORT</h1>
                    <p>Generated on: ${be}</p>
                    <p>Total Proposals: ${se.length}</p>
                </div>
                ${ue}
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #bdc3c7; padding-top: 20px;">
                    <p><strong>Report generated by:</strong> sreevatsa-B-R</p>
                </div>
            </body>
            </html>
        `},P=async se=>{try{const be=await fetch(`${Nm}/proposals/${se._id}`);if(!be.ok)throw new Error("Failed to fetch proposal details");const ue=await be.json(),oe=F(ue),ge=window.open("","_blank");ge.document.write(oe),ge.document.close(),ge.onload=()=>{ge.focus(),ge.print(),ge.close()}}catch(be){C("Failed to print proposal: "+be.message)}},q=()=>{if(u.length===0){alert("Please select proposals to print");return}const se=e.filter(oe=>u.includes(oe._id)),be=A(se),ue=window.open("","_blank");ue.document.write(be),ue.document.close(),ue.onload=()=>{ue.focus(),ue.print(),ue.close()}},V=se=>{h(be=>be.includes(se)?be.filter(ue=>ue!==se):[...be,se])},Y=()=>{u.length===re.length?h([]):h(re.map(se=>se._id))},B=async()=>{try{w(!0);const se=await fetch(`${Nm}/proposals`);if(!se.ok)throw new Error("Failed to fetch proposals");const be=await se.json();t(be.proposals||be)}catch(se){C(se.message)}finally{w(!1)}},Q=async()=>{try{const se=await fetch(`${Nm}/leads?status=Qualified`);if(!se.ok)throw new Error("Failed to fetch leads");const be=await se.json();a(be.leads||be)}catch(se){console.error("Error fetching leads:",se)}},R=async se=>{try{console.log("Sending proposal data:",se);const be=await fetch(`${Nm}/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(console.log("Response status:",be.status),!be.ok){const oe=await be.json();throw console.error("Error response:",oe),new Error(oe.message||"Failed to create proposal")}const ue=await be.json();console.log("Created proposal:",ue),t([...e,ue]),M(),i(!1)}catch(be){console.error("Create proposal error:",be),C(be.message)}},Z=async(se,be)=>{try{const ue=await fetch(`${Nm}/proposals/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!ue.ok){const ge=await ue.json();throw new Error(ge.message||"Failed to update proposal")}const oe=await ue.json();t(e.map(ge=>ge._id===se?oe:ge)),M(),i(!1),l(null)}catch(ue){C(ue.message)}},J=async se=>{try{const be=await fetch(`${Nm}/proposals/${se}/submit`,{method:"PUT"});if(!be.ok){const oe=await be.json();throw new Error(oe.message||"Failed to submit proposal")}const ue=await be.json();t(e.map(oe=>oe._id===se?ue:oe))}catch(be){C(be.message)}},ie=async se=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{if(!(await fetch(`${Nm}/proposals/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete proposal");t(e.filter(ue=>ue._id!==se))}catch(be){C(be.message)}},M=()=>{I({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),E("basic")},z=async se=>{se.preventDefault(),o?await Z(o._id,T):await R(T)},ee=se=>{I({leadId:se.leadId?._id||"",title:se.title||"",description:se.description||"",proposalValue:se.proposalValue||"",currency:se.currency||"USD",validityPeriod:se.validityPeriod||30,status:se.status||"Draft",priority:se.priority||"Medium",businessObjective:se.businessObjective||"",proposedSolution:se.proposedSolution||"",timeline:se.timeline||"",paymentTerms:se.paymentTerms||"",deliveryTerms:se.deliveryTerms||"",warrantyTerms:se.warrantyTerms||"",projectDuration:se.projectDuration||"",teamComposition:se.teamComposition||"",riskAssessment:se.riskAssessment||"",companyCredentials:se.companyCredentials||"",technicalRequirements:se.technicalRequirements||"",proposedTechnology:se.proposedTechnology||"",internalNotes:se.internalNotes||""}),l(se),i(!0)},ne=async se=>{try{const be=await fetch(`${Nm}/proposals/${se._id}`);if(!be.ok)throw new Error("Failed to fetch proposal details");const ue=await be.json();d(ue)}catch(be){C(be.message)}},W=se=>{const{name:be,value:ue}=se.target;I(oe=>({...oe,[be]:ue}))},re=Array.isArray(e)?e.filter(se=>{const be=se.proposalNumber?.toLowerCase().includes(f.toLowerCase())||se.title?.toLowerCase().includes(f.toLowerCase())||se.leadId?.companyName?.toLowerCase().includes(f.toLowerCase()),ue=v===""||se.status===v,oe=b===""||se.priority===b;return be&&ue&&oe}):[];j.useEffect(()=>{B(),Q()},[]);const le=["Draft","Submitted","Under Review","Approved","Rejected","Expired","Withdrawn"],te=["Low","Medium","High","Critical"],K=["USD","EUR","INR","GBP","CAD","AUD"],de=se=>{switch(se){case"Draft":return"secondary";case"Submitted":return"primary";case"Under Review":return"warning";case"Approved":return"success";case"Rejected":return"danger";case"Expired":return"dark";case"Withdrawn":return"secondary";default:return"secondary"}},H=se=>{switch(se){case"Low":return"success";case"Medium":return"warning";case"High":return"danger";case"Critical":return"dark";default:return"secondary"}};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Proposals"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Proposals"})]})})]}),n.jsx("div",{children:n.jsxs("div",{className:"d-flex gap-2",children:[u.length>0&&n.jsxs("button",{className:"btn btn-info",onClick:q,children:[n.jsx("i",{className:"fas fa-print"})," Print Selected (",u.length,")"]}),n.jsx("button",{className:"btn btn-primary",onClick:()=>{M(),l(null),i(!0)},children:"Create New Proposal"})]})})]}),n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",placeholder:"Search proposals...",value:f,onChange:se=>p(se.target.value),className:"form-control"})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{value:v,onChange:se=>g(se.target.value),className:"form-select",children:[n.jsx("option",{value:"",children:"All Statuses"}),le.map(se=>n.jsx("option",{value:se,children:se},se))]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{value:b,onChange:se=>y(se.target.value),className:"form-select",children:[n.jsx("option",{value:"",children:"All Priorities"}),te.map(se=>n.jsx("option",{value:se,children:se},se))]})}),n.jsx("div",{className:"col-md-2",children:n.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{p(""),g(""),y("")},children:"Clear Filters"})})]})})}),s&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:o?"Edit Proposal":"Create New Proposal"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),l(null),M()}})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("ul",{className:"nav nav-tabs mb-3",children:[n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${_==="basic"?"active":""}`,onClick:()=>E("basic"),children:"Basic Info"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${_==="business"?"active":""}`,onClick:()=>E("business"),children:"Business Details"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${_==="technical"?"active":""}`,onClick:()=>E("technical"),children:"Technical"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${_==="commercial"?"active":""}`,onClick:()=>E("commercial"),children:"Commercial"})})]}),n.jsxs("form",{onSubmit:z,children:[_==="basic"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Select Lead *"}),n.jsxs("select",{name:"leadId",className:"form-select",value:T.leadId,onChange:W,required:!0,disabled:o,children:[n.jsx("option",{value:"",children:"Select a qualified lead..."}),r.map(se=>n.jsxs("option",{value:se._id,children:[se.companyName," - ",se.contactPersonName]},se._id))]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Proposal Title *"}),n.jsx("input",{type:"text",name:"title",className:"form-control",value:T.title,onChange:W,required:!0,placeholder:"Enter proposal title"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Description *"}),n.jsx("textarea",{name:"description",className:"form-control",value:T.description,onChange:W,required:!0,rows:"4",placeholder:"Enter proposal description"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Proposal Value *"}),n.jsx("input",{type:"number",name:"proposalValue",className:"form-control",value:T.proposalValue,onChange:W,required:!0,min:"0",step:"0.01"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Currency"}),n.jsx("select",{name:"currency",className:"form-select",value:T.currency,onChange:W,children:K.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Validity Period (Days)"}),n.jsx("input",{type:"number",name:"validityPeriod",className:"form-control",value:T.validityPeriod,onChange:W,min:"1",max:"365"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{name:"status",className:"form-select",value:T.status,onChange:W,children:le.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{name:"priority",className:"form-select",value:T.priority,onChange:W,children:te.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Created By"}),n.jsx("input",{type:"text",name:"createdBy",className:"form-control",value:T.createdBy,onChange:W})]})]}),_==="business"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Business Objective"}),n.jsx("textarea",{name:"businessObjective",className:"form-control",value:T.businessObjective,onChange:W,rows:"3",placeholder:"Describe the business objective"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Proposed Solution"}),n.jsx("textarea",{name:"proposedSolution",className:"form-control",value:T.proposedSolution,onChange:W,rows:"4",placeholder:"Describe the proposed solution"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Project Timeline"}),n.jsx("textarea",{name:"timeline",className:"form-control",value:T.timeline,onChange:W,rows:"3",placeholder:"Project timeline and milestones"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Project Duration (Days)"}),n.jsx("input",{type:"number",name:"projectDuration",className:"form-control",value:T.projectDuration,onChange:W,min:"1"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Team Composition"}),n.jsx("textarea",{name:"teamComposition",className:"form-control",value:T.teamComposition,onChange:W,rows:"3",placeholder:"Describe the project team composition"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Risk Assessment"}),n.jsx("textarea",{name:"riskAssessment",className:"form-control",value:T.riskAssessment,onChange:W,rows:"3",placeholder:"Risk assessment and mitigation strategies"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Company Credentials"}),n.jsx("textarea",{name:"companyCredentials",className:"form-control",value:T.companyCredentials,onChange:W,rows:"4",placeholder:"Company credentials and past experience"})]})]}),_==="technical"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Technical Requirements"}),n.jsx("textarea",{name:"technicalRequirements",className:"form-control",value:T.technicalRequirements,onChange:W,rows:"5",placeholder:"Detailed technical requirements"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Proposed Technology"}),n.jsx("textarea",{name:"proposedTechnology",className:"form-control",value:T.proposedTechnology,onChange:W,rows:"4",placeholder:"Technology stack and tools to be used"})]})]}),_==="commercial"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Payment Terms"}),n.jsx("textarea",{name:"paymentTerms",className:"form-control",value:T.paymentTerms,onChange:W,rows:"3",placeholder:"Payment terms and conditions"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Delivery Terms"}),n.jsx("textarea",{name:"deliveryTerms",className:"form-control",value:T.deliveryTerms,onChange:W,rows:"3",placeholder:"Delivery terms and conditions"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Warranty Terms"}),n.jsx("textarea",{name:"warrantyTerms",className:"form-control",value:T.warrantyTerms,onChange:W,rows:"3",placeholder:"Warranty and support terms"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Internal Notes"}),n.jsx("textarea",{name:"internalNotes",className:"form-control",value:T.internalNotes,onChange:W,rows:"3",placeholder:"Internal notes (not visible to client)"})]})]}),n.jsx("div",{className:"row mt-4",children:n.jsxs("div",{className:"col-12 d-flex justify-content-end gap-2",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),l(null),M()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Proposal":"Create Proposal"})]})})]})]})]})})}),c&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{className:"modal-title",children:["Proposal Details - ",c.proposalNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(null)})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Company:"})," ",c.leadId?.companyName]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Contact:"})," ",c.leadId?.contactPersonName]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Title:"})," ",c.title]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Value:"})," ",c.currency," ",c.proposalValue?.toLocaleString()]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Status:"}),n.jsx("span",{className:`badge bg-${de(c.status)} ms-2`,children:c.status})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Priority:"}),n.jsx("span",{className:`badge bg-${H(c.priority)} ms-2`,children:c.priority})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Description:"}),n.jsx("p",{children:c.description})]}),c.businessObjective&&n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Business Objective:"}),n.jsx("p",{children:c.businessObjective})]}),c.proposedSolution&&n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Proposed Solution:"}),n.jsx("p",{children:c.proposedSolution})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(null),children:"Close"})})]})})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Proposals"})}),n.jsx("div",{className:"card-body p-0",children:n.jsx("div",{children:n.jsxs("table",{className:"table table-sm table-bordered mb-2 mt-2",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx("input",{type:"checkbox",checked:u.length===re.length&&re.length>0,onChange:Y})}),n.jsx("th",{children:"Proposal #"}),n.jsx("th",{children:"Company"}),n.jsx("th",{children:"Title"}),n.jsx("th",{children:"Value"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:re.length>0?re.map(se=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:u.includes(se._id),onChange:()=>V(se._id)})}),n.jsx("td",{children:n.jsx("strong",{children:se.proposalNumber})}),n.jsx("td",{children:se.leadId?.companyName||"N/A"}),n.jsx("td",{children:se.title}),n.jsxs("td",{children:[se.currency," ",se.proposalValue?.toLocaleString()]}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${de(se.status)}`,children:se.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${H(se.priority)}`,children:se.priority})}),n.jsx("td",{children:new Date(se.createdAt).toLocaleDateString()}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group btn-group-sm",children:[n.jsx("button",{className:"btn btn-outline-primary",onClick:()=>ne(se),title:"View Details",children:n.jsx("i",{className:"fas fa-eye"})}),n.jsx("button",{className:"btn btn-outline-info",onClick:()=>P(se),title:"Print",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{className:"btn btn-outline-warning",onClick:()=>ee(se),title:"Edit",children:n.jsx("i",{className:"fas fa-edit"})}),se.status==="Draft"&&n.jsx("button",{className:"btn btn-outline-success",onClick:()=>J(se._id),title:"Submit",children:n.jsx("i",{className:"fas fa-paper-plane"})}),n.jsx("button",{className:"btn btn-outline-danger",onClick:()=>ie(se._id),title:"Delete",children:n.jsx("i",{className:"fas fa-trash"})})]})})]},se._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center py-4",children:e.length===0?"No proposals available":"No proposals match your search criteria"})})})]})})})]})]})}const eBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({name:"",description:""}),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{v()},[]);const v=async()=>{a(!0);try{const k=await(await fetch(`/api/crm/sources?companyId=${f}&financialYear=${p}`)).json();t(k),i("")}catch{i("Failed to load sources")}finally{a(!1)}},g=()=>{d(null),h({name:"",description:""}),l(!0)},b=w=>{d(w),h({name:w.name,description:w.description}),l(!0)},y=async w=>{w.preventDefault();try{const k=c?`/api/crm/sources/${c._id}`:"/api/crm/sources";(await fetch(k,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:f,financialYear:p})})).ok?(await v(),l(!1),i("")):i("Failed to save source")}catch{i("Failed to save source")}},S=async w=>{if(window.confirm("Are you sure you want to delete this source?"))try{(await fetch(`/api/crm/sources/${w}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete source")}catch{i("Failed to delete source")}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Sources Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:g,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Source"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(w=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:w.name}),n.jsx("td",{children:w.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${w.isActive?"bg-success":"bg-secondary"}`,children:w.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(w.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(w),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(w._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},w._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Source":"Add Source"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Source Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.name,onChange:w=>h({...u,name:w.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:w=>h({...u,description:w.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},tBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({reason:"",category:"",description:""}),f=["Price","Competition","Timeline","Budget","Feature","Service","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");j.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const _=await(await fetch(`/api/crm/lost-reasons?companyId=${p}&financialYear=${v}`)).json();t(_),i("")}catch{i("Failed to load lost reasons")}finally{a(!1)}},b=()=>{d(null),h({reason:"",category:"",description:""}),l(!0)},y=C=>{d(C),h({reason:C.reason,category:C.category,description:C.description}),l(!0)},S=async C=>{C.preventDefault();try{const _=c?`/api/crm/lost-reasons/${c._id}`:"/api/crm/lost-reasons";(await fetch(_,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save lost reason")}catch{i("Failed to save lost reason")}},w=async C=>{if(window.confirm("Are you sure you want to delete this lost reason?"))try{(await fetch(`/api/crm/lost-reasons/${C}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete lost reason")}catch{i("Failed to delete lost reason")}},k=C=>({Price:"bg-danger",Competition:"bg-warning",Timeline:"bg-info",Budget:"bg-danger",Feature:"bg-primary",Service:"bg-secondary",Other:"bg-dark"})[C]||"bg-secondary";return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Lost Reasons Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:b,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Lost Reason"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Reason"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:C.reason}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k(C.category)}`,children:C.category})}),n.jsx("td",{children:C.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${C.isActive?"bg-success":"bg-secondary"}`,children:C.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(C.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(C),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(C._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},C._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Lost Reason":"Add Lost Reason"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Lost Reason"}),n.jsx("input",{type:"text",className:"form-control",value:u.reason,onChange:C=>h({...u,reason:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:u.category,onChange:C=>h({...u,category:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),f.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:C=>h({...u,description:C.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},rBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({stageName:"",description:"",probability:0,color:"#007bff"}),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{v()},[]);const v=async()=>{a(!0);try{const C=await(await fetch(`/api/crm/contact-stages?companyId=${f}&financialYear=${p}`)).json();t(C.sort((_,E)=>_.order-E.order)),i("")}catch{i("Failed to load contact stages")}finally{a(!1)}},g=()=>{d(null),h({stageName:"",description:"",probability:0,color:"#007bff"}),l(!0)},b=k=>{d(k),h({stageName:k.stageName,description:k.description,probability:k.probability,color:k.color}),l(!0)},y=async k=>{k.preventDefault();try{const C=c?`/api/crm/contact-stages/${c._id}`:"/api/crm/contact-stages";(await fetch(C,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:f,financialYear:p,order:c?c.order:e.length+1})})).ok?(await v(),l(!1),i("")):i("Failed to save contact stage")}catch{i("Failed to save contact stage")}},S=async k=>{if(window.confirm("Are you sure you want to delete this contact stage?"))try{(await fetch(`/api/crm/contact-stages/${k}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete contact stage")}catch{i("Failed to delete contact stage")}},w=async(k,C)=>{try{(await fetch(`/api/crm/contact-stages/${k}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:C})})).ok?await v():i("Failed to reorder contact stage")}catch{i("Failed to reorder contact stage")}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Contact Stages Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:g,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Contact Stage"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order"}),n.jsx("th",{children:"Stage Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Probability %"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{className:"me-2",children:k.order}),n.jsxs("div",{className:"btn-group-vertical btn-group-sm",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"up"),disabled:C===0,children:n.jsx("i",{className:"fas fa-chevron-up"})}),n.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"down"),disabled:C===e.length-1,children:n.jsx("i",{className:"fas fa-chevron-down"})})]})]})}),n.jsx("td",{children:n.jsx("span",{className:"badge text-white",style:{backgroundColor:k.color},children:k.stageName})}),n.jsx("td",{children:k.description}),n.jsxs("td",{children:[k.probability,"%"]}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k.isActive?"bg-success":"bg-secondary"}`,children:k.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(k.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(k),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(k._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},k._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Contact Stage":"Add Contact Stage"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Stage Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.stageName,onChange:k=>h({...u,stageName:k.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:k=>h({...u,description:k.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Probability (%)"}),n.jsx("input",{type:"number",className:"form-control",min:"0",max:"100",value:u.probability,onChange:k=>h({...u,probability:Number(k.target.value)}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Color"}),n.jsx("input",{type:"color",className:"form-control form-control-color",value:u.color,onChange:k=>h({...u,color:k.target.value})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},aBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({industryName:"",category:"",description:""}),f=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Real Estate","Transportation","Energy","Media","Hospitality","Construction","Agriculture","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");j.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const _=await(await fetch(`/api/crm/industries?companyId=${p}&financialYear=${v}`)).json();t(_),i("")}catch{i("Failed to load industries")}finally{a(!1)}},b=()=>{d(null),h({industryName:"",category:"",description:""}),l(!0)},y=C=>{d(C),h({industryName:C.industryName,category:C.category,description:C.description}),l(!0)},S=async C=>{C.preventDefault();try{const _=c?`/api/crm/industries/${c._id}`:"/api/crm/industries";(await fetch(_,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save industry")}catch{i("Failed to save industry")}},w=async C=>{if(window.confirm("Are you sure you want to delete this industry?"))try{(await fetch(`/api/crm/industries/${C}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete industry")}catch{i("Failed to delete industry")}},k=C=>({Technology:"bg-primary",Healthcare:"bg-success",Finance:"bg-warning",Manufacturing:"bg-info",Retail:"bg-secondary",Education:"bg-primary","Real Estate":"bg-success",Transportation:"bg-info",Energy:"bg-warning",Media:"bg-secondary",Hospitality:"bg-primary",Construction:"bg-info",Agriculture:"bg-success",Other:"bg-dark"})[C]||"bg-secondary";return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Industry Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:b,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Industry"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Industry Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:C.industryName}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k(C.category)}`,children:C.category})}),n.jsx("td",{children:C.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${C.isActive?"bg-success":"bg-secondary"}`,children:C.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(C.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(C),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(C._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},C._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Industry":"Add Industry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Industry Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.industryName,onChange:C=>h({...u,industryName:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:u.category,onChange:C=>h({...u,category:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),f.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:C=>h({...u,description:C.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},nBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({callType:"",purpose:"",outcome:"",description:""}),f=["Inbound","Outbound","Missed","Voicemail"],p=["Sales","Support","Follow-up","Demo","Meeting","Consultation","Other"],v=["Successful","No Answer","Busy","Follow-up Required","Completed","Cancelled","Rescheduled"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");j.useEffect(()=>{y()},[]);const y=async()=>{a(!0);try{const F=await(await fetch(`/api/crm/calls?companyId=${g}&financialYear=${b}`)).json();t(F),i("")}catch{i("Failed to load calls")}finally{a(!1)}},S=()=>{d(null),h({callType:"",purpose:"",outcome:"",description:""}),l(!0)},w=I=>{d(I),h({callType:I.callType,purpose:I.purpose,outcome:I.outcome,description:I.description}),l(!0)},k=async I=>{I.preventDefault();try{const F=c?`/api/crm/calls/${c._id}`:"/api/crm/calls";(await fetch(F,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:g,financialYear:b})})).ok?(await y(),l(!1),i("")):i("Failed to save call")}catch{i("Failed to save call")}},C=async I=>{if(window.confirm("Are you sure you want to delete this call setting?"))try{(await fetch(`/api/crm/calls/${I}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete call")}catch{i("Failed to delete call")}},_=I=>{switch(I){case"Inbound":return"fas fa-phone-alt text-success";case"Outbound":return"fas fa-phone text-primary";case"Missed":return"fas fa-phone-slash text-danger";case"Voicemail":return"fas fa-voicemail text-warning";default:return"fas fa-phone"}},E=I=>{switch(I){case"Successful":case"Completed":return"bg-success";case"Follow-up Required":case"Rescheduled":return"bg-warning";case"No Answer":case"Busy":case"Cancelled":return"bg-danger";default:return"bg-secondary"}},T=I=>{switch(I){case"Sales":return"bg-success";case"Support":return"bg-info";case"Follow-up":return"bg-warning";case"Demo":return"bg-primary";case"Meeting":return"bg-secondary";default:return"bg-dark"}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-phone me-2"}),"Call Settings Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:S,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Call Setting"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Call Type"}),n.jsx("th",{children:"Purpose"}),n.jsx("th",{children:"Outcome"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(I=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:_(I.callType)}),n.jsx("span",{className:"ms-2",children:I.callType})]})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${T(I.purpose)}`,children:I.purpose})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${E(I.outcome)}`,children:I.outcome})}),n.jsx("td",{children:I.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I.isActive?"bg-success":"bg-secondary"}`,children:I.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(I.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(I),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(I._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},I._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Call Setting":"Add Call Setting"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Call Type"}),n.jsxs("select",{className:"form-select",value:u.callType,onChange:I=>h({...u,callType:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Call Type"}),f.map(I=>n.jsx("option",{value:I,children:I},I))]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Purpose"}),n.jsxs("select",{className:"form-select",value:u.purpose,onChange:I=>h({...u,purpose:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Purpose"}),p.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Outcome"}),n.jsxs("select",{className:"form-select",value:u.outcome,onChange:I=>h({...u,outcome:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Outcome"}),v.map(I=>n.jsx("option",{value:I,children:I},I))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:I=>h({...u,description:I.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},sBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),v=["Pending","In Progress","Completed","Delayed","Cancelled"],g=["Low","Medium","High","Critical"],b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");j.useEffect(()=>{S(),w()},[]);const S=async()=>{i(!0);try{const P=await(await fetch(`/api/milestones?companyId=${b}&financialYear=${y}`)).json();t(P),l("")}catch{l("Failed to load milestones")}finally{i(!1)}},w=async()=>{try{const P=await(await fetch(`/api/projects?companyId=${b}&financialYear=${y}`)).json();a(P)}catch{console.error("Failed to load projects")}},k=()=>{h(null),p({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),d(!0)},C=A=>{h(A),p({milestoneName:A.milestoneName,description:A.description,projectId:A.projectId._id||A.projectId,dueDate:A.dueDate?A.dueDate.split("T")[0]:"",status:A.status,priority:A.priority,deliverables:A.deliverables.join(`
`),budget:A.budget,completionPercentage:A.completionPercentage}),d(!0)},_=async A=>{A.preventDefault();try{const P=u?`/api/milestones/${u._id}`:"/api/milestones",q=u?"PUT":"POST",V={...f,deliverables:f.deliverables.split(`
`).filter(B=>B.trim()),companyId:b,financialYear:y};(await fetch(P,{method:q,headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok?(await S(),d(!1),l("")):l("Failed to save milestone")}catch{l("Failed to save milestone")}},E=async A=>{if(window.confirm("Are you sure you want to delete this milestone?"))try{(await fetch(`/api/milestones/${A}`,{method:"DELETE"})).ok?(await S(),l("")):l("Failed to delete milestone")}catch{l("Failed to delete milestone")}},T=A=>({Pending:"bg-secondary","In Progress":"bg-primary",Completed:"bg-success",Delayed:"bg-warning",Cancelled:"bg-danger"})[A]||"bg-secondary",I=A=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[A]||"bg-secondary",F=A=>A?new Date(A)<new Date:!1;return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-flag-checkered me-2"}),"Milestones Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:k,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Milestone"]})]}),n.jsxs("div",{className:"card-body",children:[o&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Milestone Name"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Progress"}),n.jsx("th",{children:"Due Date"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Deliverables"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(A=>n.jsxs("tr",{className:F(A.dueDate)&&A.status!=="Completed"?"table-danger":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:A.milestoneName}),A.description&&n.jsxs("div",{className:"text-muted small",children:[A.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:A.projectId?.projectName||"No Project"}),n.jsx("td",{children:n.jsx("span",{className:`badge ${T(A.status)}`,children:A.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I(A.priority)}`,children:A.priority})}),n.jsx("td",{children:n.jsx("div",{className:"progress",style:{height:"20px",width:"100px"},children:n.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${A.completionPercentage}%`},children:[A.completionPercentage,"%"]})})}),n.jsx("td",{children:A.dueDate?n.jsxs("div",{children:[new Date(A.dueDate).toLocaleDateString(),F(A.dueDate)&&A.status!=="Completed"&&n.jsxs("div",{className:"text-danger small",children:[n.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),n.jsx("td",{children:A.budget?`$${Number(A.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[A.deliverables?.length||0," items"]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>C(A),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(A._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),c&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:u?"Edit Milestone":"Add Milestone"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),n.jsxs("form",{onSubmit:_,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Milestone Name"}),n.jsx("input",{type:"text",className:"form-control",value:f.milestoneName,onChange:A=>p({...f,milestoneName:A.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:f.projectId,onChange:A=>p({...f,projectId:A.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(A=>n.jsx("option",{value:A._id,children:A.projectName},A._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:f.description,onChange:A=>p({...f,description:A.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:f.status,onChange:A=>p({...f,status:A.target.value}),required:!0,children:v.map(A=>n.jsx("option",{value:A,children:A},A))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:f.priority,onChange:A=>p({...f,priority:A.target.value}),required:!0,children:g.map(A=>n.jsx("option",{value:A,children:A},A))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Due Date"}),n.jsx("input",{type:"date",className:"form-control",value:f.dueDate,onChange:A=>p({...f,dueDate:A.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:f.budget,onChange:A=>p({...f,budget:A.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Completion Percentage"}),n.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:f.completionPercentage,onChange:A=>p({...f,completionPercentage:A.target.value})}),n.jsxs("div",{className:"text-center",children:[f.completionPercentage,"%"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Deliverables (one per line)"}),n.jsx("textarea",{className:"form-control",rows:"4",value:f.deliverables,onChange:A=>p({...f,deliverables:A.target.value}),placeholder:`Design mockups
Database schema
API documentation`})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},iBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[u,h]=j.useState(!1),[f,p]=j.useState(null),[v,g]=j.useState({taskName:"",description:"",projectId:"",assignedTo:[],status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),b=["To Do","In Progress","Review","Testing","Done","Blocked"],y=["Low","Medium","High","Critical"],S=["Development","Testing","Design","Documentation","Bug Fix","Research","Other"],w=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear");j.useEffect(()=>{C(),_()},[]);const C=async()=>{l(!0);try{const Z=await(await fetch(`/api/tasks?companyId=${w}&financialYear=${k}`)).json();t(Z),d("")}catch{d("Failed to load tasks")}finally{l(!1)}},_=async()=>{try{const Z=await(await fetch(`/api/projects?companyId=${w}&financialYear=${k}`)).json();console.log("Projects loaded:",Z),a(Z)}catch{console.error("Failed to load projects")}},E=async R=>{if(!R){i([]);return}try{const J=await(await fetch(`/api/tasks/project/${R}/team-members`)).json();i(J||[])}catch{console.error("Failed to load team members"),i([])}},T=()=>{p(null),g({taskName:"",description:"",projectId:"",assignedTo:[],status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),i([]),h(!0)},I=R=>{p(R),g({taskName:R.taskName,description:R.description,projectId:R.projectId._id||R.projectId,assignedTo:R.assignedTo.map(Z=>Z._id||Z),status:R.status,priority:R.priority,dueDate:R.dueDate?R.dueDate.split("T")[0]:"",estimatedHours:R.estimatedHours,actualHours:R.actualHours,category:R.category}),(R.projectId._id||R.projectId)&&E(R.projectId._id||R.projectId),h(!0)},F=R=>{g({...v,projectId:R,assignedTo:[]}),E(R)},A=R=>{const Z=[...v.assignedTo],J=Z.indexOf(R);J>-1?Z.splice(J,1):Z.push(R),g({...v,assignedTo:Z})},P=async R=>{R.preventDefault();try{const Z=f?`/api/tasks/${f._id}`:"/api/tasks";(await fetch(Z,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,companyId:w,financialYear:k})})).ok?(await C(),h(!1),d("")):d("Failed to save task")}catch{d("Failed to save task")}},q=async R=>{if(window.confirm("Are you sure you want to delete this task?"))try{(await fetch(`/api/tasks/${R}`,{method:"DELETE"})).ok?(await C(),d("")):d("Failed to delete task")}catch{d("Failed to delete task")}},V=R=>({"To Do":"bg-secondary","In Progress":"bg-primary",Review:"bg-warning",Testing:"bg-info",Done:"bg-success",Blocked:"bg-danger"})[R]||"bg-secondary",Y=R=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[R]||"bg-secondary",B=R=>R?new Date(R)<new Date:!1,Q=R=>!R||R.length===0?"Not Assigned":R.map(Z=>`${Z.firstName} ${Z.lastName}`).join(", ");return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-tasks me-2"}),"Tasks Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:T,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Task"]})]}),n.jsxs("div",{className:"card-body",children:[c&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Task Name"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Assigned To"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Due Date"}),n.jsx("th",{children:"Hours"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(R=>n.jsxs("tr",{className:B(R.dueDate)&&R.status!=="Done"?"table-danger":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:R.taskName}),R.description&&n.jsxs("div",{className:"text-muted small",children:[R.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:R.projectId?.projectName||"No Project"}),n.jsx("td",{children:n.jsx("div",{className:"small",children:Q(R.assignedTo)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${V(R.status)}`,children:R.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${Y(R.priority)}`,children:R.priority})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:R.category})}),n.jsx("td",{children:R.dueDate?n.jsxs("div",{children:[new Date(R.dueDate).toLocaleDateString(),B(R.dueDate)&&R.status!=="Done"&&n.jsxs("div",{className:"text-danger small",children:[n.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),n.jsx("td",{children:n.jsxs("div",{className:"small",children:[n.jsxs("div",{children:["Est: ",R.estimatedHours||0,"h"]}),n.jsxs("div",{children:["Act: ",R.actualHours||0,"h"]})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>I(R),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>q(R._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]})})]})]})})}),u&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:f?"Edit Task":"Add Task"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),n.jsxs("form",{onSubmit:P,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Task Name"}),n.jsx("input",{type:"text",className:"form-control",value:v.taskName,onChange:R=>g({...v,taskName:R.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:v.projectId,onChange:R=>F(R.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(R=>n.jsx("option",{value:R._id,children:R.projectName},R._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:v.description,onChange:R=>g({...v,description:R.target.value})})]}),v.projectId&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Assign To Team Members"}),n.jsx("div",{className:"border rounded p-3",style:{maxHeight:"200px",overflowY:"auto"},children:s.length===0?n.jsx("p",{className:"text-muted mb-0",children:"No team members found for this project"}):s.map(R=>n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:`member-${R._id}`,checked:v.assignedTo.includes(R._id),onChange:()=>A(R._id)}),n.jsxs("label",{className:"form-check-label d-flex align-items-center",htmlFor:`member-${R._id}`,children:[R.profilePhoto&&n.jsx("img",{src:R.profilePhoto,alt:"",className:"rounded-circle me-2",width:"24",height:"24"}),n.jsxs("div",{children:[n.jsxs("div",{children:[R.firstName," ",R.lastName]}),n.jsxs("small",{className:"text-muted",children:[R.department,"  ",R.employeeId]})]})]})]},R._id))}),v.assignedTo.length>0&&n.jsxs("small",{className:"text-info",children:[v.assignedTo.length," member(s) selected"]})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:v.status,onChange:R=>g({...v,status:R.target.value}),required:!0,children:b.map(R=>n.jsx("option",{value:R,children:R},R))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:v.priority,onChange:R=>g({...v,priority:R.target.value}),required:!0,children:y.map(R=>n.jsx("option",{value:R,children:R},R))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:v.category,onChange:R=>g({...v,category:R.target.value}),children:[n.jsx("option",{value:"",children:"Select Category"}),S.map(R=>n.jsx("option",{value:R,children:R},R))]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Due Date"}),n.jsx("input",{type:"date",className:"form-control",value:v.dueDate,onChange:R=>g({...v,dueDate:R.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Estimated Hours"}),n.jsx("input",{type:"number",className:"form-control",value:v.estimatedHours,onChange:R=>g({...v,estimatedHours:R.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Actual Hours"}),n.jsx("input",{type:"number",className:"form-control",value:v.actualHours,onChange:R=>g({...v,actualHours:R.target.value})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:f?"Update":"Create"})]})]})]})})})]})},oBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[u,h]=j.useState(!1),[f,p]=j.useState(null),[v,g]=j.useState(!1),[b,y]=j.useState(0),[S,w]=j.useState({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear");j.useEffect(()=>{_(),E(),T()},[]),j.useEffect(()=>{let R=null;return v?R=setInterval(()=>{y(Z=>Z+1)},1e3):!v&&b!==0&&clearInterval(R),()=>clearInterval(R)},[v,b]);const _=async()=>{l(!0);try{const Z=await(await fetch(`/api/time-entries?companyId=${k}&financialYear=${C}`)).json();t(Z),d("")}catch{d("Failed to load time entries")}finally{l(!1)}},E=async()=>{try{const Z=await(await fetch(`/api/projects?companyId=${k}&financialYear=${C}`)).json();a(Z)}catch{console.error("Failed to load projects")}},T=async()=>{try{const Z=await(await fetch(`/api/tasks?companyId=${k}&financialYear=${C}`)).json();i(Z)}catch{console.error("Failed to load tasks")}},I=()=>{g(!0),y(0);const R=new Date;w({...S,startTime:R.toTimeString().slice(0,5),date:R.toISOString().split("T")[0]})},F=()=>{g(!1);const R=new Date,Z=(b/3600).toFixed(2);w({...S,endTime:R.toTimeString().slice(0,5),hours:Z}),h(!0)},A=R=>{const Z=Math.floor(R/3600),J=Math.floor(R%3600/60),ie=R%60;return`${Z.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`},P=()=>{p(null),w({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),h(!0)},q=R=>{p(R),w({projectId:R.projectId._id||R.projectId,taskId:R.taskId?._id||R.taskId||"",description:R.description,startTime:R.startTime,endTime:R.endTime,hours:R.hours,date:R.date?R.date.split("T")[0]:"",billable:R.billable}),h(!0)},V=async R=>{R.preventDefault();try{const Z=f?`/api/time-entries/${f._id}`:"/api/time-entries";(await fetch(Z,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...S,companyId:k,financialYear:C})})).ok?(await _(),h(!1),d(""),y(0)):d("Failed to save time entry")}catch{d("Failed to save time entry")}},Y=async R=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{(await fetch(`/api/time-entries/${R}`,{method:"DELETE"})).ok?(await _(),d("")):d("Failed to delete time entry")}catch{d("Failed to delete time entry")}},B=()=>e.reduce((R,Z)=>R+parseFloat(Z.hours||0),0).toFixed(2),Q=()=>e.filter(R=>R.billable).reduce((R,Z)=>R+parseFloat(Z.hours||0),0).toFixed(2);return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-12",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body text-center",children:[n.jsx("h3",{className:"display-4 mb-3",children:A(b)}),n.jsxs("div",{className:"btn-group",children:[v?n.jsxs("button",{className:"btn btn-danger btn-lg",onClick:F,children:[n.jsx("i",{className:"fas fa-stop me-2"}),"Stop Timer"]}):n.jsxs("button",{className:"btn btn-success btn-lg",onClick:I,children:[n.jsx("i",{className:"fas fa-play me-2"}),"Start Timer"]}),n.jsxs("button",{className:"btn btn-secondary btn-lg",onClick:()=>{y(0),g(!1)},children:[n.jsx("i",{className:"fas fa-redo me-2"}),"Reset"]})]})]})})})}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-primary text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Total Hours"}),n.jsxs("h3",{children:[B(),"h"]})]})})}),n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-success text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Billable Hours"}),n.jsxs("h3",{children:[Q(),"h"]})]})})}),n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-info text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Entries"}),n.jsx("h3",{children:e.length})]})})})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-clock me-2"}),"Time Tracking"]}),n.jsxs("button",{className:"btn btn-primary",onClick:P,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Entry"]})]}),n.jsxs("div",{className:"card-body",children:[c&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Task"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Start Time"}),n.jsx("th",{children:"End Time"}),n.jsx("th",{children:"Hours"}),n.jsx("th",{children:"Billable"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(R=>n.jsxs("tr",{children:[n.jsx("td",{children:new Date(R.date).toLocaleDateString()}),n.jsx("td",{children:R.projectId?.projectName||"No Project"}),n.jsx("td",{children:R.taskId?.taskName||"No Task"}),n.jsx("td",{children:R.description}),n.jsx("td",{children:R.startTime}),n.jsx("td",{children:R.endTime}),n.jsxs("td",{className:"fw-bold",children:[R.hours,"h"]}),n.jsx("td",{children:n.jsx("span",{className:`badge ${R.billable?"bg-success":"bg-secondary"}`,children:R.billable?"Billable":"Non-billable"})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>q(R),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Y(R._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]})})]})]})})}),u&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:f?"Edit Time Entry":"Add Time Entry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),n.jsxs("form",{onSubmit:V,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:S.projectId,onChange:R=>w({...S,projectId:R.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(R=>n.jsx("option",{value:R._id,children:R.projectName},R._id))]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Task (Optional)"}),n.jsxs("select",{className:"form-select",value:S.taskId,onChange:R=>w({...S,taskId:R.target.value}),children:[n.jsx("option",{value:"",children:"Select Task"}),s.filter(R=>R.projectId._id===S.projectId).map(R=>n.jsx("option",{value:R._id,children:R.taskName},R._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:S.description,onChange:R=>w({...S,description:R.target.value}),required:!0})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Date"}),n.jsx("input",{type:"date",className:"form-control",value:S.date,onChange:R=>w({...S,date:R.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Time"}),n.jsx("input",{type:"time",className:"form-control",value:S.startTime,onChange:R=>w({...S,startTime:R.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Time"}),n.jsx("input",{type:"time",className:"form-control",value:S.endTime,onChange:R=>w({...S,endTime:R.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Hours"}),n.jsx("input",{type:"number",step:"0.25",className:"form-control",value:S.hours,onChange:R=>w({...S,hours:R.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"form-check mt-4",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:S.billable,onChange:R=>w({...S,billable:R.target.checked})}),n.jsx("label",{className:"form-check-label",children:"Billable"})]})})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:f?"Update":"Create"})]})]})]})})})]})},lBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState(!1),[v,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(null),[_,E]=j.useState({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:[],teamMembers:[],technologies:"",category:""}),T=["Planning","In Progress","Testing","Completed","On Hold","Cancelled"],I=["Low","Medium","High","Critical"],F=["Web Development","Mobile App","Desktop App","API Development","Data Analysis","Other"],A=localStorage.getItem("selectedCompanyId"),P=localStorage.getItem("financialYear");j.useEffect(()=>{q()},[]);const q=async()=>{a(!0);try{const K=await(await fetch(`/api/projects?companyId=${A}&financialYear=${P}`)).json();t(K),i("")}catch{i("Failed to load projects")}finally{a(!1)}},V=async()=>{try{const te=localStorage.getItem("selectedCompanyId"),K=localStorage.getItem("financialYear"),de=await Ie.get("/api/faculties",{params:{companyId:te,financialYear:K}});h(de.data),console.log("Fetched faculties:",de.data)}catch(te){console.error("Error fetching faculties:",te)}};j.useEffect(()=>{V()},[]);const Y=u.filter(te=>`${te.firstName} ${te.lastName}`.toLowerCase().includes(b.toLowerCase())||te.email?.toLowerCase().includes(b.toLowerCase())||te.employeeId?.toLowerCase().includes(b.toLowerCase())),B=()=>{d(null),w([]),C(null),E({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:[],teamMembers:[],technologies:"",category:""}),l(!0)},Q=te=>{d(te);const K=te.projectManager||[];C(K.length>0?K[0]:null);const de=te.teamMembers||[];w(de),E({projectName:te.projectName,description:te.description,clientName:te.clientName,startDate:te.startDate?te.startDate.split("T")[0]:"",endDate:te.endDate?te.endDate.split("T")[0]:"",budget:te.budget,status:te.status,priority:te.priority,projectManager:K,teamMembers:de,technologies:Array.isArray(te.technologies)?te.technologies.join(", "):te.technologies||"",category:te.category}),l(!0)},R=te=>{g(te),y(""),p(!0)},Z=()=>{p(!1),g(""),y("")},J=te=>{const K={_id:te._id,firstName:te.firstName,lastName:te.lastName,email:te.email,employeeId:te.employeeId,department:te.department,profilePhoto:te.profilePhoto};C(K),E({..._,projectManager:[K]}),Z()},ie=te=>{if(!S.some(de=>de._id===te._id)){const de={_id:te._id,firstName:te.firstName,lastName:te.lastName,email:te.email,employeeId:te.employeeId,department:te.department,profilePhoto:te.profilePhoto},H=[...S,de];w(H),E({..._,teamMembers:H})}},M=te=>{const K=S.filter(de=>de._id!==te);w(K),E({..._,teamMembers:K})},z=()=>{C(null),E({..._,projectManager:[]})},ee=async te=>{te.preventDefault();try{const K=c?`/api/projects/${c._id}`:"/api/projects",de=c?"PUT":"POST",H={..._,technologies:_.technologies.split(",").map(be=>be.trim()).filter(be=>be),companyId:A,financialYear:P};console.log("Sending project data:",H),(await fetch(K,{method:de,headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).ok?(await q(),l(!1),w([]),C(null),i("")):i("Failed to save project")}catch{i("Failed to save project")}},ne=async te=>{if(window.confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects/${te}`,{method:"DELETE"})).ok?(await q(),i("")):i("Failed to delete project")}catch{i("Failed to delete project")}},W=te=>({Planning:"bg-info","In Progress":"bg-primary",Testing:"bg-warning",Completed:"bg-success","On Hold":"bg-secondary",Cancelled:"bg-danger"})[te]||"bg-secondary",re=te=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[te]||"bg-secondary",le=(te,K)=>{if(!te||!K)return 0;const de=new Date(te),H=new Date(K),se=new Date;if(se<de)return 0;if(se>H)return 100;const be=H-de,ue=se-de;return Math.round(ue/be*100)};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-project-diagram me-2"}),"Projects Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:B,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Project"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Project Name"}),n.jsx("th",{children:"Client"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Progress"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Start Date"}),n.jsx("th",{children:"End Date"}),n.jsx("th",{children:"Project Manager"}),n.jsx("th",{children:"Team Size"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(te=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:te.projectName}),te.category&&n.jsx("div",{className:"text-muted small",children:te.category})]})}),n.jsx("td",{children:te.clientName}),n.jsx("td",{children:n.jsx("span",{className:`badge ${W(te.status)}`,children:te.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${re(te.priority)}`,children:te.priority})}),n.jsx("td",{children:n.jsx("div",{className:"progress",style:{height:"20px"},children:n.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${le(te.startDate,te.endDate)}%`},children:[le(te.startDate,te.endDate),"%"]})})}),n.jsx("td",{children:te.budget?`$${Number(te.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:te.startDate?new Date(te.startDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:te.endDate?new Date(te.endDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:te.projectManager&&te.projectManager.length>0?`${te.projectManager[0].firstName} ${te.projectManager[0].lastName}`:"Not assigned"}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[te.teamMembers?te.teamMembers.length:0," members"]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Q(te),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>ne(te._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},te._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Project":"Add Project"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:ee,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project Name"}),n.jsx("input",{type:"text",className:"form-control",value:_.projectName,onChange:te=>E({..._,projectName:te.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Client Name"}),n.jsx("input",{type:"text",className:"form-control",value:_.clientName,onChange:te=>E({..._,clientName:te.target.value}),required:!0})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:_.description,onChange:te=>E({..._,description:te.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:_.status,onChange:te=>E({..._,status:te.target.value}),required:!0,children:T.map(te=>n.jsx("option",{value:te,children:te},te))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:_.priority,onChange:te=>E({..._,priority:te.target.value}),required:!0,children:I.map(te=>n.jsx("option",{value:te,children:te},te))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:_.category,onChange:te=>E({..._,category:te.target.value}),children:[n.jsx("option",{value:"",children:"Select Category"}),F.map(te=>n.jsx("option",{value:te,children:te},te))]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Date"}),n.jsx("input",{type:"date",className:"form-control",value:_.startDate,onChange:te=>E({..._,startDate:te.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Date"}),n.jsx("input",{type:"date",className:"form-control",value:_.endDate,onChange:te=>E({..._,endDate:te.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:_.budget,onChange:te=>E({..._,budget:te.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project Manager"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control",value:k?`${k.firstName} ${k.lastName}`:"",placeholder:"Select project manager"}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>R("manager"),children:n.jsx("i",{className:"fas fa-search"})})]}),k&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"d-flex align-items-center p-2 bg-light rounded",children:[n.jsx("div",{className:"me-2",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px",fontSize:"12px"},children:[k.firstName?.charAt(0),k.lastName?.charAt(0)]})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("strong",{children:[k.firstName," ",k.lastName]}),n.jsxs("div",{className:"text-muted small",children:[k.employeeId,"  ",k.department]})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:z,children:n.jsx("i",{className:"fas fa-times"})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Team Members"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control",value:S.length>0?`${S.length} members selected`:"",placeholder:"Select team members",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>R("team"),children:n.jsx("i",{className:"fas fa-search"})})]}),S.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("small",{className:"text-muted",children:"Selected team members:"}),n.jsx("div",{className:"row mt-2",children:S.map(te=>n.jsx("div",{className:"col-md-6 mb-2",children:n.jsxs("div",{className:"d-flex align-items-center p-2 bg-light rounded",children:[n.jsx("div",{className:"me-2",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px",fontSize:"12px"},children:[te.firstName?.charAt(0),te.lastName?.charAt(0)]})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("strong",{className:"small",children:[te.firstName," ",te.lastName]}),n.jsx("div",{className:"text-muted",style:{fontSize:"11px"},children:te.employeeId})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>M(te._id),children:n.jsx("i",{className:"fas fa-times"})})]})},te._id))})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Technologies (comma-separated)"}),n.jsx("input",{type:"text",className:"form-control",value:_.technologies,onChange:te=>E({..._,technologies:te.target.value}),placeholder:"React, Node.js, MongoDB"})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:["Select ",v==="manager"?"Project Manager":"Team Members"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:Z,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, or employee ID...",value:b,onChange:te=>y(te.target.value)})]})}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Y.length>0?n.jsx("div",{className:"list-group",children:Y.map(te=>n.jsxs("div",{className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center ${v==="team"&&S.some(K=>K._id===te._id)||v==="manager"&&k?._id===te._id?"active":""}`,onClick:()=>{v==="manager"?J(te):ie(te)},style:{cursor:"pointer"},children:[n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"me-3",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:[te.firstName?.charAt(0),te.lastName?.charAt(0)]})}),n.jsxs("div",{children:[n.jsxs("h6",{className:"mb-0",children:[te.firstName," ",te.lastName]}),n.jsxs("small",{className:"text-muted",children:[te.employeeId,"  ",te.email,"  ",te.department]})]})]}),(v==="team"&&S.some(K=>K._id===te._id)||v==="manager"&&k?._id===te._id)&&n.jsx("i",{className:"fas fa-check text-success"})]},te._id))}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:b?"No employees found matching your search.":"No employees available."})]})}),v==="team"&&S.length>0&&n.jsx("div",{className:"mt-3",children:n.jsxs("small",{className:"text-muted",children:["Selected: ",S.length," member(s)"]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Z,children:v==="team"?"Done":"Cancel"})})]})})})]})]})},cBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),f=["Email","Social Media","Google Ads","Facebook Ads","Content Marketing","Print","TV/Radio","Event","Influencer","SEO","Other"],p=["Draft","Scheduled","Active","Paused","Completed","Cancelled"],v=["Low","Medium","High","Critical"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");j.useEffect(()=>{y()},[]);const y=async()=>{a(!0);try{const P=await(await fetch(`/api/campaigns?companyId=${g}&financialYear=${b}`)).json();t(P),i("")}catch{i("Failed to load campaigns")}finally{a(!1)}},S=()=>{d(null),h({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),l(!0)},w=A=>{d(A),h({campaignName:A.campaignName,description:A.description,campaignType:A.campaignType,status:A.status,startDate:A.startDate?A.startDate.split("T")[0]:"",endDate:A.endDate?A.endDate.split("T")[0]:"",budget:A.budget,targetAudience:A.targetAudience,channels:A.channels.join(", "),objectives:A.objectives.join(`
`),expectedROI:A.expectedROI,actualROI:A.actualROI,leads:A.leads,conversions:A.conversions,clickThroughRate:A.clickThroughRate,openRate:A.openRate,assignedTo:A.assignedTo,priority:A.priority}),l(!0)},k=async A=>{A.preventDefault();try{const P=c?`/api/campaigns/${c._id}`:"/api/campaigns",q=c?"PUT":"POST",V={...u,channels:u.channels.split(",").map(B=>B.trim()).filter(B=>B),objectives:u.objectives.split(`
`).map(B=>B.trim()).filter(B=>B),companyId:g,financialYear:b};(await fetch(P,{method:q,headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok?(await y(),l(!1),i("")):i("Failed to save campaign")}catch{i("Failed to save campaign")}},C=async A=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{(await fetch(`/api/campaigns/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete campaign")}catch{i("Failed to delete campaign")}},_=A=>({Draft:"bg-secondary",Scheduled:"bg-info",Active:"bg-success",Paused:"bg-warning",Completed:"bg-primary",Cancelled:"bg-danger"})[A]||"bg-secondary",E=A=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[A]||"bg-secondary",T=(A,P)=>!A||!P||P===0?0:((A-P)/P*100).toFixed(2),I=(A,P)=>!A||!P||P===0?0:(A/P*100).toFixed(2),F=(A,P)=>{const q=new Date,V=new Date(A),Y=new Date(P);return q>=V&&q<=Y};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-bullhorn me-2"}),"Campaign Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:S,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Campaign"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Campaign Name"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Period"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Leads"}),n.jsx("th",{children:"Conversions"}),n.jsx("th",{children:"ROI"}),n.jsx("th",{children:"Assigned To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(A=>n.jsxs("tr",{className:F(A.startDate,A.endDate)&&A.status==="Active"?"table-success":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:A.campaignName}),A.description&&n.jsxs("div",{className:"text-muted small",children:[A.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:A.campaignType})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${_(A.status)}`,children:A.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${E(A.priority)}`,children:A.priority})}),n.jsx("td",{children:n.jsxs("div",{className:"small",children:[n.jsxs("div",{children:["Start: ",A.startDate?new Date(A.startDate).toLocaleDateString():"N/A"]}),n.jsxs("div",{children:["End: ",A.endDate?new Date(A.endDate).toLocaleDateString():"N/A"]})]})}),n.jsx("td",{children:A.budget?`$${Number(A.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:A.leads||0})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("span",{className:"badge bg-success",children:A.conversions||0}),n.jsxs("div",{className:"small text-muted",children:[I(A.conversions,A.leads),"% rate"]})]})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsxs("div",{className:"fw-bold",children:[T(A.actualROI,A.budget),"%"]}),n.jsxs("div",{className:"small text-muted",children:["$",A.actualROI?Number(A.actualROI).toLocaleString():0]})]})}),n.jsx("td",{children:A.assignedTo}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(A),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(A._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Campaign":"Add Campaign"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Campaign Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.campaignName,onChange:A=>h({...u,campaignName:A.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Campaign Type"}),n.jsx("select",{className:"form-select",value:u.campaignType,onChange:A=>h({...u,campaignType:A.target.value}),required:!0,children:f.map(A=>n.jsx("option",{value:A,children:A},A))})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:A=>h({...u,description:A.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:u.status,onChange:A=>h({...u,status:A.target.value}),required:!0,children:p.map(A=>n.jsx("option",{value:A,children:A},A))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:u.priority,onChange:A=>h({...u,priority:A.target.value}),required:!0,children:v.map(A=>n.jsx("option",{value:A,children:A},A))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Date"}),n.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:A=>h({...u,startDate:A.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Date"}),n.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:A=>h({...u,endDate:A.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:A=>h({...u,budget:A.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Expected ROI ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.expectedROI,onChange:A=>h({...u,expectedROI:A.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Actual ROI ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.actualROI,onChange:A=>h({...u,actualROI:A.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Leads Generated"}),n.jsx("input",{type:"number",className:"form-control",value:u.leads,onChange:A=>h({...u,leads:A.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Conversions"}),n.jsx("input",{type:"number",className:"form-control",value:u.conversions,onChange:A=>h({...u,conversions:A.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Click Through Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.clickThroughRate,onChange:A=>h({...u,clickThroughRate:A.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Open Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.openRate,onChange:A=>h({...u,openRate:A.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Target Audience"}),n.jsx("input",{type:"text",className:"form-control",value:u.targetAudience,onChange:A=>h({...u,targetAudience:A.target.value}),placeholder:"Demographics, interests, location, etc."})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Assigned To"}),n.jsx("input",{type:"text",className:"form-control",value:u.assignedTo,onChange:A=>h({...u,assignedTo:A.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Channels (comma-separated)"}),n.jsx("input",{type:"text",className:"form-control",value:u.channels,onChange:A=>h({...u,channels:A.target.value}),placeholder:"Email, Facebook, Google Ads, Instagram"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Objectives (one per line)"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.objectives,onChange:A=>h({...u,objectives:A.target.value}),placeholder:`Increase brand awareness
Generate 100 leads
Achieve 5% conversion rate`})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},dBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState({totalCampaigns:0,activeCampaigns:0,totalLeads:0,totalConversions:0,averageConversionRate:0,totalBudget:0,totalROI:0,topPerformingCampaign:null}),[o,l]=j.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear");j.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const g=await(await fetch(`/api/campaigns?companyId=${c}&financialYear=${d}`)).json();t(g);const y=await(await fetch(`/api/leads?companyId=${c}&financialYear=${d}`)).json();a(y),h(g,y)}catch(v){console.error("Failed to load analytics data:",v)}finally{l(!1)}},h=(v,g)=>{const b=v.length,y=v.filter(T=>T.status==="Active").length,S=g.length,w=g.filter(T=>T.leadStatus==="Closed Won").length,k=S>0?(w/S*100).toFixed(2):0,C=v.reduce((T,I)=>T+(I.budget||0),0),_=v.reduce((T,I)=>T+(I.actualROI||0),0),E=v.reduce((T,I)=>{const F=I.leads>0?I.conversions/I.leads:0,A=T&&T.leads>0?T.conversions/T.leads:0;return F>A?I:T},null);i({totalCampaigns:b,activeCampaigns:y,totalLeads:S,totalConversions:w,averageConversionRate:k,totalBudget:C,totalROI:_,topPerformingCampaign:E})},f=v=>({Draft:"secondary",Scheduled:"info",Active:"success",Paused:"warning",Completed:"primary",Cancelled:"danger"})[v]||"secondary",p=(v,g)=>!v||!g||g===0?0:((v-g)/g*100).toFixed(2);return n.jsx("div",{className:"container-fluid py-4",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-chart-bar me-2"}),"Campaign Analytics"]})}),n.jsx("div",{className:"card-body",children:o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-primary text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total Campaigns"}),n.jsx("h3",{className:"mb-0",children:s.totalCampaigns}),n.jsxs("small",{children:[s.activeCampaigns," Active"]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-bullhorn fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-success text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total Leads"}),n.jsx("h3",{className:"mb-0",children:s.totalLeads}),n.jsxs("small",{children:[s.totalConversions," Conversions"]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-user-plus fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-warning text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Conversion Rate"}),n.jsxs("h3",{className:"mb-0",children:[s.averageConversionRate,"%"]}),n.jsx("small",{children:"Average across all campaigns"})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-percentage fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-info text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total ROI"}),n.jsxs("h3",{className:"mb-0",children:["$",s.totalROI.toLocaleString()]}),n.jsxs("small",{children:["Budget: $",s.totalBudget.toLocaleString()]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),s.topPerformingCampaign&&n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card border-success",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h5",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-trophy me-2"}),"Top Performing Campaign"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("strong",{children:"Campaign:"}),n.jsx("br",{}),s.topPerformingCampaign.campaignName]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Type:"}),n.jsx("br",{}),s.topPerformingCampaign.campaignType]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Leads:"}),n.jsx("br",{}),s.topPerformingCampaign.leads||0]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Conversions:"}),n.jsx("br",{}),s.topPerformingCampaign.conversions||0]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("strong",{children:"Conversion Rate:"}),n.jsx("br",{}),s.topPerformingCampaign.leads>0?(s.topPerformingCampaign.conversions/s.topPerformingCampaign.leads*100).toFixed(2):0,"%"]})]})})]})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Campaign Performance Details"})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Campaign Name"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Leads"}),n.jsx("th",{children:"Conversions"}),n.jsx("th",{children:"Conversion Rate"}),n.jsx("th",{children:"ROI"}),n.jsx("th",{children:"ROI %"})]})}),n.jsx("tbody",{children:e.map(v=>{const g=v.leads>0?(v.conversions/v.leads*100).toFixed(2):0;return n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:v.campaignName}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:v.campaignType})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${f(v.status)}`,children:v.status})}),n.jsxs("td",{children:["$",(v.budget||0).toLocaleString()]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:v.leads||0})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-success",children:v.conversions||0})}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${g>=10?"bg-success":g>=5?"bg-warning":"bg-secondary"}`,children:[g,"%"]})}),n.jsxs("td",{children:["$",(v.actualROI||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${p(v.actualROI,v.budget)>0?"bg-success":"bg-danger"}`,children:[p(v.actualROI,v.budget),"%"]})})]},v._id)})})]})})})]})})})]})})]})})})})};function uBe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState(""),[v,g]=j.useState(""),[b,y]=j.useState("");j.useEffect(()=>{const Y=e.filter(B=>{const Q=B.deliveryNumber?.toLowerCase().includes(c.toLowerCase())||B.soNumber?.toLowerCase().includes(c.toLowerCase())||B.customerName?.toLowerCase().includes(c.toLowerCase())||B.category?.toLowerCase().includes(c.toLowerCase())||B.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||B.vehicleNumber?.toLowerCase().includes(c.toLowerCase())||B.driverName?.toLowerCase().includes(c.toLowerCase()),R=new Date(B.createdAt),Z=u?new Date(u):null,J=f?new Date(f):null,ie=(!Z||R>=Z)&&(!J||R<=J),M=!v||B.deliveryStatus===v,z=!b||B.deliveryType===b;return Q&&ie&&M&&z});a(Y)},[c,u,f,v,b,e]);const[S,w]=j.useState(1),[k]=j.useState(10);j.useEffect(()=>{C()},[]);const C=()=>{i(!0),Ie.get("/api/del/salesdeliveries",{params:{companyId:o,financialYear:l}}).then(Y=>{const B=Y.data.sort((Q,R)=>new Date(R.createdAt)-new Date(Q.createdAt));t(B),a(B),i(!1)}).catch(Y=>{console.error("Error fetching deliveries:",Y),alert("Failed to fetch deliveries"),i(!1)})},_=S*k,E=_-k,T=r.slice(E,_),I=Math.ceil(r.length/k),F=Y=>w(Y),A=Y=>`badge ${{Pending:"bg-warning","In Transit":"bg-info",Delivered:"bg-success",Cancelled:"bg-danger"}[Y]||"bg-secondary"}`,P=Y=>Y==="Full"?"badge bg-success":"badge bg-warning",q=Y=>{const B=Y.items.map((Z,J)=>`
      <tr>
        <td>${J+1}</td>
        <td>${Z.materialId}</td>
        <td>${Z.description}</td>
        <td>${Z.orderedQuantity}</td>
        <td>${Z.deliveredQuantity}</td>
        <td>${Z.pendingQuantity}</td>
        <td>${Z.baseUnit}</td>
        <td>${Z.price}</td>
        <td>${Z.deliveryDate}</td>
        <td>${Z.actualDeliveryDate}</td>
        <td>${Z.note||""}</td>
      </tr>
    `).join(""),Q=`
      <html>
      <head>
        <title>Sales Delivery - ${Y.deliveryNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; font-size: 12px; }
          th { background-color: #f0f0f0; }
          .header-info { display: flex; justify-content: space-between; margin-bottom: 20px; }
          .status-badge { padding: 4px 8px; border-radius: 4px; color: white; font-weight: bold; }
          .status-delivered { background-color: #28a745; }
          .status-pending { background-color: #ffc107; color: black; }
          .status-transit { background-color: #17a2b8; }
          .status-cancelled { background-color: #dc3545; }
        </style>
      </head>
      <body>
        <div class="header-info">
          <div>
            <h2>Sales Delivery Details</h2>
            <p><strong>Delivery Number:</strong> ${Y.deliveryNumber}</p>
            <p><strong>SO Reference:</strong> ${Y.soNumber}</p>
            <p><strong>Customer:</strong> ${Y.customerName}</p>
            <p><strong>Category:</strong> ${Y.category}</p>
          </div>
          <div>
            <p><strong>Delivery Date:</strong> ${Y.deliveryDate}</p>
            <p><strong>Actual Delivery:</strong> ${Y.actualDeliveryDate}</p>
            <p><strong>Status:</strong> <span class="status-badge status-${Y.deliveryStatus.toLowerCase()}">${Y.deliveryStatus}</span></p>
            <p><strong>Type:</strong> ${Y.deliveryType}</p>
          </div>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Delivery Information</h3>
          <p><strong>Delivery Location:</strong> ${Y.deliveryLocation}</p>
          <p><strong>Delivery Address:</strong> ${Y.deliveryAddress}</p>
          <p><strong>Contact Person:</strong> ${Y.contactPerson}</p>
          <p><strong>Sales Group:</strong> ${Y.salesGroup}</p>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Transport Details</h3>
          <p><strong>Transport Details:</strong> ${Y.transportDetails||"N/A"}</p>
          <p><strong>Vehicle Number:</strong> ${Y.vehicleNumber||"N/A"}</p>
          <p><strong>Driver Name:</strong> ${Y.driverName||"N/A"}</p>
          <p><strong>Driver Phone:</strong> ${Y.driverPhone||"N/A"}</p>
        </div>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Ordered Qty</th>
              <th>Delivered Qty</th>
              <th>Pending Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Delivery Date</th>
              <th>Actual Delivery</th>
              <th>Note</th>
            </tr>
          </thead>
          <tbody>
            ${B}
          </tbody>
        </table>

        <div style="margin-top: 20px;">
          <h3>Summary</h3>
          <p><strong>Total Delivered Amount:</strong> ${Y.total}</p>
          <p><strong>Remarks:</strong> ${Y.remarks||"None"}</p>
        </div>
      </body>
      </html>
    `,R=window.open("","","width=800,height=600");R.document.write(Q),R.document.close(),R.print()},V=async(Y,B)=>{try{await Ie.patch(`/api/del/salesdeliveries/${Y}/status`,{deliveryStatus:B,actualDeliveryDate:B==="Delivered"?new Date().toISOString().substring(0,10):void 0}),C(),alert(`Delivery status updated to ${B}`)}catch(Q){console.error("Error updating status:",Q),alert("Failed to update delivery status")}};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-4",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Delivery Display"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Deliveries"})]})})]}),n.jsx("div",{className:"d-flex",children:n.jsxs("button",{className:"btn btn-primary",onClick:C,children:[n.jsx("i",{className:"fas fa-sync me-1"}),"Refresh"]})})]}),n.jsx("div",{className:"card mb-4",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search delivery number, SO, customer...",value:c,onChange:Y=>{d(Y.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:Y=>{h(Y.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:Y=>{p(Y.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",value:v,onChange:Y=>{g(Y.target.value),w(1)},children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Type"}),n.jsxs("select",{className:"form-select",value:b,onChange:Y=>{y(Y.target.value),w(1)},children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Full",children:"Full"}),n.jsx("option",{value:"Partial",children:"Partial"})]})]}),n.jsxs("div",{className:"col-md-1",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(""),y(""),w(1)},children:"Reset"})]})]})})}),s?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading deliveries..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Delivery Number"}),n.jsx("th",{children:"SO Reference"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Total Amount"}),n.jsx("th",{children:"Vehicle"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:T.length>0?T.map(Y=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:Y.deliveryNumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Y.soNumber})}),n.jsx("td",{children:new Date(Y.deliveryDate).toLocaleDateString()}),n.jsx("td",{children:Y.customerName}),n.jsx("td",{children:Y.deliveryLocation}),n.jsx("td",{children:n.jsx("span",{className:A(Y.deliveryStatus),children:Y.deliveryStatus})}),n.jsx("td",{children:n.jsx("span",{className:P(Y.deliveryType),children:Y.deliveryType})}),n.jsxs("td",{children:["",Y.total]}),n.jsx("td",{children:Y.vehicleNumber||"N/A"}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>q(Y),title:"Print Delivery",children:n.jsx("i",{className:"fas fa-print"})}),Y.deliveryStatus!=="Delivered"&&Y.deliveryStatus!=="Cancelled"&&n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{type:"button",className:"btn btn-success btn-sm dropdown-toggle","data-bs-toggle":"dropdown",title:"Update Status",children:n.jsx("i",{className:"fas fa-edit"})}),n.jsxs("ul",{className:"dropdown-menu",children:[Y.deliveryStatus!=="In Transit"&&n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item",href:"#",onClick:B=>{B.preventDefault(),V(Y._id,"In Transit")},children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Mark In Transit"]})}),n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item",href:"#",onClick:B=>{B.preventDefault(),V(Y._id,"Delivered")},children:[n.jsx("i",{className:"fas fa-check me-2"}),"Mark Delivered"]})}),n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item text-danger",href:"#",onClick:B=>{B.preventDefault(),confirm("Are you sure you want to cancel this delivery?")&&V(Y._id,"Cancelled")},children:[n.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]})})]})]})]})})]},Y._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"10",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-truck fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No sales deliveries found"}),(c||u||f||v||b)&&n.jsx("small",{className:"text-muted",children:"Try adjusting your filters"})]})})})]})})})}),I>1&&n.jsx("nav",{"aria-label":"Sales Deliveries pagination",className:"mt-3",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${S===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>F(S-1),disabled:S===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const B=[],Q=[];B.push(1);for(let J=Math.max(2,S-2);J<=Math.min(I-1,S+2);J++)B.push(J);I>1&&B.push(I);const R=[...new Set(B)].sort((J,ie)=>J-ie);let Z;for(let J of R)Z&&(J-Z===2?Q.push(Z+1):J-Z!==1&&Q.push("...")),Q.push(J),Z=J;return Q.map((J,ie)=>J==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ie}`):n.jsx("li",{className:`page-item ${S===J?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>F(J),children:J})},J))})(),n.jsx("li",{className:`page-item ${S===I?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>F(S+1),disabled:S===I,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}const hBe=()=>{const[e,t]=j.useState({}),[r,a]=j.useState(!1),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState(null),[f,p]=j.useState({currentPage:1,itemsPerPage:5,totalPages:1}),[v,g]=j.useState({companyId:"",firstName:"",lastName:"",email:"",phone:"",roles:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),[b,y]=j.useState(0),[S,w]=j.useState(0),[k,C]=j.useState(null),[_,E]=j.useState(null),[T,I]=j.useState([]),[F,A]=j.useState(0);j.useEffect(()=>{Y(),q(),P()},[]);const P=async()=>{try{const H=await Ie.get("/api/departments");I(H.data)}catch(H){console.error("Error fetching departments:",H)}},q=async()=>{try{const H=await Ie.get("/api/roles");if(Array.isArray(H.data))i(H.data);else{console.error("Unexpected roles format:",H.data);const se=V();i(se.map(be=>({_id:be,roleName:be})))}}catch(H){const se=V();i(se.map(be=>({_id:be,roleName:be}))),console.error("Error fetching roles:",H)}},V=()=>{const H=new Set;return o.forEach(se=>{Array.isArray(se.role)&&se.role.forEach(be=>{be&&H.add(be)})}),Array.from(H).sort()},Y=async()=>{try{const H=localStorage.getItem("selectedCompanyId"),se=localStorage.getItem("financialYear"),be=await Ie.get("/api/faculties",{params:{companyId:H,financialYear:se}});l(be.data);const ue=be.data.reduce((oe,ge)=>{if(ge.employeeId){const Ne=ge.employeeId.match(/FAC-(\d+)$/);if(Ne){const Me=parseInt(Ne[1],10);return Me>oe?Me:oe}}return oe},0);A(ue)}catch(H){console.error("Error fetching faculties:",H)}},[B,Q]=j.useState({isChecking:!1,exists:!1,message:""}),R=async H=>{if(!(!H||!/\S+@\S+\.\S+/.test(H))){Q(se=>({...se,isChecking:!0}));try{const be=(await Ie.get(`/api/Faculty/check-email-exists?email=${H}`)).data.exists;Q({isChecking:!1,exists:be,message:be?"This email is already registered":"Email is available"})}catch(se){console.error("Error checking email:",se),Q({isChecking:!1,exists:!1,message:"Unable to verify email"})}}},Z=j.useRef(null),J=H=>{const se=H.target.files[0];if(se){C(se);const be=new FileReader;be.onloadend=()=>{E(be.result)},be.readAsDataURL(se)}},ie=H=>{const{name:se,type:be,value:ue,options:oe}=H.target;let ge=ue,Ne="";if(se==="phone"){let We=ue.replace(/\D/g,"");We.startsWith("91")&&We.length>10&&(We=We.slice(2)),/^\d{0,10}$/.test(We)?(We.length>10&&(We=We.slice(0,10)),g(tt=>({...tt,[se]:We})),We.length===0?Ne="Phone number is required.":We.length===1&&!/^[6-9]$/.test(We)?Ne="Phone number must start with 6, 7, 8, or 9.":We.length>0&&We.length<10?Ne="Phone number must be exactly 10 digits.":We.length===10&&!/^[6-9]\d{9}$/.test(We)&&(Ne="Invalid phone number format. It must start with 6, 7, 8, or 9."),t(tt=>({...tt,[se]:Ne}))):t(tt=>({...tt,[se]:"Only numbers are allowed."}));return}(se==="firstName"||se==="lastName")&&(/^[A-Za-z\s]*$/.test(ue)||(Ne="Only alphabets are allowed.")),se==="email"&&ue&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue)&&(Ne="Enter a valid email."),t(We=>({...We,[se]:Ne})),be==="select-multiple"&&(ge=Array.from(oe).filter(We=>We.selected).map(We=>We.value));let Me={...v,[se]:ge};if(g(Me),se==="email"&&(Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{R(ge)},500)),se==="firstName"&&ue&&!c){const We=F+1,tt=`FAC-${String(We).padStart(3,"0")}`;g(mt=>({...mt,employeeId:tt}))}},[M,z]=j.useState({searchQuery:"",roleName:""}),ee=H=>{const{name:se,value:be}=H.target;z(ue=>({...ue,[se]:be}))},ne=()=>o.filter(H=>{if(M.roleName&&!(Array.isArray(H.roles)?H.roles.map(be=>typeof be=="object"?be.roleName:be):[]).includes(M.roleName))return!1;if(M.searchQuery){const se=M.searchQuery.toLowerCase();return H.firstName?.toLowerCase().includes(se)||H.lastName?.toLowerCase().includes(se)||H.email?.toLowerCase().includes(se)||H.employeeId?.toLowerCase().includes(se)||H.department?.toLowerCase().includes(se)}return!0}),W=async H=>{H.preventDefault();const se=Object.values(e).some(mt=>mt);if(!v.roles||v.roles.length===0){alert("Please select at least one role.");return}const be=new Date(v.dob),ue=new Date(v.joinDate);let oe=ue.getFullYear()-be.getFullYear();const ge=ue.getMonth()-be.getMonth(),Ne=ue.getDate()-be.getDate();if((ge<0||ge===0&&Ne<0)&&oe--,oe<19){alert("Faculty must be at least 19 years old on the joining date.");return}if(se){alert("Please fix the validation errors before submitting.");return}let Me=v.phone;Me.startsWith("+91")||(Me="+91"+Me);const We=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const tt={companyId:We,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:Me,department:v.department,qualification:v.qualification,otherQualification:v.otherQualification,experience:v.experience,dob:v.dob,joinDate:v.joinDate,address:v.address,gender:v.gender,employmentType:v.employmentType,status:v.status,salary:v.salary,employeeId:v.employeeId,roles:v.roles};v.password&&v.password.trim()!==""&&(tt.password=v.password),console.log("submitData",tt);try{let mt;c?mt=await Ie.put(`/api/faculties/${c}`,tt,{headers:{"Content-Type":"application/json"}}):mt=await Ie.post("/api/faculties",tt,{headers:{"Content-Type":"application/json"}}),alert(mt.data.message||"Faculty saved successfully!"),re(),Y()}catch(mt){alert(mt.response?.data?.message||"An error occurred while saving faculty.")}},re=()=>{g({firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),C(null),E(null),Q({}),d(null)},le=H=>{console.log("Editing faculty:",H);let se=[];Array.isArray(H.roles)&&(typeof H.roles[0]=="string"?se=H.roles.map(ge=>{const Ne=s.find(Me=>Me.roleName===ge);return Ne?Ne._id:null}).filter(ge=>ge!==null):typeof H.roles[0]=="object"?se=H.roles.map(ge=>typeof ge=="string"?ge:ge._id||ge):se=H.roles);const be=ge=>{if(!ge)return{years:0,months:0};const Ne=ge.match(/(\d+)\s*years?/i),Me=ge.match(/(\d+)\s*months?/i);return{years:Ne?parseInt(Ne[1],10):0,months:Me?parseInt(Me[1],10):0}},ue={...H,roles:se,password:""},oe=be(H.experience);if(y(oe.years),w(oe.months),g(ue),d(H._id),H.profilePhoto){const Ne=`/${H.profilePhoto.startsWith("/")?H.profilePhoto.substring(1):H.profilePhoto}`;E(Ne)}else E(null)},te=async H=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{await Ie.delete(`/api/faculties/${H}`),alert("Faculty deleted successfully"),Y()}catch(se){alert(se.response?.data?.message||"Error deleting faculty")}},K=()=>{const H=ne(),se=Math.max(1,Math.ceil(H.length/f.itemsPerPage));f.totalPages!==se&&p(oe=>({...oe,totalPages:se}));const be=(f.currentPage-1)*f.itemsPerPage,ue=be+f.itemsPerPage;return H.slice(be,ue)},de=H=>{H<1||H>f.totalPages||p(se=>({...se,currentPage:H}))};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"container",children:n.jsx("div",{className:"d-flex justify-content-between align-items-center",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"",children:n.jsx("h3",{children:"Staff Management"})})})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, employee ID...",name:"searchQuery",value:M.searchQuery,onChange:ee})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{className:"form-select",name:"roleName",value:M.roleName,onChange:ee,children:[n.jsx("option",{value:"",children:"All Roles"}),V().map(H=>n.jsx("option",{value:H,children:H},H))]})}),n.jsx("div",{className:"col-md-2",children:n.jsx("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:re,children:"Add Staff"})})]}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-center mb-0 table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Experience"}),n.jsx("th",{children:"Join Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:K().length>0?K().map(H=>n.jsxs("tr",{children:[n.jsx("td",{children:H.employeeId}),n.jsxs("td",{children:[H.firstName," ",H.lastName]}),n.jsx("td",{children:H.email}),n.jsx("td",{children:H.phone}),n.jsx("td",{children:H.department}),n.jsxs("td",{children:[H.experience," years"]}),n.jsx("td",{children:H.joinDate}),n.jsx("td",{children:n.jsxs("div",{className:"hstack gap-2 fs-15",children:[n.jsx("button",{className:"btn btn-icon btn-sm btn-soft-warning rounded-pill","data-bs-toggle":"modal","data-bs-target":"#viewModal",onClick:()=>h(H),children:n.jsx("i",{className:"ti ti-eye"})}),n.jsx("button",{onClick:()=>le(H),className:"btn btn-icon btn-sm btn-soft-info rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:n.jsx("i",{className:"ti ti-edit"})}),n.jsx("button",{onClick:()=>te(H._id),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",children:n.jsx("i",{className:"feather-trash"})})]})})]},H._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"text-center",children:"No faculties found matching your criteria"})})})]})}),n.jsx("div",{className:"d-flex justify-content-left mt-3",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",children:[n.jsx("li",{className:`page-item ${f.currentPage===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(f.currentPage-1),children:n.jsx("i",{className:"fas fa-angle-double-left"})})}),[...Array(f.totalPages)].map((H,se)=>{const be=se+1;return be===1||be===f.totalPages||be>=f.currentPage-1&&be<=f.currentPage+1?n.jsx("li",{className:`page-item ${f.currentPage===be?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(be),children:be})},se):null}),n.jsx("li",{className:`page-item ${f.currentPage===f.totalPages?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(f.currentPage+1),children:n.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]}),n.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[n.jsxs("div",{className:"offcanvas-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Staff":"Add Staff"}),n.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"offcanvas","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"offcanvas-body",children:n.jsxs("form",{onSubmit:W,children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{children:"Profile Photo"}),n.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n.jsx("input",{type:"file",name:"profilePhoto",accept:"image/*",onChange:J,className:"form-control",style:{maxWidth:"300px"}}),_&&n.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>{C(null),E(null),g(H=>({...H,profilePhoto:""}))},children:"Remove"})]}),_&&n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:_,alt:"Profile Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"},className:"rounded"})})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"First Name"}),n.jsx("input",{type:"text",className:"form-control",name:"firstName",placeholder:"First Name",value:v.firstName,onChange:ie,required:!0}),e.firstName&&n.jsx("p",{style:{color:"red"},children:e.firstName})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Last Name"}),n.jsx("input",{type:"text",className:"form-control",name:"lastName",placeholder:"Last Name",value:v.lastName,onChange:ie,required:!0}),e.lastName&&n.jsx("p",{style:{color:"red"},children:e.lastName})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",value:v.email,onChange:ie,placeholder:"Email",required:!0}),B.isChecking&&n.jsx("small",{className:"text-muted",children:"Checking email..."}),B.message&&!B.isChecking&&n.jsx("small",{className:B.exists?"text-danger":"text-success",children:B.message}),e.email&&n.jsx("p",{style:{color:"red"},children:e.email})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Phone Number"}),n.jsx("input",{type:"text",name:"phone",placeholder:"Phone",className:"form-control",value:v.phone,onChange:ie,required:!0}),e.phone&&n.jsx("p",{style:{color:"red"},children:e.phone})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Department"}),n.jsxs("select",{name:"department",value:v.department,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"",children:"--Select--"}),T.length>0?T.map(H=>n.jsx("option",{value:H.departmentName,children:H.departmentName},H._id)):n.jsx("option",{disabled:!0,children:"Loading departments..."})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Employee ID"}),n.jsx("input",{type:"text",name:"employeeId",placeholder:"Employee ID",value:v.employeeId,onChange:ie,className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Auto-generated"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"col-form-label",children:["Roles ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("div",{className:"checkbox-group",children:s.length>0?s.map((H,se)=>{const be=H.roleName,ue=H._id;return be?.toLowerCase()==="student"?null:n.jsxs("div",{className:"form-check",style:{display:"flex",gap:"5px",alignItems:"center",marginTop:"9px"},children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`role-${se}`,value:ue,checked:Array.isArray(v.roles)&&v.roles.includes(ue),onChange:oe=>{const ge=oe.target.checked,Ne=ue;g(Me=>{const We=Array.isArray(Me.roles)?Me.roles:[];let tt;return ge?tt=[...We,Ne]:tt=We.filter(mt=>mt!==Ne),console.log("Updated role IDs:",tt),{...Me,roles:tt}})}}),n.jsx("label",{className:"form-check-label mt-1",htmlFor:`role-${se}`,children:be})]},ue)}):n.jsx("p",{children:"No roles found."})}),(!v.roles||v.roles.length===0)&&n.jsx("small",{className:"text-danger",children:"Please select at least one role"})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Qualification ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs("select",{name:"qualification",className:"form-control",value:v.qualification,onChange:ie,required:!0,children:[n.jsx("option",{value:"",children:"Select Qualification"}),n.jsx("option",{value:"BE",children:"BE"}),n.jsx("option",{value:"BTech",children:"BTech"}),n.jsx("option",{value:"MCA",children:"MCA"}),n.jsx("option",{value:"ME",children:"ME"}),n.jsx("option",{value:"MTech",children:"MTech"}),n.jsx("option",{value:"Diploma",children:"Diploma"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),v.qualification==="Other"&&n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Other Qualification ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",name:"otherQualification",className:"form-control",value:v.otherQualification||"",onChange:ie,required:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Experience"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("input",{type:"number",name:"experienceYear",placeholder:"Years",value:b,onChange:H=>{const se=parseInt(H.target.value)||0;if(se>=0&&se<=50){y(se);const be=`${se} years ${S} months`;g(ue=>({...ue,experience:be}))}},min:"0",max:"50",className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Years"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("input",{type:"number",name:"experienceMonth",placeholder:"Months",value:S,onChange:H=>{const se=parseInt(H.target.value)||0;if(se>=0&&se<=11){w(se);const be=`${b} years ${se} months`;g(ue=>({...ue,experience:be}))}},min:"0",max:"11",className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Months"})]})]})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Date of Birth"}),n.jsx("input",{type:"date",name:"dob",value:v.dob,onChange:ie,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Joining Date"}),n.jsx("input",{type:"date",className:"form-control",name:"joinDate",value:v.joinDate,onChange:ie,required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Gender"}),n.jsxs("select",{name:"gender",value:v.gender,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Gender"}),n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",name:"address",placeholder:"Address",value:v.address,onChange:ie,required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),n.jsxs("select",{id:"employmentType",name:"employmentType",value:v.employmentType,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"Full-Time",children:"Full-Time"}),n.jsx("option",{value:"Part-Time",children:"Part-Time"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:v.status,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Salary"}),n.jsx("input",{type:"text",className:"form-control",name:"salary",placeholder:"Salary per month",value:v.salary,onChange:ie,required:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Password ",c?"(Leave blank to keep current)":""]}),n.jsx("input",{type:"password",name:"password",placeholder:c?"Leave blank to keep current":"Password",value:v.password,onChange:ie,required:!c,className:"form-control"})]})]}),n.jsxs("div",{className:"row mt-4",children:[n.jsx("div",{className:"col-6",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Submit"})}),n.jsx("div",{className:"col-6 text-end",children:n.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"offcanvas",children:"Cancel"})})]})]})})]})]})})})]})})}),n.jsx("div",{className:"modal fade",id:"viewModal",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Faculty Details"}),n.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"modal-body",children:u?n.jsx("table",{className:"table table-bordered",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("td",{children:u.employeeId})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsxs("td",{children:[u.firstName," ",u.lastName]})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Email"}),n.jsx("td",{children:u.email})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Phone"}),n.jsx("td",{children:u.phone})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Department"}),n.jsx("td",{children:u.department})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Qualification"}),n.jsx("td",{children:u.qualification})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Experience"}),n.jsxs("td",{children:[u.experience," years"]})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Role"}),n.jsx("td",{children:Array.isArray(u.role)?u.role.join(", "):u.role})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Employment Type"}),n.jsx("td",{children:u.employmentType})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Status"}),n.jsx("td",{children:n.jsx("span",{className:`badge ${u.status==="Active"?"bg-success":"bg-danger"}`,children:u.status})})]})]})}):n.jsx("h6",{children:"No faculty selected"})})]})})})]})},fBe=()=>{const[e,t]=j.useState({departmentName:""}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(1),c=5;j.useEffect(()=>{d()},[]);const d=async()=>{try{const w=await Ie.get("/api/departments");a(w.data)}catch(w){console.error("Error fetching departments:",w)}},u=w=>{const{name:k,value:C}=w.target;t(_=>({..._,[k]:C}))},h=async w=>{w.preventDefault();try{s?await Ie.put(`/api/departments/${s}`,e):await Ie.post("/api/departments",e),t({departmentName:""}),i(null),d()}catch(k){console.error(k)}},f=w=>{t({departmentName:w.departmentName}),i(w._id)},p=async w=>{if(window.confirm("Are you sure you want to delete this department?"))try{await Ie.delete(`/api/departments/${w}`),d()}catch(k){console.error(k)}},v=o*c,g=v-c,b=r.slice(g,v),y=Math.ceil(r.length/c),S=w=>l(w);return n.jsxs("div",{className:"container mt-4",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h3",{className:"text-primary",children:"Department Master"}),n.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>{t({departmentName:""}),i(null)},children:"+ Add Department"})]}),n.jsx("div",{className:"card shadow",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:r.length>0?n.jsxs("table",{className:"table table-bordered table-striped align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Department ID"}),n.jsx("th",{children:"Department Name"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:b.map(w=>n.jsxs("tr",{children:[n.jsx("td",{children:w.dep_id||w._id.slice(-5)}),n.jsx("td",{children:w.departmentName}),n.jsxs("td",{children:[n.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>f(w),children:[n.jsx("i",{className:"bi bi-pencil-square"})," Edit"]}),n.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>p(w._id),children:[n.jsx("i",{className:"bi bi-trash"})," Delete"]})]})]},w._id))})]}):n.jsx("p",{className:"text-muted",children:"No departments added yet."})}),y>1&&n.jsx("nav",{className:"mt-4",children:n.jsxs("ul",{className:"pagination justify-content-left",children:[n.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(o-1),children:""})}),Array.from({length:y},(w,k)=>n.jsx("li",{className:`page-item ${o===k+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(k+1),children:k+1})},k)),n.jsx("li",{className:`page-item ${o===y?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(o+1),children:""})})]})})]})}),n.jsx("div",{className:"modal fade",id:"department-modal",tabIndex:"-1","aria-labelledby":"departmentModalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-sm",children:n.jsx("div",{className:"modal-content",children:n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",id:"departmentModalLabel",children:s?"Edit Department":"Add Department"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{t({departmentName:""}),i(null)}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Department Name"}),n.jsx("input",{type:"text",name:"departmentName",className:"form-control",value:e.departmentName,onChange:u,placeholder:"Enter department name",required:!0})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"submit",className:"btn btn-primary w-100","data-bs-dismiss":"modal",children:s?"Update":"Save"})})]})})})})]})},mBe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState([]),[c,d]=j.useState(!1),[u,h]=j.useState(null),f=j.useRef();j.useEffect(()=>{p(),v()},[]);const p=()=>{Ie.get("/api/departments").then(C=>t(C.data)).catch(C=>console.error("Error fetching departments",C))},v=()=>{Ie.get("/api/designations").then(C=>l(C.data)).catch(C=>console.error("Error fetching designations",C))},g=()=>{d(!1),a(""),i(""),new window.bootstrap.Modal(f.current).show()},b=()=>{window.bootstrap.Modal.getInstance(f.current).hide()},y=C=>{C.preventDefault();const _={designName:r,departmentId:s};(c?Ie.put(`/api/designations/${u}`,_):Ie.post("/api/designations",_)).then(()=>{v(),b(),k()}).catch(T=>console.error("Error saving designation",T))},S=C=>{d(!0),h(C._id),a(C.designName),i(C.departmentId?._id||""),new window.bootstrap.Modal(f.current).show()},w=C=>{window.confirm("Are you sure you want to delete this designation?")&&Ie.delete(`/api/designations/${C}`).then(()=>v()).catch(_=>console.error("Error deleting designation",_))},k=()=>{a(""),i(""),d(!1),h(null)};return n.jsxs("div",{className:"container mt-3",children:[n.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[n.jsx("h4",{className:"mb-4 text-primary",children:"Material Master"}),n.jsx("div",{className:"mb-3",children:n.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add Designation"})})]}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h5",{className:"card-title mb-3",children:"All Designations"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Designation"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[o.map((C,_)=>n.jsxs("tr",{children:[n.jsx("td",{children:_+1}),n.jsx("td",{children:C.designName}),n.jsx("td",{children:C.departmentId?.departmentName||"N/A"}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>S(C),children:"Edit"}),n.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>w(C._id),children:"Delete"})]})]},C._id)),o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No designations found"})})]})]})})]}),n.jsx("div",{className:"modal fade",ref:f,tabIndex:"-1","aria-labelledby":"designationModalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsx("div",{className:"modal-content",children:n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",id:"designationModalLabel",children:[c?"Edit":"Add"," Designation"]}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Designation Name"}),n.jsx("input",{type:"text",className:"form-control",value:r,onChange:C=>a(C.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Department"}),n.jsxs("select",{className:"form-select",value:s,onChange:C=>i(C.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Department --"}),e.map(C=>n.jsx("option",{value:C._id,children:C.departmentName},C._id))]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Add"}),n.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:k,children:"Cancel"})]})]})})})})]})},pBe=()=>{const[e,t]=j.useState({employeeId:"",name:"",leaveType:"",fromDate:"",toDate:"",reason:""}),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{const h=localStorage.getItem("user");if(h)try{const f=JSON.parse(h);console.log("User data from localStorage:",f),t(p=>({...p,employeeId:f.employeeId||"",name:f.username}))}catch(f){console.error("Error parsing user from localStorage:",f)}},[]);const c=async h=>await(await fetch(`/api/leave?employeeId=${h}`)).json(),d=h=>{t({...e,[h.target.name]:h.target.value})},u=async()=>{if(!e.leaveType||!e.fromDate||!e.toDate||!e.reason){alert("Please fill in all required fields");return}if(new Date(e.fromDate)>new Date(e.toDate)){alert("From date cannot be later than to date");return}try{l(!0);const h=await Ie.post("/api/leave",e);console.log(h),h.status===201&&(t(f=>({...f,leaveType:"",fromDate:"",toDate:"",reason:""})),i(!1),setTimeout(()=>{alert("Leave Request Submitted Successfully"),window.location.reload()},100))}catch(h){alert("Failed to submit leave request"),console.error("Submission error:",h)}finally{l(!1)}};return j.useEffect(()=>{const h=localStorage.getItem("user");if(h)try{const f=JSON.parse(h);console.log("User data from localStorage:",f),f.employeeId&&c(f.employeeId).then(p=>a(p)).catch(p=>console.error("Error fetching leave requests:",p))}catch(f){console.error("Error parsing user from localStorage:",f)}},[]),j.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[s]),n.jsxs("div",{className:"d-flex justify-content-between align-items-center",style:{backgroundColor:"#f8f9fa"},children:[n.jsxs("div",{className:"content container-fluid",style:{padding:"20px",margin:"0 auto"},children:[n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"row align-items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"col",children:n.jsx("h3",{className:"page-title",style:{color:"#333",fontSize:"24px",margin:0},children:"Employee Leave Request"})}),n.jsx("div",{className:"col-auto text-end",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[n.jsx("span",{style:{marginRight:"5px"},children:"+"})," Apply for Leave"]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"card",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[n.jsx("h4",{className:"card-title",style:{marginBottom:"20px",color:"#333"},children:"My Leave Requests"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Leave Type"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"From Date"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"To Date"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Reason"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Status"})]})}),n.jsx("tbody",{children:r.length>0?r.map((h,f)=>n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:h.leaveType}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(h.fromDate).toLocaleDateString("en-IN")}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(h.toDate).toLocaleDateString("en-IN")}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:h.reason}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:n.jsx("span",{className:`badge ${h.status==="Approved"?"bg-success":h.status==="Rejected"?"bg-danger":"bg-warning"}`,style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"white",backgroundColor:h.status==="Approved"?"#28a745":h.status==="Rejected"?"#dc3545":"#ffc107"},children:h.status})})]},f)):n.jsx("tr",{children:n.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #dee2e6"},children:"No leave requests found"})})})]})})]})})})})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal fade show",style:{display:"block",zIndex:1050,position:"fixed",top:0,left:0,width:"100%",height:"100%",outline:0,overflow:"auto"},onClick:h=>{h.target===h.currentTarget&&i(!1)},children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:h=>h.stopPropagation(),style:{margin:"1.75rem auto",maxWidth:"500px",pointerEvents:"all"},children:n.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[n.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #e9ecef",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h5",{className:"modal-title",style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Apply for Leave"}),n.jsx("button",{type:"button",className:"close",onClick:()=>i(!1),style:{cursor:"pointer",background:"none",border:"none",fontSize:"24px",padding:0,lineHeight:1},children:n.jsx("span",{children:""})})]}),n.jsx("div",{className:"modal-body",style:{padding:"1rem"},children:n.jsxs("div",{children:[n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Employee ID"}),n.jsx("input",{type:"text",name:"employeeId",value:e.employeeId,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Name"}),n.jsx("input",{type:"text",name:"name",value:e.name,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"3rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Leave Type"}),n.jsxs("select",{name:"leaveType",value:e.leaveType,onChange:d,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"},children:[n.jsx("option",{value:"",children:"Select Leave Type"}),n.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),n.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),n.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),n.jsx("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"From Date"}),n.jsx("input",{type:"date",name:"fromDate",value:e.fromDate,onChange:d,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"To Date"}),n.jsx("input",{type:"date",name:"toDate",value:e.toDate,onChange:d,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Reason"}),n.jsx("textarea",{name:"reason",value:e.reason,onChange:d,className:"form-control",rows:"4",required:!0,placeholder:"Please provide the reason for your leave request...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",resize:"vertical"}})]}),n.jsxs("div",{className:"submit-section",style:{marginTop:"20px"},children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),style:{width:"100%",marginBottom:"10px",backgroundColor:"#6c757d",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:u,className:"btn btn-danger",disabled:o,style:{width:"100%",backgroundColor:o?"#ccc":"#dc3545",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:o?"not-allowed":"pointer"},children:o?"Submitting...":"Submit Request"})]})]})})]})})}),n.jsx("div",{className:"modal-backdrop fade show",style:{position:"fixed",top:0,left:0,zIndex:1040,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},onClick:()=>i(!1)})]})]})},tJ=6048e5,xBe=864e5,TC=6e4,IC=36e5,vBe=1e3,mU=Symbol.for("constructDateFrom");function Nn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&mU in e?e[mU](t):e instanceof Date?new e.constructor(t):new Date(t)}function Vr(e,t){return Nn(t||e,e)}function Od(e,t,r){const a=Vr(e,r?.in);return isNaN(t)?Nn(r?.in||e,NaN):(t&&a.setDate(a.getDate()+t),a)}function Rd(e,t,r){const a=Vr(e,r?.in);if(isNaN(t))return Nn(e,NaN);if(!t)return a;const s=a.getDate(),i=Nn(e,a.getTime());i.setMonth(a.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(a.setFullYear(i.getFullYear(),i.getMonth(),s),a)}function rJ(e,t,r){return Nn(e,+Vr(e)+t)}function gBe(e,t,r){return rJ(e,t*IC)}let bBe={};function dv(){return bBe}function hf(e,t){const r=dv(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Vr(e,t?.in),i=s.getDay(),o=(i<a?7:0)+i-a;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ig(e,t){return hf(e,{...t,weekStartsOn:1})}function aJ(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=Nn(r,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const i=ig(s),o=Nn(r,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=ig(o);return r.getTime()>=i.getTime()?a+1:r.getTime()>=l.getTime()?a:a-1}function J2(e){const t=Vr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Af(e,...t){const r=Nn.bind(null,t.find(a=>typeof a=="object"));return t.map(r)}function qx(e,t){const r=Vr(e,t?.in);return r.setHours(0,0,0,0),r}function og(e,t,r){const[a,s]=Af(r?.in,e,t),i=qx(a),o=qx(s),l=+i-J2(i),c=+o-J2(o);return Math.round((l-c)/xBe)}function yBe(e,t){const r=aJ(e,t),a=Nn(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),ig(a)}function x3(e,t,r){const a=Vr(e,r?.in);return a.setTime(a.getTime()+t*TC),a}function XP(e,t,r){return Rd(e,t*3,r)}function jBe(e,t,r){return rJ(e,t*1e3)}function Z2(e,t,r){return Od(e,t*7,r)}function ef(e,t,r){return Rd(e,t*12,r)}function pU(e,t){let r,a=t?.in;return e.forEach(s=>{!a&&typeof s=="object"&&(a=Nn.bind(null,s));const i=Vr(s,a);(!r||r<i||isNaN(+i))&&(r=i)}),Nn(a,r||NaN)}function xU(e,t){let r,a=t?.in;return e.forEach(s=>{!a&&typeof s=="object"&&(a=Nn.bind(null,s));const i=Vr(s,a);(!r||r>i||isNaN(+i))&&(r=i)}),Nn(a,r||NaN)}function NBe(e,t,r){const[a,s]=Af(r?.in,e,t);return+qx(a)==+qx(s)}function tf(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function eS(e){return!(!tf(e)&&typeof e!="number"||isNaN(+Vr(e)))}function tS(e,t,r){const[a,s]=Af(r?.in,e,t),i=a.getFullYear()-s.getFullYear(),o=a.getMonth()-s.getMonth();return i*12+o}function Cx(e,t){const r=Vr(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function rS(e,t,r){const[a,s]=Af(r?.in,e,t),i=a.getFullYear()-s.getFullYear(),o=Cx(a)-Cx(s);return i*4+o}function aS(e,t,r){const[a,s]=Af(r?.in,e,t);return a.getFullYear()-s.getFullYear()}function wBe(e,t,r){const[a,s]=Af(r?.in,e,t),i=vU(a,s),o=Math.abs(og(a,s));a.setDate(a.getDate()-i*o);const l=+(vU(a,s)===-i),c=i*(o-l);return c===0?0:c}function vU(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function nJ(e,t){const r=Vr(e,t?.in);return r.setHours(23,59,59,999),r}function sJ(e,t){const r=Vr(e,t?.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function v3(e,t){const r=Vr(e,t?.in),a=r.getMonth(),s=a-a%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function iJ(e,t){const r=Vr(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function oJ(e,t){const r=Vr(e,t?.in),a=r.getFullYear();return r.setFullYear(a+1,0,0),r.setHours(23,59,59,999),r}function PC(e,t){const r=Vr(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function SBe(e,t){const r=dv(),a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Vr(e,t?.in),i=s.getDay(),o=(i<a?-7:0)+6-(i-a);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const CBe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kBe=(e,t,r)=>{let a;const s=CBe[e];return typeof s=="string"?a=s:t===1?a=s.one:a=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function s5(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const EBe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_Be={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DBe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ABe={date:s5({formats:EBe,defaultWidth:"full"}),time:s5({formats:_Be,defaultWidth:"full"}),dateTime:s5({formats:DBe,defaultWidth:"full"})},TBe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IBe=(e,t,r,a)=>TBe[e];function zb(e){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let s;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const PBe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OBe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MBe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RBe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FBe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LBe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BBe=(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},UBe={ordinalNumber:BBe,era:zb({values:PBe,defaultWidth:"wide"}),quarter:zb({values:OBe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:zb({values:MBe,defaultWidth:"wide"}),day:zb({values:RBe,defaultWidth:"wide"}),dayPeriod:zb({values:FBe,defaultWidth:"wide",formattingValues:LBe,defaultFormattingWidth:"wide"})};function Hb(e){return(t,r={})=>{const a=r.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?VBe(l,h=>h.test(o)):$Be(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function $Be(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function VBe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function qBe(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const s=a[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const zBe=/^(\d+)(th|st|nd|rd)?/i,HBe=/\d+/i,WBe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GBe={any:[/^b/i,/^(a|c)/i]},YBe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},KBe={any:[/1/i,/2/i,/3/i,/4/i]},XBe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QBe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JBe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZBe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},e7e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},t7e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},r7e={ordinalNumber:qBe({matchPattern:zBe,parsePattern:HBe,valueCallback:e=>parseInt(e,10)}),era:Hb({matchPatterns:WBe,defaultMatchWidth:"wide",parsePatterns:GBe,defaultParseWidth:"any"}),quarter:Hb({matchPatterns:YBe,defaultMatchWidth:"wide",parsePatterns:KBe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hb({matchPatterns:XBe,defaultMatchWidth:"wide",parsePatterns:QBe,defaultParseWidth:"any"}),day:Hb({matchPatterns:JBe,defaultMatchWidth:"wide",parsePatterns:ZBe,defaultParseWidth:"any"}),dayPeriod:Hb({matchPatterns:e7e,defaultMatchWidth:"any",parsePatterns:t7e,defaultParseWidth:"any"})},lJ={code:"en-US",formatDistance:kBe,formatLong:ABe,formatRelative:IBe,localize:UBe,match:r7e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function a7e(e,t){const r=Vr(e,t?.in);return og(r,PC(r))+1}function QP(e,t){const r=Vr(e,t?.in),a=+ig(r)-+yBe(r);return Math.round(a/tJ)+1}function JP(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=dv(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Nn(t?.in||e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=hf(o,t),c=Nn(t?.in||e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=hf(c,t);return+r>=+l?a+1:+r>=+d?a:a-1}function n7e(e,t){const r=dv(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=JP(e,t),i=Nn(t?.in||e,0);return i.setFullYear(s,0,a),i.setHours(0,0,0,0),hf(i,t)}function cJ(e,t){const r=Vr(e,t?.in),a=+hf(r,t)-+n7e(r,t);return Math.round(a/tJ)+1}function gn(e,t){const r=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return r+a}const wm={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return gn(t==="yy"?a%100:a,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):gn(r+1,2)},d(e,t){return gn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return gn(e.getHours()%12||12,t.length)},H(e,t){return gn(e.getHours(),t.length)},m(e,t){return gn(e.getMinutes(),t.length)},s(e,t){return gn(e.getSeconds(),t.length)},S(e,t){const r=t.length,a=e.getMilliseconds(),s=Math.trunc(a*Math.pow(10,r-3));return gn(s,t.length)}},a0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gU={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const a=e.getFullYear(),s=a>0?a:1-a;return r.ordinalNumber(s,{unit:"year"})}return wm.y(e,t)},Y:function(e,t,r,a){const s=JP(e,a),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return gn(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):gn(i,t.length)},R:function(e,t){const r=aJ(e);return gn(r,t.length)},u:function(e,t){const r=e.getFullYear();return gn(r,t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return gn(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return gn(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return wm.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return gn(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const s=cJ(e,a);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):gn(s,t.length)},I:function(e,t,r){const a=QP(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):gn(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):wm.d(e,t)},D:function(e,t,r){const a=a7e(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):gn(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),s=a===0?7:a;switch(t){case"i":return String(s);case"ii":return gn(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let s;switch(a===12?s=a0.noon:a===0?s=a0.midnight:s=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let s;switch(a>=17?s=a0.evening:a>=12?s=a0.afternoon:a>=4?s=a0.morning:s=a0.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return wm.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):wm.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):gn(a,t.length)},k:function(e,t,r){let a=e.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):gn(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):wm.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):wm.s(e,t)},S:function(e,t){return wm.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return yU(a);case"XXXX":case"XX":return Kp(a);case"XXXXX":case"XXX":default:return Kp(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return yU(a);case"xxxx":case"xx":return Kp(a);case"xxxxx":case"xxx":default:return Kp(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bU(a,":");case"OOOO":default:return"GMT"+Kp(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bU(a,":");case"zzzz":default:return"GMT"+Kp(a,":")}},t:function(e,t,r){const a=Math.trunc(+e/1e3);return gn(a,t.length)},T:function(e,t,r){return gn(+e,t.length)}};function bU(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),s=Math.trunc(a/60),i=a%60;return i===0?r+String(s):r+String(s)+t+gn(i,2)}function yU(e,t){return e%60===0?(e>0?"-":"+")+gn(Math.abs(e)/60,2):Kp(e,t)}function Kp(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),s=gn(Math.trunc(a/60),2),i=gn(a%60,2);return r+s+t+i}const jU=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},dJ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},s7e=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],s=r[2];if(!s)return jU(e,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",jU(a,t)).replace("{{time}}",dJ(s,t))},g3={p:dJ,P:s7e},i7e=/^D+$/,o7e=/^Y+$/,l7e=["D","DD","YY","YYYY"];function c7e(e){return i7e.test(e)}function d7e(e){return o7e.test(e)}function u7e(e,t,r){const a=h7e(e,t,r);if(console.warn(a),l7e.includes(e))throw new RangeError(a)}function h7e(e,t,r){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const f7e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m7e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p7e=/^'([^]*?)'?$/,x7e=/''/g,v7e=/[a-zA-Z]/;function NU(e,t,r){const a=dv(),s=r?.locale??a.locale??lJ,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=Vr(e,r?.in);if(!eS(l))throw new RangeError("Invalid time value");let c=t.match(m7e).map(u=>{const h=u[0];if(h==="p"||h==="P"){const f=g3[h];return f(u,s.formatLong)}return u}).join("").match(f7e).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:g7e(u)};if(gU[h])return{isToken:!0,value:u};if(h.match(v7e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!r?.useAdditionalWeekYearTokens&&d7e(h)||!r?.useAdditionalDayOfYearTokens&&c7e(h))&&u7e(h,t,String(e));const f=gU[h[0]];return f(l,h,s.localize,d)}).join("")}function g7e(e){const t=e.match(p7e);return t?t[1].replace(x7e,"'"):e}function wU(e,t){return Vr(e,t?.in).getDate()}function b7e(e,t){return Vr(e,t?.in).getDay()}function y7e(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=r.getMonth(),i=Nn(r,0);return i.setFullYear(a,s+1,0),i.setHours(0,0,0,0),i.getDate()}function j7e(){return Object.assign({},dv())}function rf(e,t){return Vr(e,t?.in).getHours()}function N7e(e,t){const r=Vr(e,t?.in).getDay();return r===0?7:r}function af(e,t){return Vr(e,t?.in).getMinutes()}function Mo(e,t){return Vr(e,t?.in).getMonth()}function Vm(e){return Vr(e).getSeconds()}function b3(e){return+Vr(e)}function Sa(e,t){return Vr(e,t?.in).getFullYear()}function tp(e,t){return+Vr(e)>+Vr(t)}function zx(e,t){return+Vr(e)<+Vr(t)}function w7e(e,t){return+Vr(e)==+Vr(t)}function S7e(e,t){const r=C7e(t)?new t(0):Nn(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function C7e(e){return typeof e=="function"&&e.prototype?.constructor===e}const k7e=10;class uJ{subPriority=0;validate(t,r){return!0}}class E7e extends uJ{constructor(t,r,a,s,i){super(),this.value=t,this.validateValue=r,this.setValue=a,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,a){return this.setValue(t,r,this.value,a)}}class _7e extends uJ{priority=k7e;subPriority=-1;constructor(t,r){super(),this.context=t||(a=>Nn(r,a))}set(t,r){return r.timestampIsSet?t:Nn(t,S7e(t,this.context))}}class ln{run(t,r,a,s){const i=this.parse(t,r,a,s);return i?{setter:new E7e(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,a){return!0}}class D7e extends ln{priority=140;parse(t,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"});case"GGGGG":return a.era(t,{width:"narrow"});case"GGGG":default:return a.era(t,{width:"wide"})||a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"})}}set(t,r,a){return r.era=a,t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const zs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ru={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Hs(e,t){return e&&{value:t(e.value),rest:e.rest}}function fs(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Fu(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const a=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:a*(s*IC+i*TC+o*vBe),rest:t.slice(r[0].length)}}function hJ(e){return fs(zs.anyDigitsSigned,e)}function Ts(e,t){switch(e){case 1:return fs(zs.singleDigit,t);case 2:return fs(zs.twoDigits,t);case 3:return fs(zs.threeDigits,t);case 4:return fs(zs.fourDigits,t);default:return fs(new RegExp("^\\d{1,"+e+"}"),t)}}function nS(e,t){switch(e){case 1:return fs(zs.singleDigitSigned,t);case 2:return fs(zs.twoDigitsSigned,t);case 3:return fs(zs.threeDigitsSigned,t);case 4:return fs(zs.fourDigitsSigned,t);default:return fs(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ZP(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fJ(e,t){const r=t>0,a=r?t:1-t;let s;if(a<=50)s=e||100;else{const i=a+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return r?s:1-s}function mJ(e){return e%400===0||e%4===0&&e%100!==0}class A7e extends ln{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,r,a){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Hs(Ts(4,t),s);case"yo":return Hs(a.ordinalNumber(t,{unit:"year"}),s);default:return Hs(Ts(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a){const s=t.getFullYear();if(a.isTwoDigitYear){const o=fJ(a.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class T7e extends ln{priority=130;parse(t,r,a){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Hs(Ts(4,t),s);case"Yo":return Hs(a.ordinalNumber(t,{unit:"year"}),s);default:return Hs(Ts(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a,s){const i=JP(t,s);if(a.isTwoDigitYear){const l=fJ(a.year,i);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),hf(t,s)}const o=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),hf(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class I7e extends ln{priority=130;parse(t,r){return nS(r==="R"?4:r.length,t)}set(t,r,a){const s=Nn(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),ig(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class P7e extends ln{priority=130;parse(t,r){return nS(r==="u"?4:r.length,t)}set(t,r,a){return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class O7e extends ln{priority=120;parse(t,r,a){switch(r){case"Q":case"QQ":return Ts(r.length,t);case"Qo":return a.ordinalNumber(t,{unit:"quarter"});case"QQQ":return a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(t,{width:"wide",context:"formatting"})||a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class M7e extends ln{priority=120;parse(t,r,a){switch(r){case"q":case"qq":return Ts(r.length,t);case"qo":return a.ordinalNumber(t,{unit:"quarter"});case"qqq":return a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(t,{width:"wide",context:"standalone"})||a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class R7e extends ln{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,r,a){const s=i=>i-1;switch(r){case"M":return Hs(fs(zs.month,t),s);case"MM":return Hs(Ts(2,t),s);case"Mo":return Hs(a.ordinalNumber(t,{unit:"month"}),s);case"MMM":return a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(t,{width:"wide",context:"formatting"})||a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}}class F7e extends ln{priority=110;parse(t,r,a){const s=i=>i-1;switch(r){case"L":return Hs(fs(zs.month,t),s);case"LL":return Hs(Ts(2,t),s);case"Lo":return Hs(a.ordinalNumber(t,{unit:"month"}),s);case"LLL":return a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(t,{width:"wide",context:"standalone"})||a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function L7e(e,t,r){const a=Vr(e,r?.in),s=cJ(a,r)-t;return a.setDate(a.getDate()-s*7),Vr(a,r?.in)}class B7e extends ln{priority=100;parse(t,r,a){switch(r){case"w":return fs(zs.week,t);case"wo":return a.ordinalNumber(t,{unit:"week"});default:return Ts(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a,s){return hf(L7e(t,a,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function U7e(e,t,r){const a=Vr(e,r?.in),s=QP(a,r)-t;return a.setDate(a.getDate()-s*7),a}class $7e extends ln{priority=100;parse(t,r,a){switch(r){case"I":return fs(zs.week,t);case"Io":return a.ordinalNumber(t,{unit:"week"});default:return Ts(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a){return ig(U7e(t,a))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const V7e=[31,28,31,30,31,30,31,31,30,31,30,31],q7e=[31,29,31,30,31,30,31,31,30,31,30,31];class z7e extends ln{priority=90;subPriority=1;parse(t,r,a){switch(r){case"d":return fs(zs.date,t);case"do":return a.ordinalNumber(t,{unit:"date"});default:return Ts(r.length,t)}}validate(t,r){const a=t.getFullYear(),s=mJ(a),i=t.getMonth();return s?r>=1&&r<=q7e[i]:r>=1&&r<=V7e[i]}set(t,r,a){return t.setDate(a),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class H7e extends ln{priority=90;subpriority=1;parse(t,r,a){switch(r){case"D":case"DD":return fs(zs.dayOfYear,t);case"Do":return a.ordinalNumber(t,{unit:"date"});default:return Ts(r.length,t)}}validate(t,r){const a=t.getFullYear();return mJ(a)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,a){return t.setMonth(0,a),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function eO(e,t,r){const a=dv(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,i=Vr(e,r?.in),o=i.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return Od(i,u,r)}class W7e extends ln{priority=90;parse(t,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=eO(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class G7e extends ln{priority=90;parse(t,r,a,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Hs(Ts(r.length,t),i);case"eo":return Hs(a.ordinalNumber(t,{unit:"day"}),i);case"eee":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeeee":return a.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=eO(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Y7e extends ln{priority=90;parse(t,r,a,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Hs(Ts(r.length,t),i);case"co":return Hs(a.ordinalNumber(t,{unit:"day"}),i);case"ccc":return a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"ccccc":return a.day(t,{width:"narrow",context:"standalone"});case"cccccc":return a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(t,{width:"wide",context:"standalone"})||a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=eO(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function K7e(e,t,r){const a=Vr(e,r?.in),s=N7e(a,r),i=t-s;return Od(a,i,r)}class X7e extends ln{priority=90;parse(t,r,a){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Ts(r.length,t);case"io":return a.ordinalNumber(t,{unit:"day"});case"iii":return Hs(a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return Hs(a.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Hs(a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Hs(a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,a){return t=K7e(t,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Q7e extends ln{priority=80;parse(t,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(ZP(a),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class J7e extends ln{priority=80;parse(t,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(ZP(a),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class Z7e extends ln{priority=80;parse(t,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(ZP(a),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class e9e extends ln{priority=70;parse(t,r,a){switch(r){case"h":return fs(zs.hour12h,t);case"ho":return a.ordinalNumber(t,{unit:"hour"});default:return Ts(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,a){const s=t.getHours()>=12;return s&&a<12?t.setHours(a+12,0,0,0):!s&&a===12?t.setHours(0,0,0,0):t.setHours(a,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class t9e extends ln{priority=70;parse(t,r,a){switch(r){case"H":return fs(zs.hour23h,t);case"Ho":return a.ordinalNumber(t,{unit:"hour"});default:return Ts(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,a){return t.setHours(a,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class r9e extends ln{priority=70;parse(t,r,a){switch(r){case"K":return fs(zs.hour11h,t);case"Ko":return a.ordinalNumber(t,{unit:"hour"});default:return Ts(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.getHours()>=12&&a<12?t.setHours(a+12,0,0,0):t.setHours(a,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class a9e extends ln{priority=70;parse(t,r,a){switch(r){case"k":return fs(zs.hour24h,t);case"ko":return a.ordinalNumber(t,{unit:"hour"});default:return Ts(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,a){const s=a<=24?a%24:a;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class n9e extends ln{priority=60;parse(t,r,a){switch(r){case"m":return fs(zs.minute,t);case"mo":return a.ordinalNumber(t,{unit:"minute"});default:return Ts(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setMinutes(a,0,0),t}incompatibleTokens=["t","T"]}class s9e extends ln{priority=50;parse(t,r,a){switch(r){case"s":return fs(zs.second,t);case"so":return a.ordinalNumber(t,{unit:"second"});default:return Ts(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setSeconds(a,0),t}incompatibleTokens=["t","T"]}class i9e extends ln{priority=30;parse(t,r){const a=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Hs(Ts(r.length,t),a)}set(t,r,a){return t.setMilliseconds(a),t}incompatibleTokens=["t","T"]}class o9e extends ln{priority=10;parse(t,r){switch(r){case"X":return Fu(Ru.basicOptionalMinutes,t);case"XX":return Fu(Ru.basic,t);case"XXXX":return Fu(Ru.basicOptionalSeconds,t);case"XXXXX":return Fu(Ru.extendedOptionalSeconds,t);case"XXX":default:return Fu(Ru.extended,t)}}set(t,r,a){return r.timestampIsSet?t:Nn(t,t.getTime()-J2(t)-a)}incompatibleTokens=["t","T","x"]}class l9e extends ln{priority=10;parse(t,r){switch(r){case"x":return Fu(Ru.basicOptionalMinutes,t);case"xx":return Fu(Ru.basic,t);case"xxxx":return Fu(Ru.basicOptionalSeconds,t);case"xxxxx":return Fu(Ru.extendedOptionalSeconds,t);case"xxx":default:return Fu(Ru.extended,t)}}set(t,r,a){return r.timestampIsSet?t:Nn(t,t.getTime()-J2(t)-a)}incompatibleTokens=["t","T","X"]}class c9e extends ln{priority=40;parse(t){return hJ(t)}set(t,r,a){return[Nn(t,a*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class d9e extends ln{priority=20;parse(t){return hJ(t)}set(t,r,a){return[Nn(t,a),{timestampIsSet:!0}]}incompatibleTokens="*"}const u9e={G:new D7e,y:new A7e,Y:new T7e,R:new I7e,u:new P7e,Q:new O7e,q:new M7e,M:new R7e,L:new F7e,w:new B7e,I:new $7e,d:new z7e,D:new H7e,E:new W7e,e:new G7e,c:new Y7e,i:new X7e,a:new Q7e,b:new J7e,B:new Z7e,h:new e9e,H:new t9e,K:new r9e,k:new a9e,m:new n9e,s:new s9e,S:new i9e,X:new o9e,x:new l9e,t:new c9e,T:new d9e},h9e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f9e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m9e=/^'([^]*?)'?$/,p9e=/''/g,x9e=/\S/,v9e=/[a-zA-Z]/;function g9e(e,t,r,a){const s=()=>Nn(a?.in||r,NaN),i=j7e(),o=a?.locale??i.locale??lJ,l=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return e?s():Vr(r,a?.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new _7e(a?.in,r)],h=t.match(f9e).map(b=>{const y=b[0];if(y in g3){const S=g3[y];return S(b,o.formatLong)}return b}).join("").match(h9e),f=[];for(let b of h){const y=b[0],S=u9e[y];if(S){const{incompatibleTokens:w}=S;if(Array.isArray(w)){const C=f.find(_=>w.includes(_.token)||_.token===y);if(C)throw new RangeError(`The format string mustn't contain \`${C.fullToken}\` and \`${b}\` at the same time`)}else if(S.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);f.push({token:y,fullToken:b});const k=S.run(e,b,o.match,d);if(!k)return s();u.push(k.setter),e=k.rest}else{if(y.match(v9e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(b==="''"?b="'":y==="'"&&(b=b9e(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&x9e.test(e))return s();const p=u.map(b=>b.priority).sort((b,y)=>y-b).filter((b,y,S)=>S.indexOf(b)===y).map(b=>u.filter(y=>y.priority===b).sort((y,S)=>S.subPriority-y.subPriority)).map(b=>b[0]);let v=Vr(r,a?.in);if(isNaN(+v))return s();const g={};for(const b of p){if(!b.validate(v,d))return s();const y=b.set(v,g,d);Array.isArray(y)?(v=y[0],Object.assign(g,y[1])):v=y}return v}function b9e(e){return e.match(m9e)[1].replace(p9e,"'")}function y9e(e,t,r){const[a,s]=Af(r?.in,e,t);return a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()}function j9e(e,t,r){const[a,s]=Af(r?.in,e,t);return+v3(a)==+v3(s)}function N9e(e,t,r){const[a,s]=Af(r?.in,e,t);return a.getFullYear()===s.getFullYear()}function s1(e,t,r){const a=+Vr(e,r?.in),[s,i]=[+Vr(t.start,r?.in),+Vr(t.end,r?.in)].sort((o,l)=>o-l);return a>=s&&a<=i}function w9e(e,t,r){return Od(e,-1,r)}function S9e(e,t){const r=()=>Nn(t?.in,NaN),s=_9e(e);let i;if(s.date){const d=D9e(s.date,2);i=A9e(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,c;if(s.time&&(l=T9e(s.time),isNaN(l)))return r();if(s.timezone){if(c=I9e(s.timezone),isNaN(c))return r()}else{const d=new Date(o+l),u=Vr(0,t?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return Vr(o+l+c,t?.in)}const $N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},C9e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,k9e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,E9e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _9e(e){const t={},r=e.split($N.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],$N.timeZoneDelimiter.test(t.date)&&(t.date=e.split($N.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const s=$N.timezone.exec(a);s?(t.time=a.replace(s[1],""),t.timezone=s[1]):t.time=a}return t}function D9e(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};const s=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((a[1]||a[2]).length)}}function A9e(e,t){if(t===null)return new Date(NaN);const r=e.match(C9e);if(!r)return new Date(NaN);const a=!!r[4],s=Wb(r[1]),i=Wb(r[2])-1,o=Wb(r[3]),l=Wb(r[4]),c=Wb(r[5])-1;if(a)return F9e(t,l,c)?P9e(t,l,c):new Date(NaN);{const d=new Date(0);return!M9e(t,i,o)||!R9e(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}}function Wb(e){return e?parseInt(e):1}function T9e(e){const t=e.match(k9e);if(!t)return NaN;const r=i5(t[1]),a=i5(t[2]),s=i5(t[3]);return L9e(r,a,s)?r*IC+a*TC+s*1e3:NaN}function i5(e){return e&&parseFloat(e.replace(",","."))||0}function I9e(e){if(e==="Z")return 0;const t=e.match(E9e);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return B9e(a,s)?r*(a*IC+s*TC):NaN}function P9e(e,t,r){const a=new Date(0);a.setUTCFullYear(e,0,4);const s=a.getUTCDay()||7,i=(t-1)*7+r+1-s;return a.setUTCDate(a.getUTCDate()+i),a}const O9e=[31,null,31,30,31,30,31,31,30,31,30,31];function pJ(e){return e%400===0||e%4===0&&e%100!==0}function M9e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(O9e[t]||(pJ(e)?29:28))}function R9e(e,t){return t>=1&&t<=(pJ(e)?366:365)}function F9e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function L9e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function B9e(e,t){return t>=0&&t<=59}function Fc(e,t,r){const a=Vr(e,r?.in),s=a.getFullYear(),i=a.getDate(),o=Nn(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=y7e(o);return a.setMonth(t,Math.min(i,l)),a}function lw(e,t,r){const a=Vr(e,r?.in);return a.setHours(t),a}function cw(e,t,r){const a=Vr(e,r?.in);return a.setMinutes(t),a}function u0(e,t,r){const a=Vr(e,r?.in),s=Math.trunc(a.getMonth()/3)+1,i=t-s;return Fc(a,a.getMonth()+i*3)}function dw(e,t,r){const a=Vr(e,r?.in);return a.setSeconds(t),a}function Du(e,t,r){const a=Vr(e,r?.in);return isNaN(+a)?Nn(e,NaN):(a.setFullYear(t),a)}function kx(e,t,r){return Rd(e,-t,r)}function xJ(e,t,r){return XP(e,-1,r)}function SU(e,t,r){return Z2(e,-1,r)}function lg(e,t,r){return ef(e,-t,r)}var U9e=typeof document<"u",$9e=function(){},sS=U9e?j.useLayoutEffect:$9e;const V9e={...gw},q9e=V9e.useInsertionEffect,z9e=q9e||(e=>e());function H9e(e){const t=j.useRef(()=>{});return z9e(()=>{t.current=e}),j.useCallback(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}var W9e=typeof document<"u",G9e=function(){},uw=W9e?j.useLayoutEffect:G9e;function iS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!iS(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=r;a--!==0;){const i=s[a];if(!(i==="_owner"&&e.$$typeof)&&!iS(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function vJ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function CU(e,t){const r=vJ(e);return Math.round(t*r)/r}function o5(e){const t=j.useRef(e);return uw(()=>{t.current=e}),t}function Y9e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=j.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=j.useState(a);iS(f,a)||p(a);const[v,g]=j.useState(null),[b,y]=j.useState(null),S=j.useCallback(R=>{R!==_.current&&(_.current=R,g(R))},[]),w=j.useCallback(R=>{R!==E.current&&(E.current=R,y(R))},[]),k=i||v,C=o||b,_=j.useRef(null),E=j.useRef(null),T=j.useRef(u),I=c!=null,F=o5(c),A=o5(s),P=o5(d),q=j.useCallback(()=>{if(!_.current||!E.current)return;const R={placement:t,strategy:r,middleware:f};A.current&&(R.platform=A.current),qAe(_.current,E.current,R).then(Z=>{const J={...Z,isPositioned:P.current!==!1};V.current&&!iS(T.current,J)&&(T.current=J,c1.flushSync(()=>{h(J)}))})},[f,t,r,A,P]);uw(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[d]);const V=j.useRef(!1);uw(()=>(V.current=!0,()=>{V.current=!1}),[]),uw(()=>{if(k&&(_.current=k),C&&(E.current=C),k&&C){if(F.current)return F.current(k,C,q);q()}},[k,C,q,F,I]);const Y=j.useMemo(()=>({reference:_,floating:E,setReference:S,setFloating:w}),[S,w]),B=j.useMemo(()=>({reference:k,floating:C}),[k,C]),Q=j.useMemo(()=>{const R={position:r,left:0,top:0};if(!B.floating)return R;const Z=CU(B.floating,u.x),J=CU(B.floating,u.y);return l?{...R,transform:"translate("+Z+"px, "+J+"px)",...vJ(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Z,top:J}},[r,l,B.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:q,refs:Y,elements:B,floatingStyles:Q}),[u,q,Y,B,Q])}const K9e=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:s}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?u7({element:a.current,padding:s}).fn(r):{}:a?u7({element:a,padding:s}).fn(r):{}}}},X9e=(e,t)=>({...$Ae(e),options:[e,t]}),Q9e=(e,t)=>({...VAe(e),options:[e,t]}),J9e=(e,t)=>({...K9e(e),options:[e,t]}),Z9e={...gw};let kU=!1,eUe=0;const EU=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+eUe++;function tUe(){const[e,t]=j.useState(()=>kU?EU():void 0);return sS(()=>{e==null&&t(EU())},[]),j.useEffect(()=>{kU=!0},[]),e}const rUe=Z9e.useId,gJ=rUe||tUe,aUe=j.forwardRef(function(t,r){const{context:{placement:a,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:f,d:p,style:{transform:v,...g}={},...b}=t,y=gJ(),[S,w]=j.useState(!1);if(sS(()=>{if(!s)return;Yc(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[k,C]=a.split("-"),_=k==="top"||k==="bottom";let E=h;(_&&o!=null&&o.x||!_&&o!=null&&o.y)&&(E=null);const T=u*2,I=T/2,F=l/2*(d/-8+1),A=c/2*d/4,P=!!p,q=E&&C==="end"?"bottom":"top";let V=E&&C==="end"?"right":"left";E&&S&&(V=C==="end"?"left":"right");const Y=i?.x!=null?E||i.x:"",B=i?.y!=null?E||i.y:"",Q=p||"M0,0"+(" H"+l)+(" L"+(l-F)+","+(c-A))+(" Q"+l/2+","+c+" "+F+","+(c-A))+" Z",R={top:P?"rotate(180deg)":"",left:P?"rotate(90deg)":"rotate(-90deg)",bottom:P?"":"rotate(180deg)",right:P?"rotate(-90deg)":"rotate(90deg)"}[k];return n.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:P?l:l+T,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[V]:Y,[q]:B,[k]:_||P?"100%":"calc(100% - "+T/2+"px)",transform:[R,v].filter(Z=>!!Z).join(" "),...g},children:[T>0&&n.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:f,strokeWidth:T+(p?0:1),d:Q}),n.jsx("path",{stroke:T&&!p?b.fill:"none",d:Q}),n.jsx("clipPath",{id:y,children:n.jsx("rect",{x:-I,y:I*(P?-1:1),width:l+T,height:l})})]})});function nUe(){const e=new Map;return{emit(t,r){var a;(a=e.get(t))==null||a.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var a;(a=e.get(t))==null||a.delete(r)}}}const sUe=j.createContext(null),iUe=j.createContext(null),oUe=()=>{var e;return((e=j.useContext(sUe))==null?void 0:e.id)||null},lUe=()=>j.useContext(iUe);function cUe(e){const{open:t=!1,onOpenChange:r,elements:a}=e,s=gJ(),i=j.useRef({}),[o]=j.useState(()=>nUe()),l=oUe()!=null,[c,d]=j.useState(a.reference),u=H9e((p,v,g)=>{i.current.openEvent=p?v:void 0,o.emit("openchange",{open:p,event:v,reason:g,nested:l}),r?.(p,v,g)}),h=j.useMemo(()=>({setPositionReference:d}),[]),f=j.useMemo(()=>({reference:c||a.reference||null,floating:a.floating||null,domReference:a.reference}),[c,a.reference,a.floating]);return j.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:o,floatingId:s,refs:h}),[t,u,f,o,s,h])}function dUe(e){e===void 0&&(e={});const{nodeId:t}=e,r=cUe({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||r,s=a.elements,[i,o]=j.useState(null),[l,c]=j.useState(null),u=s?.domReference||i,h=j.useRef(null),f=lUe();sS(()=>{u&&(h.current=u)},[u]);const p=Y9e({...e,elements:{...s,...l&&{reference:l}}}),v=j.useCallback(w=>{const k=Zo(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;c(k),p.refs.setReference(k)},[p.refs]),g=j.useCallback(w=>{(Zo(w)||w===null)&&(h.current=w,o(w)),(Zo(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Zo(w))&&p.refs.setReference(w)},[p.refs]),b=j.useMemo(()=>({...p.refs,setReference:g,setPositionReference:v,domReference:h}),[p.refs,g,v]),y=j.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),S=j.useMemo(()=>({...p,...a,refs:b,elements:y,nodeId:t}),[p,b,y,t,a]);return sS(()=>{a.dataRef.current.floatingContext=S;const w=f?.nodesRef.current.find(k=>k.id===t);w&&(w.context=S)}),j.useMemo(()=>({...p,context:S,refs:b,elements:y}),[p,b,y,S])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var y3=function(t,r){return y3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},y3(t,r)};function Hi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");y3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var za=function(){return za=Object.assign||function(r){for(var a,s=1,i=arguments.length;s<i;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},za.apply(this,arguments)};function $u(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var uUe=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,a=e.showTime,s=a===void 0?!1:a,i=e.className,o=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return Xt.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},hUe=function(e,t){var r=j.useRef(null),a=j.useRef(e);a.current=e;var s=j.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=a.current)===null||o===void 0||o.call(a,i))},[t]);return j.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},OC=function(e){var t=e.children,r=e.onClickOutside,a=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=hUe(r,o);return Xt.createElement("div",{className:a,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},_r;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(_r||(_r={}));function bJ(){var e=typeof window<"u"?window:globalThis;return e}var K1=12;function hn(e){if(e==null)return new Date;var t=typeof e=="string"?S9e(e):Vr(e);return MC(t)?t:new Date}function l5(e,t,r,a,s){s===void 0&&(s=hn());for(var i=cg(r)||cg(tO()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=g9e(e,d,s,{locale:i});if(MC(u)&&(!a||e===as(u,d,r)))return u}return null}function MC(e,t){return eS(e)&&!zx(e,new Date("1/1/1800"))}function as(e,t,r){if(r==="en")return NU(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var a=r?cg(r):void 0;return r&&!a&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),a=a||cg(tO()),NU(e,t,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Rc(e,t){var r=t.dateFormat,a=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&as(e,s,a)||""}var yJ=" - ";function fUe(e,t,r){if(!e)return"";var a=Rc(e,r),s=t?Rc(t,r):"";return"".concat(a).concat(yJ).concat(s)}function mUe(e,t){if(!e?.length)return"";var r=e[0]?Rc(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var a=Rc(e[1],t);return"".concat(r,", ").concat(a)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function c5(e,t){var r=t.hour,a=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return lw(cw(dw(e,l),i),a)}function pUe(e){return QP(e)}function xUe(e,t){return as(e,"ddd",t)}function hw(e){return qx(e)}function qm(e,t,r){var a=cg(t||tO());return hf(e,{locale:a,weekStartsOn:r})}function nf(e){return iJ(e)}function ry(e){return PC(e)}function _U(e){return v3(e)}function DU(){return qx(hn())}function AU(e){return nJ(e)}function vUe(e){return SBe(e)}function gUe(e){return sJ(e)}function Pu(e,t){return e&&t?N9e(e,t):!e&&!t}function Qo(e,t){return e&&t?y9e(e,t):!e&&!t}function oS(e,t){return e&&t?j9e(e,t):!e&&!t}function qa(e,t){return e&&t?NBe(e,t):!e&&!t}function fx(e,t){return e&&t?w7e(e,t):!e&&!t}function ay(e,t,r){var a,s=qx(t),i=nJ(r);try{a=s1(e,{start:s,end:i})}catch{a=!1}return a}function tO(){var e=bJ();return e.__localeId__}function cg(e){if(typeof e=="string"){var t=bJ();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function bUe(e,t,r){return t(as(e,"EEEE",r))}function yUe(e,t){return as(e,"EEEEEE",t)}function jUe(e,t){return as(e,"EEE",t)}function rO(e,t){return as(Fc(hn(),e),"LLLL",t)}function jJ(e,t){return as(Fc(hn(),e),"LLL",t)}function NUe(e,t){return as(u0(hn(),e),"QQQ",t)}function Uc(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,d=r.filterDate;return X1(e,{minDate:a,maxDate:s})||i&&i.some(function(u){return u instanceof Date?qa(e,u):qa(e,u.date)})||o&&o.some(function(u){var h=u.start,f=u.end;return s1(e,{start:h,end:f})})||l&&!l.some(function(u){return qa(e,u)})||c&&!c.some(function(u){var h=u.start,f=u.end;return s1(e,{start:h,end:f})})||d&&!d(hn(e))||!1}function aO(e,t){var r=t===void 0?{}:t,a=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return s1(e,{start:o,end:l})}):a&&a.some(function(i){var o;return i instanceof Date?qa(e,i):qa(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function NJ(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return X1(e,{minDate:a?iJ(a):void 0,maxDate:s?sJ(s):void 0})||i?.some(function(c){return Qo(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return Qo(e,c)})||l&&!l(hn(e))||!1}function VN(e,t,r,a){var s=Sa(e),i=Mo(e),o=Sa(t),l=Mo(t),c=Sa(a);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function wUe(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return X1(e,{minDate:a,maxDate:s})||i&&i.some(function(l){return Qo(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Qo(l,e)})||!1}function qN(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return X1(e,{minDate:a,maxDate:s})||i?.some(function(c){return oS(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return oS(e,c)})||l&&!l(hn(e))||!1}function zN(e,t,r){if(!t||!r||!eS(t)||!eS(r))return!1;var a=Sa(t),s=Sa(r);return a<=e&&s>=e}function fw(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return X1(c,{minDate:a?PC(a):void 0,maxDate:s?oJ(s):void 0})||i?.some(function(d){return Pu(c,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return Pu(c,d)})||l&&!l(hn(c))||!1}function HN(e,t,r,a){var s=Sa(e),i=Cx(e),o=Sa(t),l=Cx(t),c=Sa(a);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function X1(e,t){var r,a=t===void 0?{}:t,s=a.minDate,i=a.maxDate;return(r=s&&og(e,s)<0||i&&og(e,i)>0)!==null&&r!==void 0?r:!1}function TU(e,t){return t.some(function(r){return rf(r)===rf(e)&&af(r)===af(e)&&Vm(r)===Vm(e)})}function IU(e,t){var r=t===void 0?{}:t,a=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return a&&TU(e,a)||s&&!TU(e,s)||i&&!i(e)||!1}function PU(e,t){var r=t.minTime,a=t.maxTime;if(!r||!a)throw new Error("Both minTime and maxTime props required");var s=hn();s=lw(s,rf(e)),s=cw(s,af(e)),s=dw(s,Vm(e));var i=hn();i=lw(i,rf(r)),i=cw(i,af(r)),i=dw(i,Vm(r));var o=hn();o=lw(o,rf(a)),o=cw(o,af(a)),o=dw(o,Vm(a));var l;try{l=!s1(s,{start:i,end:o})}catch{l=!1}return l}function OU(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=kx(e,1);return a&&tS(a,i)>0||s&&s.every(function(o){return tS(o,i)>0})||!1}function MU(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=Rd(e,1);return a&&tS(i,a)>0||s&&s.every(function(o){return tS(i,o)>0})||!1}function SUe(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=PC(e),o=xJ(i);return a&&rS(a,o)>0||s&&s.every(function(l){return rS(l,o)>0})||!1}function CUe(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=oJ(e),o=XP(i,1);return a&&rS(o,a)>0||s&&s.every(function(l){return rS(o,l)>0})||!1}function RU(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=lg(e,1);return a&&aS(a,i)>0||s&&s.every(function(o){return aS(o,i)>0})||!1}function kUe(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.yearItemNumber,i=s===void 0?K1:s,o=ry(lg(e,i)),l=Om(o,i).endPeriod,c=a&&Sa(a);return c&&c>l||!1}function FU(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=ef(e,1);return a&&aS(i,a)>0||s&&s.every(function(o){return aS(i,o)>0})||!1}function EUe(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.yearItemNumber,i=s===void 0?K1:s,o=ef(e,i),l=Om(o,i).startPeriod,c=a&&Sa(a);return c&&c<l||!1}function wJ(e){var t=e.minDate,r=e.includeDates;if(r&&t){var a=r.filter(function(s){return og(s,t)>=0});return xU(a)}else return r?xU(r):t}function SJ(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var a=r.filter(function(s){return og(s,t)<=0});return pU(a)}else return r?pU(r):t}function LU(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var a=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(tf(o)){var l=as(o,"MM.dd.yyyy"),c=a.get(l)||[];c.includes(t)||(c.push(t),a.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(r=d[0])!==null&&r!==void 0?r:"",h=o[u];if(typeof u=="string"&&Array.isArray(h))for(var f=0,p=h.length;f<p;f++){var v=h[f];if(v){var l=as(v,"MM.dd.yyyy"),c=a.get(l)||[];c.includes(u)||(c.push(u),a.set(l,c))}}}}return a}function _Ue(e,t){return e.length!==t.length?!1:e.every(function(r,a){return r===t[a]})}function DUe(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(a){var s=a.date,i=a.holidayName;if(tf(s)){var o=as(s,"MM.dd.yyyy"),l=r.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&_Ue(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?$u($u([],c,!0),[i],!1):[i],r.set(o,l)}}}),r}function AUe(e,t,r,a,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,d=s[l];d&&(c=gBe(c,rf(d)),c=x3(c,af(d)),c=jBe(c,Vm(d)));var u=x3(e,(r+1)*a);tp(c,t)&&zx(c,u)&&d!=null&&o.push(d)}return o}function BU(e){return e<10?"0".concat(e):"".concat(e)}function Om(e,t){t===void 0&&(t=K1);var r=Math.ceil(Sa(e)/t)*t,a=r-(t-1);return{startPeriod:a,endPeriod:r}}function TUe(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function UU(e){var t=e.getSeconds(),r=e.getMilliseconds();return Vr(e.getTime()-t*1e3-r)}function IUe(e,t){return UU(e).getTime()===UU(t).getTime()}function $U(e){if(!tf(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function VU(e,t){if(!tf(e)||!tf(t))throw new Error("Invalid date received");var r=$U(e),a=$U(t);return zx(r,a)}function CJ(e){return e.key===_r.Space}var PUe=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.inputRef=Xt.createRef(),a.onTimeChange=function(s){var i,o;a.setState({time:s});var l=a.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s?.includes(":")){var u=s.split(":"),h=u[0],f=u[1];d.setHours(Number(h)),d.setMinutes(Number(f))}(o=(i=a.props).onChange)===null||o===void 0||o.call(i,d)},a.renderTimeInput=function(){var s=a.state.time,i=a.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?j.cloneElement(c,{date:o,value:s,onChange:a.onTimeChange}):Xt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:a.inputRef,onClick:function(){var d;(d=a.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){a.onTimeChange(d.target.value||l)}})},a.state={time:a.props.timeString},a}return t.getDerivedStateFromProps=function(r,a){return r.timeString!==a.time?{time:r.timeString}:null},t.prototype.render=function(){return Xt.createElement("div",{className:"react-datepicker__input-time-container"},Xt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Xt.createElement("div",{className:"react-datepicker-time__input-container"},Xt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(j.Component),OUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=j.createRef(),r.handleClick=function(a){!r.isDisabled()&&r.props.onClick&&r.props.onClick(a)},r.handleMouseEnter=function(a){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(a)},r.handleOnKeyDown=function(a){var s,i,o=a.key;o===_r.Space&&(a.preventDefault(),a.key=_r.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,a)},r.isSameDay=function(a){return qa(r.props.day,a)},r.isKeyboardSelected=function(){var a;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(a=r.props.selectedDates)===null||a===void 0?void 0:a.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(a){return a===void 0&&(a=r.props.day),Uc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return aO(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return qa(r.props.day,qm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(a){return r.props.showWeekPicker&&qa(a,qm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(a){return r.isSameDay(a)||r.isSameWeek(a)},r.getHighLightedClass=function(){var a=r.props,s=a.day,i=a.highlightDates;if(!i)return!1;var o=as(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var a,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=as(i,"MM.dd.yyyy");return o.has(l)?[(a=o.get(l))===null||a===void 0?void 0:a.className]:[void 0]},r.isInRange=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:ay(s,i,o)},r.isInSelectingRange=function(){var a,s=r.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,h=s.endDate,f=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return!(o||l||c)||!f||!d&&r.isDisabled()?!1:o&&h&&(zx(f,h)||fx(f,h))?ay(i,f,h):l&&u&&(tp(f,u)||fx(f,u))||c&&u&&!h&&(tp(f,u)||fx(f,u))?ay(i,u,f):!1},r.isSelectingRangeStart=function(){var a;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return l?qa(i,c):qa(i,o)},r.isSelectingRangeEnd=function(){var a;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return l||c?qa(i,d):qa(i,o)},r.isRangeStart=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:qa(i,s)},r.isRangeEnd=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:qa(o,s)},r.isWeekend=function(){var a=b7e(r.props.day);return a===0||a===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Mo(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Mo(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(hn())},r.isSelected=function(){var a;return r.props.selectsMultiple?(a=r.props.selectedDates)===null||a===void 0?void 0:a.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(a){var s=r.props.dayClassName?r.props.dayClassName(a):void 0;return aa("react-datepicker__day",s,"react-datepicker__day--"+xUe(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var a=r.props,s=a.day,i=a.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=a.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=r.isDisabled()||r.isExcluded()?c:o;return"".concat(d," ").concat(as(s,"PPPP",r.props.locale))},r.getTitle=function(){var a=r.props,s=a.day,i=a.holidays,o=i===void 0?new Map:i,l=a.excludeDates,c=as(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),r.isExcluded()&&d.push(l?.filter(function(u){return u instanceof Date?qa(u,s):qa(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),d.join(", ")},r.getTabIndex=function(){var a=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(a)&&qa(s,a))?0:-1;return i},r.handleFocusDay=function(){var a;r.shouldFocusDay()&&((a=r.dayEl.current)===null||a===void 0||a.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(wU(r.props.day),r.props.day):wU(r.props.day)},r.render=function(){return Xt.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&Xt.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,a,s;return((a=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||a===void 0?void 0:a.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(j.Component),MUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=j.createRef(),r.handleClick=function(a){r.props.onClick&&r.props.onClick(a)},r.handleOnKeyDown=function(a){var s,i,o=a.key;o===_r.Space&&(a.preventDefault(),a.key=_r.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,a)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!qa(r.props.date,r.props.selected)&&qa(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||qa(r.props.date,r.props.selected)&&qa(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(a){var s=!1;r.getTabIndex()===0&&!a?.isInputFocused&&qa(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,a=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&qa(this.props.date,this.props.selected)};return Xt.createElement("div",{ref:this.weekNumberEl,className:aa(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},a)},t}(j.Component),RUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(a){return Uc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(a,s){r.props.onDayClick&&r.props.onDayClick(a,s)},r.handleDayMouseEnter=function(a){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)},r.handleWeekClick=function(a,s,i){for(var o,l,c,d=new Date(a),u=0;u<7;u++){var h=new Date(a);h.setDate(h.getDate()+u);var f=!r.isDisabled(h);if(f){d=h;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,s,i),r.props.showWeekPicker&&r.handleDayClick(d,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(a){return r.props.formatWeekNumber?r.props.formatWeekNumber(a):pUe(a)},r.isWeekDisabled=function(){for(var a=r.startOfWeek(),s=Od(a,6),i=new Date(a);i<=s;){if(!r.isDisabled(i))return!1;i=Od(i,1)}return!0},r.renderDays=function(){var a=r.startOfWeek(),s=[],i=r.formatWeekNumber(a);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,a,i):void 0;s.push(Xt.createElement(MUe,za({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:a,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(a,l);return Xt.createElement(OUe,za({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return qm(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!qa(r.startOfWeek(),r.props.selected)&&qa(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":qa(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Xt.createElement("div",{className:aa(r)},this.renderDays())},t}(j.Component),Gb,FUe=6,R0={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},d5=(Gb={},Gb[R0.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Gb[R0.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Gb[R0.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Gb),WN=1;function qU(e,t){return e?R0.FOUR_COLUMNS:t?R0.TWO_COLUMNS:R0.THREE_COLUMNS}var LUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=$u([],Array(12),!0).map(function(){return j.createRef()}),r.QUARTER_REFS=$u([],Array(4),!0).map(function(){return j.createRef()}),r.isDisabled=function(a){return Uc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(a){return aO(a,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(a,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,a,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(a){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,a)},r.handleMouseLeave=function(){var a,s;(s=(a=r.props).onMouseLeave)===null||s===void 0||s.call(a)},r.isRangeStartMonth=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Qo(Fc(i,a),o)},r.isRangeStartQuarter=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:oS(u0(i,a),o)},r.isRangeEndMonth=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Qo(Fc(i,a),l)},r.isRangeEndQuarter=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:oS(u0(i,a),l)},r.isInSelectingRangeMonth=function(a){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!f?!1:l&&h?VN(f,h,a,o):c&&u||d&&u&&!h?VN(u,f,a,o):!1},r.isSelectingMonthRangeStart=function(a){var s;if(!r.isInSelectingRangeMonth(a))return!1;var i=r.props,o=i.day,l=i.startDate,c=i.selectsStart,d=Fc(o,a),u=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?Qo(d,u):Qo(d,l)},r.isSelectingMonthRangeEnd=function(a){var s;if(!r.isInSelectingRangeMonth(a))return!1;var i=r.props,o=i.day,l=i.endDate,c=i.selectsEnd,d=i.selectsRange,u=Fc(o,a),h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||d?Qo(u,h):Qo(u,l)},r.isInSelectingRangeQuarter=function(a){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!f?!1:l&&h?HN(f,h,a,o):c&&u||d&&u&&!h?HN(u,f,a,o):!1},r.isWeekInMonth=function(a){var s=r.props.day,i=Od(a,6);return Qo(a,s)||Qo(i,s)},r.isCurrentMonth=function(a,s){return Sa(a)===Sa(hn())&&s===Mo(hn())},r.isCurrentQuarter=function(a,s){return Sa(a)===Sa(hn())&&s===Cx(hn())},r.isSelectedMonth=function(a,s,i){return Mo(i)===s&&Sa(a)===Sa(i)},r.isSelectMonthInList=function(a,s,i){return i.some(function(o){return r.isSelectedMonth(a,s,o)})},r.isSelectedQuarter=function(a,s,i){return Cx(a)===s&&Sa(a)===Sa(i)},r.isMonthSelected=function(){var a=r.props,s=a.day,i=a.selected,o=a.selectedDates,l=a.selectsMultiple,c=Mo(s);return l?o?.some(function(d){return r.isSelectedMonth(s,c,d)}):!!i&&r.isSelectedMonth(s,c,i)},r.renderWeeks=function(){for(var a=[],s=r.props.fixedHeight,i=0,o=!1,l=qm(nf(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(v){return r.props.showWeekPicker?qm(v,r.props.locale,r.props.calendarStartDay):r.props.preSelection},d=function(v){return r.props.showWeekPicker?qm(v,r.props.locale,r.props.calendarStartDay):r.props.selected},u=r.props.selected?d(r.props.selected):void 0,h=r.props.preSelection?c(r.props.preSelection):void 0;a.push(Xt.createElement(RUe,za({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:l,month:Mo(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:u,preSelection:h,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,l=Z2(l,1);var f=s&&i>=FUe,p=!s&&!r.isWeekInMonth(l);if(f||p)if(r.props.peekNextMonth)o=!0;else break}return a},r.onMonthClick=function(a,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||r.handleDayClick(nf(l),a)},r.onMonthMouseEnter=function(a){var s=r.isMonthDisabledForLabelDate(a),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(nf(o))},r.handleMonthNavigation=function(a,s){var i,o,l,c;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.MONTH_REFS[a])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(a,s,i){var o,l=r.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,h=l.minDate,f=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(d){var g=qU(p,v),b=r.getVerticalOffset(g),y=(o=d5[g])===null||o===void 0?void 0:o.grid,S=function(E,T,I){var F,A,P=T,q=I;switch(E){case _r.ArrowRight:P=Rd(T,WN),q=I===11?0:I+WN;break;case _r.ArrowLeft:P=kx(T,WN),q=I===0?11:I-WN;break;case _r.ArrowUp:P=kx(T,b),q=!((F=y?.[0])===null||F===void 0)&&F.includes(I)?I+12-b:I-b;break;case _r.ArrowDown:P=Rd(T,b),q=!((A=y?.[y.length-1])===null||A===void 0)&&A.includes(I)?I-12+b:I+b;break}return{newCalculatedDate:P,newCalculatedMonth:q}},w=function(E,T,I){for(var F=40,A=E,P=!1,q=0,V=S(A,T,I),Y=V.newCalculatedDate,B=V.newCalculatedMonth;!P;){if(q>=F){Y=T,B=I;break}if(h&&Y<h){A=_r.ArrowRight;var Q=S(A,Y,B);Y=Q.newCalculatedDate,B=Q.newCalculatedMonth}if(f&&Y>f){A=_r.ArrowLeft;var Q=S(A,Y,B);Y=Q.newCalculatedDate,B=Q.newCalculatedMonth}if(wUe(Y,r.props)){var Q=S(A,Y,B);Y=Q.newCalculatedDate,B=Q.newCalculatedMonth}else P=!0;q++}return{newCalculatedDate:Y,newCalculatedMonth:B}};if(s===_r.Enter){r.isMonthDisabled(i)||(r.onMonthClick(a,i),u?.(c));return}var k=w(s,d,i),C=k.newCalculatedDate,_=k.newCalculatedMonth;switch(s){case _r.ArrowRight:case _r.ArrowLeft:case _r.ArrowUp:case _r.ArrowDown:r.handleMonthNavigation(_,C);break}}},r.getVerticalOffset=function(a){var s,i;return(i=(s=d5[a])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(a,s){var i=r.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=a.key;c!==_r.Tab&&a.preventDefault(),o||r.handleKeyboardNavigation(a,c,s),l&&l(a)},r.onQuarterClick=function(a,s){var i=u0(r.props.day,s);qN(i,r.props)||r.handleDayClick(_U(i),a)},r.onQuarterMouseEnter=function(a){var s=u0(r.props.day,a);qN(s,r.props)||r.handleDayMouseEnter(_U(s))},r.handleQuarterNavigation=function(a,s){var i,o,l,c;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.QUARTER_REFS[a-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(a,s){var i,o,l=a.key;if(!r.props.disabledKeyboardNavigation)switch(l){case _r.Enter:r.onQuarterClick(a,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case _r.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,XP(r.props.preSelection,1));break;case _r.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,xJ(r.props.preSelection));break}},r.isMonthDisabledForLabelDate=function(a){var s,i=r.props,o=i.day,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=Fc(o,a);return{isDisabled:(s=(l||c||d||u)&&NJ(h,r.props))!==null&&s!==void 0?s:!1,labelDate:h}},r.isMonthDisabled=function(a){var s=r.isMonthDisabledForLabelDate(a).isDisabled;return s},r.getMonthClassNames=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(Fc(i,a)):void 0,h=r.getSelection();return aa("react-datepicker__month-text","react-datepicker__month-".concat(a),u,{"react-datepicker__month-text--disabled":r.isMonthDisabled(a),"react-datepicker__month-text--selected":h?r.isSelectMonthInList(i,a,h):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(i,a,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(a),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(a),"react-datepicker__month-text--in-range":o&&l?VN(o,l,a,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(a),"react-datepicker__month-text--range-end":r.isRangeEndMonth(a),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(a),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(a),"react-datepicker__month-text--today":r.isCurrentMonth(i,a)})},r.getTabIndex=function(a){if(r.props.preSelection==null)return"-1";var s=Mo(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=a===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(a){if(r.props.preSelection==null)return"-1";var s=Cx(r.props.preSelection),i=qN(r.props.day,r.props),o=a===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(a){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,h=Fc(d,a),f=r.isDisabled(h)||r.isExcluded(h)?c:o;return"".concat(f," ").concat(as(h,"MMMM yyyy",u))},r.getQuarterClassNames=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,d=s.minDate,u=s.maxDate,h=s.excludeDates,f=s.includeDates,p=s.filterDate,v=s.preSelection,g=s.disabledKeyboardNavigation,b=(d||u||h||f||p)&&qN(u0(i,a),r.props);return aa("react-datepicker__quarter-text","react-datepicker__quarter-".concat(a),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(i,a,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&v&&r.isSelectedQuarter(i,a,v)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(a),"react-datepicker__quarter-text--in-range":o&&l?HN(o,l,a,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(a),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(a),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,a)})},r.getMonthContent=function(a){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=jJ(a,l),u=rO(a,l);return o?o(a,d,u,c):i?u:d},r.getQuarterContent=function(a){var s,i=r.props,o=i.renderQuarterContent,l=i.locale,c=NUe(a,l);return(s=o?.(a,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var a,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(a=d5[qU(o,i)])===null||a===void 0?void 0:a.grid;return d?.map(function(u,h){return Xt.createElement("div",{className:"react-datepicker__month-wrapper",key:h},u.map(function(f,p){return Xt.createElement("div",{ref:r.MONTH_REFS[f],key:p,onClick:function(v){r.onMonthClick(v,f)},onKeyDown:function(v){CJ(v)&&(v.preventDefault(),v.key=_r.Enter),r.onMonthKeyDown(v,f)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(f)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(f)}:void 0,tabIndex:Number(r.getTabIndex(f)),className:r.getMonthClassNames(f),"aria-disabled":r.isMonthDisabled(f),role:"option","aria-label":r.getAriaLabel(f),"aria-current":r.isCurrentMonth(l,f)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,f,c):void 0},r.getMonthContent(f))}))})},r.renderQuarters=function(){var a=r.props,s=a.day,i=a.selected,o=[1,2,3,4];return Xt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return Xt.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(d){r.onQuarterClick(d,l)},onKeyDown:function(d){r.onQuarterKeyDown(d,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":i?r.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var a=r.props,s=a.selectingDate,i=a.selectsStart,o=a.selectsEnd,l=a.showMonthYearPicker,c=a.showQuarterYearPicker,d=a.showWeekPicker;return aa("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},r}return t.prototype.getSelection=function(){var r=this.props,a=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(a)return[a]},t.prototype.render=function(){var r=this.props,a=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return Xt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(as(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},a?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(j.Component),BUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(a){return r.props.month===a},r.renderOptions=function(){return r.props.monthNames.map(function(a,s){return Xt.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:a,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?Xt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",a)})},r.onChange=function(a){return r.props.onChange(a)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return Xt.createElement(OC,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),UUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(a){return a.map(function(s,i){return Xt.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(a){return Xt.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(a))},r.renderReadView=function(a,s){return Xt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},Xt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Xt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(a){return Xt.createElement(BUe,za({key:"dropdown"},r.props,{monthNames:a,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(a){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,a)];return s&&i.unshift(r.renderDropdown(a)),i},r.onChange=function(a){r.toggleDropdown(),a!==r.props.month&&r.props.onChange(a)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return jJ(i,r.props.locale)}:function(i){return rO(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(a);break;case"select":s=this.renderSelectMode(a);break}return Xt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(j.Component);function $Ue(e,t){for(var r=[],a=nf(e),s=nf(t);!tp(a,s);)r.push(hn(a)),a=Rd(a,1);return r}var VUe=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.renderOptions=function(){return a.state.monthYearsList.map(function(s){var i=b3(s),o=Pu(a.props.date,s)&&Qo(a.props.date,s);return Xt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:a.onChange.bind(a,i),"aria-selected":o?"true":void 0},o?Xt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",as(s,a.props.dateFormat,a.props.locale))})},a.onChange=function(s){return a.props.onChange(s)},a.handleClickOutside=function(){a.props.onCancel()},a.state={monthYearsList:$Ue(a.props.minDate,a.props.maxDate)},a}return t.prototype.render=function(){var r=aa({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Xt.createElement(OC,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),qUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var a=nf(r.props.minDate),s=nf(r.props.maxDate),i=[];!tp(a,s);){var o=b3(a);i.push(Xt.createElement("option",{key:o,value:o},as(a,r.props.dateFormat,r.props.locale))),a=Rd(a,1)}return i},r.onSelectChange=function(a){r.onChange(parseInt(a.target.value))},r.renderSelectMode=function(){return Xt.createElement("select",{value:b3(nf(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(a){var s=as(r.props.date,r.props.dateFormat,r.props.locale);return Xt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},Xt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Xt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return Xt.createElement(VUe,za({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var a=r.state.dropdownVisible,s=[r.renderReadView(!a)];return a&&s.unshift(r.renderDropdown()),s},r.onChange=function(a){r.toggleDropdown();var s=hn(a);Pu(r.props.date,s)&&Qo(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Xt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(j.Component),zUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var a,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(a=r.header)===null||a===void 0?void 0:a.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(a){var s,i;(r.props.minTime||r.props.maxTime)&&PU(a,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&IU(a,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,a)},r.isSelectedTime=function(a){return r.props.selected&&IUe(r.props.selected,a)},r.isDisabledTime=function(a){return(r.props.minTime||r.props.maxTime)&&PU(a,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&IU(a,r.props)},r.liClasses=function(a){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(a):void 0];return r.isSelectedTime(a)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(a)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(rf(a)*3600+af(a)*60+Vm(a))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(a,s){var i,o;a.key===_r.Space&&(a.preventDefault(),a.key=_r.Enter),(a.key===_r.ArrowUp||a.key===_r.ArrowLeft)&&a.target instanceof HTMLElement&&a.target.previousSibling&&(a.preventDefault(),a.target.previousSibling instanceof HTMLElement&&a.target.previousSibling.focus()),(a.key===_r.ArrowDown||a.key===_r.ArrowRight)&&a.target instanceof HTMLElement&&a.target.nextSibling&&(a.preventDefault(),a.target.nextSibling instanceof HTMLElement&&a.target.nextSibling.focus()),a.key===_r.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,a)},r.renderTimes=function(){for(var a,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(a=r.props.intervals)!==null&&a!==void 0?a:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||hn(),c=hw(l),d=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),u=60*TUe(l),h=u/o,f=0;f<h;f++){var p=x3(c,f*o);if(s.push(p),d){var v=AUe(c,p,f,o,d);s=s.concat(v)}}var g=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return Xt.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===g&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===g?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},as(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?Xt.createElement(Xt.Fragment,null):Xt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(a){r.header=a}},Xt.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,a=this.props.monthRef;this.updateContainerHeight(),a&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(a))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,a,s=this.state.height;return Xt.createElement("div",{className:"react-datepicker__time-container ".concat(((a=this.props.todayButton)!==null&&a!==void 0?a:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Xt.createElement("div",{className:"react-datepicker__time"},Xt.createElement("div",{className:"react-datepicker__time-box"},Xt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,a){return a.offsetTop-(r/2-a.clientHeight/2)},t}(j.Component),zU=3,HUe=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.YEAR_REFS=$u([],Array(a.props.yearItemNumber),!0).map(function(){return j.createRef()}),a.isDisabled=function(s){return Uc(s,{minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,includeDates:a.props.includeDates,filterDate:a.props.filterDate})},a.isExcluded=function(s){return aO(s,{excludeDates:a.props.excludeDates})},a.selectingDate=function(){var s;return(s=a.props.selectingDate)!==null&&s!==void 0?s:a.props.preSelection},a.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=a.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},a.handleYearClick=function(s,i){a.props.onDayClick&&a.props.onDayClick(s,i)},a.handleYearNavigation=function(s,i){var o,l,c,d,u=a.props,h=u.date,f=u.yearItemNumber;if(!(h===void 0||f===void 0)){var p=Om(h,f).startPeriod;a.isDisabled(i)||a.isExcluded(i)||((l=(o=a.props).setPreSelection)===null||l===void 0||l.call(o,i),s-p<0?a.updateFocusOnPaginate(f-(p-s)):s-p>=f?a.updateFocusOnPaginate(Math.abs(f-(s-p))):(d=(c=a.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},a.isSameDay=function(s,i){return qa(s,i)},a.isCurrentYear=function(s){return s===Sa(hn())},a.isRangeStart=function(s){return a.props.startDate&&a.props.endDate&&Pu(Du(hn(),s),a.props.startDate)},a.isRangeEnd=function(s){return a.props.startDate&&a.props.endDate&&Pu(Du(hn(),s),a.props.endDate)},a.isInRange=function(s){return zN(s,a.props.startDate,a.props.endDate)},a.isInSelectingRange=function(s){var i=a.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!a.selectingDate()?!1:o&&u?zN(s,a.selectingDate(),u):l&&d||c&&d&&!u?zN(s,d,a.selectingDate()):!1},a.isSelectingRangeStart=function(s){var i;if(!a.isInSelectingRange(s))return!1;var o=a.props,l=o.startDate,c=o.selectsStart,d=Du(hn(),s);return c?Pu(d,(i=a.selectingDate())!==null&&i!==void 0?i:null):Pu(d,l??null)},a.isSelectingRangeEnd=function(s){var i;if(!a.isInSelectingRange(s))return!1;var o=a.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=Du(hn(),s);return c||d?Pu(u,(i=a.selectingDate())!==null&&i!==void 0?i:null):Pu(u,l??null)},a.isKeyboardSelected=function(s){if(!(a.props.date===void 0||a.props.selected==null||a.props.preSelection==null)){var i=a.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,d=i.includeDates,u=i.filterDate,h=ry(Du(a.props.date,s)),f=(o||l||c||d||u)&&fw(s,a.props);return!a.props.disabledKeyboardNavigation&&!a.props.inline&&!qa(h,ry(a.props.selected))&&qa(h,ry(a.props.preSelection))&&!f}},a.isSelectedYear=function(s){var i=a.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(d){return s===Sa(d)}):!!l&&s===Sa(l)},a.onYearClick=function(s,i){var o=a.props.date;o!==void 0&&a.handleYearClick(ry(Du(o,i)),s)},a.onYearKeyDown=function(s,i){var o,l,c=s.key,d=a.props,u=d.date,h=d.yearItemNumber,f=d.handleOnKeyDown;if(c!==_r.Tab&&s.preventDefault(),!a.props.disabledKeyboardNavigation)switch(c){case _r.Enter:if(a.props.selected==null)break;a.onYearClick(s,i),(l=(o=a.props).setPreSelection)===null||l===void 0||l.call(o,a.props.selected);break;case _r.ArrowRight:if(a.props.preSelection==null)break;a.handleYearNavigation(i+1,ef(a.props.preSelection,1));break;case _r.ArrowLeft:if(a.props.preSelection==null)break;a.handleYearNavigation(i-1,lg(a.props.preSelection,1));break;case _r.ArrowUp:{if(u===void 0||h===void 0||a.props.preSelection==null)break;var p=Om(u,h).startPeriod,v=zU,g=i-v;if(g<p){var b=h%v;i>=p&&i<p+b?v=b:v+=b,g=i-v}a.handleYearNavigation(g,lg(a.props.preSelection,v));break}case _r.ArrowDown:{if(u===void 0||h===void 0||a.props.preSelection==null)break;var y=Om(u,h).endPeriod,v=zU,g=i+v;if(g>y){var b=h%v;i<=y&&i>y-b?v=b:v+=b,g=i+v}a.handleYearNavigation(g,ef(a.props.preSelection,v));break}}f&&f(s)},a.getYearClassNames=function(s){var i=a.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=i.filterDate,f=i.yearClassName;return aa("react-datepicker__year-text","react-datepicker__year-".concat(s),o?f?.(Du(o,s)):void 0,{"react-datepicker__year-text--selected":a.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||u||h)&&fw(s,a.props),"react-datepicker__year-text--keyboard-selected":a.isKeyboardSelected(s),"react-datepicker__year-text--range-start":a.isRangeStart(s),"react-datepicker__year-text--range-end":a.isRangeEnd(s),"react-datepicker__year-text--in-range":a.isInRange(s),"react-datepicker__year-text--in-selecting-range":a.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":a.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":a.isSelectingRangeEnd(s),"react-datepicker__year-text--today":a.isCurrentYear(s)})},a.getYearTabIndex=function(s){if(a.props.disabledKeyboardNavigation||a.props.preSelection==null)return"-1";var i=Sa(a.props.preSelection),o=fw(s,a.props);return s===i&&!o?"0":"-1"},a.getYearContent=function(s){return a.props.renderYearContent?a.props.renderYearContent(s):s},a}return t.prototype.render=function(){var r=this,a=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=Om(i,o),u=d.startPeriod,h=d.endPeriod,f=function(g){a.push(Xt.createElement("div",{ref:p.YEAR_REFS[g-u],onClick:function(b){r.onYearClick(b,g)},onKeyDown:function(b){CJ(b)&&(b.preventDefault(),b.key=_r.Enter),r.onYearKeyDown(b,g)},tabIndex:Number(p.getYearTabIndex(g)),className:p.getYearClassNames(g),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,g)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,g)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,g)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,g)}:void 0,key:g,"aria-current":p.isCurrentYear(g)?"date":void 0},p.getYearContent(g)))},p=this,v=u;v<=h;v++)f(v);return Xt.createElement("div",{className:"react-datepicker__year"},Xt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},a))},t}(j.Component);function WUe(e,t,r,a){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;r&&(l=Sa(r)<=o),a&&l&&(l=Sa(a)>=o),l&&s.push(o)}return s}var GUe=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;a.renderOptions=function(){var l=a.props.year,c=a.state.yearsList.map(function(h){return Xt.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:a.onChange.bind(a,h),"aria-selected":l===h?"true":void 0},l===h?Xt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),d=a.props.minDate?Sa(a.props.minDate):null,u=a.props.maxDate?Sa(a.props.maxDate):null;return(!u||!a.state.yearsList.find(function(h){return h===u}))&&c.unshift(Xt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:a.incrementYears},Xt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!a.state.yearsList.find(function(h){return h===d}))&&c.push(Xt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:a.decrementYears},Xt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},a.onChange=function(l){a.props.onChange(l)},a.handleClickOutside=function(){a.props.onCancel()},a.shiftYears=function(l){var c=a.state.yearsList.map(function(d){return d+l});a.setState({yearsList:c})},a.incrementYears=function(){return a.shiftYears(1)},a.decrementYears=function(){return a.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return a.state={yearsList:WUe(a.props.year,o,a.props.minDate,a.props.maxDate)},a.dropdownRef=j.createRef(),a}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var a=r.children?Array.from(r.children):null,s=a?a.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=aa({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Xt.createElement(OC,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),YUe=function(e){Hi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var a=r.props.minDate?Sa(r.props.minDate):1900,s=r.props.maxDate?Sa(r.props.maxDate):2100,i=[],o=a;o<=s;o++)i.push(Xt.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(a){r.onChange(parseInt(a.target.value))},r.renderSelectMode=function(){return Xt.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(a){return Xt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},Xt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Xt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return Xt.createElement(GUe,za({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var a=r.state.dropdownVisible,s=[r.renderReadView(!a)];return a&&s.unshift(r.renderDropdown()),s},r.onChange=function(a){r.toggleDropdown(),a!==r.props.year&&r.props.onChange(a)},r.toggleDropdown=function(a){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,a)})},r.handleYearChange=function(a,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,a,s),r.setOpen()},r.onSelect=function(a,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,a,s)},r.setOpen=function(){var a,s;(s=(a=r.props).setOpen)===null||s===void 0||s.call(a,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Xt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(j.Component),KUe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],XUe=function(e){var t=(e.className||"").split(/\s+/);return KUe.some(function(r){return t.indexOf(r)>=0})},QUe=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.monthContainer=void 0,a.handleClickOutside=function(s){a.props.onClickOutside(s)},a.setClickOutsideRef=function(){return a.containerRef.current},a.handleDropdownFocus=function(s){var i,o;XUe(s.target)&&((o=(i=a.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},a.getDateInView=function(){var s=a.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=wJ(a.props),d=SJ(a.props),u=hn(),h=l||o||i;return h||(c&&zx(u,c)?c:d&&tp(u,d)?d:u)},a.increaseMonth=function(){a.setState(function(s){var i=s.date;return{date:Rd(i,1)}},function(){return a.handleMonthChange(a.state.date)})},a.decreaseMonth=function(){a.setState(function(s){var i=s.date;return{date:kx(i,1)}},function(){return a.handleMonthChange(a.state.date)})},a.handleDayClick=function(s,i,o){a.props.onSelect(s,i,o),a.props.setPreSelection&&a.props.setPreSelection(s)},a.handleDayMouseEnter=function(s){a.setState({selectingDate:s}),a.props.onDayMouseEnter&&a.props.onDayMouseEnter(s)},a.handleMonthMouseLeave=function(){a.setState({selectingDate:void 0}),a.props.onMonthMouseLeave&&a.props.onMonthMouseLeave()},a.handleYearMouseEnter=function(s,i){a.setState({selectingDate:Du(hn(),i)}),a.props.onYearMouseEnter&&a.props.onYearMouseEnter(s,i)},a.handleYearMouseLeave=function(s,i){a.props.onYearMouseLeave&&a.props.onYearMouseLeave(s,i)},a.handleYearChange=function(s){var i,o,l,c;(o=(i=a.props).onYearChange)===null||o===void 0||o.call(i,s),a.setState({isRenderAriaLiveMessage:!0}),a.props.adjustDateOnChange&&(a.props.onSelect(s),(c=(l=a.props).setOpen)===null||c===void 0||c.call(l,!0)),a.props.setPreSelection&&a.props.setPreSelection(s)},a.getEnabledPreSelectionDateForMonth=function(s){if(!Uc(s,a.props))return s;for(var i=nf(s),o=gUe(s),l=wBe(o,i),c=null,d=0;d<=l;d++){var u=Od(i,d);if(!Uc(u,a.props)){c=u;break}}return c},a.handleMonthChange=function(s){var i,o,l,c=(i=a.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;a.handleCustomMonthChange(c),a.props.adjustDateOnChange&&(a.props.onSelect(c),(l=(o=a.props).setOpen)===null||l===void 0||l.call(o,!0)),a.props.setPreSelection&&a.props.setPreSelection(c)},a.handleCustomMonthChange=function(s){var i,o;(o=(i=a.props).onMonthChange)===null||o===void 0||o.call(i,s),a.setState({isRenderAriaLiveMessage:!0})},a.handleMonthYearChange=function(s){a.handleYearChange(s),a.handleMonthChange(s)},a.changeYear=function(s){a.setState(function(i){var o=i.date;return{date:Du(o,Number(s))}},function(){return a.handleYearChange(a.state.date)})},a.changeMonth=function(s){a.setState(function(i){var o=i.date;return{date:Fc(o,Number(s))}},function(){return a.handleMonthChange(a.state.date)})},a.changeMonthYear=function(s){a.setState(function(i){var o=i.date;return{date:Du(Fc(o,Mo(s)),Sa(s))}},function(){return a.handleMonthYearChange(a.state.date)})},a.header=function(s){s===void 0&&(s=a.state.date);var i=qm(s,a.props.locale,a.props.calendarStartDay),o=[];return a.props.showWeekNumbers&&o.push(Xt.createElement("div",{key:"W",className:"react-datepicker__day-name"},a.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(i,l),d=a.formatWeekday(c,a.props.locale),u=a.props.weekDayClassName?a.props.weekDayClassName(c):void 0;return Xt.createElement("div",{key:l,"aria-label":as(c,"EEEE",a.props.locale),className:aa("react-datepicker__day-name",u)},d)}))},a.formatWeekday=function(s,i){return a.props.formatWeekDay?bUe(s,a.props.formatWeekDay,i):a.props.useWeekdaysShort?jUe(s,i):yUe(s,i)},a.decreaseYear=function(){a.setState(function(s){var i,o=s.date;return{date:lg(o,a.props.showYearPicker?(i=a.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return a.handleYearChange(a.state.date)})},a.clearSelectingDate=function(){a.setState({selectingDate:void 0})},a.renderPreviousButton=function(){var s,i,o;if(!a.props.renderCustomHeader){var l=(s=a.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=a.props.showPreviousMonths?l-1:0,d=(i=a.props.monthSelectedIn)!==null&&i!==void 0?i:c,u=kx(a.state.date,d),h;switch(!0){case a.props.showMonthYearPicker:h=RU(a.state.date,a.props);break;case a.props.showYearPicker:h=kUe(a.state.date,a.props);break;case a.props.showQuarterYearPicker:h=SUe(a.state.date,a.props);break;default:h=OU(u,a.props);break}if(!(!((o=a.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!a.props.showDisabledMonthNavigation&&h||a.props.showTimeSelectOnly)){var f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=a.decreaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(v=a.decreaseYear),h&&a.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var g=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,b=a.props,y=b.previousMonthButtonLabel,S=y===void 0?t.defaultProps.previousMonthButtonLabel:y,w=b.previousYearButtonLabel,k=w===void 0?t.defaultProps.previousYearButtonLabel:w,C=a.props,_=C.previousMonthAriaLabel,E=_===void 0?typeof S=="string"?S:"Previous Month":_,T=C.previousYearAriaLabel,I=T===void 0?typeof k=="string"?k:"Previous Year":T;return Xt.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:a.props.handleOnKeyDown,"aria-label":g?I:E},Xt.createElement("span",{className:f.join(" ")},g?k:S))}}},a.increaseYear=function(){a.setState(function(s){var i,o=s.date;return{date:ef(o,a.props.showYearPicker?(i=a.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return a.handleYearChange(a.state.date)})},a.renderNextButton=function(){var s;if(!a.props.renderCustomHeader){var i;switch(!0){case a.props.showMonthYearPicker:i=FU(a.state.date,a.props);break;case a.props.showYearPicker:i=EUe(a.state.date,a.props);break;case a.props.showQuarterYearPicker:i=CUe(a.state.date,a.props);break;default:i=MU(a.state.date,a.props);break}if(!(!((s=a.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!a.props.showDisabledMonthNavigation&&i||a.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];a.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),a.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=a.increaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(c=a.increaseYear),i&&a.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,u=a.props,h=u.nextMonthButtonLabel,f=h===void 0?t.defaultProps.nextMonthButtonLabel:h,p=u.nextYearButtonLabel,v=p===void 0?t.defaultProps.nextYearButtonLabel:p,g=a.props,b=g.nextMonthAriaLabel,y=b===void 0?typeof f=="string"?f:"Next Month":b,S=g.nextYearAriaLabel,w=S===void 0?typeof v=="string"?v:"Next Year":S;return Xt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:a.props.handleOnKeyDown,"aria-label":d?w:y},Xt.createElement("span",{className:l.join(" ")},d?v:f))}}},a.renderCurrentMonth=function(s){s===void 0&&(s=a.state.date);var i=["react-datepicker__current-month"];return a.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),a.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),a.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),Xt.createElement("h2",{className:i.join(" ")},as(s,a.props.dateFormat,a.props.locale))},a.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showYearDropdown||s))return Xt.createElement(YUe,za({},t.defaultProps,a.props,{date:a.state.date,onChange:a.changeYear,year:Sa(a.state.date)}))},a.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showMonthDropdown||s))return Xt.createElement(UUe,za({},t.defaultProps,a.props,{month:Mo(a.state.date),onChange:a.changeMonth}))},a.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showMonthYearDropdown||s))return Xt.createElement(qUe,za({},t.defaultProps,a.props,{date:a.state.date,onChange:a.changeMonthYear}))},a.handleTodayButtonClick=function(s){a.props.onSelect(DU(),s),a.props.setPreSelection&&a.props.setPreSelection(DU())},a.renderTodayButton=function(){if(!(!a.props.todayButton||a.props.showTimeSelectOnly))return Xt.createElement("div",{className:"react-datepicker__today-button",onClick:a.handleTodayButtonClick},a.props.todayButton)},a.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return Xt.createElement("div",{className:"react-datepicker__header ".concat(a.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},a.renderCurrentMonth(i),Xt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(a.props.dropdownMode),onFocus:a.handleDropdownFocus},a.renderMonthDropdown(o!==0),a.renderMonthYearDropdown(o!==0),a.renderYearDropdown(o!==0)),Xt.createElement("div",{className:"react-datepicker__day-names"},a.header(i)))},a.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(a.props.showTimeSelect&&!a.state.monthContainer||a.props.showTimeSelectOnly)return null;var d=OU(a.state.date,a.props),u=MU(a.state.date,a.props),h=RU(a.state.date,a.props),f=FU(a.state.date,a.props),p=!a.props.showMonthYearPicker&&!a.props.showQuarterYearPicker&&!a.props.showYearPicker;return Xt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:a.props.onDropdownFocus},(o=(i=a.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,za(za({},a.state),{customHeaderCount:c,monthDate:l,changeMonth:a.changeMonth,changeYear:a.changeYear,decreaseMonth:a.decreaseMonth,increaseMonth:a.increaseMonth,decreaseYear:a.decreaseYear,increaseYear:a.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:h,nextYearButtonDisabled:f})),p&&Xt.createElement("div",{className:"react-datepicker__day-names"},a.header(l)))},a.renderYearHeader=function(s){var i=s.monthDate,o=a.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Om(i,d),h=u.startPeriod,f=u.endPeriod;return Xt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(f):Sa(i))},a.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case a.props.renderCustomHeader!==void 0:return a.renderCustomHeader(c);case(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker):return a.renderYearHeader(c);default:return a.renderDefaultHeader(c)}},a.renderMonths=function(){var s,i;if(!(a.props.showTimeSelectOnly||a.props.showYearPicker)){for(var o=[],l=(s=a.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=a.props.showPreviousMonths?l-1:0,d=a.props.showMonthYearPicker||a.props.showQuarterYearPicker?ef(a.state.date,c):kx(a.state.date,c),u=(i=a.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var f=h-u+c,p=a.props.showMonthYearPicker||a.props.showQuarterYearPicker?ef(d,f):Rd(d,f),v="month-".concat(h),g=h<l-1,b=h>0;o.push(Xt.createElement("div",{key:v,ref:function(y){a.monthContainer=y??void 0},className:"react-datepicker__month-container"},a.renderHeader({monthDate:p,i:h}),Xt.createElement(LUe,za({},t.defaultProps,a.props,{containerRef:a.containerRef,ariaLabelPrefix:a.props.monthAriaLabelPrefix,day:p,onDayClick:a.handleDayClick,handleOnKeyDown:a.props.handleOnDayKeyDown,handleOnMonthKeyDown:a.props.handleOnKeyDown,onDayMouseEnter:a.handleDayMouseEnter,onMouseLeave:a.handleMonthMouseLeave,orderInDisplay:h,selectingDate:a.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:b}))))}return o}},a.renderYears=function(){if(!a.props.showTimeSelectOnly&&a.props.showYearPicker)return Xt.createElement("div",{className:"react-datepicker__year--container"},a.renderHeader({monthDate:a.state.date}),Xt.createElement(HUe,za({},t.defaultProps,a.props,{selectingDate:a.state.selectingDate,date:a.state.date,onDayClick:a.handleDayClick,clearSelectingDate:a.clearSelectingDate,onYearMouseEnter:a.handleYearMouseEnter,onYearMouseLeave:a.handleYearMouseLeave})))},a.renderTimeSection=function(){if(a.props.showTimeSelect&&(a.state.monthContainer||a.props.showTimeSelectOnly))return Xt.createElement(zUe,za({},t.defaultProps,a.props,{onChange:a.props.onTimeChange,format:a.props.timeFormat,intervals:a.props.timeIntervals,monthRef:a.state.monthContainer}))},a.renderInputTimeSection=function(){var s=a.props.selected?new Date(a.props.selected):void 0,i=s&&MC(s)&&!!a.props.selected,o=i?"".concat(BU(s.getHours()),":").concat(BU(s.getMinutes())):"";if(a.props.showTimeInput)return Xt.createElement(PUe,za({},t.defaultProps,a.props,{date:s,timeString:o,onChange:a.props.onTimeChange}))},a.renderAriaLiveRegion=function(){var s,i=Om(a.state.date,(s=a.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return a.props.showYearPicker?c="".concat(o," - ").concat(l):a.props.showMonthYearPicker||a.props.showQuarterYearPicker?c=Sa(a.state.date):c="".concat(rO(Mo(a.state.date),a.props.locale)," ").concat(Sa(a.state.date)),Xt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},a.state.isRenderAriaLiveMessage&&c)},a.renderChildren=function(){if(a.props.children)return Xt.createElement("div",{className:"react-datepicker__children-container"},a.props.children)},a.containerRef=j.createRef(),a.state={date:a.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},a}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:K1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var a=this;if(this.props.preSelection&&(!qa(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Qo(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&a.handleCustomMonthChange(a.state.date)})}else this.props.openToDate&&!qa(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||uUe;return Xt.createElement(OC,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Xt.createElement("div",{style:{display:"contents"},ref:this.containerRef},Xt.createElement(r,{className:aa("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(j.Component),JUe=function(e){var t=e.icon,r=e.className,a=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return Xt.createElement("i",{className:"".concat(i," ").concat(t," ").concat(a),"aria-hidden":"true",onClick:s});if(Xt.isValidElement(t)){var o=t;return Xt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(a),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return Xt.createElement("svg",{className:"".concat(i," ").concat(a),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Xt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},kJ=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.portalRoot=null,a.el=document.createElement("div"),a}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return Ite.createPortal(this.props.children,this.el)},t}(j.Component),ZUe="[tabindex], a, button, input, select, textarea",e$e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},EJ=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.getTabChildren=function(){var s;return Array.prototype.slice.call((s=a.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(ZUe),1,-1).filter(e$e)},a.handleFocusStart=function(){var s=a.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},a.handleFocusEnd=function(){var s=a.getTabChildren();s&&s.length>1&&s[0].focus()},a.tabLoopRef=j.createRef(),a}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?Xt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Xt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Xt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(j.Component);function t$e(e){var t=function(r){var a,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=j.useRef(null),o=dUe(za({open:!s,whileElementsMounted:dK,placement:r.popperPlacement,middleware:$u([Q9e({padding:15}),X9e(10),J9e({element:i})],(a=r.popperModifiers)!==null&&a!==void 0?a:[],!0)},r.popperProps)),l=za(za({},r),{hidePopper:s,popperProps:za(za({},o),{arrowRef:i})});return Xt.createElement(e,za({},l))};return t}var r$e=function(e){Hi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,a=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,f=r.portalHost,p=r.popperProps,v=r.showArrow,g=void 0;if(!o){var b=aa("react-datepicker-popper",a);g=Xt.createElement(EJ,{enableTabLoop:d},Xt.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:u},l,v&&Xt.createElement(aUe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=j.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=Xt.createElement(kJ,{portalId:h,portalHost:f},g));var y=aa("react-datepicker-wrapper",s);return Xt.createElement(Xt.Fragment,null,Xt.createElement("div",{ref:p.refs.setReference,className:y},c),g)},t}(j.Component),a$e=t$e(r$e),HU="react-datepicker-ignore-onclickoutside";function n$e(e,t){return e&&t?Mo(e)!==Mo(t)||Sa(e)!==Sa(t):e!==t}var u5="Date input not valid.",WU=function(e){Hi(t,e);function t(r){var a=e.call(this,r)||this;return a.calendar=null,a.input=null,a.getPreSelection=function(){return a.props.openToDate?a.props.openToDate:a.props.selectsEnd&&a.props.startDate?a.props.startDate:a.props.selectsStart&&a.props.endDate?a.props.endDate:hn()},a.modifyHolidays=function(){var s;return(s=a.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return MC(l)?$u($u([],i,!0),[za(za({},o),{date:l})],!1):i},[])},a.calcInitialState=function(){var s,i=a.getPreSelection(),o=wJ(a.props),l=SJ(a.props),c=o&&zx(i,hw(o))?o:l&&tp(i,AU(l))?l:i;return{open:a.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=a.props.selectsRange?a.props.startDate:a.props.selected)!==null&&s!==void 0?s:c,highlightDates:LU(a.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},a.resetHiddenStatus=function(){a.setState(za(za({},a.state),{wasHidden:!1}))},a.setHiddenStatus=function(){a.setState(za(za({},a.state),{wasHidden:!0}))},a.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&a.setHiddenStatus()},a.clearPreventFocusTimeout=function(){a.preventFocusTimeout&&clearTimeout(a.preventFocusTimeout)},a.setFocus=function(){var s,i;(i=(s=a.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},a.setBlur=function(){var s,i;(i=(s=a.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),a.cancelFocusInput()},a.deferBlur=function(){requestAnimationFrame(function(){a.setBlur()})},a.setOpen=function(s,i){i===void 0&&(i=!1),a.setState({open:s,preSelection:s&&a.state.open?a.state.preSelection:a.calcInitialState().preSelection,lastPreSelectChange:h5},function(){s||a.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&a.deferBlur(),a.setState({inputValue:null})})})},a.inputOk=function(){return tf(a.state.preSelection)},a.isCalendarOpen=function(){return a.props.open===void 0?a.state.open&&!a.props.disabled&&!a.props.readOnly:a.props.open},a.handleFocus=function(s){var i,o,l=a.state.wasHidden,c=l?a.state.open:!0;l&&a.resetHiddenStatus(),a.state.preventFocus||((o=(i=a.props).onFocus)===null||o===void 0||o.call(i,s),c&&!a.props.preventOpenOnFocus&&!a.props.readOnly&&a.setOpen(!0)),a.setState({focused:!0})},a.sendFocusBackToInput=function(){a.preventFocusTimeout&&a.clearPreventFocusTimeout(),a.setState({preventFocus:!0},function(){a.preventFocusTimeout=setTimeout(function(){a.setFocus(),a.setState({preventFocus:!1})})})},a.cancelFocusInput=function(){clearTimeout(a.inputFocusTimeout),a.inputFocusTimeout=void 0},a.deferFocusInput=function(){a.cancelFocusInput(),a.inputFocusTimeout=setTimeout(function(){return a.setFocus()},1)},a.handleDropdownFocus=function(){a.cancelFocusInput()},a.handleBlur=function(s){var i,o;(!a.state.open||a.props.withPortal||a.props.showTimeInput)&&((o=(i=a.props).onBlur)===null||o===void 0||o.call(i,s)),a.state.open&&a.props.open===!1&&a.setOpen(!1),a.setState({focused:!1})},a.handleCalendarClickOutside=function(s){var i,o;a.props.inline||a.setOpen(!1),(o=(i=a.props).onClickOutside)===null||o===void 0||o.call(i,s),a.props.withPortal&&s.preventDefault()},a.handleChange=function(){for(var s,i,o,l,c,d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];var h=d[0];if(!(a.props.onChangeRaw&&(a.props.onChangeRaw.apply(a,d),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){a.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:s$e});var f=a.props,p=f.selectsRange,v=f.startDate,g=f.endDate,b=(s=a.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=a.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,S=h?.target instanceof HTMLInputElement?h.target.value:"";if(p){var w=S.split(b.includes("-")?yJ:"-",2).map(function(A){return A.trim()}),k=w[0],C=w[1],_=l5(k??"",b,a.props.locale,y),E=l5(C??"",b,a.props.locale,y),T=v?.getTime()!==_?.getTime(),I=g?.getTime()!==E?.getTime();if(!T&&!I||_&&Uc(_,a.props)||E&&Uc(E,a.props))return;(l=(o=a.props).onChange)===null||l===void 0||l.call(o,[_,E],h)}else{var F=l5(S,b,a.props.locale,y,(c=a.props.selected)!==null&&c!==void 0?c:void 0);(F||!S)&&a.setSelected(F,h,!0)}}},a.handleSelect=function(s,i,o){if(!a.props.readOnly){if(a.props.shouldCloseOnSelect&&!a.props.showTimeSelect&&a.sendFocusBackToInput(),a.props.onChangeRaw&&a.props.onChangeRaw(i),a.setSelected(s,i,!1,o),a.props.showDateSelect&&a.setState({isRenderAriaLiveMessage:!0}),!a.props.shouldCloseOnSelect||a.props.showTimeSelect)a.setPreSelection(s);else if(!a.props.inline){a.props.selectsRange||a.setOpen(!1);var l=a.props,c=l.startDate,d=l.endDate;c&&!d&&(a.props.swapRange||!VU(s,c))&&a.setOpen(!1)}}},a.setSelected=function(s,i,o,l){var c,d,u=s;if(a.props.showYearPicker){if(u!==null&&fw(Sa(u),a.props))return}else if(a.props.showMonthYearPicker){if(u!==null&&NJ(u,a.props))return}else if(u!==null&&Uc(u,a.props))return;var h=a.props,f=h.onChange,p=h.selectsRange,v=h.startDate,g=h.endDate,b=h.selectsMultiple,y=h.selectedDates,S=h.minTime,w=h.swapRange;if(!fx(a.props.selected,u)||a.props.allowSameDay||p||b)if(u!==null&&(a.props.selected&&(!o||!a.props.showTimeSelect&&!a.props.showTimeSelectOnly&&!a.props.showTimeInput)&&(u=c5(u,{hour:rf(a.props.selected),minute:af(a.props.selected),second:Vm(a.props.selected)})),!o&&(a.props.showTimeSelect||a.props.showTimeSelectOnly)&&S&&(u=c5(u,{hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds()})),a.props.inline||a.setState({preSelection:u}),a.props.focusSelectedMonth||a.setState({monthSelectedIn:l})),p){var k=!v&&!g,C=v&&!g,_=v&&g;k?f?.([u,null],i):C&&(u===null?f?.([null,null],i):VU(u,v)?f?.(w?[u,v]:[u,null],i):f?.([v,u],i)),_&&f?.([u,null],i)}else if(b){if(u!==null)if(!y?.length)f?.([u],i);else{var E=y.some(function(I){return qa(I,u)});if(E){var T=y.filter(function(I){return!qa(I,u)});f?.(T,i)}else f?.($u($u([],y,!0),[u],!1),i)}}else f?.(u,i);o||((d=(c=a.props).onSelect)===null||d===void 0||d.call(c,u,i),a.setState({inputValue:null}))},a.setPreSelection=function(s){if(!a.props.readOnly){var i=tf(a.props.minDate),o=tf(a.props.maxDate),l=!0;if(s){var c=hw(s);if(i&&o)l=ay(s,a.props.minDate,a.props.maxDate);else if(i){var d=hw(a.props.minDate);l=tp(s,d)||fx(c,d)}else if(o){var u=AU(a.props.maxDate);l=zx(s,u)||fx(c,u)}}l&&a.setState({preSelection:s})}},a.toggleCalendar=function(){a.setOpen(!a.state.open)},a.handleTimeChange=function(s){var i,o;if(!(a.props.selectsRange||a.props.selectsMultiple)){var l=a.props.selected?a.props.selected:a.getPreSelection(),c=a.props.selected?s:c5(l,{hour:rf(s),minute:af(s)});a.setState({preSelection:c}),(o=(i=a.props).onChange)===null||o===void 0||o.call(i,c),a.props.shouldCloseOnSelect&&!a.props.showTimeInput&&(a.sendFocusBackToInput(),a.setOpen(!1)),a.props.showTimeInput&&a.setOpen(!0),(a.props.showTimeSelectOnly||a.props.showTimeSelect)&&a.setState({isRenderAriaLiveMessage:!0}),a.setState({inputValue:null})}},a.onInputClick=function(){var s,i;!a.props.disabled&&!a.props.readOnly&&a.setOpen(!0),(i=(s=a.props).onInputClick)===null||i===void 0||i.call(s)},a.onInputKeyDown=function(s){var i,o,l,c,d,u;(o=(i=a.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!a.state.open&&!a.props.inline&&!a.props.preventOpenOnFocus){(h===_r.ArrowDown||h===_r.ArrowUp||h===_r.Enter)&&((l=a.onInputClick)===null||l===void 0||l.call(a));return}if(a.state.open){if(h===_r.ArrowDown||h===_r.ArrowUp){s.preventDefault();var f=a.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":a.props.showWeekPicker&&a.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':a.props.showFullMonthYearPicker||a.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=a.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&a.calendar.containerRef.current.querySelector(f);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=hn(a.state.preSelection);h===_r.Enter?(s.preventDefault(),s.target.blur(),a.inputOk()&&a.state.lastPreSelectChange===h5?(a.handleSelect(v,s),!a.props.shouldCloseOnSelect&&a.setPreSelection(v)):a.setOpen(!1)):h===_r.Escape?(s.preventDefault(),s.target.blur(),a.sendFocusBackToInput(),a.setOpen(!1)):h===_r.Tab&&a.setOpen(!1),a.inputOk()||(u=(d=a.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:u5})}},a.onPortalKeyDown=function(s){var i=s.key;i===_r.Escape&&(s.preventDefault(),a.setState({preventFocus:!0},function(){a.setOpen(!1),setTimeout(function(){a.setFocus(),a.setState({preventFocus:!1})})}))},a.onDayKeyDown=function(s){var i,o,l,c,d,u,h=a.props,f=h.minDate,p=h.maxDate,v=h.disabledKeyboardNavigation,g=h.showWeekPicker,b=h.shouldCloseOnSelect,y=h.locale,S=h.calendarStartDay,w=h.adjustDateOnChange,k=h.inline;if((o=(i=a.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var C=s.key,_=s.shiftKey,E=hn(a.state.preSelection),T=function(Y,B){var Q=B;switch(Y){case _r.ArrowRight:Q=g?Z2(B,1):Od(B,1);break;case _r.ArrowLeft:Q=g?SU(B):w9e(B);break;case _r.ArrowUp:Q=SU(B);break;case _r.ArrowDown:Q=Z2(B,1);break;case _r.PageUp:Q=_?lg(B,1):kx(B,1);break;case _r.PageDown:Q=_?ef(B,1):Rd(B,1);break;case _r.Home:Q=qm(B,y,S);break;case _r.End:Q=vUe(B);break}return Q},I=function(Y,B){for(var Q=40,R=Y,Z=!1,J=0,ie=T(Y,B);!Z;){if(J>=Q){ie=B;break}f&&ie<f&&(R=_r.ArrowRight,ie=Uc(f,a.props)?T(R,ie):f),p&&ie>p&&(R=_r.ArrowLeft,ie=Uc(p,a.props)?T(R,ie):p),Uc(ie,a.props)?((R===_r.PageUp||R===_r.Home)&&(R=_r.ArrowRight),(R===_r.PageDown||R===_r.End)&&(R=_r.ArrowLeft),ie=T(R,ie)):Z=!0,J++}return ie};if(C===_r.Enter){s.preventDefault(),a.handleSelect(E,s),!b&&a.setPreSelection(E);return}else if(C===_r.Escape){s.preventDefault(),a.setOpen(!1),a.inputOk()||(c=(l=a.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:u5});return}var F=null;switch(C){case _r.ArrowLeft:case _r.ArrowRight:case _r.ArrowUp:case _r.ArrowDown:case _r.PageUp:case _r.PageDown:case _r.Home:case _r.End:F=I(C,E);break}if(!F){(u=(d=a.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:u5});return}if(s.preventDefault(),a.setState({lastPreSelectChange:h5}),w&&a.setSelected(F),a.setPreSelection(F),k){var A=Mo(E),P=Mo(F),q=Sa(E),V=Sa(F);A!==P||q!==V?a.setState({shouldFocusDayInline:!0}):a.setState({shouldFocusDayInline:!1})}}},a.onPopperKeyDown=function(s){var i=s.key;i===_r.Escape&&(s.preventDefault(),a.sendFocusBackToInput(),a.setOpen(!1))},a.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),a.sendFocusBackToInput();var i=a.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,s),a.setState({inputValue:null})},a.clear=function(){a.onClearClick()},a.onScroll=function(s){typeof a.props.closeOnScroll=="boolean"&&a.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&a.setOpen(!1):typeof a.props.closeOnScroll=="function"&&a.props.closeOnScroll(s)&&a.setOpen(!1)},a.renderCalendar=function(){var s,i;return!a.props.inline&&!a.isCalendarOpen()?null:Xt.createElement(QUe,za({showMonthYearDropdown:void 0,ref:function(o){a.calendar=o}},a.props,a.state,{setOpen:a.setOpen,dateFormat:(s=a.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:a.handleSelect,onClickOutside:a.handleCalendarClickOutside,holidays:DUe(a.modifyHolidays()),outsideClickIgnoreClass:HU,onDropdownFocus:a.handleDropdownFocus,onTimeChange:a.handleTimeChange,className:a.props.calendarClassName,container:a.props.calendarContainer,handleOnKeyDown:a.props.onKeyDown,handleOnDayKeyDown:a.onDayKeyDown,setPreSelection:a.setPreSelection,dropdownMode:(i=a.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),a.props.children)},a.renderAriaLiveRegion=function(){var s=a.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=a.props.showTimeInput||a.props.showTimeSelect,d=c?"PPPPp":"PPPP",u;return a.props.selectsRange?u="Selected start date: ".concat(Rc(a.props.startDate,{dateFormat:d,locale:l}),". ").concat(a.props.endDate?"End date: "+Rc(a.props.endDate,{dateFormat:d,locale:l}):""):a.props.showTimeSelectOnly?u="Selected time: ".concat(Rc(a.props.selected,{dateFormat:o,locale:l})):a.props.showYearPicker?u="Selected year: ".concat(Rc(a.props.selected,{dateFormat:"yyyy",locale:l})):a.props.showMonthYearPicker?u="Selected month: ".concat(Rc(a.props.selected,{dateFormat:"MMMM yyyy",locale:l})):a.props.showQuarterYearPicker?u="Selected quarter: ".concat(Rc(a.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):u="Selected date: ".concat(Rc(a.props.selected,{dateFormat:d,locale:l})),Xt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},a.renderDateInput=function(){var s,i,o,l=aa(a.props.className,(s={},s[HU]=a.state.open,s)),c=a.props.customInput||Xt.createElement("input",{type:"text"}),d=a.props.customInputRef||"ref",u=a.props,h=u.dateFormat,f=h===void 0?t.defaultProps.dateFormat:h,p=u.locale,v=typeof a.props.value=="string"?a.props.value:typeof a.state.inputValue=="string"?a.state.inputValue:a.props.selectsRange?fUe(a.props.startDate,a.props.endDate,{dateFormat:f,locale:p}):a.props.selectsMultiple?mUe((o=a.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:f,locale:p}):Rc(a.props.selected,{dateFormat:f,locale:p});return j.cloneElement(c,(i={},i[d]=function(g){a.input=g},i.value=v,i.onBlur=a.handleBlur,i.onChange=a.handleChange,i.onClick=a.onInputClick,i.onFocus=a.handleFocus,i.onKeyDown=a.onInputKeyDown,i.id=a.props.id,i.name=a.props.name,i.form=a.props.form,i.autoFocus=a.props.autoFocus,i.placeholder=a.props.placeholderText,i.disabled=a.props.disabled,i.autoComplete=a.props.autoComplete,i.className=aa(c.props.className,l),i.title=a.props.title,i.readOnly=a.props.readOnly,i.required=a.props.required,i.tabIndex=a.props.tabIndex,i["aria-describedby"]=a.props.ariaDescribedBy,i["aria-invalid"]=a.props.ariaInvalid,i["aria-labelledby"]=a.props.ariaLabelledBy,i["aria-required"]=a.props.ariaRequired,i))},a.renderClearButton=function(){var s=a.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,h=s.clearButtonClassName,f=h===void 0?"":h,p=s.ariaLabelClose,v=p===void 0?"Close":p,g=s.selectedDates,b=s.readOnly;return i&&!b&&(l!=null||c!=null||d!=null||g?.length)?Xt.createElement("button",{type:"button",className:aa("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:a.onClearClick,title:u,tabIndex:-1}):null},a.state=a.calcInitialState(),a.preventFocusTimeout=void 0,a}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:K1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,a){var s,i,o,l;r.inline&&n$e(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:LU(this.props.highlightDates)}),!a.focused&&!fx(r.selected,this.props.selected)&&this.setState({inputValue:null}),a.open!==this.state.open&&(a.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),a.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,a=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Xt.createElement("div",{className:"react-datepicker__input-container".concat(a?" react-datepicker__view-calendar-icon":"")},a&&Xt.createElement(JUe,za({icon:s,className:aa(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var a=this.state.open?Xt.createElement(EJ,{enableTabLoop:this.props.enableTabLoop},Xt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(a=Xt.createElement(kJ,za({portalId:this.props.portalId},this.props),a)),Xt.createElement("div",null,this.renderInputContainer(),a)}return Xt.createElement(a$e,za({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(j.Component),s$e="input",h5="navigate";const i$e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(1),[o]=j.useState(5),[l,c]=j.useState(!0),[d,u]=j.useState(0),[h,f]=j.useState(""),[p,v]=j.useState(""),[g,b]=j.useState(null),[y,S]=j.useState(null);j.useEffect(()=>{w()},[]),j.useEffect(()=>{C()},[e,p,g,y,s,h]);const w=()=>{c(!0),Ie.get("/api/leave/all").then(I=>{const F=I.data.sort((A,P)=>new Date(P.createdAt)-new Date(A.createdAt));console.log("Sorted Data:",F),t(F),c(!1)}).catch(I=>{console.error("Error fetching leave requests:",I),c(!1)})},k=(I,F)=>{Ie.put(`/api/leave/${I}`,{status:F}).then(()=>{w()}).catch(A=>{console.error("Error updating leave status:",A)})},C=()=>{let I=[...e];if(p&&(I=I.filter(V=>V.status===p)),g&&y&&(I=I.filter(V=>{const Y=new Date(V.requestedDate),B=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),Q=new Date(g.getFullYear(),g.getMonth(),g.getDate()),R=new Date(y.getFullYear(),y.getMonth(),y.getDate());return B>=Q&&B<=R})),h.trim()!==""){const V=h.toLowerCase();I=I.filter(Y=>Y.employeeId&&Y.employeeId.toLowerCase().includes(V)||(Y.name||Y.employeeName)&&(Y.name||Y.employeeName).toLowerCase().includes(V)||Y.leaveType&&Y.leaveType.toLowerCase().includes(V)||Y.reason&&Y.reason.toLowerCase().includes(V))}const F=Math.ceil(I.length/o);u(F);const A=s*o,P=A-o,q=I.slice(P,A);a(q)},_=()=>{v(""),b(null),S(null),i(1),f("")},E=I=>{i(I)},T=I=>{if(!I)return"-";try{return new Date(I).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(" ","/")}catch{return"-"}};return n.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("h3",{children:"Leave Request Management"})})})})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gx-3",children:[n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",value:p,onChange:I=>v(I.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"}),n.jsx("option",{value:"Hold",children:"Hold"})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by employee ID, name, leave type, or reason...",value:h,onChange:I=>f(I.target.value)})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Request Date Range"}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx(WU,{selected:g,onChange:I=>b(I),selectsStart:!0,startDate:g,endDate:y,placeholderText:"dd/mm/yyyy",className:"form-control me-2",dateFormat:"dd/MM/yyyy"}),n.jsx(WU,{selected:y,onChange:I=>S(I),selectsEnd:!0,startDate:g,endDate:y,minDate:g,placeholderText:"dd/mm/yyyy",className:"form-control",dateFormat:"dd/MM/yyyy"})]})]}),n.jsxs("div",{className:"col-5 d-flex justify-content-end mt-3",children:[n.jsx("button",{className:"btn btn-primary me-2",onClick:C,style:{width:"120px",height:"38px"},children:"Apply Filters"}),n.jsx("button",{className:"btn btn-secondary",onClick:_,style:{width:"120px",height:"38px"},children:"Reset Filters"})]})]})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"table-responsive",children:[l?n.jsx("div",{className:"text-center p-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Leave Type"}),n.jsx("th",{children:"Requested Date"}),n.jsx("th",{children:"From Date"}),n.jsx("th",{children:"To Date"}),n.jsx("th",{children:"Reason"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.length>0?r.map(I=>n.jsxs("tr",{children:[n.jsx("td",{style:{textWrap:"wrap"},children:I.employeeId}),n.jsx("td",{style:{textWrap:"wrap"},children:I.name||I.employeeName}),n.jsx("td",{children:I.leaveType}),n.jsx("td",{children:I.requestedDate?T(I.requestedDate):"-"}),n.jsx("td",{children:T(I.fromDate)}),n.jsx("td",{children:T(I.toDate)}),n.jsx("td",{children:n.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:I.reason})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I.status==="Approved"?"bg-success":I.status==="Rejected"?"bg-danger":I.status==="Hold"?"bg-info":"bg-warning"}`,children:I.status})}),n.jsx("td",{children:n.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:I.status,onChange:F=>k(I._id,F.target.value),disabled:I.status==="Approved"||I.status==="Rejected",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"}),n.jsx("option",{value:"Hold",children:"Hold"})]})})]},I._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No leave requests found."})})})]}),d>0&&n.jsx("div",{className:"d-flex justify-content-left mt-4",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(s-1),disabled:s===1,children:n.jsx("i",{className:"fas fa-angle-double-left"})})}),n.jsx("li",{className:`page-item ${s===1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(1),children:"1"})}),s>3&&d>4&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),Array.from({length:d},(I,F)=>{const A=F+1;return A>1&&A<d&&Math.abs(A-s)<=1?n.jsx("li",{className:`page-item ${s===A?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(A),children:A})},A):null}),s<d-2&&d>4&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),d>1&&n.jsx("li",{className:`page-item ${s===d?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(d),children:d})}),n.jsx("li",{className:`page-item ${s===d?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(s+1),disabled:s===d,children:n.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]})})})]})})},o$e="modulepreload",l$e=function(e){return"/"+e},GU={},j3=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=l$e(d),d in GU)return;GU[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":o$e,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var Ro=Uint8Array,ac=Uint16Array,nO=Int32Array,RC=new Ro([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FC=new Ro([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),N3=new Ro([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_J=function(e,t){for(var r=new ac(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new nO(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},DJ=_J(RC,2),AJ=DJ.b,w3=DJ.r;AJ[28]=258,w3[258]=28;var TJ=_J(FC,0),c$e=TJ.b,YU=TJ.r,S3=new ac(32768);for(var Gn=0;Gn<32768;++Gn){var Sm=(Gn&43690)>>1|(Gn&21845)<<1;Sm=(Sm&52428)>>2|(Sm&13107)<<2,Sm=(Sm&61680)>>4|(Sm&3855)<<4,S3[Gn]=((Sm&65280)>>8|(Sm&255)<<8)>>1}var Ku=function(e,t,r){for(var a=e.length,s=0,i=new ac(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new ac(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new ac(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[S3[h]>>c]=d}else for(l=new ac(a),s=0;s<a;++s)e[s]&&(l[s]=S3[o[e[s]-1]++]>>15-e[s]);return l},rp=new Ro(288);for(var Gn=0;Gn<144;++Gn)rp[Gn]=8;for(var Gn=144;Gn<256;++Gn)rp[Gn]=9;for(var Gn=256;Gn<280;++Gn)rp[Gn]=7;for(var Gn=280;Gn<288;++Gn)rp[Gn]=8;var i1=new Ro(32);for(var Gn=0;Gn<32;++Gn)i1[Gn]=5;var d$e=Ku(rp,9,0),u$e=Ku(rp,9,1),h$e=Ku(i1,5,0),f$e=Ku(i1,5,1),f5=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Nd=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},m5=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},sO=function(e){return(e+7)/8|0},IJ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Ro(e.subarray(t,r))},m$e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Sd=function(e,t,r){var a=new Error(t||m$e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Sd),!r)throw a;return a},p$e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new Ro(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Ro(s*3));var d=function(de){var H=r.length;if(de>H){var se=new Ro(Math.max(H*2,de));se.set(r),r=se}},u=t.f||0,h=t.p||0,f=t.b||0,p=t.l,v=t.d,g=t.m,b=t.n,y=s*8;do{if(!p){u=Nd(e,h,1);var S=Nd(e,h+1,3);if(h+=3,S)if(S==1)p=u$e,v=f$e,g=9,b=5;else if(S==2){var _=Nd(e,h,31)+257,E=Nd(e,h+10,15)+4,T=_+Nd(e,h+5,31)+1;h+=14;for(var I=new Ro(T),F=new Ro(19),A=0;A<E;++A)F[N3[A]]=Nd(e,h+A*3,7);h+=E*3;for(var P=f5(F),q=(1<<P)-1,V=Ku(F,P,1),A=0;A<T;){var Y=V[Nd(e,h,q)];h+=Y&15;var w=Y>>4;if(w<16)I[A++]=w;else{var B=0,Q=0;for(w==16?(Q=3+Nd(e,h,3),h+=2,B=I[A-1]):w==17?(Q=3+Nd(e,h,7),h+=3):w==18&&(Q=11+Nd(e,h,127),h+=7);Q--;)I[A++]=B}}var R=I.subarray(0,_),Z=I.subarray(_);g=f5(R),b=f5(Z),p=Ku(R,g,1),v=Ku(Z,b,1)}else Sd(1);else{var w=sO(h)+4,k=e[w-4]|e[w-3]<<8,C=w+k;if(C>s){c&&Sd(0);break}l&&d(f+k),r.set(e.subarray(w,C),f),t.b=f+=k,t.p=h=C*8,t.f=u;continue}if(h>y){c&&Sd(0);break}}l&&d(f+131072);for(var J=(1<<g)-1,ie=(1<<b)-1,M=h;;M=h){var B=p[m5(e,h)&J],z=B>>4;if(h+=B&15,h>y){c&&Sd(0);break}if(B||Sd(2),z<256)r[f++]=z;else if(z==256){M=h,p=null;break}else{var ee=z-254;if(z>264){var A=z-257,ne=RC[A];ee=Nd(e,h,(1<<ne)-1)+AJ[A],h+=ne}var W=v[m5(e,h)&ie],re=W>>4;W||Sd(3),h+=W&15;var Z=c$e[re];if(re>3){var ne=FC[re];Z+=m5(e,h)&(1<<ne)-1,h+=ne}if(h>y){c&&Sd(0);break}l&&d(f+131072);var le=f+ee;if(f<Z){var te=i-Z,K=Math.min(Z,le);for(te+f<0&&Sd(3);f<K;++f)r[f]=a[te+f]}for(;f<le;++f)r[f]=r[f-Z]}}t.l=p,t.p=M,t.b=f,t.f=u,p&&(u=1,t.m=g,t.d=v,t.n=b)}while(!u);return f!=r.length&&o?IJ(r,0,f):r.subarray(0,f)},Bh=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Yb=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},p5=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:OJ,l:0};if(s==1){var o=new Ro(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(C,_){return C.f-_.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,a=1;a<s;++a)i[a].s>f&&(f=i[a].s);var p=new ac(f+1),v=C3(r[u-1],p,0);if(v>t){var a=0,g=0,b=v-t,y=1<<b;for(i.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});a<s;++a){var S=i[a].s;if(p[S]>t)g+=y-(1<<v-p[S]),p[S]=t;else break}for(g>>=b;g>0;){var w=i[a].s;p[w]<t?g-=1<<t-p[w]++-1:++a}for(;a>=0&&g;--a){var k=i[a].s;p[k]==t&&(--p[k],++g)}v=t}return{t:new Ro(p),l:v}},C3=function(e,t,r){return e.s==-1?Math.max(C3(e.l,t,r+1),C3(e.r,t,r+1)):t[e.s]=r},KU=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ac(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Kb=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},PJ=function(e,t,r){var a=r.length,s=sO(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},XU=function(e,t,r,a,s,i,o,l,c,d,u){Bh(t,u++,r),++s[256];for(var h=p5(s,15),f=h.t,p=h.l,v=p5(i,15),g=v.t,b=v.l,y=KU(f),S=y.c,w=y.n,k=KU(g),C=k.c,_=k.n,E=new ac(19),T=0;T<S.length;++T)++E[S[T]&31];for(var T=0;T<C.length;++T)++E[C[T]&31];for(var I=p5(E,7),F=I.t,A=I.l,P=19;P>4&&!F[N3[P-1]];--P);var q=d+5<<3,V=Kb(s,rp)+Kb(i,i1)+o,Y=Kb(s,f)+Kb(i,g)+o+14+3*P+Kb(E,F)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&q<=V&&q<=Y)return PJ(t,u,e.subarray(c,c+d));var B,Q,R,Z;if(Bh(t,u,1+(Y<V)),u+=2,Y<V){B=Ku(f,p,0),Q=f,R=Ku(g,b,0),Z=g;var J=Ku(F,A,0);Bh(t,u,w-257),Bh(t,u+5,_-1),Bh(t,u+10,P-4),u+=14;for(var T=0;T<P;++T)Bh(t,u+3*T,F[N3[T]]);u+=3*P;for(var ie=[S,C],M=0;M<2;++M)for(var z=ie[M],T=0;T<z.length;++T){var ee=z[T]&31;Bh(t,u,J[ee]),u+=F[ee],ee>15&&(Bh(t,u,z[T]>>5&127),u+=z[T]>>12)}}else B=d$e,Q=rp,R=h$e,Z=i1;for(var T=0;T<l;++T){var ne=a[T];if(ne>255){var ee=ne>>18&31;Yb(t,u,B[ee+257]),u+=Q[ee+257],ee>7&&(Bh(t,u,ne>>23&31),u+=RC[ee]);var W=ne&31;Yb(t,u,R[W]),u+=Z[W],W>3&&(Yb(t,u,ne>>5&8191),u+=FC[W])}else Yb(t,u,B[ne]),u+=Q[ne]}return Yb(t,u,B[256]),u+Q[256]},x$e=new nO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OJ=new Ro(0),v$e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new Ro(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=x$e[t-1],f=h>>13,p=h&8191,v=(1<<r)-1,g=i.p||new ac(32768),b=i.h||new ac(v+1),y=Math.ceil(r/3),S=2*y,w=function(be){return(e[be]^e[be+1]<<y^e[be+2]<<S)&v},k=new nO(25e3),C=new ac(288),_=new ac(32),E=0,T=0,I=i.i||0,F=0,A=i.w||0,P=0;I+2<o;++I){var q=w(I),V=I&32767,Y=b[q];if(g[V]=Y,b[q]=V,A<=I){var B=o-I;if((E>7e3||F>24576)&&(B>423||!d)){u=XU(e,c,0,k,C,_,T,F,P,I-P,u),F=E=T=0,P=I;for(var Q=0;Q<286;++Q)C[Q]=0;for(var Q=0;Q<30;++Q)_[Q]=0}var R=2,Z=0,J=p,ie=V-Y&32767;if(B>2&&q==w(I-ie))for(var M=Math.min(f,B)-1,z=Math.min(32767,I),ee=Math.min(258,B);ie<=z&&--J&&V!=Y;){if(e[I+R]==e[I+R-ie]){for(var ne=0;ne<ee&&e[I+ne]==e[I+ne-ie];++ne);if(ne>R){if(R=ne,Z=ie,ne>M)break;for(var W=Math.min(ie,ne-2),re=0,Q=0;Q<W;++Q){var le=I-ie+Q&32767,te=g[le],K=le-te&32767;K>re&&(re=K,Y=le)}}}V=Y,Y=g[V],ie+=V-Y&32767}if(Z){k[F++]=268435456|w3[R]<<18|YU[Z];var de=w3[R]&31,H=YU[Z]&31;T+=RC[de]+FC[H],++C[257+de],++_[H],A=I+R,++E}else k[F++]=e[I],++C[e[I]]}}for(I=Math.max(I,A);I<o;++I)k[F++]=e[I],++C[e[I]];u=XU(e,c,d,k,C,_,T,F,P,I-P,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=I,i.w=A)}else{for(var I=i.w||0;I<o+d;I+=65535){var se=I+65535;se>=o&&(c[u/8|0]=d,se=o),u=PJ(c,u+1,e.subarray(I,se))}i.i=o}return IJ(l,0,a+sO(u)+s)},MJ=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},g$e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Ro(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return v$e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},RJ=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},b$e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=MJ();s.p(t.dictionary),RJ(e,2,s.d())}},y$e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Sd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Sd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function k3(e,t){t||(t={});var r=MJ();r.p(e);var a=g$e(e,t,t.dictionary?6:2,4);return b$e(a,t),RJ(a,a.length-4,r.d()),a}function j$e(e,t){return p$e(e.subarray(y$e(e),-4),{i:2},t,t)}var N$e=typeof TextDecoder<"u"&&new TextDecoder,w$e=0;try{N$e.decode(OJ,{stream:!0}),w$e=1}catch{}var ta=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function x5(){ta.console&&typeof ta.console.log=="function"&&ta.console.log.apply(ta.console,arguments)}var An={log:x5,warn:function(e){ta.console&&(typeof ta.console.warn=="function"?ta.console.warn.apply(ta.console,arguments):x5.call(null,arguments))},error:function(e){ta.console&&(typeof ta.console.error=="function"?ta.console.error.apply(ta.console,arguments):x5(e))}};function v5(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Xp(a.response,t,r)},a.onerror=function(){An.error("could not download file")},a.send()}function QU(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function GN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var gy,E3,Xp=ta.saveAs||((typeof window>"u"?"undefined":Ba(window))!=="object"||window!==ta?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=ta.URL||ta.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?QU(s.href)?v5(e,t,r):GN(s,s.target="_blank"):GN(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){GN(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(QU(e))v5(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){GN(a)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Ba(i)!=="object"&&(An.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return v5(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(ta.HTMLElement)||ta.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Ba(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=ta.URL||ta.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function FJ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function g5(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=go(r,a,s,i,t[0],7,-680876936),i=go(i,r,a,s,t[1],12,-389564586),s=go(s,i,r,a,t[2],17,606105819),a=go(a,s,i,r,t[3],22,-1044525330),r=go(r,a,s,i,t[4],7,-176418897),i=go(i,r,a,s,t[5],12,1200080426),s=go(s,i,r,a,t[6],17,-1473231341),a=go(a,s,i,r,t[7],22,-45705983),r=go(r,a,s,i,t[8],7,1770035416),i=go(i,r,a,s,t[9],12,-1958414417),s=go(s,i,r,a,t[10],17,-42063),a=go(a,s,i,r,t[11],22,-1990404162),r=go(r,a,s,i,t[12],7,1804603682),i=go(i,r,a,s,t[13],12,-40341101),s=go(s,i,r,a,t[14],17,-1502002290),r=bo(r,a=go(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=bo(i,r,a,s,t[6],9,-1069501632),s=bo(s,i,r,a,t[11],14,643717713),a=bo(a,s,i,r,t[0],20,-373897302),r=bo(r,a,s,i,t[5],5,-701558691),i=bo(i,r,a,s,t[10],9,38016083),s=bo(s,i,r,a,t[15],14,-660478335),a=bo(a,s,i,r,t[4],20,-405537848),r=bo(r,a,s,i,t[9],5,568446438),i=bo(i,r,a,s,t[14],9,-1019803690),s=bo(s,i,r,a,t[3],14,-187363961),a=bo(a,s,i,r,t[8],20,1163531501),r=bo(r,a,s,i,t[13],5,-1444681467),i=bo(i,r,a,s,t[2],9,-51403784),s=bo(s,i,r,a,t[7],14,1735328473),r=yo(r,a=bo(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=yo(i,r,a,s,t[8],11,-2022574463),s=yo(s,i,r,a,t[11],16,1839030562),a=yo(a,s,i,r,t[14],23,-35309556),r=yo(r,a,s,i,t[1],4,-1530992060),i=yo(i,r,a,s,t[4],11,1272893353),s=yo(s,i,r,a,t[7],16,-155497632),a=yo(a,s,i,r,t[10],23,-1094730640),r=yo(r,a,s,i,t[13],4,681279174),i=yo(i,r,a,s,t[0],11,-358537222),s=yo(s,i,r,a,t[3],16,-722521979),a=yo(a,s,i,r,t[6],23,76029189),r=yo(r,a,s,i,t[9],4,-640364487),i=yo(i,r,a,s,t[12],11,-421815835),s=yo(s,i,r,a,t[15],16,530742520),r=jo(r,a=yo(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=jo(i,r,a,s,t[7],10,1126891415),s=jo(s,i,r,a,t[14],15,-1416354905),a=jo(a,s,i,r,t[5],21,-57434055),r=jo(r,a,s,i,t[12],6,1700485571),i=jo(i,r,a,s,t[3],10,-1894986606),s=jo(s,i,r,a,t[10],15,-1051523),a=jo(a,s,i,r,t[1],21,-2054922799),r=jo(r,a,s,i,t[8],6,1873313359),i=jo(i,r,a,s,t[15],10,-30611744),s=jo(s,i,r,a,t[6],15,-1560198380),a=jo(a,s,i,r,t[13],21,1309151649),r=jo(r,a,s,i,t[4],6,-145523070),i=jo(i,r,a,s,t[11],10,-1120210379),s=jo(s,i,r,a,t[2],15,718787259),a=jo(a,s,i,r,t[9],21,-343485551),e[0]=Mm(r,e[0]),e[1]=Mm(a,e[1]),e[2]=Mm(s,e[2]),e[3]=Mm(i,e[3])}function LC(e,t,r,a,s,i){return t=Mm(Mm(t,e),Mm(a,i)),Mm(t<<s|t>>>32-s,r)}function go(e,t,r,a,s,i,o){return LC(t&r|~t&a,e,t,s,i,o)}function bo(e,t,r,a,s,i,o){return LC(t&a|r&~a,e,t,s,i,o)}function yo(e,t,r,a,s,i,o){return LC(t^r^a,e,t,s,i,o)}function jo(e,t,r,a,s,i,o){return LC(r^(t|~a),e,t,s,i,o)}function LJ(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)g5(a,S$e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(g5(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,g5(a,s),a}function S$e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}gy=ta.atob.bind(ta),E3=ta.btoa.bind(ta);var JU="0123456789abcdef".split("");function C$e(e){for(var t="",r=0;r<4;r++)t+=JU[e>>8*r+4&15]+JU[e>>8*r&15];return t}function k$e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _3(e){return LJ(e).map(k$e).join("")}var E$e=function(e){for(var t=0;t<e.length;t++)e[t]=C$e(e[t]);return e.join("")}(LJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Mm(e,t){if(E$e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D3(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var h=t.length,f=0,p=0,v="";for(c=0;c<h;c++)p=(p+(u=l[f=(f+1)%256]))%256,l[f]=l[p],l[p]=u,o=l[(l[f]+l[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ZU={print:4,modify:8,copy:16,"annot-forms":32};function h0(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(ZU.perm!==void 0)throw new Error("Invalid permission: "+l);s+=ZU[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=_3(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=D3(this.encryptionKey,this.padding)}function f0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function e$(e){if(Ba(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){ta.console&&An.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function lS(e){if(!(this instanceof lS))return new lS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function BJ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Zp(e,t,r,a,s){if(!(this instanceof Zp))return new Zp(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,BJ.call(this,a,s)}function b0(e,t,r,a,s){if(!(this instanceof b0))return new b0(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,BJ.call(this,a,s)}function Jr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Ba(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=e$;var v="1.3",g=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(X){v=X};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(X){return b[X]};s=s||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},w=S.COMPAT;function k(){this.saveGraphicsState(),oe(new Rt(pe,0,0,-pe,0,Qd()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),d="n",w=S.ADVANCED}function C(){this.restoreGraphicsState(),d="S",w=S.COMPAT}var _=p.__private__.combineFontStyleAndFontWeight=function(X,je){if(X=="bold"&&je=="normal"||X=="bold"&&je==400||X=="normal"&&je=="italic"||X=="bold"&&je=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return je&&(X=je==400||je==="normal"?X==="italic"?"italic":"normal":je!=700&&je!=="bold"||X!=="normal"?(je==700?"bold":je)+""+X:"bold"),X};p.advancedAPI=function(X){var je=w===S.COMPAT;return je&&k.call(this),typeof X!="function"||(X(this),je&&C.call(this)),this},p.compatAPI=function(X){var je=w===S.ADVANCED;return je&&C.call(this),typeof X!="function"||(X(this),je&&k.call(this)),this},p.isAdvancedAPI=function(){return w===S.ADVANCED};var E,T=function(X){if(w!==S.ADVANCED)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(X,je){var Qe=t||je;if(isNaN(X)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(Qe).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,c)}:c==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,16)};var F=p.f2=p.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return I(X,2)},A=p.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return I(X,3)},P=p.scale=p.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return w===S.COMPAT?X*pe:w===S.ADVANCED?X:void 0},q=function(X){return w===S.COMPAT?Qd()-X:w===S.ADVANCED?X:void 0},V=function(X){return P(q(X))};p.__private__.setPrecision=p.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(t=parseInt(X,10))};var Y,B="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return B},R=p.__private__.setFileId=function(X){return B=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(bs=new h0(u.userPermissions,u.userPassword,u.ownerPassword,B)),B};p.setFileId=function(X){return R(X),this},p.getFileId=function(){return Q()};var Z=p.__private__.convertDateToPDFDate=function(X){var je=X.getTimezoneOffset(),Qe=je<0?"+":"-",nt=Math.floor(Math.abs(je/60)),yt=Math.abs(je%60),qt=[Qe,ee(nt),"'",ee(yt),"'"].join("");return["D:",X.getFullYear(),ee(X.getMonth()+1),ee(X.getDate()),ee(X.getHours()),ee(X.getMinutes()),ee(X.getSeconds()),qt].join("")},J=p.__private__.convertPDFDateToDate=function(X){var je=parseInt(X.substr(2,4),10),Qe=parseInt(X.substr(6,2),10)-1,nt=parseInt(X.substr(8,2),10),yt=parseInt(X.substr(10,2),10),qt=parseInt(X.substr(12,2),10),dr=parseInt(X.substr(14,2),10);return new Date(je,Qe,nt,yt,qt,dr,0)},ie=p.__private__.setCreationDate=function(X){var je;if(X===void 0&&(X=new Date),X instanceof Date)je=Z(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");je=X}return Y=je},M=p.__private__.getCreationDate=function(X){var je=Y;return X==="jsDate"&&(je=J(Y)),je};p.setCreationDate=function(X){return ie(X),this},p.getCreationDate=function(X){return M(X)};var z,ee=p.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},ne=p.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},W=0,re=[],le=[],te=0,K=[],de=[],H=!1,se=le,be=function(){W=0,te=0,le=[],re=[],K=[],Ae=Bt(),_e=Bt()};p.__private__.setCustomOutputDestination=function(X){H=!0,se=X};var ue=function(X){H||(se=X)};p.__private__.resetCustomOutputDestination=function(){H=!1,se=le};var oe=p.__private__.out=function(X){return X=X.toString(),te+=X.length+1,se.push(X),se},ge=p.__private__.write=function(X){return oe(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},Ne=p.__private__.getArrayBuffer=function(X){for(var je=X.length,Qe=new ArrayBuffer(je),nt=new Uint8Array(Qe);je--;)nt[je]=X.charCodeAt(je);return Qe},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Me};var We=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(X){return We=w===S.ADVANCED?X/pe:X,this};var tt,mt=p.__private__.getFontSize=p.getFontSize=function(){return w===S.COMPAT?We:We*pe},Be=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(X){return Be=X,this},p.__private__.getR2L=p.getR2L=function(){return Be};var dt,Dt=p.__private__.setZoomMode=function(X){var je=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))tt=X;else if(isNaN(X)){if(je.indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');tt=X}else tt=parseInt(X,10)};p.__private__.getZoomMode=function(){return tt};var It,zt=p.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');dt=X};p.__private__.getPageMode=function(){return dt};var xe=p.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');It=X};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(X,je,Qe){return Dt(X),xe(je),zt(Qe),this};var fe={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(X){if(Object.keys(fe).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return fe[X]},p.__private__.getDocumentProperties=function(){return fe},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(X){for(var je in fe)fe.hasOwnProperty(je)&&X[je]&&(fe[je]=X[je]);return this},p.__private__.setDocumentProperty=function(X,je){if(Object.keys(fe).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return fe[X]=je};var ve,pe,Te,Xe,kt,Je={},ze={},Fe=[],Ve={},pt={},Pe={},Re={},Ye=null,At=0,Gt=[],De=new e$(p),Ee=e.hotfixes||[],it={},Tt={},lr=[],Rt=function X(je,Qe,nt,yt,qt,dr){if(!(this instanceof X))return new X(je,Qe,nt,yt,qt,dr);isNaN(je)&&(je=1),isNaN(Qe)&&(Qe=0),isNaN(nt)&&(nt=0),isNaN(yt)&&(yt=1),isNaN(qt)&&(qt=0),isNaN(dr)&&(dr=0),this._matrix=[je,Qe,nt,yt,qt,dr]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(X)},Rt.prototype.multiply=function(X){var je=X.sx*this.sx+X.shy*this.shx,Qe=X.sx*this.shy+X.shy*this.sy,nt=X.shx*this.sx+X.sy*this.shx,yt=X.shx*this.shy+X.sy*this.sy,qt=X.tx*this.sx+X.ty*this.shx+this.tx,dr=X.tx*this.shy+X.ty*this.sy+this.ty;return new Rt(je,Qe,nt,yt,qt,dr)},Rt.prototype.decompose=function(){var X=this.sx,je=this.shy,Qe=this.shx,nt=this.sy,yt=this.tx,qt=this.ty,dr=Math.sqrt(X*X+je*je),Sr=(X/=dr)*Qe+(je/=dr)*nt;Qe-=X*Sr,nt-=je*Sr;var Rr=Math.sqrt(Qe*Qe+nt*nt);return Sr/=Rr,X*(nt/=Rr)<je*(Qe/=Rr)&&(X=-X,je=-je,Sr=-Sr,dr=-dr),{scale:new Rt(dr,0,0,Rr,0,0),translate:new Rt(1,0,0,1,yt,qt),rotate:new Rt(X,je,-je,X,0,0),skew:new Rt(1,0,Sr,1,0,0)}},Rt.prototype.toString=function(X){return this.join(" ")},Rt.prototype.inversed=function(){var X=this.sx,je=this.shy,Qe=this.shx,nt=this.sy,yt=this.tx,qt=this.ty,dr=1/(X*nt-je*Qe),Sr=nt*dr,Rr=-je*dr,ca=-Qe*dr,ia=X*dr;return new Rt(Sr,Rr,ca,ia,-Sr*yt-ca*qt,-Rr*yt-ia*qt)},Rt.prototype.applyToPoint=function(X){var je=X.x*this.sx+X.y*this.shx+this.tx,Qe=X.x*this.shy+X.y*this.sy+this.ty;return new Rf(je,Qe)},Rt.prototype.applyToRectangle=function(X){var je=this.applyToPoint(X),Qe=this.applyToPoint(new Rf(X.x+X.w,X.y+X.h));return new vp(je.x,je.y,Qe.x-je.x,Qe.y-je.y)},Rt.prototype.clone=function(){var X=this.sx,je=this.shy,Qe=this.shx,nt=this.sy,yt=this.tx,qt=this.ty;return new Rt(X,je,Qe,nt,yt,qt)},p.Matrix=Rt;var sr=p.matrixMult=function(X,je){return je.multiply(X)},pr=new Rt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=pr;var Nr=function(X,je){if(!pt[X]){var Qe=(je instanceof Zp?"Sh":"P")+(Object.keys(Ve).length+1).toString(10);je.id=Qe,pt[X]=Qe,Ve[Qe]=je,De.publish("addPattern",je)}};p.ShadingPattern=Zp,p.TilingPattern=b0,p.addShadingPattern=function(X,je){return T("addShadingPattern()"),Nr(X,je),this},p.beginTilingPattern=function(X){T("beginTilingPattern()"),Ff(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},p.endTilingPattern=function(X,je){T("endTilingPattern()"),je.stream=de[z].join(`
`),Nr(X,je),De.publish("endTilingPattern",je),lr.pop().restore()};var gt=p.__private__.newObject=function(){var X=Bt();return he(X,!0),X},Bt=p.__private__.newObjectDeferred=function(){return W++,re[W]=function(){return te},W},he=function(X,je){return je=typeof je=="boolean"&&je,re[X]=te,je&&oe(X+" 0 obj"),X},Le=p.__private__.newAdditionalObject=function(){var X={objId:Bt(),content:""};return K.push(X),X},Ae=Bt(),_e=Bt(),Ue=p.__private__.decodeColorString=function(X){var je=X.split(" ");if(je.length!==2||je[1]!=="g"&&je[1]!=="G")je.length===5&&(je[4]==="k"||je[4]==="K")&&(je=[(1-je[0])*(1-je[3]),(1-je[1])*(1-je[3]),(1-je[2])*(1-je[3]),"r"]);else{var Qe=parseFloat(je[0]);je=[Qe,Qe,Qe,"r"]}for(var nt="#",yt=0;yt<3;yt++)nt+=("0"+Math.floor(255*parseFloat(je[yt])).toString(16)).slice(-2);return nt},He=p.__private__.encodeColorString=function(X){var je;typeof X=="string"&&(X={ch1:X});var Qe=X.ch1,nt=X.ch2,yt=X.ch3,qt=X.ch4,dr=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var Sr=new FJ(Qe);if(Sr.ok)Qe=Sr.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var Rr=parseInt(Qe.substr(1),16);Qe=Rr>>16&255,nt=Rr>>8&255,yt=255&Rr}if(nt===void 0||qt===void 0&&Qe===nt&&nt===yt)if(typeof Qe=="string")je=Qe+" "+dr[0];else switch(X.precision){case 2:je=F(Qe/255)+" "+dr[0];break;case 3:default:je=A(Qe/255)+" "+dr[0]}else if(qt===void 0||Ba(qt)==="object"){if(qt&&!isNaN(qt.a)&&qt.a===0)return je=["1.","1.","1.",dr[1]].join(" ");if(typeof Qe=="string")je=[Qe,nt,yt,dr[1]].join(" ");else switch(X.precision){case 2:je=[F(Qe/255),F(nt/255),F(yt/255),dr[1]].join(" ");break;default:case 3:je=[A(Qe/255),A(nt/255),A(yt/255),dr[1]].join(" ")}}else if(typeof Qe=="string")je=[Qe,nt,yt,qt,dr[2]].join(" ");else switch(X.precision){case 2:je=[F(Qe),F(nt),F(yt),F(qt),dr[2]].join(" ");break;case 3:default:je=[A(Qe),A(nt),A(yt),A(qt),dr[2]].join(" ")}return je},xt=p.__private__.getFilters=function(){return o},jt=p.__private__.putStream=function(X){var je=(X=X||{}).data||"",Qe=X.filters||xt(),nt=X.alreadyAppliedFilters||[],yt=X.addLength1||!1,qt=je.length,dr=X.objectId,Sr=function(os){return os};if(u!==null&&dr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Sr=bs.encryptor(dr,0));var Rr={};Qe===!0&&(Qe=["FlateEncode"]);var ca=X.additionalKeyValues||[],ia=(Rr=Jr.API.processDataByFilters!==void 0?Jr.API.processDataByFilters(je,Qe):{data:je,reverseChain:[]}).reverseChain+(Array.isArray(nt)?nt.join(" "):nt.toString());if(Rr.data.length!==0&&(ca.push({key:"Length",value:Rr.data.length}),yt===!0&&ca.push({key:"Length1",value:qt})),ia.length!=0)if(ia.split("/").length-1==1)ca.push({key:"Filter",value:ia});else{ca.push({key:"Filter",value:"["+ia+"]"});for(var _a=0;_a<ca.length;_a+=1)if(ca[_a].key==="DecodeParms"){for(var Pn=[],$n=0;$n<Rr.reverseChain.split("/").length-1;$n+=1)Pn.push("null");Pn.push(ca[_a].value),ca[_a].value="["+Pn.join(" ")+"]"}}oe("<<");for(var is=0;is<ca.length;is++)oe("/"+ca[is].key+" "+ca[is].value);oe(">>"),Rr.data.length!==0&&(oe("stream"),oe(Sr(Rr.data)),oe("endstream"))},ct=p.__private__.putPage=function(X){var je=X.number,Qe=X.data,nt=X.objId,yt=X.contentsObjId;he(nt,!0),oe("<</Type /Page"),oe("/Parent "+X.rootDictionaryObjId+" 0 R"),oe("/Resources "+X.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(E(X.mediaBox.bottomLeftX))+" "+parseFloat(E(X.mediaBox.bottomLeftY))+" "+E(X.mediaBox.topRightX)+" "+E(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&oe("/CropBox ["+E(X.cropBox.bottomLeftX)+" "+E(X.cropBox.bottomLeftY)+" "+E(X.cropBox.topRightX)+" "+E(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&oe("/BleedBox ["+E(X.bleedBox.bottomLeftX)+" "+E(X.bleedBox.bottomLeftY)+" "+E(X.bleedBox.topRightX)+" "+E(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&oe("/TrimBox ["+E(X.trimBox.bottomLeftX)+" "+E(X.trimBox.bottomLeftY)+" "+E(X.trimBox.topRightX)+" "+E(X.trimBox.topRightY)+"]"),X.artBox!==null&&oe("/ArtBox ["+E(X.artBox.bottomLeftX)+" "+E(X.artBox.bottomLeftY)+" "+E(X.artBox.topRightX)+" "+E(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&oe("/UserUnit "+X.userUnit),De.publish("putPage",{objId:nt,pageContext:Gt[je],pageNumber:je,page:Qe}),oe("/Contents "+yt+" 0 R"),oe(">>"),oe("endobj");var qt=Qe.join(`
`);return w===S.ADVANCED&&(qt+=`
Q`),he(yt,!0),jt({data:qt,filters:xt(),objectId:yt}),oe("endobj"),nt},Nt=p.__private__.putPages=function(){var X,je,Qe=[];for(X=1;X<=At;X++)Gt[X].objId=Bt(),Gt[X].contentsObjId=Bt();for(X=1;X<=At;X++)Qe.push(ct({number:X,data:de[X],objId:Gt[X].objId,contentsObjId:Gt[X].contentsObjId,mediaBox:Gt[X].mediaBox,cropBox:Gt[X].cropBox,bleedBox:Gt[X].bleedBox,trimBox:Gt[X].trimBox,artBox:Gt[X].artBox,userUnit:Gt[X].userUnit,rootDictionaryObjId:Ae,resourceDictionaryObjId:_e}));he(Ae,!0),oe("<</Type /Pages");var nt="/Kids [";for(je=0;je<At;je++)nt+=Qe[je]+" 0 R ";oe(nt+"]"),oe("/Count "+At),oe(">>"),oe("endobj"),De.publish("postPutPages")},wt=function(X){De.publish("putFont",{font:X,out:oe,newObject:gt,putStream:jt}),X.isAlreadyPutted!==!0&&(X.objectNumber=gt(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+f0(X.postScriptName)),oe("/Subtype /Type1"),typeof X.encoding=="string"&&oe("/Encoding /"+X.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},er=function(){for(var X in Je)Je.hasOwnProperty(X)&&(h===!1||h===!0&&f.hasOwnProperty(X))&&wt(Je[X])},cr=function(X){X.objectNumber=gt();var je=[];je.push({key:"Type",value:"/XObject"}),je.push({key:"Subtype",value:"/Form"}),je.push({key:"BBox",value:"["+[E(X.x),E(X.y),E(X.x+X.width),E(X.y+X.height)].join(" ")+"]"}),je.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var Qe=X.pages[1].join(`
`);jt({data:Qe,additionalKeyValues:je,objectId:X.objectNumber}),oe("endobj")},xr=function(){for(var X in it)it.hasOwnProperty(X)&&cr(it[X])},ur=function(X,je){var Qe,nt=[],yt=1/(je-1);for(Qe=0;Qe<1;Qe+=yt)nt.push(Qe);if(nt.push(1),X[0].offset!=0){var qt={offset:0,color:X[0].color};X.unshift(qt)}if(X[X.length-1].offset!=1){var dr={offset:1,color:X[X.length-1].color};X.push(dr)}for(var Sr="",Rr=0,ca=0;ca<nt.length;ca++){for(Qe=nt[ca];Qe>X[Rr+1].offset;)Rr++;var ia=X[Rr].offset,_a=(Qe-ia)/(X[Rr+1].offset-ia),Pn=X[Rr].color,$n=X[Rr+1].color;Sr+=ne(Math.round((1-_a)*Pn[0]+_a*$n[0]).toString(16))+ne(Math.round((1-_a)*Pn[1]+_a*$n[1]).toString(16))+ne(Math.round((1-_a)*Pn[2]+_a*$n[2]).toString(16))}return Sr.trim()},Ke=function(X,je){je||(je=21);var Qe=gt(),nt=ur(X.colors,je),yt=[];yt.push({key:"FunctionType",value:"0"}),yt.push({key:"Domain",value:"[0.0 1.0]"}),yt.push({key:"Size",value:"["+je+"]"}),yt.push({key:"BitsPerSample",value:"8"}),yt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt({data:nt,additionalKeyValues:yt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),oe("endobj"),X.objectNumber=gt(),oe("<< /ShadingType "+X.type),oe("/ColorSpace /DeviceRGB");var qt="/Coords ["+E(parseFloat(X.coords[0]))+" "+E(parseFloat(X.coords[1]))+" ";X.type===2?qt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3])):qt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3]))+" "+E(parseFloat(X.coords[4]))+" "+E(parseFloat(X.coords[5])),oe(qt+="]"),X.matrix&&oe("/Matrix ["+X.matrix.toString()+"]"),oe("/Function "+Qe+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},mr=function(X,je){var Qe=Bt(),nt=gt();je.push({resourcesOid:Qe,objectOid:nt}),X.objectNumber=nt;var yt=[];yt.push({key:"Type",value:"/Pattern"}),yt.push({key:"PatternType",value:"1"}),yt.push({key:"PaintType",value:"1"}),yt.push({key:"TilingType",value:"1"}),yt.push({key:"BBox",value:"["+X.boundingBox.map(E).join(" ")+"]"}),yt.push({key:"XStep",value:E(X.xStep)}),yt.push({key:"YStep",value:E(X.yStep)}),yt.push({key:"Resources",value:Qe+" 0 R"}),X.matrix&&yt.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),jt({data:X.stream,additionalKeyValues:yt,objectId:X.objectNumber}),oe("endobj")},fr=function(X){var je;for(je in Ve)Ve.hasOwnProperty(je)&&(Ve[je]instanceof Zp?Ke(Ve[je]):Ve[je]instanceof b0&&mr(Ve[je],X))},Lr=function(X){for(var je in X.objectNumber=gt(),oe("<<"),X)switch(je){case"opacity":oe("/ca "+F(X[je]));break;case"stroke-opacity":oe("/CA "+F(X[je]))}oe(">>"),oe("endobj")},fa=function(){var X;for(X in Pe)Pe.hasOwnProperty(X)&&Lr(Pe[X])},Pa=function(){for(var X in oe("/XObject <<"),it)it.hasOwnProperty(X)&&it[X].objectNumber>=0&&oe("/"+X+" "+it[X].objectNumber+" 0 R");De.publish("putXobjectDict"),oe(">>")},wn=function(){bs.oid=gt(),oe("<<"),oe("/Filter /Standard"),oe("/V "+bs.v),oe("/R "+bs.r),oe("/U <"+bs.toHexString(bs.U)+">"),oe("/O <"+bs.toHexString(bs.O)+">"),oe("/P "+bs.P),oe(">>"),oe("endobj")},Bn=function(){for(var X in oe("/Font <<"),Je)Je.hasOwnProperty(X)&&(h===!1||h===!0&&f.hasOwnProperty(X))&&oe("/"+X+" "+Je[X].objectNumber+" 0 R");oe(">>")},cn=function(){if(Object.keys(Ve).length>0){for(var X in oe("/Shading <<"),Ve)Ve.hasOwnProperty(X)&&Ve[X]instanceof Zp&&Ve[X].objectNumber>=0&&oe("/"+X+" "+Ve[X].objectNumber+" 0 R");De.publish("putShadingPatternDict"),oe(">>")}},Is=function(X){if(Object.keys(Ve).length>0){for(var je in oe("/Pattern <<"),Ve)Ve.hasOwnProperty(je)&&Ve[je]instanceof p.TilingPattern&&Ve[je].objectNumber>=0&&Ve[je].objectNumber<X&&oe("/"+je+" "+Ve[je].objectNumber+" 0 R");De.publish("putTilingPatternDict"),oe(">>")}},tn=function(){if(Object.keys(Pe).length>0){var X;for(X in oe("/ExtGState <<"),Pe)Pe.hasOwnProperty(X)&&Pe[X].objectNumber>=0&&oe("/"+X+" "+Pe[X].objectNumber+" 0 R");De.publish("putGStateDict"),oe(">>")}},Ga=function(X){he(X.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bn(),cn(),Is(X.objectOid),tn(),Pa(),oe(">>"),oe("endobj")},In=function(){var X=[];er(),fa(),xr(),fr(X),De.publish("putResources"),X.forEach(Ga),Ga({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),De.publish("postPutResources")},Ci=function(){De.publish("putAdditionalObjects");for(var X=0;X<K.length;X++){var je=K[X];he(je.objId,!0),oe(je.content),oe("endobj")}De.publish("postPutAdditionalObjects")},ki=function(X){ze[X.fontName]=ze[X.fontName]||{},ze[X.fontName][X.fontStyle]=X.id},Xn=function(X,je,Qe,nt,yt){var qt={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:X,fontName:je,fontStyle:Qe,encoding:nt,isStandardFont:yt||!1,metadata:{}};return De.publish("addFont",{font:qt,instance:this}),Je[qt.id]=qt,ki(qt),qt.id},kl=function(X){for(var je=0,Qe=Me.length;je<Qe;je++){var nt=Xn.call(this,X[je][0],X[je][1],X[je][2],Me[je][3],!0);h===!1&&(f[nt]=!0);var yt=X[je][0].split("-");ki({id:nt,fontName:yt[0],fontStyle:yt[1]||""})}De.publish("addFonts",{fonts:Je,dictionary:ze})},Un=function(X){return X.foo=function(){try{return X.apply(this,arguments)}catch(nt){var je=nt.stack||"";~je.indexOf(" at ")&&(je=je.split(" at ")[1]);var Qe="Error in function "+je.split(`
`)[0].split("<")[0]+": "+nt.message;if(!ta.console)throw new Error(Qe);ta.console.error(Qe,nt),ta.alert&&alert(Qe)}},X.foo.bar=X,X.foo},co=function(X,je){var Qe,nt,yt,qt,dr,Sr,Rr,ca,ia;if(yt=(je=je||{}).sourceEncoding||"Unicode",dr=je.outputEncoding,(je.autoencode||dr)&&Je[ve].metadata&&Je[ve].metadata[yt]&&Je[ve].metadata[yt].encoding&&(qt=Je[ve].metadata[yt].encoding,!dr&&Je[ve].encoding&&(dr=Je[ve].encoding),!dr&&qt.codePages&&(dr=qt.codePages[0]),typeof dr=="string"&&(dr=qt[dr]),dr)){for(Rr=!1,Sr=[],Qe=0,nt=X.length;Qe<nt;Qe++)(ca=dr[X.charCodeAt(Qe)])?Sr.push(String.fromCharCode(ca)):Sr.push(X[Qe]),Sr[Qe].charCodeAt(0)>>8&&(Rr=!0);X=Sr.join("")}for(Qe=X.length;Rr===void 0&&Qe!==0;)X.charCodeAt(Qe-1)>>8&&(Rr=!0),Qe--;if(!Rr)return X;for(Sr=je.noBOM?[]:[254,255],Qe=0,nt=X.length;Qe<nt;Qe++){if((ia=(ca=X.charCodeAt(Qe))>>8)>>8)throw new Error("Character at position "+Qe+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Sr.push(ia),Sr.push(ca-(ia<<8))}return String.fromCharCode.apply(void 0,Sr)},rn=p.__private__.pdfEscape=p.pdfEscape=function(X,je){return co(X,je).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vo=p.__private__.beginPage=function(X){de[++At]=[],Gt[At]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},ut(At),ue(de[z])},td=function(X,je){var Qe,nt,yt;switch(r=je||r,typeof X=="string"&&(Qe=y(X.toLowerCase()),Array.isArray(Qe)&&(nt=Qe[0],yt=Qe[1])),Array.isArray(X)&&(nt=X[0]*pe,yt=X[1]*pe),isNaN(nt)&&(nt=s[0],yt=s[1]),(nt>14400||yt>14400)&&(An.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),nt=Math.min(14400,nt),yt=Math.min(14400,yt)),s=[nt,yt],r.substr(0,1)){case"l":yt>nt&&(s=[yt,nt]);break;case"p":nt>yt&&(s=[yt,nt])}Vo(s),fv(Yd),oe(Al),xp!==0&&oe(xp+" J"),Mf!==0&&oe(Mf+" j"),De.publish("addPage",{pageNumber:At})},El=function(X){X>0&&X<=At&&(de.splice(X,1),Gt.splice(X,1),At--,z>At&&(z=At),this.setPage(z))},ut=function(X){X>0&&X<=At&&(z=X)},nr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return de.length-1},Ot=function(X,je,Qe){var nt,yt=void 0;return Qe=Qe||{},X=X!==void 0?X:Je[ve].fontName,je=je!==void 0?je:Je[ve].fontStyle,nt=X.toLowerCase(),ze[nt]!==void 0&&ze[nt][je]!==void 0?yt=ze[nt][je]:ze[X]!==void 0&&ze[X][je]!==void 0?yt=ze[X][je]:Qe.disableWarning===!1&&An.warn("Unable to look up font label for font '"+X+"', '"+je+"'. Refer to getFontList() for available fonts."),yt||Qe.noFallback||(yt=ze.times[je])==null&&(yt=ze.times.normal),yt},jr=p.__private__.putInfo=function(){var X=gt(),je=function(nt){return nt};for(var Qe in u!==null&&(je=bs.encryptor(X,0)),oe("<<"),oe("/Producer ("+rn(je("jsPDF "+Jr.version))+")"),fe)fe.hasOwnProperty(Qe)&&fe[Qe]&&oe("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+rn(je(fe[Qe]))+")");oe("/CreationDate ("+rn(je(Y))+")"),oe(">>"),oe("endobj")},gs=p.__private__.putCatalog=function(X){var je=(X=X||{}).rootDictionaryObjId||Ae;switch(gt(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+je+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+tt;Qe.substr(Qe.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+F(tt)+"]")}switch(It||(It="continuous"),It){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}dt&&oe("/PageMode /"+dt),De.publish("putCatalog"),oe(">>"),oe("endobj")},zd=p.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(W+1)),oe("/Root "+W+" 0 R"),oe("/Info "+(W-1)+" 0 R"),u!==null&&oe("/Encrypt "+bs.oid+" 0 R"),oe("/ID [ <"+B+"> <"+B+"> ]"),oe(">>")},Ei=p.__private__.putHeader=function(){oe("%PDF-"+v),oe("%")},ui=p.__private__.putXRef=function(){var X="0000000000";oe("xref"),oe("0 "+(W+1)),oe("0000000000 65535 f ");for(var je=1;je<=W;je++)typeof re[je]=="function"?oe((X+re[je]()).slice(-10)+" 00000 n "):re[je]!==void 0?oe((X+re[je]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},_l=p.__private__.buildDocument=function(){be(),ue(le),De.publish("buildDocument"),Ei(),Nt(),Ci(),In(),u!==null&&wn(),jr(),gs();var X=te;return ui(),zd(),oe("startxref"),oe(""+X),oe("%%EOF"),ue(de[z]),le.join(`
`)},Hd=p.__private__.getBlob=function(X){return new Blob([Ne(X)],{type:"application/pdf"})},Dl=p.output=p.__private__.output=Un(function(X,je){switch(typeof(je=je||{})=="string"?je={filename:je}:je.filename=je.filename||"generated.pdf",X){case void 0:return _l();case"save":p.save(je.filename);break;case"arraybuffer":return Ne(_l());case"blob":return Hd(_l());case"bloburi":case"bloburl":if(ta.URL!==void 0&&typeof ta.URL.createObjectURL=="function")return ta.URL&&ta.URL.createObjectURL(Hd(_l()))||void 0;An.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",nt=_l();try{Qe=E3(nt)}catch{Qe=E3(unescape(encodeURIComponent(nt)))}return"data:application/pdf;filename="+je.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ta)==="[object Window]"){var yt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';je.pdfObjectUrl&&(yt=je.pdfObjectUrl,qt="");var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yt+'"'+qt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(je)+");<\/script></body></html>",Sr=ta.open();return Sr!==null&&Sr.document.write(dr),Sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ta)==="[object Window]"){var Rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(je.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+je.filename+'" width="500px" height="400px" /></body></html>',ca=ta.open();if(ca!==null){ca.document.write(Rr);var ia=this;ca.document.documentElement.querySelector("#pdfViewer").onload=function(){ca.document.title=je.filename,ca.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ia.output("bloburl"))}}return ca}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ta)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",je)+'"></iframe></body></html>',Pn=ta.open();if(Pn!==null&&(Pn.document.write(_a),Pn.document.title=je.filename),Pn||typeof safari>"u")return Pn;break;case"datauri":case"dataurl":return ta.document.location.href=this.output("datauristring",je);default:return null}}),Wd=function(X){return Array.isArray(Ee)===!0&&Ee.indexOf(X)>-1};switch(a){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=Wd("px_scaling")==1?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);pe=a}var bs=null;ie(),R();var Ze=function(X){return u!==null?bs.encryptor(X,0):function(je){return je}},Jt=p.__private__.getPageInfo=p.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[X].objId,pageNumber:X,pageContext:Gt[X]}},rt=p.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var je in Gt)if(Gt[je].objId===X)break;return Jt(je)},Cr=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Gt[z].objId,pageNumber:z,pageContext:Gt[z]}};p.addPage=function(){return td.apply(this,arguments),this},p.setPage=function(){return ut.apply(this,arguments),ue.call(this,de[z]),this},p.insertPage=function(X){return this.addPage(),this.movePage(z,X),this},p.movePage=function(X,je){var Qe,nt;if(X>je){Qe=de[X],nt=Gt[X];for(var yt=X;yt>je;yt--)de[yt]=de[yt-1],Gt[yt]=Gt[yt-1];de[je]=Qe,Gt[je]=nt,this.setPage(je)}else if(X<je){Qe=de[X],nt=Gt[X];for(var qt=X;qt<je;qt++)de[qt]=de[qt+1],Gt[qt]=Gt[qt+1];de[je]=Qe,Gt[je]=nt,this.setPage(je)}return this},p.deletePage=function(){return El.apply(this,arguments),this},p.__private__.text=p.text=function(X,je,Qe,nt,yt){var qt,dr,Sr,Rr,ca,ia,_a,Pn,$n,is=(nt=nt||{}).scope||this;if(typeof X=="number"&&typeof je=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var os=Qe;Qe=je,je=X,X=os}if(arguments[3]instanceof Rt?(T("The transform parameter of text() with a Matrix value"),$n=yt):(Sr=arguments[4],Rr=arguments[5],Ba(_a=arguments[3])==="object"&&_a!==null||(typeof Sr=="string"&&(Rr=Sr,Sr=null),typeof _a=="string"&&(Rr=_a,_a=null),typeof _a=="number"&&(Sr=_a,_a=null),nt={flags:_a,angle:Sr,align:Rr})),isNaN(je)||isNaN(Qe)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return is;var Js="",Tl=!1,Ho=typeof nt.lineHeightFactor=="number"?nt.lineHeightFactor:qo,Il=is.internal.scaleFactor;function yp(ja){return ja=ja.split("	").join(Array(nt.TabLen||9).join(" ")),rn(ja,_a)}function ad(ja){for(var Na,Sn=ja.concat(),ls=[],sl=Sn.length;sl--;)typeof(Na=Sn.shift())=="string"?ls.push(Na):Array.isArray(ja)&&(Na.length===1||Na[1]===void 0&&Na[2]===void 0)?ls.push(Na[0]):ls.push([Na[0],Na[1],Na[2]]);return ls}function nd(ja,Na){var Sn;if(typeof ja=="string")Sn=Na(ja)[0];else if(Array.isArray(ja)){for(var ls,sl,ou=ja.concat(),lu=[],od=ou.length;od--;)typeof(ls=ou.shift())=="string"?lu.push(Na(ls)[0]):Array.isArray(ls)&&typeof ls[0]=="string"&&(sl=Na(ls[0],ls[1],ls[2]),lu.push([sl[0],sl[1],sl[2]]));Sn=lu}return Sn}var Uf=!1,Jd=!0;if(typeof X=="string")Uf=!0;else if(Array.isArray(X)){var $f=X.concat();dr=[];for(var ph,Os=$f.length;Os--;)(typeof(ph=$f.shift())!="string"||Array.isArray(ph)&&typeof ph[0]!="string")&&(Jd=!1);Uf=Jd}if(Uf===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var Zd=We/is.internal.scaleFactor,xh=Zd*(Ho-1);switch(nt.baseline){case"bottom":Qe-=xh;break;case"top":Qe+=Zd-xh;break;case"hanging":Qe+=Zd-2*xh;break;case"middle":Qe+=Zd/2-xh}if((ia=nt.maxWidth||0)>0&&(typeof X=="string"?X=is.splitTextToSize(X,ia):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(ja,Na){return ja.concat(is.splitTextToSize(Na,ia))},[]))),qt={text:X,x:je,y:Qe,options:nt,mutex:{pdfEscape:rn,activeFontKey:ve,fonts:Je,activeFontSize:We}},De.publish("preProcessText",qt),X=qt.text,Sr=(nt=qt.options).angle,!($n instanceof Rt)&&Sr&&typeof Sr=="number"){Sr*=Math.PI/180,nt.rotationDirection===0&&(Sr=-Sr),w===S.ADVANCED&&(Sr=-Sr);var vh=Math.cos(Sr),Vf=Math.sin(Sr);$n=new Rt(vh,Vf,-Vf,vh,0,0)}else Sr&&Sr instanceof Rt&&($n=Sr);w!==S.ADVANCED||$n||($n=pr),(ca=nt.charSpace||Of)!==void 0&&(Js+=E(P(ca))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pn=nt.horizontalScale)!==void 0&&(Js+=E(100*Pn)+` Tz
`),nt.lang;var uo=-1,Fg=nt.renderingMode!==void 0?nt.renderingMode:nt.stroke,jp=is.internal.getCurrentPageInfo().pageContext;switch(Fg){case 0:case!1:case"fill":uo=0;break;case 1:case!0:case"stroke":uo=1;break;case 2:case"fillThenStroke":uo=2;break;case 3:case"invisible":uo=3;break;case 4:case"fillAndAddForClipping":uo=4;break;case 5:case"strokeAndAddPathForClipping":uo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":uo=6;break;case 7:case"addToPathForClipping":uo=7}var pv=jp.usedRenderingMode!==void 0?jp.usedRenderingMode:-1;uo!==-1?Js+=uo+` Tr
`:pv!==-1&&(Js+=`0 Tr
`),uo!==-1&&(jp.usedRenderingMode=uo),Rr=nt.align||"left";var nl,Zs=We*Ho,eu=is.internal.pageSize.getWidth(),Np=Je[ve];ca=nt.charSpace||Of,ia=nt.maxWidth||0,_a=Object.assign({autoencode:!0,noBOM:!0},nt.flags);var sd=[],tu=function(ja){return is.getStringUnitWidth(ja,{font:Np,charSpace:ca,fontSize:We,doKerning:!1})*We/Il};if(Object.prototype.toString.call(X)==="[object Array]"){var Wi;dr=ad(X),Rr!=="left"&&(nl=dr.map(tu));var hi,ru=0;if(Rr==="right"){je-=nl[0],X=[],Os=dr.length;for(var ho=0;ho<Os;ho++)ho===0?(hi=zo(je),Wi=mc(Qe)):(hi=P(ru-nl[ho]),Wi=-Zs),X.push([dr[ho],hi,Wi]),ru=nl[ho]}else if(Rr==="center"){je-=nl[0]/2,X=[],Os=dr.length;for(var Pl=0;Pl<Os;Pl++)Pl===0?(hi=zo(je),Wi=mc(Qe)):(hi=P((ru-nl[Pl])/2),Wi=-Zs),X.push([dr[Pl],hi,Wi]),ru=nl[Pl]}else if(Rr==="left"){X=[],Os=dr.length;for(var pc=0;pc<Os;pc++)X.push(dr[pc])}else if(Rr==="justify"&&Np.encoding==="Identity-H"){X=[],Os=dr.length,ia=ia!==0?ia:eu;for(var Ol=0,Qn=0;Qn<Os;Qn++)if(Wi=Qn===0?mc(Qe):-Zs,hi=Qn===0?zo(je):Ol,Qn<Os-1){var Ml=P((ia-nl[Qn])/(dr[Qn].split(" ").length-1)),ys=dr[Qn].split(" ");X.push([ys[0]+" ",hi,Wi]),Ol=0;for(var fo=1;fo<ys.length;fo++){var gh=(tu(ys[fo-1]+" "+ys[fo])-tu(ys[fo]))*Il+Ml;fo==ys.length-1?X.push([ys[fo],gh,0]):X.push([ys[fo]+" ",gh,0]),Ol-=gh}}else X.push([dr[Qn],hi,Wi]);X.push(["",Ol,0])}else{if(Rr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(X=[],Os=dr.length,ia=ia!==0?ia:eu,Qn=0;Qn<Os;Qn++)Wi=Qn===0?mc(Qe):-Zs,hi=Qn===0?zo(je):0,Qn<Os-1?sd.push(E(P((ia-nl[Qn])/(dr[Qn].split(" ").length-1)))):sd.push(0),X.push([dr[Qn],hi,Wi])}}var xc=typeof nt.R2L=="boolean"?nt.R2L:Be;xc===!0&&(X=nd(X,function(ja,Na,Sn){return[ja.split("").reverse().join(""),Na,Sn]})),qt={text:X,x:je,y:Qe,options:nt,mutex:{pdfEscape:rn,activeFontKey:ve,fonts:Je,activeFontSize:We}},De.publish("postProcessText",qt),X=qt.text,Tl=qt.mutex.isHex||!1;var qf=Je[ve].encoding;qf!=="WinAnsiEncoding"&&qf!=="StandardEncoding"||(X=nd(X,function(ja,Na,Sn){return[yp(ja),Na,Sn]})),dr=ad(X),X=[];for(var au,nu,su,bh=0,zf=1,iu=Array.isArray(dr[0])?zf:bh,id="",yh=function(ja,Na,Sn){var ls="";return Sn instanceof Rt?(Sn=typeof nt.angle=="number"?sr(Sn,new Rt(1,0,0,1,ja,Na)):sr(new Rt(1,0,0,1,ja,Na),Sn),w===S.ADVANCED&&(Sn=sr(new Rt(1,0,0,-1,0,0),Sn)),ls=Sn.join(" ")+` Tm
`):ls=E(ja)+" "+E(Na)+` Td
`,ls},Jn=0;Jn<dr.length;Jn++){switch(id="",iu){case zf:su=(Tl?"<":"(")+dr[Jn][0]+(Tl?">":")"),au=parseFloat(dr[Jn][1]),nu=parseFloat(dr[Jn][2]);break;case bh:su=(Tl?"<":"(")+dr[Jn]+(Tl?">":")"),au=zo(je),nu=mc(Qe)}sd!==void 0&&sd[Jn]!==void 0&&(id=sd[Jn]+` Tw
`),Jn===0?X.push(id+yh(au,nu,$n)+su):iu===bh?X.push(id+su):iu===zf&&X.push(id+yh(au,nu,$n)+su)}X=iu===bh?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var Wo=`BT
/`;return Wo+=ve+" "+We+` Tf
`,Wo+=E(We*Ho)+` TL
`,Wo+=fh+`
`,Wo+=Js,Wo+=X,oe(Wo+="ET"),f[ve]=!0,is};var Ps=p.__private__.clip=p.clip=function(X){return oe(X==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Ps("evenodd")},p.__private__.discardPath=p.discardPath=function(){return oe("n"),this};var Ma=p.__private__.isValidStyle=function(X){var je=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(je=!0),je};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(X){return Ma(X)&&(d=X),this};var $a=p.__private__.getStyle=p.getStyle=function(X){var je=d;switch(X){case"D":case"S":je="S";break;case"F":je="f";break;case"FD":case"DF":je="B";break;case"f":case"f*":case"B":case"B*":je=X}return je},_i=p.close=function(){return oe("h"),this};p.stroke=function(){return oe("S"),this},p.fill=function(X){return uc("f",X),this},p.fillEvenOdd=function(X){return uc("f*",X),this},p.fillStroke=function(X){return uc("B",X),this},p.fillStrokeEvenOdd=function(X){return uc("B*",X),this};var uc=function(X,je){Ba(je)==="object"?Tf(je,X):oe(X)},al=function(X){X===null||w===S.ADVANCED&&X===void 0||(X=$a(X),oe(X))};function pp(X,je,Qe,nt,yt){var qt=new b0(je||this.boundingBox,Qe||this.xStep,nt||this.yStep,this.gState,yt||this.matrix);qt.stream=this.stream;var dr=X+"$$"+this.cloneIndex+++"$$";return Nr(dr,qt),qt}var Tf=function(X,je){var Qe=pt[X.key],nt=Ve[Qe];if(nt instanceof Zp)oe("q"),oe(hv(je)),nt.gState&&p.setGState(nt.gState),oe(X.matrix.toString()+" cm"),oe("/"+Qe+" sh"),oe("Q");else if(nt instanceof b0){var yt=new Rt(1,0,0,-1,0,Qd());X.matrix&&(yt=yt.multiply(X.matrix||pr),Qe=pp.call(nt,X.key,X.boundingBox,X.xStep,X.yStep,yt).id),oe("q"),oe("/Pattern cs"),oe("/"+Qe+" scn"),nt.gState&&p.setGState(nt.gState),oe(je),oe("Q")}},hv=function(X){switch(X){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Gd=p.moveTo=function(X,je){return oe(E(P(X))+" "+E(V(je))+" m"),this},hc=p.lineTo=function(X,je){return oe(E(P(X))+" "+E(V(je))+" l"),this},rd=p.curveTo=function(X,je,Qe,nt,yt,qt){return oe([E(P(X)),E(V(je)),E(P(Qe)),E(V(nt)),E(P(yt)),E(V(qt)),"c"].join(" ")),this};p.__private__.line=p.line=function(X,je,Qe,nt,yt){if(isNaN(X)||isNaN(je)||isNaN(Qe)||isNaN(nt)||!Ma(yt))throw new Error("Invalid arguments passed to jsPDF.line");return w===S.COMPAT?this.lines([[Qe-X,nt-je]],X,je,[1,1],yt||"S"):this.lines([[Qe-X,nt-je]],X,je,[1,1]).stroke()},p.__private__.lines=p.lines=function(X,je,Qe,nt,yt,qt){var dr,Sr,Rr,ca,ia,_a,Pn,$n,is,os,Js,Tl;if(typeof X=="number"&&(Tl=Qe,Qe=je,je=X,X=Tl),nt=nt||[1,1],qt=qt||!1,isNaN(je)||isNaN(Qe)||!Array.isArray(X)||!Array.isArray(nt)||!Ma(yt)||typeof qt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gd(je,Qe),dr=nt[0],Sr=nt[1],ca=X.length,os=je,Js=Qe,Rr=0;Rr<ca;Rr++)(ia=X[Rr]).length===2?(os=ia[0]*dr+os,Js=ia[1]*Sr+Js,hc(os,Js)):(_a=ia[0]*dr+os,Pn=ia[1]*Sr+Js,$n=ia[2]*dr+os,is=ia[3]*Sr+Js,os=ia[4]*dr+os,Js=ia[5]*Sr+Js,rd(_a,Pn,$n,is,os,Js));return qt&&_i(),al(yt),this},p.path=function(X){for(var je=0;je<X.length;je++){var Qe=X[je],nt=Qe.c;switch(Qe.op){case"m":Gd(nt[0],nt[1]);break;case"l":hc(nt[0],nt[1]);break;case"c":rd.apply(this,nt);break;case"h":_i()}}return this},p.__private__.rect=p.rect=function(X,je,Qe,nt,yt){if(isNaN(X)||isNaN(je)||isNaN(Qe)||isNaN(nt)||!Ma(yt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===S.COMPAT&&(nt=-nt),oe([E(P(X)),E(V(je)),E(P(Qe)),E(P(nt)),"re"].join(" ")),al(yt),this},p.__private__.triangle=p.triangle=function(X,je,Qe,nt,yt,qt,dr){if(isNaN(X)||isNaN(je)||isNaN(Qe)||isNaN(nt)||isNaN(yt)||isNaN(qt)||!Ma(dr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-X,nt-je],[yt-Qe,qt-nt],[X-yt,je-qt]],X,je,[1,1],dr,!0),this},p.__private__.roundedRect=p.roundedRect=function(X,je,Qe,nt,yt,qt,dr){if(isNaN(X)||isNaN(je)||isNaN(Qe)||isNaN(nt)||isNaN(yt)||isNaN(qt)||!Ma(dr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Sr=4/3*(Math.SQRT2-1);return yt=Math.min(yt,.5*Qe),qt=Math.min(qt,.5*nt),this.lines([[Qe-2*yt,0],[yt*Sr,0,yt,qt-qt*Sr,yt,qt],[0,nt-2*qt],[0,qt*Sr,-yt*Sr,qt,-yt,qt],[2*yt-Qe,0],[-yt*Sr,0,-yt,-qt*Sr,-yt,-qt],[0,2*qt-nt],[0,-qt*Sr,yt*Sr,-qt,yt,-qt]],X+yt,je,[1,1],dr,!0),this},p.__private__.ellipse=p.ellipse=function(X,je,Qe,nt,yt){if(isNaN(X)||isNaN(je)||isNaN(Qe)||isNaN(nt)||!Ma(yt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qt=4/3*(Math.SQRT2-1)*Qe,dr=4/3*(Math.SQRT2-1)*nt;return Gd(X+Qe,je),rd(X+Qe,je-dr,X+qt,je-nt,X,je-nt),rd(X-qt,je-nt,X-Qe,je-dr,X-Qe,je),rd(X-Qe,je+dr,X-qt,je+nt,X,je+nt),rd(X+qt,je+nt,X+Qe,je+dr,X+Qe,je),al(yt),this},p.__private__.circle=p.circle=function(X,je,Qe,nt){if(isNaN(X)||isNaN(je)||isNaN(Qe)||!Ma(nt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,je,Qe,Qe,nt)},p.setFont=function(X,je,Qe){return Qe&&(je=_(je,Qe)),ve=Ot(X,je,{disableWarning:!1}),this};var Di=p.__private__.getFont=p.getFont=function(){return Je[Ot.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var X,je,Qe={};for(X in ze)if(ze.hasOwnProperty(X))for(je in Qe[X]=[],ze[X])ze[X].hasOwnProperty(je)&&Qe[X].push(je);return Qe},p.addFont=function(X,je,Qe,nt,yt){var qt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qt.indexOf(arguments[3])!==-1?yt=arguments[3]:arguments[3]&&qt.indexOf(arguments[3])==-1&&(Qe=_(Qe,nt)),yt=yt||"Identity-H",Xn.call(this,X,je,Qe,yt)};var qo,Yd=e.lineWidth||.200025,fc=p.__private__.getLineWidth=p.getLineWidth=function(){return Yd},fv=p.__private__.setLineWidth=p.setLineWidth=function(X){return Yd=X,oe(E(P(X))+" w"),this};p.__private__.setLineDash=Jr.API.setLineDash=Jr.API.setLineDashPattern=function(X,je){if(X=X||[],je=je||0,isNaN(je)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(Qe){return E(P(Qe))}).join(" "),je=E(P(je)),oe("["+X+"] "+je+" d"),this};var If=p.__private__.getLineHeight=p.getLineHeight=function(){return We*qo};p.__private__.getLineHeight=p.getLineHeight=function(){return We*qo};var Pf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(qo=X),this},Kd=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return qo};Pf(e.lineHeight);var zo=p.__private__.getHorizontalCoordinate=function(X){return P(X)},mc=p.__private__.getVerticalCoordinate=function(X){return w===S.ADVANCED?X:Gt[z].mediaBox.topRightY-Gt[z].mediaBox.bottomLeftY-P(X)},Pg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(X){return E(zo(X))},Xd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(X){return E(mc(X))},Al=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ue(Al)},p.__private__.setStrokeColor=p.setDrawColor=function(X,je,Qe,nt){return Al=He({ch1:X,ch2:je,ch3:Qe,ch4:nt,pdfColorType:"draw",precision:2}),oe(Al),this};var hh=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ue(hh)},p.__private__.setFillColor=p.setFillColor=function(X,je,Qe,nt){return hh=He({ch1:X,ch2:je,ch3:Qe,ch4:nt,pdfColorType:"fill",precision:2}),oe(hh),this};var fh=e.textColor||"0 g",Og=p.__private__.getTextColor=p.getTextColor=function(){return Ue(fh)};p.__private__.setTextColor=p.setTextColor=function(X,je,Qe,nt){return fh=He({ch1:X,ch2:je,ch3:Qe,ch4:nt,pdfColorType:"text",precision:3}),this};var Of=e.charSpace,Mg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Of||0)};p.__private__.setCharSpace=p.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Of=X,this};var xp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(X){var je=p.CapJoinStyles[X];if(je===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xp=je,oe(je+" J"),this};var Mf=0;p.__private__.setLineJoin=p.setLineJoin=function(X){var je=p.CapJoinStyles[X];if(je===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mf=je,oe(je+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(E(P(X))+" M"),this},p.GState=lS,p.setGState=function(X){(X=typeof X=="string"?Pe[Re[X]]:mv(null,X)).equals(Ye)||(oe("/"+X.id+" gs"),Ye=X)};var mv=function(X,je){if(!X||!Re[X]){var Qe=!1;for(var nt in Pe)if(Pe.hasOwnProperty(nt)&&Pe[nt].equals(je)){Qe=!0;break}if(Qe)je=Pe[nt];else{var yt="GS"+(Object.keys(Pe).length+1).toString(10);Pe[yt]=je,je.id=yt}return X&&(Re[X]=je.id),De.publish("addGState",je),je}};p.addGState=function(X,je){return mv(X,je),this},p.saveGraphicsState=function(){return oe("q"),Fe.push({key:ve,size:We,color:fh}),this},p.restoreGraphicsState=function(){oe("Q");var X=Fe.pop();return ve=X.key,We=X.size,fh=X.color,Ye=null,this},p.setCurrentTransformationMatrix=function(X){return oe(X.toString()+" cm"),this},p.comment=function(X){return oe("#"+X),this};var Rf=function(X,je){var Qe=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(qt){isNaN(qt)||(Qe=parseFloat(qt))}});var nt=je||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return nt},set:function(qt){isNaN(qt)||(nt=parseFloat(qt))}});var yt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yt},set:function(qt){yt=qt.toString()}}),this},vp=function(X,je,Qe,nt){Rf.call(this,X,je),this.type="rect";var yt=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yt},set:function(dr){isNaN(dr)||(yt=parseFloat(dr))}});var qt=nt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qt},set:function(dr){isNaN(dr)||(qt=parseFloat(dr))}}),this},gp=function(){this.page=At,this.currentPage=z,this.pages=de.slice(0),this.pagesContext=Gt.slice(0),this.x=Te,this.y=Xe,this.matrix=kt,this.width=mh(z),this.height=Qd(z),this.outputDestination=se,this.id="",this.objectNumber=-1};gp.prototype.restore=function(){At=this.page,z=this.currentPage,Gt=this.pagesContext,de=this.pages,Te=this.x,Xe=this.y,kt=this.matrix,Bf(z,this.width),bp(z,this.height),se=this.outputDestination};var Ff=function(X,je,Qe,nt,yt){lr.push(new gp),At=z=0,de=[],Te=X,Xe=je,kt=yt,Vo([Qe,nt])},Rg=function(X){if(Tt[X])lr.pop().restore();else{var je=new gp,Qe="Xo"+(Object.keys(it).length+1).toString(10);je.id=Qe,Tt[X]=Qe,it[Qe]=je,De.publish("addFormObject",je),lr.pop().restore()}};for(var Lf in p.beginFormObject=function(X,je,Qe,nt,yt){return Ff(X,je,Qe,nt,yt),this},p.endFormObject=function(X){return Rg(X),this},p.doFormObject=function(X,je){var Qe=it[Tt[X]];return oe("q"),oe(je.toString()+" cm"),oe("/"+Qe.id+" Do"),oe("Q"),this},p.getFormObject=function(X){var je=it[Tt[X]];return{x:je.x,y:je.y,width:je.width,height:je.height,matrix:je.matrix}},p.save=function(X,je){return X=X||"generated.pdf",(je=je||{}).returnPromise=je.returnPromise||!1,je.returnPromise===!1?(Xp(Hd(_l()),X),typeof Xp.unload=="function"&&ta.setTimeout&&setTimeout(Xp.unload,911),this):new Promise(function(Qe,nt){try{var yt=Xp(Hd(_l()),X);typeof Xp.unload=="function"&&ta.setTimeout&&setTimeout(Xp.unload,911),Qe(yt)}catch(qt){nt(qt.message)}})},Jr.API)Jr.API.hasOwnProperty(Lf)&&(Lf==="events"&&Jr.API.events.length?function(X,je){var Qe,nt,yt;for(yt=je.length-1;yt!==-1;yt--)Qe=je[yt][0],nt=je[yt][1],X.subscribe.apply(X,[Qe].concat(typeof nt=="function"?[nt]:nt))}(De,Jr.API.events):p[Lf]=Jr.API[Lf]);var mh=p.getPageWidth=function(X){return(Gt[X=X||z].mediaBox.topRightX-Gt[X].mediaBox.bottomLeftX)/pe},Bf=p.setPageWidth=function(X,je){Gt[X].mediaBox.topRightX=je*pe+Gt[X].mediaBox.bottomLeftX},Qd=p.getPageHeight=function(X){return(Gt[X=X||z].mediaBox.topRightY-Gt[X].mediaBox.bottomLeftY)/pe},bp=p.setPageHeight=function(X,je){Gt[X].mediaBox.topRightY=je*pe+Gt[X].mediaBox.bottomLeftY};return p.internal={pdfEscape:rn,getStyle:$a,getFont:Di,getFontSize:mt,getCharSpace:Mg,getTextColor:Og,getLineHeight:If,getLineHeightFactor:Kd,getLineWidth:fc,write:ge,getHorizontalCoordinate:zo,getVerticalCoordinate:mc,getCoordinateString:Pg,getVerticalCoordinateString:Xd,collections:{},newObject:gt,newAdditionalObject:Le,newObjectDeferred:Bt,newObjectDeferredBegin:he,getFilters:xt,putStream:jt,events:De,scaleFactor:pe,pageSize:{getWidth:function(){return mh(z)},setWidth:function(X){Bf(z,X)},getHeight:function(){return Qd(z)},setHeight:function(X){bp(z,X)}},encryptionOptions:u,encryption:bs,getEncryptor:Ze,output:Dl,getNumberOfPages:nr,pages:de,out:oe,f2:F,f3:A,getPageInfo:Jt,getPageInfoByObjId:rt,getCurrentPageInfo:Cr,getPDFVersion:g,Point:Rf,Rectangle:vp,Matrix:Rt,hasHotfix:Wd},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return mh(z)},set:function(X){Bf(z,X)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Qd(z)},set:function(X){bp(z,X)},enumerable:!0,configurable:!0}),kl.call(p,Me),ve="F1",td(s,r),De.publish("initialized"),p}h0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},h0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},h0.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},h0.prototype.processOwnerPassword=function(e,t){return D3(_3(t).substr(0,5),e)},h0.prototype.encryptor=function(e,t){var r=_3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return D3(r,a)}},lS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ba(e)!==Ba(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},Jr.API={events:[]},Jr.version="3.0.1";var Cs=Jr.API,iO=1,uv=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},n0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ha=function(e){return e.toFixed(2)},Cm=function(e){return e.toFixed(5)};Cs.__acroform__={};var Cl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},t$=function(e){return e*iO},Eu=function(e){var t=new $J,r=Ir.internal.getHeight(e)||0,a=Ir.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ha(a)),Number(ha(r))],t},_$e=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},D$e=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},A$e=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},$s=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A$e(e,t-1)},Vs=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _$e(e,t-1)},qs=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return D$e(e,t-1)},T$e=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(ha(c.lowerLeft_X)),Number(ha(c.lowerLeft_Y)),Number(ha(c.upperRight_X)),Number(ha(c.upperRight_Y))]},I$e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=A3(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+ha(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Eu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},A3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(A){return A.split(`
`)}):s.map(function(A){return[A]});var i=r,o=Ir.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ir.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(A,P,q){if(A+1<s.length){var V=P+" "+s[A+1][0];return YN(V,e,q).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=YN("3",e,i).height,f=e.multiline?o-i:(o-h)/2,p=f+=2,v=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+YN(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",S=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var k=!1;if(s[w].length!==1&&b!==s[w].length-1){if((h+2)*(S+2)+2>o)continue e;y+=s[w][b],k=!0,g=w,w--}else{y=(y+=s[w][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var C=parseInt(w),_=c(C,y,i),E=w>=s.length-1;if(_&&!E){y+=" ",b=0;continue}if(_||E){if(E)g=C;else if(e.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(S+2)+2>o)continue e;g=C}}for(var T="",I=v;I<=g;I++){var F=s[I];if(e.multiline){if(I===g){T+=F[b]+" ",b=(b+1)%F.length;continue}if(I===v){T+=F[F.length-1]+" ";continue}}T+=F[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=YN(T,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=ha(d)+" "+ha(p)+` Td
`,t+="("+uv(T)+`) Tj
`,t+=-ha(d)+` 0 Td
`,p=-(i+2),u=0,v=k?g:g+1,S++,y=""}break}return a.text=t,a.fontSize=i,a},YN=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},P$e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},O$e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},M$e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Ba(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},R$e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Vd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(P$e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");iO=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new VJ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&O$e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=T$e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ir.createDefaultAppearanceStream(l),Ba(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=I$e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var p=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&M$e(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},UJ=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Ba(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+uv(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},b5=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+uv(a(e))+")"},Vu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vu.prototype.toString=function(){return this.objId+" 0 R"},Vu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Vu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:UJ(s,this.objId,this.scope)}):s instanceof Vu?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var $J=function(){Vu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Cl($J,Vu);var VJ=function(){Vu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+uv(r(e))+")"}},set:function(r){e=r}})};Cl(VJ,Vu);var Vd=function e(){Vu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$s(t,3)},set:function(y){y?this.F=Vs(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof cS)return;i="FieldObject"+e.FieldNum++}var y=function(S){return S};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+uv(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/iO:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof cS||this instanceof Ex))return b5(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Fi?f:b5(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Fi?y:y.substr(0,1)==="("?n0(y.substr(1,y.length-2)):n0(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi?n0(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Fi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Fi?p:b5(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Fi?y:y.substr(0,1)==="("?n0(y.substr(1,y.length-2)):n0(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi?n0(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Fi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,1)},set:function(y){y?this.Ff=Vs(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,2)},set:function(y){y?this.Ff=Vs(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,3)},set:function(y){y?this.Ff=Vs(this.Ff,3):this.Ff=qs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Cl(Vd,Vu);var F0=function(){Vd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return UJ(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,18)},set:function(r){r?this.Ff=Vs(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Vs(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,20)},set:function(r){r?(this.Ff=Vs(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,22)},set:function(r){r?this.Ff=Vs(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(r){r?this.Ff=Vs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,27)},set:function(r){r?this.Ff=Vs(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};Cl(F0,Vd);var L0=function(){F0.call(this),this.fontName="helvetica",this.combo=!1};Cl(L0,F0);var B0=function(){L0.call(this),this.combo=!0};Cl(B0,L0);var mw=function(){B0.call(this),this.edit=!0};Cl(mw,B0);var Fi=function(){Vd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,15)},set:function(r){r?this.Ff=Vs(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,16)},set:function(r){r?this.Ff=Vs(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,17)},set:function(r){r?this.Ff=Vs(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(r){r?this.Ff=Vs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+uv(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ba(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Cl(Fi,Vd);var pw=function(){Fi.call(this),this.pushButton=!0};Cl(pw,Fi);var U0=function(){Fi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Cl(U0,Fi);var cS=function(){var e,t;Vd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+uv(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Ba(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Cl(cS,Vd),U0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},U0.prototype.createOption=function(e){var t=new cS;return t.Parent=this,t.optionName=e,this.Kids.push(t),F$e.call(this.scope,t),t};var xw=function(){Fi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ir.CheckBox.createAppearanceStream()};Cl(xw,Fi);var Ex=function(){Vd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,13)},set:function(t){t?this.Ff=Vs(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,21)},set:function(t){t?this.Ff=Vs(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(t){t?this.Ff=Vs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,24)},set:function(t){t?this.Ff=Vs(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,25)},set:function(t){t?this.Ff=Vs(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(t){t?this.Ff=Vs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Cl(Ex,Vd);var vw=function(){Ex.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,14)},set:function(e){e?this.Ff=Vs(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};Cl(vw,Ex);var Ir={CheckBox:{createAppearanceStream:function(){return{N:{On:Ir.CheckBox.YesNormal},D:{On:Ir.CheckBox.YesPushDown,Off:Ir.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=A3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ha(Ir.internal.getWidth(e))+" "+ha(Ir.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+ha(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Eu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Ir.internal.getHeight(e),o=Ir.internal.getWidth(e),l=A3(e,e.caption);return s.push("1 g"),s.push("0 0 "+ha(o)+" "+ha(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ha(o-1)+" "+ha(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+ha(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ha(Ir.internal.getWidth(e))+" "+ha(Ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ir.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ir.RadioButton.Circle.YesNormal,t.D[e]=Ir.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Eu(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Ir.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Cm(Ir.internal.getWidth(e)/2)+" "+Cm(Ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Ir.internal.Bezier_C).toFixed(5)),o=Number((a*Ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Cm(Ir.internal.getWidth(e)/2)+" "+Cm(Ir.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Cm(Ir.internal.getWidth(e)/2)+" "+Cm(Ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Cm(Ir.internal.getWidth(e)/2)+" "+Cm(Ir.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ir.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ir.RadioButton.Cross.YesNormal,t.D[e]=Ir.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Eu(e);t.scope=e.scope;var r=[],a=Ir.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ha(Ir.internal.getWidth(e)-2)+" "+ha(Ir.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ha(a.x1.x)+" "+ha(a.x1.y)+" m"),r.push(ha(a.x2.x)+" "+ha(a.x2.y)+" l"),r.push(ha(a.x4.x)+" "+ha(a.x4.y)+" m"),r.push(ha(a.x3.x)+" "+ha(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=Ir.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+ha(Ir.internal.getWidth(e))+" "+ha(Ir.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+ha(Ir.internal.getWidth(e)-2)+" "+ha(Ir.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(ha(r.x1.x)+" "+ha(r.x1.y)+" m"),a.push(ha(r.x2.x)+" "+ha(r.x2.y)+" l"),a.push(ha(r.x4.x)+" "+ha(r.x4.y)+" m"),a.push(ha(r.x3.x)+" "+ha(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Eu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ha(Ir.internal.getWidth(e))+" "+ha(Ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ir.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ir.internal.getWidth(e),r=Ir.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Ir.internal.getWidth=function(e){var t=0;return Ba(e)==="object"&&(t=t$(e.Rect[2])),t},Ir.internal.getHeight=function(e){var t=0;return Ba(e)==="object"&&(t=t$(e.Rect[3])),t};var F$e=Cs.addField=function(e){if(R$e(this,e),!(e instanceof Vd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=F0,Cs.AcroFormListBox=L0,Cs.AcroFormComboBox=B0,Cs.AcroFormEditBox=mw,Cs.AcroFormButton=Fi,Cs.AcroFormPushButton=pw,Cs.AcroFormRadioButton=U0,Cs.AcroFormCheckBox=xw,Cs.AcroFormTextField=Ex,Cs.AcroFormPasswordField=vw,Cs.AcroFormAppearance=Ir,Cs.AcroForm={ChoiceField:F0,ListBox:L0,ComboBox:B0,EditBox:mw,Button:Fi,PushButton:pw,RadioButton:U0,CheckBox:xw,TextField:Ex,PasswordField:vw,Appearance:Ir},Jr.AcroForm={ChoiceField:F0,ListBox:L0,ComboBox:B0,EditBox:mw,Button:Fi,PushButton:pw,RadioButton:U0,CheckBox:xw,TextField:Ex,PasswordField:vw,Appearance:Ir};Jr.AcroForm;function qJ(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(A,P){var q,V,Y,B,Q,R=t;if((P=P||t)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(_(A))for(Q in r)for(Y=r[Q],q=0;q<Y.length;q+=1){for(B=!0,V=0;V<Y[q].length;V+=1)if(Y[q][V]!==void 0&&Y[q][V]!==A[V]){B=!1;break}if(B===!0){R=Q;break}}else for(Q in r)for(Y=r[Q],q=0;q<Y.length;q+=1){for(B=!0,V=0;V<Y[q].length;V+=1)if(Y[q][V]!==void 0&&Y[q][V]!==A.charCodeAt(V)){B=!1;break}if(B===!0){R=Q;break}}return R===t&&P!==t&&(R=P),R},s=function A(P){for(var q=this.internal.write,V=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:P.width}),B.push({key:"Height",value:P.height}),P.colorSpace===b.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===b.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var Q="",R=0,Z=P.transparency.length;R<Z;R++)Q+=P.transparency[R]+" "+P.transparency[R]+" ";B.push({key:"Mask",value:"["+Q+"]"})}P.sMask!==void 0&&B.push({key:"SMask",value:P.objectId+1+" 0 R"});var J=P.filter!==void 0?["/"+P.filter]:void 0;if(V({data:P.data,additionalKeyValues:B,alreadyAppliedFilters:J,objectId:P.objectId}),q("endobj"),"sMask"in P&&P.sMask!==void 0){var ie="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,M={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:ie,data:P.sMask};"filter"in P&&(M.filter=P.filter),A.call(this,M)}if(P.colorSpace===b.INDEXED){var z=this.internal.newObject();V({data:T(new Uint8Array(P.palette)),objectId:z}),q("endobj")}},i=function(){var A=this.internal.collections.addImage_images;for(var P in A)s.call(this,A[P])},o=function(){var A,P=this.internal.collections.addImage_images,q=this.internal.write;for(var V in P)q("/I"+(A=P[V]).index,A.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var A=this.internal.collections.addImage_images;return l.call(this),A},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(A){return typeof e["process"+A.toUpperCase()]=="function"},h=function(A){return Ba(A)==="object"&&A.nodeType===1},f=function(A,P){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var q=""+A.getAttribute("src");if(q.indexOf("data:image/")===0)return gy(unescape(q).split("base64,").pop());var V=e.loadFile(q,!0);if(V!==void 0)return V}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var Y;switch(P){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;case"JPEG":case"JPG":default:Y="image/jpeg"}return gy(A.toDataURL(Y,1).split("base64,").pop())}},p=function(A){var P=this.internal.collections.addImage_images;if(P){for(var q in P)if(A===P[q].alias)return P[q]}},v=function(A,P,q){return A||P||(A=-96,P=-96),A<0&&(A=-1*q.width*72/A/this.internal.scaleFactor),P<0&&(P=-1*q.height*72/P/this.internal.scaleFactor),A===0&&(A=P*q.width/q.height),P===0&&(P=A*q.height/q.width),[A,P]},g=function(A,P,q,V,Y,B){var Q=v.call(this,q,V,Y),R=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,J=c.call(this);if(q=Q[0],V=Q[1],J[Y.index]=Y,B){B*=Math.PI/180;var ie=Math.cos(B),M=Math.sin(B),z=function(ne){return ne.toFixed(4)},ee=[z(ie),z(M),z(-1*M),z(ie),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,R(A),Z(P+V),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([R(q),"0","0",R(V),"0","0","cm"].join(" "))):this.internal.write([R(q),"0","0",R(V),R(A),Z(P+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(A){var P,q,V=0;if(typeof A=="string")for(q=A.length,P=0;P<q;P++)V=(V<<5)-V+A.charCodeAt(P),V|=0;else if(_(A))for(q=A.byteLength/2,P=0;P<q;P++)V=(V<<5)-V+A[P],V|=0;return V},w=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var P=!0;return A.length===0&&(P=!1),A.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(P=!1),P},k=e.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var P=A.indexOf(",");return P<0?null:A.substring(0,P).trim().endsWith("base64")?A.substring(P+1):null},C=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(A){return C()&&A instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(A){return C()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(A){for(var P=A.length,q=new Uint8Array(P),V=0;V<P;V++)q[V]=A.charCodeAt(V);return q},T=e.__addimage__.arrayBufferToBinaryString=function(A){for(var P="",q=_(A)?A:new Uint8Array(A),V=0;V<q.length;V+=8192)P+=String.fromCharCode.apply(null,q.subarray(V,V+8192));return P};e.addImage=function(){var A,P,q,V,Y,B,Q,R,Z;if(typeof arguments[1]=="number"?(P=t,q=arguments[1],V=arguments[2],Y=arguments[3],B=arguments[4],Q=arguments[5],R=arguments[6],Z=arguments[7]):(P=arguments[1],q=arguments[2],V=arguments[3],Y=arguments[4],B=arguments[5],Q=arguments[6],R=arguments[7],Z=arguments[8]),Ba(A=arguments[0])==="object"&&!h(A)&&"imageData"in A){var J=A;A=J.imageData,P=J.format||P||t,q=J.x||q||0,V=J.y||V||0,Y=J.w||J.width||Y,B=J.h||J.height||B,Q=J.alias||Q,R=J.compression||R,Z=J.rotation||J.angle||Z}var ie=this.internal.getFilters();if(R===void 0&&ie.indexOf("FlateEncode")!==-1&&(R="SLOW"),isNaN(q)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=I.call(this,A,P,Q,R);return g.call(this,q,V,Y,B,M,Z),this};var I=function(A,P,q,V){var Y,B,Q;if(typeof A=="string"&&a(A)===t){A=unescape(A);var R=F(A,!1);(R!==""||(R=e.loadFile(A,!0))!==void 0)&&(A=R)}if(h(A)&&(A=f(A,P)),P=a(A,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((Q=q)==null||Q.length===0)&&(q=function(Z){return typeof Z=="string"||_(Z)?S(Z):_(Z.data)?S(Z.data):null}(A)),(Y=p.call(this,q))||(C()&&(A instanceof Uint8Array||P==="RGBA"||(B=A,A=E(A))),Y=this["process"+P.toUpperCase()](A,d.call(this),q,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:y.NONE}(V),B)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},F=e.__addimage__.convertBase64ToBinaryString=function(A,P){P=typeof P!="boolean"||P;var q,V="";if(typeof A=="string"){var Y;q=(Y=k(A))!==null&&Y!==void 0?Y:A;try{V=gy(q)}catch(B){if(P)throw w(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(A){var P,q,V="";if(h(A)&&(A=f(A)),typeof A=="string"&&a(A)===t&&((V=F(A,!1))===""&&(V=e.loadFile(A)||""),A=V),q=a(A),!u(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!C()||A instanceof Uint8Array||(A=E(A)),!(P=this["process"+q.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=q,P}})(Jr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Jr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((a=d[h]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){a=d[f];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),S=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+p(y(a.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(S))+") >>",g.content=i;var w=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+w,a.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var k=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(v(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var C=this.annotations._nameMap[a.options.name];a.options.pageNumber=C.page,a.options.top=C.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var _=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+_+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(Jr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,S="",w=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(w++,typeof(y=y[g.charCodeAt(b)])=="number"&&(S+=String.fromCharCode(y),y=r,w=0),b===g.length-1&&(y=r,S+=g.charAt(b-(w-1)),b-=w-1,w=0)):(y=r,S+=g.charAt(b-w),b-=w,w=0);return S};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&a[g.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:u(g)&&o(b)&&!l(b)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},p=function(g){var b=0,y=0,S=0,w="",k="",C="",_=(g=g||"").split("\\s+"),E=[];for(b=0;b<_.length;b+=1){for(E.push(""),y=0;y<_[b].length;y+=1)w=_[b][y],k=_[b][y-1],C=_[b][y+1],o(w)?(S=f(w,k,C),E[b]+=S!==-1?String.fromCharCode(t[w.charCodeAt(0)][S]):w):E[b]+=w;E[b]=h(E[b])}return E.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var S=0;for(y=[],S=0;S<b.length;S+=1)Array.isArray(b[S])?y.push([p(b[S][0]),b[S][1],b[S][2]]):y.push([p(b[S])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(Jr.API),Jr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Jr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,v=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,k){return w.concat(b.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)p<(g=this.getStringUnitWidth(c[S],{font:h})*u)&&(p=g);return p!==0&&(v=c.length),{w:p/=f,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,f){if(a.call(this),!u)throw new Error("No data for PDF table.");var p,v,g,b,y=[],S=[],w=[],k={},C={},_=[],E=[],T=(f=f||{}).autoSize||!1,I=f.printHeaders!==!1,F=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,A=f.margins||Object.assign({width:this.getPageWidth()},t),P=typeof f.padding=="number"?f.padding:3,q=f.headerBackgroundColor||"#c8c8c8",V=f.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=V,this.setFontSize(F),h==null)S=y=Object.keys(u[0]),w=y.map(function(){return"left"});else if(Array.isArray(h)&&Ba(h[0])==="object")for(y=h.map(function(J){return J.name}),S=h.map(function(J){return J.prompt||J.name||""}),w=h.map(function(J){return J.align||"left"}),p=0;p<h.length;p+=1)C[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=y=h,w=y.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=u.map(function(J){return J[b]}),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[b],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)_.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[b]=Math.max.apply(null,_)+P+P,_=[]}if(I){var Y={};for(p=0;p<y.length;p+=1)Y[y[p]]={},Y[y[p]].text=S[p],Y[y[p]].align=w[p];var B=l.call(this,Y,C);E=y.map(function(J){return new i(c,d,C[J],B,Y[J].text,void 0,Y[J].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var Q=h.reduce(function(J,ie){return J[ie.name]=ie.align,J},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var R=l.call(this,u[p],C);for(g=0;g<y.length;g+=1){var Z=u[p][y[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:g,data:Z},this),o.call(this,new i(c,d,C[y[g]],R,Z,p+2,Q[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/f+u+u},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(Jr.API);var zJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],T3=qJ(HJ),WJ=[100,200,300,400,500,600,700,800,900],L$e=qJ(WJ);function I3(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return zJ[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof T3[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function r$(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var B$e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},a$={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function n$(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function U$e(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},B$e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=I3(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+n$(i)+"' and default family '"+a+"'.");if(o=function(c,d){if(d[c])return d[c];var u=T3[c],h=u<=T3.normal?-1:1,f=r$(d,HJ,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=zJ[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=L$e[c],h=r$(d,WJ,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+n$(i)+"'.");return o}function s$(e){return e.trimLeft()}function $$e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function V$e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var KN,i$,o$,y5=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=M;Object.defineProperty(this,"pdf",{get:function(){return z}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(ue){ee=!!ue}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(ue){ne=!!ue}});var W=0;Object.defineProperty(this,"posX",{get:function(){return W},set:function(ue){isNaN(ue)||(W=ue)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(ue){isNaN(ue)||(re=ue)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ue){var oe;typeof ue=="number"?oe=[ue,ue,ue,ue]:((oe=new Array(4))[0]=ue[0],oe[1]=ue.length>=2?ue[1]:oe[0],oe[2]=ue.length>=3?ue[2]:oe[0],oe[3]=ue.length>=4?ue[3]:oe[1]),d.margin=oe}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(ue){le=ue}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ue){te=ue}});var K=[];Object.defineProperty(this,"pageBreaks",{get:function(){return K},set:function(ue){K=ue}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ue){ue instanceof u&&(d=ue)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ue){d.path=ue}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(ue){de=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var oe;oe=f(ue),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var oe=f(ue);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var H=null;function se(ue,oe){if(H===null){var ge=function(Ne){var Me=[];return Object.keys(Ne).forEach(function(We){Ne[We].forEach(function(tt){var mt=null;switch(tt){case"bold":mt={family:We,weight:"bold"};break;case"italic":mt={family:We,style:"italic"};break;case"bolditalic":mt={family:We,weight:"bold",style:"italic"};break;case"":case"normal":mt={family:We}}mt!==null&&(mt.ref={name:We,style:tt},Me.push(mt))})}),Me}(ue.getFontList());H=function(Ne){for(var Me={},We=0;We<Ne.length;++We){var tt=I3(Ne[We]),mt=tt.family,Be=tt.stretch,dt=tt.style,Dt=tt.weight;Me[mt]=Me[mt]||{},Me[mt][Be]=Me[mt][Be]||{},Me[mt][Be][dt]=Me[mt][Be][dt]||{},Me[mt][Be][dt][Dt]=tt}return Me}(ge.concat(oe))}return H}var be=null;Object.defineProperty(this,"fontFaces",{get:function(){return be},set:function(ue){H=null,be=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var oe;if(this.ctx.font=ue,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var ge=oe[1];oe[2];var Ne=oe[3],Me=oe[4];oe[5];var We=oe[6],tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(tt==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var mt=function(fe){var ve,pe,Te=[],Xe=fe.trim();if(Xe==="")return y5;if(Xe in a$)return[a$[Xe]];for(;Xe!=="";){switch(pe=null,ve=(Xe=s$(Xe)).charAt(0)){case'"':case"'":pe=$$e(Xe.substring(1),ve);break;default:pe=V$e(Xe)}if(pe===null||(Te.push(pe[0]),(Xe=s$(pe[1]))!==""&&Xe.charAt(0)!==","))return y5;Xe=Xe.replace(/^,/,"")}return Te}(We);if(this.fontFaces){var Be=U$e(se(this.pdf,this.fontFaces),mt.map(function(fe){return{family:fe,stretch:"normal",weight:Ne,style:ge}}));this.pdf.setFont(Be.ref.name,Be.ref.style)}else{var dt="";(Ne==="bold"||parseInt(Ne,10)>=700||ge==="bold")&&(dt="bold"),ge==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var Dt="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zt=0;zt<mt.length;zt++){if(this.pdf.internal.getFont(mt[zt],dt,{noFallback:!0,disableWarning:!0})!==void 0){Dt=mt[zt];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(mt[zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Dt=mt[zt],dt="bold";else if(this.pdf.internal.getFont(mt[zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Dt=mt[zt],dt="normal";break}}if(Dt===""){for(var xe=0;xe<mt.length;xe++)if(It[mt[xe]]){Dt=It[mt[xe]];break}}Dt=Dt===""?"Times":Dt,this.pdf.setFont(Dt,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,z){if(isNaN(M)||isNaN(z))throw An.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new o(M,z));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(M,z)},h.prototype.closePath=function(){var M=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Ba(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){M=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,z){if(isNaN(M)||isNaN(z))throw An.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new o(M,z));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,z,ee,ne){if(isNaN(ee)||isNaN(ne)||isNaN(M)||isNaN(z))throw An.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var W=this.ctx.transform.applyToPoint(new o(ee,ne)),re=this.ctx.transform.applyToPoint(new o(M,z));this.path.push({type:"qct",x1:re.x,y1:re.y,x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},h.prototype.bezierCurveTo=function(M,z,ee,ne,W,re){if(isNaN(W)||isNaN(re)||isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne))throw An.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new o(W,re)),te=this.ctx.transform.applyToPoint(new o(M,z)),K=this.ctx.transform.applyToPoint(new o(ee,ne));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:K.x,y2:K.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},h.prototype.arc=function(M,z,ee,ne,W,re){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne)||isNaN(W))throw An.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new o(M,z));M=le.x,z=le.y;var te=this.ctx.transform.applyToPoint(new o(0,ee)),K=this.ctx.transform.applyToPoint(new o(0,0));ee=Math.sqrt(Math.pow(te.x-K.x,2)+Math.pow(te.y-K.y,2))}Math.abs(W-ne)>=2*Math.PI&&(ne=0,W=2*Math.PI),this.path.push({type:"arc",x:M,y:z,radius:ee,startAngle:ne,endAngle:W,counterclockwise:re})},h.prototype.arcTo=function(M,z,ee,ne,W){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,z,ee,ne){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne))throw An.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,z),this.lineTo(M+ee,z),this.lineTo(M+ee,z+ne),this.lineTo(M,z+ne),this.lineTo(M,z),this.lineTo(M+ee,z),this.lineTo(M,z)},h.prototype.fillRect=function(M,z,ee,ne){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne))throw An.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var W={};this.lineCap!=="butt"&&(W.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(W.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,z,ee,ne),this.fill(),W.hasOwnProperty("lineCap")&&(this.lineCap=W.lineCap),W.hasOwnProperty("lineJoin")&&(this.lineJoin=W.lineJoin)}},h.prototype.strokeRect=function(M,z,ee,ne){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne))throw An.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,z,ee,ne),this.stroke())},h.prototype.clearRect=function(M,z,ee,ne){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne))throw An.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,z,ee,ne))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(z),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(M){var z,ee,ne,W;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))z=0,ee=0,ne=0,W=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(re!==null)z=parseInt(re[1]),ee=parseInt(re[2]),ne=parseInt(re[3]),W=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)z=parseInt(re[1]),ee=parseInt(re[2]),ne=parseInt(re[3]),W=parseFloat(re[4]);else{if(W=1,typeof M=="string"&&M.charAt(0)!=="#"){var le=new FJ(M);M=le.ok?le.toHex():"#000000"}M.length===4?(z=M.substring(1,2),z+=z,ee=M.substring(2,3),ee+=ee,ne=M.substring(3,4),ne+=ne):(z=M.substring(1,3),ee=M.substring(3,5),ne=M.substring(5,7)),z=parseInt(z,16),ee=parseInt(ee,16),ne=parseInt(ne,16)}}return{r:z,g:ee,b:ne,a:W,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,z,ee,ne){if(isNaN(z)||isNaN(ee)||typeof M!="string")throw An.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!p.call(this)){var W=R(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;P.call(this,{text:M,x:z,y:ee,scale:re,angle:W,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(M,z,ee,ne){if(isNaN(z)||isNaN(ee)||typeof M!="string")throw An.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ne=isNaN(ne)?void 0:ne;var W=R(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;P.call(this,{text:M,x:z,y:ee,scale:re,renderingMode:"stroke",angle:W,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(M){if(typeof M!="string")throw An.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,ee=this.pdf.internal.scaleFactor,ne=z.internal.getFontSize(),W=z.getStringUnitWidth(M)*ne/z.internal.scaleFactor,re=function(le){var te=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this};return new re({width:W*=Math.round(96*ee/72*1e4)/1e4})},h.prototype.scale=function(M,z){if(isNaN(M)||isNaN(z))throw An.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new c(M,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.rotate=function(M){if(isNaN(M))throw An.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.translate=function(M,z){if(isNaN(M)||isNaN(z))throw An.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new c(1,0,0,1,M,z);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.transform=function(M,z,ee,ne,W,re){if(isNaN(M)||isNaN(z)||isNaN(ee)||isNaN(ne)||isNaN(W)||isNaN(re))throw An.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(M,z,ee,ne,W,re);this.ctx.transform=this.ctx.transform.multiply(le)},h.prototype.setTransform=function(M,z,ee,ne,W,re){M=isNaN(M)?1:M,z=isNaN(z)?0:z,ee=isNaN(ee)?0:ee,ne=isNaN(ne)?1:ne,W=isNaN(W)?0:W,re=isNaN(re)?0:re,this.ctx.transform=new c(M,z,ee,ne,W,re)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,z,ee,ne,W,re,le,te,K){var de=this.pdf.getImageProperties(M),H=1,se=1,be=1,ue=1;ne!==void 0&&te!==void 0&&(be=te/ne,ue=K/W,H=de.width/ne*te/ne,se=de.height/W*K/W),re===void 0&&(re=z,le=ee,z=0,ee=0),ne!==void 0&&te===void 0&&(te=ne,K=W),ne===void 0&&te===void 0&&(te=de.width,K=de.height);for(var oe,ge=this.ctx.transform.decompose(),Ne=R(ge.rotate.shx),Me=new c,We=(Me=(Me=(Me=Me.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale)).applyToRectangle(new l(re-z*be,le-ee*ue,ne*H,W*se)),tt=b.call(this,We),mt=[],Be=0;Be<tt.length;Be+=1)mt.indexOf(tt[Be])===-1&&mt.push(tt[Be]);if(w(mt),this.autoPaging)for(var dt=mt[0],Dt=mt[mt.length-1],It=dt;It<Dt+1;It++){this.pdf.setPage(It);var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=It===1?this.posY+this.margin[0]:this.margin[0],fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=It===1?0:fe+(It-2)*ve;if(this.ctx.clip_path.length!==0){var Te=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(oe,this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Te}var Xe=JSON.parse(JSON.stringify(We));Xe=S([Xe],this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset)[0];var kt=(It>dt||It<Dt)&&g.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,ve,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,Ne),kt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",We.x,We.y,We.w,We.h,null,null,Ne)};var b=function(M,z,ee){var ne=[];z=z||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var W=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ne.push(Math.floor((M.y+W)/ee)+1);break;case"arc":ne.push(Math.floor((M.y+W-M.radius)/ee)+1),ne.push(Math.floor((M.y+W+M.radius)/ee)+1);break;case"qct":var re=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ne.push(Math.floor((re.y+W)/ee)+1),ne.push(Math.floor((re.y+re.h+W)/ee)+1);break;case"bct":var le=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ne.push(Math.floor((le.y+W)/ee)+1),ne.push(Math.floor((le.y+le.h+W)/ee)+1);break;case"rect":ne.push(Math.floor((M.y+W)/ee)+1),ne.push(Math.floor((M.y+M.h+W)/ee)+1)}for(var te=0;te<ne.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<ne[te];)y.call(this);return ne},y=function(){var M=this.fillStyle,z=this.strokeStyle,ee=this.font,ne=this.lineCap,W=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=z,this.font=ee,this.lineCap=ne,this.lineWidth=W,this.lineJoin=re},S=function(M,z,ee){for(var ne=0;ne<M.length;ne++)switch(M[ne].type){case"bct":M[ne].x2+=z,M[ne].y2+=ee;case"qct":M[ne].x1+=z,M[ne].y1+=ee;case"mt":case"lt":case"arc":default:M[ne].x+=z,M[ne].y+=ee}return M},w=function(M){return M.sort(function(z,ee){return z-ee})},k=function(M,z){for(var ee,ne,W=this.fillStyle,re=this.strokeStyle,le=this.lineCap,te=this.lineWidth,K=Math.abs(te*this.ctx.transform.scaleX),de=this.lineJoin,H=JSON.parse(JSON.stringify(this.path)),se=JSON.parse(JSON.stringify(this.path)),be=[],ue=0;ue<se.length;ue++)if(se[ue].x!==void 0)for(var oe=b.call(this,se[ue]),ge=0;ge<oe.length;ge+=1)be.indexOf(oe[ge])===-1&&be.push(oe[ge]);for(var Ne=0;Ne<be.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<be[Ne];)y.call(this);if(w(be),this.autoPaging)for(var Me=be[0],We=be[be.length-1],tt=Me;tt<We+1;tt++){this.pdf.setPage(tt),this.fillStyle=W,this.strokeStyle=re,this.lineCap=le,this.lineWidth=K,this.lineJoin=de;var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=tt===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=tt===1?0:dt+(tt-2)*Dt;if(this.ctx.clip_path.length!==0){var zt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ee,this.posX+this.margin[3],-It+Be+this.ctx.prevPageLastElemOffset),C.call(this,M,!0),this.path=zt}if(ne=JSON.parse(JSON.stringify(H)),this.path=S(ne,this.posX+this.margin[3],-It+Be+this.ctx.prevPageLastElemOffset),z===!1||tt===0){var xe=(tt>Me||tt<We)&&g.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Dt,null).clip().discardPath()),C.call(this,M,z),xe&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=K,C.call(this,M,z),this.lineWidth=te;this.path=H},C=function(M,z){if((M!=="stroke"||z||!v.call(this))&&(M==="stroke"||z||!p.call(this))){for(var ee,ne,W=[],re=this.path,le=0;le<re.length;le++){var te=re[le];switch(te.type){case"begin":W.push({begin:!0});break;case"close":W.push({close:!0});break;case"mt":W.push({start:te,deltas:[],abs:[]});break;case"lt":var K=W.length;if(re[le-1]&&!isNaN(re[le-1].x)&&(ee=[te.x-re[le-1].x,te.y-re[le-1].y],K>0)){for(;K>=0;K--)if(W[K-1].close!==!0&&W[K-1].begin!==!0){W[K-1].deltas.push(ee),W[K-1].abs.push(te);break}}break;case"bct":ee=[te.x1-re[le-1].x,te.y1-re[le-1].y,te.x2-re[le-1].x,te.y2-re[le-1].y,te.x-re[le-1].x,te.y-re[le-1].y],W[W.length-1].deltas.push(ee);break;case"qct":var de=re[le-1].x+2/3*(te.x1-re[le-1].x),H=re[le-1].y+2/3*(te.y1-re[le-1].y),se=te.x+2/3*(te.x1-te.x),be=te.y+2/3*(te.y1-te.y),ue=te.x,oe=te.y;ee=[de-re[le-1].x,H-re[le-1].y,se-re[le-1].x,be-re[le-1].y,ue-re[le-1].x,oe-re[le-1].y],W[W.length-1].deltas.push(ee);break;case"arc":W.push({deltas:[],abs:[],arc:!0}),Array.isArray(W[W.length-1].abs)&&W[W.length-1].abs.push(te)}}ne=z?null:M==="stroke"?"stroke":"fill";for(var ge=!1,Ne=0;Ne<W.length;Ne++)if(W[Ne].arc)for(var Me=W[Ne].abs,We=0;We<Me.length;We++){var tt=Me[We];tt.type==="arc"?T.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,z,!ge):q.call(this,tt.x,tt.y),ge=!0}else if(W[Ne].close===!0)this.pdf.internal.out("h"),ge=!1;else if(W[Ne].begin!==!0){var mt=W[Ne].start.x,Be=W[Ne].start.y;V.call(this,W[Ne].deltas,mt,Be),ge=!0}ne&&I.call(this,ne),z&&F.call(this)}},_=function(M){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-ee;case"top":return M+z-ee;case"hanging":return M+z-2*ee;case"middle":return M+z/2-ee;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(z,ee){this.colorStops.push([z,ee])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(M,z,ee,ne,W,re,le,te,K){for(var de=B.call(this,ee,ne,W,re),H=0;H<de.length;H++){var se=de[H];H===0&&(K?A.call(this,se.x1+M,se.y1+z):q.call(this,se.x1+M,se.y1+z)),Y.call(this,M,z,se.x2,se.y2,se.x3,se.y3,se.x4,se.y4)}te?F.call(this):I.call(this,le)},I=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(M,z){this.pdf.internal.out(r(M)+" "+a(z)+" m")},P=function(M){var z;switch(M.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var ee=this.pdf.getTextDimensions(M.text),ne=_.call(this,M.y),W=E.call(this,ne)-ee.h,re=this.ctx.transform.applyToPoint(new o(M.x,ne)),le=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var K,de,H,se=this.ctx.transform.applyToRectangle(new l(M.x,ne,ee.w,ee.h)),be=te.applyToRectangle(new l(M.x,W,ee.w,ee.h)),ue=b.call(this,be),oe=[],ge=0;ge<ue.length;ge+=1)oe.indexOf(ue[ge])===-1&&oe.push(ue[ge]);if(w(oe),this.autoPaging)for(var Ne=oe[0],Me=oe[oe.length-1],We=Ne;We<Me+1;We++){this.pdf.setPage(We);var tt=We===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],dt=Be-this.margin[0],Dt=this.pdf.internal.pageSize.width-this.margin[1],It=Dt-this.margin[3],zt=We===1?0:mt+(We-2)*dt;if(this.ctx.clip_path.length!==0){var xe=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(K,this.posX+this.margin[3],-1*zt+tt),C.call(this,"fill",!0),this.path=xe}var fe=S([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-zt+tt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),H=this.lineWidth,this.lineWidth=H*M.scale);var ve=this.autoPaging!=="text";if(ve||fe.y+fe.h<=Be){if(ve||fe.y>=tt&&fe.x<=Dt){var pe=ve?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Dt-fe.x)[0],Te=S([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-zt+tt+this.ctx.prevPageLastElemOffset)[0],Xe=ve&&(We>Ne||We<Me)&&g.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,dt,null).clip().discardPath()),this.pdf.text(pe,Te.x,Te.y,{angle:M.angle,align:z,renderingMode:M.renderingMode}),Xe&&this.pdf.restoreGraphicsState()}}else fe.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-fe.y);M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=H)}else M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),H=this.lineWidth,this.lineWidth=H*M.scale),this.pdf.text(M.text,re.x+this.posX,re.y+this.posY,{angle:M.angle,align:z,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=H)},q=function(M,z,ee,ne){ee=ee||0,ne=ne||0,this.pdf.internal.out(r(M+ee)+" "+a(z+ne)+" l")},V=function(M,z,ee){return this.pdf.lines(M,z,ee,null,null)},Y=function(M,z,ee,ne,W,re,le,te){this.pdf.internal.out([t(s(ee+M)),t(i(ne+z)),t(s(W+M)),t(i(re+z)),t(s(le+M)),t(i(te+z)),"c"].join(" "))},B=function(M,z,ee,ne){for(var W=2*Math.PI,re=Math.PI/2;z>ee;)z-=W;var le=Math.abs(ee-z);le<W&&ne&&(le=W-le);for(var te=[],K=ne?-1:1,de=z;le>1e-5;){var H=de+K*Math.min(le,re);te.push(Q.call(this,M,de,H)),le-=Math.abs(H-de),de=H}return te},Q=function(M,z,ee){var ne=(ee-z)/2,W=M*Math.cos(ne),re=M*Math.sin(ne),le=W,te=-re,K=le*le+te*te,de=K+le*W+te*re,H=4/3*(Math.sqrt(2*K*de)-de)/(le*re-te*W),se=le-H*te,be=te+H*le,ue=se,oe=-be,ge=ne+z,Ne=Math.cos(ge),Me=Math.sin(ge);return{x1:M*Math.cos(z),y1:M*Math.sin(z),x2:se*Ne-be*Me,y2:se*Me+be*Ne,x3:ue*Ne-oe*Me,y3:ue*Me+oe*Ne,x4:M*Math.cos(ee),y4:M*Math.sin(ee)}},R=function(M){return 180*M/Math.PI},Z=function(M,z,ee,ne,W,re){var le=M+.5*(ee-M),te=z+.5*(ne-z),K=W+.5*(ee-W),de=re+.5*(ne-re),H=Math.min(M,W,le,K),se=Math.max(M,W,le,K),be=Math.min(z,re,te,de),ue=Math.max(z,re,te,de);return new l(H,be,se-H,ue-be)},J=function(M,z,ee,ne,W,re,le,te){var K,de,H,se,be,ue,oe,ge,Ne,Me,We,tt,mt,Be,dt=ee-M,Dt=ne-z,It=W-ee,zt=re-ne,xe=le-W,fe=te-re;for(de=0;de<41;de++)Ne=(oe=(H=M+(K=de/40)*dt)+K*((be=ee+K*It)-H))+K*(be+K*(W+K*xe-be)-oe),Me=(ge=(se=z+K*Dt)+K*((ue=ne+K*zt)-se))+K*(ue+K*(re+K*fe-ue)-ge),de==0?(We=Ne,tt=Me,mt=Ne,Be=Me):(We=Math.min(We,Ne),tt=Math.min(tt,Me),mt=Math.max(mt,Ne),Be=Math.max(Be,Me));return new l(Math.round(We),Math.round(tt),Math.round(mt-We),Math.round(Be-tt))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,z,ee=(M=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:z}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(Jr.API),function(e){var t=function(i){var o,l,c,d,u,h,f,p,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(v=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,p+33,v+33,g+33)):l.push(122);return function(b,y){for(var S=y;S>0;S--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,f="length",p=255,v="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[f]%5||5))[f];u>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(y,S){for(var w=S;w>0;w--)y.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=k3(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Jr.API),function(e){e.loadFile=function(t,r,a){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,p=function(v){var g=v.length,b=[],y=String.fromCharCode;for(f=0;f<g;f+=1)b.push(y(255&v.charCodeAt(f)));return b.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(s,i,o)}catch{}return l}(t,r,a)},e.loadImageFile=e.loadFile}(Jr.API),function(e){function t(){return(ta.html2canvas?Promise.resolve(ta.html2canvas):j3(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(ta.DOMPurify?Promise.resolve(ta.DOMPurify):j3(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=Ba(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],v=p.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Jr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Jr.getPageSize=function(o,l,c){if(Ba(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,v=0,g=0;if(f.hasOwnProperty(h))v=f[h][1]/u,g=f[h][0]/u;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(p=g,g=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(p=g,g=v,v=p)}return{width:g,height:v,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(I3):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Jr.API),Jr.API.addJS=function(e){return o$=e,this.internal.events.subscribe("postPutResources",function(){KN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(KN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),i$=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+o$+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){KN!==void 0&&i$!==void 0&&this.internal.out("/Names <</JavaScript "+KN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var f=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])}(Jr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var f,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,g={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=p,t.indexOf(h.charCodeAt(b+1))!==-1){f=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:f,numcomponents:h.charCodeAt(b+9)};break}p=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}}(Jr.API);var s0,XN,l$,c$,d$,q$e=function(){var e,t,r;function a(i){var o,l,c,d,u,h,f,p,v,g,b,y,S,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var k,C;for(C=[],k=0;k<4;++k)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(S=0;0<=g?S<g:S>g;0<=g?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(b=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,f,p,v){var g,b,y,S,w,k,C,_,E,T,I,F,A,P,q,V,Y,B,Q,R,Z,J=Math.ceil((d.width-h)/p),ie=Math.ceil((d.height-f)/v),M=d.width==J&&d.height==ie;for(P=o*J,F=M?l:new Uint8Array(P*ie),k=i.length,A=0,b=0;A<ie&&c<k;){switch(i[c++]){case 0:for(S=Y=0;Y<P;S=Y+=1)F[b++]=i[c++];break;case 1:for(S=B=0;B<P;S=B+=1)g=i[c++],w=S<o?0:F[b-o],F[b++]=(g+w)%256;break;case 2:for(S=Q=0;Q<P;S=Q+=1)g=i[c++],y=(S-S%o)/o,q=A&&F[(A-1)*P+y*o+S%o],F[b++]=(q+g)%256;break;case 3:for(S=R=0;R<P;S=R+=1)g=i[c++],y=(S-S%o)/o,w=S<o?0:F[b-o],q=A&&F[(A-1)*P+y*o+S%o],F[b++]=(g+Math.floor((w+q)/2))%256;break;case 4:for(S=Z=0;Z<P;S=Z+=1)g=i[c++],y=(S-S%o)/o,w=S<o?0:F[b-o],A===0?q=V=0:(q=F[(A-1)*P+y*o+S%o],V=y&&F[(A-1)*P+(y-1)*o+S%o]),C=w+q-V,_=Math.abs(C-w),T=Math.abs(C-q),I=Math.abs(C-V),E=_<=T&&_<=I?w:T<=I?q:V,F[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var z=((f+A*v)*d.width+h)*o,ee=A*P;for(S=0;S<J;S+=1){for(var ne=0;ne<o;ne+=1)l[z++]=F[ee++];z+=(p-1)*o}}A++}}return i=j$e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,h,f,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,h,f,p,v,g,b,y;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,h=g||o,u=f=0,c===1)for(;u<v;)p=g?4*o[u/4]:f,b=h[p++],d[u++]=b,d[u++]=b,d[u++]=b,d[u++]=l?h[p++]:255,f=p;else for(;u<v;)p=g?4*o[u/4]:f,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,f=p},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(ta)==="[object Window]"){try{t=ta.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,h,f,p;if(this.animation){for(p=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,v;if(p=l++%d,v=c[p],f.renderFrame(i,p),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,v.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function z$e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,f=null,p=0,v=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],(1&g)==0&&(f=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,k=e[t++],C=k>>6&1,_=1<<(7&k)+1,E=l,T=c,I=!1;k>>7&&(I=!0,E=t,T=_,t+=3*_);var F=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}u.push({x:b,y,width:S,height:w,has_local_palette:I,palette_offset:E,palette_size:T,data_offset:F,data_length:t-F,transparent_index:f,interlaced:!!C,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,q){var V=this.frameInfo(P),Y=V.width*V.height,B=new Uint8Array(Y);u$(e,V.data_offset,B,Y);var Q=V.palette_offset,R=V.transparent_index;R===null&&(R=256);var Z=V.width,J=r-Z,ie=Z,M=4*(V.y*r+V.x),z=4*((V.y+V.height)*r+V.x),ee=M,ne=4*J;V.interlaced===!0&&(ne+=4*r*7);for(var W=8,re=0,le=B.length;re<le;++re){var te=B[re];if(ie===0&&(ie=Z,(ee+=ne)>=z&&(ne=4*J+4*r*(W-1),ee=M+(Z+J)*(W<<1),W>>=1)),te===R)ee+=4;else{var K=e[Q+3*te],de=e[Q+3*te+1],H=e[Q+3*te+2];q[ee++]=H,q[ee++]=de,q[ee++]=K,q[ee++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(P,q){var V=this.frameInfo(P),Y=V.width*V.height,B=new Uint8Array(Y);u$(e,V.data_offset,B,Y);var Q=V.palette_offset,R=V.transparent_index;R===null&&(R=256);var Z=V.width,J=r-Z,ie=Z,M=4*(V.y*r+V.x),z=4*((V.y+V.height)*r+V.x),ee=M,ne=4*J;V.interlaced===!0&&(ne+=4*r*7);for(var W=8,re=0,le=B.length;re<le;++re){var te=B[re];if(ie===0&&(ie=Z,(ee+=ne)>=z&&(ne=4*J+4*r*(W-1),ee=M+(Z+J)*(W<<1),W>>=1)),te===R)ee+=4;else{var K=e[Q+3*te],de=e[Q+3*te+1],H=e[Q+3*te+2];q[ee++]=K,q[ee++]=de,q[ee++]=H,q[ee++]=255}--ie}}}function u$(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,h=0,f=0,p=e[t++],v=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var b=h&d;if(h>>=c,u-=c,b!==i){if(b===o)break;for(var y=b<l?b:g,S=0,w=y;w>i;)w=v[w]>>8,++S;var k=w;if(f+S+(y!==b?1:0)>a)return void An.log("Warning, gif stream longer than expected.");r[f++]=k;var C=f+=S;for(y!==b&&(r[f++]=k),w=y;S--;)w=v[w],r[--C]=255&w,w>>=8;g!==null&&l<4096&&(v[l++]=g<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=s+1))-1,g=null}return f!==a&&An.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function j5(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),v=new Array(64),g=[],b=0,y=7,S=new Array(64),w=new Array(64),k=new Array(64),C=new Array(256),_=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(M,z){for(var ee=0,ne=0,W=new Array,re=1;re<=16;re++){for(var le=1;le<=M[re];le++)W[z[ne]]=[],W[z[ne]][0]=ee,W[z[ne]][1]=re,ne++,ee++;ee*=2}return W}function Q(M){for(var z=M[0],ee=M[1]-1;ee>=0;)z&1<<ee&&(b|=1<<y),ee--,--y<0&&(b==255?(R(255),R(0)):R(b),y=7,b=0)}function R(M){g.push(M)}function Z(M){R(M>>8&255),R(255&M)}function J(M,z,ee,ne,W){for(var re,le=W[0],te=W[240],K=function(Me,We){var tt,mt,Be,dt,Dt,It,zt,xe,fe,ve,pe=0;for(fe=0;fe<8;++fe){tt=Me[pe],mt=Me[pe+1],Be=Me[pe+2],dt=Me[pe+3],Dt=Me[pe+4],It=Me[pe+5],zt=Me[pe+6];var Te=tt+(xe=Me[pe+7]),Xe=tt-xe,kt=mt+zt,Je=mt-zt,ze=Be+It,Fe=Be-It,Ve=dt+Dt,pt=dt-Dt,Pe=Te+Ve,Re=Te-Ve,Ye=kt+ze,At=kt-ze;Me[pe]=Pe+Ye,Me[pe+4]=Pe-Ye;var Gt=.707106781*(At+Re);Me[pe+2]=Re+Gt,Me[pe+6]=Re-Gt;var De=.382683433*((Pe=pt+Fe)-(At=Je+Xe)),Ee=.5411961*Pe+De,it=1.306562965*At+De,Tt=.707106781*(Ye=Fe+Je),lr=Xe+Tt,Rt=Xe-Tt;Me[pe+5]=Rt+Ee,Me[pe+3]=Rt-Ee,Me[pe+1]=lr+it,Me[pe+7]=lr-it,pe+=8}for(pe=0,fe=0;fe<8;++fe){tt=Me[pe],mt=Me[pe+8],Be=Me[pe+16],dt=Me[pe+24],Dt=Me[pe+32],It=Me[pe+40],zt=Me[pe+48];var sr=tt+(xe=Me[pe+56]),pr=tt-xe,Nr=mt+zt,gt=mt-zt,Bt=Be+It,he=Be-It,Le=dt+Dt,Ae=dt-Dt,_e=sr+Le,Ue=sr-Le,He=Nr+Bt,xt=Nr-Bt;Me[pe]=_e+He,Me[pe+32]=_e-He;var jt=.707106781*(xt+Ue);Me[pe+16]=Ue+jt,Me[pe+48]=Ue-jt;var ct=.382683433*((_e=Ae+he)-(xt=gt+pr)),Nt=.5411961*_e+ct,wt=1.306562965*xt+ct,er=.707106781*(He=he+gt),cr=pr+er,xr=pr-er;Me[pe+40]=xr+Nt,Me[pe+24]=xr-Nt,Me[pe+8]=cr+wt,Me[pe+56]=cr-wt,pe++}for(fe=0;fe<64;++fe)ve=Me[fe]*We[fe],p[fe]=ve>0?ve+.5|0:ve-.5|0;return p}(M,z),de=0;de<64;++de)v[E[de]]=K[de];var H=v[0]-ee;ee=v[0],H==0?Q(ne[0]):(Q(ne[f[re=32767+H]]),Q(h[re]));for(var se=63;se>0&&v[se]==0;)se--;if(se==0)return Q(le),ee;for(var be,ue=1;ue<=se;){for(var oe=ue;v[ue]==0&&ue<=se;)++ue;var ge=ue-oe;if(ge>=16){be=ge>>4;for(var Ne=1;Ne<=be;++Ne)Q(te);ge&=15}re=32767+v[ue],Q(W[(ge<<4)+f[re]]),Q(h[re]),ue++}return se!=63&&Q(le),ee}function ie(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(z){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var W=o((ee[ne]*z+50)/100);W=Math.min(Math.max(W,1),255),l[E[ne]]=W}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var te=o((re[le]*z+50)/100);te=Math.min(Math.max(te,1),255),c[E[le]]=te}for(var K=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,H=0;H<8;H++)for(var se=0;se<8;se++)d[de]=1/(l[E[de]]*K[H]*K[se]*8),u[de]=1/(c[E[de]]*K[H]*K[se]*8),de++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,z){z&&ie(z),g=new Array,b=0,y=7,Z(65496),Z(65504),Z(16),R(74),R(70),R(73),R(70),R(0),R(1),R(1),R(0),Z(1),Z(1),R(0),R(0),function(){Z(65499),Z(132),R(0);for(var mt=0;mt<64;mt++)R(l[mt]);R(1);for(var Be=0;Be<64;Be++)R(c[Be])}(),function(mt,Be){Z(65472),Z(17),R(8),Z(Be),Z(mt),R(3),R(1),R(17),R(0),R(2),R(17),R(1),R(3),R(17),R(1)}(M.width,M.height),function(){Z(65476),Z(418),R(0);for(var mt=0;mt<16;mt++)R(T[mt+1]);for(var Be=0;Be<=11;Be++)R(I[Be]);R(16);for(var dt=0;dt<16;dt++)R(F[dt+1]);for(var Dt=0;Dt<=161;Dt++)R(A[Dt]);R(1);for(var It=0;It<16;It++)R(P[It+1]);for(var zt=0;zt<=11;zt++)R(q[zt]);R(17);for(var xe=0;xe<16;xe++)R(V[xe+1]);for(var fe=0;fe<=161;fe++)R(Y[fe])}(),Z(65498),Z(12),R(3),R(1),R(0),R(2),R(17),R(3),R(17),R(0),R(63),R(0);var ee=0,ne=0,W=0;b=0,y=7,this.encode.displayName="_encode_";for(var re,le,te,K,de,H,se,be,ue,oe=M.data,ge=M.width,Ne=M.height,Me=4*ge,We=0;We<Ne;){for(re=0;re<Me;){for(de=Me*We+re,se=-1,be=0,ue=0;ue<64;ue++)H=de+(be=ue>>3)*Me+(se=4*(7&ue)),We+be>=Ne&&(H-=Me*(We+1+be-Ne)),re+se>=Me&&(H-=re+se-Me+4),le=oe[H++],te=oe[H++],K=oe[H++],S[ue]=(_[le]+_[te+256>>0]+_[K+512>>0]>>16)-128,w[ue]=(_[le+768>>0]+_[te+1024>>0]+_[K+1280>>0]>>16)-128,k[ue]=(_[le+1280>>0]+_[te+1536>>0]+_[K+1792>>0]>>16)-128;ee=J(S,d,ee,t,a),ne=J(w,u,ne,r,s),W=J(k,u,W,r,s),re+=32}We+=8}if(y>=0){var tt=[];tt[1]=y+1,tt[0]=(1<<y+1)-1,Q(tt)}return Z(65497),new Uint8Array(g)},e=e||50,function(){for(var M=String.fromCharCode,z=0;z<256;z++)C[z]=M(z)}(),t=B(T,I),r=B(P,q),a=B(F,A),s=B(V,Y),function(){for(var M=1,z=2,ee=1;ee<=15;ee++){for(var ne=M;ne<z;ne++)f[32767+ne]=ee,h[32767+ne]=[],h[32767+ne][1]=ee,h[32767+ne][0]=ne;for(var W=-(z-1);W<=-M;W++)f[32767+W]=ee,h[32767+W]=[],h[32767+W][1]=ee,h[32767+W][0]=z-1+W;M<<=1,z<<=1}}(),function(){for(var M=0;M<256;M++)_[M]=19595*M,_[M+256>>0]=38470*M,_[M+512>>0]=7471*M+32768,_[M+768>>0]=-11059*M,_[M+1024>>0]=-21709*M,_[M+1280>>0]=32768*M+8421375,_[M+1536>>0]=-27439*M,_[M+1792>>0]=-5329*M}(),ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function h$(e){function t(T){if(!T)throw Error("assert :P")}function r(T,I,F){for(var A=0;4>A;A++)if(T[I+A]!=F.charCodeAt(A))return!0;return!1}function a(T,I,F,A,P){for(var q=0;q<P;q++)T[I+q]=F[A+q]}function s(T,I,F,A){for(var P=0;P<A;P++)T[I+P]=F}function i(T){return new Int32Array(T)}function o(T,I){for(var F=[],A=0;A<T;A++)F.push(new I);return F}function l(T,I){var F=[];return function A(P,q,V){for(var Y=V[q],B=0;B<Y&&(P.push(V.length>q+1?[]:new I),!(V.length<q+1));B++)A(P[B],q+1,V)}(F,0,T),F}var c=function(){var T=this;function I(O,U){for(var ae=1<<U-1>>>0;O&ae;)ae>>>=1;return ae?(O&ae-1)+ae:O}function F(O,U,ae,ce,ye){t(!(ce%ae));do O[U+(ce-=ae)]=ye;while(0<ce)}function A(O,U,ae,ce,ye){if(t(2328>=ye),512>=ye)var we=i(512);else if((we=i(ye))==null)return 0;return function(Se,Ce,Oe,qe,st,Et){var St,vt,tr=Ce,Lt=1<<Oe,ot=i(16),ht=i(16);for(t(st!=0),t(qe!=null),t(Se!=null),t(0<Oe),vt=0;vt<st;++vt){if(15<qe[vt])return 0;++ot[qe[vt]]}if(ot[0]==st)return 0;for(ht[1]=0,St=1;15>St;++St){if(ot[St]>1<<St)return 0;ht[St+1]=ht[St]+ot[St]}for(vt=0;vt<st;++vt)St=qe[vt],0<qe[vt]&&(Et[ht[St]++]=vt);if(ht[15]==1)return(qe=new P).g=0,qe.value=Et[0],F(Se,tr,1,Lt,qe),Lt;var Yt,rr=-1,Qt=Lt-1,kr=0,br=1,qr=1,yr=1<<Oe;for(vt=0,St=1,st=2;St<=Oe;++St,st<<=1){if(br+=qr<<=1,0>(qr-=ot[St]))return 0;for(;0<ot[St];--ot[St])(qe=new P).g=St,qe.value=Et[vt++],F(Se,tr+kr,st,yr,qe),kr=I(kr,St)}for(St=Oe+1,st=2;15>=St;++St,st<<=1){if(br+=qr<<=1,0>(qr-=ot[St]))return 0;for(;0<ot[St];--ot[St]){if(qe=new P,(kr&Qt)!=rr){for(tr+=yr,Yt=1<<(rr=St)-Oe;15>rr&&!(0>=(Yt-=ot[rr]));)++rr,Yt<<=1;Lt+=yr=1<<(Yt=rr-Oe),Se[Ce+(rr=kr&Qt)].g=Yt+Oe,Se[Ce+rr].value=tr-Ce-rr}qe.g=St-Oe,qe.value=Et[vt++],F(Se,tr+(kr>>Oe),st,yr,qe),kr=I(kr,St)}}return br!=2*ht[15]-1?0:Lt}(O,U,ae,ce,ye,we)}function P(){this.value=this.g=0}function q(){this.value=this.g=0}function V(){this.G=o(5,P),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Os,q)}function Y(O,U,ae,ce){t(O!=null),t(U!=null),t(2147483648>ce),O.Ca=254,O.I=0,O.b=-8,O.Ka=0,O.oa=U,O.pa=ae,O.Jd=U,O.Yc=ae+ce,O.Zc=4<=ce?ae+ce-4+1:ae,re(O)}function B(O,U){for(var ae=0;0<U--;)ae|=te(O,128)<<U;return ae}function Q(O,U){var ae=B(O,U);return le(O)?-ae:ae}function R(O,U,ae,ce){var ye,we=0;for(t(O!=null),t(U!=null),t(4294967288>ce),O.Sb=ce,O.Ra=0,O.u=0,O.h=0,4<ce&&(ce=4),ye=0;ye<ce;++ye)we+=U[ae+ye]<<8*ye;O.Ra=we,O.bb=ce,O.oa=U,O.pa=ae}function Z(O){for(;8<=O.u&&O.bb<O.Sb;)O.Ra>>>=8,O.Ra+=O.oa[O.pa+O.bb]<<vh-8>>>0,++O.bb,O.u-=8;ee(O)&&(O.h=1,O.u=0)}function J(O,U){if(t(0<=U),!O.h&&U<=xh){var ae=z(O)&Zd[U];return O.u+=U,Z(O),ae}return O.h=1,O.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(O){return O.Ra>>>(O.u&vh-1)>>>0}function ee(O){return t(O.bb<=O.Sb),O.h||O.bb==O.Sb&&O.u>vh}function ne(O,U){O.u=U,O.h=ee(O)}function W(O){O.u>=Vf&&(t(O.u>=Vf),Z(O))}function re(O){t(O!=null&&O.oa!=null),O.pa<O.Zc?(O.I=(O.oa[O.pa++]|O.I<<8)>>>0,O.b+=8):(t(O!=null&&O.oa!=null),O.pa<O.Yc?(O.b+=8,O.I=O.oa[O.pa++]|O.I<<8):O.Ka?O.b=0:(O.I<<=8,O.b+=8,O.Ka=1))}function le(O){return B(O,1)}function te(O,U){var ae=O.Ca;0>O.b&&re(O);var ce=O.b,ye=ae*U>>>8,we=(O.I>>>ce>ye)+0;for(we?(ae-=ye,O.I-=ye+1<<ce>>>0):ae=ye+1,ce=ae,ye=0;256<=ce;)ye+=8,ce>>=8;return ce=7^ye+uo[ce],O.b-=ce,O.Ca=(ae<<ce)-1,we}function K(O,U,ae){O[U+0]=ae>>24&255,O[U+1]=ae>>16&255,O[U+2]=ae>>8&255,O[U+3]=ae>>0&255}function de(O,U){return O[U+0]<<0|O[U+1]<<8}function H(O,U){return de(O,U)|O[U+2]<<16}function se(O,U){return de(O,U)|de(O,U+2)<<16}function be(O,U){var ae=1<<U;return t(O!=null),t(0<U),O.X=i(ae),O.X==null?0:(O.Mb=32-U,O.Xa=U,1)}function ue(O,U){t(O!=null),t(U!=null),t(O.Xa==U.Xa),a(U.X,0,O.X,0,1<<U.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function ge(O,U,ae,ce){t(ae!=null),t(ce!=null);var ye=ae[0],we=ce[0];return ye==0&&(ye=(O*we+U/2)/U),we==0&&(we=(U*ye+O/2)/O),0>=ye||0>=we?0:(ae[0]=ye,ce[0]=we,1)}function Ne(O,U){return O+(1<<U)-1>>>U}function Me(O,U){return((4278255360&O)+(4278255360&U)>>>0&4278255360)+((16711935&O)+(16711935&U)>>>0&16711935)>>>0}function We(O,U){T[U]=function(ae,ce,ye,we,Se,Ce,Oe){var qe;for(qe=0;qe<Se;++qe){var st=T[O](Ce[Oe+qe-1],ye,we+qe);Ce[Oe+qe]=Me(ae[ce+qe],st)}}}function tt(){this.ud=this.hd=this.jd=0}function mt(O,U){return((4278124286&(O^U))>>>1)+(O&U)>>>0}function Be(O){return 0<=O&&256>O?O:0>O?0:255<O?255:void 0}function dt(O,U){return Be(O+(O-U+.5>>1))}function Dt(O,U,ae){return Math.abs(U-ae)-Math.abs(O-ae)}function It(O,U,ae,ce,ye,we,Se){for(ce=we[Se-1],ae=0;ae<ye;++ae)we[Se+ae]=ce=Me(O[U+ae],ce)}function zt(O,U,ae,ce,ye){var we;for(we=0;we<ae;++we){var Se=O[U+we],Ce=Se>>8&255,Oe=16711935&(Oe=(Oe=16711935&Se)+((Ce<<16)+Ce));ce[ye+we]=(4278255360&Se)+Oe>>>0}}function xe(O,U){U.jd=O>>0&255,U.hd=O>>8&255,U.ud=O>>16&255}function fe(O,U,ae,ce,ye,we){var Se;for(Se=0;Se<ce;++Se){var Ce=U[ae+Se],Oe=Ce>>>8,qe=Ce,st=255&(st=(st=Ce>>>16)+((O.jd<<24>>24)*(Oe<<24>>24)>>>5));qe=255&(qe=(qe=qe+((O.hd<<24>>24)*(Oe<<24>>24)>>>5))+((O.ud<<24>>24)*(st<<24>>24)>>>5)),ye[we+Se]=(4278255360&Ce)+(st<<16)+qe}}function ve(O,U,ae,ce,ye){T[U]=function(we,Se,Ce,Oe,qe,st,Et,St,vt){for(Oe=Et;Oe<St;++Oe)for(Et=0;Et<vt;++Et)qe[st++]=ye(Ce[ce(we[Se++])])},T[O]=function(we,Se,Ce,Oe,qe,st,Et){var St=8>>we.b,vt=we.Ea,tr=we.K[0],Lt=we.w;if(8>St)for(we=(1<<we.b)-1,Lt=(1<<St)-1;Se<Ce;++Se){var ot,ht=0;for(ot=0;ot<vt;++ot)ot&we||(ht=ce(Oe[qe++])),st[Et++]=ye(tr[ht&Lt]),ht>>=St}else T["VP8LMapColor"+ae](Oe,qe,tr,Lt,st,Et,Se,Ce,vt)}}function pe(O,U,ae,ce,ye){for(ae=U+ae;U<ae;){var we=O[U++];ce[ye++]=we>>16&255,ce[ye++]=we>>8&255,ce[ye++]=we>>0&255}}function Te(O,U,ae,ce,ye){for(ae=U+ae;U<ae;){var we=O[U++];ce[ye++]=we>>16&255,ce[ye++]=we>>8&255,ce[ye++]=we>>0&255,ce[ye++]=we>>24&255}}function Xe(O,U,ae,ce,ye){for(ae=U+ae;U<ae;){var we=(Se=O[U++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;ce[ye++]=we,ce[ye++]=Se}}function kt(O,U,ae,ce,ye){for(ae=U+ae;U<ae;){var we=(Se=O[U++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;ce[ye++]=we,ce[ye++]=Se}}function Je(O,U,ae,ce,ye){for(ae=U+ae;U<ae;){var we=O[U++];ce[ye++]=we>>0&255,ce[ye++]=we>>8&255,ce[ye++]=we>>16&255}}function ze(O,U,ae,ce,ye,we){if(we==0)for(ae=U+ae;U<ae;)K(ce,((we=O[U++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ye+=32;else a(ce,ye,O,U,ae)}function Fe(O,U){T[U][0]=T[O+"0"],T[U][1]=T[O+"1"],T[U][2]=T[O+"2"],T[U][3]=T[O+"3"],T[U][4]=T[O+"4"],T[U][5]=T[O+"5"],T[U][6]=T[O+"6"],T[U][7]=T[O+"7"],T[U][8]=T[O+"8"],T[U][9]=T[O+"9"],T[U][10]=T[O+"10"],T[U][11]=T[O+"11"],T[U][12]=T[O+"12"],T[U][13]=T[O+"13"],T[U][14]=T[O+"0"],T[U][15]=T[O+"0"]}function Ve(O){return O==Sp||O==cu||O==cd||O==Wf}function pt(){this.eb=[],this.size=this.A=this.fb=0}function Pe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Re(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pt,this.f.kb=new Pe,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function At(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gt(O){return alert("todo:WebPSamplerProcessPlane"),O.T}function De(O,U){var ae=O.T,ce=U.ba.f.RGBA,ye=ce.eb,we=ce.fb+O.ka*ce.A,Se=ti[U.ba.S],Ce=O.y,Oe=O.O,qe=O.f,st=O.N,Et=O.ea,St=O.W,vt=U.cc,tr=U.dc,Lt=U.Mc,ot=U.Nc,ht=O.ka,Yt=O.ka+O.T,rr=O.U,Qt=rr+1>>1;for(ht==0?Se(Ce,Oe,null,null,qe,st,Et,St,qe,st,Et,St,ye,we,null,null,rr):(Se(U.ec,U.fc,Ce,Oe,vt,tr,Lt,ot,qe,st,Et,St,ye,we-ce.A,ye,we,rr),++ae);ht+2<Yt;ht+=2)vt=qe,tr=st,Lt=Et,ot=St,st+=O.Rc,St+=O.Rc,we+=2*ce.A,Se(Ce,(Oe+=2*O.fa)-O.fa,Ce,Oe,vt,tr,Lt,ot,qe,st,Et,St,ye,we-ce.A,ye,we,rr);return Oe+=O.fa,O.j+Yt<O.o?(a(U.ec,U.fc,Ce,Oe,rr),a(U.cc,U.dc,qe,st,Qt),a(U.Mc,U.Nc,Et,St,Qt),ae--):1&Yt||Se(Ce,Oe,null,null,qe,st,Et,St,qe,st,Et,St,ye,we+ce.A,null,null,rr),ae}function Ee(O,U,ae){var ce=O.F,ye=[O.J];if(ce!=null){var we=O.U,Se=U.ba.S,Ce=Se==Nh||Se==cd;U=U.ba.f.RGBA;var Oe=[0],qe=O.ka;Oe[0]=O.T,O.Kb&&(qe==0?--Oe[0]:(--qe,ye[0]-=O.width),O.j+O.ka+O.T==O.o&&(Oe[0]=O.o-O.j-qe));var st=U.eb;qe=U.fb+qe*U.A,O=Na(ce,ye[0],O.width,we,Oe,st,qe+(Ce?0:3),U.A),t(ae==Oe),O&&Ve(Se)&&Wo(st,qe,Ce,we,Oe,U.A)}return 0}function it(O){var U=O.ma,ae=U.ba.S,ce=11>ae,ye=ae==Hf||ae==wp||ae==Nh||ae==ld||ae==12||Ve(ae);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Jd(U.Oa,O,ye?11:12))return 0;if(ye&&Ve(ae)&&dr(),O.da)alert("todo:use_scaling");else{if(ce){if(U.Ib=Gt,O.Kb){if(ae=O.U+1>>1,U.memory=i(O.U+2*ae),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+O.U,U.Mc=U.cc,U.Nc=U.dc+ae,U.Ib=De,dr()}}else alert("todo:EmitYUV");ye&&(U.Jb=Ee,ce&&yt())}if(ce&&!ej){for(O=0;256>O;++O)UC[O]=89858*(O-128)+Rs>>jc,Ep[O]=-22014*(O-128)+Rs,Bg[O]=-45773*(O-128),Fs[O]=113618*(O-128)+Rs>>jc;for(O=hu;O<Nv;++O)U=76283*(O-16)+Rs>>jc,_p[O-hu]=Ho(U,255),Ug[O-hu]=Ho(U+8>>4,15);ej=1}return 1}function Tt(O){var U=O.ma,ae=O.U,ce=O.T;return t(!(1&O.ka)),0>=ae||0>=ce?0:(ae=U.Ib(O,U),U.Jb!=null&&U.Jb(O,U,ae),U.Dc+=ae,1)}function lr(O){O.ma.memory=null}function Rt(O,U,ae,ce){return J(O,8)!=47?0:(U[0]=J(O,14)+1,ae[0]=J(O,14)+1,ce[0]=J(O,1),J(O,3)!=0?0:!O.h)}function sr(O,U){if(4>O)return O+1;var ae=O-2>>1;return(2+(1&O)<<ae)+J(U,ae)+1}function pr(O,U){return 120<U?U-120:1<=(ae=((ae=ud[U-1])>>4)*O+(8-(15&ae)))?ae:1;var ae}function Nr(O,U,ae){var ce=z(ae),ye=O[U+=255&ce].g-8;return 0<ye&&(ne(ae,ae.u+8),ce=z(ae),U+=O[U].value,U+=ce&(1<<ye)-1),ne(ae,ae.u+O[U].g),O[U].value}function gt(O,U,ae){return ae.g+=O.g,ae.value+=O.value<<U>>>0,t(8>=ae.g),O.g}function Bt(O,U,ae){var ce=O.xc;return t((U=ce==0?0:O.vc[O.md*(ae>>ce)+(U>>ce)])<O.Wb),O.Ya[U]}function he(O,U,ae,ce){var ye=O.ab,we=O.c*U,Se=O.C;U=Se+U;var Ce=ae,Oe=ce;for(ce=O.Ta,ae=O.Ua;0<ye--;){var qe=O.gc[ye],st=Se,Et=U,St=Ce,vt=Oe,tr=(Oe=ce,Ce=ae,qe.Ea);switch(t(st<Et),t(Et<=qe.nc),qe.hc){case 2:pv(St,vt,(Et-st)*tr,Oe,Ce);break;case 0:var Lt=st,ot=Et,ht=Oe,Yt=Ce,rr=(yr=qe).Ea;Lt==0&&(Fg(St,vt,null,null,1,ht,Yt),It(St,vt+1,0,0,rr-1,ht,Yt+1),vt+=rr,Yt+=rr,++Lt);for(var Qt=1<<yr.b,kr=Qt-1,br=Ne(rr,yr.b),qr=yr.K,yr=yr.w+(Lt>>yr.b)*br;Lt<ot;){var Ra=qr,Ya=yr,ya=1;for(jp(St,vt,ht,Yt-rr,1,ht,Yt);ya<rr;){var xa=(ya&~kr)+Qt;xa>rr&&(xa=rr),(0,sd[Ra[Ya++]>>8&15])(St,vt+ +ya,ht,Yt+ya-rr,xa-ya,ht,Yt+ya),ya=xa}vt+=rr,Yt+=rr,++Lt&kr||(yr+=br)}Et!=qe.nc&&a(Oe,Ce-tr,Oe,Ce+(Et-st-1)*tr,tr);break;case 1:for(tr=St,ot=vt,rr=(St=qe.Ea)-(Yt=St&~(ht=(vt=1<<qe.b)-1)),Lt=Ne(St,qe.b),Qt=qe.K,qe=qe.w+(st>>qe.b)*Lt;st<Et;){for(kr=Qt,br=qe,qr=new tt,yr=ot+Yt,Ra=ot+St;ot<yr;)xe(kr[br++],qr),tu(qr,tr,ot,vt,Oe,Ce),ot+=vt,Ce+=vt;ot<Ra&&(xe(kr[br++],qr),tu(qr,tr,ot,rr,Oe,Ce),ot+=rr,Ce+=rr),++st&ht||(qe+=Lt)}break;case 3:if(St==Oe&&vt==Ce&&0<qe.b){for(ot=Oe,St=tr=Ce+(Et-st)*tr-(Yt=(Et-st)*Ne(qe.Ea,qe.b)),vt=Oe,ht=Ce,Lt=[],Yt=(rr=Yt)-1;0<=Yt;--Yt)Lt[Yt]=vt[ht+Yt];for(Yt=rr-1;0<=Yt;--Yt)ot[St+Yt]=Lt[Yt];nl(qe,st,Et,Oe,tr,Oe,Ce)}else nl(qe,st,Et,St,vt,Oe,Ce)}Ce=ce,Oe=ae}Oe!=ae&&a(ce,ae,Ce,Oe,we)}function Le(O,U){var ae=O.V,ce=O.Ba+O.c*O.C,ye=U-O.C;if(t(U<=O.l.o),t(16>=ye),0<ye){var we=O.l,Se=O.Ta,Ce=O.Ua,Oe=we.width;if(he(O,ye,ae,ce),ye=Ce=[Ce],t((ae=O.C)<(ce=U)),t(we.v<we.va),ce>we.o&&(ce=we.o),ae<we.j){var qe=we.j-ae;ae=we.j,ye[0]+=qe*Oe}if(ae>=ce?ae=0:(ye[0]+=4*we.v,we.ka=ae-we.j,we.U=we.va-we.v,we.T=ce-ae,ae=1),ae){if(Ce=Ce[0],11>(ae=O.ca).S){var st=ae.f.RGBA,Et=(ce=ae.S,ye=we.U,we=we.T,qe=st.eb,st.A),St=we;for(st=st.fb+O.Ma*st.A;0<St--;){var vt=Se,tr=Ce,Lt=ye,ot=qe,ht=st;switch(ce){case Ai:Wi(vt,tr,Lt,ot,ht);break;case Hf:hi(vt,tr,Lt,ot,ht);break;case Sp:hi(vt,tr,Lt,ot,ht),Wo(ot,ht,0,Lt,1,0);break;case vc:Pl(vt,tr,Lt,ot,ht);break;case wp:ze(vt,tr,Lt,ot,ht,1);break;case cu:ze(vt,tr,Lt,ot,ht,1),Wo(ot,ht,0,Lt,1,0);break;case Nh:ze(vt,tr,Lt,ot,ht,0);break;case cd:ze(vt,tr,Lt,ot,ht,0),Wo(ot,ht,1,Lt,1,0);break;case ld:ru(vt,tr,Lt,ot,ht);break;case Wf:ru(vt,tr,Lt,ot,ht),ja(ot,ht,Lt,1,0);break;case vv:ho(vt,tr,Lt,ot,ht);break;default:t(0)}Ce+=Oe,st+=Et}O.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");t(O.Ma<=ae.height)}}O.C=U,t(O.C<=O.i)}function Ae(O){var U;if(0<O.ua)return 0;for(U=0;U<O.Wb;++U){var ae=O.Ya[U].G,ce=O.Ya[U].H;if(0<ae[1][ce[1]+0].g||0<ae[2][ce[2]+0].g||0<ae[3][ce[3]+0].g)return 0}return 1}function _e(O,U,ae,ce,ye,we){if(O.Z!=0){var Se=O.qd,Ce=O.rd;for(t(bc[O.Z]!=null);U<ae;++U)bc[O.Z](Se,Ce,ce,ye,ce,ye,we),Se=ce,Ce=ye,ye+=we;O.qd=Se,O.rd=Ce}}function Ue(O,U){var ae=O.l.ma,ce=ae.Z==0||ae.Z==1?O.l.j:O.C;if(ce=O.C<ce?ce:O.C,t(U<=O.l.o),U>ce){var ye=O.l.width,we=ae.ca,Se=ae.tb+ye*ce,Ce=O.V,Oe=O.Ba+O.c*ce,qe=O.gc;t(O.ab==1),t(qe[0].hc==3),eu(qe[0],ce,U,Ce,Oe,we,Se),_e(ae,ce,U,we,Se,ye)}O.C=O.Ma=U}function He(O,U,ae,ce,ye,we,Se){var Ce=O.$/ce,Oe=O.$%ce,qe=O.m,st=O.s,Et=ae+O.$,St=Et;ye=ae+ce*ye;var vt=ae+ce*we,tr=280+st.ua,Lt=O.Pb?Ce:16777216,ot=0<st.ua?st.Wa:null,ht=st.wc,Yt=Et<vt?Bt(st,Oe,Ce):null;t(O.C<we),t(vt<=ye);var rr=!1;e:for(;;){for(;rr||Et<vt;){var Qt=0;if(Ce>=Lt){var kr=Et-ae;t((Lt=O).Pb),Lt.wd=Lt.m,Lt.xd=kr,0<Lt.s.ua&&ue(Lt.s.Wa,Lt.s.vb),Lt=Ce+Q1}if(Oe&ht||(Yt=Bt(st,Oe,Ce)),t(Yt!=null),Yt.Qb&&(U[Et]=Yt.qb,rr=!0),!rr)if(W(qe),Yt.jc){Qt=qe,kr=U;var br=Et,qr=Yt.pd[z(Qt)&Os-1];t(Yt.jc),256>qr.g?(ne(Qt,Qt.u+qr.g),kr[br]=qr.value,Qt=0):(ne(Qt,Qt.u+qr.g-256),t(256<=qr.value),Qt=qr.value),Qt==0&&(rr=!0)}else Qt=Nr(Yt.G[0],Yt.H[0],qe);if(qe.h)break;if(rr||256>Qt){if(!rr)if(Yt.nd)U[Et]=(Yt.qb|Qt<<8)>>>0;else{if(W(qe),rr=Nr(Yt.G[1],Yt.H[1],qe),W(qe),kr=Nr(Yt.G[2],Yt.H[2],qe),br=Nr(Yt.G[3],Yt.H[3],qe),qe.h)break;U[Et]=(br<<24|rr<<16|Qt<<8|kr)>>>0}if(rr=!1,++Et,++Oe>=ce&&(Oe=0,++Ce,Se!=null&&Ce<=we&&!(Ce%16)&&Se(O,Ce),ot!=null))for(;St<Et;)Qt=U[St++],ot.X[(506832829*Qt&4294967295)>>>ot.Mb]=Qt}else if(280>Qt){if(Qt=sr(Qt-256,qe),kr=Nr(Yt.G[4],Yt.H[4],qe),W(qe),kr=pr(ce,kr=sr(kr,qe)),qe.h)break;if(Et-ae<kr||ye-Et<Qt)break e;for(br=0;br<Qt;++br)U[Et+br]=U[Et+br-kr];for(Et+=Qt,Oe+=Qt;Oe>=ce;)Oe-=ce,++Ce,Se!=null&&Ce<=we&&!(Ce%16)&&Se(O,Ce);if(t(Et<=ye),Oe&ht&&(Yt=Bt(st,Oe,Ce)),ot!=null)for(;St<Et;)Qt=U[St++],ot.X[(506832829*Qt&4294967295)>>>ot.Mb]=Qt}else{if(!(Qt<tr))break e;for(rr=Qt-280,t(ot!=null);St<Et;)Qt=U[St++],ot.X[(506832829*Qt&4294967295)>>>ot.Mb]=Qt;Qt=Et,t(!(rr>>>(kr=ot).Xa)),U[Qt]=kr.X[rr],rr=!0}rr||t(qe.h==ee(qe))}if(O.Pb&&qe.h&&Et<ye)t(O.m.h),O.a=5,O.m=O.wd,O.$=O.xd,0<O.s.ua&&ue(O.s.vb,O.s.Wa);else{if(qe.h)break e;Se?.(O,Ce>we?we:Ce),O.a=0,O.$=Et-ae}return 1}return O.a=3,0}function xt(O){t(O!=null),O.vc=null,O.yc=null,O.Ya=null;var U=O.Wa;U!=null&&(U.X=null),O.vb=null,t(O!=null)}function jt(){var O=new Rg;return O==null?null:(O.a=0,O.xb=Gf,Fe("Predictor","VP8LPredictors"),Fe("Predictor","VP8LPredictors_C"),Fe("PredictorAdd","VP8LPredictorsAdd"),Fe("PredictorAdd","VP8LPredictorsAdd_C"),pv=zt,tu=fe,Wi=pe,hi=Te,ru=Xe,ho=kt,Pl=Je,T.VP8LMapColor32b=Zs,T.VP8LMapColor8b=Np,O)}function ct(O,U,ae,ce,ye){var we=1,Se=[O],Ce=[U],Oe=ce.m,qe=ce.s,st=null,Et=0;e:for(;;){if(ae)for(;we&&J(Oe,1);){var St=Se,vt=Ce,tr=ce,Lt=1,ot=tr.m,ht=tr.gc[tr.ab],Yt=J(ot,2);if(tr.Oc&1<<Yt)we=0;else{switch(tr.Oc|=1<<Yt,ht.hc=Yt,ht.Ea=St[0],ht.nc=vt[0],ht.K=[null],++tr.ab,t(4>=tr.ab),Yt){case 0:case 1:ht.b=J(ot,3)+2,Lt=ct(Ne(ht.Ea,ht.b),Ne(ht.nc,ht.b),0,tr,ht.K),ht.K=ht.K[0];break;case 3:var rr,Qt=J(ot,8)+1,kr=16<Qt?0:4<Qt?1:2<Qt?2:3;if(St[0]=Ne(ht.Ea,kr),ht.b=kr,rr=Lt=ct(Qt,1,0,tr,ht.K)){var br,qr=Qt,yr=ht,Ra=1<<(8>>yr.b),Ya=i(Ra);if(Ya==null)rr=0;else{var ya=yr.K[0],xa=yr.w;for(Ya[0]=yr.K[0][0],br=1;br<1*qr;++br)Ya[br]=Me(ya[xa+br],Ya[br-1]);for(;br<4*Ra;++br)Ya[br]=0;yr.K[0]=null,yr.K[0]=Ya,rr=1}}Lt=rr;break;case 2:break;default:t(0)}we=Lt}}if(Se=Se[0],Ce=Ce[0],we&&J(Oe,1)&&!(we=1<=(Et=J(Oe,4))&&11>=Et)){ce.a=3;break e}var dn;if(dn=we)t:{var Ka,la,mn,Gr=ce,ea=Se,Oa=Ce,Fa=Et,ri=ae,Ls=Gr.m,cs=Gr.s,ds=[null],js=1,ll=0,Xa=Sh[Fa];r:for(;;){if(ri&&J(Ls,1)){var Ns=J(Ls,3)+2,Rl=Ne(ea,Ns),fu=Ne(Oa,Ns),Eh=Rl*fu;if(!ct(Rl,fu,0,Gr,ds))break r;for(ds=ds[0],cs.xc=Ns,Ka=0;Ka<Eh;++Ka){var mu=ds[Ka]>>8&65535;ds[Ka]=mu,mu>=js&&(js=mu+1)}}if(Ls.h)break r;for(la=0;5>la;++la){var On=Go[la];!la&&0<Fa&&(On+=1<<Fa),ll<On&&(ll=On)}var Dp=o(js*Xa,P),wv=js,Yi=o(wv,V);if(Yi==null)var Vn=null;else t(65536>=wv),Vn=Yi;var _h=i(ll);if(Vn==null||_h==null||Dp==null){Gr.a=1;break r}var pu=Dp;for(Ka=mn=0;Ka<js;++Ka){var mo=Vn[Ka],xu=mo.G,po=mo.H,Ap=0,Kf=1,Sv=0;for(la=0;5>la;++la){On=Go[la],xu[la]=pu,po[la]=mn,!la&&0<Fa&&(On+=1<<Fa);n:{var Tp,Cv=On,Ip=Gr,Xf=_h,aj=pu,nj=mn,Pp=0,pd=Ip.m,VC=J(pd,1);if(s(Xf,0,0,Cv),VC){var sj=J(pd,1)+1,ij=J(pd,1),$g=J(pd,ij==0?1:8);Xf[$g]=1,sj==2&&(Xf[$g=J(pd,8)]=1);var Qf=1}else{var Vg=i(19),qg=J(pd,4)+4;if(19<qg){Ip.a=3;var Op=0;break n}for(Tp=0;Tp<qg;++Tp)Vg[dd[Tp]]=J(pd,3);var kv=void 0,Jf=void 0,oj=Ip,lj=Vg,xd=Cv,Mp=Xf,Ev=0,Fl=oj.m,Zf=8,zg=o(128,P);a:for(;A(zg,0,7,lj,19);){if(J(Fl,1)){var cj=2+2*J(Fl,3);if((kv=2+J(Fl,cj))>xd)break a}else kv=xd;for(Jf=0;Jf<xd&&kv--;){W(Fl);var Hg=zg[0+(127&z(Fl))];ne(Fl,Fl.u+Hg.g);var Dh=Hg.value;if(16>Dh)Mp[Jf++]=Dh,Dh!=0&&(Zf=Dh);else{var dj=Dh==16,Wg=Dh-16,Gg=ol[Wg],Yg=J(Fl,gv[Wg])+Gg;if(Jf+Yg>xd)break a;for(var uj=dj?Zf:0;0<Yg--;)Mp[Jf++]=uj}}Ev=1;break a}Ev||(oj.a=3),Qf=Ev}(Qf=Qf&&!pd.h)&&(Pp=A(aj,nj,8,Xf,Cv)),Qf&&Pp!=0?Op=Pp:(Ip.a=3,Op=0)}if(Op==0)break r;if(Kf&&wh[la]==1&&(Kf=pu[mn].g==0),Ap+=pu[mn].g,mn+=Op,3>=la){var Ah,_v=_h[0];for(Ah=1;Ah<On;++Ah)_h[Ah]>_v&&(_v=_h[Ah]);Sv+=_v}}if(mo.nd=Kf,mo.Qb=0,Kf&&(mo.qb=(xu[3][po[3]+0].value<<24|xu[1][po[1]+0].value<<16|xu[2][po[2]+0].value)>>>0,Ap==0&&256>xu[0][po[0]+0].value&&(mo.Qb=1,mo.qb+=xu[0][po[0]+0].value<<8)),mo.jc=!mo.Qb&&6>Sv,mo.jc){var Rp,vd=mo;for(Rp=0;Rp<Os;++Rp){var Nc=Rp,gd=vd.pd[Nc],Fp=vd.G[0][vd.H[0]+Nc];256<=Fp.value?(gd.g=Fp.g+256,gd.value=Fp.value):(gd.g=0,gd.value=0,Nc>>=gt(Fp,8,gd),Nc>>=gt(vd.G[1][vd.H[1]+Nc],16,gd),Nc>>=gt(vd.G[2][vd.H[2]+Nc],0,gd),gt(vd.G[3][vd.H[3]+Nc],24,gd))}}}cs.vc=ds,cs.Wb=js,cs.Ya=Vn,cs.yc=Dp,dn=1;break t}dn=0}if(!(we=dn)){ce.a=3;break e}if(0<Et){if(qe.ua=1<<Et,!be(qe.Wa,Et)){ce.a=1,we=0;break e}}else qe.ua=0;var Lp=ce,Kg=Se,hj=Ce,Xg=Lp.s,Qg=Xg.xc;if(Lp.c=Kg,Lp.i=hj,Xg.md=Ne(Kg,Qg),Xg.wc=Qg==0?-1:(1<<Qg)-1,ae){ce.xb=Z1;break e}if((st=i(Se*Ce))==null){ce.a=1,we=0;break e}we=(we=He(ce,st,0,Se,Ce,Ce,null))&&!Oe.h;break e}return we?(ye!=null?ye[0]=st:(t(st==null),t(ae)),ce.$=0,ae||xt(qe)):xt(qe),we}function Nt(O,U){var ae=O.c*O.i,ce=ae+U+16*U;return t(O.c<=U),O.V=i(ce),O.V==null?(O.Ta=null,O.Ua=0,O.a=1,0):(O.Ta=O.V,O.Ua=O.Ba+ae+U,1)}function wt(O,U){var ae=O.C,ce=U-ae,ye=O.V,we=O.Ba+O.c*ae;for(t(U<=O.l.o);0<ce;){var Se=16<ce?16:ce,Ce=O.l.ma,Oe=O.l.width,qe=Oe*Se,st=Ce.ca,Et=Ce.tb+Oe*ae,St=O.Ta,vt=O.Ua;he(O,Se,ye,we),Sn(St,vt,st,Et,qe),_e(Ce,ae,ae+Se,st,Et,Oe),ce-=Se,ye+=Se*O.c,ae+=Se}t(ae==U),O.C=O.Ma=U}function er(){this.ub=this.yd=this.td=this.Rb=0}function cr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ur(){this.Yb=function(){var O=[];return function U(ae,ce,ye){for(var we=ye[ce],Se=0;Se<we&&(ae.push(ye.length>ce+1?[]:0),!(ye.length<ce+1));Se++)U(ae[Se],ce+1,ye)}(O,0,[3,11]),O}()}function Ke(){this.jb=i(3),this.Wc=l([4,8],ur),this.Xc=l([4,17],ur)}function mr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function fr(){this.ld=this.La=this.dd=this.tc=0}function Lr(){this.Na=this.la=0}function fa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pa(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wn(){this.uc=this.M=this.Nb=0,this.wa=Array(new fr),this.Y=0,this.ya=Array(new Pa),this.aa=0,this.l=new Is}function Bn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function cn(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new er,this.Kc=new cr,this.ed=new mr,this.Qa=new xr,this.Ic=this.$c=this.Aa=0,this.D=new wn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ie),this.ia=0,this.pb=o(4,fa),this.Pa=new Ke,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bn),this.Hd=0,this.rb=Array(new Lr),this.sb=0,this.wa=Array(new fr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pa),this.L=this.aa=0,this.gd=l([4,2],fr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tn(){var O=new cn;return O!=null&&(O.a=0,O.sc="OK",O.cb=0,O.Xb=0,Ms||(Ms=ki)),O}function Ga(O,U,ae){return O.a==0&&(O.a=U,O.sc=ae,O.cb=0),0}function In(O,U,ae){return 3<=ae&&O[U+0]==157&&O[U+1]==1&&O[U+2]==42}function Ci(O,U){if(O==null)return 0;if(O.a=0,O.sc="OK",U==null)return Ga(O,2,"null VP8Io passed to VP8GetHeaders()");var ae=U.data,ce=U.w,ye=U.ha;if(4>ye)return Ga(O,7,"Truncated header.");var we=ae[ce+0]|ae[ce+1]<<8|ae[ce+2]<<16,Se=O.Od;if(Se.Rb=!(1&we),Se.td=we>>1&7,Se.yd=we>>4&1,Se.ub=we>>5,3<Se.td)return Ga(O,3,"Incorrect keyframe parameters.");if(!Se.yd)return Ga(O,4,"Frame not displayable.");ce+=3,ye-=3;var Ce=O.Kc;if(Se.Rb){if(7>ye)return Ga(O,7,"cannot parse picture header");if(!In(ae,ce,ye))return Ga(O,3,"Bad code word");Ce.c=16383&(ae[ce+4]<<8|ae[ce+3]),Ce.Td=ae[ce+4]>>6,Ce.i=16383&(ae[ce+6]<<8|ae[ce+5]),Ce.Ud=ae[ce+6]>>6,ce+=7,ye-=7,O.za=Ce.c+15>>4,O.Ub=Ce.i+15>>4,U.width=Ce.c,U.height=Ce.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,s((we=O.Pa).jb,0,255,we.jb.length),t((we=O.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,s(we.Zb,0,0,we.Zb.length),s(we.Lb,0,0,we.Lb)}if(Se.ub>ye)return Ga(O,7,"bad partition length");Y(we=O.m,ae,ce,Se.ub),ce+=Se.ub,ye-=Se.ub,Se.Rb&&(Ce.Ld=le(we),Ce.Kd=le(we)),Ce=O.Qa;var Oe,qe=O.Pa;if(t(we!=null),t(Ce!=null),Ce.Cb=le(we),Ce.Cb){if(Ce.Bb=le(we),le(we)){for(Ce.Fb=le(we),Oe=0;4>Oe;++Oe)Ce.Zb[Oe]=le(we)?Q(we,7):0;for(Oe=0;4>Oe;++Oe)Ce.Lb[Oe]=le(we)?Q(we,6):0}if(Ce.Bb)for(Oe=0;3>Oe;++Oe)qe.jb[Oe]=le(we)?B(we,8):255}else Ce.Bb=0;if(we.Ka)return Ga(O,3,"cannot parse segment header");if((Ce=O.ed).zd=le(we),Ce.Tb=B(we,6),Ce.wb=B(we,3),Ce.Pc=le(we),Ce.Pc&&le(we)){for(qe=0;4>qe;++qe)le(we)&&(Ce.vd[qe]=Q(we,6));for(qe=0;4>qe;++qe)le(we)&&(Ce.od[qe]=Q(we,6))}if(O.L=Ce.Tb==0?0:Ce.zd?1:2,we.Ka)return Ga(O,3,"cannot parse filter header");var st=ye;if(ye=Oe=ce,ce=Oe+st,Ce=st,O.Xb=(1<<B(O.m,2))-1,st<3*(qe=O.Xb))ae=7;else{for(Oe+=3*qe,Ce-=3*qe,st=0;st<qe;++st){var Et=ae[ye+0]|ae[ye+1]<<8|ae[ye+2]<<16;Et>Ce&&(Et=Ce),Y(O.Jc[+st],ae,Oe,Et),Oe+=Et,Ce-=Et,ye+=3}Y(O.Jc[+qe],ae,Oe,Ce),ae=Oe<ce?0:5}if(ae!=0)return Ga(O,ae,"cannot parse partitions");for(ae=B(Oe=O.m,7),ye=le(Oe)?Q(Oe,4):0,ce=le(Oe)?Q(Oe,4):0,Ce=le(Oe)?Q(Oe,4):0,qe=le(Oe)?Q(Oe,4):0,Oe=le(Oe)?Q(Oe,4):0,st=O.Qa,Et=0;4>Et;++Et){if(st.Cb){var St=st.Zb[Et];st.Fb||(St+=ae)}else{if(0<Et){O.pb[Et]=O.pb[0];continue}St=ae}var vt=O.pb[Et];vt.Sc[0]=Cp[Ho(St+ye,127)],vt.Sc[1]=kp[Ho(St+0,127)],vt.Eb[0]=2*Cp[Ho(St+ce,127)],vt.Eb[1]=101581*kp[Ho(St+Ce,127)]>>16,8>vt.Eb[1]&&(vt.Eb[1]=8),vt.Qc[0]=Cp[Ho(St+qe,117)],vt.Qc[1]=kp[Ho(St+Oe,127)],vt.lc=St+Oe}if(!Se.Rb)return Ga(O,4,"Not a key frame.");for(le(we),Se=O.Pa,ae=0;4>ae;++ae){for(ye=0;8>ye;++ye)for(ce=0;3>ce;++ce)for(Ce=0;11>Ce;++Ce)qe=te(we,Ch[ae][ye][ce][Ce])?B(we,8):gc[ae][ye][ce][Ce],Se.Wc[ae][ye].Yb[ce][Ce]=qe;for(ye=0;17>ye;++ye)Se.Xc[ae][ye]=Se.Wc[ae][J1[ye]]}return O.kc=le(we),O.kc&&(O.Bd=B(we,8)),O.cb=1}function ki(O,U,ae,ce,ye,we,Se){var Ce=U[ye].Yb[ae];for(ae=0;16>ye;++ye){if(!te(O,Ce[ae+0]))return ye;for(;!te(O,Ce[ae+1]);)if(Ce=U[++ye].Yb[0],ae=0,ye==16)return 16;var Oe=U[ye+1].Yb;if(te(O,Ce[ae+2])){var qe=O,st=0;if(te(qe,(St=Ce)[(Et=ae)+3]))if(te(qe,St[Et+6])){for(Ce=0,Et=2*(st=te(qe,St[Et+8]))+(St=te(qe,St[Et+9+st])),st=0,St=Zn[Et];St[Ce];++Ce)st+=st+te(qe,St[Ce]);st+=3+(8<<Et)}else te(qe,St[Et+7])?(st=7+2*te(qe,165),st+=te(qe,145)):st=5+te(qe,159);else st=te(qe,St[Et+4])?3+te(qe,St[Et+5]):2;Ce=Oe[2]}else st=1,Ce=Oe[1];Oe=Se+Va[ye],0>(qe=O).b&&re(qe);var Et,St=qe.b,vt=(Et=qe.Ca>>1)-(qe.I>>St)>>31;--qe.b,qe.Ca+=vt,qe.Ca|=1,qe.I-=(Et+1&vt)<<St,we[Oe]=((st^vt)-vt)*ce[(0<ye)+0]}return 16}function Xn(O){var U=O.rb[O.sb-1];U.la=0,U.Na=0,s(O.zc,0,0,O.zc.length),O.ja=0}function kl(O,U){if(O==null)return 0;if(U==null)return Ga(O,2,"NULL VP8Io parameter in VP8Decode().");if(!O.cb&&!Ci(O,U))return 0;if(t(O.cb),U.ac==null||U.ac(U)){U.ob&&(O.L=0);var ae=md[O.L];if(O.L==2?(O.yb=0,O.zb=0):(O.yb=U.v-ae>>4,O.zb=U.j-ae>>4,0>O.yb&&(O.yb=0),0>O.zb&&(O.zb=0)),O.Va=U.o+15+ae>>4,O.Hb=U.va+15+ae>>4,O.Hb>O.za&&(O.Hb=O.za),O.Va>O.Ub&&(O.Va=O.Ub),0<O.L){var ce=O.ed;for(ae=0;4>ae;++ae){var ye;if(O.Qa.Cb){var we=O.Qa.Lb[ae];O.Qa.Fb||(we+=ce.Tb)}else we=ce.Tb;for(ye=0;1>=ye;++ye){var Se=O.gd[ae][ye],Ce=we;if(ce.Pc&&(Ce+=ce.vd[0],ye&&(Ce+=ce.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var Oe=Ce;0<ce.wb&&(Oe=4<ce.wb?Oe>>2:Oe>>1)>9-ce.wb&&(Oe=9-ce.wb),1>Oe&&(Oe=1),Se.dd=Oe,Se.tc=2*Ce+Oe,Se.ld=40<=Ce?2:15<=Ce?1:0}else Se.tc=0;Se.La=ye}}}ae=0}else Ga(O,6,"Frame setup failed"),ae=O.a;if(ae=ae==0){if(ae){O.$c=0,0<O.Aa||(O.Ic=tj);e:{ae=O.Ic,ce=4*(Oe=O.za);var qe=32*Oe,st=Oe+1,Et=0<O.L?Oe*(0<O.Aa?2:1):0,St=(O.Aa==2?2:1)*Oe;if((Se=ce+832+(ye=3*(16*ae+md[O.L])/2*qe)+(we=O.Fa!=null&&0<O.Fa.length?O.Kc.c*O.Kc.i:0))!=Se)ae=0;else{if(Se>O.Vb){if(O.Vb=0,O.Ec=i(Se),O.Fc=0,O.Ec==null){ae=Ga(O,1,"no memory during frame initialization.");break e}O.Vb=Se}Se=O.Ec,Ce=O.Fc,O.Ac=Se,O.Bc=Ce,Ce+=ce,O.Gd=o(qe,Bn),O.Hd=0,O.rb=o(st+1,Lr),O.sb=1,O.wa=Et?o(Et,fr):null,O.Y=0,O.D.Nb=0,O.D.wa=O.wa,O.D.Y=O.Y,0<O.Aa&&(O.D.Y+=Oe),t(!0),O.oc=Se,O.pc=Ce,Ce+=832,O.ya=o(St,Pa),O.aa=0,O.D.ya=O.ya,O.D.aa=O.aa,O.Aa==2&&(O.D.aa+=Oe),O.R=16*Oe,O.B=8*Oe,Oe=(qe=md[O.L])*O.R,qe=qe/2*O.B,O.sa=Se,O.ta=Ce+Oe,O.qa=O.sa,O.ra=O.ta+16*ae*O.R+qe,O.Ha=O.qa,O.Ia=O.ra+8*ae*O.B+qe,O.$c=0,Ce+=ye,O.mb=we?Se:null,O.nb=we?Ce:null,t(Ce+we<=O.Fc+O.Vb),Xn(O),s(O.Ac,O.Bc,0,ce),ae=1}}if(ae){if(U.ka=0,U.y=O.sa,U.O=O.ta,U.f=O.qa,U.N=O.ra,U.ea=O.Ha,U.Vd=O.Ia,U.fa=O.R,U.Rc=O.B,U.F=null,U.J=0,!od){for(ae=-255;255>=ae;++ae)ls[255+ae]=0>ae?-ae:ae;for(ae=-1020;1020>=ae;++ae)sl[1020+ae]=-128>ae?-128:127<ae?127:ae;for(ae=-112;112>=ae;++ae)ou[112+ae]=-16>ae?-16:15<ae?15:ae;for(ae=-255;510>=ae;++ae)lu[255+ae]=0>ae?0:255<ae?255:ae;od=1}pc=jr,Ol=El,Ml=ut,ys=nr,fo=Ot,Qn=td,gh=hh,xc=fh,qf=Mg,au=xp,nu=Og,su=Of,bh=Mf,zf=mv,iu=Kd,id=zo,yh=mc,Jn=Pg,Gi[0]=Ma,Gi[1]=zd,Gi[2]=Cr,Gi[3]=Ps,Gi[4]=$a,Gi[5]=uc,Gi[6]=_i,Gi[7]=al,Gi[8]=Tf,Gi[9]=pp,hd[0]=Wd,hd[1]=ui,hd[2]=_l,hd[3]=Hd,hd[4]=bs,hd[5]=Ze,hd[6]=Jt,Yo[0]=rd,Yo[1]=Ei,Yo[2]=hv,Yo[3]=Gd,Yo[4]=qo,Yo[5]=Di,Yo[6]=Yd,ae=1}else ae=0}ae&&(ae=function(vt,tr){for(vt.M=0;vt.M<vt.Va;++vt.M){var Lt,ot=vt.Jc[vt.M&vt.Xb],ht=vt.m,Yt=vt;for(Lt=0;Lt<Yt.za;++Lt){var rr=ht,Qt=Yt,kr=Qt.Ac,br=Qt.Bc+4*Lt,qr=Qt.zc,yr=Qt.ya[Qt.aa+Lt];if(Qt.Qa.Bb?yr.$b=te(rr,Qt.Pa.jb[0])?2+te(rr,Qt.Pa.jb[2]):te(rr,Qt.Pa.jb[1]):yr.$b=0,Qt.kc&&(yr.Ad=te(rr,Qt.Bd)),yr.Za=!te(rr,145)+0,yr.Za){var Ra=yr.Ob,Ya=0;for(Qt=0;4>Qt;++Qt){var ya,xa=qr[0+Qt];for(ya=0;4>ya;++ya){xa=Lg[kr[br+ya]][xa];for(var dn=du[te(rr,xa[0])];0<dn;)dn=du[2*dn+te(rr,xa[dn])];xa=-dn,kr[br+ya]=xa}a(Ra,Ya,kr,br,4),Ya+=4,qr[0+Qt]=xa}}else xa=te(rr,156)?te(rr,128)?1:3:te(rr,163)?2:0,yr.Ob[0]=xa,s(kr,br,xa,4),s(qr,0,xa,4);yr.Dd=te(rr,142)?te(rr,114)?te(rr,183)?1:3:2:0}if(Yt.m.Ka)return Ga(vt,7,"Premature end-of-partition0 encountered.");for(;vt.ja<vt.za;++vt.ja){if(Yt=ot,rr=(ht=vt).rb[ht.sb-1],kr=ht.rb[ht.sb+ht.ja],Lt=ht.ya[ht.aa+ht.ja],br=ht.kc?Lt.Ad:0)rr.la=kr.la=0,Lt.Za||(rr.Na=kr.Na=0),Lt.Hc=0,Lt.Gc=0,Lt.ia=0;else{var Ka,la;if(rr=kr,kr=Yt,br=ht.Pa.Xc,qr=ht.ya[ht.aa+ht.ja],yr=ht.pb[qr.$b],Qt=qr.ad,Ra=0,Ya=ht.rb[ht.sb-1],xa=ya=0,s(Qt,Ra,0,384),qr.Za)var mn=0,Gr=br[3];else{dn=i(16);var ea=rr.Na+Ya.Na;if(ea=Ms(kr,br[1],ea,yr.Eb,0,dn,0),rr.Na=Ya.Na=(0<ea)+0,1<ea)pc(dn,0,Qt,Ra);else{var Oa=dn[0]+3>>3;for(dn=0;256>dn;dn+=16)Qt[Ra+dn]=Oa}mn=1,Gr=br[0]}var Fa=15&rr.la,ri=15&Ya.la;for(dn=0;4>dn;++dn){var Ls=1&ri;for(Oa=la=0;4>Oa;++Oa)Fa=Fa>>1|(Ls=(ea=Ms(kr,Gr,ea=Ls+(1&Fa),yr.Sc,mn,Qt,Ra))>mn)<<7,la=la<<2|(3<ea?3:1<ea?2:Qt[Ra+0]!=0),Ra+=16;Fa>>=4,ri=ri>>1|Ls<<7,ya=(ya<<8|la)>>>0}for(Gr=Fa,mn=ri>>4,Ka=0;4>Ka;Ka+=2){for(la=0,Fa=rr.la>>4+Ka,ri=Ya.la>>4+Ka,dn=0;2>dn;++dn){for(Ls=1&ri,Oa=0;2>Oa;++Oa)ea=Ls+(1&Fa),Fa=Fa>>1|(Ls=0<(ea=Ms(kr,br[2],ea,yr.Qc,0,Qt,Ra)))<<3,la=la<<2|(3<ea?3:1<ea?2:Qt[Ra+0]!=0),Ra+=16;Fa>>=2,ri=ri>>1|Ls<<5}xa|=la<<4*Ka,Gr|=Fa<<4<<Ka,mn|=(240&ri)<<Ka}rr.la=Gr,Ya.la=mn,qr.Hc=ya,qr.Gc=xa,qr.ia=43690&xa?0:yr.ia,br=!(ya|xa)}if(0<ht.L&&(ht.wa[ht.Y+ht.ja]=ht.gd[Lt.$b][Lt.Za],ht.wa[ht.Y+ht.ja].La|=!br),Yt.Ka)return Ga(vt,7,"Premature end-of-file encountered.")}if(Xn(vt),ht=tr,Yt=1,Lt=(ot=vt).D,rr=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)e:{if(Lt.M=ot.M,Lt.uc=rr,nd(ot,Lt),Yt=1,Lt=(la=ot.D).Nb,rr=(xa=md[ot.L])*ot.R,kr=xa/2*ot.B,dn=16*Lt*ot.R,Oa=8*Lt*ot.B,br=ot.sa,qr=ot.ta-rr+dn,yr=ot.qa,Qt=ot.ra-kr+Oa,Ra=ot.Ha,Ya=ot.Ia-kr+Oa,ri=(Fa=la.M)==0,ya=Fa>=ot.Va-1,ot.Aa==2&&nd(ot,la),la.uc)for(Ls=(ea=ot).D.M,t(ea.D.uc),la=ea.yb;la<ea.Hb;++la){mn=la,Gr=Ls;var cs=(ds=(On=ea).D).Nb;Ka=On.R;var ds=ds.wa[ds.Y+mn],js=On.sa,ll=On.ta+16*cs*Ka+16*mn,Xa=ds.dd,Ns=ds.tc;if(Ns!=0)if(t(3<=Ns),On.L==1)0<mn&&id(js,ll,Ka,Ns+4),ds.La&&Jn(js,ll,Ka,Ns),0<Gr&&iu(js,ll,Ka,Ns+4),ds.La&&yh(js,ll,Ka,Ns);else{var Rl=On.B,fu=On.qa,Eh=On.ra+8*cs*Rl+8*mn,mu=On.Ha,On=On.Ia+8*cs*Rl+8*mn;cs=ds.ld,0<mn&&(xc(js,ll,Ka,Ns+4,Xa,cs),au(fu,Eh,mu,On,Rl,Ns+4,Xa,cs)),ds.La&&(su(js,ll,Ka,Ns,Xa,cs),zf(fu,Eh,mu,On,Rl,Ns,Xa,cs)),0<Gr&&(gh(js,ll,Ka,Ns+4,Xa,cs),qf(fu,Eh,mu,On,Rl,Ns+4,Xa,cs)),ds.La&&(nu(js,ll,Ka,Ns,Xa,cs),bh(fu,Eh,mu,On,Rl,Ns,Xa,cs))}}if(ot.ia&&alert("todo:DitherRow"),ht.put!=null){if(la=16*Fa,Fa=16*(Fa+1),ri?(ht.y=ot.sa,ht.O=ot.ta+dn,ht.f=ot.qa,ht.N=ot.ra+Oa,ht.ea=ot.Ha,ht.W=ot.Ia+Oa):(la-=xa,ht.y=br,ht.O=qr,ht.f=yr,ht.N=Qt,ht.ea=Ra,ht.W=Ya),ya||(Fa-=xa),Fa>ht.o&&(Fa=ht.o),ht.F=null,ht.J=null,ot.Fa!=null&&0<ot.Fa.length&&la<Fa&&(ht.J=bp(ot,ht,la,Fa-la),ht.F=ot.mb,ht.F==null&&ht.F.length==0)){Yt=Ga(ot,3,"Could not decode alpha data.");break e}la<ht.j&&(xa=ht.j-la,la=ht.j,t(!(1&xa)),ht.O+=ot.R*xa,ht.N+=ot.B*(xa>>1),ht.W+=ot.B*(xa>>1),ht.F!=null&&(ht.J+=ht.width*xa)),la<Fa&&(ht.O+=ht.v,ht.N+=ht.v>>1,ht.W+=ht.v>>1,ht.F!=null&&(ht.J+=ht.v),ht.ka=la-ht.j,ht.U=ht.va-ht.v,ht.T=Fa-la,Yt=ht.put(ht))}Lt+1!=ot.Ic||ya||(a(ot.sa,ot.ta-rr,br,qr+16*ot.R,rr),a(ot.qa,ot.ra-kr,yr,Qt+8*ot.B,kr),a(ot.Ha,ot.Ia-kr,Ra,Ya+8*ot.B,kr))}if(!Yt)return Ga(vt,6,"Output aborted.")}return 1}(O,U)),U.bc!=null&&U.bc(U),ae&=1}return ae?(O.cb=0,ae):0}function Un(O,U,ae,ce,ye){ye=O[U+ae+32*ce]+(ye>>3),O[U+ae+32*ce]=-256&ye?0>ye?0:255:ye}function co(O,U,ae,ce,ye,we){Un(O,U,0,ae,ce+ye),Un(O,U,1,ae,ce+we),Un(O,U,2,ae,ce-we),Un(O,U,3,ae,ce-ye)}function rn(O){return(20091*O>>16)+O}function Vo(O,U,ae,ce){var ye,we=0,Se=i(16);for(ye=0;4>ye;++ye){var Ce=O[U+0]+O[U+8],Oe=O[U+0]-O[U+8],qe=(35468*O[U+4]>>16)-rn(O[U+12]),st=rn(O[U+4])+(35468*O[U+12]>>16);Se[we+0]=Ce+st,Se[we+1]=Oe+qe,Se[we+2]=Oe-qe,Se[we+3]=Ce-st,we+=4,U++}for(ye=we=0;4>ye;++ye)Ce=(O=Se[we+0]+4)+Se[we+8],Oe=O-Se[we+8],qe=(35468*Se[we+4]>>16)-rn(Se[we+12]),Un(ae,ce,0,0,Ce+(st=rn(Se[we+4])+(35468*Se[we+12]>>16))),Un(ae,ce,1,0,Oe+qe),Un(ae,ce,2,0,Oe-qe),Un(ae,ce,3,0,Ce-st),we++,ce+=32}function td(O,U,ae,ce){var ye=O[U+0]+4,we=35468*O[U+4]>>16,Se=rn(O[U+4]),Ce=35468*O[U+1]>>16;co(ae,ce,0,ye+Se,O=rn(O[U+1]),Ce),co(ae,ce,1,ye+we,O,Ce),co(ae,ce,2,ye-we,O,Ce),co(ae,ce,3,ye-Se,O,Ce)}function El(O,U,ae,ce,ye){Vo(O,U,ae,ce),ye&&Vo(O,U+16,ae,ce+4)}function ut(O,U,ae,ce){Ol(O,U+0,ae,ce,1),Ol(O,U+32,ae,ce+128,1)}function nr(O,U,ae,ce){var ye;for(O=O[U+0]+4,ye=0;4>ye;++ye)for(U=0;4>U;++U)Un(ae,ce,U,ye,O)}function Ot(O,U,ae,ce){O[U+0]&&ys(O,U+0,ae,ce),O[U+16]&&ys(O,U+16,ae,ce+4),O[U+32]&&ys(O,U+32,ae,ce+128),O[U+48]&&ys(O,U+48,ae,ce+128+4)}function jr(O,U,ae,ce){var ye,we=i(16);for(ye=0;4>ye;++ye){var Se=O[U+0+ye]+O[U+12+ye],Ce=O[U+4+ye]+O[U+8+ye],Oe=O[U+4+ye]-O[U+8+ye],qe=O[U+0+ye]-O[U+12+ye];we[0+ye]=Se+Ce,we[8+ye]=Se-Ce,we[4+ye]=qe+Oe,we[12+ye]=qe-Oe}for(ye=0;4>ye;++ye)Se=(O=we[0+4*ye]+3)+we[3+4*ye],Ce=we[1+4*ye]+we[2+4*ye],Oe=we[1+4*ye]-we[2+4*ye],qe=O-we[3+4*ye],ae[ce+0]=Se+Ce>>3,ae[ce+16]=qe+Oe>>3,ae[ce+32]=Se-Ce>>3,ae[ce+48]=qe-Oe>>3,ce+=64}function gs(O,U,ae){var ce,ye=U-32,we=ei,Se=255-O[ye-1];for(ce=0;ce<ae;++ce){var Ce,Oe=we,qe=Se+O[U-1];for(Ce=0;Ce<ae;++Ce)O[U+Ce]=Oe[qe+O[ye+Ce]];U+=32}}function zd(O,U){gs(O,U,4)}function Ei(O,U){gs(O,U,8)}function ui(O,U){gs(O,U,16)}function _l(O,U){var ae;for(ae=0;16>ae;++ae)a(O,U+32*ae,O,U-32,16)}function Hd(O,U){var ae;for(ae=16;0<ae;--ae)s(O,U,O[U-1],16),U+=32}function Dl(O,U,ae){var ce;for(ce=0;16>ce;++ce)s(U,ae+32*ce,O,16)}function Wd(O,U){var ae,ce=16;for(ae=0;16>ae;++ae)ce+=O[U-1+32*ae]+O[U+ae-32];Dl(ce>>5,O,U)}function bs(O,U){var ae,ce=8;for(ae=0;16>ae;++ae)ce+=O[U-1+32*ae];Dl(ce>>4,O,U)}function Ze(O,U){var ae,ce=8;for(ae=0;16>ae;++ae)ce+=O[U+ae-32];Dl(ce>>4,O,U)}function Jt(O,U){Dl(128,O,U)}function rt(O,U,ae){return O+2*U+ae+2>>2}function Cr(O,U){var ae,ce=U-32;for(ce=new Uint8Array([rt(O[ce-1],O[ce+0],O[ce+1]),rt(O[ce+0],O[ce+1],O[ce+2]),rt(O[ce+1],O[ce+2],O[ce+3]),rt(O[ce+2],O[ce+3],O[ce+4])]),ae=0;4>ae;++ae)a(O,U+32*ae,ce,0,ce.length)}function Ps(O,U){var ae=O[U-1],ce=O[U-1+32],ye=O[U-1+64],we=O[U-1+96];K(O,U+0,16843009*rt(O[U-1-32],ae,ce)),K(O,U+32,16843009*rt(ae,ce,ye)),K(O,U+64,16843009*rt(ce,ye,we)),K(O,U+96,16843009*rt(ye,we,we))}function Ma(O,U){var ae,ce=4;for(ae=0;4>ae;++ae)ce+=O[U+ae-32]+O[U-1+32*ae];for(ce>>=3,ae=0;4>ae;++ae)s(O,U+32*ae,ce,4)}function $a(O,U){var ae=O[U-1+0],ce=O[U-1+32],ye=O[U-1+64],we=O[U-1-32],Se=O[U+0-32],Ce=O[U+1-32],Oe=O[U+2-32],qe=O[U+3-32];O[U+0+96]=rt(ce,ye,O[U-1+96]),O[U+1+96]=O[U+0+64]=rt(ae,ce,ye),O[U+2+96]=O[U+1+64]=O[U+0+32]=rt(we,ae,ce),O[U+3+96]=O[U+2+64]=O[U+1+32]=O[U+0+0]=rt(Se,we,ae),O[U+3+64]=O[U+2+32]=O[U+1+0]=rt(Ce,Se,we),O[U+3+32]=O[U+2+0]=rt(Oe,Ce,Se),O[U+3+0]=rt(qe,Oe,Ce)}function _i(O,U){var ae=O[U+1-32],ce=O[U+2-32],ye=O[U+3-32],we=O[U+4-32],Se=O[U+5-32],Ce=O[U+6-32],Oe=O[U+7-32];O[U+0+0]=rt(O[U+0-32],ae,ce),O[U+1+0]=O[U+0+32]=rt(ae,ce,ye),O[U+2+0]=O[U+1+32]=O[U+0+64]=rt(ce,ye,we),O[U+3+0]=O[U+2+32]=O[U+1+64]=O[U+0+96]=rt(ye,we,Se),O[U+3+32]=O[U+2+64]=O[U+1+96]=rt(we,Se,Ce),O[U+3+64]=O[U+2+96]=rt(Se,Ce,Oe),O[U+3+96]=rt(Ce,Oe,Oe)}function uc(O,U){var ae=O[U-1+0],ce=O[U-1+32],ye=O[U-1+64],we=O[U-1-32],Se=O[U+0-32],Ce=O[U+1-32],Oe=O[U+2-32],qe=O[U+3-32];O[U+0+0]=O[U+1+64]=we+Se+1>>1,O[U+1+0]=O[U+2+64]=Se+Ce+1>>1,O[U+2+0]=O[U+3+64]=Ce+Oe+1>>1,O[U+3+0]=Oe+qe+1>>1,O[U+0+96]=rt(ye,ce,ae),O[U+0+64]=rt(ce,ae,we),O[U+0+32]=O[U+1+96]=rt(ae,we,Se),O[U+1+32]=O[U+2+96]=rt(we,Se,Ce),O[U+2+32]=O[U+3+96]=rt(Se,Ce,Oe),O[U+3+32]=rt(Ce,Oe,qe)}function al(O,U){var ae=O[U+0-32],ce=O[U+1-32],ye=O[U+2-32],we=O[U+3-32],Se=O[U+4-32],Ce=O[U+5-32],Oe=O[U+6-32],qe=O[U+7-32];O[U+0+0]=ae+ce+1>>1,O[U+1+0]=O[U+0+64]=ce+ye+1>>1,O[U+2+0]=O[U+1+64]=ye+we+1>>1,O[U+3+0]=O[U+2+64]=we+Se+1>>1,O[U+0+32]=rt(ae,ce,ye),O[U+1+32]=O[U+0+96]=rt(ce,ye,we),O[U+2+32]=O[U+1+96]=rt(ye,we,Se),O[U+3+32]=O[U+2+96]=rt(we,Se,Ce),O[U+3+64]=rt(Se,Ce,Oe),O[U+3+96]=rt(Ce,Oe,qe)}function pp(O,U){var ae=O[U-1+0],ce=O[U-1+32],ye=O[U-1+64],we=O[U-1+96];O[U+0+0]=ae+ce+1>>1,O[U+2+0]=O[U+0+32]=ce+ye+1>>1,O[U+2+32]=O[U+0+64]=ye+we+1>>1,O[U+1+0]=rt(ae,ce,ye),O[U+3+0]=O[U+1+32]=rt(ce,ye,we),O[U+3+32]=O[U+1+64]=rt(ye,we,we),O[U+3+64]=O[U+2+64]=O[U+0+96]=O[U+1+96]=O[U+2+96]=O[U+3+96]=we}function Tf(O,U){var ae=O[U-1+0],ce=O[U-1+32],ye=O[U-1+64],we=O[U-1+96],Se=O[U-1-32],Ce=O[U+0-32],Oe=O[U+1-32],qe=O[U+2-32];O[U+0+0]=O[U+2+32]=ae+Se+1>>1,O[U+0+32]=O[U+2+64]=ce+ae+1>>1,O[U+0+64]=O[U+2+96]=ye+ce+1>>1,O[U+0+96]=we+ye+1>>1,O[U+3+0]=rt(Ce,Oe,qe),O[U+2+0]=rt(Se,Ce,Oe),O[U+1+0]=O[U+3+32]=rt(ae,Se,Ce),O[U+1+32]=O[U+3+64]=rt(ce,ae,Se),O[U+1+64]=O[U+3+96]=rt(ye,ce,ae),O[U+1+96]=rt(we,ye,ce)}function hv(O,U){var ae;for(ae=0;8>ae;++ae)a(O,U+32*ae,O,U-32,8)}function Gd(O,U){var ae;for(ae=0;8>ae;++ae)s(O,U,O[U-1],8),U+=32}function hc(O,U,ae){var ce;for(ce=0;8>ce;++ce)s(U,ae+32*ce,O,8)}function rd(O,U){var ae,ce=8;for(ae=0;8>ae;++ae)ce+=O[U+ae-32]+O[U-1+32*ae];hc(ce>>4,O,U)}function Di(O,U){var ae,ce=4;for(ae=0;8>ae;++ae)ce+=O[U+ae-32];hc(ce>>3,O,U)}function qo(O,U){var ae,ce=4;for(ae=0;8>ae;++ae)ce+=O[U-1+32*ae];hc(ce>>3,O,U)}function Yd(O,U){hc(128,O,U)}function fc(O,U,ae){var ce=O[U-ae],ye=O[U+0],we=3*(ye-ce)+xv[1020+O[U-2*ae]-O[U+ae]],Se=jh[112+(we+4>>3)];O[U-ae]=ei[255+ce+jh[112+(we+3>>3)]],O[U+0]=ei[255+ye-Se]}function fv(O,U,ae,ce){var ye=O[U+0],we=O[U+ae];return il[255+O[U-2*ae]-O[U-ae]]>ce||il[255+we-ye]>ce}function If(O,U,ae,ce){return 4*il[255+O[U-ae]-O[U+0]]+il[255+O[U-2*ae]-O[U+ae]]<=ce}function Pf(O,U,ae,ce,ye){var we=O[U-3*ae],Se=O[U-2*ae],Ce=O[U-ae],Oe=O[U+0],qe=O[U+ae],st=O[U+2*ae],Et=O[U+3*ae];return 4*il[255+Ce-Oe]+il[255+Se-qe]>ce?0:il[255+O[U-4*ae]-we]<=ye&&il[255+we-Se]<=ye&&il[255+Se-Ce]<=ye&&il[255+Et-st]<=ye&&il[255+st-qe]<=ye&&il[255+qe-Oe]<=ye}function Kd(O,U,ae,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)If(O,U+ce,ae,ye)&&fc(O,U+ce,ae)}function zo(O,U,ae,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)If(O,U+ce*ae,1,ye)&&fc(O,U+ce*ae,1)}function mc(O,U,ae,ce){var ye;for(ye=3;0<ye;--ye)Kd(O,U+=4*ae,ae,ce)}function Pg(O,U,ae,ce){var ye;for(ye=3;0<ye;--ye)zo(O,U+=4,ae,ce)}function Xd(O,U,ae,ce,ye,we,Se,Ce){for(we=2*we+1;0<ye--;){if(Pf(O,U,ae,we,Se))if(fv(O,U,ae,Ce))fc(O,U,ae);else{var Oe=O,qe=U,st=ae,Et=Oe[qe-2*st],St=Oe[qe-st],vt=Oe[qe+0],tr=Oe[qe+st],Lt=Oe[qe+2*st],ot=27*(Yt=xv[1020+3*(vt-St)+xv[1020+Et-tr]])+63>>7,ht=18*Yt+63>>7,Yt=9*Yt+63>>7;Oe[qe-3*st]=ei[255+Oe[qe-3*st]+Yt],Oe[qe-2*st]=ei[255+Et+ht],Oe[qe-st]=ei[255+St+ot],Oe[qe+0]=ei[255+vt-ot],Oe[qe+st]=ei[255+tr-ht],Oe[qe+2*st]=ei[255+Lt-Yt]}U+=ce}}function Al(O,U,ae,ce,ye,we,Se,Ce){for(we=2*we+1;0<ye--;){if(Pf(O,U,ae,we,Se))if(fv(O,U,ae,Ce))fc(O,U,ae);else{var Oe=O,qe=U,st=ae,Et=Oe[qe-st],St=Oe[qe+0],vt=Oe[qe+st],tr=jh[112+((Lt=3*(St-Et))+4>>3)],Lt=jh[112+(Lt+3>>3)],ot=tr+1>>1;Oe[qe-2*st]=ei[255+Oe[qe-2*st]+ot],Oe[qe-st]=ei[255+Et+Lt],Oe[qe+0]=ei[255+St-tr],Oe[qe+st]=ei[255+vt-ot]}U+=ce}}function hh(O,U,ae,ce,ye,we){Xd(O,U,ae,1,16,ce,ye,we)}function fh(O,U,ae,ce,ye,we){Xd(O,U,1,ae,16,ce,ye,we)}function Og(O,U,ae,ce,ye,we){var Se;for(Se=3;0<Se;--Se)Al(O,U+=4*ae,ae,1,16,ce,ye,we)}function Of(O,U,ae,ce,ye,we){var Se;for(Se=3;0<Se;--Se)Al(O,U+=4,1,ae,16,ce,ye,we)}function Mg(O,U,ae,ce,ye,we,Se,Ce){Xd(O,U,ye,1,8,we,Se,Ce),Xd(ae,ce,ye,1,8,we,Se,Ce)}function xp(O,U,ae,ce,ye,we,Se,Ce){Xd(O,U,1,ye,8,we,Se,Ce),Xd(ae,ce,1,ye,8,we,Se,Ce)}function Mf(O,U,ae,ce,ye,we,Se,Ce){Al(O,U+4*ye,ye,1,8,we,Se,Ce),Al(ae,ce+4*ye,ye,1,8,we,Se,Ce)}function mv(O,U,ae,ce,ye,we,Se,Ce){Al(O,U+4,1,ye,8,we,Se,Ce),Al(ae,ce+4,1,ye,8,we,Se,Ce)}function Rf(){this.ba=new Re,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new At,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ff(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new P}function Rg(){this.xb=this.a=0,this.l=new Is,this.ca=new Re,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ff,this.ab=0,this.gc=o(4,gp),this.Oc=0}function Lf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mh(O,U,ae,ce,ye,we,Se){for(O=O==null?0:O[U+0],U=0;U<Se;++U)ye[we+U]=O+ae[ce+U]&255,O=ye[we+U]}function Bf(O,U,ae,ce,ye,we,Se){var Ce;if(O==null)mh(null,null,ae,ce,ye,we,Se);else for(Ce=0;Ce<Se;++Ce)ye[we+Ce]=O[U+Ce]+ae[ce+Ce]&255}function Qd(O,U,ae,ce,ye,we,Se){if(O==null)mh(null,null,ae,ce,ye,we,Se);else{var Ce,Oe=O[U+0],qe=Oe,st=Oe;for(Ce=0;Ce<Se;++Ce)qe=st+(Oe=O[U+Ce])-qe,st=ae[ce+Ce]+(-256&qe?0>qe?0:255:qe)&255,qe=Oe,ye[we+Ce]=st}}function bp(O,U,ae,ce){var ye=U.width,we=U.o;if(t(O!=null&&U!=null),0>ae||0>=ce||ae+ce>we)return null;if(!O.Cc){if(O.ga==null){var Se;if(O.ga=new Lf,(Se=O.ga==null)||(Se=U.width*U.o,t(O.Gb.length==0),O.Gb=i(Se),O.Uc=0,O.Gb==null?Se=0:(O.mb=O.Gb,O.nb=O.Uc,O.rc=null,Se=1),Se=!Se),!Se){Se=O.ga;var Ce=O.Fa,Oe=O.P,qe=O.qc,st=O.mb,Et=O.nb,St=Oe+1,vt=qe-1,tr=Se.l;if(t(Ce!=null&&st!=null&&U!=null),bc[0]=null,bc[1]=mh,bc[2]=Bf,bc[3]=Qd,Se.ca=st,Se.tb=Et,Se.c=U.width,Se.i=U.height,t(0<Se.c&&0<Se.i),1>=qe)U=0;else if(Se.$a=Ce[Oe+0]>>0&3,Se.Z=Ce[Oe+0]>>2&3,Se.Lc=Ce[Oe+0]>>4&3,Oe=Ce[Oe+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Oe)U=0;else if(tr.put=Tt,tr.ac=it,tr.bc=lr,tr.ma=Se,tr.width=U.width,tr.height=U.height,tr.Da=U.Da,tr.v=U.v,tr.va=U.va,tr.j=U.j,tr.o=U.o,Se.$a)e:{t(Se.$a==1),U=jt();t:for(;;){if(U==null){U=0;break e}if(t(Se!=null),Se.mc=U,U.c=Se.c,U.i=Se.i,U.l=Se.l,U.l.ma=Se,U.l.width=Se.c,U.l.height=Se.i,U.a=0,R(U.m,Ce,St,vt),!ct(Se.c,Se.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Ae(U.s)?(Se.ic=1,Ce=U.c*U.i,U.Ta=null,U.Ua=0,U.V=i(Ce),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(Se.ic=0,U=Nt(U,Se.c)),!U))break t;U=1;break e}Se.mc=null,U=0}else U=vt>=Se.c*Se.i;Se=!U}if(Se)return null;O.ga.Lc!=1?O.Ga=0:ce=we-ae}t(O.ga!=null),t(ae+ce<=we);e:{if(U=(Ce=O.ga).c,we=Ce.l.o,Ce.$a==0){if(St=O.rc,vt=O.Vc,tr=O.Fa,Oe=O.P+1+ae*U,qe=O.mb,st=O.nb+ae*U,t(Oe<=O.P+O.qc),Ce.Z!=0)for(t(bc[Ce.Z]!=null),Se=0;Se<ce;++Se)bc[Ce.Z](St,vt,tr,Oe,qe,st,U),St=qe,vt=st,st+=U,Oe+=U;else for(Se=0;Se<ce;++Se)a(qe,st,tr,Oe,U),St=qe,vt=st,st+=U,Oe+=U;O.rc=St,O.Vc=vt}else{if(t(Ce.mc!=null),U=ae+ce,t((Se=Ce.mc)!=null),t(U<=Se.i),Se.C>=U)U=1;else if(Ce.ic||yt(),Ce.ic){Ce=Se.V,St=Se.Ba,vt=Se.c;var Lt=Se.i,ot=(tr=1,Oe=Se.$/vt,qe=Se.$%vt,st=Se.m,Et=Se.s,Se.$),ht=vt*Lt,Yt=vt*U,rr=Et.wc,Qt=ot<Yt?Bt(Et,qe,Oe):null;t(ot<=ht),t(U<=Lt),t(Ae(Et));t:for(;;){for(;!st.h&&ot<Yt;){if(qe&rr||(Qt=Bt(Et,qe,Oe)),t(Qt!=null),W(st),256>(Lt=Nr(Qt.G[0],Qt.H[0],st)))Ce[St+ot]=Lt,++ot,++qe>=vt&&(qe=0,++Oe<=U&&!(Oe%16)&&Ue(Se,Oe));else{if(!(280>Lt)){tr=0;break t}Lt=sr(Lt-256,st);var kr,br=Nr(Qt.G[4],Qt.H[4],st);if(W(st),!(ot>=(br=pr(vt,br=sr(br,st)))&&ht-ot>=Lt)){tr=0;break t}for(kr=0;kr<Lt;++kr)Ce[St+ot+kr]=Ce[St+ot+kr-br];for(ot+=Lt,qe+=Lt;qe>=vt;)qe-=vt,++Oe<=U&&!(Oe%16)&&Ue(Se,Oe);ot<Yt&&qe&rr&&(Qt=Bt(Et,qe,Oe))}t(st.h==ee(st))}Ue(Se,Oe>U?U:Oe);break t}!tr||st.h&&ot<ht?(tr=0,Se.a=st.h?5:3):Se.$=ot,U=tr}else U=He(Se,Se.V,Se.Ba,Se.c,Se.i,U,wt);if(!U){ce=0;break e}}ae+ce>=we&&(O.Cc=1),ce=1}if(!ce)return null;if(O.Cc&&((ce=O.ga)!=null&&(ce.mc=null),O.ga=null,0<O.Ga))return alert("todo:WebPDequantizeLevels"),null}return O.nb+ae*ye}function X(O,U,ae,ce,ye,we){for(;0<ye--;){var Se,Ce=O,Oe=U+(ae?1:0),qe=O,st=U+(ae?0:3);for(Se=0;Se<ce;++Se){var Et=qe[st+4*Se];Et!=255&&(Et*=32897,Ce[Oe+4*Se+0]=Ce[Oe+4*Se+0]*Et>>23,Ce[Oe+4*Se+1]=Ce[Oe+4*Se+1]*Et>>23,Ce[Oe+4*Se+2]=Ce[Oe+4*Se+2]*Et>>23)}U+=we}}function je(O,U,ae,ce,ye){for(;0<ce--;){var we;for(we=0;we<ae;++we){var Se=O[U+2*we+0],Ce=15&(qe=O[U+2*we+1]),Oe=4369*Ce,qe=(240&qe|qe>>4)*Oe>>16;O[U+2*we+0]=(240&Se|Se>>4)*Oe>>16&240|(15&Se|Se<<4)*Oe>>16>>4&15,O[U+2*we+1]=240&qe|Ce}U+=ye}}function Qe(O,U,ae,ce,ye,we,Se,Ce){var Oe,qe,st=255;for(qe=0;qe<ye;++qe){for(Oe=0;Oe<ce;++Oe){var Et=O[U+Oe];we[Se+4*Oe]=Et,st&=Et}U+=ae,Se+=Ce}return st!=255}function nt(O,U,ae,ce,ye){var we;for(we=0;we<ye;++we)ae[ce+we]=O[U+we]>>8}function yt(){Wo=X,ja=je,Na=Qe,Sn=nt}function qt(O,U,ae){T[O]=function(ce,ye,we,Se,Ce,Oe,qe,st,Et,St,vt,tr,Lt,ot,ht,Yt,rr){var Qt,kr=rr-1>>1,br=Ce[Oe+0]|qe[st+0]<<16,qr=Et[St+0]|vt[tr+0]<<16;t(ce!=null);var yr=3*br+qr+131074>>2;for(U(ce[ye+0],255&yr,yr>>16,Lt,ot),we!=null&&(yr=3*qr+br+131074>>2,U(we[Se+0],255&yr,yr>>16,ht,Yt)),Qt=1;Qt<=kr;++Qt){var Ra=Ce[Oe+Qt]|qe[st+Qt]<<16,Ya=Et[St+Qt]|vt[tr+Qt]<<16,ya=br+Ra+qr+Ya+524296,xa=ya+2*(Ra+qr)>>3;yr=xa+br>>1,br=(ya=ya+2*(br+Ya)>>3)+Ra>>1,U(ce[ye+2*Qt-1],255&yr,yr>>16,Lt,ot+(2*Qt-1)*ae),U(ce[ye+2*Qt-0],255&br,br>>16,Lt,ot+(2*Qt-0)*ae),we!=null&&(yr=ya+qr>>1,br=xa+Ya>>1,U(we[Se+2*Qt-1],255&yr,yr>>16,ht,Yt+(2*Qt-1)*ae),U(we[Se+2*Qt+0],255&br,br>>16,ht,Yt+(2*Qt+0)*ae)),br=Ra,qr=Ya}1&rr||(yr=3*br+qr+131074>>2,U(ce[ye+rr-1],255&yr,yr>>16,Lt,ot+(rr-1)*ae),we!=null&&(yr=3*qr+br+131074>>2,U(we[Se+rr-1],255&yr,yr>>16,ht,Yt+(rr-1)*ae)))}}function dr(){ti[Ai]=fd,ti[Hf]=yc,ti[vc]=uu,ti[wp]=bv,ti[Nh]=yv,ti[ld]=Yf,ti[vv]=jv,ti[Sp]=yc,ti[cu]=bv,ti[cd]=yv,ti[Wf]=Yf}function Sr(O){return O&-16384?0>O?0:255:O>>BC}function Rr(O,U){return Sr((19077*O>>8)+(26149*U>>8)-14234)}function ca(O,U,ae){return Sr((19077*O>>8)-(6419*U>>8)-(13320*ae>>8)+8708)}function ia(O,U){return Sr((19077*O>>8)+(33050*U>>8)-17685)}function _a(O,U,ae,ce,ye){ce[ye+0]=Rr(O,ae),ce[ye+1]=ca(O,U,ae),ce[ye+2]=ia(O,U)}function Pn(O,U,ae,ce,ye){ce[ye+0]=ia(O,U),ce[ye+1]=ca(O,U,ae),ce[ye+2]=Rr(O,ae)}function $n(O,U,ae,ce,ye){var we=ca(O,U,ae);U=we<<3&224|ia(O,U)>>3,ce[ye+0]=248&Rr(O,ae)|we>>5,ce[ye+1]=U}function is(O,U,ae,ce,ye){var we=240&ia(O,U)|15;ce[ye+0]=240&Rr(O,ae)|ca(O,U,ae)>>4,ce[ye+1]=we}function os(O,U,ae,ce,ye){ce[ye+0]=255,_a(O,U,ae,ce,ye+1)}function Js(O,U,ae,ce,ye){Pn(O,U,ae,ce,ye),ce[ye+3]=255}function Tl(O,U,ae,ce,ye){_a(O,U,ae,ce,ye),ce[ye+3]=255}function Ho(O,U){return 0>O?0:O>U?U:O}function Il(O,U,ae){T[O]=function(ce,ye,we,Se,Ce,Oe,qe,st,Et){for(var St=st+(-2&Et)*ae;st!=St;)U(ce[ye+0],we[Se+0],Ce[Oe+0],qe,st),U(ce[ye+1],we[Se+0],Ce[Oe+0],qe,st+ae),ye+=2,++Se,++Oe,st+=2*ae;1&Et&&U(ce[ye+0],we[Se+0],Ce[Oe+0],qe,st)}}function yp(O,U,ae){return ae==0?O==0?U==0?6:5:U==0?4:0:ae}function ad(O,U,ae,ce,ye){switch(O>>>30){case 3:Ol(U,ae,ce,ye,0);break;case 2:Qn(U,ae,ce,ye);break;case 1:ys(U,ae,ce,ye)}}function nd(O,U){var ae,ce,ye=U.M,we=U.Nb,Se=O.oc,Ce=O.pc+40,Oe=O.oc,qe=O.pc+584,st=O.oc,Et=O.pc+600;for(ae=0;16>ae;++ae)Se[Ce+32*ae-1]=129;for(ae=0;8>ae;++ae)Oe[qe+32*ae-1]=129,st[Et+32*ae-1]=129;for(0<ye?Se[Ce-1-32]=Oe[qe-1-32]=st[Et-1-32]=129:(s(Se,Ce-32-1,127,21),s(Oe,qe-32-1,127,9),s(st,Et-32-1,127,9)),ce=0;ce<O.za;++ce){var St=U.ya[U.aa+ce];if(0<ce){for(ae=-1;16>ae;++ae)a(Se,Ce+32*ae-4,Se,Ce+32*ae+12,4);for(ae=-1;8>ae;++ae)a(Oe,qe+32*ae-4,Oe,qe+32*ae+4,4),a(st,Et+32*ae-4,st,Et+32*ae+4,4)}var vt=O.Gd,tr=O.Hd+ce,Lt=St.ad,ot=St.Hc;if(0<ye&&(a(Se,Ce-32,vt[tr].y,0,16),a(Oe,qe-32,vt[tr].f,0,8),a(st,Et-32,vt[tr].ea,0,8)),St.Za){var ht=Se,Yt=Ce-32+16;for(0<ye&&(ce>=O.za-1?s(ht,Yt,vt[tr].y[15],4):a(ht,Yt,vt[tr+1].y,0,4)),ae=0;4>ae;ae++)ht[Yt+128+ae]=ht[Yt+256+ae]=ht[Yt+384+ae]=ht[Yt+0+ae];for(ae=0;16>ae;++ae,ot<<=2)ht=Se,Yt=Ce+kh[ae],Gi[St.Ob[ae]](ht,Yt),ad(ot,Lt,16*+ae,ht,Yt)}else if(ht=yp(ce,ye,St.Ob[0]),hd[ht](Se,Ce),ot!=0)for(ae=0;16>ae;++ae,ot<<=2)ad(ot,Lt,16*+ae,Se,Ce+kh[ae]);for(ae=St.Gc,ht=yp(ce,ye,St.Dd),Yo[ht](Oe,qe),Yo[ht](st,Et),ot=Lt,ht=Oe,Yt=qe,255&(St=ae>>0)&&(170&St?Ml(ot,256,ht,Yt):fo(ot,256,ht,Yt)),St=st,ot=Et,255&(ae>>=8)&&(170&ae?Ml(Lt,320,St,ot):fo(Lt,320,St,ot)),ye<O.Ub-1&&(a(vt[tr].y,0,Se,Ce+480,16),a(vt[tr].f,0,Oe,qe+224,8),a(vt[tr].ea,0,st,Et+224,8)),ae=8*we*O.B,vt=O.sa,tr=O.ta+16*ce+16*we*O.R,Lt=O.qa,St=O.ra+8*ce+ae,ot=O.Ha,ht=O.Ia+8*ce+ae,ae=0;16>ae;++ae)a(vt,tr+ae*O.R,Se,Ce+32*ae,16);for(ae=0;8>ae;++ae)a(Lt,St+ae*O.B,Oe,qe+32*ae,8),a(ot,ht+ae*O.B,st,Et+32*ae,8)}}function Uf(O,U,ae,ce,ye,we,Se,Ce,Oe){var qe=[0],st=[0],Et=0,St=Oe!=null?Oe.kd:0,vt=Oe??new vp;if(O==null||12>ae)return 7;vt.data=O,vt.w=U,vt.ha=ae,U=[U],ae=[ae],vt.gb=[vt.gb];e:{var tr=U,Lt=ae,ot=vt.gb;if(t(O!=null),t(Lt!=null),t(ot!=null),ot[0]=0,12<=Lt[0]&&!r(O,tr[0],"RIFF")){if(r(O,tr[0]+8,"WEBP")){ot=3;break e}var ht=se(O,tr[0]+4);if(12>ht||4294967286<ht){ot=3;break e}if(St&&ht>Lt[0]-8){ot=7;break e}ot[0]=ht,tr[0]+=12,Lt[0]-=12}ot=0}if(ot!=0)return ot;for(ht=0<vt.gb[0],ae=ae[0];;){e:{var Yt=O;Lt=U,ot=ae;var rr=qe,Qt=st,kr=tr=[0];if((yr=Et=[Et])[0]=0,8>ot[0])ot=7;else{if(!r(Yt,Lt[0],"VP8X")){if(se(Yt,Lt[0]+4)!=10){ot=3;break e}if(18>ot[0]){ot=7;break e}var br=se(Yt,Lt[0]+8),qr=1+H(Yt,Lt[0]+12);if(2147483648<=qr*(Yt=1+H(Yt,Lt[0]+15))){ot=3;break e}kr!=null&&(kr[0]=br),rr!=null&&(rr[0]=qr),Qt!=null&&(Qt[0]=Yt),Lt[0]+=18,ot[0]-=18,yr[0]=1}ot=0}}if(Et=Et[0],tr=tr[0],ot!=0)return ot;if(Lt=!!(2&tr),!ht&&Et)return 3;if(we!=null&&(we[0]=!!(16&tr)),Se!=null&&(Se[0]=Lt),Ce!=null&&(Ce[0]=0),Se=qe[0],tr=st[0],Et&&Lt&&Oe==null){ot=0;break}if(4>ae){ot=7;break}if(ht&&Et||!ht&&!Et&&!r(O,U[0],"ALPH")){ae=[ae],vt.na=[vt.na],vt.P=[vt.P],vt.Sa=[vt.Sa];e:{br=O,ot=U,ht=ae;var yr=vt.gb;rr=vt.na,Qt=vt.P,kr=vt.Sa,qr=22,t(br!=null),t(ht!=null),Yt=ot[0];var Ra=ht[0];for(t(rr!=null),t(kr!=null),rr[0]=null,Qt[0]=null,kr[0]=0;;){if(ot[0]=Yt,ht[0]=Ra,8>Ra){ot=7;break e}var Ya=se(br,Yt+4);if(4294967286<Ya){ot=3;break e}var ya=8+Ya+1&-2;if(qr+=ya,0<yr&&qr>yr){ot=3;break e}if(!r(br,Yt,"VP8 ")||!r(br,Yt,"VP8L")){ot=0;break e}if(Ra[0]<ya){ot=7;break e}r(br,Yt,"ALPH")||(rr[0]=br,Qt[0]=Yt+8,kr[0]=Ya),Yt+=ya,Ra-=ya}}if(ae=ae[0],vt.na=vt.na[0],vt.P=vt.P[0],vt.Sa=vt.Sa[0],ot!=0)break}ae=[ae],vt.Ja=[vt.Ja],vt.xa=[vt.xa];e:if(yr=O,ot=U,ht=ae,rr=vt.gb[0],Qt=vt.Ja,kr=vt.xa,br=ot[0],Yt=!r(yr,br,"VP8 "),qr=!r(yr,br,"VP8L"),t(yr!=null),t(ht!=null),t(Qt!=null),t(kr!=null),8>ht[0])ot=7;else{if(Yt||qr){if(yr=se(yr,br+4),12<=rr&&yr>rr-12){ot=3;break e}if(St&&yr>ht[0]-8){ot=7;break e}Qt[0]=yr,ot[0]+=8,ht[0]-=8,kr[0]=qr}else kr[0]=5<=ht[0]&&yr[br+0]==47&&!(yr[br+4]>>5),Qt[0]=ht[0];ot=0}if(ae=ae[0],vt.Ja=vt.Ja[0],vt.xa=vt.xa[0],U=U[0],ot!=0)break;if(4294967286<vt.Ja)return 3;if(Ce==null||Lt||(Ce[0]=vt.xa?2:1),Se=[Se],tr=[tr],vt.xa){if(5>ae){ot=7;break}Ce=Se,St=tr,Lt=we,O==null||5>ae?O=0:5<=ae&&O[U+0]==47&&!(O[U+4]>>5)?(ht=[0],yr=[0],rr=[0],R(Qt=new M,O,U,ae),Rt(Qt,ht,yr,rr)?(Ce!=null&&(Ce[0]=ht[0]),St!=null&&(St[0]=yr[0]),Lt!=null&&(Lt[0]=rr[0]),O=1):O=0):O=0}else{if(10>ae){ot=7;break}Ce=tr,O==null||10>ae||!In(O,U+3,ae-3)?O=0:(St=O[U+0]|O[U+1]<<8|O[U+2]<<16,Lt=16383&(O[U+7]<<8|O[U+6]),O=16383&(O[U+9]<<8|O[U+8]),1&St||3<(St>>1&7)||!(St>>4&1)||St>>5>=vt.Ja||!Lt||!O?O=0:(Se&&(Se[0]=Lt),Ce&&(Ce[0]=O),O=1))}if(!O||(Se=Se[0],tr=tr[0],Et&&(qe[0]!=Se||st[0]!=tr)))return 3;Oe!=null&&(Oe[0]=vt,Oe.offset=U-Oe.w,t(4294967286>U-Oe.w),t(Oe.offset==Oe.ha-ae));break}return ot==0||ot==7&&Et&&Oe==null?(we!=null&&(we[0]|=vt.na!=null&&0<vt.na.length),ce!=null&&(ce[0]=Se),ye!=null&&(ye[0]=tr),0):ot}function Jd(O,U,ae){var ce=U.width,ye=U.height,we=0,Se=0,Ce=ce,Oe=ye;if(U.Da=O!=null&&0<O.Da,U.Da&&(Ce=O.cd,Oe=O.bd,we=O.v,Se=O.j,11>ae||(we&=-2,Se&=-2),0>we||0>Se||0>=Ce||0>=Oe||we+Ce>ce||Se+Oe>ye))return 0;if(U.v=we,U.j=Se,U.va=we+Ce,U.o=Se+Oe,U.U=Ce,U.T=Oe,U.da=O!=null&&0<O.da,U.da){if(!ge(Ce,Oe,ae=[O.ib],we=[O.hb]))return 0;U.ib=ae[0],U.hb=we[0]}return U.ob=O!=null&&O.ob,U.Kb=O==null||!O.Sd,U.da&&(U.ob=U.ib<3*ce/4&&U.hb<3*ye/4,U.Kb=0),1}function $f(O){if(O==null)return 2;if(11>O.S){var U=O.f.RGBA;U.fb+=(O.height-1)*U.A,U.A=-U.A}else U=O.f.kb,O=O.height,U.O+=(O-1)*U.fa,U.fa=-U.fa,U.N+=(O-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(O-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(O-1)*U.lb,U.lb=-U.lb);return 0}function ph(O,U,ae,ce){if(ce==null||0>=O||0>=U)return 2;if(ae!=null){if(ae.Da){var ye=ae.cd,we=ae.bd,Se=-2&ae.v,Ce=-2&ae.j;if(0>Se||0>Ce||0>=ye||0>=we||Se+ye>O||Ce+we>U)return 2;O=ye,U=we}if(ae.da){if(!ge(O,U,ye=[ae.ib],we=[ae.hb]))return 2;O=ye[0],U=we[0]}}ce.width=O,ce.height=U;e:{var Oe=ce.width,qe=ce.height;if(O=ce.S,0>=Oe||0>=qe||!(O>=Ai&&13>O))O=2;else{if(0>=ce.Rd&&ce.sd==null){Se=we=ye=U=0;var st=(Ce=Oe*rj[O])*qe;if(11>O||(we=(qe+1)/2*(U=(Oe+1)/2),O==12&&(Se=(ye=Oe)*qe)),(qe=i(st+2*we+Se))==null){O=1;break e}ce.sd=qe,11>O?((Oe=ce.f.RGBA).eb=qe,Oe.fb=0,Oe.A=Ce,Oe.size=st):((Oe=ce.f.kb).y=qe,Oe.O=0,Oe.fa=Ce,Oe.Fd=st,Oe.f=qe,Oe.N=0+st,Oe.Ab=U,Oe.Cd=we,Oe.ea=qe,Oe.W=0+st+we,Oe.Db=U,Oe.Ed=we,O==12&&(Oe.F=qe,Oe.J=0+st+2*we),Oe.Tc=Se,Oe.lb=ye)}if(U=1,ye=ce.S,we=ce.width,Se=ce.height,ye>=Ai&&13>ye)if(11>ye)O=ce.f.RGBA,U&=(Ce=Math.abs(O.A))*(Se-1)+we<=O.size,U&=Ce>=we*rj[ye],U&=O.eb!=null;else{O=ce.f.kb,Ce=(we+1)/2,st=(Se+1)/2,Oe=Math.abs(O.fa),qe=Math.abs(O.Ab);var Et=Math.abs(O.Db),St=Math.abs(O.lb),vt=St*(Se-1)+we;U&=Oe*(Se-1)+we<=O.Fd,U&=qe*(st-1)+Ce<=O.Cd,U=(U&=Et*(st-1)+Ce<=O.Ed)&Oe>=we&qe>=Ce&Et>=Ce,U&=O.y!=null,U&=O.f!=null,U&=O.ea!=null,ye==12&&(U&=St>=we,U&=vt<=O.Tc,U&=O.F!=null)}else U=0;O=U?0:2}}return O!=0||ae!=null&&ae.fd&&(O=$f(ce)),O}var Os=64,Zd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xh=24,vh=32,Vf=8,uo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(O){return O},T.Predictor2=function(O,U,ae){return U[ae+0]},T.Predictor3=function(O,U,ae){return U[ae+1]},T.Predictor4=function(O,U,ae){return U[ae-1]},T.Predictor5=function(O,U,ae){return mt(mt(O,U[ae+1]),U[ae+0])},T.Predictor6=function(O,U,ae){return mt(O,U[ae-1])},T.Predictor7=function(O,U,ae){return mt(O,U[ae+0])},T.Predictor8=function(O,U,ae){return mt(U[ae-1],U[ae+0])},T.Predictor9=function(O,U,ae){return mt(U[ae+0],U[ae+1])},T.Predictor10=function(O,U,ae){return mt(mt(O,U[ae-1]),mt(U[ae+0],U[ae+1]))},T.Predictor11=function(O,U,ae){var ce=U[ae+0];return 0>=Dt(ce>>24&255,O>>24&255,(U=U[ae-1])>>24&255)+Dt(ce>>16&255,O>>16&255,U>>16&255)+Dt(ce>>8&255,O>>8&255,U>>8&255)+Dt(255&ce,255&O,255&U)?ce:O},T.Predictor12=function(O,U,ae){var ce=U[ae+0];return(Be((O>>24&255)+(ce>>24&255)-((U=U[ae-1])>>24&255))<<24|Be((O>>16&255)+(ce>>16&255)-(U>>16&255))<<16|Be((O>>8&255)+(ce>>8&255)-(U>>8&255))<<8|Be((255&O)+(255&ce)-(255&U)))>>>0},T.Predictor13=function(O,U,ae){var ce=U[ae-1];return(dt((O=mt(O,U[ae+0]))>>24&255,ce>>24&255)<<24|dt(O>>16&255,ce>>16&255)<<16|dt(O>>8&255,ce>>8&255)<<8|dt(O>>0&255,ce>>0&255))>>>0};var Fg=T.PredictorAdd0;T.PredictorAdd1=It,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var jp=T.PredictorAdd2;ve("ColorIndexInverseTransform","MapARGB","32b",function(O){return O>>8&255},function(O){return O}),ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(O){return O},function(O){return O>>8&255});var pv,nl=T.ColorIndexInverseTransform,Zs=T.MapARGB,eu=T.VP8LColorIndexInverseTransformAlpha,Np=T.MapAlpha,sd=T.VP8LPredictorsAdd=[];sd.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var tu,Wi,hi,ru,ho,Pl,pc,Ol,Qn,Ml,ys,fo,gh,xc,qf,au,nu,su,bh,zf,iu,id,yh,Jn,Wo,ja,Na,Sn,ls=i(511),sl=i(2041),ou=i(225),lu=i(767),od=0,xv=sl,jh=ou,ei=lu,il=ls,Ai=0,Hf=1,vc=2,wp=3,Nh=4,ld=5,vv=6,Sp=7,cu=8,cd=9,Wf=10,gv=[2,3,7],ol=[3,3,11],Go=[280,256,256,256,40],wh=[0,1,1,1,0],dd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ud=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Sh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Q1=8,Cp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ms=null,Zn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Va=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],du=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Lg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ch=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],J1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hd=[],Gi=[],Yo=[],Z1=1,Gf=2,bc=[],ti=[];qt("UpsampleRgbLinePair",_a,3),qt("UpsampleBgrLinePair",Pn,3),qt("UpsampleRgbaLinePair",Tl,4),qt("UpsampleBgraLinePair",Js,4),qt("UpsampleArgbLinePair",os,4),qt("UpsampleRgba4444LinePair",is,2),qt("UpsampleRgb565LinePair",$n,2);var fd=T.UpsampleRgbLinePair,uu=T.UpsampleBgrLinePair,yc=T.UpsampleRgbaLinePair,bv=T.UpsampleBgraLinePair,yv=T.UpsampleArgbLinePair,Yf=T.UpsampleRgba4444LinePair,jv=T.UpsampleRgb565LinePair,jc=16,Rs=1<<jc-1,hu=-227,Nv=482,BC=6,ej=0,UC=i(256),Fs=i(256),Bg=i(256),Ep=i(256),_p=i(Nv-hu),Ug=i(Nv-hu);Il("YuvToRgbRow",_a,3),Il("YuvToBgrRow",Pn,3),Il("YuvToRgbaRow",Tl,4),Il("YuvToBgraRow",Js,4),Il("YuvToArgbRow",os,4),Il("YuvToRgba4444Row",is,2),Il("YuvToRgb565Row",$n,2);var kh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],$C=[8,7,6,4,4,2,2,2,1,1,1,1],tj=1;this.WebPDecodeRGBA=function(O,U,ae,ce,ye){var we=Hf,Se=new Rf,Ce=new Re;Se.ba=Ce,Ce.S=we,Ce.width=[Ce.width],Ce.height=[Ce.height];var Oe=Ce.width,qe=Ce.height,st=new Ye;if(st==null||O==null)var Et=2;else t(st!=null),Et=Uf(O,U,ae,st.width,st.height,st.Pd,st.Qd,st.format,null);if(Et!=0?Oe=0:(Oe!=null&&(Oe[0]=st.width[0]),qe!=null&&(qe[0]=st.height[0]),Oe=1),Oe){Ce.width=Ce.width[0],Ce.height=Ce.height[0],ce!=null&&(ce[0]=Ce.width),ye!=null&&(ye[0]=Ce.height);e:{if(ce=new Is,(ye=new vp).data=O,ye.w=U,ye.ha=ae,ye.kd=1,U=[0],t(ye!=null),((O=Uf(ye.data,ye.w,ye.ha,null,null,null,U,null,ye))==0||O==7)&&U[0]&&(O=4),(U=O)==0){if(t(Se!=null),ce.data=ye.data,ce.w=ye.w+ye.offset,ce.ha=ye.ha-ye.offset,ce.put=Tt,ce.ac=it,ce.bc=lr,ce.ma=Se,ye.xa){if((O=jt())==null){Se=1;break e}if(function(St,vt){var tr=[0],Lt=[0],ot=[0];t:for(;;){if(St==null)return 0;if(vt==null)return St.a=2,0;if(St.l=vt,St.a=0,R(St.m,vt.data,vt.w,vt.ha),!Rt(St.m,tr,Lt,ot)){St.a=3;break t}if(St.xb=Gf,vt.width=tr[0],vt.height=Lt[0],!ct(tr[0],Lt[0],1,St,null))break t;return 1}return t(St.a!=0),0}(O,ce)){if(ce=(U=ph(ce.width,ce.height,Se.Oa,Se.ba))==0){t:{ce=O;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((ae=ce.l)!=null),t((ye=ae.ma)!=null),ce.xb!=0){if(ce.ca=ye.ba,ce.tb=ye.tb,t(ce.ca!=null),!Jd(ye.Oa,ae,wp)){ce.a=2;break r}if(!Nt(ce,ae.width)||ae.da)break r;if((ae.da||Ve(ce.ca.S))&&yt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&yt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!be(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!He(ce,ce.V,ce.Ba,ce.c,ce.i,ae.o,Le))break r;ye.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(U=O.a)}else U=O.a}else{if((O=new tn)==null){Se=1;break e}if(O.Fa=ye.na,O.P=ye.P,O.qc=ye.Sa,Ci(O,ce)){if((U=ph(ce.width,ce.height,Se.Oa,Se.ba))==0){if(O.Aa=0,ae=Se.Oa,t((ye=O)!=null),ae!=null){if(0<(Oe=0>(Oe=ae.Md)?0:100<Oe?255:255*Oe/100)){for(qe=st=0;4>qe;++qe)12>(Et=ye.pb[qe]).lc&&(Et.ia=Oe*$C[0>Et.lc?0:Et.lc]>>3),st|=Et.ia;st&&(alert("todo:VP8InitRandom"),ye.ia=1)}ye.Ga=ae.Id,100<ye.Ga?ye.Ga=100:0>ye.Ga&&(ye.Ga=0)}kl(O,ce)||(U=O.a)}}else U=O.a}U==0&&Se.Oa!=null&&Se.Oa.fd&&(U=$f(Se.ba))}Se=U}we=Se!=0?null:11>we?Ce.f.RGBA.eb:Ce.f.kb.y}else we=null;return we};var rj=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,I){for(var F="",A=0;A<4;A++)F+=String.fromCharCode(T[I++]);return F}function u(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16)>>>0}function h(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16|T[I+3]<<24)>>>0}new c;var f=[0],p=[0],v=[],g=new c,b=e,y=function(T,I){var F={},A=0,P=!1,q=0,V=0;if(F.frames=[],!function(z,ee,ne,W){for(var re=0;re<W;re++)if(z[ee+re]!=ne.charCodeAt(re))return!0;return!1}(T,I,"RIFF",4)){for(h(T,I+=4),I+=8;I<T.length;){var Y=d(T,I),B=h(T,I+=4);I+=4;var Q=B+(1&B);switch(Y){case"VP8 ":case"VP8L":F.frames[A]===void 0&&(F.frames[A]={}),(J=F.frames[A]).src_off=P?V:I-8,J.src_size=q+B+8,A++,P&&(P=!1,q=0,V=0);break;case"VP8X":(J=F.header={}).feature_flags=T[I];var R=I+4;J.canvas_width=1+u(T,R),R+=3,J.canvas_height=1+u(T,R),R+=3;break;case"ALPH":P=!0,q=Q+8,V=I-8;break;case"ANIM":(J=F.header).bgcolor=h(T,I),R=I+4,J.loop_count=(ie=T)[(M=R)+0]<<0|ie[M+1]<<8,R+=2;break;case"ANMF":var Z,J;(J=F.frames[A]={}).offset_x=2*u(T,I),I+=3,J.offset_y=2*u(T,I),I+=3,J.width=1+u(T,I),I+=3,J.height=1+u(T,I),I+=3,J.duration=u(T,I),I+=3,Z=T[I++],J.dispose=1&Z,J.blend=Z>>1&1}Y!="ANMF"&&(I+=Q)}var ie,M;return F}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var S=y.header?y.header:null,w=y.frames?y.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],p=[S.canvas_width];for(var k=0;k<w.length&&w[k].blend!=0;k++);}var C=w[0],_=g.WebPDecodeRGBA(b,C.src_off,C.src_size,p,f);C.rgba=_,C.imgwidth=p[0],C.imgheight=f[0];for(var E=0;E<p[0]*f[0]*4;E++)v[E]=_[E];return this.width=p,this.height=f,this.data=v,this}(function(e){var t=function(){return typeof k3=="function"},r=function(f,p,v,g){var b=4,y=o;switch(g){case e.image_compression.FAST:b=1,y=i;break;case e.image_compression.MEDIUM:b=6,y=l;break;case e.image_compression.SLOW:b=9,y=c}f=a(f,p,v,y);var S=k3(f,{level:b});return e.__addimage__.arrayBufferToBinaryString(S)},a=function(f,p,v,g){for(var b,y,S,w=f.length/p,k=new Uint8Array(f.length+w),C=u(),_=0;_<w;_+=1){if(S=_*p,b=f.subarray(S,S+p),g)k.set(g(b,v,y),S+_);else{for(var E,T=C.length,I=[];E<T;E+=1)I[E]=C[E](b,v,y);var F=h(I.concat());k.set(I[F],S+_)}y=b}return k},s=function(f){var p=Array.apply([],f);return p.unshift(0),p},i=function(f,p){var v,g=[],b=f.length;g[0]=1;for(var y=0;y<b;y+=1)v=f[y-p]||0,g[y+1]=f[y]-v+256&255;return g},o=function(f,p,v){var g,b=[],y=f.length;b[0]=2;for(var S=0;S<y;S+=1)g=v&&v[S]||0,b[S+1]=f[S]-g+256&255;return b},l=function(f,p,v){var g,b,y=[],S=f.length;y[0]=3;for(var w=0;w<S;w+=1)g=f[w-p]||0,b=v&&v[w]||0,y[w+1]=f[w]+256-(g+b>>>1)&255;return y},c=function(f,p,v){var g,b,y,S,w=[],k=f.length;w[0]=4;for(var C=0;C<k;C+=1)g=f[C-p]||0,b=v&&v[C]||0,y=v&&v[C-p]||0,S=d(g,b,y),w[C+1]=f[C]-S+256&255;return w},d=function(f,p,v){if(f===p&&p===v)return f;var g=Math.abs(p-v),b=Math.abs(f-v),y=Math.abs(f+p-v-v);return g<=b&&g<=y?f:b<=y?p:v},u=function(){return[s,i,o,l,c]},h=function(f){var p=f.map(function(v){return v.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(f,p,v,g){var b,y,S,w,k,C,_,E,T,I,F,A,P,q,V,Y=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(S=new q$e(f)).imgData,y=S.bits,b=S.colorSpace,k=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){T=(E=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,F=new Uint8Array(T*S.colors),I=new Uint8Array(T);var Q,R=S.pixelBitlength-S.bits;for(q=0,V=0;q<T;q++){for(P=E[q],Q=0;Q<R;)F[V++]=P>>>Q&255,Q+=S.bits;I[q]=P>>>Q&255}}if(S.bits===16){T=(E=new Uint32Array(S.decodePixels().buffer)).length,F=new Uint8Array(T*(32/S.pixelBitlength)*S.colors),I=new Uint8Array(T*(32/S.pixelBitlength)),A=S.colors>1,q=0,V=0;for(var Z=0;q<T;)P=E[q++],F[V++]=P>>>0&255,A&&(F[V++]=P>>>16&255,P=E[q++],F[V++]=P>>>0&255),I[Z++]=P>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(f=r(F,S.width*S.colors,S.colors,g),_=r(I,S.width,1,g)):(f=F,_=I,Y=void 0)}if(S.colorType===3&&(b=this.color_spaces.INDEXED,C=S.palette,S.transparency.indexed)){var J=S.transparency.indexed,ie=0;for(q=0,T=J.length;q<T;++q)ie+=J[q];if((ie/=255)===T-1&&J.indexOf(0)!==-1)w=[J.indexOf(0)];else if(ie!==T){for(E=S.decodePixels(),I=new Uint8Array(E.length),q=0,T=E.length;q<T;q++)I[q]=J[E[q]];_=r(I,S.width,1)}}var M=function(z){var ee;switch(z){case e.image_compression.FAST:ee=11;break;case e.image_compression.MEDIUM:ee=13;break;case e.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(g);return Y===this.decode.FLATE_DECODE&&(B="/Predictor "+M+" "),B+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(_&&this.__addimage__.isArrayBuffer(_)||this.__addimage__.isArrayBufferView(_))&&(_=this.__addimage__.arrayBufferToBinaryString(_)),{alias:v,data:f,index:p,filter:Y,decodeParameters:B,transparency:w,palette:C,sMask:_,predictor:M,width:S.width,height:S.height,bitsPerComponent:y,colorSpace:b}}}})(Jr.API),function(e){e.processGIF89A=function(t,r,a,s){var i=new z$e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new j5(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A}(Jr.API),wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){An.log("bit decode error:"+r)}},wd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},wd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},wd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},wd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},wd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},wd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},wd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},wd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,s){var i=new wd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new j5(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}}(Jr.API),h$.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,s){var i=new h$(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new j5(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}}(Jr.API),Jr.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],h=a[d+1],f=a[d+2],p=a[d+3];i[l++]=u,i[l++]=h,i[l++]=f,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Jr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},s0=Jr.API,XN=s0.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,f=0,p=e.length,v=0,g=l[0]||c,b=[];for(r=0;r<p;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(f=h&&Ba(d[a])==="object"&&!isNaN(parseInt(d[a][v],10))?d[a][v]/u:0,b.push((l[a]||g)/c+f)),v=a;return b},l$=s0.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return s0.processArabic&&(e=s0.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:XN.apply(this,arguments).reduce(function(i,o){return i+o},0)},c$=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},d$=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],h=[u],f=r.textIndent||0,p=0,v=0,g=e.split(" "),b=XN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),S=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?S=S.concat(k.map(function(C,_){return(_&&C.length?`
`:"")+C})):S.push(k[0])}),g=S,c=l$.apply(this,[y,r])}for(i=0,o=g.length;i<o;i++){var w=0;if(a=g[i],c&&a[0]==`
`&&(a=a.substr(1),w=1),f+p+(v=(s=XN.apply(this,[a,r])).reduce(function(k,C){return k+C},0))>t||w){if(v>t){for(l=c$.apply(this,[a,s,t-(f+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=s.slice(a.length-(u[0]?u[0].length:0)).reduce(function(k,C){return k+C},0)}else u=[a];h.push(u),f=v+c,p=b}else u.push(a),f+=p+v,p=b}return d=c?function(k,C){return(C?y:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},s0.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(d$.apply(this,[a[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var f,p,v,g,b=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof f=="number")f<0?(v=i(f).slice(3),g="-"):(v=i(f).slice(2),g=""),v=g+v.slice(0,-1)+a[v.slice(-1)];else{if(Ba(f)!=="object")throw new Error("Don't know what to do with value type "+Ba(f)+".");v=o(f)}b.push(p+v)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,v,g,b={},y=1,S=b,w=[],k="",C="",_=h.length-1,E=1;E<_;E+=1)(g=h[E])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(w.push([S,v]),S={},v=void 0):g=="}"?((p=w.pop())[0][p[1]]=S,v=void 0,S=p[0]):g=="-"?y=-1:v===void 0?r.hasOwnProperty(g)?(k+=r[g],v=parseInt(k,16)*y,y=1,k=""):k+=g:r.hasOwnProperty(g)?(C+=r[g],S[v]=parseInt(C,16)*y,y=1,v=void 0,C=""):C+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var f=h.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var v=d.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(Jr.API),function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(gy(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])}(Jr),function(e){function t(){return(ta.canvg?Promise.resolve(ta.canvg):j3(()=>import("./index.es-C_xazXhf.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Jr.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw An.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw An.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)})}}(),Jr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},Jr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(v,g){var b,y=!1;for(b=0;b<v.length;b+=1)v[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Ba(e)==="object"){for(s in e)if(i=e[s],f(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&f(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Jr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=i.length;h<f;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(i).sort(function(p,v){return p-v})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<f.length;v++)p+=String.fromCharCode(f[v]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var b=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+f0(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+f0(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+f0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var v=d();u({data:f,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+f0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+f0(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},f=h.pdfEscape,p=h.activeFontKey,v=h.fonts,g=p,b="",y=0,S="",w=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(S=l,g=p,Array.isArray(l)&&(S=l[0]),y=0;y<S.length;y+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[S[y].charCodeAt(0)]),o||S[y].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?b+=S[y]:b+="";var k="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?k=f(b,g).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=r(b,v[g])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(Jr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Jr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,w=0;this.__bidiEngine__={};var k=function(A){var P=A.charCodeAt(),q=P>>8,V=g[q];return V!==void 0?h[256*V+(255&P)]:q===252||q===253?"AL":y.test(q)?"L":q===8?"R":"N"},C=function(A){for(var P,q=0;q<A.length;q++){if((P=k(A.charAt(q)))==="L")return!1;if(P==="R")return!0}return!1},_=function(A,P,q,V){var Y,B,Q,R,Z=P[V];switch(Z){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(Z="AN");break;case"AL":S=!0,Z="R";break;case"WS":Z="N";break;case"CS":V<1||V+1>=P.length||(Y=q[V-1])!=="EN"&&Y!=="AN"||(B=P[V+1])!=="EN"&&B!=="AN"?Z="N":S&&(B="AN"),Z=B===Y?B:"N";break;case"ES":Z=(Y=V>0?q[V-1]:"B")==="EN"&&V+1<P.length&&P[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&q[V-1]==="EN"){Z="EN";break}if(S){Z="N";break}for(Q=V+1,R=P.length;Q<R&&P[Q]==="ET";)Q++;Z=Q<R&&P[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(R=P.length,Q=V+1;Q<R&&P[Q]==="NSM";)Q++;if(Q<R){var J=A[V],ie=J>=1425&&J<=2303||J===64286;if(Y=P[Q],ie&&(Y==="R"||Y==="AL")){Z="R";break}}}Z=V<1||(Y=P[V-1])==="B"?"N":q[V-1];break;case"B":S=!1,s=!0,Z=w;break;case"S":i=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":Z="N"}return Z},E=function(A,P,q){var V=A.split("");return q&&T(V,q,{hiLevel:w}),V.reverse(),P&&P.reverse(),V.join("")},T=function(A,P,q){var V,Y,B,Q,R,Z=-1,J=A.length,ie=0,M=[],z=w?p:f,ee=[];for(S=!1,s=!1,i=!1,Y=0;Y<J;Y++)ee[Y]=k(A[Y]);for(B=0;B<J;B++){if(R=ie,M[B]=_(A,ee,M,B),V=240&(ie=z[R][v[M[B]]]),ie&=15,P[B]=Q=z[ie][5],V>0)if(V===16){for(Y=Z;Y<B;Y++)P[Y]=1;Z=-1}else Z=-1;if(z[ie][6])Z===-1&&(Z=B);else if(Z>-1){for(Y=Z;Y<B;Y++)P[Y]=Q;Z=-1}ee[B]==="B"&&(P[B]=0),q.hiLevel|=Q}i&&function(ne,W,re){for(var le=0;le<re;le++)if(ne[le]==="S"){W[le]=w;for(var te=le-1;te>=0&&ne[te]==="WS";te--)W[te]=w}}(ee,P,J)},I=function(A,P,q,V,Y){if(!(Y.hiLevel<A)){if(A===1&&w===1&&!s)return P.reverse(),void(q&&q.reverse());for(var B,Q,R,Z,J=P.length,ie=0;ie<J;){if(V[ie]>=A){for(R=ie+1;R<J&&V[R]>=A;)R++;for(Z=ie,Q=R-1;Z<Q;Z++,Q--)B=P[Z],P[Z]=P[Q],P[Q]=B,q&&(B=q[Z],q[Z]=q[Q],q[Q]=B);ie=R}ie++}}},F=function(A,P,q){var V=A.split(""),Y={hiLevel:w};return q||(q=[]),T(V,q,Y),function(B,Q,R){if(R.hiLevel!==0&&u)for(var Z,J=0;J<B.length;J++)Q[J]===1&&(Z=b.indexOf(B[J]))>=0&&(B[J]=b[Z+1])}(V,q,Y),I(2,V,P,q,Y),I(1,V,P,q,Y),V.join("")};return this.__bidiEngine__.doBidiReorder=function(A,P,q){if(function(Y,B){if(B)for(var Q=0;Q<Y.length;Q++)B[Q]=Q;l===void 0&&(l=C(Y)),d===void 0&&(d=C(Y))}(A,P),o||!c||d)if(o&&c&&l^d)w=l?1:0,A=E(A,P,q);else if(!o&&c&&d)w=l?1:0,A=F(A,P,q),A=E(A,P);else if(!o||l||c||d){if(o&&!c&&l^d)A=E(A,P),l?(w=0,A=F(A,P,q)):(w=1,A=F(A,P,q),A=E(A,P));else if(o&&l&&!c&&d)w=1,A=F(A,P,q),A=E(A,P);else if(!o&&!c&&l^d){var V=u;l?(w=1,A=F(A,P,q),w=0,u=!1,A=F(A,P,q),u=V):(w=0,A=F(A,P,q),A=E(A,P),w=1,u=!1,A=F(A,P,q),u=V,A=E(A,P))}}else w=0,A=F(A,P,q);else w=l?1:0,A=F(A,P,q);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,c=A.isOutputVisual,l=A.isInputRtl,d=A.isOutputRtl,u=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Jr),Jr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new ap(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new sVe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new H$e(this.contents),this.head=new G$e(this),this.name=new J$e(this),this.cmap=new GJ(this),this.toUnicode={},this.hhea=new Y$e(this),this.maxp=new Z$e(this),this.hmtx=new eVe(this),this.post=new X$e(this),this.os2=new K$e(this),this.loca=new nVe(this),this.glyf=new tVe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var qd,ap=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),H$e=function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,h,f,p,v,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(s=new ap).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,v=[],r)for(f=r[g],s.writeString(g),s.writeInt(e(f)),s.writeInt(d),s.writeInt(f.length),v=v.concat(f),g==="head"&&(l=d),d+=f.length;d%4;)v.push(0),d++;return s.write(v),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=YJ.call(r);r.length%4;)r.push(0);for(i=new ap(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t}(),W$e={}.hasOwnProperty,uh=function(e,t){for(var r in t)W$e.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};qd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var G$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new ap).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),f$=function(){function e(t,r){var a,s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),f=p/2,t.pos+=6,i=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),t.pos+=2,g=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),d=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),u=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),s=(this.length-t.pos+this.offset)/2,l=function(){var k,C;for(C=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)C.push(t.readUInt16());return C}(),c=y=0,w=i.length;y<w;c=++y)for(b=i[c],a=S=v=g[c];v<=b?S<=b:S>=b;a=v<=b?++S:--S)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-v)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=h}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,h,f,p,v,g,b,y,S,w,k,C,_,E,T,I,F,A,P,q,V,Y,B,Q,R,Z,J,ie,M,z,ee,ne,W,re,le,te,K,de,H;switch(V=new ap,o=Object.keys(t).sort(function(se,be){return se-be}),r){case"macroman":for(g=0,b=function(){var se=[];for(v=0;v<256;++v)se.push(0);return se}(),S={0:0},i={},Y=0,Z=o.length;Y<Z;Y++)S[te=t[s=o[Y]]]==null&&(S[te]=++g),i[s]={old:t[s],new:S[t[s]]},b[s]=S[t[s]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(b),{charMap:i,subtable:V.data,maxGlyphID:g+1};case"unicode":for(P=[],h=[],w=0,S={},a={},y=d=null,B=0,J=o.length;B<J;B++)S[C=t[s=o[B]]]==null&&(S[C]=++w),a[s]={old:C,new:S[C]},l=S[C]-s,y!=null&&l===d||(y&&h.push(y),P.push(s),d=l),y=s;for(y&&h.push(y),h.push(65535),P.push(65535),F=2*(I=P.length),T=2*Math.pow(Math.log(I)/Math.LN2,2),f=Math.log(T/2)/Math.LN2,E=2*I-T,c=[],_=[],p=[],v=Q=0,ie=P.length;Q<ie;v=++Q){if(A=P[v],u=h[v],A===65535){c.push(0),_.push(0);break}if(A-(q=a[A].new)>=32768)for(c.push(0),_.push(2*(p.length+I-v)),s=R=A;A<=u?R<=u:R>=u;s=A<=u?++R:--R)p.push(a[s].new);else c.push(q-A),_.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*I+2*p.length),V.writeUInt16(0),V.writeUInt16(F),V.writeUInt16(T),V.writeUInt16(f),V.writeUInt16(E),re=0,M=h.length;re<M;re++)s=h[re],V.writeUInt16(s);for(V.writeUInt16(0),le=0,z=P.length;le<z;le++)s=P[le],V.writeUInt16(s);for(K=0,ee=c.length;K<ee;K++)l=c[K],V.writeUInt16(l);for(de=0,ne=_.length;de<ne;de++)k=_[de],V.writeUInt16(k);for(H=0,W=p.length;H<W;H++)g=p[H],V.writeUInt16(g);return{charMap:a,subtable:V.data,maxGlyphID:w+1}}},e}(),GJ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new f$(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=f$.encode(r,a),(i=new ap).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),Y$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),K$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s}(),this.charRange=function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),X$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),Q$e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},J$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,h,f,p;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,f=s.length;h<f;o=++h)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new Q$e(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),Z$e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),eVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),YJ=[].slice,tVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,h,f;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new ap(a.read(i))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new aVe(c,u,f,d,h):new rVe(c,l,u,f,d,h),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),rVe=function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),aVe=function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new ap(YJ.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),nVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,qd),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},t}(),sVe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,h,f,p,v,g,b,y;for(s in a=GJ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=a.charMap)p[(c=y[s]).old]=c.new;for(v in f=a.maxGlyphID,o)v in p||(p[v]=f++);return u=function(S){var w,k;for(w in k={},S)k[S[w]]=w;return k}(p),h=Object.keys(u).sort(function(S,w){return S-w}),g=function(){var S,w,k;for(k=[],S=0,w=h.length;S<w;S++)l=h[S],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();Jr.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function iVe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState([]),[u,h]=j.useState(!1),[f,p]=j.useState(!1),[v,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState([]),[k,C]=j.useState(0),[_,E]=j.useState(0),[T,I]=j.useState(0),[F,A]=j.useState(0),[P,q]=j.useState(1),[V,Y]=j.useState({salary:"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString()}),[B,Q]=j.useState(localStorage.getItem("activeRole")||"");JSON.parse(localStorage.getItem("user"));const R=["January","February","March","April","May","June","July","August","September","October","November","December"],Z=[],J=new Date().getFullYear();for(let fe=J-5;fe<=J+1;fe++)Z.push(fe.toString());j.useEffect(()=>{M(),z(),ie()},[]);const ie=async()=>{try{const fe=await Ie.get("/api/departments");d(Array.isArray(fe.data)?fe.data:[])}catch(fe){console.error("Error fetching departments:",fe)}},M=async()=>{try{const fe=localStorage.getItem("activeRole")||"";let ve;fe==="SuperAdmin"?ve=await Ie.get("/api/faculties"):ve=await Ie.get("/api/faculties"),t(Array.isArray(ve.data)?ve.data:[])}catch(fe){console.error("Error fetching faculties:",fe)}},z=async()=>{try{const fe=await Ie.get("/api/salary-records");a(Array.isArray(fe.data)?fe.data:[])}catch(fe){console.error("Error fetching salary records:",fe)}},ee=async fe=>{try{const ve=await Ie.get(`/api/salary-records/employee/${fe}`);w(Array.isArray(ve.data)?ve.data:[])}catch(ve){console.error("Error fetching employee salary history:",ve),w([])}},ne=fe=>{const ve=fe.joinDate||new Date().toISOString().split("T")[0],pe=new Date(ve),Te=pe.toLocaleString("en-US",{month:"long"}),Xe=pe.getFullYear().toString();g(fe),Y({salary:fe.salary||"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString(),minDate:ve,joinMonth:Te,joinYear:Xe}),A(0),C(0),E(0),I(0),q(1),h(!0),re(fe.employeeId,new Date().toLocaleString("en-US",{month:"long"}),new Date().getFullYear().toString())},W=fe=>{g(fe),y(fe.employeeId),ee(fe.employeeId),p(!0)},re=async(fe,ve,pe)=>{try{const Te=R.indexOf(ve)+1,Xe=Te<10?`0${Te}`:`${Te}`,kt=await Ie.get("/api/salary-records/leave-count",{params:{employeeId:fe,month:Xe,year:pe}});C(kt.data.leaveCount||0),E(kt.data.sundayCount||0),I(kt.data.totalDays||0)}catch(Te){console.error("Error fetching leave count:",Te),C(0),E(0),I(0)}},le=()=>{h(!1),g(null)},te=()=>{p(!1),y(null),g(null),w([])},K=fe=>{Y({...V,[fe.target.name]:fe.target.value})},de=fe=>{const ve=fe.target.value;Y({...V,month:ve}),v&&re(v.employeeId,ve,V.year)},H=fe=>{const ve=fe.target.value;if(ve===V.joinYear){const pe=R.indexOf(V.month),Te=R.indexOf(V.joinMonth);if(pe<Te){Y({...V,year:ve,month:V.joinMonth}),v&&re(v.employeeId,V.joinMonth,ve);return}}Y({...V,year:ve}),v&&re(v.employeeId,V.month,ve)},se=fe=>{A(fe.target.value)},be=fe=>{const ve=parseInt(fe.target.value);q(isNaN(ve)||ve<0?0:ve)},ue=()=>Math.max(0,k-P),oe=()=>{const fe=ue()*F;return V.salary-fe},ge=async()=>{try{const pe=ue(),Te=pe*F,Xe=oe();await Ie.post("/api/salary-records/save",{facultyId:v._id,employeeId:v.employeeId,month:V.month,year:V.year,salary:V.salary,leaveCount:k,sundayCount:_,totalLeaveCount:T,paidLeaveCount:P,deductibleDays:pe,deductionPerDay:F,totalDeduction:Te,payableSalary:Xe,date:V.date});var fe=document.getElementById("standard-modal"),ve=bootstrap.Modal.getInstance(fe);ve||(ve=new bootstrap.Modal(fe)),ve.hide(),z(),alert("Salary saved successfully!"),le()}catch(pe){pe.response&&pe.response.status===400?alert("Salary already recorded for this employee in the same month!"):console.error("Error saving salary:",pe)}},Ne=async(fe,ve,pe,Te=null)=>{const Xe=Te?{firstName:Te.facultyId?.firstName||"Unknown",lastName:Te.facultyId?.lastName||"Unknown",employeeId:Te.employeeId,department:Te.facultyId?.department||"Unknown"}:v;if(!Xe)throw new Error("Employee information is required");try{const kt=Te?Te.date:V.date,Je=Te?Te.month:V.month,ze=Te?Te.year:V.year,Fe=Te?Te.salary:V.salary,Ve=Te?Te.leaveCount:k,pt=Te?Te.sundayCount||0:_,Pe=Te?Te.paidLeaveCount||0:P,Re=Te?Te.deductibleDays||0:ve,Ye=Te?Te.deductionPerDay||0:F,At=Te?Te.totalDeduction||0:pe,Gt=Te?Te.payableSalary:fe,De=new Jr;De.setFontSize(16),De.setFont(void 0,"bold"),De.text("Your Company Name",De.internal.pageSize.width/2,20,{align:"center"}),De.setFontSize(10),De.setFont(void 0,"normal"),De.text("Company Address Line 1",De.internal.pageSize.width/2,30,{align:"center"}),De.text("Company Address Line 2",De.internal.pageSize.width/2,35,{align:"center"}),De.text("Phone: (123) 456-7890 | Email: company@email.com",De.internal.pageSize.width/2,40,{align:"center"}),De.setLineWidth(.5),De.line(20,45,190,45),De.setFontSize(14),De.setFont(void 0,"bold"),De.text("Salary Receipt",De.internal.pageSize.width/2,55,{align:"center"}),De.setFontSize(10),De.setFont(void 0,"normal");const Ee=new Date(kt),it=`${String(Ee.getDate()).padStart(2,"0")}-${String(Ee.getMonth()+1).padStart(2,"0")}-${Ee.getFullYear()}`;De.text(`Date: ${it}`,170,55,{align:"right"}),De.setFontSize(11),De.text("Employee Name:",20,70),De.text(`${Xe.firstName} ${Xe.lastName}`,80,70),De.text("Employee ID:",20,77),De.text(`${Xe.employeeId}`,80,77),De.text("Department:",20,84),De.text(`${Xe.department}`,80,84),De.text("Month & Year:",20,91),De.text(`${Je} ${ze}`,80,91),De.setLineWidth(.1),De.line(20,105,190,105),De.setFont(void 0,"bold"),De.text("Description",25,112),De.text("Amount",170,112),De.line(20,115,190,115),De.setFont(void 0,"normal"),De.text("Basic Salary",25,122),De.text(`${Fe?.toFixed(2)}/-`,185,122,{align:"right"}),De.text("Leave Information",25,129),De.text("Paid Leave",25,136),De.text(`${Pe}`,185,136,{align:"right"}),De.text("Deductible Leave Days",25,143),De.text(`${Re}`,185,143,{align:"right"}),De.text("Deduction Per Day",25,150),De.text(`${Ye.toFixed(2)}/-`,185,150,{align:"right"}),De.line(20,155,190,155),De.text("Total Deduction",25,162),De.text(`${At.toFixed(2)}/-`,185,162,{align:"right"}),De.line(20,167,190,167),De.setFont(void 0,"bold"),De.text("Payable Salary",25,174),De.text(`${Gt.toFixed(2)}/-`,185,174,{align:"right"}),De.line(20,178,190,178),De.setFontSize(8),De.text("This is a computer-generated document. No signature required.",De.internal.pageSize.width/2,270,{align:"center"}),De.save(`Salary_Receipt_${Xe.firstName}_${Je}_${ze}.pdf`)}catch(kt){throw console.error("Error generating salary receipt:",kt),new Error(`Failed to generate salary receipt: ${kt.message}`)}},Me=async fe=>{if(!fe)return;const ve=fe.deductibleDays||0,pe=fe.totalDeduction||0,Te=fe.payableSalary||fe.salary;try{await Ne(Te,ve,pe,fe)}catch(Xe){console.error("Error downloading salary receipt:",Xe),alert("Failed to generate salary receipt. Please try again.")}},We=e.filter(fe=>{const ve=`${fe.firstName} ${fe.lastName}`.toLowerCase(),pe=s.toLowerCase(),Te=!s||ve.includes(pe)||fe.employeeId&&fe.employeeId.toLowerCase().includes(pe)||fe.phone&&fe.phone.includes(pe),Xe=!o||fe.department===o;return Te&&Xe}),[tt,mt]=j.useState(1),[Be]=j.useState(5),dt=fe=>mt(fe),Dt=tt*Be,It=Dt-Be,zt=We.slice(It,Dt),xe=Math.ceil(We.length/Be);return n.jsx("div",{className:"contanier",children:n.jsx("div",{className:"d-flex justify-content-between align-items-center",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row align-items-center",children:n.jsx("div",{className:"col-md-12",children:n.jsx("h3",{className:"page-title",children:"Payroll Management"})})})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, employee ID, phone",value:s,onChange:fe=>i(fe.target.value)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"All Departments"}),n.jsxs("select",{className:"form-select",value:o,onChange:fe=>l(fe.target.value),children:[n.jsx("option",{value:"",children:"All Departments"}),c.map(fe=>n.jsx("option",{value:fe.name,children:fe.departmentName},fe._id))]})]})})]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-bordered",children:[n.jsx("thead",{className:"thead-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Base Salary"}),n.jsx("th",{className:"text-center",children:"Actions"})]})}),n.jsx("tbody",{children:zt.length>0?zt.map(fe=>n.jsxs("tr",{children:[n.jsx("td",{children:fe.employeeId}),n.jsxs("td",{children:[fe.firstName," ",fe.lastName]}),n.jsx("td",{children:fe.role}),n.jsx("td",{children:fe.department}),n.jsx("td",{children:n.jsxs("strong",{children:["",fe.salary]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[n.jsx("button",{className:"btn btn-primary btn-icon btn-sm",onClick:()=>ne(fe),"data-bs-toggle":"modal","data-bs-target":"#standard-modal",title:"Generate Payslip",children:n.jsx("i",{className:"ti ti-file-dollar"})}),n.jsx("button",{className:"btn btn-secondary btn-icon btn-sm",onClick:()=>W(fe),"data-bs-toggle":"modal","data-bs-target":"#history-modal",title:"View History",children:n.jsx("i",{className:"ti ti-history"})})]})})]},fe._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"text-center",children:"No employees found matching your criteria"})})})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-left",children:[n.jsx("li",{className:`page-item ${tt===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(tt-1),disabled:tt===1,children:""})}),(()=>{const fe=tt,ve=xe,pe=[];if(ve<=3)for(let Te=1;Te<=ve;Te++)pe.push(n.jsx("li",{className:`page-item ${fe===Te?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(Te),children:Te})},Te));else pe.push(n.jsx("li",{className:`page-item ${fe===1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(1),children:"1"})},1)),fe<=2&&pe.push(n.jsx("li",{className:`page-item ${fe===2?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(2),children:"2"})},2)),fe>3&&pe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"start-ellipsis")),fe>2&&fe<ve-1&&pe.push(n.jsx("li",{className:"page-item active",children:n.jsx("button",{className:"page-link",onClick:()=>dt(fe),children:fe})},fe)),fe<ve-2&&pe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"end-ellipsis")),fe>=ve-1&&pe.push(n.jsx("li",{className:`page-item ${fe===ve-1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(ve-1),children:ve-1})},ve-1)),ve>1&&pe.push(n.jsx("li",{className:`page-item ${fe===ve?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(ve),children:ve})},ve));return pe})(),n.jsx("li",{className:`page-item ${tt>=xe?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(tt+1),disabled:tt>=xe,children:""})})]})})})]})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Generate Salary"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"modal-body",children:v&&n.jsxs("div",{children:[n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body bg-light-primary",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:v.profileImage?n.jsx("div",{className:"avatar avatar-lg",children:n.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):n.jsx("div",{className:"avatar avatar-lg bg-soft-primary",children:n.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),n.jsxs("div",{className:"col-md-10",children:[n.jsxs("h4",{children:[v.firstName," ",v.lastName]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Department:"})," ",v.department]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Month:"}),n.jsx("select",{className:"form-select",name:"month",value:V.month,onChange:de,children:R.filter(fe=>{if(V.year===V.joinYear){const ve=R.indexOf(fe),pe=R.indexOf(V.joinMonth);return ve>=pe}return!0}).map(fe=>n.jsx("option",{value:fe,children:fe},fe))})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Year:"}),n.jsx("select",{className:"form-select",name:"year",value:V.year,onChange:H,children:Z.filter(fe=>parseInt(fe)>=parseInt(V.joinYear)).map(fe=>n.jsx("option",{value:fe,children:fe},fe))})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Payment Date:"}),n.jsx("input",{type:"date",name:"date",className:"form-control",value:V.date,onChange:K,min:V.minDate})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Base Salary ():"}),n.jsx("input",{type:"number",name:"salary",className:"form-control",value:V.salary,onChange:K,readOnly:!0})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Per Day ():"}),n.jsx("input",{type:"number",className:"form-control",value:F,onChange:se})]})]}),n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Base Salary ():"}),n.jsx("input",{type:"number",name:"salary",className:"form-control",value:V.salary,onChange:K,readOnly:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Deduction Per Day ():"}),n.jsx("input",{type:"number",className:"form-control",value:F,onChange:se})]})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsx("h5",{className:"card-title mb-0",children:"Attendance & Leave Information"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Total Leave Days:"}),n.jsx("input",{type:"number",className:"form-control",value:k,readOnly:!0}),n.jsxs("small",{className:"text-muted",children:["Excluding ",_," Sundays"]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Paid Leave Allowed:"}),n.jsx("input",{type:"number",className:"form-control",value:P,onChange:be}),n.jsx("small",{className:"text-muted",children:"Default: 1 paid leave per month"})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-0",children:[n.jsx("label",{className:"form-label",children:"Deductible Leave Days:"}),n.jsx("input",{type:"number",className:"form-control",value:ue(),readOnly:!0}),n.jsx("small",{className:"text-muted",children:"After deducting paid leave"})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-0",children:[n.jsx("label",{className:"form-label",children:"Total Deduction ():"}),n.jsx("input",{type:"number",className:"form-control",value:ue()*F,readOnly:!0})]})})]})})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-light-success",children:n.jsx("h5",{className:"card-title mb-0",children:"Final Salary"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsxs("div",{className:"col-md-8",children:[n.jsx("label",{className:"form-label",children:"Payable Salary ():"}),n.jsx("input",{type:"number",className:"form-control form-control-lg",value:oe(),readOnly:!0}),n.jsxs("small",{className:"text-info",children:["Sundays and ",P," paid leave days are not included in salary deductions"]})]}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"h1 mb-0 text-success",children:["",oe()]}),n.jsx("div",{className:"small text-muted",children:"Final Amount"})]})})]})})]})]})}),n.jsxs("div",{className:"d-flex justify-content-end p-3 gap-2",children:[n.jsx("button",{className:"btn btn-light","data-bs-dismiss":"modal",children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:ge,children:[n.jsx("i",{className:"ti ti-device-floppy me-1"})," Save"]})]})]})})}),n.jsx("div",{id:"history-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"history-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-secondary text-white",children:[n.jsx("h4",{className:"modal-title",id:"history-modalLabel",children:"Salary History"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsxs("div",{className:"modal-body",children:[v&&n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body bg-light",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:v.profileImage?n.jsx("div",{className:"avatar avatar-lg",children:n.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):n.jsx("div",{className:"avatar avatar-lg bg-soft-secondary",children:n.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),n.jsxs("div",{className:"col-md-10",children:[n.jsxs("h4",{children:[v.firstName," ",v.lastName]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Department:"})," ",v.department]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),S.length>0?n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover",children:[n.jsx("thead",{className:"thead-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Month & Year"}),n.jsx("th",{children:"Basic Salary"}),n.jsx("th",{children:"Leave Days"}),n.jsx("th",{children:"Total Deduction"}),n.jsx("th",{children:"Payable Salary"}),n.jsx("th",{children:"Payment Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:[...S].sort((fe,ve)=>new Date(ve.date)-new Date(fe.date)).map(fe=>n.jsxs("tr",{children:[n.jsxs("td",{children:[fe.month," ",fe.year]}),n.jsxs("td",{children:["",fe.salary]}),n.jsxs("td",{children:["Total: ",fe.leaveCount||0,n.jsx("span",{className:"text-muted d-block small",children:fe.sundayCount>0&&` (Sundays: ${fe.sundayCount})`})]}),n.jsx("td",{children:n.jsxs("span",{className:"text-danger",children:["",fe.totalDeduction||0]})}),n.jsx("td",{children:n.jsxs("strong",{className:"text-success",children:["",fe.payableSalary||fe.salary]})}),n.jsx("td",{children:new Date(fe.date).toLocaleDateString()}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Me(fe),children:[n.jsx("i",{className:"ti ti-download me-1"})," ","Download"]})})]},fe._id))})]})}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"mb-3",children:n.jsx("i",{className:"ti ti-file-off text-muted",style:{fontSize:"48px"}})}),n.jsx("h5",{children:"No salary records found"}),n.jsx("p",{className:"text-muted",children:"No salary has been processed for this employee yet."})]})]}),n.jsx("div",{children:n.jsx("button",{className:"btn btn-secondary m-3",onClick:te,"data-bs-dismiss":"modal",style:{width:"200px"},children:"Close"})})]})})})]})})})}function oVe(){const[e,t]=j.useState({companyName:"",address:"",phone:"",email:"",currentBalance:"",previousBalance:""}),[r,a]=j.useState({}),[s,i]=j.useState(!1),[o,l]=j.useState(""),c=h=>{const{name:f,value:p}=h.target;t(v=>({...v,[f]:p})),r[f]&&a(v=>({...v,[f]:""}))},d=()=>{const h={};return e.companyName.trim()||(h.companyName="Company name is required"),e.address.trim()||(h.address="Address is required"),e.phone.trim()?/^\d{10}$/.test(e.phone.replace(/[-\s]/g,""))||(h.phone="Please enter a valid 10-digit phone number"):h.phone="Phone is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(h.email="Please enter a valid email address"):h.email="Email is required",e.currentBalance&&isNaN(e.currentBalance)&&(h.currentBalance="Please enter a valid number"),e.previousBalance&&isNaN(e.previousBalance)&&(h.previousBalance="Please enter a valid number"),a(h),Object.keys(h).length===0},u=async h=>{if(h.preventDefault(),!!d()){i(!0),l("");try{const f=await fetch("/api/dieacompanies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:e.companyName,address:e.address,phone:e.phone,email:e.email,currentBalance:parseFloat(e.currentBalance)||0,previousBalance:parseFloat(e.previousBalance)||0})}),p=await f.json();f.ok?(l("Company created successfully!"),t({companyName:"",address:"",phone:"",email:"",currentBalance:"",previousBalance:""})):l(`Error: ${p.message||"Failed to create company"}`)}catch(f){l(`Error: ${f.message}`)}finally{i(!1)}}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Create Company"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),n.jsx("input",{type:"text",id:"companyName",name:"companyName",value:e.companyName,onChange:c,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.companyName?"border-red-500":"border-gray-300"}`,placeholder:"Enter company name"}),r.companyName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.companyName})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{id:"address",name:"address",value:e.address,onChange:c,rows:"3",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter company address"}),r.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.address})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),n.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:c,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),r.phone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.phone})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),n.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),r.email&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"currentBalance",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Balance"}),n.jsx("input",{type:"number",id:"currentBalance",name:"currentBalance",value:e.currentBalance,onChange:c,step:"0.01",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.currentBalance?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),r.currentBalance&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.currentBalance})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"previousBalance",className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous Balance"}),n.jsx("input",{type:"number",id:"previousBalance",name:"previousBalance",value:e.previousBalance,onChange:c,step:"0.01",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ${r.previousBalance?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),r.previousBalance&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.previousBalance})]})]}),n.jsx("div",{children:n.jsx("button",{onClick:u,disabled:s,className:`w-full py-3 px-4 rounded-lg text-white font-medium transition-all ${s?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95"}`,children:s?"Creating...":"Create Company"})}),o&&n.jsx("div",{className:`p-4 rounded-lg ${o.includes("Error")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o})]})]})})})}function lVe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState({companyId:"",particulars:"Maintenance Charge",month:"",amount:"",previousBalance:"",currentBalance:""}),[o,l]=j.useState(""),[c,d]=j.useState(!1),[u,h]=j.useState({}),[f,p]=j.useState(!1),[v,g]=j.useState(""),[b,y]=j.useState(1),[S]=j.useState(10),[w,k]=j.useState("");j.useEffect(()=>{C(),_()},[]),j.useEffect(()=>{const P=q=>{const V=document.querySelector(".company-dropdown-container");V&&!V.contains(q.target)&&d(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const C=async()=>{try{const q=await(await fetch("/api/dieacompanies")).json();console.log("Fetched companies:",q),q.success&&t(q.data)}catch(P){console.error("Error fetching companies:",P)}},_=async()=>{try{const q=await(await fetch("/api/dieainvoices")).json();q.success&&a(q.data)}catch(P){console.error("Error fetching invoices:",P)}},E=P=>{const{name:q,value:V}=P.target;i(Y=>{const B={...Y,[q]:V},Q=parseFloat(B.amount),R=parseFloat(B.previousBalance);return!isNaN(Q)&&!isNaN(R)?B.currentBalance=(Q+R).toFixed(2):B.currentBalance="",B}),u[q]&&h(Y=>({...Y,[q]:""}))},T=()=>{const P={};return s.companyId||(P.companyId="Please select a company"),s.particulars||(P.particulars="Particulars is required"),s.month||(P.month="Month is required"),s.amount||(P.amount="Amount is required"),s.previousBalance||(P.previousBalance="Previous balance is required"),h(P),Object.keys(P).length===0},I=P=>{const q=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],V=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],Y=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];if(P===0)return"Zero";const B=Q=>Q===0?"":Q<10?q[Q]:Q<20?Y[Q-10]:Q<100?V[Math.floor(Q/10)]+(Q%10?" "+q[Q%10]:""):q[Math.floor(Q/100)]+" Hundred"+(Q%100?" "+B(Q%100):"");return P<1e3?B(P):P<1e5?B(Math.floor(P/1e3))+" Thousand"+(P%1e3?" "+B(P%1e3):""):P<1e7?B(Math.floor(P/1e5))+" Lakh"+(P%1e5?" "+I(P%1e5):""):"Amount too large"},F=async()=>{if(T()){p(!0),g("");try{const P=e.find(B=>B._id===s.companyId),q={companyId:s.companyId,companyName:P.companyName,companyAddress:P.address,particulars:s.particulars,month:s.month,amount:parseFloat(s.amount),previousBalance:parseFloat(s.previousBalance),currentBalance:parseFloat(s.currentBalance),amountInWords:"INR "+I(Math.floor(parseFloat(s.amount)))+" Only"},V=await fetch("/api/dieainvoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),Y=await V.json();V.ok?(g("Invoice created successfully!"),i({companyId:"",particulars:"Maintenance Charge",month:"",amount:"",previousBalance:"",currentBalance:""}),l(""),_()):g(`Error: ${Y.message}`)}catch(P){g(`Error: ${P.message}`)}finally{p(!1)}}},A=P=>{const q=`upi://pay?pa=2271045000297@cnrb&pn=DYAVASANDRA%20INDUSTRIAL%20ESTATE%20ASSOCIATION&am=${P.amount}&cu=INR&tn=Invoice%20${P.invoiceNo}`,V=window.open("","_blank"),Y=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice_${P.invoiceNo}</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"><\/script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"><\/script>
        <style>
          * { margin: 0;  box-sizing: border-box; }
           body { font-family: Arial, sans-serif;  margin: 0; background: #fff; }
          .invoice { width: 190mm; min-height: 270mm; margin: 0 auto; border: 2px solid #000;  background: #fff; margin-top: 30px; }
          
          .header { 
 
  border-bottom: 2px solid #000;
  
  display: flex; 
  align-items: stretch;
}

.header-left { 
  display: flex; 
  flex-direction: column;
  align-items: flex-start; 
  flex: 1; 
  gap: 5px;
 
  border-right: 1px solid #000;
}

.logo { 
  width: 80px; 
  height: 80px; 
  flex-shrink: 0; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  background: #fff;
}

.logo img { 
  width: 100%; 
  height: 100%; 
  object-fit: contain; 
}

.logo-text { 
  font-size: 24px; 
  font-weight: bold; 
}

.header-content { 
  flex-grow: 1; 
  padding-top: 5px;
}

.header h1 { 
  font-size: 16px; 
  font-weight: bold; 
  margin: 0 0 5px 0;
  text-align: left;
}

.header h2 { 
  font-size: 13px; 
  font-weight: bold; 
  margin: 0 0 3px 0; 
}

.header p { 
  font-size: 10px; 
  margin: 2px 0; 
  line-height: 1.4; 
}

.header-top{
   padding: 5px;
   display: flex;
}

.buyer-section-top{
   padding: 5px;
   display: flex;
   flex-direction: column;
}

.header-right { 
  
  text-align: left; 
  min-width: 280px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  
}

.invoice-no-section{
  text-align: left;
  height: 18%;
  width: 100%;
  border-bottom: 1px solid #000;
  border-right: 1px solid #000;
 }

 .date-section{
  text-align: left;
  height: 18%;
  width: 100%;
  border-bottom: 1px solid #000;
  
  }

.header-right p { 
  font-size: 11px; 
  margin: 0;
  font-weight: normal;
}

.header-right .value { 
  font-weight: bold;
  margin-bottom: 10px;
}
          
          .buyer-section { border-top: 1px solid #000; min-height: 30px;width:100%;  }
          .buyer-section p { font-size: 11px; margin: 3px 0; line-height: 1.3; }
          .buyer-section .label { font-size: 10px; }
          
          .table-section { border-bottom: 0px solid #000; }
            .table { width: 100%; border-collapse: collapse; }
            .table th, .table td { 
            border-top: none;
            border-bottom: 0.2px solid #000;
            border-left: none;
            border-right: 0.2px solid #000;
            padding: 8px 10px; 
            font-size: 11px; 
            margin: 0px; 
            }
            .table th:last-child, .table td:last-child {
            border-right: none;
            }
            .table th { background-color: #fff; font-weight: normal; text-align: center; }
            .table td { vertical-align: top; }
            .table .sl-col { width: 4%; text-align: center; }
            .table .particulars-col { width: 72%; }
            .table .amount-col { width: 20%; text-align: right; }
            .particulars-content { min-height: 380px; }
            .total-row { text-align: right; }
            .total-label { font-weight: normal; }

            .amount-words-section { padding: 4px; }
            .amount-words-section p { font-size: 11px; margin: 3px 0; }
            .amount-words-section .label { font-style: italic; font-weight: normal; }
          
          .qr-balance-section { display: flex; min-height: 150px; justify-content: space-between;  }
          .qr-section { width: 120px; padding: 9px; text-align: center; border: 1px solid #000;margin: 10px; }
          #qrcode { width: 100px; height: 100px; margin: 8px auto; }
          #qrcode img { width: 100% !important; height: 100% !important; }
          .qr-section p { font-size: 10px; margin-top: 8px; }
          .right-section { padding: 10px; width: 390px; }
          .balance-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
          .balance-label { font-size: 11px; }
          .balance-value { font-size: 11px; text-align: right; }
          .bank-details-right { margin-top: 12px; }
          .bank-details-right p { font-size: 10px; margin: 2px 0; line-height: 1.4; }
          .bank-details-left{
             margin-left: 150px;
          }
          .bank-footer { padding: 10px; border-bottom: 2px solid #000; }
          .bank-footer p { font-size: 10px; text-align: right; }
          
          .footer { padding: 10px; text-align: right; }
          .footer p { font-size: 11px; margin: 3px 0; }
          .footer .signature-line { margin-top: 10px; margin-bottom: 5px; }
          .footer .note { font-size: 9px; margin-top: 8px; }
          
          .loading-msg { text-align: center; margin-top: 20px; padding: 20px; }
          .loading-msg p { color: #666; font-size: 14px; }
        </style>
      </head>
      <body>
        <div class="invoice">
          <div class="header">
            <div class="header-left">
            <div class="header-top">
              <div class="logo">
                <img src="./diea.jpeg" alt="DIEA Logo" onerror="this.parentElement.innerHTML='<span class=\\'logo-text\\'>DIEA</span>'"/>
              </div>
              <div class="header-content">
                <h1>DEMAND NOTE</h1>
                <h2>DYAVASANDRA INDUSTRIAL ESTATE ASSOCIATION</h2>
                <p>PLOT NO.SPL.2(A), 2ND CROSS, DYAVASANDRA IND ESTATE</p>
                <p>WHITEFIELD ROAD, MAHADEVPURA PO, BENGALURU - 560 048</p>
                <p>Contact : +91-9686976679</p>
                <p>E-Mail : diea.mdpr2000@gmail.com</p>
                <p>www.diea.in</p>
              </div>
              </div>

               <div class="buyer-section buyer-section-top">
            <p class="label">Buyer (Bill to)</p>
            <p style="font-weight: bold; margin-top: 5px;">${P.companyName}</p>
            <p>${P.companyAddress}</p>
          </div>

            </div>
            
            <div class="header-right">
            
                <div class="invoice-no-section">
                    <p>Invoice No.</p>
                    <p class="value">${P.invoiceNo}</p>
                </div>
                <div class="date-section">
                    <p style="margin-top: 5px;">Dated</p>
                    <p class="value">${new Date(P.invoiceDate).toLocaleDateString("en-GB")}</p>
                </div>
                
            </div>
          </div>
          
         
          
          <div class="table-section">
            <table class="table">
              <thead>
                <tr>
                  <th class="sl-col">Sl<br/>No.</th>
                  <th class="particulars-col">Particulars</th>
                  <th class="amount-col">Amount</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="sl-col">1</td>
                  <td class="particulars-col">
                    <div class="particulars-content">
                      <strong>${P.particulars}</strong><br/>
                      ${P.month}
                    </div>
                  </td>
                  <td class="amount-col">${P.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
                </tr>
                <tr>
                  <td colspan="2" class="total-row total-label">Total</td>
                  <td class="amount-col"> ${P.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="amount-words-section">
            <p class="label">Amount Chargeable (in words)</p>
            <p>${P.amountInWords}</p>
            <p style="text-align: right; margin-top: 5px;">E. & O.E</p>
          </div>
          
          <div class="qr-balance-section">
            <div class="qr-section">
              <div id="qrcode"></div>
              <p>Scan to pay</p>
            </div>
            <div class="right-section">
              <div class="bank-details-left">
              <div class="balance-row">
                <span class="balance-label">Previous Balance :</span>
                <span class="balance-value"> ${P.previousBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})} Dr</span>
              </div>
              <div class="balance-row">
                <span class="balance-label">Current Balance :</span>
                <span class="balance-value"> ${P.currentBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})} Dr</span>
              </div>
              </div>
              <div class="bank-details-right">
                <p><strong>Company's Bank Details</strong></p>
                <p>A/c Holder's Name : DYAVASANDRA INDUSTRIAL ESTATE ASSOCIATION</p>
                <p>Bank Name : CANARA BANK</p>
                <p>A/c No. : 2421201000297</p>
                <p>Branch & IFS Code : Mahadevpura & CNRB0002421</p>
              </div>
            </div>
          </div>
          
          <div class="bank-footer">
            <p>for DYAVASANDRA INDUSTRIAL ESTATE ASSOCIATION</p>
          </div>
          
          <div class="footer">
            <p class="signature-line">Authorised Signatory</p>
            <p class="note">This is a computer - Generated document. No signature is required</p>
          </div>
        </div>
        
        <div class="loading-msg">
          <p>Generating PDF... Please wait.</p>
        </div>
        
        <script>
          window.onload = function() {
            new QRCode(document.getElementById("qrcode"), {
              text: "${q}",
              width: 75,
              height: 75,
              colorDark: "#000000",
              colorLight: "#ffffff",
              correctLevel: QRCode.CorrectLevel.H
            });
            
            setTimeout(function() {
              const element = document.querySelector('.invoice');
              const opt = {
                margin: 0,
            filename: '${P.companyName.replace(/[^a-z0-9]/gi,"_")}_${P.invoiceNo}.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
              };
              
              html2pdf().set(opt).from(element).save().then(function() {
                setTimeout(function() {
                  window.close();
                }, 1000);
              });
            }, 800);
          };
        <\/script>
      </body>
      </html>
    `;V.document.write(Y),V.document.close()};return n.jsx("div",{className:"container-fluid bg-light min-vh-100 py-4",children:n.jsxs("div",{className:"container",children:[n.jsxs("div",{className:"card shadow mb-4",children:[n.jsx("div",{className:"card-header bg-primary text-white",children:n.jsx("h2",{className:"mb-0 text-center",children:"DIEA Invoice Generator"})}),n.jsxs("div",{className:"card-body p-4",children:[n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Select Company *"}),n.jsxs("div",{className:"company-dropdown-container position-relative",children:[n.jsx("input",{type:"text",className:`form-control ${u.companyId?"is-invalid":""}`,placeholder:"Search and select company...",value:o,onChange:P=>{l(P.target.value),i(q=>({...q,companyId:""}))},onFocus:()=>d(!0)}),c&&n.jsx("div",{className:"position-absolute w-100 mt-1 bg-white border rounded shadow-lg",style:{zIndex:1e3,maxHeight:"250px",overflowY:"auto"},children:e.filter(P=>P.companyName?.toLowerCase().includes(o.toLowerCase())).map(P=>n.jsx("div",{onClick:()=>{i(q=>({...q,companyId:P._id,previousBalance:P.previousBalance.toString(),currentBalance:q.amount?(P.currentBalance+parseFloat(q.amount)).toFixed(2):P.currentBalance.toString()})),l(P.companyName),d(!1),h(q=>({...q,companyId:""}))},className:"p-3 border-bottom hover-bg-light cursor-pointer",style:{cursor:"pointer"},children:n.jsx("strong",{children:P.companyName})},P._id))}),u.companyId&&n.jsx("div",{className:"invalid-feedback d-block",children:u.companyId})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Particulars *"}),n.jsx("input",{type:"text",name:"particulars",className:`form-control ${u.particulars?"is-invalid":""}`,value:s.particulars,onChange:E,placeholder:"e.g., Maintenance Charge"}),u.particulars&&n.jsx("div",{className:"invalid-feedback",children:u.particulars})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Month *"}),n.jsx("input",{type:"month",name:"month",className:`form-control ${u.month?"is-invalid":""}`,value:s.month,onChange:E}),u.month&&n.jsx("div",{className:"invalid-feedback",children:u.month})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Amount () *"}),n.jsx("input",{type:"number",name:"amount",className:`form-control ${u.amount?"is-invalid":""}`,value:s.amount,onChange:E,step:"0.01",placeholder:"0.00"}),u.amount&&n.jsx("div",{className:"invalid-feedback",children:u.amount})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Previous Balance () *"}),n.jsx("input",{type:"number",name:"previousBalance",className:`form-control ${u.previousBalance?"is-invalid":""}`,value:s.previousBalance,onChange:E,step:"0.01",placeholder:"0.00"}),u.previousBalance&&n.jsx("div",{className:"invalid-feedback",children:u.previousBalance})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label fw-semibold",children:"Current Balance ()"}),n.jsx("input",{type:"text",name:"currentBalance",className:"form-control",value:s.currentBalance,readOnly:!0,style:{backgroundColor:"#e9ecef"}})]})]}),n.jsx("button",{onClick:F,disabled:f,className:"btn btn-primary w-100 mt-4 py-2",children:f?"Creating Invoice...":"Create Invoice"}),v&&n.jsx("div",{className:`alert ${v.includes("Error")?"alert-danger":"alert-success"} mt-3 mb-0`,children:v})]})]}),n.jsxs("div",{className:"card shadow",children:[n.jsxs("div",{className:"card-header bg-primary text-white d-flex justify-content-between align-items-center",children:[n.jsx("h3",{className:"mb-0",children:"Generated Invoices"}),n.jsx("input",{type:"text",className:"form-control w-auto",placeholder:"Search invoices...",value:w,onChange:P=>{k(P.target.value),y(1)},style:{maxWidth:"250px"}})]}),n.jsx("div",{className:"card-body p-0",children:r.length===0?n.jsx("p",{className:"text-center text-muted py-5",children:"No invoices generated yet"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover mb-0",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Invoice No."}),n.jsx("th",{children:"Company"}),n.jsx("th",{children:"Month"}),n.jsx("th",{className:"text-end",children:"Amount"}),n.jsx("th",{className:"text-end",children:"Balance"}),n.jsx("th",{className:"text-center",children:"Action"})]})}),n.jsx("tbody",{children:r.filter(P=>P.companyName?.toLowerCase().includes(w.toLowerCase())||P.invoiceNo?.toLowerCase().includes(w.toLowerCase())||P.month?.toLowerCase().includes(w.toLowerCase())).slice((b-1)*S,b*S).map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.invoiceNo}),n.jsx("td",{children:P.companyName}),n.jsx("td",{children:P.month}),n.jsxs("td",{className:"text-end",children:["",P.amount.toFixed(2)]}),n.jsxs("td",{className:"text-end",children:["",P.currentBalance.toFixed(2)]}),n.jsx("td",{className:"text-center",children:n.jsx("button",{onClick:()=>A(P),className:"btn btn-success btn-sm",children:"Download PDF"})})]},P._id))})]})}),n.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[n.jsxs("div",{className:"text-muted",children:["Showing ",(b-1)*S+1," to ",Math.min(b*S,r.filter(P=>P.companyName?.toLowerCase().includes(w.toLowerCase())||P.invoiceNo?.toLowerCase().includes(w.toLowerCase())||P.month?.toLowerCase().includes(w.toLowerCase())).length)," of ",r.filter(P=>P.companyName?.toLowerCase().includes(w.toLowerCase())||P.invoiceNo?.toLowerCase().includes(w.toLowerCase())||P.month?.toLowerCase().includes(w.toLowerCase())).length," entries"]}),n.jsx("nav",{children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${b===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(b-1),children:"Previous"})}),[...Array(Math.ceil(r.filter(P=>P.companyName?.toLowerCase().includes(w.toLowerCase())||P.invoiceNo?.toLowerCase().includes(w.toLowerCase())||P.month?.toLowerCase().includes(w.toLowerCase())).length/S))].map((P,q)=>n.jsx("li",{className:`page-item ${b===q+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(q+1),children:q+1})},q)),n.jsx("li",{className:`page-item ${b===Math.ceil(r.filter(P=>P.companyName?.toLowerCase().includes(w.toLowerCase())||P.invoiceNo?.toLowerCase().includes(w.toLowerCase())||P.month?.toLowerCase().includes(w.toLowerCase())).length/S)?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(b+1),children:"Next"})})]})})]})]})})]})]})})}function cVe(){const[e,t]=j.useState(!1),r=({children:a})=>n.jsx(uae,{children:n.jsxs("div",{className:`  main-wrapper ${e?"slide-nav":""}`,children:[n.jsx(cae,{}),n.jsx(dae,{toggleSidebar:()=>t(s=>!s)}),n.jsx("div",{className:"page-wrapper",children:a})]})});return n.jsx(n.Fragment,{children:n.jsx(Nte,{children:n.jsxs(Jee,{children:[n.jsx(hr,{path:"/login",element:n.jsx(_be,{})}),n.jsx(hr,{path:"/register",element:n.jsx(Abe,{})}),n.jsx(hr,{path:"/Access",element:n.jsx(J4e,{})}),n.jsx(hr,{path:"/gst",element:n.jsx(r,{children:n.jsx(Z4e,{})})}),n.jsx(hr,{path:"loginscreen",element:n.jsx(Dbe,{})}),n.jsx(hr,{path:"/company-form",element:n.jsx(r,{children:n.jsx(B4e,{})})}),n.jsx(hr,{path:"/",element:n.jsx(r,{children:n.jsx(Ebe,{})})}),n.jsx(hr,{path:"/eway",element:n.jsx(r,{children:n.jsx(Q4e,{})})}),n.jsx(hr,{path:"/MaterialCategory",element:n.jsx(r,{children:n.jsx(hU,{})})}),n.jsx(hr,{path:"/PurchaseIndentsummary",element:n.jsx(r,{children:n.jsx(RDe,{})})}),n.jsx(hr,{path:"/PurchaseOrderList",element:n.jsx(r,{children:n.jsx(T4e,{})})}),n.jsx(hr,{path:"/SaleContractCategory",element:n.jsx(r,{children:n.jsx(fU,{})})}),n.jsx(hr,{path:"/PurchaseQuotation",element:n.jsx(r,{children:n.jsx(FDe,{})})}),n.jsx(hr,{path:"/PurchaseQuotationsDisplay",element:n.jsx(r,{children:n.jsx(i4e,{})})}),n.jsx(hr,{path:"/PurchaseOrder",element:n.jsx(r,{children:n.jsx(o4e,{})})}),n.jsx(hr,{path:"/PurchaseEnquiry",element:n.jsx(r,{children:n.jsx(MDe,{})})}),n.jsx(hr,{path:"/PurchaseContractsummary",element:n.jsx(r,{children:n.jsx(eIe,{})})}),n.jsx(hr,{path:"/PurchaseContract",element:n.jsx(r,{children:n.jsx(tIe,{})})}),n.jsx(hr,{path:"/SalesContract",element:n.jsx(r,{children:n.jsx(rIe,{})})}),n.jsx(hr,{path:"/SalesContractsummary",element:n.jsx(r,{children:n.jsx(aIe,{})})}),n.jsx(hr,{path:"/SalesEnquiry",element:n.jsx(r,{children:n.jsx(I4e,{})})}),n.jsx(hr,{path:"/SalesEnquiryList",element:n.jsx(r,{children:n.jsx(P4e,{})})}),n.jsx(hr,{path:"/SalesQuotation",element:n.jsx(r,{children:n.jsx(O4e,{})})}),n.jsx(hr,{path:"/SalesQuotationList",element:n.jsx(r,{children:n.jsx(M4e,{})})}),n.jsx(hr,{path:"/SalesOrder",element:n.jsx(r,{children:n.jsx(R4e,{})})}),n.jsx(hr,{path:"/SalesOrderList",element:n.jsx(r,{children:n.jsx(F4e,{})})}),n.jsx(hr,{path:"/MatrialIssue",element:n.jsx(r,{children:n.jsx(n9,{})})}),n.jsx(hr,{path:"/MatrialReceipt",element:n.jsx(r,{children:n.jsx(i9,{})})}),n.jsx(hr,{path:"/MatrialTransfer",element:n.jsx(r,{children:n.jsx(l9,{})})}),n.jsx(hr,{path:"/MatrialTransferList",element:n.jsx(r,{children:n.jsx(Y8e,{})})}),n.jsx(hr,{path:"/MaterialIssueList",element:n.jsx(r,{children:n.jsx(s9,{})})}),n.jsx(hr,{path:"/MatrialReceiptList",element:n.jsx(r,{children:n.jsx(o9,{})})}),n.jsx(hr,{path:"/StockListERP",element:n.jsx(r,{children:n.jsx(c9,{})})}),n.jsx(hr,{path:"/GeneralCondition",element:n.jsx(r,{children:n.jsx(ODe,{})})}),n.jsx(hr,{path:"/ProcessList",element:n.jsx(r,{children:n.jsx(PDe,{})})}),n.jsx(hr,{path:"/customer-form",element:n.jsx(r,{children:n.jsx(U4e,{})})}),n.jsx(hr,{path:"/customer-price-list",element:n.jsx(r,{children:n.jsx($4e,{})})}),n.jsx(hr,{path:"/locationmaster",element:n.jsx(r,{children:n.jsx(V4e,{})})}),n.jsx(hr,{path:"/material-form",element:n.jsx(r,{children:n.jsx(TDe,{})})}),n.jsx(hr,{path:"/tax-form",element:n.jsx(r,{children:n.jsx(q4e,{})})}),n.jsx(hr,{path:"/vendor-form",element:n.jsx(r,{children:n.jsx(z4e,{})})}),n.jsx(hr,{path:"/vendor-price-list",element:n.jsx(r,{children:n.jsx(H4e,{})})}),n.jsx(hr,{path:"/GoodsIssueFormUI",element:n.jsx(r,{children:n.jsx(n9,{})})}),n.jsx(hr,{path:"/goods-issue-list",element:n.jsx(r,{children:n.jsx(s9,{})})}),n.jsx(hr,{path:"/GoodsReciept",element:n.jsx(r,{children:n.jsx(i9,{})})}),n.jsx(hr,{path:"/GoodsReceiptList",element:n.jsx(r,{children:n.jsx(o9,{})})}),n.jsx(hr,{path:"/GoodsTransfer",element:n.jsx(r,{children:n.jsx(l9,{})})}),n.jsx(hr,{path:"/StockListERP",element:n.jsx(r,{children:n.jsx(c9,{})})}),n.jsx(hr,{path:"/InvoiceList",element:n.jsx(r,{children:n.jsx(G4e,{})})}),n.jsx(hr,{path:"/InvoiceForm",element:n.jsx(r,{children:n.jsx(Y4e,{})})}),n.jsx(hr,{path:"/DieaCompany",element:n.jsx(r,{children:n.jsx(oVe,{})})}),n.jsx(hr,{path:"/DieaInvoice",element:n.jsxs(r,{children:["  ",n.jsx(lVe,{})]})}),n.jsx(hr,{path:"/BillingForm",element:n.jsx(r,{children:n.jsx(K4e,{})})}),n.jsx(hr,{path:"/BillingDisplay",element:n.jsx(r,{children:n.jsx(X4e,{})})}),n.jsx(hr,{path:"/Ledger",element:n.jsx(r,{children:n.jsx(sIe,{})})}),n.jsx(hr,{path:"/Payments",element:n.jsx(r,{children:n.jsx(oIe,{})})}),n.jsx(hr,{path:"/MRP",element:n.jsx(r,{children:n.jsx(iIe,{})})}),n.jsx(hr,{path:"/PaymentDisplay",element:n.jsx(r,{children:n.jsx(nIe,{})})}),n.jsx(hr,{path:"/MaterialCategory",element:n.jsx(r,{children:n.jsx(hU,{})})}),n.jsx(hr,{path:"/customer-category-form",element:n.jsx(r,{children:n.jsx(R8e,{})})}),n.jsx(hr,{path:"/GoodsIssueCategory",element:n.jsx(r,{children:n.jsx(F8e,{})})}),n.jsx(hr,{path:"/GoodsReceiptCategory",element:n.jsx(r,{children:n.jsx(L8e,{})})}),n.jsx(hr,{path:"/InvoiceCategory",element:n.jsx(r,{children:n.jsx(B8e,{})})}),n.jsx(hr,{path:"/BillingCategory",element:n.jsx(r,{children:n.jsx(M8e,{})})}),n.jsx(hr,{path:"/POCategory",element:n.jsx(r,{children:n.jsx(U8e,{})})}),n.jsx(hr,{path:"/Purchaserequestcat",element:n.jsx(r,{children:n.jsx($8e,{})})}),n.jsx(hr,{path:"/sale-quotation-category-form",element:n.jsx(r,{children:n.jsx(q8e,{})})}),n.jsx(hr,{path:"/SalesCategory",element:n.jsx(r,{children:n.jsx(z8e,{})})}),n.jsx(hr,{path:"/SalesOrderCategoryForm",element:n.jsx(r,{children:n.jsx(H8e,{})})}),n.jsx(hr,{path:"/SaleContractCategoryForm",element:n.jsx(r,{children:n.jsx(fU,{})})}),n.jsx(hr,{path:"/TransferCategory",element:n.jsx(r,{children:n.jsx(W8e,{})})}),n.jsx(hr,{path:"/vendor-category",element:n.jsx(r,{children:n.jsx(G8e,{})})}),n.jsx(hr,{path:"/RFQCategoryForm",element:n.jsx(r,{children:n.jsx(V8e,{})})}),n.jsx(hr,{path:"/PurchaseContractCategory",element:n.jsx(r,{children:n.jsx(lIe,{})})}),n.jsx(hr,{path:"/contacts",element:n.jsx(r,{children:n.jsx(K8e,{})})}),n.jsx(hr,{path:"/leads",element:n.jsx(r,{children:n.jsx(X8e,{})})}),n.jsx(hr,{path:"/proposals",element:n.jsx(r,{children:n.jsx(Z8e,{})})}),n.jsx(hr,{path:"/sources",element:n.jsx(r,{children:n.jsx(eBe,{})})}),n.jsx(hr,{path:"/lost-reason",element:n.jsx(r,{children:n.jsx(tBe,{})})}),n.jsx(hr,{path:"/contact-stage",element:n.jsx(r,{children:n.jsx(rBe,{})})}),n.jsx(hr,{path:"/industry",element:n.jsx(r,{children:n.jsx(aBe,{})})}),n.jsx(hr,{path:"/calls",element:n.jsx(r,{children:n.jsx(nBe,{})})}),n.jsx(hr,{path:"/milestones",element:n.jsx(r,{children:n.jsx(sBe,{})})}),n.jsx(hr,{path:"/tasks",element:n.jsx(r,{children:n.jsx(iBe,{})})}),n.jsx(hr,{path:"/time-entries",element:n.jsx(r,{children:n.jsx(oBe,{})})}),n.jsx(hr,{path:"/projects",element:n.jsx(r,{children:n.jsx(lBe,{})})}),n.jsx(hr,{path:"/campaigns",element:n.jsx(r,{children:n.jsx(cBe,{})})}),n.jsx(hr,{path:"/analytics",element:n.jsx(r,{children:n.jsx(dBe,{})})}),n.jsx(hr,{path:"/SalesDelivery",element:n.jsx(r,{children:n.jsx(L4e,{})})}),n.jsx(hr,{path:"/SalesDeliveryList",element:n.jsx(r,{children:n.jsx(uBe,{})})}),n.jsx(hr,{path:"/employee",element:n.jsx(r,{children:n.jsx(hBe,{})})}),n.jsx(hr,{path:"/leaverequest",element:n.jsx(r,{children:n.jsx(pBe,{})})}),n.jsx(hr,{path:"/leavemanagement",element:n.jsx(r,{children:n.jsx(i$e,{})})}),n.jsx(hr,{path:"/payroll",element:n.jsx(r,{children:n.jsx(iVe,{})})}),n.jsx(hr,{path:"/departments",element:n.jsx(r,{children:n.jsx(fBe,{})})}),n.jsx(hr,{path:"/designation",element:n.jsx(r,{children:n.jsx(mBe,{})})}),n.jsx(hr,{path:"/attendancereg",element:n.jsx(r,{children:n.jsx(I8e,{})})}),n.jsx(hr,{path:"/attendancetaking",element:n.jsx(r,{children:n.jsx(P8e,{})})}),n.jsx(hr,{path:"/attendancereport",element:n.jsx(r,{children:n.jsx(O8e,{})})})]})})})}iee.createRoot(document.getElementById("root")).render(n.jsx(j.StrictMode,{children:n.jsx(cVe,{})}));export{ty as _,dVe as c,Kc as g};
